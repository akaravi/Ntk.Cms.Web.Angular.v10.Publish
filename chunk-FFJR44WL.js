import{a as ce}from"./chunk-FNI7GNBM.js";import{b as se,c as de}from"./chunk-O3XQOHUB.js";import{b as ae}from"./chunk-CU3OLILU.js";import{a as le}from"./chunk-GHOZ2SNL.js";import{$b as X,Dc as re,Ja as G,Pa as j,Wb as U,Xb as q,Yb as J,Zb as K,_b as Q,ac as Y,bc as Z,cc as ee,fc as te,gc as ie,oa as B,uc as oe,vc as ne}from"./chunk-QFK6R63V.js";import{m as W}from"./chunk-WNRZ34IP.js";import{a as T}from"./chunk-AXHTCGA7.js";import{$d as z,Ca as w,Fa as r,Jb as E,Jc as P,Ka as c,Mb as m,Nb as x,Ob as v,Od as F,Pa as N,Td as $,Va as M,Vb as y,Xa as V,bc as C,ca as p,cb as H,cc as _,da as u,de as L,ib as l,if as R,jb as a,kb as d,lb as h,pb as I,qb as A,rb as D,sb as b,uc as O,vb as f,xb as s}from"./chunk-MDNBQXON.js";import{i as k}from"./chunk-SEDBTTTN.js";function pe(o,i){if(o&1){let e=b();a(0,"button",13),f("click",function(){p(e);let n=s();return u(n.onActionAdd())}),m(1),C(2,"translate"),d()}o&2&&(r(),x(_(2,1,"ACTION.ADD")))}function ue(o,i){if(o&1){let e=b();a(0,"button",14),f("click",function(){p(e);let n=s();return u(n.onActionEdit())}),m(1),C(2,"translate"),d()}o&2&&(r(),x(_(2,1,"ACTION.EDIT")))}function fe(o,i){if(o&1){let e=b();a(0,"button",15),f("click",function(){p(e);let n=s();return u(n.onActionDelete())}),m(1),C(2,"translate"),d()}o&2&&(r(),x(_(2,1,"ACTION.DELETE")))}function Ce(o,i){if(o&1){let e=b();a(0,"button",16),f("click",function(){p(e);let n=s();return u(n.onActionButtonReload())}),a(1,"mat-icon",17),C(2,"translate"),m(3,"refresh"),d()()}o&2&&(r(),l("title",y(_(2,2,"ACTION.RELOAD"))))}function _e(o,i){if(o&1&&(h(0,"img",21),C(1,"cmsthumbnail")),o&2){let e=s().$implicit;l("src",y(_(1,2,e.linkMainImageIdSrc)),w)}}function be(o,i){if(o&1){let e=b();a(0,"mat-tree-node",18),f("click",function(){let n=p(e).$implicit,g=s();return u(g.onActionSelect(n))}),h(1,"button",19),M(2,_e,2,4,"img",20),m(3),d()}if(o&2){let e=i.$implicit,t=i.dataIndex,n=s();E("ntk-tree-odd",t%2)("ntk-tree-even",!(t%2))("ntk-tree-selected",n.dataModelSelect.id>0&&n.dataModelSelect.id===e.id),r(2),l("ngIf",e.linkMainImageIdSrc),r(),v(" ",e.title," ")}}function ge(o,i){if(o&1&&(h(0,"img",21),C(1,"cmsthumbnail")),o&2){let e=s().$implicit;l("src",y(_(1,2,e.linkMainImageIdSrc)),w)}}function Se(o,i){if(o&1){let e=b();a(0,"mat-nested-tree-node")(1,"li")(2,"div",22),f("click",function(){let n=p(e).$implicit,g=s();return u(g.onActionSelect(n))}),a(3,"button",23),f("click",function(){let n=p(e).$implicit,g=s();return u(g.onActionSelect(n))}),a(4,"mat-icon",24),m(5),d()(),M(6,ge,2,4,"img",20),m(7),d(),a(8,"ul"),D(9,25),d()()()}if(o&2){let e=i.$implicit,t=s();r(2),E("ntk-tree-selected",t.dataModelSelect.id>0&&t.dataModelSelect.id===e.id),r(),H("aria-label","Toggle "+e.title),r(2),v(" ",t.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),r(),l("ngIf",e.linkMainImageIdSrc),r(),v(" ",e.title," "),r(),E("category-tree-invisible",!t.treeControl.isExpanded(e))}}var S=class S{constructor(i,e,t,n,g,Me,he,ve,Te){this.cmsToastrService=i;this.coreEnumService=e;this.categoryService=t;this.dialog=n;this.cdr=g;this.publicHelper=Me;this.tokenHelper=he;this.cmsStoreService=ve;this.translate=Te;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new R;this.dataModelResult=new F;this.filterModel=new $;this.treeControl=new U(i=>null);this.dataSource=new ee;this.optionChange=new V;this.optionReload=()=>this.onActionButtonReload();this.hasChild=(i,e)=>!1;this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(i){this.onActionSelectForce(i)}ngOnInit(){setTimeout(()=>{this.DataGetAll()},500),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(i=>i.tokenInfoStore).subscribe(i=>k(this,null,function*(){this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(i)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i,!1)}})}onActionSelect(i){this.dataModelSelect=i,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new R,this.DataGetAll()}onActionSelectForce(i){}onActionAdd(){var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(se,{height:"90%",panelClass:i,enterAnimationDuration:T.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:T.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let i=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(i=this.dataModelSelect.id),i===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(n=>{this.cmsToastrService.typeErrorSelected(n)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(de,{height:"90%",panelClass:e,enterAnimationDuration:T.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:T.cmsViewConfig.exitAnimationDuration,data:{id:i}}).afterClosed().subscribe(n=>{n&&n.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let i=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(i=this.dataModelSelect.id),i===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(e=>{this.cmsToastrService.typeErrorSelected(e)});return}}};S.\u0275fac=function(e){return new(e||S)(c(ne),c(z),c(L),c(G),c(O),c(re),c(oe),c(W),c(te))},S.\u0275cmp=N({type:S,selectors:[["app-core-module-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:15,vars:14,consts:[[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[1,"category-tree","cursor-pointer",3,"dataSource","treeControl"],["matTreeNodePadding","",3,"ntk-tree-odd","ntk-tree-even","ntk-tree-selected","click",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding","",3,"click"],["type","button","mat-icon-button","","disabled","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"mat-tree-node",3,"click"],["type","button","mat-icon-button","","matTreeNodeToggle","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"mat-icon-rtl-mirror"],["matTreeNodeOutlet",""]],template:function(e,t){e&1&&(a(0,"app-cms-html-tree",0),I(1,1),m(2),C(3,"translate"),A(),I(4,2),M(5,pe,3,3,"button",3)(6,ue,3,3,"button",4)(7,fe,3,3,"button",5)(8,Ce,4,4,"button",6),A(),I(9,7),h(10,"app-progress-spinner",8),a(11,"mat-tree",9),M(12,be,4,8,"mat-tree-node",10)(13,Se,10,8,"mat-nested-tree-node",11),d(),A(),D(14,12),d()),e&2&&(l("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),r(2),v(" ",_(3,12,"TABLE."+(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.moduleEntityName))," "),r(3),l("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),r(),l("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)&&(t.dataModelSelect==null?null:t.dataModelSelect.id)>0),r(),l("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow)&&(t.dataModelSelect==null?null:t.dataModelSelect.id)>0),r(),l("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(2),l("optionsInfoAreaId",t.constructorInfoAreaId),r(),l("dataSource",t.dataSource)("treeControl",t.treeControl),r(2),l("matTreeNodeDefWhen",t.hasChild))},dependencies:[P,B,j,K,J,Q,Z,Y,q,X,le,ce,ie,ae],encapsulation:2});var me=S;export{me as a};
