import{a as me}from"./chunk-HLB6IX4E.js";import{a as de}from"./chunk-SXFJKVOT.js";import{f as ue}from"./chunk-OESJBRQ5.js";import{I as re,Qb as ce,Rb as pe,U as ne,aa as oe,bb as se,da as ae,ea as le,m as Z,p as ee,t as te,z as ie}from"./chunk-LGROFW5T.js";import{$e as L,Ab as H,Ca as b,F,Fa as a,Fd as K,Ha as N,I as k,Ib as j,Jc as W,Jd as v,Kb as G,Kc as $,Kd as Q,Nb as _,Oa as d,Ob as T,P as D,Pb as z,Q as V,Qc as J,Sa as q,Td as X,Wb as g,Wd as Y,Xb as A,Ya as p,cc as f,da as M,db as x,dc as h,ea as P,jb as o,kb as l,lb as s,mb as u,nd as S,p as w,q as E,sd as C,tb as y,vc as U,wb as I,yb as m,zb as B}from"./chunk-GHCCPFHI.js";import{i as O}from"./chunk-SEDBTTTN.js";var ve=["*"];function _e(n,e){if(n&1&&(l(0,"label",14),_(1),s()),n&2){let t=m();o("for",A("app-cms-site-selector-",t.id)),a(),T(t.optionLabel)}}function ge(n,e){if(n&1&&(u(0,"img",15),f(1,"cmsthumbnail")),n&2){let t=m();o("src",g(h(1,2,t.dataModelSelect==null?null:t.dataModelSelect.linkImageIdSrc)),b)}}function Se(n,e){if(n&1&&(u(0,"img",15),f(1,"cmsthumbnail")),n&2){let t=m().$implicit;o("src",g(h(1,2,t.linkImageIdSrc)),b)}}function Ce(n,e){if(n&1&&(l(0,"mat-option",16),p(1,Se,2,4,"img",5),l(2,"span"),_(3),s()()),n&2){let t=e.$implicit,i=m();o("value",t)("disabled",i.optionDisabled),a(),o("ngIf",t.linkImageIdSrc),a(2),T(i.displayOption(t))}}function Me(n,e){n&1&&u(0,"i",17)}function Pe(n,e){n&1&&u(0,"i",18)}function Ie(n,e){if(n&1){let t=y();l(0,"i",19),I("click",function(){M(t);let r=m();return P(r.onActionSelectClear())}),s()}}function Le(n,e){n&1&&(l(0,"em"),_(1),f(2,"translate"),s()),n&2&&(a(),z("(",h(2,1,"TITLE.Necessary"),")"))}var c=class c{constructor(e,t,i,r,R){this.coreEnumService=e;this.translate=t;this.publicHelper=i;this.cdr=r;this.categoryService=R;this.id=++c.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new K;this.dataModelSelect=new L;this.formControl=new te;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new N;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(D(""),F(1500),k(),V(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}displayOption(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}DataGetAll(e){return O(this,null,function*(){let t=new Q;if(t.rowPerPage=20,t.accessLoad=!0,e&&e.length>0){let r=new v;r=new v,r.propertyName="Symbol",r.value=e,r.searchType=C.Contains,r.clauseType=S.Or,t.filters.push(r),r=new v,r.propertyName="Title",r.value=e,r.searchType=C.Contains,r.clauseType=S.Or,t.filters.push(r),r=new v,r.propertyName="TitleResourceLanguage",r.value=e,r.searchType=C.Contains,r.clauseType=S.Or,t.filters.push(r),r=new v,r.propertyName="Id",r.value=e,r.searchType=C.Equal,r.clauseType=S.Or,t.filters.push(r)}let i=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(r=>{this.publicHelper.processService.processStart(i,r,this.constructorInfoAreaId)}),yield w(this.categoryService.ServiceGetAll(t)).then(r=>(this.dataModelResult=r,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(i),r.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe(E(t=>(t.find(i=>i.id===e.id)||t.push(e),t)))}onActionSelectForce(e){if(typeof e=="number"&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(t=>t.id===e)){let t=this.dataModelResult.listItems.find(i=>i.id===e);this.dataModelSelect=t,this.formControl.setValue(t);return}this.categoryService.ServiceGetOneIncludeParent(e).subscribe({next:t=>{t.isSuccess&&(this.filteredOptions=this.push(t.item),this.dataModelSelect=t.item,this.formControl.setValue(t.item),this.optionChange.emit(t.item))}});return}if(typeof e==typeof L){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new L,this.loadOptions()}};c.nextId=0,c.\u0275fac=function(t){return new(t||c)(d(X),d(ce),d(ue),d(U),d(Y))},c.\u0275cmp=q({type:c,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:ve,decls:18,vars:25,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(t,i){if(t&1){let r=y();B(),l(0,"div",1),u(1,"app-progress-spinner",2),p(2,_e,2,3,"label",3),l(3,"span",4),p(4,ge,2,4,"img",5),_(5," \xA0"),s(),u(6,"input",6),l(7,"mat-autocomplete",7,0),I("optionSelected",function(he){return M(r),P(i.onActionSelect(he.option.value))}),p(9,Ce,4,4,"mat-option",8),f(10,"async"),s(),p(11,Me,1,0,"i",9)(12,Pe,1,0,"i",10)(13,Ie,1,0,"i",11),l(14,"i",12),f(15,"translate"),I("click",function(){return M(r),P(i.onActionButtonReload())}),s(),p(16,Le,3,3,"em",13),H(17),s()}if(t&2){let r=j(8);a(),o("optionsInfoAreaId",i.constructorInfoAreaId),a(),o("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),a(2),o("ngIf",i.dataModelSelect&&(i.dataModelSelect==null?null:i.dataModelSelect.linkImageIdSrc)),a(2),o("placeholder",g(i.optionPlaceholder))("id",A("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",r)("required",i.optionRequired),x("disabled",i.optionDisabled?!0:null),a(),o("displayWith",i.displayFn),a(2),o("ngForOf",h(10,21,i.filteredOptions)),a(2),o("ngIf",!i.formControl.valid),a(),o("ngIf",i.optionRequired&&i.formControl.valid),a(),o("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),a(),G("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),o("title",g(h(15,23,"ACTION.RELOAD"))),a(2),o("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[W,$,Z,ee,re,ie,ae,ne,le,oe,se,de,J,pe,me],encapsulation:2});var fe=c;export{fe as a};
