import{a as Ln}from"./chunk-U3TAHKX5.js";import{a as Kt}from"./chunk-2JTWFKVB.js";import{a as ci}from"./chunk-O4HP3GWQ.js";import{a as Lo}from"./chunk-PHJGQDJO.js";import{a as Rt}from"./chunk-IXPEP4O3.js";import{a as Ro}from"./chunk-VSR4JUHF.js";import{a as Ct}from"./chunk-P5BOTLPD.js";import{a as It}from"./chunk-TSYNW4F5.js";import{a as Nt}from"./chunk-I7I4YMKR.js";import{a as Vt}from"./chunk-Q32UY7HN.js";import{a as Ft}from"./chunk-VIW3V34G.js";import{a as xn,b as Rn,c as st,d as ct,e as dt,g as pt,h as mt}from"./chunk-GV6GOUWQ.js";import{a as Bt}from"./chunk-SCOXH2IX.js";import{a as zt}from"./chunk-YOACE3NF.js";import{a as vt}from"./chunk-5BMP5DRT.js";import{a as Me}from"./chunk-O4WVOPD6.js";import{a as Dn,b as xo}from"./chunk-LVSK35L2.js";import{a as Lt}from"./chunk-BUJ4ESZT.js";import{a as H}from"./chunk-DKWFUDCJ.js";import{a as Do,e as lt,f as F}from"./chunk-XDNTQ2L4.js";import{Ab as nt,Bb as ot,Ca as In,Cb as rt,Da as bn,Db as at,Ea as Mn,Eb as Co,Gc as O,I as ve,Ib as Io,J as Ce,Jb as bo,Jc as Ao,K as Ie,Kb as Mo,La as re,Lb as ko,M as So,Ma as fe,Mb as wo,N as _o,Na as we,Nb as Eo,Qb as V,Rb as N,U as _n,_ as ke,_a as Pe,aa as To,ab as j,ba as Tn,bc as An,cc as yo,da as vn,ea as Cn,eb as vo,fa as Ge,fb as Ue,g as ho,gb as Qe,jb as ze,lb as Ke,m as te,mb as Je,nb as Ye,p as ie,pb as kn,q as Se,qb as wn,qc as ae,rb as En,s as _e,sb as yn,t as hn,tc as le,u as ue,ub as Xe,v as Te,vb as Ze,wb as $e,xb as et,yb as tt,z as Sn,zb as it}from"./chunk-VXZRGRY5.js";import{Ad as St,Al as Fe,Ba as dn,Bb as X,Bl as fo,Ca as kt,Cb as Z,Cd as lo,Cl as Ne,Db as $,Dd as _t,Dl as xt,Ed as W,El as Qt,F as rn,Fa as o,Hb as D,Hc as yt,I as an,Ic as li,Id as z,Jb as Re,Jc as B,Jd as K,Jl as wt,Ka as f,Kd as ee,Ke as co,Kl as to,Ll as Oe,Mb as d,Ml as Tt,Nb as w,Nc as We,Nl as ft,Ob as u,P as ln,Pa as R,Pb as ro,Pc as Be,Q as sn,Qa as pn,Rd as U,Rf as Ut,Sb as E,Ta as q,Tb as y,Ub as A,Va as C,Vb as x,Vc as ao,Vd as so,Wb as Pt,Xa as Zt,Y as cn,Zb as He,_b as qe,bc as S,cb as Gt,cc as _,cg as po,da as g,db as oi,dc as ai,ea as h,eb as ri,ib as c,iq as he,jb as r,jq as go,kb as a,kq as oe,lb as v,md as Ht,p as nn,pb as M,q as on,qb as k,qq as io,rb as xe,rd as si,rq as G,sb as b,uc as L,ud as je,ul as mo,vb as I,vl as At,wd as P,wl as Ve,xb as m,xl as gn,yb as mn,yl as uo,zb as un,zd as fn,zl as Dt}from"./chunk-7YF6ZEWS.js";import{i as Y}from"./chunk-SEDBTTTN.js";var No=["*"];function Oo(n,l){if(n&1&&(r(0,"label",13),d(1),a()),n&2){let e=m();c("for",Pt("app-cms-site-selector-",e.id)),o(),w(e.optionLabel)}}function Go(n,l){if(n&1&&(v(0,"img",14),S(1,"cmsthumbnail")),n&2){let e=m();c("src",x(_(1,2,e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),kt)}}function Po(n,l){if(n&1&&(v(0,"img",14),S(1,"cmsthumbnail")),n&2){let e=m().$implicit;c("src",x(_(1,2,e.linkMainImageIdSrc)),kt)}}function Ho(n,l){if(n&1&&(r(0,"mat-option",15),C(1,Po,2,4,"img",5),r(2,"span"),d(3),a()()),n&2){let e=l.$implicit,i=m();c("value",e)("disabled",i.optionDisabled),o(),c("ngIf",e.linkMainImageIdSrc),o(2),w(i.displayOption(e))}}function qo(n,l){n&1&&v(0,"i",16)}function Wo(n,l){n&1&&v(0,"i",17)}function jo(n,l){if(n&1){let e=b();r(0,"i",18),I("click",function(){g(e);let t=m();return h(t.onActionSelectClear())}),a()}}function Uo(n,l){n&1&&(r(0,"em"),d(1),S(2,"translate"),a()),n&2&&(o(),u("(",_(2,1,"TITLE.Necessary"),")"))}var Jt=class Jt{constructor(l,e,i,t,s){this.coreEnumService=l;this.cdr=e;this.publicHelper=i;this.translate=t;this.categoryService=s;this.id=++Jt.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new W;this.dataModelSelect=new Oe;this.formControl=new hn;this.optionDisabled=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionRequired=!1;this.optionLabel="";this.optionChange=new Zt;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(ln(""),rn(1500),an(),sn(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return Y(this,null,function*(){let e=new K;e.rowPerPage=20,e.accessLoad=!0;let i=new z;i.propertyName="Title",i.value=l,i.searchType=si.Contains,i.clauseType=Ht.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new z,i.propertyName="Id",i.value=l,i.searchType=si.Equal,i.clauseType=Ht.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield nn(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe(on(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="number"&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess&&(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item))}});return}if(typeof l==typeof Oe){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new Oe,this.loadOptions()}};Jt.nextId=0,Jt.\u0275fac=function(e){return new(e||Jt)(f(U),f(L),f(F),f(V),f(Ve))},Jt.\u0275cmp=R({type:Jt,selectors:[["app-ticketing-departemen-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionRequired:"optionRequired",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:No,decls:16,vars:19,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=b();mn(),r(0,"div",1),v(1,"app-progress-spinner",2),C(2,Oo,2,3,"label",3),r(3,"span",4),C(4,Go,2,4,"img",5),d(5," \xA0"),a(),v(6,"input",6),r(7,"mat-autocomplete",7,0),I("optionSelected",function(T){return g(t),h(i.onActionSelect(T.option.value))}),C(9,Ho,4,4,"mat-option",8),S(10,"async"),a(),C(11,qo,1,0,"i",9)(12,Wo,1,0,"i",10)(13,jo,1,0,"i",11)(14,Uo,3,3,"em",12),un(15),a()}if(e&2){let t=D(8);o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),o(2),c("ngIf",i.dataModelSelect&&(i.dataModelSelect==null?null:i.dataModelSelect.linkMainImageIdSrc)),o(2),c("placeholder",x(i.optionPlaceholder))("id",Pt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),Gt("disabled",i.optionDisabled?!0:null),o(),c("displayWith",i.displayFn),o(2),c("ngForOf",_(10,17,i.filteredOptions)),o(2),c("ngIf",!i.formControl.valid),o(),c("ngIf",i.optionRequired&&i.formControl.valid),o(),c("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[li,B,te,ie,ve,Sn,vn,_n,Cn,To,j,H,Be,N,zt],encapsulation:2});var Ee=Jt;var Qo=["vform"];function zo(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",11),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Ko(n,l){if(n&1){let e=b();r(0,"div",12)(1,"label",13),d(2),S(3,"translate"),a(),r(4,"textarea",14,1),S(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),h(t)}),d(7,"        "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),w(_(3,6,"TITLE.Answer_Text")),o(2),c("placeholder",x(_(6,8,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)),o(5),u("",e.value.length," / 1000")}}function Jo(n,l){if(n&1){let e=b();r(0,"div",15)(1,"button",16),I("click",function(){g(e);let t=m();return h(t.onActionBackToParent())}),d(2),S(3,"translate"),a(),r(4,"button",17),d(5),S(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),u(" ",_(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),u(" ",_(6,5,"ACTION.SAVE")," ")}}var di=class di extends vt{constructor(e,i,t,s,T,p,Q,J,Ae,De){super(p,new wt,s,De);this.data=e;this.dialogRef=i;this.activatedRoute=t;this.publicHelper=s;this.coreEnumService=T;this.ticketingAnswerService=p;this.cmsToastrService=Q;this.router=J;this.cdr=Ae;this.translate=De;this.requestLinkTaskId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new ee;this.fieldsInfo=new Map;this.dataModel=new wt;this.dataModelResult=new W;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new Rt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestLinkTaskId=+e.linkTaskId||0)}ngOnInit(){if(this.requestLinkTaskId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.dataModel.linkTaskId=this.requestLinkTaskId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingAnswerService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorAdd(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorAdd(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}};di.\u0275fac=function(i){return new(i||di)(f(fe),f(re),f(he),f(F),f(U),f(At),f(O),f(oe),f(L),f(V))},di.\u0275cmp=R({type:di,selectors:[["app-ticketing-answer-add"]],viewQuery:function(i,t){if(i&1&&X(Qo,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:15,vars:13,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=b();r(0,"div",2),v(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),C(10,zo,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),S(12,"translate"),I("optionChange",function(p){return g(s),h(t.onActionSelectSource(p))}),a(),C(13,Ko,10,10,"div",9)(14,Jo,7,7,"div",10),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),u(" ",t.formInfo.formTitle," "),o(2),u(" ",_(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,11,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessAddField)),o(2),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.submitButtonEnabled))},dependencies:[B,Te,te,ie,Se,Ce,Ie,ue,_e,j,Me,H,Ee,N],encapsulation:2});var Bn=di;var Yo=["vform"];function Xo(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",11),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Zo(n,l){if(n&1){let e=b();r(0,"div",12)(1,"label",13),d(2),S(3,"translate"),a(),r(4,"textarea",14,1),S(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),h(t)}),d(7,"        "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),w(_(3,6,"TITLE.Answer_Text")),o(2),c("placeholder",x(_(6,8,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessEditField)),o(5),u("",e.value.length," / 1000")}}function $o(n,l){if(n&1){let e=b();r(0,"div",15)(1,"button",16),I("click",function(){g(e);let t=m();return h(t.onActionBackToParent())}),d(2),S(3,"translate"),a(),r(4,"button",17),d(5),S(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),u(" ",_(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),u(" ",_(6,5,"ACTION.SAVE")," ")}}var pi=class pi extends Bt{constructor(e,i,t,s,T,p,Q,J,Ae,De){super(p,new wt,s,De);this.data=e;this.dialogRef=i;this.activatedRoute=t;this.publicHelper=s;this.coreEnumService=T;this.ticketingAnswerService=p;this.cmsToastrService=Q;this.router=J;this.cdr=Ae;this.translate=De;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new ee;this.dataModel=new wt;this.dataModelResult=new _t;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new Rt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestId=+e.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(e){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.setAccessDataType(St.Editor),this.ticketingAnswerService.ServiceGetOneById(e).subscribe({next:t=>{this.dataAccessModel=t.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.publicHelper.processService.processStop(i),this.dataModelResult=t,this.formInfo.submitButtonEnabled=!0,t.isSuccess?this.dataModel=t.item:this.cmsToastrService.typeErrorGetOne(t.errorMessage)},error:t=>{this.publicHelper.processService.processStop(i),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorGetOne(t)}})}DataEditContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingAnswerService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!1})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}}};pi.\u0275fac=function(i){return new(i||pi)(f(fe),f(re),f(he),f(F),f(U),f(At),f(O),f(oe),f(L),f(V))},pi.\u0275cmp=R({type:pi,selectors:[["app-ticketing-answer-edit"]],viewQuery:function(i,t){if(i&1&&X(Yo,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:15,vars:13,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=b();r(0,"div",2),v(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),C(10,Xo,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),S(12,"translate"),I("optionChange",function(p){return g(s),h(t.onActionSelectSource(p))}),a(),C(13,Zo,10,10,"div",9)(14,$o,7,7,"div",10),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),u(" ",t.formInfo.formTitle," "),o(2),u(" ",_(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,11,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessEditField)),o(2),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.submitButtonEnabled))},dependencies:[B,Te,te,ie,Se,Ce,Ie,ue,_e,j,Me,H,Ee,N],encapsulation:2});var Vn=pi;var er=["vform"];function tr(n,l){if(n&1&&(r(0,"div",7),v(1,"i",11),r(2,"span",12),d(3),a()()),n&2){let e=m(2);o(3),w(e.formInfo.submitResultMessage)}}function ir(n,l){if(n&1&&(r(0,"div",8),v(1,"i",13),r(2,"span",12),d(3),a()()),n&2){let e=m(2);o(3),w(e.formInfo.submitResultMessage)}}function nr(n,l){if(n&1&&(r(0,"div",9),v(1,"i",14),r(2,"span",12),d(3),a()()),n&2){let e=m(2);o(3),w(e.formInfo.submitResultMessage)}}function or(n,l){if(n&1&&(r(0,"div",10),v(1,"i",15),r(2,"span",12),d(3),a()()),n&2){let e=m(2);o(3),w(e.formInfo.submitResultMessage)}}function rr(n,l){if(n&1&&oi(0,tr,4,1,"div",7)(1,ir,4,1,"div",8)(2,nr,4,1,"div",9)(3,or,4,1,"div",10),n&2){let e,i=m();ri((e=i.formInfo.submitResult)==="success"?0:e==="error"?1:e==="warning"?2:3)}}function ar(n,l){if(n&1){let e=b();r(0,"div",16)(1,"button",17),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),v(2,"i",18),d(3),S(4,"translate"),a()()}n&2&&(o(3),u(" ",_(4,1,"ACTION.CANCEL")," "))}var mi=class mi{constructor(l,e,i,t,s,T,p,Q,J,Ae){this.data=l;this.dialogRef=e;this.coreEnumService=i;this.ticketingAnswerService=t;this.cmsToastrService=s;this.tokenHelper=T;this.cmsStoreService=p;this.cdr=Q;this.publicHelper=J;this.translate=Ae;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Ut;this.dataModelResult=new W;this.dataModel=new wt;this.formInfo=new ee;this.dataModelEnumSendSmsStatusTypeResult=new W;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(l=>{this.formInfo.formTitle=l}),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.tokenInfo=l}))),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:l=>{this.dataModelEnumSendSmsStatusTypeResult=l}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage="";let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,console.log(this.dataModel),e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.submitResultMessage=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};mi.\u0275fac=function(e){return new(e||mi)(f(fe),f(re),f(U),f(At),f(O),f(le),f(ae),f(L),f(F),f(V))},mi.\u0275cmp=R({type:mi,selectors:[["app-ticketing-answer-view"]],viewQuery:function(e,i){if(e&1&&X(er,5),e&2){let t;Z(t=$())&&(i.formGroup=t.first)}},standalone:!1,decls:9,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[1,"chip","chip-s","bg-green-dark"],[1,"chip","chip-s","bg-red-dark"],[1,"chip","chip-s","bg-yellow-dark"],[1,"chip","chip-s","bg-gray-dark"],[1,"fa","fa-check","color-white","bg-green-light"],[1,"color-white"],[1,"fa","fa-check","color-white","bg-red-light"],[1,"fa","fa-check","color-white","bg-yellow-light"],[1,"fa","fa-check","color-white","bg-gray-light"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(r(0,"div",0),d(1),a(),r(2,"div",1),v(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),a(),r(5,"div",4),oi(6,rr,4,1),a(),r(7,"div",5),C(8,ar,5,3,"div",6),a()),e&2&&(o(),u(" ",i.formInfo.formTitle," "),o(2),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("dataModel",i.dataModel)("optionMethod",1),o(2),ri((i.formInfo==null||i.formInfo.submitResultMessage==null?null:i.formInfo.submitResultMessage.length)>0?6:-1),o(2),c("ngIf",i.formInfo.submitButtonEnabled))},dependencies:[B,H,Ro,N],encapsulation:2});var Fn=mi;function lr(n,l){n&1&&v(0,"div",10)}function sr(n,l){if(n&1&&(r(0,"div",4)(1,"div",5)(2,"b"),d(3),S(4,"translate"),a(),d(5,": "),a(),v(6,"div",15)(7,"div",12)(8,"div",11),a()),n&2){let e=m();o(3),u("",_(4,2,"TITLE.Description")," "),o(3),c("innerText",e.dataModelResult.item.htmlBody)}}var ui=class ui{constructor(l,e,i,t,s,T,p,Q){this.headerService=l;this.publicHelper=e;this.cdr=i;this.cmsToastrService=t;this.dialog=s;this.translate=T;this.cmsStoreService=p;this.tokenHelper=Q;this.constructorInfoAreaId=this.constructor.name;this.optionId=0;this.dataModelResult=new W;this.fieldsInfo=new Map;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.optionId>0&&this.DataGetOneContent(),this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.DataGetOneContent()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetOneContent(){let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.headerService.setAccessLoad(),this.headerService.ServiceGetOneById(this.optionId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess?this.dataModelResult=e:this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l)}})}};ui.\u0275fac=function(e){return new(e||ui)(f(Ne),f(F),f(L),f(O),f(we),f(V),f(ae),f(le))},ui.\u0275cmp=R({type:ui,selectors:[["app-ticketing-task-header"]],inputs:{optionId:"optionId"},standalone:!1,decls:33,vars:11,consts:[[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content"],[1,"table"],[1,"tr"],[1,"td","small-width"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"],[1,"td","large-width",2,"color","darkblue"],["class","td",4,"ngIf"],[1,"td","large-width"],[1,"td"],[2,"clear","both"],[1,"td",2,"text-align","left"],["class","tr",4,"ngIf"],[1,"divider","divider-margins"],[1,"td","large-width",3,"innerText"]],template:function(e,i){e&1&&(r(0,"div",0),v(1,"app-progress-spinner",1),r(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),v(6,"span",6),a(),r(7,"div",7)(8,"h5")(9,"b"),d(10),S(11,"translate"),a()()(),C(12,lr,1,0,"div",8),a(),r(13,"div",4)(14,"div",5)(15,"b"),d(16),a(),d(17,": "),a(),r(18,"div",9),d(19),a(),v(20,"div",10)(21,"div",11),a(),r(22,"div",4)(23,"div",5)(24,"b"),d(25),a(),d(26,": "),a(),r(27,"div",9),d(28),a(),v(29,"div",12)(30,"div",11),a(),C(31,sr,9,4,"div",13),a()()(),v(32,"div",14)),e&2&&(o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(5),c("inlineSVG","./assets/media/svg/icons/Communication/Flag.svg"),o(4),u(" ",_(11,9,"TITLE.Selected_Ticket")," "),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.item==null?null:i.dataModelResult.item.id),o(4),u("",i.fieldsInfo.id==null?null:i.fieldsInfo.id.fieldTitle," "),o(3),w(i.dataModelResult==null||i.dataModelResult.item==null?null:i.dataModelResult.item.id),o(6),u("",i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle," "),o(3),w(i.dataModelResult==null||i.dataModelResult.item==null?null:i.dataModelResult.item.title),o(3),c("ngIf",(i.dataModelResult==null||i.dataModelResult.item==null||i.dataModelResult.item.htmlBody==null?null:i.dataModelResult.item.htmlBody.length)>0))},dependencies:[B,H,Do,N],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40a1f5;padding:2px;background:#fff;border-radius:5px}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f577;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40a1f5;color:#3d7c7a}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.small-width[_ngcontent-%COMP%]{width:90px}.large-width[_ngcontent-%COMP%]{width:400px}.clear[_ngcontent-%COMP%]{clear:both}"]});var Nn=ui;var dr=()=>[5,10,20,100],pr=n=>({background:n});function mr(n,l){if(n&1&&v(0,"app-ticketing-task-header",39),n&2){let e=m();c("optionId",e.requestLinkTaskId)}}function ur(n,l){if(n&1){let e=b();r(0,"a",40),I("click",function(){g(e);let t=m();return h(t.onActionBackToParent())}),v(1,"i",41),a()}}function fr(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",43),I("click",function(){g(e);let t=m();return h(t.onActionButtonNewRow())}),v(2,"i",44)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.ADD")," "))}function gr(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",46),I("click",function(){g(e);let t=m();return h(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",47)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.EDIT")," "))}function hr(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",48),I("click",function(){g(e);let t=m();return h(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",49)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.DELETE")," "))}function Sr(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",50),I("click",function(){g(e);let t=m();return h(t.onActionButtonViewRow(t.tableRowSelected))}),v(2,"i",51)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.VIEW")," "))}function _r(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Tr(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.id," ")}}function vr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.linkTaskId==null?null:e.fieldsInfo.linkTaskId.fieldTitle," ")}}function Cr(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.linkTaskId," ")}}function Ir(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function br(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.linkMemberId," ")}}function Mr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function kr(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),u(" ",_(2,1,e.createdDate)," ")}}function wr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Er(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),u(" ",_(2,1,e.updatedDate)," ")}}function yr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.answerStatus==null?null:e.fieldsInfo.answerStatus.fieldTitle," ")}}function Ar(n,l){if(n&1&&(r(0,"mat-cell",53),d(1),S(2,"enums"),a()),n&2){let e=l.$implicit,i=m();c("ngStyle",qe(5,pr,i.publicHelper.RowStyleAnswerStatus(e.ticketStatus))),o(),u(" ",ai(2,2,e.answerStatus,i.dataModelEnumAnswerStatusResult.listItems)," ")}}function Dr(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),u(" ",_(2,1,"TITLE.OPTION")," "))}function xr(n,l){if(n&1&&(r(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),d(3,"more_vert"),a()(),v(4,"mat-menu",null,2),a()),n&2){let e=D(5),i=m();o(),c("matMenuTriggerFor",e)("disabled",!i.dataModelResult.access.accessEditRow&&!i.dataModelResult.access.accessDeleteRow)}}function Rr(n,l){n&1&&v(0,"mat-header-row")}function Lr(n,l){if(n&1){let e=b();r(0,"mat-row",56),I("click",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var fi=class fi extends st{constructor(e,i,t,s,T,p,Q,J,Ae,De,Et,ut,Ki){super(e,new wt,ut,p,Ae);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=T;this.tokenHelper=p;this.cdr=Q;this.cmsStoreService=J;this.translate=Ae;this.ticketingEnumService=De;this.pageInfo=Et;this.publicHelper=ut;this.dialog=Ki;this.requestLinkTaskId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.dataModelEnumAnswerStatusResult=new W;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkTaskId","LinkMemberId","CreatedDate","UpdatedDate","AnswerStatus"];this.tabledisplayedColumnsMobileSource=["Id","LinkTaskId","LinkMemberId","CreatedDate","UpdatedDate","AnswerStatus"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:eo=>this.onSubmitOptionsSearch(eo)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Ascending}ngOnInit(){this.requestLinkTaskId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkTaskId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.getEnumAnswerStatus(),this.tokenInfo=e,this.DataGetAll()}))),this.getEnumAnswerStatus()}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}getEnumAnswerStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:e=>{this.dataModelEnumAnswerStatusResult=e}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new wt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestLinkTaskId>0&&(t.propertyName="LinkTaskId",t.value=this.requestLinkTaskId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTaskId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestLinkTaskId==null||this.requestLinkTaskId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Bn,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{linkTaskId:this.requestLinkTaskId>0?this.requestLinkTaskId:this.categoryModelSelected.id}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Fn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Vn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let T=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(T,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(T)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(T)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),T=new z;T.propertyName="RecordStatus",T.value=je.Available,s.filters.push(T),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/task/"])}};fi.\u0275fac=function(i){return new(i||fi)(f(At),f(he),f(O),f(Lt),f(oe),f(le),f(L),f(ae),f(V),f(Qt),f(lt),f(F),f(we))},fi.\u0275cmp=R({type:fi,selectors:[["app-ticketing-answer-list"]],standalone:!1,features:[q],decls:59,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionId",4,"ngIf"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkTaskId"],["matColumnDef","LinkMemberId"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","AnswerStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[3,"optionId"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","box-shadow-button","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor","disabled"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=b();C(0,mr,1,1,"app-ticketing-task-header",3),r(1,"app-cms-html-list",4),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),h(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),h(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),h(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),h(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),h(t.onActionButtonPrintRow())}),M(2,5),d(3," -------------------------------------- "),k(),xe(4,6)(5,7),M(6,8),C(7,ur,2,0,"a",9),r(8,"a",10),I("click",function(){return g(s),h(t.viewGuideNotice=!t.viewGuideNotice)}),v(9,"i",11),a(),r(10,"a",10),I("click",function(){return g(s),h(t.onActionButtonReload())}),v(11,"i",12),a(),k(),M(12,13),r(13,"a",14),I("click",function(){return g(s),h(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(14,"mat-slide-toggle",15),d(15),S(16,"translate"),a(),r(17,"a",14),I("click",function(){return g(s),h(t.onActionButtonStatist())}),v(18,"mat-slide-toggle",15),d(19),S(20,"translate"),a(),k(),M(21,16),C(22,fr,7,3,"div",17),k(),M(23,18),C(24,gr,7,3,"div",17)(25,hr,7,3,"div",17)(26,Sr,7,3,"div",17),k(),M(27,19),r(28,"app-cms-search-list",20),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),h(p)}),a(),r(29,"app-cms-statist-list",20),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),h(p)}),a(),k(),M(30,21),r(31,"mat-table",22,0),I("matSortChange",function(){g(s);let p=D(32);return h(t.onTableSortData(p))}),M(33,23),C(34,_r,2,1,"mat-header-cell",24)(35,Tr,2,1,"mat-cell",25),k(),M(36,26),C(37,vr,2,1,"mat-header-cell",24)(38,Cr,2,1,"mat-cell",25),k(),M(39,27),C(40,Ir,2,1,"mat-header-cell",24)(41,br,2,1,"mat-cell",25),k(),M(42,28),C(43,Mr,2,1,"mat-header-cell",24)(44,kr,3,3,"mat-cell",25),k(),M(45,29),C(46,wr,2,1,"mat-header-cell",24)(47,Er,3,3,"mat-cell",25),k(),M(48,30),C(49,yr,2,1,"mat-header-cell",24)(50,Ar,3,7,"mat-cell",31),k(),M(51,32),C(52,Dr,3,3,"mat-header-cell",33)(53,xr,6,2,"mat-cell",34),k(),C(54,Rr,1,0,"mat-header-row",35)(55,Lr,1,2,"mat-row",36),a(),k(),M(56,37),r(57,"mat-paginator",38,1),I("page",function(p){return g(s),h(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("ngIf",t.requestLinkTaskId>0),o(),c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestLinkTaskId>0),o(7),c("checked",t.optionsSearch.data.show),o(),u("",_(16,26,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),u("",_(20,28,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(23),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(30,dr)))},dependencies:[B,We,Ge,Pe,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,mt,Nn,N,ci,It],encapsulation:2});var Ji=fi;var Vr=["vform"];function Fr(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",14),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Nr(n,l){n&1&&v(0,"i",21)}function Or(n,l){n&1&&v(0,"i",22)}function Gr(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Pr(n,l){if(n&1){let e=b();r(0,"div",15)(1,"label",16),d(2),a(),r(3,"input",17,1),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),h(t)}),a(),C(5,Nr,1,0,"i",18)(6,Or,1,0,"i",19),r(7,"em"),d(8),a(),C(9,Gr,5,4,"mat-error",20),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Hr(n,l){if(n&1&&(v(0,"img",23),S(1,"cmsthumbnail")),n&2){let e=m();c("src",x(_(1,2,e.dataModel.linkMainImageIdSrc)),kt)}}function qr(n,l){if(n&1){let e=b();r(0,"div",15)(1,"label",24),I("click",function(){g(e);let t=m();return h(t.fileManagerOpenForm=!0)}),d(2),S(3,"translate"),a(),r(4,"input",25,2),S(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),h(t)}),I("click",function(){g(e);let t=m();return h(t.fileManagerOpenForm=!0)}),a(),r(7,"cms-file-manager",26),I("itemSelected",function(t){g(e);let s=m();return h(s.onActionFileSelected(t))}),A("openFormChange",function(t){g(e);let s=m();return y(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),h(t)}),a()()}if(n&2){let e=m();o(2),w(_(3,12,"TITLE.Icon_File")),o(2),c("placeholder",x(_(6,14,"TITLE.Original_File_ID"))),E("ngModel",e.dataModel.linkMainImageId),o(3),c("language",e.appLanguage)("isPopup",!0),E("openForm",e.fileManagerOpenForm),c("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Wr(n,l){if(n&1){let e=b();r(0,"div",27)(1,"button",28),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),v(2,"i",29),d(3),S(4,"translate"),a(),r(5,"button",30),v(6,"i",31),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),u(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),u(" ",_(8,5,"ACTION.SAVE")," ")}}var ki=class ki extends Bt{constructor(e,i,t,s,T,p,Q,J){super(s,new Oe,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingDepartemenService=s;this.cmsToastrService=T;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new _t;this.dataModel=new Oe;this.formInfo=new ee;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(St.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};ki.\u0275fac=function(i){return new(i||ki)(f(fe),f(re),f(U),f(Ve),f(O),f(F),f(L),f(V))},ki.\u0275cmp=R({type:ki,selectors:[["app-ticketing-departemen-edit"]],viewQuery:function(i,t){if(i&1&&X(Vr,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:18,vars:14,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",3),v(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),C(10,Fr,1,5,"app-cms-enum-record-status-selector",8)(11,Pr,10,9,"div",9),r(12,"div",10)(13,"a",11),S(14,"cmsthumbnail"),C(15,Hr,2,4,"img",12),a()(),C(16,qr,8,16,"div",9)(17,Wr,9,7,"div",13),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),u(" ",t.formInfo.formTitle," "),o(2),u(" ",_(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(2),c("href",x(_(14,12,t.dataModel.linkMainImageIdSrc)),kt),o(2),c("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),o(),c("ngIf",t.fieldsInfo.linkMainImageId==null?null:t.fieldsInfo.linkMainImageId.accessWatchField),o(),c("ngIf",t.formInfo.submitButtonEnabled))},dependencies:[B,Te,te,ie,Se,ve,Ce,Ie,ue,_e,ke,j,Me,H,An,N,zt],encapsulation:2});var jt=ki;var jr=["vform"];function Ur(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",14),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Qr(n,l){n&1&&v(0,"i",21)}function zr(n,l){n&1&&v(0,"i",22)}function Kr(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Jr(n,l){if(n&1){let e=b();r(0,"div",15)(1,"label",16),d(2),a(),r(3,"input",17,1),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),h(t)}),a(),C(5,Qr,1,0,"i",18)(6,zr,1,0,"i",19),r(7,"em"),d(8),a(),C(9,Kr,5,4,"mat-error",20),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Yr(n,l){if(n&1&&(v(0,"img",23),S(1,"cmsthumbnail")),n&2){let e=m();c("src",x(_(1,2,e.dataModel.linkMainImageIdSrc)),kt)}}function Xr(n,l){if(n&1){let e=b();r(0,"div",15)(1,"label",24),I("click",function(){g(e);let t=m();return h(t.fileManagerOpenForm=!0)}),d(2),S(3,"translate"),a(),r(4,"input",25,2),S(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),h(t)}),I("click",function(){g(e);let t=m();return h(t.fileManagerOpenForm=!0)}),a(),r(7,"cms-file-manager",26),I("itemSelected",function(t){g(e);let s=m();return h(s.onActionFileSelected(t))}),A("openFormChange",function(t){g(e);let s=m();return y(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),h(t)}),a()()}if(n&2){let e=m();o(2),w(_(3,12,"TITLE.Icon_File")),o(2),c("placeholder",x(_(6,14,"TITLE.Original_File_ID"))),E("ngModel",e.dataModel.linkMainImageId),o(3),c("language",e.appLanguage)("isPopup",!0),E("openForm",e.fileManagerOpenForm),c("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Zr(n,l){if(n&1){let e=b();r(0,"div",27)(1,"button",28),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),v(2,"i",29),d(3),S(4,"translate"),a(),r(5,"button",30),v(6,"i",31),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),u(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),u(" ",_(8,5,"ACTION.SAVE")," ")}}var wi=class wi extends vt{constructor(e,i,t,s,T,p,Q,J){super(s,new Oe,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingDepartemenService=s;this.cmsToastrService=T;this.publicHelper=p;this.cdr=Q;this.translate=J;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new W;this.dataModel=new Oe;this.formInfo=new ee;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};wi.\u0275fac=function(i){return new(i||wi)(f(fe),f(re),f(U),f(Ve),f(O),f(F),f(L),f(V))},wi.\u0275cmp=R({type:wi,selectors:[["app-ticketing-departemen-add"]],viewQuery:function(i,t){if(i&1&&X(jr,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:18,vars:14,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",3),v(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),C(10,Ur,1,5,"app-cms-enum-record-status-selector",8)(11,Jr,10,9,"div",9),r(12,"div",10)(13,"a",11),S(14,"cmsthumbnail"),C(15,Yr,2,4,"img",12),a()(),C(16,Xr,8,16,"div",9)(17,Zr,9,7,"div",13),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),u(" ",t.formInfo.formTitle," "),o(2),u(" ",_(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(2),c("href",x(_(14,12,t.dataModel.linkMainImageIdSrc)),kt),o(2),c("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),o(),c("ngIf",t.fieldsInfo.linkMainImageId==null?null:t.fieldsInfo.linkMainImageId.accessWatchField),o(),c("ngIf",t.formInfo.submitButtonEnabled))},dependencies:[B,Te,te,ie,Se,ve,Ce,Ie,ue,_e,ke,j,Me,H,An,N,zt],encapsulation:2});var Ei=wi;var $r=["vform"];function ea(n,l){if(n&1){let e=b();M(0),r(1,"div",7)(2,"label",8),d(3),a(),r(4,"input",9,0),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModelResultCategory.item.title,t)||(s.dataModelResultCategory.item.title=t),h(t)}),a()(),k()}if(n&2){let e=m();o(3),w(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)),E("ngModel",e.dataModelResultCategory.item.title)}}function ta(n,l){if(n&1){let e=b();r(0,"div",10)(1,"button",11),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),v(2,"i",12),d(3),S(4,"translate"),a(),r(5,"button",13),I("click",function(){g(e);let t=m();return h(t.onFormDelete())}),v(6,"i",14),d(7),S(8,"translate"),a()()}if(n&2){let e=m();o(3),u(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.formInfo.submitButtonEnabled),o(2),u(" ",_(8,5,"ACTION.DELETE")," ")}}var yi=class yi{constructor(l,e,i,t,s,T,p){this.data=l;this.dialogRef=e;this.publicHelper=i;this.ticketingDepartemenService=t;this.cdr=s;this.translate=T;this.cmsToastrService=p;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResultCategory=new W;this.dataModelResultCategoryAllData=new W;this.dataModel={};this.formInfo=new ee;this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.requestId<=0){this.cmsToastrService.typeErrorDeleteRowIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(),this.DataGetAll()}DataGetOne(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.translate.get("TITLE.Loading_Information").subscribe(e=>{this.formInfo.submitResultMessage=e});let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(St.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResultCategory=e,e.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorGetOne()),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l)}})}DataGetAll(){this.translate.get("TITLE.Loading_Information").subscribe(i=>{this.formInfo.submitResultMessage=i});let l=new K;l.rowPerPage=100;let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceGetAll(l).subscribe({next:i=>{this.dataModelResultCategoryAllData=i,i.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeErrorGetAll()),this.publicHelper.processService.processStop(e)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormDelete(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.formInfo.submitButtonEnabled=!1,this.formInfo.submitButtonEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceDelete(this.requestId).subscribe({next:e=>{this.formInfo.submitButtonEnabled=!e.isSuccess,e.isSuccess?(this.translate.get("MESSAGE.Deletion_Was_Successful").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormChangeNewCatId(l){if(this.formInfo.submitResultMessage="",this.requestId===0||!l||l.id<=0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.dataModel.newCatId=l.id,this.dataModel.newCatId===this.requestId?(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitButtonEnabled=!1):(this.formInfo.submitButtonEnabled=!0,this.formInfo.submitResultMessage="")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};yi.\u0275fac=function(e){return new(e||yi)(f(fe),f(re),f(F),f(Ve),f(L),f(V),f(O))},yi.\u0275cmp=R({type:yi,selectors:[["app-ticketing-departemen-delete"]],viewQuery:function(e,i){if(e&1&&X($r,5),e&2){let t;Z(t=$())&&(i.formGroup=t.first)}},standalone:!1,decls:10,vars:7,consts:[["Title",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModelResultCategory.item.title",1,"color-highlight"],["matInput","","type","text","name","dataModelResultCategory.item.title","id","dataModelResultCategory.item.title","minlength","3","maxlength","50","readonly","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click","disabled"],[1,"fa","fa-check-square-o"]],template:function(e,i){e&1&&(r(0,"div",1),v(1,"app-progress-spinner",2),r(2,"div",3)(3,"p",4),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),C(8,ea,6,4,"ng-container",5)(9,ta,9,7,"div",6),a()()),e&2&&(o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(3),u(" ",i.formInfo.formTitle," "),o(2),u(" ",_(7,5,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),c("ngIf",i.dataModelResultCategory==null?null:i.dataModelResultCategory.item),o(),c("ngIf",i.formInfo.submitButtonEnabled))},dependencies:[B,te,ie,Ce,Ie,ue,j,H,N],encapsulation:2});var Ai=yi;var ia=()=>[5,10,20,100],na=n=>({display:n});function oa(n,l){if(n&1){let e=b();r(0,"div",17)(1,"a",44),I("click",function(){g(e);let t=m();return h(t.onActionButtonNewRow())}),v(2,"i",45)(3,"br"),a(),r(4,"p",20),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.ADD")," "))}function ra(n,l){if(n&1){let e=b();r(0,"div",17)(1,"a",46),I("click",function(){g(e);let t=m();return h(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",47)(3,"br"),a(),r(4,"p",20),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.EDIT")," "))}function aa(n,l){if(n&1){let e=b();r(0,"div",17)(1,"a",48),I("click",function(){g(e);let t=m();return h(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",49)(3,"br"),a(),r(4,"p",20),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.DELETE")," "))}function la(n,l){n&1&&(r(0,"mat-header-cell",50),d(1),S(2,"translate"),a()),n&2&&(o(),u(" ",_(2,1,"TITLE.PICTURE")," "))}function sa(n,l){if(n&1&&(v(0,"img",52),S(1,"cmsthumbnail")),n&2){let e=m().$implicit;c("src",x(_(1,2,e.linkMainImageIdSrc)),kt)}}function ca(n,l){if(n&1&&(r(0,"mat-cell"),C(1,sa,2,4,"img",51),a()),n&2){let e=l.$implicit;o(),c("ngIf",(e==null||e.linkMainImageIdSrc==null?null:e.linkMainImageIdSrc.length)>0)}}function da(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function pa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.id," ")}}function ma(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function ua(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),u(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function fa(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function ga(n,l){if(n&1&&v(0,"select",55),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,na,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function ha(n,l){if(n&1&&(r(0,"mat-cell",53),S(1,"statusCellClass"),v(2,"i",53),S(3,"statusIconClass"),C(4,ga,1,5,"select",54),a()),n&2){let e=l.$implicit,i=m();c("ngClass",_(1,3,e.recordStatus)),o(2),c("ngClass",_(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Sa(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function _a(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.title," ")}}function Ta(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function va(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),u(" ",_(2,1,e.createdDate)," ")}}function Ca(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Ia(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),u(" ",_(2,1,e.updatedDate)," ")}}function ba(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),u(" ",_(2,1,"TITLE.OPTION")," "))}function Ma(n,l){if(n&1&&(r(0,"mat-cell",56)(1,"button",57)(2,"mat-icon"),d(3,"more_vert"),a()(),v(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function ka(n,l){n&1&&v(0,"mat-header-row")}function wa(n,l){if(n&1){let e=b();r(0,"mat-row",58),I("click",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Di=class Di extends st{constructor(e,i,t,s,T,p,Q,J,Ae,De){super(e,new Oe,Ae,s,p);this.contentService=e;this.cmsToastrService=i;this.router=t;this.tokenHelper=s;this.cdr=T;this.translate=p;this.cmsStoreService=Q;this.pageInfo=J;this.publicHelper=Ae;this.dialog=De;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["LinkMainImageIdSrc","Id","RecordStatus"];this.tabledisplayedColumnsMobileSource=["LinkMainImageIdSrc","Id","RecordStatus"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Et=>this.onSubmitOptionsSearch(Et)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Oe);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess&&(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Ei,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(jt,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Ai,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonFaqList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/faq/",this.tableRowSelected.id])}onActionButtonTemplateList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/template/",this.tableRowSelected.id])}onActionButtonLogList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/departemenlog/DepartemenId/",this.tableRowSelected.id])}onActionButtonTaskList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/task/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),T=new z;T.propertyName="RecordStatus",T.value=je.Available,s.filters.push(T),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}};Di.\u0275fac=function(i){return new(i||Di)(f(Ve),f(O),f(oe),f(le),f(L),f(V),f(ae),f(lt),f(F),f(we))},Di.\u0275cmp=R({type:Di,selectors:[["app-ticketing-departemen-list"]],standalone:!1,features:[q],decls:87,vars:40,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-ticket","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-question","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-memo","font-18",2,"color","#ffffff"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","LinkMainImageIdSrc"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Id"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","40","width","40",3,"src",4,"ngIf"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),h(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),h(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),h(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),h(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),h(t.onActionButtonPrintRow())}),M(1,4),d(2," -------------------------------------- "),k(),xe(3,5)(4,6),M(5,7),r(6,"a",8),I("click",function(){return g(s),h(t.viewGuideNotice=!t.viewGuideNotice)}),v(7,"i",9),a(),r(8,"a",8),I("click",function(){return g(s),h(t.onActionButtonReload())}),v(9,"i",10),a(),k(),M(10,11),r(11,"a",12),I("click",function(){return g(s),h(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(12,"mat-slide-toggle",13),d(13),S(14,"translate"),a(),r(15,"a",12),I("click",function(){return g(s),h(t.onActionButtonStatist())}),v(16,"mat-slide-toggle",13),d(17),S(18,"translate"),a(),k(),M(19,14),C(20,oa,7,3,"div",15),k(),M(21,16),C(22,ra,7,3,"div",15)(23,aa,7,3,"div",15),r(24,"div",17)(25,"a",18),I("click",function(){return g(s),h(t.onActionButtonTaskList(t.tableRowSelected))}),v(26,"i",19)(27,"br"),a(),r(28,"p",20),d(29),S(30,"translate"),a()(),r(31,"div",17)(32,"a",18),I("click",function(){return g(s),h(t.onActionButtonFaqList(t.tableRowSelected))}),v(33,"i",21)(34,"br"),a(),r(35,"p",20),d(36),S(37,"translate"),a()(),r(38,"div",17)(39,"a",18),I("click",function(){return g(s),h(t.onActionButtonTemplateList(t.tableRowSelected))}),v(40,"i",22)(41,"br"),a(),r(42,"p",20),d(43),S(44,"translate"),a()(),r(45,"div",17)(46,"a",18),I("click",function(){return g(s),h(t.onActionButtonLogList(t.tableRowSelected))}),v(47,"i",22)(48,"br"),a(),r(49,"p",20),d(50),S(51,"translate"),a()(),k(),M(52,23),r(53,"app-cms-search-list",24),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),h(p)}),a(),r(54,"app-cms-statist-list",24),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),h(p)}),a(),k(),M(55,25),r(56,"mat-table",26,0),I("matSortChange",function(){g(s);let p=D(57);return h(t.onTableSortData(p))}),M(58,27),C(59,la,3,3,"mat-header-cell",28)(60,ca,2,1,"mat-cell",29),k(),M(61,30),C(62,da,2,1,"mat-header-cell",28)(63,pa,2,1,"mat-cell",29),k(),M(64,31),C(65,ma,2,1,"mat-header-cell",28)(66,ua,4,5,"mat-cell",29),k(),M(67,32),C(68,fa,2,1,"mat-header-cell",28)(69,ha,5,7,"mat-cell",33),k(),M(70,34),C(71,Sa,2,1,"mat-header-cell",28)(72,_a,2,1,"mat-cell",29),k(),M(73,35),C(74,Ta,2,1,"mat-header-cell",28)(75,va,3,3,"mat-cell",29),k(),M(76,36),C(77,Ca,2,1,"mat-header-cell",28)(78,Ia,3,3,"mat-cell",29),k(),M(79,37),C(80,ba,3,3,"mat-header-cell",38)(81,Ma,6,1,"mat-cell",39),k(),C(82,ka,1,0,"mat-header-row",40)(83,wa,1,2,"mat-row",41),a(),k(),M(84,42),r(85,"mat-paginator",43,1),I("page",function(p){return g(s),h(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.departemen.list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(12),c("checked",t.optionsSearch.data.show),o(),u("",_(14,27,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),u("",_(18,29,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(6),u(" ",_(30,31,"ACTION.TICKETS")," "),o(7),u(" ",_(37,33,"ACTION.QUESTIONS")," "),o(7),u(" ",_(44,35,"ACTION.TEMPLATES")," "),o(7),u(" ",_(51,37,"ACTION.LOGS")," "),o(3),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(26),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(39,ia)))},dependencies:[yt,B,We,Ge,Pe,j,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,mt,Vt,Be,N,Ct,zt,It,Ft,Nt],encapsulation:2});var On=Di;function Ea(n,l){if(n&1){let e=b();r(0,"button",14),I("click",function(){g(e);let t=m();return h(t.onActionAdd())}),d(1),S(2,"translate"),a()}n&2&&(o(),u(" ",_(2,1,"ACTION.ADD")," "))}function ya(n,l){if(n&1){let e=b();r(0,"button",15),I("click",function(){g(e);let t=m();return h(t.onActionEdit())}),d(1),S(2,"translate"),a()}n&2&&(o(),u(" ",_(2,1,"ACTION.EDIT")," "))}function Aa(n,l){if(n&1){let e=b();r(0,"button",16),I("click",function(){g(e);let t=m();return h(t.onActionDelete())}),d(1),S(2,"translate"),a()}n&2&&(o(),u(" ",_(2,1,"ACTION.DELETE")," "))}function Da(n,l){if(n&1){let e=b();r(0,"button",17),I("click",function(){g(e);let t=m();return h(t.onActionButtonReload())}),r(1,"mat-icon",18),S(2,"translate"),d(3,"refresh"),a()()}n&2&&(o(),c("title",x(_(2,2,"ACTION.RELOAD"))))}function xa(n,l){if(n&1){let e=b();r(0,"mat-tree-node",19),v(1,"button",20),r(2,"span",21),I("click",function(){let t=g(e).$implicit,s=m();return h(s.onActionSelect(t))}),d(3),a()()}if(n&2){let e=l.$implicit,i=m();Re("ntk-tree-selected",i.dataModelSelect.id>0&&i.dataModelSelect.id===e.id),o(3),w(e.title)}}function Ra(n,l){if(n&1){let e=b();r(0,"mat-tree-node",22)(1,"button",23)(2,"mat-icon",24),d(3),a()(),r(4,"span",21),I("click",function(){let t=g(e).$implicit,s=m();return h(s.onActionSelect(t))}),d(5),a()()}if(n&2){let e=l.$implicit,i=m(),t=D(12);Re("ntk-tree-selected",i.dataModelSelect.id>0&&i.dataModelSelect.id===e.id),c("cdkTreeNodeTypeaheadLabel",e.title),o(),Gt("type","button")("aria-label","Toggle "+e.title),o(2),u(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),o(2),w(e.title)}}var xi=class xi{constructor(l,e,i,t,s,T,p,Q,J){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.dialog=t;this.cdr=s;this.publicHelper=T;this.tokenHelper=p;this.cmsStoreService=Q;this.translate=J;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new Oe;this.dataModelResult=new W;this.filterModel=new K;this.dataSource=new Eo;this.optionChange=new Zt;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(l,e)=>!1;this.childrenAccessor=l=>[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){setTimeout(()=>{this.DataGetAll()},500),this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(()=>Y(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess&&(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new Oe,this.DataGetAll()}onActionSelectForce(l){}onActionAdd(){var l="";this.publicHelper.isMobile?l="dialog-fullscreen":l="dialog-min",this.dialog.open(Ei,{height:"90%",panelClass:l,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(i=>{i&&i.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let l=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(l=this.dataModelSelect.id),l===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(jt,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let l=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(l=this.dataModelSelect.id),l===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Ai,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}};xi.\u0275fac=function(e){return new(e||xi)(f(O),f(U),f(Ve),f(we),f(L),f(F),f(le),f(ae),f(V))},xi.\u0275cmp=R({type:xi,selectors:[["app-ticketing-departemen-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:16,vars:14,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["matTreeNodePadding","","matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,i){e&1&&(r(0,"app-cms-html-tree",1),M(1,2),d(2),S(3,"translate"),k(),M(4,3),C(5,Ea,3,3,"button",4)(6,ya,3,3,"button",5)(7,Aa,3,3,"button",6)(8,Da,4,4,"button",7),k(),M(9,8),v(10,"app-progress-spinner",9),r(11,"mat-tree",10,0),C(13,xa,4,3,"mat-tree-node",11)(14,Ra,6,7,"mat-tree-node",12),a(),k(),xe(15,13),a()),e&2&&(c("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),o(2),u(" ",_(3,12,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),o(3),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessAddRow),o(),c("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)&&(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessDeleteRow)&&(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessWatchRow),o(2),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),o(3),c("matTreeNodeDefWhen",i.hasChild))},dependencies:[B,Ge,Pe,bo,Mo,wo,ko,Io,H,Lo,N],encapsulation:2});var Ot=xi;var La=()=>[5,10,20,100],Ba=n=>({display:n});function Va(n,l){if(n&1){let e=b();r(0,"a",40),I("click",function(){g(e);let t=m();return h(t.onActionBackToParent())}),v(1,"i",41),a()}}function Fa(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",43),I("click",function(){g(e);let t=m();return h(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",44)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.EDIT")," "))}function Na(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Oa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.id," ")}}function Ga(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Pa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),u(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function Ha(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.linkSourceId==null?null:e.fieldsInfo.linkSourceId.fieldTitle," ")}}function qa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.linkSourceId," ")}}function Wa(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function ja(n,l){if(n&1&&v(0,"select",49),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,Ba,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Ua(n,l){if(n&1&&(r(0,"mat-cell",47),S(1,"statusCellClass"),v(2,"i",47),S(3,"statusIconClass"),C(4,ja,1,5,"select",48),a()),n&2){let e=l.$implicit,i=m();c("ngClass",_(1,3,e.recordStatus)),o(2),c("ngClass",_(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Qa(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function za(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.title," ")}}function Ka(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Ja(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),u(" ",_(2,1,e.createdDate)," ")}}function Ya(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Xa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),u(" ",_(2,1,e.updatedDate)," ")}}function Za(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),u(" ",_(2,1,"TITLE.OPTION")," "))}function $a(n,l){if(n&1&&(r(0,"mat-cell",50)(1,"button",51)(2,"mat-icon"),d(3,"more_vert"),a()(),v(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function el(n,l){n&1&&v(0,"mat-header-row")}function tl(n,l){if(n&1){let e=b();r(0,"mat-row",52),I("click",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Ri=class Ri extends st{constructor(e,i,t,s,T,p,Q,J,Ae,De,Et){super(e,new to,De,T,J);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.router=s;this.tokenHelper=T;this.cmsStoreService=p;this.cdr=Q;this.translate=J;this.pageInfo=Ae;this.publicHelper=De;this.dialog=Et;this.requestDepartemenId=0;this.requestOperatorId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus","LinkSourceId","CreatedDate","UpdatedDate"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","LinkSourceId","CreatedDate","UpdatedDate"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestOperatorId=+Number(this.activatedRoute.snapshot.paramMap.get("OperatorId")),this.optionsSearch.parentMethods={onSubmit:ut=>this.onSubmitOptionsSearch(ut)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(i=>i.tokenInfoStore).subscribe(i=>Y(this,null,function*(){this.tokenInfo=i,this.DataGetAll()})));let e=new z;this.requestOperatorId>0&&(e.propertyName="LinkFromOperatorId",e.value=this.requestOperatorId,this.filteModelContent.filters.push(e)),this.requestDepartemenId>0&&(e=new z,e.propertyName="LinkFromTicketingDepartemenId",e.value=this.requestDepartemenId,e.clauseType=Ht.Or,this.filteModelContent.filters.push(e),e=new z,e.propertyName="LinkToTicketingDepartemenId",e.value=this.requestDepartemenId,e.clauseType=Ht.Or,this.filteModelContent.filters.push(e))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new to);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.categoryModelSelected&&this.categoryModelSelected.id>0){let t=new z;t.propertyName="LinkFromTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)}this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorGetAll(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}this.router.navigate(["/application/app/edit/",this.tableRowSelected.id])}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}this.router.navigate(["/application/app/delete/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),T=new z;T.propertyName="RecordStatus",T.value=je.Available,s.filters.push(T),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.requestOperatorId>0&&this.router.navigate(["/application/app/"]),this.requestDepartemenId>0&&this.router.navigate(["/ticketing/departemen/"])}};Ri.\u0275fac=function(i){return new(i||Ri)(f(gn),f(he),f(O),f(oe),f(le),f(ae),f(L),f(V),f(lt),f(F),f(we))},Ri.\u0275cmp=R({type:Ri,selectors:[["app-application-app-list"]],standalone:!1,features:[q],decls:58,vars:27,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkSourceId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),h(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),h(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),h(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),h(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),h(t.onActionButtonPrintRow())}),M(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return g(s),h(t.onActionSelectorSelect(p))}),a(),k(),xe(3,6)(4,7),M(5,8),C(6,Va,2,0,"a",9),r(7,"a",10),I("click",function(){return g(s),h(t.viewGuideNotice=!t.viewGuideNotice)}),v(8,"i",11),a(),r(9,"a",10),I("click",function(){return g(s),h(t.onActionButtonReload())}),v(10,"i",12),a(),k(),M(11,13),r(12,"a",14),I("click",function(){return g(s),h(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(13,"mat-slide-toggle",15),d(14),S(15,"translate"),a(),r(16,"a",14),I("click",function(){return g(s),h(t.onActionButtonStatist())}),v(17,"mat-slide-toggle",15),d(18),S(19,"translate"),a(),k(),xe(20,16),M(21,17),C(22,Fa,7,3,"div",18),k(),M(23,19),r(24,"app-cms-search-list",20),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),h(p)}),a(),r(25,"app-cms-statist-list",20),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),h(p)}),a(),k(),M(26,21),r(27,"mat-table",22,0),I("matSortChange",function(){g(s);let p=D(28);return h(t.onTableSortData(p))}),M(29,23),C(30,Na,2,1,"mat-header-cell",24)(31,Oa,2,1,"mat-cell",25),k(),M(32,26),C(33,Ga,2,1,"mat-header-cell",24)(34,Pa,4,5,"mat-cell",25),k(),M(35,27),C(36,Ha,2,1,"mat-header-cell",24)(37,qa,2,1,"mat-cell",25),k(),M(38,28),C(39,Wa,2,1,"mat-header-cell",24)(40,Ua,5,7,"mat-cell",29),k(),M(41,30),C(42,Qa,2,1,"mat-header-cell",24)(43,za,2,1,"mat-cell",25),k(),M(44,31),C(45,Ka,2,1,"mat-header-cell",24)(46,Ja,3,3,"mat-cell",25),k(),M(47,32),C(48,Ya,2,1,"mat-header-cell",24)(49,Xa,3,3,"mat-cell",25),k(),M(50,33),C(51,Za,3,3,"mat-header-cell",34)(52,$a,6,1,"mat-cell",35),k(),C(53,el,1,0,"mat-header-row",36)(54,tl,1,2,"mat-row",37),a(),k(),M(55,38),r(56,"mat-paginator",39,1),I("page",function(p){return g(s),h(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),u("",_(15,22,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),u("",_(19,24,"ACTION.STATIST")," "),o(4),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(26),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(26,La)))},dependencies:[yt,B,We,Ge,Pe,j,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,mt,Vt,Ot,Be,N,Ct,It,Ft,Nt],encapsulation:2});var Zi=Ri;var ol=["vform"];function rl(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",18),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function al(n,l){n&1&&v(0,"i",19)}function ll(n,l){n&1&&v(0,"i",20)}function sl(n,l){n&1&&(r(0,"mat-error"),d(1," Question is "),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2&&(o(3),w(_(4,1,"MESSAGE.required")))}function cl(n,l){if(n&1){let e=b();r(0,"div",21)(1,"button",22),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),v(2,"i",23),d(3),S(4,"translate"),a(),r(5,"button",24),v(6,"i",25),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),u(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),u(" ",_(8,5,"ACTION.SAVE")," ")}}var Li=class Li extends vt{constructor(e,i,t,s,T,p,Q,J){super(s,new Tt,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingFaqService=s;this.cmsToastrService=T;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestParentId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new Kt;this.dataModelResult=new W;this.dataModel=new Tt;this.dataFileModel=new Map;this.formInfo=new ee;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=+e.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.Submit_New_Content").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";if(this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Li.\u0275fac=function(i){return new(i||Li)(f(fe),f(re),f(U),f(Dt),f(O),f(F),f(L),f(V))},Li.\u0275cmp=R({type:Li,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,t){if(i&1&&X(ol,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:33,vars:33,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",2),v(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),C(10,rl,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),S(12,"translate"),I("optionChange",function(p){return g(s),h(t.onActionSelectorSelect(p))}),a(),r(13,"div",9)(14,"label",10),d(15),S(16,"translate"),a(),r(17,"input",11,1),S(19,"translate"),A("ngModelChange",function(p){return g(s),y(t.dataModel.question,p)||(t.dataModel.question=p),h(p)}),a(),C(20,al,1,0,"i",12)(21,ll,1,0,"i",13),r(22,"em"),d(23),a(),C(24,sl,5,3,"mat-error",14),a(),r(25,"p"),d(26),S(27,"translate"),a(),r(28,"angular-editor",15),S(29,"translate"),A("ngModelChange",function(p){return g(s),y(t.dataModel.answer,p)||(t.dataModel.answer=p),h(p)}),a(),v(30,"br"),r(31,"app-cms-files-selector",16),A("dataFileModelChange",function(p){return g(s),y(t.dataFileModel,p)||(t.dataFileModel=p),h(p)}),a(),C(32,cl,9,7,"div",17),a()()()}if(i&2){let s=D(18);o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),u(" ",t.formInfo.formTitle," "),o(2),u(" ",_(7,21,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,23,"TITLE.Department")),o(4),w(_(16,25,"TITLE.Question")),o(2),c("placeholder",x(_(19,27,"TITLE.Question"))),E("ngModel",t.dataModel.question),o(3),c("ngIf",!s.value),o(),c("ngIf",s.value),o(2),u("",s.value.length," / 100"),o(),c("ngIf",s.errors==null?null:s.errors.required),o(2),w(_(27,29,"TITLE.Answer")),o(2),c("placeholder",_(29,31,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),E("ngModel",t.dataModel.answer),o(3),E("dataFileModel",t.dataFileModel),c("openDirectUploadView",!0),o(),c("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[B,Te,te,ie,Se,ve,Ce,Ie,ue,_e,ke,j,Me,H,Ln,Dn,Ee,N],encapsulation:2});var Wn=Li;var dl=["vform"];function pl(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",18),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ml(n,l){n&1&&v(0,"i",19)}function ul(n,l){n&1&&v(0,"i",20)}function fl(n,l){n&1&&(r(0,"mat-error"),d(1," Question is "),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2&&(o(3),w(_(4,1,"MESSAGE.required")))}function gl(n,l){if(n&1){let e=b();r(0,"div",21)(1,"button",22),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),v(2,"i",23),d(3),S(4,"translate"),a(),r(5,"button",24),v(6,"i",25),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),u(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),u(" ",_(8,5,"ACTION.SAVE")," ")}}var Bi=class Bi extends Bt{constructor(e,i,t,s,T,p,Q,J){super(s,new Tt,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingFaqService=s;this.cmsToastrService=T;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new Kt;this.dataModelResult=new _t;this.dataModel=new Tt;this.dataFileModel=new Map;this.formInfo=new ee;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingFaqService.setAccessLoad(),this.ticketingFaqService.setAccessDataType(St.Editor),this.ticketingFaqService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.question,this.formInfo.submitResultMessage="",this.dataModel.linkFileIds&&this.dataModel.linkFileIds.length>0&&this.dataModel.linkFileIds.split(",").forEach((t,s)=>{let T="";this.dataModel.linkFileIdsSrc.length>=this.dataModel.linkFileIdsSrc.length&&(T=this.dataModel.linkFileIdsSrc[s]),this.dataFileModel.set(+t,T)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";if(this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Bi.\u0275fac=function(i){return new(i||Bi)(f(fe),f(re),f(U),f(Dt),f(O),f(F),f(L),f(V))},Bi.\u0275cmp=R({type:Bi,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,t){if(i&1&&X(dl,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:33,vars:33,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",2),v(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),C(10,pl,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),S(12,"translate"),I("optionChange",function(p){return g(s),h(t.onActionSelectorSelect(p))}),a(),r(13,"div",9)(14,"label",10),d(15),S(16,"translate"),a(),r(17,"input",11,1),S(19,"translate"),A("ngModelChange",function(p){return g(s),y(t.dataModel.question,p)||(t.dataModel.question=p),h(p)}),a(),C(20,ml,1,0,"i",12)(21,ul,1,0,"i",13),r(22,"em"),d(23),a(),C(24,fl,5,3,"mat-error",14),a(),r(25,"p"),d(26),S(27,"translate"),a(),r(28,"angular-editor",15),S(29,"translate"),A("ngModelChange",function(p){return g(s),y(t.dataModel.answer,p)||(t.dataModel.answer=p),h(p)}),a(),v(30,"br"),r(31,"app-cms-files-selector",16),A("dataFileModelChange",function(p){return g(s),y(t.dataFileModel,p)||(t.dataFileModel=p),h(p)}),a(),C(32,gl,9,7,"div",17),a()()()}if(i&2){let s=D(18);o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),u(" ",t.formInfo.formTitle," "),o(2),u(" ",_(7,21,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,23,"TITLE.Department")),o(4),w(_(16,25,"TITLE.Question")),o(2),c("placeholder",x(_(19,27,"TITLE.Question"))),E("ngModel",t.dataModel.question),o(3),c("ngIf",!s.value),o(),c("ngIf",s.value),o(2),u("",s.value.length," / 100"),o(),c("ngIf",s.errors==null?null:s.errors.required),o(2),w(_(27,29,"TITLE.Answer")),o(2),c("placeholder",_(29,31,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),E("ngModel",t.dataModel.answer),o(3),E("dataFileModel",t.dataFileModel),c("openDirectUploadView",!0),o(),c("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[B,Te,te,ie,Se,ve,Ce,Ie,ue,_e,ke,j,Me,H,Ln,Dn,Ee,N],encapsulation:2});var jn=Bi;var hl=()=>[5,10,20,100],Sl=n=>({display:n});function _l(n,l){if(n&1){let e=b();r(0,"a",37),I("click",function(){g(e);let t=m();return h(t.onActionBackToParent())}),v(1,"i",38),a()}}function Tl(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",40),I("click",function(){g(e);let t=m();return h(t.onActionButtonNewRow())}),v(2,"i",41)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.ADD")," "))}function vl(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",43),I("click",function(){g(e);let t=m();return h(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",44)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.EDIT")," "))}function Cl(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",45),I("click",function(){g(e);let t=m();return h(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",46)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.DELETE")," "))}function Il(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function bl(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.id," ")}}function Ml(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function kl(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),u(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function wl(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function El(n,l){if(n&1&&v(0,"select",50),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,Sl,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function yl(n,l){if(n&1&&(r(0,"mat-cell",48),S(1,"statusCellClass"),v(2,"i",48),S(3,"statusIconClass"),C(4,El,1,5,"select",49),a()),n&2){let e=l.$implicit,i=m();c("ngClass",_(1,3,e.recordStatus)),o(2),c("ngClass",_(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Al(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.question==null?null:e.fieldsInfo.question.fieldTitle," ")}}function Dl(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.question," ")}}function xl(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),u(" ",_(2,1,"TITLE.OPTION")," "))}function Rl(n,l){if(n&1&&(r(0,"mat-cell",51)(1,"button",52)(2,"mat-icon"),d(3,"more_vert"),a()(),v(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Ll(n,l){n&1&&v(0,"mat-header-row")}function Bl(n,l){if(n&1){let e=b();r(0,"mat-row",53),I("click",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Vi=class Vi extends st{constructor(e,i,t,s,T,p,Q,J,Ae,De,Et,ut){super(e,new Tt,Et,p,J);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=T;this.tokenHelper=p;this.cdr=Q;this.translate=J;this.pageInfo=Ae;this.cmsStoreService=De;this.publicHelper=Et;this.dialog=ut;this.requestDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus","Question"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","Question"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Ki=>this.onSubmitOptionsSearch(Ki)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Ascending}ngOnInit(){if(this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestDepartemenId>0){let e=new z;e.propertyName="LinkTicketingDepartemenId",e.value=this.requestDepartemenId,this.filteModelContent.filters.push(e)}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Tt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.categoryModelSelected&&this.categoryModelSelected.id>0){let t=new z;t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)}this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorGetAll(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Wn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{parentId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(jn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.question+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let T=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(T,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(T)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(T)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),T=new z;T.propertyName="RecordStatus",T.value=je.Available,s.filters.push(T),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};Vi.\u0275fac=function(i){return new(i||Vi)(f(Dt),f(he),f(O),f(Lt),f(oe),f(le),f(L),f(V),f(lt),f(ae),f(F),f(we))},Vi.\u0275cmp=R({type:Vi,selectors:[["app-application-app-list"]],standalone:!1,features:[q],decls:51,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Question"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),h(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),h(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),h(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),h(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),h(t.onActionButtonPrintRow())}),M(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return g(s),h(t.onActionSelectorSelect(p))}),a(),k(),xe(3,6)(4,7),M(5,8),C(6,_l,2,0,"a",9),r(7,"a",10),I("click",function(){return g(s),h(t.viewGuideNotice=!t.viewGuideNotice)}),v(8,"i",11),a(),r(9,"a",10),I("click",function(){return g(s),h(t.onActionButtonReload())}),v(10,"i",12),a(),k(),M(11,13),r(12,"a",14),I("click",function(){return g(s),h(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(13,"mat-slide-toggle",15),d(14),S(15,"translate"),a(),r(16,"a",14),I("click",function(){return g(s),h(t.onActionButtonStatist())}),v(17,"mat-slide-toggle",15),d(18),S(19,"translate"),a(),k(),M(20,16),C(21,Tl,7,3,"div",17),k(),M(22,18),C(23,vl,7,3,"div",17)(24,Cl,7,3,"div",17),k(),M(25,19),r(26,"app-cms-search-list",20),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),h(p)}),a(),r(27,"app-cms-statist-list",20),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),h(p)}),a(),k(),M(28,21),r(29,"mat-table",22,0),I("matSortChange",function(){g(s);let p=D(30);return h(t.onTableSortData(p))}),M(31,23),C(32,Il,2,1,"mat-header-cell",24)(33,bl,2,1,"mat-cell",25),k(),M(34,26),C(35,Ml,2,1,"mat-header-cell",24)(36,kl,4,5,"mat-cell",25),k(),M(37,27),C(38,wl,2,1,"mat-header-cell",24)(39,yl,5,7,"mat-cell",28),k(),M(40,29),C(41,Al,2,1,"mat-header-cell",24)(42,Dl,2,1,"mat-cell",25),k(),M(43,30),C(44,xl,3,3,"mat-header-cell",31)(45,Rl,6,1,"mat-cell",32),k(),C(46,Ll,1,0,"mat-header-row",33)(47,Bl,1,2,"mat-row",34),a(),k(),M(48,35),r(49,"mat-paginator",36,1),I("page",function(p){return g(s),h(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.faq.list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),u("",_(15,24,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),u("",_(19,26,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(17),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(28,hl)))},dependencies:[yt,B,We,Ge,Pe,j,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,mt,Vt,Ot,Be,N,Ct,Ft,Nt],encapsulation:2});var $i=Vi;function Vl(n,l){if(n&1&&(r(0,"div",6)(1,"button",7),v(2,"i",8),d(3),v(4,"i",9),a(),r(5,"div",10)(6,"div",11),v(7,"p",12),a()()()),n&2){let e=m().$implicit,i=m().$implicit;o(),Gt("data-bs-target","#collapse"+e.id),o(2),u(" ",e.question," "),o(2),c("id",Pt("collapse",e.id)),Gt("data-bs-parent","#accordion-"+i.id),o(2),c("innerHTML",e.answer,dn)}}function Fl(n,l){if(n&1&&(M(0),C(1,Vl,8,6,"div",5),k()),n&2){let e=l.$implicit,i=m().$implicit;o(),c("ngIf",e.linkTicketingDepartemenId===i.id)}}function Nl(n,l){if(n&1&&(M(0),r(1,"div",2)(2,"div",3)(3,"h4"),d(4),a()(),r(5,"div",4),C(6,Fl,2,1,"ng-container",1),a()(),k()),n&2){let e=l.$implicit,i=m();o(4),w(e.title),o(),c("id",Pt("accordion-",e.id)),o(),c("ngForOf",i.dataModelResult.listItems)}}var Fi=class Fi{constructor(l,e,i,t,s,T,p,Q,J){this.ticketingFaqService=l;this.ticketingDepartemenService=e;this.publicHelper=i;this.cmsToastrService=t;this.cmsStoreService=s;this.router=T;this.cdr=p;this.translate=Q;this.tokenHelper=J;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.dataModelResult=new W;this.dataDepartemenModelResult=new W;this.optionsSearch=new xn;this.optionsStatist=new Rn;this.tokenInfo=new Ut;this.tableRowsSelected=[];this.tableRowSelected=new Tt;this.tableSource=new Co;this.unsubscribe=[];this.DataDepartemanLinkSelect=0;this.DataFaqLinkSelect=0;this.publicHelper.processService.cdr=this.cdr,this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Ascending}ngOnInit(){this.DataDepartemenGetAll(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.DataDepartemenGetAll(),this.tokenInfo=l,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetAll(){this.tableRowsSelected=[],this.onActionTableRowSelect(new Tt);let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(l,i,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let e=JSON.parse(JSON.stringify(this.filteModelContent));if(this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(e.filters=[...this.filterDataModelQueryBuilder]),this.categoryModelSelected&&this.categoryModelSelected.id>0){let i=new z;i.propertyName="LinkTicketingDepartemenId",i.value=this.categoryModelSelected.id,e.filters.push(i)}this.ticketingFaqService.ServiceGetAllOrigin(e).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),i.isSuccess?(this.dataModelResult=i,this.tableSource.data=i.listItems):this.cmsToastrService.typeErrorGetAll(i.errorMessage),this.publicHelper.processService.processStop(l)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(l)}})}DataDepartemenGetAll(){this.ticketingDepartemenService.ServiceGetAllOrigin(null).subscribe({next:l=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(l.access),l.isSuccess?this.dataDepartemenModelResult=l:this.cmsToastrService.typeErrorGetAll(l.errorMessage),Promise.resolve().then(()=>this.cdr.detectChanges())},error:l=>{this.cmsToastrService.typeError(l)}})}onTableSortData(l){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===l.active?this.tableSource.sort.start==="asc"?(l.start="desc",this.filteModelContent.sortColumn=l.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(l.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):l.start="desc":(this.filteModelContent.sortColumn=l.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=l,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(l){this.filteModelContent.currentPageNumber=l.pageIndex+1,this.filteModelContent.rowPerPage=l.pageSize,this.DataGetAll()}onActionSelectorSelect(l){var e=this.filteModelContent.sortColumn,i=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=e,this.filteModelContent.sortType=i,this.categoryModelSelected=l,this.DataGetAll()}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(l){l&&l.length>0?this.filterDataModelQueryBuilder=[...l]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionTableRowSelect(l){this.tableRowSelected=l,l.expanded||(l.expanded=!1),l.expanded=!l.expanded}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}onActionButtonDeparteman(l){this.DataDepartemanLinkSelect=l,this.DataFaqLinkSelect=0}onActionButtonFaqTitle(l){this.DataFaqLinkSelect=l}};Fi.\u0275fac=function(e){return new(e||Fi)(f(Dt),f(Ve),f(F),f(O),f(ae),f(oe),f(L),f(V),f(le))},Fi.\u0275cmp=R({type:Fi,selectors:[["app-ticketing-faq-originlist"]],standalone:!1,decls:2,vars:2,consts:[[3,"optionsInfoAreaId"],[4,"ngFor","ngForOf"],[1,"card","card-style"],[1,"content"],[1,"accordion",3,"id"],["class","mb-0",4,"ngIf"],[1,"mb-0"],["type","button","data-bs-toggle","collapse",1,"btn","accordion-btn","no-effect","color-theme"],[1,"fa","fa-cloud","color-yellow-dark","me-2"],[1,"fa","fa-chevron-down","font-10","accordion-icon"],[1,"collapse",3,"id"],[1,"pt-1","pb-2","ps-3","pe-3"],[3,"innerHTML"]],template:function(e,i){e&1&&(v(0,"app-progress-spinner",0),C(1,Nl,7,4,"ng-container",1)),e&2&&(c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("ngForOf",i.dataDepartemenModelResult.listItems))},dependencies:[li,B,H],encapsulation:2});var Un=Fi;var Ol=["*"];function Gl(n,l){if(n&1&&(r(0,"label",11),d(1),a()),n&2){let e=m();c("for",Pt("app-cms-site-selector-",e.id)),o(),w(e.optionLabel)}}function Pl(n,l){if(n&1&&(r(0,"mat-option",12)(1,"span"),d(2),a()()),n&2){let e=l.$implicit,i=m();c("value",e)("disabled",i.optionDisabled),o(2),w(i.displayOption(e))}}function Hl(n,l){n&1&&v(0,"i",13)}function ql(n,l){n&1&&v(0,"i",14)}function Wl(n,l){if(n&1){let e=b();r(0,"i",15),I("click",function(){g(e);let t=m();return h(t.onActionSelectClear())}),a()}}function jl(n,l){n&1&&(r(0,"em"),d(1),S(2,"translate"),a()),n&2&&(o(),u("(",_(2,1,"TITLE.Necessary"),")"))}var Xt=class Xt{constructor(l,e,i,t,s){this.coreEnumService=l;this.cdr=e;this.publicHelper=i;this.translate=t;this.categoryService=s;this.id=++Xt.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new W;this.dataModelSelect=new ft;this.formControl=new hn;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new Zt;this.optionReload=()=>this.onActionButtonReload();this.optionItemCount=new Zt;this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(ln(""),rn(1500),an(),sn(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return Y(this,null,function*(){let e=new K;e.rowPerPage=20,e.accessLoad=!0;let i=new z;i.propertyName="Title",i.value=l,i.searchType=si.Contains,i.clauseType=Ht.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new z,i.propertyName="Id",i.value=l,i.searchType=si.Equal,i.clauseType=Ht.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield nn(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems?.length>0?this.optionItemCount.emit(s.listItems?.length):this.optionItemCount.emit(0),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe(on(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="number"&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess&&(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item))}});return}if(typeof l==typeof ft){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new ft,this.loadOptions()}};Xt.nextId=0,Xt.\u0275fac=function(e){return new(e||Xt)(f(U),f(L),f(F),f(V),f(xt))},Xt.\u0275cmp=R({type:Xt,selectors:[["app-ticketing-template-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionItemCount:"optionItemCount"},standalone:!1,ngContentSelectors:Ol,decls:13,vars:18,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=b();mn(),r(0,"div",1),v(1,"app-progress-spinner",2),C(2,Gl,2,3,"label",3),v(3,"input",4),r(4,"mat-autocomplete",5,0),I("optionSelected",function(T){return g(t),h(i.onActionSelect(T.option.value))}),C(6,Pl,3,3,"mat-option",6),S(7,"async"),a(),C(8,Hl,1,0,"i",7)(9,ql,1,0,"i",8)(10,Wl,1,0,"i",9)(11,jl,3,3,"em",10),un(12),a()}if(e&2){let t=D(5);o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),o(),c("placeholder",x(i.optionPlaceholder))("id",Pt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),Gt("disabled",i.optionDisabled?!0:null),o(),c("displayWith",i.displayFn),o(2),c("ngForOf",_(7,16,i.filteredOptions)),o(2),c("ngIf",!i.formControl.valid),o(),c("ngIf",i.optionRequired&&i.formControl.valid),o(),c("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[li,B,te,ie,ve,Sn,vn,_n,Cn,j,H,Be,N],encapsulation:2});var Qn=Xt;var Ql=["vform"];function zl(n,l){n&1&&(r(0,"mat-error"),d(1),S(2,"translate"),r(3,"strong"),d(4),S(5,"translate"),a()()),n&2&&(o(),u(" ",_(2,2,"AUTH.INPUT.FULLNAME")," "),o(3),w(_(5,4,"MESSAGE.required")))}function Kl(n,l){n&1&&(r(0,"mat-error"),d(1),S(2,"translate"),r(3,"strong"),d(4),S(5,"translate"),a()()),n&2&&(o(),u(" ",_(2,2,"AUTH.INPUT.MOBILE")," "),o(3),w(_(5,4,"MESSAGE.required")))}function Jl(n,l){n&1&&(r(0,"mat-error"),d(1),S(2,"translate"),r(3,"strong"),d(4),S(5,"translate"),a()()),n&2&&(o(),u(" ",_(2,2,"AUTH.INPUT.EMAIL")," "),o(3),w(_(5,4,"MESSAGE.required")))}function Yl(n,l){if(n&1){let e=b();r(0,"div",36)(1,"label"),d(2),S(3,"translate"),a(),r(4,"app-ticketing-template-selector",45),I("optionItemCount",function(){g(e);let t=m(2);return h(t.templateItemCount)})("optionChange",function(t){g(e);let s=m(2);return h(s.onActionSelectorSelect(t))}),a()()}n&2&&(o(2),w(_(3,1,"TITLE.Categories")))}function Xl(n,l){n&1&&(r(0,"mat-error"),d(1),S(2,"translate"),r(3,"strong"),d(4),S(5,"translate"),a()()),n&2&&(o(),u(" ",_(2,2,"AUTH.INPUT.YOURMEESAGE")," "),o(3),w(_(5,4,"MESSAGE.required")))}function Zl(n,l){if(n&1){let e=b();r(0,"div",8)(1,"form",29,0),I("ngSubmit",function(){g(e);let t=m();return h(t.onFormSubmit())}),r(3,"fieldset")(4,"div",30)(5,"label",31),d(6),S(7,"translate"),r(8,"span"),d(9),S(10,"translate"),a()(),r(11,"input",32,1),S(13,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.fullName,t)||(s.dataModel.fullName=t),h(t)}),a(),C(14,zl,6,6,"mat-error",33),a(),r(15,"div",30)(16,"label",34),d(17),S(18,"translate"),r(19,"span"),d(20),S(21,"translate"),a()(),r(22,"input",35,2),S(24,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),h(t)}),a(),C(25,Kl,6,6,"mat-error",33),a(),r(26,"div",36)(27,"label",37),d(28),S(29,"translate"),r(30,"span"),d(31),S(32,"translate"),a()(),r(33,"input",38,3),S(35,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.email,t)||(s.dataModel.email=t),h(t)}),a(),C(36,Jl,6,6,"mat-error",33),a(),C(37,Yl,5,3,"div",39),r(38,"div",40)(39,"label",41),d(40),S(41,"translate"),r(42,"span"),d(43),S(44,"translate"),a()(),r(45,"textarea",42,4),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),h(t)}),a(),C(47,Xl,6,6,"mat-error",33),a(),r(48,"div",43),v(49,"input",44),S(50,"translate"),a()()()()}if(n&2){let e=D(12),i=D(23),t=D(34),s=D(46),T=m();o(6),u("",_(7,25,"AUTH.INPUT.FULLNAME"),":"),o(3),u("( ",_(10,27,"TITLE.Necessary")," )"),o(2),c("placeholder",x(_(13,29,"TITLE.Enter_your_first_and_last_name"))),E("ngModel",T.dataModel.fullName),o(3),c("ngIf",e.errors==null?null:e.errors.required),o(3),u("",_(18,31,"AUTH.INPUT.MOBILE"),":"),o(3),u("( ",_(21,33,"TITLE.Necessary")," )"),o(2),c("placeholder",x(_(24,35,"TITLE.Enter_your_first_and_last_name"))),E("ngModel",T.dataModel.phoneNo),o(3),c("ngIf",i.errors==null?null:i.errors.required),o(3),u("",_(29,37,"AUTH.INPUT.EMAIL"),":"),o(3),u("( ",_(32,39,"TITLE.Necessary")," )"),o(2),c("placeholder",x(_(35,41,"TITLE.Enter_email"))),E("ngModel",T.dataModel.email),o(3),c("ngIf",t.errors==null?null:t.errors.required),o(),c("ngIf",T.templateItemCount>0),o(3),u("",_(41,43,"AUTH.INPUT.YOURMEESAGE"),":"),o(3),u("( ",_(44,45,"TITLE.Necessary")," )"),o(2),E("ngModel",T.dataModel.htmlBody),o(2),c("ngIf",s.errors==null?null:s.errors.required),o(2),c("value",x(_(50,47,"ACTION.SEND")))}}function $l(n,l){if(n&1&&(r(0,"div",46)(1,"div",11)(2,"div",12)(3,"h1",13),v(4,"i",14),a(),r(5,"h2",15),d(6),S(7,"translate"),a(),r(8,"p",16),d(9),S(10,"translate"),a(),r(11,"p",15),d(12),S(13,"translate"),a(),v(14,"div",47),a()()()),n&2){let e=m();o(6),u(" ",_(7,5,"TITLE.Your_message_has_been_registered_in_the_system")," "),o(3),u(" ",_(10,7,"TITLE.Note_the_tracking_code_for_further_tracking")," "),o(3),ro(" ",_(13,9,"TITLE.Tracking_Code")," : ",e.dataModelResult.item.id," "),o(2),c("innerHTML",e.dataModelResult.item==null||e.dataModelResult.item.virtual_Departemen==null?null:e.dataModelResult.item.virtual_Departemen.DefaultAnswerBody,dn)}}var Ni=class Ni extends vt{constructor(e,i,t,s,T,p,Q,J,Ae,De,Et){super(Q,new Fe,T,De);this.tokenHelper=e;this.cmsStoreService=i;this.activatedRoute=t;this.coreAuthService=s;this.publicHelper=T;this.coreEnumService=p;this.ticketingTaskService=Q;this.cmsToastrService=J;this.router=Ae;this.translate=De;this.cdr=Et;this.requestLinkDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.unsubscribe=[];this.fieldsInfo=new Map;this.formInfo=new ee;this.dataModel=new fo;this.dataModelResult=new W;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.templateItemCount=0;this.mapOptonCenter=new Rt;this.captchaModel=new lo;this.countAutoCaptchaOrder=1;this.enumFormSubmitedStatus=fn;this.onCaptchaOrderInProcess=!1;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&(this.dataModel.fullName=this.tokenInfo.user.lastName,this.dataModel.email=this.tokenInfo.user.email,this.dataModel.phoneNo=this.tokenInfo.user.mobile),this.unsubscribe.push(this.cmsStoreService.getState(ut=>ut.tokenInfoStore).subscribe(ut=>Y(this,null,function*(){this.tokenInfo=ut,this.dataModel.fullName=this.tokenInfo.user.lastName,this.dataModel.email=this.tokenInfo.user.email,this.dataModel.phoneNo=this.tokenInfo.user.mobile})))}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.onCaptchaOrder(),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataAddContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.captchaKey=this.captchaModel.key,this.ticketingTaskService.ServiceContactUS(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.formInfo.submitResultMessageType=fn.Success,this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd()):(this.formInfo.submitResultMessageType=fn.Error,this.cmsToastrService.typeErrorAdd(i.errorMessage)),this.publicHelper.processService.processStop(e),this.cdr.markForCheck()},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorAdd(i),this.cdr.markForCheck()}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_template_is_not_clear").subscribe(i=>{this.cmsToastrService.typeWarningSelected(i)});return}this.dataModel.htmlBody=e.htmlBody}onActionBackToParent(){this.router.navigate(["/application/app/"])}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}onCaptchaOrder(){this.onCaptchaOrderInProcess||(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModel.captchaText="",this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{if(e.isSuccess){this.captchaModel=e.item,this.expireDate=e.item.expire;let i=new Date,s=new Date(e.item.expire).getTime()-i.getTime();this.countAutoCaptchaOrder<10&&(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,setTimeout(()=>{this.onCaptchaOrder()},s))}else this.cmsToastrService.typeErrorGetCpatcha(e.errorMessage);this.onCaptchaOrderInProcess=!1},error:e=>{this.onCaptchaOrderInProcess=!1}}))}};Ni.\u0275fac=function(i){return new(i||Ni)(f(le),f(ae),f(he),f(co),f(F),f(U),f(Ne),f(O),f(oe),f(V),f(L))},Ni.\u0275cmp=R({type:Ni,selectors:[["app-ticketing-task-contactus"]],viewQuery:function(i,t){if(i&1&&X(Ql,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:39,vars:21,consts:[["vform","ngForm"],["FullName",""],["phoneNo",""],["Email",""],["HtmlBody",""],[1,"page-content","pb-3"],[1,"card","card-full","rounded-m","pb-4"],[1,"drag-line"],[1,"content"],[1,"font-600","mb-0","color-highlight"],[1,"form-sent","disabled"],[1,"card","card-style"],[1,"shadow-l","rounded-m","gradient-green","ms-n1","mb-0"],[1,"color-white","text-center","pt-4"],[1,"fa","fa-check-circle","fa-3x","shadow-s","scale-box","rounded-circle"],[1,"color-white","bold","text-center","pt-3"],[1,"color-white","pb-4","text-center","mt-n2","mb-0"],[1,"content","text-center"],[1,"boxed-text-xl"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-facebook"],[1,"fab","fa-facebook-f"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-instagram","ms-3","me-3"],[1,"fab","fa-instagram"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-twitter"],[1,"fab","fa-twitter"],[3,"optionsInfoAreaId"],[1,"card","contact-form"],["class","content",4,"ngIf"],["class","form-sent",4,"ngIf"],[3,"ngSubmit"],[1,"form-field","form-name"],["for","contactNameField",1,"contactNameField","color-theme"],["type","text","name","dataModel.fullName","id","contactNameField","required","",1,"round-small",2,"text-align","center !important",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","contactPhoneField",1,"contactNameField","color-theme"],["type","text","name","dataModel.phoneNo","id","contactPhoneField","required","",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],[1,"form-field","form-email"],["for","contactEmailField",1,"contactEmailField","color-theme"],["type","email","name","dataModel.email","id","contactEmailField",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],["class","form-field form-email",4,"ngIf"],[1,"form-field","form-text"],["for","contactMessageTextarea",1,"contactMessageTextarea","color-theme"],["name","dataModel.htmlBody","id","contactMessageTextarea","rows","3","required","",1,"round-small",3,"ngModelChange","ngModel"],[1,"form-button"],["type","submit","data-formId","contactForm",1,"btn","bg-highlight","font-700","btn-m","btn-full","rounded-sm","shadow-xl","contactSubmitButton",3,"value"],[3,"optionItemCount","optionChange"],[1,"form-sent"],[3,"innerHTML"]],template:function(i,t){i&1&&(r(0,"div",5)(1,"div",6),v(2,"div",7),r(3,"div",8)(4,"p",9),d(5),S(6,"translate"),a(),r(7,"p"),d(8),S(9,"translate"),a()(),r(10,"div",10)(11,"div",11)(12,"div",12)(13,"h1",13),v(14,"i",14),a(),r(15,"h2",15),d(16),S(17,"translate"),a(),r(18,"p",16),d(19),S(20,"translate"),a()()(),r(21,"div",11)(22,"div",17)(23,"h2"),d(24),S(25,"translate"),a(),r(26,"p",18),d(27),S(28,"translate"),a(),r(29,"a",19),v(30,"i",20),a(),r(31,"a",21),v(32,"i",22),a(),r(33,"a",23),v(34,"i",24),a()()()(),v(35,"app-progress-spinner",25),r(36,"div",26),C(37,Zl,51,49,"div",27),a(),C(38,$l,15,11,"div",28),a()()),i&2&&(o(5),u(" ",_(6,9,"TITLE.Send_us_your_questions")," "),o(3),u(" ",_(9,11,"TITLE.GetInTouchWithUs")," "),o(8),u(" ",_(17,13,"TITLE.MESSAGE_SENT")," "),o(3),u(" ",_(20,15,"TITLE.WE_WILL_CONTACT_YOU_SOON")," "),o(5),w(_(25,17,"TITLE.LETS_BE_SOCIAL")),o(3),u(" ",_(28,19,"TITLE.SOCIAL_MEDIA_PLATFORMS")," "),o(8),c("optionsInfoAreaId",t.constructorInfoAreaId),o(2),c("ngIf",(t.formInfo==null?null:t.formInfo.submitResultMessageType)!==t.enumFormSubmitedStatus.Success),o(),c("ngIf",(t.formInfo==null?null:t.formInfo.submitResultMessageType)===t.enumFormSubmitedStatus.Success))},dependencies:[B,Te,te,ie,Se,ve,ue,_e,ke,H,Qn,N],encapsulation:2});var zn=Ni;var es=["vform"];function ts(n,l){if(n&1&&(r(0,"div",16),v(1,"i",20),r(2,"span",21),d(3),a()()),n&2){let e=m(3);o(3),w(e.formInfo.submitResultMessage)}}function is(n,l){if(n&1&&(r(0,"div",17),v(1,"i",22),r(2,"span",21),d(3),a()()),n&2){let e=m(3);o(3),w(e.formInfo.submitResultMessage)}}function ns(n,l){if(n&1&&(r(0,"div",18),v(1,"i",23),r(2,"span",21),d(3),a()()),n&2){let e=m(3);o(3),w(e.formInfo.submitResultMessage)}}function os(n,l){if(n&1&&(r(0,"div",19),v(1,"i",24),r(2,"span",21),d(3),a()()),n&2){let e=m(3);o(3),w(e.formInfo.submitResultMessage)}}function rs(n,l){if(n&1&&oi(0,ts,4,1,"div",16)(1,is,4,1,"div",17)(2,ns,4,1,"div",18)(3,os,4,1,"div",19),n&2){let e,i=m(2);ri((e=i.formInfo.submitResult)==="success"?0:e==="error"?1:e==="warning"?2:3)}}function as(n,l){if(n&1){let e=b();r(0,"div",25)(1,"button",26),I("click",function(){g(e);let t=m(2);return h(t.onFormCancel())}),v(2,"i",27),d(3),S(4,"translate"),a()()}n&2&&(o(3),u(" ",_(4,1,"ACTION.CANCEL")," "))}function ls(n,l){if(n&1&&(M(0),r(1,"div",9)(2,"table",10)(3,"thead",11)(4,"tr"),v(5,"th")(6,"th"),a()(),r(7,"tbody")(8,"tr")(9,"td"),d(10),a(),r(11,"td"),d(12),a()(),r(13,"tr")(14,"td"),d(15),a(),r(16,"td"),d(17),a()(),r(18,"tr")(19,"td"),d(20),a(),r(21,"td"),d(22),S(23,"enums"),a()(),r(24,"tr")(25,"td"),d(26),a(),r(27,"td"),d(28),a()(),r(29,"tr")(30,"td"),d(31),S(32,"translate"),a(),r(33,"td"),d(34),a()(),r(35,"tr")(36,"td"),d(37),a(),r(38,"td"),d(39),a()(),r(40,"tr")(41,"td"),d(42),a(),r(43,"td"),d(44),a()(),r(45,"tr")(46,"td"),d(47),a(),r(48,"td"),d(49),S(50,"localeDate"),a()(),r(51,"tr")(52,"td"),d(53),a(),r(54,"td"),d(55),S(56,"localeDate"),a()(),r(57,"tr")(58,"td"),d(59),a(),r(60,"td"),d(61),a()(),r(62,"tr")(63,"td"),d(64),a(),r(65,"td"),d(66),a()(),r(67,"tr")(68,"td"),d(69),a(),r(70,"td"),d(71),a()(),r(72,"tr")(73,"td"),d(74),a(),r(75,"td"),d(76),a()(),r(77,"tr")(78,"td"),d(79),a(),r(80,"td"),d(81),a()()()(),v(82,"hr"),a(),v(83,"div",12),r(84,"div",13),oi(85,rs,4,1),a(),r(86,"div",14),C(87,as,5,3,"div",15),a(),k()),n&2){let e=m();o(10),w(e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle),o(2),w(e.dataModel.id),o(3),w(e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle),o(2),w(e.dataModel.linkSiteId),o(3),w(e.fieldsInfo.ticketStatus==null?null:e.fieldsInfo.ticketStatus.fieldTitle),o(2),u(" ",ai(23,30,e.dataModel.ticketStatus,e.dataModelEnumTicketStatusResult.listItems)," "),o(4),w(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),o(2),w(e.dataModel.title),o(3),w(_(32,33,"TITLE.Message_Text")),o(3),w(e.dataModel.htmlBody),o(3),w(e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle),o(2),w(e.dataModel.fullName),o(3),w(e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle),o(2),w(e.dataModel.phoneNo),o(3),w(e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle),o(2),w(_(50,35,e.dataModel.createdDate)),o(4),w(e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle),o(2),w(_(56,37,e.dataModel.updatedDate)),o(4),w(e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle),o(2),w(e.dataModel.email),o(3),w(e.fieldsInfo.linkCmsUserId==null?null:e.fieldsInfo.linkCmsUserId.fieldTitle),o(2),w(e.dataModel.linkCmsUserId),o(3),w(e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle),o(2),w(e.dataModel.linkMemberId),o(3),u(" ",e.fieldsInfo.linkTicketingDepartemenId==null?null:e.fieldsInfo.linkTicketingDepartemenId.fieldTitle," "),o(2),w(e.dataModel.linkTicketingDepartemenId),o(3),u(" ",e.fieldsInfo.ticketingDepartemenDefaultAnswerBody==null?null:e.fieldsInfo.ticketingDepartemenDefaultAnswerBody.fieldTitle," "),o(2),w(e.dataModel.ticketingDepartemenDefaultAnswerBody),o(4),ri((e.formInfo==null||e.formInfo.submitResultMessage==null?null:e.formInfo.submitResultMessage.length)>0?85:-1),o(2),c("ngIf",e.formInfo.submitButtonEnabled&&!e.publicHelper.processService.process.inRunAll)}}var Oi=class Oi{constructor(l,e,i,t,s,T,p,Q,J,Ae,De){this.data=l;this.dialogRef=e;this.coreEnumService=i;this.ticketingTaskService=t;this.cmsToastrService=s;this.tokenHelper=T;this.cmsStoreService=p;this.cdr=Q;this.ticketingEnumService=J;this.publicHelper=Ae;this.translate=De;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Ut;this.dataModelResult=new W;this.dataModel=new Fe;this.formInfo=new ee;this.dataModelEnumTicketStatusResult=new W;this.fieldsInfo=new Map;this.dataTaskReadedResult=new _t;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(l=>{this.formInfo.formTitle=l}),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.tokenInfo=l}))),this.getEnumTicketStatus()}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:l=>{this.dataModelEnumTicketStatusResult=l}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage="";let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.title+" ( "+e.item.id+" ) ",this.formInfo.submitResultMessage="",this.dataTaskReaded(this.requestId)):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}dataTaskReaded(l){this.ticketingTaskService.ServiceTaskReaded(l).subscribe({next:e=>{e.isSuccess&&(this.dataTaskReadedResult=e)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Oi.\u0275fac=function(e){return new(e||Oi)(f(fe),f(re),f(U),f(Ne),f(O),f(le),f(ae),f(L),f(Qt),f(F),f(V))},Oi.\u0275cmp=R({type:Oi,selectors:[["app-ticketing-task-view"]],viewQuery:function(e,i){if(e&1&&X(es,5),e&2){let t;Z(t=$())&&(i.formGroup=t.first)}},standalone:!1,decls:12,vars:4,consts:[[1,"card","card-style","loader-container",2,"height","100vh","overflow-y","auto"],[3,"optionsInfoAreaId"],[1,"menu-title"],[1,"color-highlight"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[4,"ngIf"],[1,"ntk-cms-html-card-header"],[1,"table","table-striped","center"],[2,"background-color","#81d4fa"],["dir","rtl",1,"ntk-cms-html-card-body","ntk-allow-text-selection"],[1,"ntk-cms-html-card-message"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[1,"chip","chip-s","bg-green-dark"],[1,"chip","chip-s","bg-red-dark"],[1,"chip","chip-s","bg-yellow-dark"],[1,"chip","chip-s","bg-gray-dark"],[1,"fa","fa-check","color-white","bg-green-light"],[1,"color-white"],[1,"fa","fa-check","color-white","bg-red-light"],[1,"fa","fa-check","color-white","bg-yellow-light"],[1,"fa","fa-check","color-white","bg-gray-light"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(r(0,"div",0),v(1,"app-progress-spinner",1),r(2,"div",2)(3,"p",3),d(4),a(),r(5,"a",4),I("click",function(){return i.onFormCancel()}),v(6,"i",5),a(),v(7,"hr"),a(),r(8,"div",6)(9,"p",7),d(10),a(),C(11,ls,88,39,"ng-container",8),a()()),e&2&&(o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(3),w(i.formInfo.formTitle),o(6),u(" ",i.formInfo.formDescription," "),o(),c("ngIf",!i.publicHelper.processService.process.inRunAll))},dependencies:[B,ho,H,N,ci,It],encapsulation:2});var Gi=Oi;var ss=()=>[5,10,20,100],cs=n=>({display:n});function ds(n,l){if(n&1){let e=b();r(0,"a",38),I("click",function(){g(e);let t=m();return h(t.onActionBackToParent())}),v(1,"i",39),a()}}function ps(n,l){if(n&1){let e=b();r(0,"div",40)(1,"a",41),I("click",function(){g(e);let t=m();return h(t.onActionButtonNewRow())}),v(2,"i",42)(3,"br"),a(),r(4,"p",43),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.ADD")," "))}function ms(n,l){if(n&1){let e=b();r(0,"div",40)(1,"a",9),I("click",function(){g(e);let t=m();return h(t.onActionButtonAnswerList())}),v(2,"i",44)(3,"br"),a(),r(4,"p",43),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.ANSWERS")," "))}function us(n,l){if(n&1){let e=b();r(0,"div",40)(1,"a",45),I("click",function(){g(e);let t=m();return h(t.onActionButtonAnswerList(t.tableRowSelected))}),v(2,"i",44),a(),r(3,"p",43),d(4),S(5,"translate"),a()()}n&2&&(o(4),u(" ",_(5,1,"ACTION.ANSWERS")," "))}function fs(n,l){if(n&1){let e=b();r(0,"div",40)(1,"a",46),I("click",function(){g(e);let t=m();return h(t.onActionButtonViewRow(t.tableRowSelected))}),v(2,"i",47),a(),r(3,"p",43),d(4),S(5,"translate"),a()()}n&2&&(o(4),u(" ",_(5,1,"ACTION.VIEW")," "))}function gs(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function hs(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.id," ")}}function Ss(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function _s(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),u(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function Ts(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function vs(n,l){if(n&1&&v(0,"select",51),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,cs,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Cs(n,l){if(n&1&&(r(0,"mat-cell",49),S(1,"statusCellClass"),v(2,"i",49),S(3,"statusIconClass"),C(4,vs,1,5,"select",50),a()),n&2){let e=l.$implicit,i=m();c("ngClass",_(1,3,e.recordStatus)),o(2),c("ngClass",_(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Is(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function bs(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.title," ")}}function Ms(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function ks(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),u(" ",_(2,1,e.createdDate)," ")}}function ws(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Es(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),u(" ",_(2,1,e.updatedDate)," ")}}function ys(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),u(" ",_(2,1,"TITLE.OPTION")," "))}function As(n,l){if(n&1&&(r(0,"mat-cell",52)(1,"button",53)(2,"mat-icon"),d(3,"more_vert"),a()(),v(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Ds(n,l){n&1&&v(0,"mat-header-row")}function xs(n,l){if(n&1){let e=b();r(0,"mat-row",54),I("click",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Pi=class Pi extends st{constructor(e,i,t,s,T,p,Q,J,Ae,De,Et){super(e,new Fe,De,T,Q);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.router=s;this.tokenHelper=T;this.cdr=p;this.translate=Q;this.pageInfo=J;this.cmsStoreService=Ae;this.publicHelper=De;this.dialog=Et;this.requestDepartemenId=0;this.requestLinkCmsUserId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.optionsSearch=new xn;this.optionsStatist=new Rn;this.tokenInfo=new Ut;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus","CreatedDate","UpdatedDate"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","CreatedDate","UpdatedDate"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:ut=>this.onSubmitOptionsSearch(ut)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Fe);let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.requestLinkCmsUserId>0&&(t.propertyName="LinkCmsUserId",t.value=this.requestLinkCmsUserId,i.filters.push(t)),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){this.router.navigate(["/ticketing/contactus/"])}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Gi,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionButtonAnswerList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),T=new z;T.propertyName="RecordStatus",T.value=je.Available,s.filters.push(T),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};Pi.\u0275fac=function(i){return new(i||Pi)(f(Ne),f(he),f(O),f(oe),f(le),f(L),f(V),f(lt),f(ae),f(F),f(we))},Pi.\u0275cmp=R({type:Pi,selectors:[["app-ticketing-task-contact-us-list"]],standalone:!1,features:[q],decls:57,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["mat-menu-item","","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-m","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),h(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),h(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),h(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),h(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),h(t.onActionButtonPrintRow())}),xe(1,4)(2,5)(3,6),M(4,7),C(5,ds,2,0,"a",8),r(6,"a",9),I("click",function(){return g(s),h(t.viewGuideNotice=!t.viewGuideNotice)}),v(7,"i",10),a(),r(8,"a",9),I("click",function(){return g(s),h(t.onActionButtonReload())}),v(9,"i",11),a(),k(),M(10,12),r(11,"a",13),I("click",function(){return g(s),h(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(12,"mat-slide-toggle",14),d(13),S(14,"translate"),a(),r(15,"a",13),I("click",function(){return g(s),h(t.onActionButtonStatist())}),v(16,"mat-slide-toggle",14),d(17),S(18,"translate"),a(),k(),M(19,15),C(20,ps,7,3,"div",16)(21,ms,7,3,"div",16),k(),M(22,17),C(23,us,6,3,"div",16)(24,fs,6,3,"div",16),k(),M(25,18),r(26,"app-cms-search-list",19),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),h(p)}),a(),r(27,"app-cms-statist-list",19),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),h(p)}),a(),k(),M(28,20),r(29,"mat-table",21,0),I("matSortChange",function(){g(s);let p=D(30);return h(t.onTableSortData(p))}),M(31,22),C(32,gs,2,1,"mat-header-cell",23)(33,hs,2,1,"mat-cell",24),k(),M(34,25),C(35,Ss,2,1,"mat-header-cell",23)(36,_s,4,5,"mat-cell",24),k(),M(37,26),C(38,Ts,2,1,"mat-header-cell",23)(39,Cs,5,7,"mat-cell",27),k(),M(40,28),C(41,Is,2,1,"mat-header-cell",23)(42,bs,2,1,"mat-cell",24),k(),M(43,29),C(44,Ms,2,1,"mat-header-cell",23)(45,ks,3,3,"mat-cell",24),k(),M(46,30),C(47,ws,2,1,"mat-header-cell",23)(48,Es,3,3,"mat-cell",24),k(),M(49,31),C(50,ys,3,3,"mat-header-cell",32)(51,As,6,1,"mat-cell",33),k(),C(52,Ds,1,0,"mat-header-row",34)(53,xs,1,2,"mat-row",35),a(),k(),M(54,36),r(55,"mat-paginator",37,1),I("page",function(p){return g(s),h(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.task.contactus-list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(5),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),u("",_(14,25,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),u("",_(18,27,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(23),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(29,ss)))},dependencies:[yt,B,We,Ge,Pe,j,Ue,vo,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,mt,Vt,Be,N,Ct,It,Ft,Nt],encapsulation:2});var en=Pi;var Bs=["vform"];function Vs(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",23),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Fs(n,l){n&1&&v(0,"i",30)}function Ns(n,l){n&1&&v(0,"i",31)}function Os(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Gs(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",25),d(2),a(),r(3,"input",26,2),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.fullName,t)||(s.dataModel.fullName=t),h(t)}),a(),C(5,Fs,1,0,"i",27)(6,Ns,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Os,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle)),E("ngModel",i.dataModel.fullName),c("disabled",!(i.fieldsInfo.fullName!=null&&i.fieldsInfo.fullName.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Ps(n,l){n&1&&v(0,"i",30)}function Hs(n,l){n&1&&v(0,"i",31)}function qs(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Ws(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",32),d(2),a(),r(3,"input",33,3),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),h(t)}),a(),C(5,Ps,1,0,"i",27)(6,Hs,1,0,"i",28),r(7,"em"),d(8),a(),C(9,qs,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function js(n,l){n&1&&v(0,"i",30)}function Us(n,l){n&1&&v(0,"i",31)}function Qs(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function zs(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",34),d(2),a(),r(3,"input",35,4),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),h(t)}),a(),C(5,js,1,0,"i",27)(6,Us,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Qs,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle)),E("ngModel",i.dataModel.phoneNo),c("disabled",!(i.fieldsInfo.phoneNo!=null&&i.fieldsInfo.phoneNo.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Ks(n,l){n&1&&v(0,"i",30)}function Js(n,l){n&1&&v(0,"i",31)}function Ys(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Xs(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",36),d(2),a(),r(3,"input",37,5),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.email,t)||(s.dataModel.email=t),h(t)}),a(),C(5,Ks,1,0,"i",27)(6,Js,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Ys,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle)),E("ngModel",i.dataModel.email),c("disabled",!(i.fieldsInfo.email!=null&&i.fieldsInfo.email.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Zs(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",38),d(2),S(3,"translate"),a(),r(4,"textarea",39,6),S(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),h(t)}),d(7,"            "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),w(_(3,6,"TITLE.Description")),o(2),c("placeholder",x(_(6,8,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)),o(5),u("",e.value.length," / 1000")}}function $s(n,l){if(n&1){let e=b();r(0,"div",40)(1,"label",41),d(2),a(),r(3,"input",42),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),h(t)}),a(),v(4,"mat-datepicker-toggle",43)(5,"mat-datepicker",44,7),a()}if(n&2){let e=D(6),i=m();o(2),w(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),o(),c("matDatepicker",e),E("ngModel",i.dataModel.expireDate),o(),c("for",e)}}function ec(n,l){if(n&1){let e=b();r(0,"div",45)(1,"button",46),I("click",function(){g(e);let t=m();return h(t.onActionBackToParent())}),d(2),S(3,"translate"),a(),r(4,"button",47),d(5),S(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),u(" ",_(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),u(" ",_(6,5,"ACTION.NEXT")," ")}}function tc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",48),d(2),a(),r(3,"input",49,8),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.userIpAddress,t)||(s.dataModel.userIpAddress=t),h(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle)),E("ngModel",i.dataModel.userIpAddress),c("disabled",!(i.fieldsInfo.userIpAddress!=null&&i.fieldsInfo.userIpAddress.accessAddField)),o(3),u("",e.value.length," / 100")}}function ic(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",50),d(2),a(),r(3,"input",51,9),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.deviceInformation,t)||(s.dataModel.deviceInformation=t),h(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.deviceInformation==null?null:i.fieldsInfo.deviceInformation.fieldTitle)),E("ngModel",i.dataModel.deviceInformation),c("disabled",!(i.fieldsInfo.deviceInformation!=null&&i.fieldsInfo.deviceInformation.accessAddField)),o(3),u("",e.value.length," / 100")}}function nc(n,l){if(n&1&&(r(0,"div",45)(1,"button",52),d(2),S(3,"translate"),a(),r(4,"button",53),d(5),S(6,"translate"),a()()),n&2){m();let e=D(9);o(2),u(" ",_(3,3,"ACTION.BEFOR")," "),o(2),c("disabled",!e.form.valid),o(),u(" ",_(6,5,"ACTION.SAVE")," ")}}var Hi=class Hi extends vt{constructor(e,i,t,s,T,p,Q,J,Ae){super(s,new Fe,i,Ae);this.activatedRoute=e;this.publicHelper=i;this.coreEnumService=t;this.ticketingTaskService=s;this.cmsToastrService=T;this.dialogRef=p;this.router=Q;this.cdr=J;this.translate=Ae;this.requestLinkDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.formInfo=new ee;this.dataModel=new Fe;this.dataModelResult=new W;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new Rt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTaskService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>this.router.navigate(["/ticketing/task/"]),1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}};Hi.\u0275fac=function(i){return new(i||Hi)(f(he),f(F),f(U),f(Ne),f(O),f(re),f(oe),f(L),f(V))},Hi.\u0275cmp=R({type:Hi,selectors:[["app-ticketing-task-add"]],viewQuery:function(i,t){if(i&1&&X(Bs,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:32,vars:32,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=b();r(0,"div",10),v(1,"app-progress-spinner",11),r(2,"div",12)(3,"p",13),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",14,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),r(10,"mat-horizontal-stepper",15,1),I("selectionChange",function(p){g(s);let Q=D(11);return h(t.onStepClick(p,Q))}),r(12,"mat-step",16),S(13,"translate"),C(14,Vs,1,5,"app-cms-enum-record-status-selector",17),r(15,"app-ticketing-departemen-selector",18),S(16,"translate"),I("optionChange",function(p){return g(s),h(t.onActionSelectSource(p))}),a(),C(17,Gs,10,9,"div",19)(18,Ws,10,9,"div",19)(19,zs,10,9,"div",19)(20,Xs,10,9,"div",19)(21,Zs,10,10,"div",19)(22,$s,7,4,"div",20)(23,ec,7,7,"div",21),a(),r(24,"mat-step",22),S(25,"translate"),r(26,"p"),d(27),S(28,"translate"),a(),C(29,tc,7,6,"div",19)(30,ic,7,6,"div",19)(31,nc,7,7,"div",21),a()()()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),u(" ",t.formInfo.formTitle," "),o(2),u(" ",_(7,22,"TITLE.Be_Careful_When_Entering_Information")," "),o(6),c("label",x(_(13,24,"TITLE.REQUIRED_INFORMATION"))),o(2),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(16,26,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessAddField)),o(2),c("ngIf",t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.accessWatchField),o(),c("ngIf",t.fieldsInfo.email==null?null:t.fieldsInfo.email.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.accessWatchField),o(),c("ngIf",t.formInfo.submitButtonEnabled),o(),c("label",x(_(25,28,"TITLE.REST_OF_THE_INFORMATION"))),o(3),w(_(28,30,"TITLE.Rest_of_Information")),o(2),c("ngIf",t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.accessWatchField),o(),c("ngIf",t.fieldsInfo.deviceInformation==null?null:t.fieldsInfo.deviceInformation.accessWatchField),o(),c("ngIf",t.formInfo.submitButtonEnabled))},dependencies:[B,Te,te,ie,Se,ve,Ce,Ie,ue,_e,In,bn,Mn,ke,Tn,j,kn,wn,En,yn,Me,H,Ee,N],encapsulation:2});var Kn=Hi;var oc=["vform"];function rc(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",23),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ac(n,l){n&1&&v(0,"i",30)}function lc(n,l){n&1&&v(0,"i",31)}function sc(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function cc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",25),d(2),a(),r(3,"input",26,2),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.fullName,t)||(s.dataModel.fullName=t),h(t)}),a(),C(5,ac,1,0,"i",27)(6,lc,1,0,"i",28),r(7,"em"),d(8),a(),C(9,sc,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle)),E("ngModel",i.dataModel.fullName),c("disabled",!(i.fieldsInfo.fullName!=null&&i.fieldsInfo.fullName.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function dc(n,l){n&1&&v(0,"i",30)}function pc(n,l){n&1&&v(0,"i",31)}function mc(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function uc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",32),d(2),a(),r(3,"input",33,3),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),h(t)}),a(),C(5,dc,1,0,"i",27)(6,pc,1,0,"i",28),r(7,"em"),d(8),a(),C(9,mc,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function fc(n,l){n&1&&v(0,"i",30)}function gc(n,l){n&1&&v(0,"i",31)}function hc(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Sc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",34),d(2),a(),r(3,"input",35,4),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),h(t)}),a(),C(5,fc,1,0,"i",27)(6,gc,1,0,"i",28),r(7,"em"),d(8),a(),C(9,hc,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle)),E("ngModel",i.dataModel.phoneNo),c("disabled",!(i.fieldsInfo.phoneNo!=null&&i.fieldsInfo.phoneNo.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function _c(n,l){n&1&&v(0,"i",30)}function Tc(n,l){n&1&&v(0,"i",31)}function vc(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Cc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",36),d(2),a(),r(3,"input",37,5),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.email,t)||(s.dataModel.email=t),h(t)}),a(),C(5,_c,1,0,"i",27)(6,Tc,1,0,"i",28),r(7,"em"),d(8),a(),C(9,vc,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle)),E("ngModel",i.dataModel.email),c("disabled",!(i.fieldsInfo.email!=null&&i.fieldsInfo.email.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Ic(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",38),d(2),S(3,"translate"),a(),r(4,"textarea",39,6),S(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),h(t)}),d(7,"            "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),w(_(3,6,"TITLE.Description")),o(2),c("placeholder",x(_(6,8,"TITLE.Description"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessEditField)),o(5),u("",e.value.length," / 1000")}}function bc(n,l){if(n&1){let e=b();r(0,"div",40)(1,"label",41),d(2),a(),r(3,"input",42),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),h(t)}),a(),v(4,"mat-datepicker-toggle",43)(5,"mat-datepicker",44,7),a()}if(n&2){let e=D(6),i=m();o(2),w(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),o(),c("matDatepicker",e),E("ngModel",i.dataModel.expireDate),o(),c("for",e)}}function Mc(n,l){if(n&1){let e=b();r(0,"div",45)(1,"button",46),I("click",function(){g(e);let t=m();return h(t.onActionBackToParent())}),d(2),S(3,"translate"),a(),r(4,"button",47),d(5),S(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),u(" ",_(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),u(" ",_(6,5,"ACTION.NEXT")," ")}}function kc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",48),d(2),a(),r(3,"input",49,8),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.userIpAddress,t)||(s.dataModel.userIpAddress=t),h(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle)),E("ngModel",i.dataModel.userIpAddress),c("disabled",!(i.fieldsInfo.userIpAddress!=null&&i.fieldsInfo.userIpAddress.accessEditField)),o(3),u("",e.value.length," / 100")}}function wc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",50),d(2),a(),r(3,"input",51,9),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.deviceInformation,t)||(s.dataModel.deviceInformation=t),h(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.deviceInformation==null?null:i.fieldsInfo.deviceInformation.fieldTitle)),E("ngModel",i.dataModel.deviceInformation),c("disabled",!(i.fieldsInfo.deviceInformation!=null&&i.fieldsInfo.deviceInformation.accessEditField)),o(3),u("",e.value.length," / 100")}}function Ec(n,l){if(n&1&&(r(0,"div",45)(1,"button",52),d(2),S(3,"translate"),a(),r(4,"button",53),d(5),S(6,"translate"),a()()),n&2){m();let e=D(9);o(2),u(" ",_(3,3,"ACTION.BEFOR")," "),o(2),c("disabled",!e.form.valid),o(),u(" ",_(6,5,"ACTION.SAVE")," ")}}var qi=class qi extends Bt{constructor(e,i,t,s,T,p,Q,J,Ae,De){super(p,new Fe,s,De);this.data=e;this.activatedRoute=i;this.dialogRef=t;this.publicHelper=s;this.coreEnumService=T;this.ticketingTaskService=p;this.cmsToastrService=Q;this.router=J;this.cdr=Ae;this.translate=De;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new ee;this.dataModel=new Fe;this.dataModelResult=new _t;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new Rt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestId=+e.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(e){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.setAccessDataType(St.Editor),this.ticketingTaskService.ServiceGetOneById(e).subscribe({next:t=>{this.dataAccessModel=t.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.publicHelper.processService.processStop(i),this.dataModelResult=t,this.formInfo.submitButtonEnabled=!0,t.isSuccess?(this.dataModel=t.item,this.ticketingTaskService.ServiceTaskReaded(e).subscribe({next:s=>{},error:s=>{this.cmsToastrService.typeErrorGetOne(s)}})):this.cmsToastrService.typeErrorGetOne(t.errorMessage)},error:t=>{this.publicHelper.processService.processStop(i),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorGetOne(t)}})}DataEditContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTaskService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}}};qi.\u0275fac=function(i){return new(i||qi)(f(fe),f(he),f(re),f(F),f(U),f(Ne),f(O),f(oe),f(L),f(V))},qi.\u0275cmp=R({type:qi,selectors:[["app-ticketing-task-edit"]],viewQuery:function(i,t){if(i&1&&X(oc,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:32,vars:32,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=b();r(0,"div",10),v(1,"app-progress-spinner",11),r(2,"div",12)(3,"p",13),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",14,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),r(10,"mat-horizontal-stepper",15,1),I("selectionChange",function(p){g(s);let Q=D(11);return h(t.onStepClick(p,Q))}),r(12,"mat-step",16),S(13,"translate"),C(14,rc,1,5,"app-cms-enum-record-status-selector",17),r(15,"app-ticketing-departemen-selector",18),S(16,"translate"),I("optionChange",function(p){return g(s),h(t.onActionSelectSource(p))}),a(),C(17,cc,10,9,"div",19)(18,uc,10,9,"div",19)(19,Sc,10,9,"div",19)(20,Cc,10,9,"div",19)(21,Ic,10,10,"div",19)(22,bc,7,4,"div",20)(23,Mc,7,7,"div",21),a(),r(24,"mat-step",22),S(25,"translate"),r(26,"p"),d(27),S(28,"translate"),a(),C(29,kc,7,6,"div",19)(30,wc,7,6,"div",19)(31,Ec,7,7,"div",21),a()()()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),u(" ",t.formInfo.formTitle," "),o(2),u(" ",_(7,22,"TITLE.Be_Careful_When_Entering_Information")," "),o(6),c("label",x(_(13,24,"TITLE.REQUIRED_INFORMATION"))),o(2),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(16,26,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessEditField)),o(2),c("ngIf",t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.accessWatchField),o(),c("ngIf",t.fieldsInfo.email==null?null:t.fieldsInfo.email.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.accessWatchField),o(),c("ngIf",t.formInfo.submitButtonEnabled),o(),c("label",x(_(25,28,"TITLE.REST_OF_THE_INFORMATION"))),o(3),w(_(28,30,"TITLE.Rest_of_Information")),o(2),c("ngIf",t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.accessWatchField),o(),c("ngIf",t.fieldsInfo.deviceInformation==null?null:t.fieldsInfo.deviceInformation.accessWatchField),o(),c("ngIf",t.formInfo.submitButtonEnabled))},dependencies:[B,Te,te,ie,Se,ve,Ce,Ie,ue,_e,In,bn,Mn,ke,Tn,j,kn,wn,En,yn,Me,H,Ee,N],encapsulation:2});var Jn=qi;var yc=()=>[5,10,20,100],Ac=n=>({background:n});function Dc(n,l){if(n&1){let e=b();r(0,"a",40),I("click",function(){g(e);let t=m();return h(t.onActionBackToParent())}),v(1,"i",41),a()}}function xc(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",43),I("click",function(){g(e);let t=m();return h(t.onActionButtonNewRow())}),v(2,"i",44)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.ADD")," "))}function Rc(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",10),I("click",function(){g(e);let t=m();return h(t.onActionButtonAnswerList())}),v(2,"i",46)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.ANSWERS")," "))}function Lc(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",47),I("click",function(){g(e);let t=m();return h(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",48)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.EDIT")," "))}function Bc(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",49),I("click",function(){g(e);let t=m();return h(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",50)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.DELETE")," "))}function Vc(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",51),I("click",function(){g(e);let t=m();return h(t.onActionButtonAnswerList(t.tableRowSelected))}),v(2,"i",46)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.ANSWERS")," "))}function Fc(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",52),I("click",function(){g(e);let t=m();return h(t.onActionButtonViewRow(t.tableRowSelected))}),v(2,"i",53)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.VIEW")," "))}function Nc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Oc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.id," ")}}function Gc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Pc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),u(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function Hc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function qc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.linkMemberId," ")}}function Wc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function jc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.title," ")}}function Uc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Qc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),u(" ",_(2,1,e.createdDate)," ")}}function zc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Kc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),u(" ",_(2,1,e.updatedDate)," ")}}function Jc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.ticketStatus==null?null:e.fieldsInfo.ticketStatus.fieldTitle," ")}}function Yc(n,l){if(n&1&&(r(0,"mat-cell",55),d(1),S(2,"enums"),a()),n&2){let e=l.$implicit,i=m();c("ngStyle",qe(5,Ac,i.publicHelper.RowStyleTicketStatus(e.ticketStatus))),o(),u(" ",ai(2,2,e.ticketStatus,i.dataModelEnumTicketStatusResult.listItems)," ")}}function Xc(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),u(" ",_(2,1,"TITLE.OPTION")," "))}function Zc(n,l){if(n&1&&(r(0,"mat-cell",56)(1,"button",57)(2,"mat-icon"),d(3,"more_vert"),a()(),v(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function $c(n,l){n&1&&v(0,"mat-header-row")}function ed(n,l){if(n&1){let e=b();r(0,"mat-row",58),I("click",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Wi=class Wi extends st{constructor(e,i,t,s,T,p,Q,J,Ae,De,Et,ut,Ki){super(e,new Fe,ut,p,Ae);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=T;this.tokenHelper=p;this.cmsStoreService=Q;this.cdr=J;this.translate=Ae;this.ticketingEnumService=De;this.pageInfo=Et;this.publicHelper=ut;this.dialog=Ki;this.requestDepartemenId=0;this.requestLinkCmsUserId=0;this.requestTicketStatus=-1;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.dataModelEnumTicketStatusResult=new W;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Title","LinkMemberId","CreatedDate","UpdatedDate","TicketStatus"];this.tabledisplayedColumnsMobileSource=["Title","LinkMemberId","CreatedDate","UpdatedDate","TicketStatus"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:eo=>this.onSubmitOptionsSearch(eo)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.activatedRoute.snapshot.paramMap.get("TicketStatus")&&(this.requestTicketStatus=+Number(this.activatedRoute.snapshot.paramMap.get("TicketStatus"))),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.getEnumTicketStatus(),this.tokenInfo=e,this.DataGetAll()}))),this.getEnumTicketStatus()}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:e=>{this.dataModelEnumTicketStatusResult=e}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Fe);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.requestLinkCmsUserId>0&&(t.propertyName="LinkCmsUserId",t.value=this.requestLinkCmsUserId,i.filters.push(t)),this.requestTicketStatus>=0&&(t.propertyName="TicketStatus",t.value=this.requestTicketStatus,i.filters.push(t)),this.contentService.ServiceGetAll(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Kn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{linkDepartemenId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Gi,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Jn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonAnswerList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let T=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(T,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(T)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(T,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(this.translate.get("MESSAGE.All").subscribe(Q=>{i.set(Q,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),T=new z;T.propertyName="RecordStatus",T.value=je.Available,s.filters.push(T),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(this.translate.get("MESSAGE.Active").subscribe(Q=>{i.set(Q,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.requestTicketStatus=-1,this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};Wi.\u0275fac=function(i){return new(i||Wi)(f(Ne),f(he),f(O),f(Lt),f(oe),f(le),f(ae),f(L),f(V),f(Qt),f(lt),f(F),f(we))},Wi.\u0275cmp=R({type:Wi,selectors:[["app-ticketing-task-list"]],standalone:!1,features:[q],decls:63,vars:32,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkMemberId"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","TicketStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),h(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),h(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),h(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),h(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),h(t.onActionButtonPrintRow())}),M(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return g(s),h(t.onActionSelectorSelect(p))}),a(),k(),xe(3,6)(4,7),M(5,8),C(6,Dc,2,0,"a",9),r(7,"a",10),I("click",function(){return g(s),h(t.viewGuideNotice=!t.viewGuideNotice)}),v(8,"i",11),a(),r(9,"a",10),I("click",function(){return g(s),h(t.onActionButtonReload())}),v(10,"i",12),a(),k(),M(11,13),r(12,"a",14),I("click",function(){return g(s),h(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(13,"mat-slide-toggle",15),d(14),S(15,"translate"),a(),r(16,"a",14),I("click",function(){return g(s),h(t.onActionButtonStatist())}),v(17,"mat-slide-toggle",15),d(18),S(19,"translate"),a(),k(),M(20,16),C(21,xc,7,3,"div",17)(22,Rc,7,3,"div",17),k(),M(23,18),C(24,Lc,7,3,"div",17)(25,Bc,7,3,"div",17)(26,Vc,7,3,"div",17)(27,Fc,7,3,"div",17),k(),M(28,19),r(29,"app-cms-search-list",20),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),h(p)}),a(),r(30,"app-cms-statist-list",20),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),h(p)}),a(),k(),M(31,21),r(32,"mat-table",22,0),I("matSortChange",function(){g(s);let p=D(33);return h(t.onTableSortData(p))}),M(34,23),C(35,Nc,2,1,"mat-header-cell",24)(36,Oc,2,1,"mat-cell",25),k(),M(37,26),C(38,Gc,2,1,"mat-header-cell",24)(39,Pc,4,5,"mat-cell",25),k(),M(40,27),C(41,Hc,2,1,"mat-header-cell",24)(42,qc,2,1,"mat-cell",25),k(),M(43,28),C(44,Wc,2,1,"mat-header-cell",24)(45,jc,2,1,"mat-cell",25),k(),M(46,29),C(47,Uc,2,1,"mat-header-cell",24)(48,Qc,3,3,"mat-cell",25),k(),M(49,30),C(50,zc,2,1,"mat-header-cell",24)(51,Kc,3,3,"mat-cell",25),k(),M(52,31),C(53,Jc,2,1,"mat-header-cell",24)(54,Yc,3,7,"mat-cell",32),k(),M(55,33),C(56,Xc,3,3,"mat-header-cell",34)(57,Zc,6,1,"mat-cell",35),k(),C(58,$c,1,0,"mat-header-row",36)(59,ed,1,2,"mat-row",37),a(),k(),M(60,38),r(61,"mat-paginator",39,1),I("page",function(p){return g(s),h(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.task.list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),u("",_(15,27,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),u("",_(19,29,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(26),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(31,yc)))},dependencies:[B,We,Ge,Pe,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,mt,Ot,Be,N,ci,Ct,It],encapsulation:2});var ti=Wi;var td=["vform"];function id(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",12),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function nd(n,l){n&1&&v(0,"i",19)}function od(n,l){n&1&&v(0,"i",20)}function rd(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function ad(n,l){if(n&1){let e=b();r(0,"div",13)(1,"label",14),d(2),a(),r(3,"input",15,1),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),h(t)}),a(),C(5,nd,1,0,"i",16)(6,od,1,0,"i",17),r(7,"em"),d(8),a(),C(9,rd,5,4,"mat-error",18),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function ld(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.fieldTitle," "),o(2),w(_(4,2,"MESSAGE.required"))}}function sd(n,l){if(n&1){let e=b();r(0,"div",13)(1,"label",21),d(2),S(3,"translate"),a(),r(4,"textarea",22,2),S(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),h(t)}),d(7,"        "),a(),r(8,"em"),d(9),a(),C(10,ld,5,4,"mat-error",18),a()}if(n&2){let e=D(5),i=m();o(2),w(_(3,8,"TITLE.Description")),o(2),c("disabled",x(!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)))("placeholder",x(_(6,10,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),o(5),u("",e.value.length," / 2000"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function cd(n,l){if(n&1){let e=b();r(0,"div",23)(1,"button",24),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),v(2,"i",25),d(3),S(4,"translate"),a(),r(5,"button",26),v(6,"i",27),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),u(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),u(" ",_(8,5,"ACTION.SAVE")," ")}}var ji=class ji extends vt{constructor(e,i,t,s,T,p,Q,J){super(s,new ft,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingTemplateService=s;this.cmsToastrService=T;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestParentId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.formMatcher=new Kt;this.dataModelResult=new W;this.dataModel=new ft;this.formInfo=new ee;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=+e.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId)}ngOnInit(){this.translate.get("TITLE.Submit_New_Content").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};ji.\u0275fac=function(i){return new(i||ji)(f(fe),f(re),f(U),f(xt),f(O),f(F),f(L),f(V))},ji.\u0275cmp=R({type:ji,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,t){if(i&1&&X(td,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:16,vars:13,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",3),v(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),C(10,id,1,5,"app-cms-enum-record-status-selector",8),r(11,"app-ticketing-departemen-selector",9),S(12,"translate"),I("optionChange",function(p){return g(s),h(t.onActionSelectorSelect(p))}),a(),C(13,ad,10,8,"div",10)(14,sd,11,12,"div",10)(15,cd,9,7,"div",11),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),u(" ",t.formInfo.formTitle," "),o(2),u(" ",_(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,11,"TITLE.Department")),o(2),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.submitButtonEnabled))},dependencies:[B,Te,te,ie,Se,ve,Ce,Ie,ue,_e,ke,j,Me,H,Ee,N],encapsulation:2});var Yn=ji;var dd=["vform"];function pd(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",12),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function md(n,l){n&1&&v(0,"i",19)}function ud(n,l){n&1&&v(0,"i",20)}function fd(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function gd(n,l){if(n&1){let e=b();r(0,"div",13)(1,"label",14),d(2),a(),r(3,"input",15,1),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),h(t)}),a(),C(5,md,1,0,"i",16)(6,ud,1,0,"i",17),r(7,"em"),d(8),a(),C(9,fd,5,4,"mat-error",18),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),u("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function hd(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),u(" ",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.fieldTitle," "),o(2),w(_(4,2,"MESSAGE.required"))}}function Sd(n,l){if(n&1){let e=b();r(0,"div",13)(1,"label",21),d(2),S(3,"translate"),a(),r(4,"textarea",22,2),S(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),h(t)}),d(7,"        "),a(),r(8,"em"),d(9),a(),C(10,hd,5,4,"mat-error",18),a()}if(n&2){let e=D(5),i=m();o(2),w(_(3,8,"TITLE.Description")),o(2),c("disabled",x(!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)))("placeholder",x(_(6,10,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),o(5),u("",e.value.length," / 2000"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function _d(n,l){if(n&1){let e=b();r(0,"div",23)(1,"button",24),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),v(2,"i",25),d(3),S(4,"translate"),a(),r(5,"button",26),v(6,"i",27),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),u(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),u(" ",_(8,5,"ACTION.SAVE")," ")}}var Ui=class Ui extends Bt{constructor(e,i,t,s,T,p,Q,J){super(s,new ft,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingTemplateService=s;this.cmsToastrService=T;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new Kt;this.dataModelResult=new _t;this.dataModel=new ft;this.dataFileModel=new Map;this.formInfo=new ee;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.setAccessLoad(),this.ticketingTemplateService.setAccessDataType(St.Editor),this.ticketingTemplateService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ui.\u0275fac=function(i){return new(i||Ui)(f(fe),f(re),f(U),f(xt),f(O),f(F),f(L),f(V))},Ui.\u0275cmp=R({type:Ui,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,t){if(i&1&&X(dd,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:16,vars:13,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",3),v(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),C(10,pd,1,5,"app-cms-enum-record-status-selector",8),r(11,"app-ticketing-departemen-selector",9),S(12,"translate"),I("optionChange",function(p){return g(s),h(t.onActionSelectorSelect(p))}),a(),C(13,gd,10,8,"div",10)(14,Sd,11,12,"div",10)(15,_d,9,7,"div",11),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),u(" ",t.formInfo.formTitle," "),o(2),u(" ",_(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,11,"TITLE.Department")),o(2),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.submitButtonEnabled))},dependencies:[B,Te,te,ie,Se,ve,Ce,Ie,ue,_e,ke,j,Me,H,Ee,N],encapsulation:2});var Xn=Ui;var Td=()=>[5,10,20,100],vd=n=>({display:n});function Cd(n,l){if(n&1){let e=b();r(0,"a",37),I("click",function(){g(e);let t=m();return h(t.onActionBackToParent())}),v(1,"i",38),a()}}function Id(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",40),I("click",function(){g(e);let t=m();return h(t.onActionButtonNewRow())}),v(2,"i",41)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.ADD")," "))}function bd(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",43),I("click",function(){g(e);let t=m();return h(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",44)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.EDIT")," "))}function Md(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",45),I("click",function(){g(e);let t=m();return h(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",46)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),u(" ",_(6,1,"ACTION.DELETE")," "))}function kd(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function wd(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.id," ")}}function Ed(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function yd(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),u(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function Ad(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Dd(n,l){if(n&1&&v(0,"select",50),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,vd,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function xd(n,l){if(n&1&&(r(0,"mat-cell",48),S(1,"statusCellClass"),v(2,"i",48),S(3,"statusIconClass"),C(4,Dd,1,5,"select",49),a()),n&2){let e=l.$implicit,i=m();c("ngClass",_(1,3,e.recordStatus)),o(2),c("ngClass",_(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Rd(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),u(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function Ld(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),u(" ",e.title," ")}}function Bd(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),u(" ",_(2,1,"TITLE.OPTION")," "))}function Vd(n,l){if(n&1&&(r(0,"mat-cell",51)(1,"button",52)(2,"mat-icon"),d(3,"more_vert"),a()(),v(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Fd(n,l){n&1&&v(0,"mat-header-row")}function Nd(n,l){if(n&1){let e=b();r(0,"mat-row",53),I("click",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=g(e).$implicit,T=m();return h(T.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Qi=class Qi extends st{constructor(e,i,t,s,T,p,Q,J,Ae,De,Et,ut){super(e,new ft,Et,p,J);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=T;this.tokenHelper=p;this.cdr=Q;this.translate=J;this.cmsStoreService=Ae;this.pageInfo=De;this.publicHelper=Et;this.dialog=ut;this.requestDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Ki=>this.onSubmitOptionsSearch(Ki)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new ft);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Yn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{parentId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Xn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.No_row_selected_for_editing").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let T=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(T,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(T)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(T)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),T=new z;T.propertyName="RecordStatus",T.value=je.Available,s.filters.push(T),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};Qi.\u0275fac=function(i){return new(i||Qi)(f(xt),f(he),f(O),f(Lt),f(oe),f(le),f(L),f(V),f(ae),f(lt),f(F),f(we))},Qi.\u0275cmp=R({type:Qi,selectors:[["app-application-app-list"]],standalone:!1,features:[q],decls:51,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),h(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),h(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),h(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),h(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),h(t.onActionButtonPrintRow())}),M(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return g(s),h(t.onActionSelectorSelect(p))}),a(),k(),xe(3,6)(4,7),M(5,8),C(6,Cd,2,0,"a",9),r(7,"a",10),I("click",function(){return g(s),h(t.viewGuideNotice=!t.viewGuideNotice)}),v(8,"i",11),a(),r(9,"a",10),I("click",function(){return g(s),h(t.onActionButtonReload())}),v(10,"i",12),a(),k(),M(11,13),r(12,"a",14),I("click",function(){return g(s),h(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(13,"mat-slide-toggle",15),d(14),S(15,"translate"),a(),r(16,"a",14),I("click",function(){return g(s),h(t.onActionButtonStatist())}),v(17,"mat-slide-toggle",15),d(18),S(19,"translate"),a(),k(),M(20,16),C(21,Id,7,3,"div",17),k(),M(22,18),C(23,bd,7,3,"div",17)(24,Md,7,3,"div",17),k(),M(25,19),r(26,"app-cms-search-list",20),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),h(p)}),a(),r(27,"app-cms-statist-list",20),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),h(p)}),a(),k(),M(28,21),r(29,"mat-table",22,0),I("matSortChange",function(){g(s);let p=D(30);return h(t.onTableSortData(p))}),M(31,23),C(32,kd,2,1,"mat-header-cell",24)(33,wd,2,1,"mat-cell",25),k(),M(34,26),C(35,Ed,2,1,"mat-header-cell",24)(36,yd,4,5,"mat-cell",25),k(),M(37,27),C(38,Ad,2,1,"mat-header-cell",24)(39,xd,5,7,"mat-cell",28),k(),M(40,29),C(41,Rd,2,1,"mat-header-cell",24)(42,Ld,2,1,"mat-cell",25),k(),M(43,30),C(44,Bd,3,3,"mat-header-cell",31)(45,Vd,6,1,"mat-cell",32),k(),C(46,Fd,1,0,"mat-header-row",33)(47,Nd,1,2,"mat-row",34),a(),k(),M(48,35),r(49,"mat-paginator",36,1),I("page",function(p){return g(s),h(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),u("",_(15,24,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),u("",_(19,26,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(17),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(28,Td)))},dependencies:[yt,B,We,Ge,Pe,j,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,mt,Vt,Ot,Be,N,Ct,Ft,Nt],encapsulation:2});var tn=Qi;var zi=class zi{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};zi.\u0275fac=function(e){return new(e||zi)},zi.\u0275cmp=R({type:zi,selectors:[["app-ticketing"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&v(0,"router-outlet")},dependencies:[go],encapsulation:2});var Zn=zi;var Od=[{path:"",component:Zn,data:{title:"ROUTE.TICKETING"},children:[{path:"config",loadChildren:()=>import("./chunk-HGJHGPKV.js").then(n=>n.TicketingConfigModule),data:{title:"ROUTE.TICKETING"}},{path:"departemen",component:On,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/add/",component:jt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/edit/:Id",component:jt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemenlog/DepartemenId/:DepartemenId",component:Zi,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"departemenlog/OperatorId/:OperatorId",component:Zi,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"faq",component:Un,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/:DepartemenId",component:$i,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/list",component:$i,data:{title:"ROUTE.TICKETING.LIST"}},{path:"template",component:tn,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"template/:DepartemenId",component:tn,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"contactus",component:zn,data:{title:"ROUTE.TICKETING.CONTACTUS"}},{path:"task",component:ti,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/listTicketStatus/:TicketStatus",component:ti,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list",component:en,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list/LinkCmsUserId/:LinkCmsUserId",component:en,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/:DepartemenId",component:ti,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/LinkCmsUserId/:LinkCmsUserId",component:ti,data:{title:"ROUTE.TICKETING.TASK"}},{path:"answer",component:Ji,data:{title:"ROUTE.TICKETING.ANSWER"}},{path:"answer/LinkTaskId/:LinkTaskId",component:Ji,data:{title:"ROUTE.TICKETING.ANSWER"}}]}],ii=class ii{};ii.\u0275fac=function(e){return new(e||ii)},ii.\u0275mod=pn({type:ii}),ii.\u0275inj=cn({imports:[io.forChild(Od),io]});var $n=ii;var ni=class ni{};ni.\u0275fac=function(e){return new(e||ni)},ni.\u0275mod=pn({type:ni}),ni.\u0275inj=cn({providers:[so,U,mo,po,Qt,Ve,gn,uo,Ne,Dt,At,xt,Lt],imports:[ao,$n,So,_o.withConfig({warnOnNgModelWithFormControl:"never"}),Ao,xo,yo]});var Vo=ni;export{Vo as TicketingModule};
