import{a as Kt}from"./chunk-MKJ6KWR2.js";import{a as Ft}from"./chunk-72P5MATY.js";import{a as qt}from"./chunk-G6QZYHYX.js";import{a as Wt}from"./chunk-YF3KFYIA.js";import{a as jt}from"./chunk-6HUEOJT7.js";import{a as Ot}from"./chunk-ZQAAWZP4.js";import{a as Ht}from"./chunk-DBKUDHXT.js";import{a as Gt}from"./chunk-I3FVEU4L.js";import{c as Lt,d as Bt,e as Nt,g as Pt}from"./chunk-NOBECYHF.js";import{a as Vt}from"./chunk-J2SD7KUH.js";import"./chunk-3QH2L5X3.js";import{a as Re}from"./chunk-ISDYK6KX.js";import"./chunk-ZF5WNLZZ.js";import{a as At}from"./chunk-T7PZ33GU.js";import{a as kt}from"./chunk-NVDZ44YD.js";import{a as Ve}from"./chunk-PGWDJ7WK.js";import{b as Rt}from"./chunk-JBCWAEBN.js";import{a as Le}from"./chunk-UL45O55K.js";import"./chunk-TU235L4L.js";import"./chunk-YO6RAOWU.js";import"./chunk-DQAY2ZOW.js";import{a as Be}from"./chunk-EZQMX3MQ.js";import{a as ke}from"./chunk-JIHQNV6U.js";import{a as Ae}from"./chunk-WNSH5NW4.js";import{e as xt,f as X}from"./chunk-ALWDDZYF.js";import{$c as Tt,D as ve,E as _e,G as he,Hb as Ct,Ia as be,Ib as gt,Ja as De,Jb as vt,K as Me,Ka as we,Kb as _t,L as Ie,Lb as ht,Mb as Mt,Nb as It,O as rt,Ob as yt,P as at,Pb as Et,Qb as bt,Ra as Te,Sa as xe,Ta as st,Tc as Dt,Wc as wt,X as ye,Yc as J,_ as Ee,cc as U,da as lt,dc as z,eb as ct,gb as Q,lb as dt,mb as mt,n as me,pb as pt,q as pe,r as ue,t as fe,v as Se,vb as ut,w as Ce,x as ge,xb as ft,yb as St}from"./chunk-5WYASXHL.js";import{Ab as S,Bd as je,Cd as et,Df as L,Eb as le,Fa as o,Fb as se,Fd as tt,Fe as B,Gb as ce,Gd as V,Kb as R,Kc as ze,Kd as qe,Kr as ie,Ld as it,Mb as Fe,Oa as g,Pb as c,Qb as x,Qc as Je,Rb as m,Sa as O,Sc as Xe,Ta as ae,Vb as M,Wa as F,Wb as I,Xb as y,Xd as te,Y as re,Ya as k,Yb as de,Zc as Ye,_d as nt,ac as Ue,bc as We,da as u,ea as f,fb as b,fc as v,gb as D,gc as _,hc as He,ib as W,jb as H,kb as j,lb as C,mb as a,nb as r,ob as h,pe as K,sb as w,tb as T,td as Ze,te as ot,ub as Qe,vb as A,vd as $e,xc as q,yb as E}from"./chunk-QKIEHXIF.js";import{i as Ke}from"./chunk-SEDBTTTN.js";var di=["vform"];function mi(n,d){if(n&1){let e=A();a(0,"app-cms-enum-record-status-selector",31),y("modelChange",function(t){u(e);let s=S();return I(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),r()}if(n&2){let e=S();M("model",e.dataModel.recordStatus),C("optionDisabled",!((e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessAddField)??!1))("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function pi(n,d){n&1&&(a(0,"mat-error"),c(1," SecurityKey is "),a(2,"strong"),c(3),v(4,"translate"),r()()),n&2&&(o(3),x(_(4,1,"MESSAGE.required")))}function ui(n,d){if(n&1&&(a(0,"option",27),c(1),r()),n&2){let e=d.$implicit;C("value",e.value),o(),m(" ",e.description," ")}}function fi(n,d){if(n&1&&(a(0,"option",27),c(1),r()),n&2){let e=d.$implicit;C("value",e.value),o(),m(" ",e.description," ")}}function Si(n,d){n&1&&(a(0,"mat-error"),c(1," Description is "),a(2,"strong"),c(3),v(4,"translate"),r()()),n&2&&(o(3),x(_(4,1,"MESSAGE.required")))}function Ci(n,d){if(n&1){let e=A();a(0,"div",16)(1,"label",32),c(2),r(),a(3,"textarea",33,7),y("ngModelChange",function(t){u(e);let s=S();return I(s.dataModel.description,t)||(s.dataModel.description=t),f(t)}),c(5,"          "),r(),a(6,"em"),c(7),r(),b(8,Si,5,3,"mat-error"),r()}if(n&2){let e=R(4),i=S();o(2),x(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle),o(),C("placeholder",de(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle)),M("ngModel",i.dataModel.description),o(4),m("",e.value.length," / 500"),o(),D(e.errors!=null&&e.errors.required?8:-1)}}function gi(n,d){if(n&1){let e=A();a(0,"div",29)(1,"label",34),c(2),r(),a(3,"input",35),y("ngModelChange",function(t){u(e);let s=S();return I(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),f(t)}),r(),h(4,"mat-datepicker-toggle",36)(5,"mat-datepicker",37,8),r()}if(n&2){let e=R(6),i=S();o(2),x(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),o(),C("matDatepicker",e),M("ngModel",i.dataModel.expireDate),o(),C("for",e),o(),C("calendarHeaderComponent",i.datapickerHeader)}}function vi(n,d){if(n&1){let e=A();a(0,"div",30)(1,"button",38),E("click",function(){u(e);let t=S();return f(t.onFormCancel())}),h(2,"i",39),c(3),v(4,"translate"),r(),a(5,"button",40),h(6,"i",41),c(7),v(8,"translate"),r()()}if(n&2){S();let e=R(10);o(3),m(" ",_(4,3,"ACTION.CANCEL")," "),o(2),C("disabled",!e.form.valid),o(2),m(" ",_(8,5,"ACTION.SAVE")," ")}}var Y=class Y extends At{constructor(e,i,t,s,p,l,G,oe){super(s,new L,l,oe);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreDeviceService=s;this.cmsToastrService=p;this.publicHelper=l;this.cdr=G;this.translate=oe;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new V;this.dataModelEnumDeviceTypeResult=new V;this.dataModelEnumOperatingSystemTypeResult=new V;this.dataModel=new L;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess(),this.getServiceDeviceTypeEnum(),this.getServiceOperatingSystemTypeEnum()}getServiceDeviceTypeEnum(){this.coreEnumService.ServiceDeviceTypeEnum().subscribe({next:e=>{this.dataModelEnumDeviceTypeResult=e}})}getServiceOperatingSystemTypeEnum(){this.coreEnumService.ServiceOperatingSystemTypeEnum().subscribe({next:e=>{this.dataModelEnumOperatingSystemTypeResult=e}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreDeviceService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionSelectSite(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_site","MESSAGE.Information_site_is_not_clear"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_site"],i["MESSAGE.Information_site_is_not_clear"])});return}this.dataModel.linkSiteId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Y.\u0275fac=function(i){return new(i||Y)(g(xe),g(Te),g(K),g(B),g(J),g(X),g(q),g(U))},Y.\u0275cmp=O({type:Y,selectors:[["app-core-sitecategory-add"]],viewQuery:function(i,t){if(i&1&&le(di,5),i&2){let s;se(s=ce())&&(t.formGroup=s.first)}},standalone:!1,features:[F],decls:54,vars:29,consts:[["vform","ngForm"],["SecurityKey",""],["PackageName",""],["DeviceIPsAllow",""],["LinkApplicationId",""],["osType","ngModel"],["DeviceType","ngModel"],["Description",""],["ExpireDate",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.securityKey",1,"color-highlight"],["matInput","","type","text","name","dataModel.securityKey","placeholder","NTK.CMS.APP.1","minlength","3","maxlength","100","id","dataModel.securityKey",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.packageName",1,"color-highlight"],["matInput","","type","text","name","dataModel.packageName","placeholder","8.8.8.8","minlength","0","maxlength","500","id","dataModel.packageName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.deviceIPsAllow",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceIPsAllow","placeholder","8.8.8.8","minlength","0","maxlength","500","id","dataModel.deviceIPsAllow",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.linkApplicationId",1,"color-highlight"],["matInput","","type","number","name","dataModel.linkApplicationId","placeholder","number ","id","dataModel.linkApplicationId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["id","dataModel.osType","name","dataModel.osType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value"],["id","dataModel.deviceType","name","dataModel.deviceType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi","",3,"calendarHeaderComponent"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=A();a(0,"div",9),h(1,"app-progress-spinner",10),a(2,"div",11)(3,"p",12),c(4),r(),a(5,"p"),c(6),v(7,"translate"),r(),h(8,"app-cms-form-result-message",13),a(9,"form",14,0),E("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),b(11,mi,1,5,"app-cms-enum-record-status-selector",15),a(12,"div",16)(13,"label",17),c(14),r(),a(15,"input",18,1),y("ngModelChange",function(l){return u(s),I(t.dataModel.securityKey,l)||(t.dataModel.securityKey=l),f(l)}),r(),a(17,"em"),c(18),r(),b(19,pi,5,3,"mat-error"),r(),a(20,"div",16)(21,"label",19),c(22),r(),a(23,"input",20,2),y("ngModelChange",function(l){return u(s),I(t.dataModel.packageName,l)||(t.dataModel.packageName=l),f(l)}),r(),a(25,"em"),c(26),r()(),a(27,"div",16)(28,"label",21),c(29),r(),a(30,"input",22,3),y("ngModelChange",function(l){return u(s),I(t.dataModel.deviceIPsAllow,l)||(t.dataModel.deviceIPsAllow=l),f(l)}),r(),a(32,"em"),c(33),r()(),a(34,"app-cms-site-selector",23),v(35,"translate"),E("optionChange",function(l){return u(s),f(t.onActionSelectSite(l))}),r(),a(36,"div",16)(37,"label",24),c(38),r(),a(39,"input",25,4),y("ngModelChange",function(l){return u(s),I(t.dataModel.linkApplicationId,l)||(t.dataModel.linkApplicationId=l),f(l)}),r()(),a(41,"div",16)(42,"select",26,5),y("ngModelChange",function(l){return u(s),I(t.dataModel.osType,l)||(t.dataModel.osType=l),f(l)}),H(44,ui,2,2,"option",27,W),r()(),a(46,"div",16)(47,"select",28,6),y("ngModelChange",function(l){return u(s),I(t.dataModel.deviceType,l)||(t.dataModel.deviceType=l),f(l)}),H(49,fi,2,2,"option",27,W),r()(),b(51,Ci,9,6,"div",16),b(52,gi,7,5,"div",29),b(53,vi,9,7,"div",30),r()()()}if(i&2){let s=R(16),p=R(24),l=R(31);o(),C("optionsInfoAreaId",t.constructorInfoAreaId),o(3),m(" ",t.formInfo.formTitle," "),o(2),m(" ",_(7,25,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),C("formInfo",t.formInfo),o(3),D(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),o(3),x(t.fieldsInfo.securityKey==null?null:t.fieldsInfo.securityKey.fieldTitle),o(),M("ngModel",t.dataModel.securityKey),o(3),m("",s.value.length," / 100"),o(),D(s.errors!=null&&s.errors.required?19:-1),o(3),x(t.fieldsInfo.packageName==null?null:t.fieldsInfo.packageName.fieldTitle),o(),M("ngModel",t.dataModel.packageName),o(3),m("",p.value.length," / 500"),o(3),x(t.fieldsInfo.deviceIPsAllow==null?null:t.fieldsInfo.deviceIPsAllow.fieldTitle),o(),M("ngModel",t.dataModel.deviceIPsAllow),o(3),m("",l.value.length," / 500"),o(),C("optionDisabled",!((t.fieldsInfo.linkSiteId==null?null:t.fieldsInfo.linkSiteId.accessAddField)??!1))("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",_(35,27,"TITLE.SITE")),o(4),x(t.fieldsInfo.linkApplicationId==null?null:t.fieldsInfo.linkApplicationId.fieldTitle),o(),M("ngModel",t.dataModel.linkApplicationId),o(3),M("ngModel",t.dataModel.osType),o(2),j(t.dataModelEnumOperatingSystemTypeResult.listItems),o(3),M("ngModel",t.dataModel.deviceType),o(2),j(t.dataModelEnumDeviceTypeResult.listItems),o(2),D(t.fieldsInfo.description!=null&&t.fieldsInfo.description.accessWatchField?51:-1),o(),D(t.fieldsInfo.expireDate!=null&&t.fieldsInfo.expireDate.accessWatchField?52:-1),o(),D(t.formInfo.submitButtonEnabled?53:-1)}},dependencies:[Ce,_e,he,me,ge,ve,pe,ue,Me,Ie,Se,fe,be,De,we,ye,Ee,Q,Re,Ve,Ae,ke,Le,z],encapsulation:2});var Ne=Y;var _i=["vform"];function hi(n,d){if(n&1){let e=A();a(0,"app-cms-enum-record-status-selector",31),y("modelChange",function(t){u(e);let s=S();return I(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),r()}if(n&2){let e=S();M("model",e.dataModel.recordStatus),C("optionDisabled",!((e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.accessEditField)??!1))("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Mi(n,d){n&1&&(a(0,"mat-error"),c(1," SecurityKey is "),a(2,"strong"),c(3),v(4,"translate"),r()()),n&2&&(o(3),x(_(4,1,"MESSAGE.required")))}function Ii(n,d){if(n&1&&(a(0,"option",27),c(1),r()),n&2){let e=d.$implicit;C("value",e.value),o(),m(" ",e.description," ")}}function yi(n,d){if(n&1&&(a(0,"option",27),c(1),r()),n&2){let e=d.$implicit;C("value",e.value),o(),m(" ",e.description," ")}}function Ei(n,d){n&1&&(a(0,"mat-error"),c(1," Description is "),a(2,"strong"),c(3),v(4,"translate"),r()()),n&2&&(o(3),x(_(4,1,"MESSAGE.required")))}function bi(n,d){if(n&1){let e=A();a(0,"div",16)(1,"label",32),c(2),r(),a(3,"textarea",33,7),y("ngModelChange",function(t){u(e);let s=S();return I(s.dataModel.description,t)||(s.dataModel.description=t),f(t)}),c(5,"          "),r(),a(6,"em"),c(7),r(),b(8,Ei,5,3,"mat-error"),r()}if(n&2){let e=R(4),i=S();o(2),x(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle),o(),C("placeholder",de(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle)),M("ngModel",i.dataModel.description),o(4),m("",e.value.length," / 500"),o(),D(e.errors!=null&&e.errors.required?8:-1)}}function Di(n,d){if(n&1){let e=A();a(0,"div",29)(1,"label",34),c(2),r(),a(3,"input",35),y("ngModelChange",function(t){u(e);let s=S();return I(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),f(t)}),r(),h(4,"mat-datepicker-toggle",36)(5,"mat-datepicker",37,8),r()}if(n&2){let e=R(6),i=S();o(2),x(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),o(),C("matDatepicker",e),M("ngModel",i.dataModel.expireDate),o(),C("for",e),o(),C("calendarHeaderComponent",i.datapickerHeader)}}function wi(n,d){if(n&1){let e=A();a(0,"div",30)(1,"button",38),E("click",function(){u(e);let t=S();return f(t.onFormCancel())}),h(2,"i",39),c(3),v(4,"translate"),r(),a(5,"button",40),h(6,"i",41),c(7),v(8,"translate"),r()()}if(n&2){S();let e=R(10);o(3),m(" ",_(4,3,"ACTION.CANCEL")," "),o(2),C("disabled",!e.form.valid),o(2),m(" ",_(8,5,"ACTION.SAVE")," ")}}var Z=class Z extends Vt{constructor(e,i,t,s,p,l,G,oe){super(s,new L,l,oe);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreDeviceService=s;this.cmsToastrService=p;this.publicHelper=l;this.cdr=G;this.translate=oe;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new tt;this.dataModel=new L;this.dataModelEnumDeviceTypeResult=new V;this.dataModelEnumOperatingSystemTypeResult=new V;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.getServiceDeviceTypeEnum(),this.getServiceOperatingSystemTypeEnum()}getServiceDeviceTypeEnum(){this.coreEnumService.ServiceDeviceTypeEnum().subscribe({next:e=>{this.dataModelEnumDeviceTypeResult=e}})}getServiceOperatingSystemTypeEnum(){this.coreEnumService.ServiceOperatingSystemTypeEnum().subscribe({next:e=>{this.dataModelEnumOperatingSystemTypeResult=e}})}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreDeviceService.setAccessLoad(),this.coreDeviceService.setAccessDataType(nt.Editor),this.coreDeviceService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreDeviceService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionSelectSite(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_site","MESSAGE.Information_site_is_not_clear"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_site"],i["MESSAGE.Information_site_is_not_clear"])});return}this.dataModel.linkSiteId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Z.\u0275fac=function(i){return new(i||Z)(g(xe),g(Te),g(K),g(B),g(J),g(X),g(q),g(U))},Z.\u0275cmp=O({type:Z,selectors:[["app-core-sitecategory-edit"]],viewQuery:function(i,t){if(i&1&&le(_i,5),i&2){let s;se(s=ce())&&(t.formGroup=s.first)}},standalone:!1,features:[F],decls:54,vars:29,consts:[["vform","ngForm"],["SecurityKey",""],["PackageName",""],["DeviceIPsAllow",""],["LinkApplicationId",""],["osType","ngModel"],["DeviceType","ngModel"],["Description",""],["ExpireDate",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.securityKey",1,"color-highlight"],["matInput","","type","text","name","dataModel.securityKey","placeholder","NTK.CMS.APP.1","minlength","3","maxlength","100","id","dataModel.securityKey",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.packageName",1,"color-highlight"],["matInput","","type","text","name","dataModel.packageName","placeholder","8.8.8.8","minlength","0","maxlength","500","id","dataModel.packageName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.deviceIPsAllow",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceIPsAllow","placeholder","8.8.8.8","minlength","0","maxlength","500","id","dataModel.deviceIPsAllow",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.linkApplicationId",1,"color-highlight"],["matInput","","type","number","name","dataModel.linkApplicationId","placeholder","number ","id","dataModel.linkApplicationId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["id","dataModel.osType","name","dataModel.osType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value"],["id","dataModel.deviceType","name","dataModel.deviceType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi","",3,"calendarHeaderComponent"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=A();a(0,"div",9),h(1,"app-progress-spinner",10),a(2,"div",11)(3,"p",12),c(4),r(),a(5,"p"),c(6),v(7,"translate"),r(),h(8,"app-cms-form-result-message",13),a(9,"form",14,0),E("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),b(11,hi,1,5,"app-cms-enum-record-status-selector",15),a(12,"div",16)(13,"label",17),c(14),r(),a(15,"input",18,1),y("ngModelChange",function(l){return u(s),I(t.dataModel.securityKey,l)||(t.dataModel.securityKey=l),f(l)}),r(),a(17,"em"),c(18),r(),b(19,Mi,5,3,"mat-error"),r(),a(20,"div",16)(21,"label",19),c(22),r(),a(23,"input",20,2),y("ngModelChange",function(l){return u(s),I(t.dataModel.packageName,l)||(t.dataModel.packageName=l),f(l)}),r(),a(25,"em"),c(26),r()(),a(27,"div",16)(28,"label",21),c(29),r(),a(30,"input",22,3),y("ngModelChange",function(l){return u(s),I(t.dataModel.deviceIPsAllow,l)||(t.dataModel.deviceIPsAllow=l),f(l)}),r(),a(32,"em"),c(33),r()(),a(34,"app-cms-site-selector",23),v(35,"translate"),E("optionChange",function(l){return u(s),f(t.onActionSelectSite(l))}),r(),a(36,"div",16)(37,"label",24),c(38),r(),a(39,"input",25,4),y("ngModelChange",function(l){return u(s),I(t.dataModel.linkApplicationId,l)||(t.dataModel.linkApplicationId=l),f(l)}),r()(),a(41,"div",16)(42,"select",26,5),y("ngModelChange",function(l){return u(s),I(t.dataModel.osType,l)||(t.dataModel.osType=l),f(l)}),H(44,Ii,2,2,"option",27,W),r()(),a(46,"div",16)(47,"select",28,6),y("ngModelChange",function(l){return u(s),I(t.dataModel.deviceType,l)||(t.dataModel.deviceType=l),f(l)}),H(49,yi,2,2,"option",27,W),r()(),b(51,bi,9,6,"div",16),b(52,Di,7,5,"div",29),b(53,wi,9,7,"div",30),r()()()}if(i&2){let s=R(16),p=R(24),l=R(31);o(),C("optionsInfoAreaId",t.constructorInfoAreaId),o(3),m(" ",t.formInfo.formTitle," "),o(2),m(" ",_(7,25,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),C("formInfo",t.formInfo),o(3),D(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),o(3),x(t.fieldsInfo.securityKey==null?null:t.fieldsInfo.securityKey.fieldTitle),o(),M("ngModel",t.dataModel.securityKey),o(3),m("",s.value.length," / 100"),o(),D(s.errors!=null&&s.errors.required?19:-1),o(3),x(t.fieldsInfo.packageName==null?null:t.fieldsInfo.packageName.fieldTitle),o(),M("ngModel",t.dataModel.packageName),o(3),m("",p.value.length," / 500"),o(3),x(t.fieldsInfo.deviceIPsAllow==null?null:t.fieldsInfo.deviceIPsAllow.fieldTitle),o(),M("ngModel",t.dataModel.deviceIPsAllow),o(3),m("",l.value.length," / 500"),o(),C("optionDisabled",!((t.fieldsInfo.linkSiteId==null?null:t.fieldsInfo.linkSiteId.accessEditField)??!1))("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",_(35,27,"TITLE.SITE")),o(4),x(t.fieldsInfo.linkApplicationId==null?null:t.fieldsInfo.linkApplicationId.fieldTitle),o(),M("ngModel",t.dataModel.linkApplicationId),o(3),M("ngModel",t.dataModel.osType),o(2),j(t.dataModelEnumOperatingSystemTypeResult.listItems),o(3),M("ngModel",t.dataModel.deviceType),o(2),j(t.dataModelEnumDeviceTypeResult.listItems),o(2),D(t.fieldsInfo.description!=null&&t.fieldsInfo.description.accessWatchField?51:-1),o(),D(t.fieldsInfo.expireDate!=null&&t.fieldsInfo.expireDate.accessWatchField?52:-1),o(),D(t.formInfo.submitButtonEnabled?53:-1)}},dependencies:[Ce,_e,he,me,ge,ve,pe,ue,Me,Ie,Se,fe,be,De,we,ye,Ee,Q,Re,Ve,Ae,ke,Le,z],encapsulation:2});var Ge=Z;var Ti=()=>[5,10,20,100],xi=n=>({display:n}),Ai=n=>({background:n});function Ri(n,d){if(n&1){let e=A();a(0,"a",44),E("click",function(){u(e);let t=S();return f(t.onActionBackToParent())}),h(1,"i",45),r()}}function ki(n,d){if(n&1){let e=A();a(0,"div",17)(1,"a",46),E("click",function(){u(e);let t=S();return f(t.onActionButtonNewRow())}),h(2,"i",47)(3,"br"),r(),a(4,"p",48),c(5),v(6,"translate"),r()()}n&2&&(o(5),m(" ",_(6,1,"ACTION.ADD")," "))}function Vi(n,d){if(n&1){let e=A();a(0,"div",17)(1,"a",49),E("click",function(){u(e);let t=S();return f(t.onActionButtonEditRow(t.tableRowSelected))}),h(2,"i",50)(3,"br"),r(),a(4,"p",48),c(5),v(6,"translate"),r()()}n&2&&(o(5),m(" ",_(6,1,"ACTION.EDIT")," "))}function Li(n,d){if(n&1){let e=A();a(0,"div",17)(1,"a",51),E("click",function(){u(e);let t=S();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),h(2,"i",52)(3,"br"),r(),a(4,"p",48),c(5),v(6,"translate"),r()()}n&2&&(o(5),m(" ",_(6,1,"ACTION.DELETE")," "))}function Bi(n,d){if(n&1&&(a(0,"mat-header-cell",53),c(1),r()),n&2){let e=S();o(),m(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Ni(n,d){if(n&1&&(a(0,"mat-cell"),c(1),r()),n&2){let e=d.$implicit;o(),m(" ",e.id," ")}}function Pi(n,d){if(n&1&&(a(0,"mat-header-cell",53),c(1),r()),n&2){let e=S();o(),m(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Gi(n,d){if(n&1&&(a(0,"mat-cell"),c(1),v(2,"cmssiteinfo"),v(3,"async"),r()),n&2){let e=d.$implicit;o(),m(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function Oi(n,d){if(n&1&&(a(0,"mat-header-cell",53),c(1),r()),n&2){let e=S();o(),m(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Fi(n,d){if(n&1&&h(0,"select",55),n&2){let e=S().$implicit,i=S();C("contentService",i.contentService)("row",e)("ngStyle",We(3,xi,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Wi(n,d){if(n&1&&(a(0,"mat-cell",54),v(1,"statusCellClass"),h(2,"i",54),v(3,"statusIconClass"),b(4,Fi,1,5,"select",55),r()),n&2){let e=d.$implicit,i=S();C("ngClass",_(1,3,e.recordStatus)),o(2),C("ngClass",_(3,5,e.recordStatus)),o(2),D(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow?4:-1)}}function Hi(n,d){if(n&1&&(a(0,"mat-header-cell",53),c(1),r()),n&2){let e=S();o(),m(" ",e.fieldsInfo.osType==null?null:e.fieldsInfo.osType.fieldTitle," ")}}function ji(n,d){if(n&1&&(a(0,"mat-cell"),c(1),v(2,"enums"),r()),n&2){let e=d.$implicit,i=S();o(),m(" ",He(2,1,e.osType,i.dataModelEnumOperatingSystemTypeResult.listItems)," ")}}function qi(n,d){if(n&1&&(a(0,"mat-header-cell",53),c(1),r()),n&2){let e=S();o(),m(" ",e.fieldsInfo.deviceType==null?null:e.fieldsInfo.deviceType.fieldTitle," ")}}function Ki(n,d){if(n&1&&(a(0,"mat-cell"),c(1),v(2,"enums"),r()),n&2){let e=d.$implicit,i=S();o(),m(" ",He(2,1,e.deviceType,i.dataModelEnumDeviceTypeResult.listItems)," ")}}function Qi(n,d){if(n&1&&(a(0,"mat-header-cell",53),c(1),r()),n&2){let e=S();o(),m(" ",e.fieldsInfo.packageName==null?null:e.fieldsInfo.packageName.fieldTitle," ")}}function Ui(n,d){if(n&1&&(a(0,"mat-cell"),c(1),r()),n&2){let e=d.$implicit;o(),m(" ",e.packageName," ")}}function zi(n,d){if(n&1&&(a(0,"mat-header-cell",53),c(1),r()),n&2){let e=S();o(),m(" ",e.fieldsInfo.linkApplicationId==null?null:e.fieldsInfo.linkApplicationId.fieldTitle," ")}}function Ji(n,d){if(n&1&&(a(0,"mat-cell"),c(1),r()),n&2){let e=d.$implicit;o(),m(" ",e.linkApplicationId," ")}}function Xi(n,d){if(n&1&&(a(0,"mat-header-cell",53),c(1),r()),n&2){let e=S();o(),m(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Yi(n,d){if(n&1&&(a(0,"mat-cell"),c(1),v(2,"localeDate"),r()),n&2){let e=d.$implicit;o(),m(" ",_(2,1,e.createdDate)," ")}}function Zi(n,d){if(n&1&&(a(0,"mat-header-cell",53),c(1),r()),n&2){let e=S();o(),m(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function $i(n,d){if(n&1&&(a(0,"mat-cell"),c(1),v(2,"localeDate"),r()),n&2){let e=d.$implicit;o(),m(" ",_(2,1,e.updatedDate)," ")}}function en(n,d){if(n&1&&(a(0,"mat-header-cell",53),c(1),r()),n&2){let e=S();o(),m(" ",e.fieldsInfo.expireDate==null?null:e.fieldsInfo.expireDate.fieldTitle," ")}}function tn(n,d){if(n&1&&(a(0,"mat-cell",56),c(1),v(2,"persianDate"),r()),n&2){let e=d.$implicit,i=S();C("ngStyle",We(4,Ai,i.publicHelper.RowStyleExpireDate(e.expireDate))),o(),m(" ",_(2,2,e.expireDate))}}function nn(n,d){n&1&&(a(0,"mat-header-cell"),c(1),v(2,"translate"),r()),n&2&&(o(),m(" ",_(2,1,"TITLE.OPTION")," "))}function on(n,d){if(n&1&&(a(0,"mat-cell",57)(1,"button",58)(2,"mat-icon"),c(3,"more_vert"),r()(),h(4,"mat-menu",null,2),r()),n&2){let e=R(5);o(),C("matMenuTriggerFor",e)}}function rn(n,d){n&1&&h(0,"mat-header-row")}function an(n,d){if(n&1){let e=A();a(0,"mat-row",59),E("click",function(t){let s=u(e).$implicit,p=S();return f(p.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=u(e).$implicit,p=S();return f(p.onActionTableRowSelect(s,t))}),r()}if(n&2){let e=d.$implicit,i=S();Fe("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var $=class $ extends Lt{constructor(e,i,t,s,p,l,G,oe,ei,sn,cn,ti,dn){super(e,new L,ti,p,ei);this.contentService=e;this.cmsToastrService=i;this.cmsConfirmationDialogService=t;this.router=s;this.tokenHelper=p;this.coreEnumService=l;this.activatedRoute=G;this.cdr=oe;this.translate=ei;this.pageInfo=sn;this.cmsStoreService=cn;this.publicHelper=ti;this.dialog=dn;this.requestLinkSiteId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new it;this.filterDataModelQueryBuilder=[];this.dataModelEnumDeviceTypeResult=new V;this.dataModelEnumOperatingSystemTypeResult=new V;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","linkSiteId","recordStatus","osType","DeviceType","PackageName","LinkApplicationId","createdDate","updatedDate","ExpireDate"];this.tabledisplayedColumnsMobileSource=["id","linkSiteId","recordStatus","osType","DeviceType","PackageName","LinkApplicationId","createdDate","updatedDate","ExpireDate"];this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:ee=>this.onSubmitOptionsSearch(ee)},this.filteModelContent.sortColumn="id",this.filteModelContent.sortType=te.Descending,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkSiteId>0){let ee=new qe;ee.propertyName="linkSiteId",ee.value=this.requestLinkSiteId,this.filteModelContent.filters.push(ee)}}ngOnInit(){this.filteModelContent.sortColumn="id",this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Ke(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))),this.getServiceDeviceType(),this.getServiceOperatingSystemTypeEnum()}getServiceDeviceType(){this.coreEnumService.ServiceDeviceTypeEnum().subscribe({next:e=>{this.dataModelEnumDeviceTypeResult=e}})}getServiceOperatingSystemTypeEnum(){this.coreEnumService.ServiceOperatingSystemTypeEnum().subscribe({next:e=>{this.dataModelEnumOperatingSystemTypeResult=e}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new L);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=te.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=te.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=te.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Ne,{height:"90%",panelClass:e,enterAnimationDuration:ie.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:ie.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Ge,{height:"90%",panelClass:i,enterAnimationDuration:ie.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:ie.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let p=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(p,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(p)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(p,!1)}})}}).catch(()=>{})}onActionButtonGoToSiteCategoryList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/core/siteSiteCategory/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{i.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{i.set(l,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(t,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(G=>{i.set(G,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),p=new qe;p.propertyName="recordStatus",p.value=et.Available,s.filters.push(p),this.contentService.ServiceGetCount(s).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(G=>{i.set(G,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};$.\u0275fac=function(i){return new(i||$)(g(B),g(J),g(Be),g($e),g(wt),g(K),g(Ze),g(q),g(U),g(xt),g(Dt),g(X),g(st))},$.\u0275cmp=O({type:$,selectors:[["app-core-sitecategory-list"]],standalone:!1,features:[F],decls:75,vars:38,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"svg"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],[1,"col-4"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","osType"],["matColumnDef","DeviceType"],["matColumnDef","PackageName"],["matColumnDef","LinkApplicationId"],["matColumnDef","createdDate"],["matColumnDef","updatedDate"],["matColumnDef","ExpireDate"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=A();a(0,"app-cms-html-notice",3)(1,"h4"),c(2),v(3,"translate"),r(),c(4),v(5,"translate"),r(),a(6,"app-cms-html-list",4),y("optionActionGuideNoticeDisplayChange",function(l){return u(s),I(t.viewGuideNotice,l)||(t.viewGuideNotice=l),f(l)}),E("optionOnActionButtonMemoRow",function(){return u(s),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),f(t.onActionButtonPrintRow())}),w(7,5),c(8," -------------------------------------- "),T(),Qe(9,6)(10,7),w(11,8),b(12,Ri,2,0,"a",9),a(13,"a",10),E("click",function(){return u(s),f(t.viewGuideNotice=!t.viewGuideNotice)}),h(14,"i",11),r(),a(15,"a",10),E("click",function(){return u(s),f(t.onActionButtonReload())}),h(16,"i",12),r(),T(),w(17,13),a(18,"a",14),E("click",function(){return u(s),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),h(19,"mat-slide-toggle",15),c(20),v(21,"translate"),r(),a(22,"a",14),E("click",function(){return u(s),f(t.onActionButtonStatist())}),h(23,"mat-slide-toggle",15),c(24),v(25,"translate"),r(),T(),w(26,16),b(27,ki,7,3,"div",17),T(),w(28,18),b(29,Vi,7,3,"div",17),b(30,Li,7,3,"div",17),T(),w(31,19),a(32,"app-cms-search-list",20),y("optionsChange",function(l){return u(s),I(t.optionsSearch,l)||(t.optionsSearch=l),f(l)}),r(),a(33,"app-cms-statist-list",20),y("optionsChange",function(l){return u(s),I(t.optionsStatist,l)||(t.optionsStatist=l),f(l)}),r(),T(),w(34,21),a(35,"mat-table",22,0),E("matSortChange",function(){u(s);let l=R(36);return f(t.onTableSortData(l))}),w(37,23),k(38,Bi,2,1,"mat-header-cell",24)(39,Ni,2,1,"mat-cell",25),T(),w(40,26),k(41,Pi,2,1,"mat-header-cell",24)(42,Gi,4,5,"mat-cell",25),T(),w(43,27),k(44,Oi,2,1,"mat-header-cell",24)(45,Wi,5,7,"mat-cell",28),T(),w(46,29),k(47,Hi,2,1,"mat-header-cell",24)(48,ji,3,4,"mat-cell",25),T(),w(49,30),k(50,qi,2,1,"mat-header-cell",24)(51,Ki,3,4,"mat-cell",25),T(),w(52,31),k(53,Qi,2,1,"mat-header-cell",24)(54,Ui,2,1,"mat-cell",25),T(),w(55,32),k(56,zi,2,1,"mat-header-cell",24)(57,Ji,2,1,"mat-cell",25),T(),w(58,33),k(59,Xi,2,1,"mat-header-cell",24)(60,Yi,3,3,"mat-cell",25),T(),w(61,34),k(62,Zi,2,1,"mat-header-cell",24)(63,$i,3,3,"mat-cell",25),T(),w(64,35),k(65,en,2,1,"mat-header-cell",24)(66,tn,3,6,"mat-cell",36),T(),w(67,37),k(68,nn,3,3,"mat-header-cell",38)(69,on,6,1,"mat-cell",39),T(),k(70,rn,1,0,"mat-header-row",40)(71,an,1,2,"mat-row",41),r(),T(),w(72,42),a(73,"mat-paginator",43,1),E("page",function(l){return u(s),f(t.onTablePageingData(l))}),r(),T(),r()}i&2&&(C("svg","assets/media/svg/icons/General/Notifications1.svg"),o(2),x(_(3,29,"TITLE.List_of_devices")),o(2),m(" ",_(5,31,"TITLE.In_this_section_you_can_see_the_list_of_your_devices._Inthis_section_you_can_see_the_list_of_your_devicess"),`
`),o(2),C("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),M("optionActionGuideNoticeDisplay",t.viewGuideNotice),C("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),D(t.requestLinkSiteId>0?12:-1),o(4),Fe("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),o(3),C("checked",t.optionsSearch.data.show),o(),m("",_(21,33,"ACTION.SEARCH")," "),o(3),C("checked",t.optionsStatist.data.show),o(),m("",_(25,35,"ACTION.STATIST")," "),o(3),D(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?27:-1),o(2),D(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?29:-1),o(),D(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?30:-1),o(2),M("options",t.optionsSearch),o(),M("options",t.optionsStatist),o(2),C("dataSource",t.tableSource),o(35),C("matHeaderRowDef",t.tabledisplayedColumns),o(),C("matRowDefColumns",t.tabledisplayedColumns),o(2),C("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Ue(37,Ti)))},dependencies:[ze,Je,lt,ct,Q,dt,mt,pt,ut,ft,St,Ct,vt,It,_t,gt,yt,ht,Mt,Et,bt,Bt,Nt,kt,Pt,Gt,Ot,Xe,z,qt,Kt,Ft,Wt,Ht,jt],encapsulation:2});var ne=$;var ln=[{path:"",data:{title:"ROUTE.CORE.DEVICE"},children:[{path:"",component:ne,data:{title:"ROUTE.CORE.DEVICE"}},{path:":LinkSiteId",component:ne,data:{title:"ROUTE.CORE.DEVICE"}}]}],N=class N{};N.\u0275fac=function(e){return new(e||N)},N.\u0275mod=ae({type:N}),N.\u0275inj=re({imports:[je.forChild(ln),je]});var Oe=N;var P=class P{};P.\u0275fac=function(e){return new(e||P)},P.\u0275mod=ae({type:P}),P.\u0275inj=re({providers:[B,ot,Be],imports:[Ye,rt,Oe,at.withConfig({warnOnNgModelWithFormControl:"never"}),Tt,Rt]});var $t=P;export{$t as CoreDeviceModule};
