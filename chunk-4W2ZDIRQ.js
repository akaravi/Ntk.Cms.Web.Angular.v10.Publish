import{a as fe}from"./chunk-GQQOYU4Q.js";import{$ as se,A as oe,Q as ne,Qc as x,V as re,Wb as w,Xb as he,Za as ue,_ as ae,aa as le,c as Z,n as ee,q as te,u as ie,ua as pe,va as ce,xa as me,ya as de}from"./chunk-4ZDW4SNU.js";import{Ab as I,Eb as H,F as B,Fa as r,Fb as z,Gb as K,Ha as R,Kb as V,Ld as b,Oa as c,P as q,Pb as l,Pd as E,Q as U,Qb as T,Rb as _,Sa as M,Tc as W,Ud as D,Va as j,da as f,ea as v,fb as A,fc as m,gb as P,gc as d,ho as X,ib as F,jb as L,jd as $,kb as Q,kn as k,lb as g,mb as n,mr as Y,nb as a,ob as G,q as N,qd as J,vb as y,yb as C}from"./chunk-GC7IBVIU.js";var Te=["tagInput"];function be(p,i){if(p&1){let e=y();n(0,"mat-chip",8),C("removed",function(){let o=f(e).$implicit,s=I();return v(s.remove(o))}),l(1),n(2,"button",9)(3,"mat-icon"),l(4,"cancel"),a()()()}if(p&2){let e=i.$implicit;r(),_(" ",e.display," ")}}function Ee(p,i){if(p&1&&(n(0,"mat-option",7),l(1),a()),p&2){let e=i.$implicit;g("value",e),r(),_(" ",e.display," ")}}var u=class u{constructor(i,e,t){this.service=i;this.cmsToastrService=e;this.translate=t;this.id=++u.nextId;this.constructorInfoAreaId=this.constructor.name;this.optionDisabled=!1;this.optionPlaceholder="+ Tag";this.optionLabel="";this.optionRequired=!1;this.optionChange=new R;this.tagDataModel=[];this.tagLastDataModel=[];this.selectForceStatus=!0;this.separatorKeysCodes=[13];this.tagCtrl=new ie("");this.addOnBlur=!0;this.filteredOptions=this.tagCtrl.valueChanges.pipe(q(null),B(400),U(o=>this.filter(o||"")))}set optionSelectForce(i){this.onActionSelectForce(i)}ngOnInit(){(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}filter(i){let e=new k;e.rowPerPage=20,e.accessLoad=!0;let t=new b;return t.propertyName="title",t.value=i,t.searchType=D.Contains,t.clauseType=E.Or,e.filters.push(t),i&&typeof i=="string"&&(t=new b,t.propertyName="id",t.value=i,t.searchType=D.Equal,t.clauseType=E.Or,e.filters.push(t)),i&&typeof+i=="number"&&+i>0&&(t=new b,t.propertyName="caseCode",t.value=i,t.searchType=D.Contains,t.clauseType=E.Or,e.filters.push(t)),this.service.ServiceGetAll(e).pipe(N(o=>(this.tagLastDataModel=o.listItems.map(s=>({display:s.title,value:s.id})),this.tagLastDataModel)))}checkIndex(i){var e=0,t=-1;return this.tagDataModel.forEach(o=>{o.value==i&&(t=e),e++}),t}add(i){var e;i.value&&this.tagLastDataModel.forEach(t=>{(t.display==i.value||t.value+""==i.value)&&(e=t)}),e&&this.checkIndex(e.value)<0&&(this.tagDataModel.push(e),this.onActionChange()),i.chipInput.clear(),this.tagCtrl.setValue(null)}remove(i){let e=this.checkIndex(i.value);e>=0&&(this.tagDataModel.splice(e,1),this.onActionChange())}selected(i){let e=i.option.value;this.checkIndex(e.value)<0&&this.tagDataModel.push(e),this.tagInput.nativeElement.value="",this.tagCtrl.setValue(null),this.onActionChange()}onActionChange(){let i=[];this.tagDataModel.forEach(e=>{i.findIndex(t=>t==e.value)<0&&i.push(e.value)}),this.selectForceStatus=!1,this.optionChange.emit(i)}onActionSelectForce(i){if(!this.selectForceStatus||!i||i.length===0)return;let e=new k;i.forEach(t=>{if(t.length>0){let o=new b;o.propertyName="id",o.value=t,o.clauseType=E.Or,e.filters.push(o)}}),this.service.ServiceGetAll(e).subscribe({next:t=>{t.isSuccess?t.listItems.forEach(o=>{this.tagDataModel.findIndex(s=>s.value==o.id)<0&&this.tagDataModel.push({value:o.id,display:o.title})}):this.cmsToastrService.typeErrorGetAll(t.errorMessage)},error:t=>{this.cmsToastrService.typeErrorGetAll(t)}})}};u.nextId=0,u.\u0275fac=function(e){return new(e||u)(c(X),c(x),c(w))},u.\u0275cmp=M({type:u,selectors:[["app-estate-property-autocomplete"]],viewQuery:function(e,t){if(e&1&&H(Te,5),e&2){let o;z(o=K())&&(t.tagInput=o.first)}},inputs:{optionDisabled:"optionDisabled",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionRequired:"optionRequired",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,decls:14,vars:10,consts:[["chipList",""],["tagInput",""],["auto","matAutocomplete"],["appearance","fill",2,"width","100%"],["aria-label","tag selection",3,"disabled"],[3,"matChipInputTokenEnd","placeholder","matChipInputAddOnBlur","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes"],[3,"optionSelected"],[3,"value"],[3,"removed"],["type","button","matChipRemove",""]],template:function(e,t){if(e&1){let o=y();n(0,"mat-form-field",3)(1,"mat-label"),l(2),a(),n(3,"mat-chip-grid",4,0),L(5,be,5,1,"mat-chip",null,F),n(7,"input",5,1),C("matChipInputTokenEnd",function(O){return f(o),v(t.add(O))}),a()(),n(9,"mat-autocomplete",6,2),C("optionSelected",function(O){return f(o),v(t.selected(O))}),L(11,Ee,2,2,"mat-option",7,F),m(13,"async"),a()()}if(e&2){let o=V(4),s=V(10);r(2),T(t.optionLabel),r(),g("disabled",t.optionDisabled),r(2),Q(t.tagDataModel),r(2),g("placeholder"," + "+t.optionPlaceholder)("matChipInputAddOnBlur",t.addOnBlur)("formControl",t.tagCtrl)("matAutocomplete",s)("matChipInputFor",o)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes),r(4),Q(d(13,8,t.filteredOptions))}},dependencies:[ee,te,oe,se,ne,le,ce,me,de,pe,ae,re,ue,W],encapsulation:2});var ve=u;var S=class S{constructor(i){this.sanitizer=i}transform(i,e=!1){let t="";switch(i){case 0:t="fa fa-sort-amount-desc";break;case 1:t="fa fa-sort-amount-asc";break;case 2:t="fa fa-random";break;default:t="fa fa-sort-amount-desc"}return t}};S.\u0275fac=function(e){return new(e||S)(c(J,16))},S.\u0275pipe=j({name:"sortTypeIconClass",type:S,pure:!0,standalone:!1});var _e=S;function Me(p,i){if(p&1){let e=y();n(0,"button",8),C("click",function(){f(e);let o=I(2);return v(o.onActionSendUrlToQDoc())}),n(1,"span"),l(2),m(3,"translate"),a(),G(4,"i",9),a()}p&2&&(r(2),T(d(3,1,"ACTION.VIEW")))}function De(p,i){if(p&1){let e=y();n(0,"div")(1,"p"),l(2),m(3,"translate"),a(),n(4,"div",1)(5,"ng-otp-input",2,0),C("onInputChange",function(o){f(e);let s=I();return v(s.onOtpChange(o))}),a()(),n(7,"div",3),A(8,Me,5,3,"button",4),a(),n(9,"h5",5),l(10),m(11,"translate"),a(),n(12,"p",6),l(13),m(14,"translate"),n(15,"a",7),l(16," https://qdoc.ir "),a(),l(17),m(18,"translate"),a()()}if(p&2){let e=I();r(2),T(d(3,6,"TITLE.Code_of_Knowledge")),r(3),g("config",e.otpConfig),r(3),P(e.optionUrl&&e.optionUrl.length>0&&(e.QDocModel.username==null?null:e.QDocModel.username.length)===5?8:-1),r(2),_("",d(11,8,"TITLE.Description"),":"),r(3),_(" ",d(14,10,"TITLE.To_do_this_it_is_enough_to_enter_the_site_on_the_device_that_you_want_your_content_to_be_displayed_on")," "),r(4),_(" ",d(18,12,"TITLE.Enter_the_display_code_in_this_section_so_that_your_content_will_be_displayed_on_the_monitor_of_the_device_in_question")," ")}}var h=class h{constructor(i,e,t){this.cmsToastrService=i;this.http=e;this.translate=t;this.id=++h.nextId;this.optionUrl="";this.QDocModel={};this.otpConfig={allowNumbersOnly:!0,length:5,isPasswordInput:!1,disableAutoFocus:!0,placeholder:"",inputStyles:{width:"50px",height:"50px",margin:"5px"}}}ngOnInit(){}onActionSendUrlToQDoc(){if(this.QDocModel.message=this.optionUrl,!this.QDocModel.username&&this.QDocModel.username.length<=0){this.cmsToastrService.typeWarningSelected("\u06A9\u062F \u0634\u0646\u0627\u0633\u0647 \u0631\u0627 \u0627\u0632 \u0648\u0628\u0633\u0627\u06CC\u062A https://Qdoc.ir \u062F\u0631\u06CC\u0627\u0641\u062A \u0646\u0645\u0627\u06CC\u06CC\u062F");return}this.http.post(Y.cmsServerConfig.configQDocServerPath,this.QDocModel,{headers:{}}).subscribe({next:i=>{this.translate.get("MESSAGE.The_order_was_sent_to_the_website").subscribe(e=>{this.cmsToastrService.typeSuccessMessage(e)})},error:i=>{this.cmsToastrService.typeErrorMessage("\u0628\u0631\u0631\u0648\u0632 \u062E\u0637\u0627 \u062F\u0631 \u0627\u0631\u0633\u0627\u0644 \u062F\u0633\u062A\u0648\u0631",i)}})}onOtpChange(i){this.QDocModel.username=i}};h.nextId=0,h.\u0275fac=function(e){return new(e||h)(c(x),c($),c(w))},h.\u0275cmp=M({type:h,selectors:[["app-cms-qdoc"]],inputs:{optionUrl:"optionUrl"},standalone:!1,decls:1,vars:1,consts:[["ngOtpInput",""],[2,"text-align","center"],[3,"onInputChange","config"],[1,"col-m-4","col-sm-12"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],[2,"text-align","right"],["dir","rtl",2,"font-size","15px"],["href","https://qdoc.ir","target","_blank"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fas","fa-street-view"]],template:function(e,t){e&1&&A(0,De,19,14,"div"),e&2&&P(t.optionUrl&&t.optionUrl.length>0?0:-1)},dependencies:[Z,fe,he],encapsulation:2});var ge=h;export{ve as a,_e as b,ge as c};
