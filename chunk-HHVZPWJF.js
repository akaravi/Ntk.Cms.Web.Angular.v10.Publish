import{a as Fe}from"./chunk-CN4IZOYA.js";import{a as Le}from"./chunk-G7VDKBAZ.js";import{a as Oe,d as Pe}from"./chunk-KIW7CZRO.js";import{f as Ve}from"./chunk-FMAO4WAT.js";import{$a as xe,Fc as Ne,Ic as ke,K as de,Kc as Be,L as me,N as ue,Nc as Re,O as fe,Qb as we,Rb as Ee,Sa as Me,Ta as Se,Ua as _e,Va as Ce,W as ge,Wa as he,Xa as be,Ya as Te,Za as ve,_a as Ie,m as oe,n as ae,q as re,r as se,t as le,tb as ye,tc as Ae,v as pe,w as ce}from"./chunk-7O4ZVAVH.js";import{Db as F,Eb as D,Fa as n,Fb as H,Jb as j,Lc as z,Oa as _,Ob as o,Pb as G,Qb as s,Sa as A,Ta as N,Td as Z,Ub as k,Vb as B,Wb as R,Xc as J,Y as E,Ya as y,Ye as ee,bf as te,cf as O,da as d,dc as l,de as V,dg as ne,ea as m,ec as p,he as $,kb as M,lb as t,mb as a,mk as ie,nb as S,sd as Y,ub as w,uk as q,vk as Q,wc as X,xb as f,zb as h,zd as W}from"./chunk-BCKV57LG.js";import{i as K}from"./chunk-SEDBTTTN.js";var v=class v{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};v.\u0275fac=function(r){return new(r||v)},v.\u0275cmp=A({type:v,selectors:[["app-core-main-action"]],standalone:!1,decls:1,vars:0,template:function(r,e){r&1&&S(0,"router-outlet")},dependencies:[Y],encapsulation:2});var P=v;var je=["vform"],Ge=["Message"];function We(g,c){if(g&1){let r=w();t(0,"textarea",31),R("ngModelChange",function(i){d(r);let u=h();return B(u.dataMessageContentModel.messageBody,i)||(u.dataMessageContentModel.messageBody=i),m(i)}),o(1,"                "),a()}if(g&2){let r=h();k("ngModel",r.dataMessageContentModel.messageBody)}}function qe(g,c){if(g&1){let r=w();t(0,"button",32),f("click",function(){d(r);let i=h();return m(i.onActionMessageContentAdd())}),S(1,"i",33),o(2),l(3,"translate"),a()}g&2&&(n(2),s(" ",p(3,1,"TITLE.Added_to_the_text")," "))}function Qe(g,c){if(g&1){let r=w();t(0,"button",32),f("click",function(){d(r);let i=h();return m(i.onActionMessageContentNew())}),S(1,"i",33),o(2),l(3,"translate"),a()}g&2&&(n(2),s(" ",p(3,1,"TITLE.Message_Text")," "))}function Ue(g,c){g&1&&(t(0,"mat-error"),o(1),l(2,"translate"),t(3,"strong"),o(4),l(5,"translate"),a()()),g&2&&(n(),s(" ",p(2,2,"TITLE.Message_Text")," "),n(3),G(p(5,4,"content.required")))}function Ke(g,c){if(g&1&&(t(0,"button",36),S(1,"i",37),o(2),l(3,"translate"),a()),g&2){h(2);let r=j(11);M("disabled",!r.valid),n(2),s(" ",p(3,2,"ACTION.Send_Message")," ")}}function Xe(g,c){if(g&1&&(t(0,"div",34),y(1,Ke,4,4,"button",35),a()),g&2){let r=h();n(),M("ngIf",!r.publicHelper.processService.process.inRunAll)}}var I=class I{constructor(c,r,e,i,u,C,Je,Ye){this.coreEnumService=c;this.coreTokenConnectionService=r;this.cmsStoreService=e;this.cmsToastrService=i;this.cdr=u;this.publicHelper=C;this.translate=Je;this.tokenHelper=Ye;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new ne;this.dataModelParentSelected=new ie;this.dataModel=new te;this.dataModelResult=new Z;this.formInfo=new Pe;this.clipboardText="";this.dataMessageCategoryModel=new q;this.dataMessageContentModel=new Q;this.step=0;this.publicHelper.processService.cdr=this.cdr,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore}ngOnInit(){}readClipboardFromDevTools(){return new Promise((c,r)=>{let e=()=>K(null,null,function*(){try{let i=yield navigator.clipboard.readText();c(i)}catch(i){r(i)}window.removeEventListener("focus",e)});window.addEventListener("focus",e),console.log("Hit <Tab> to give focus back to document (or we will face a DOMException);")})}onActionMessageLTR(){this.message.nativeElement.style.direction="ltr",this.message.nativeElement.style.textAlign="left"}onActionMessageRTL(){this.message.nativeElement.style.direction="rtl",this.message.nativeElement.style.textAlign="right"}onActionSelectMessageCategory(c){c&&c.id?.length>0?this.dataMessageCategoryModel=c:this.dataMessageCategoryModel=new q}onActionSelectMessageContent(c){c&&c.id?.length>0?this.dataMessageContentModel=c:this.dataMessageContentModel=new Q}onActionMessageContentAdd(){this.dataMessageContentModel?.messageBody?.length>0?this.dataModel.content.length>0&&(this.dataModel.content=this.dataModel.content+" "+this.dataMessageContentModel.messageBody):this.dataModel.content=this.dataMessageContentModel.messageBody}onActionMessageContentNew(){this.dataMessageContentModel?.messageBody?.length>0&&(this.dataModel.content=this.dataMessageContentModel.messageBody)}onFormSubmit(){if(!this.formGroup.valid)return;this.formInfo.submitButtonEnabled=!1;let c=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(r=>{this.publicHelper.processService.processStart(c,r,this.constructorInfoAreaId)}),this.formInfo.submitResultMessage="",this.formInfo.submitResultMessage="",this.coreTokenConnectionService.ServiceSendNotification(this.dataModel).subscribe({next:r=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=r,r.isSuccess?(this.translate.get("MESSAGE.Submit_request_was_successfully_registered").subscribe(e=>{this.formInfo.submitResultMessage=e,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1}),this.translate.get("MESSAGE.Send_request_was_successfully_registered").subscribe(e=>{this.cmsToastrService.typeSuccessMessage(e)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage=r.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(r.errorMessage)),this.publicHelper.processService.processStop(c)},error:r=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(r),this.publicHelper.processService.processStop(c,!1)}})}setStep(c){this.step=c}nextStep(){this.step++}prevStep(){this.step--}};I.\u0275fac=function(r){return new(r||I)(_(V),_(O),_(Ne),_(Be),_(X),_(Ve),_(we),_(ke))},I.\u0275cmp=A({type:I,selectors:[["app-core-main-action-send-notification"]],viewQuery:function(r,e){if(r&1&&(F(je,5),F(Ge,5)),r&2){let i;D(i=H())&&(e.formGroup=i.first),D(i=H())&&(e.message=i.first)}},standalone:!1,decls:143,vars:98,consts:[["vform","ngForm"],["content",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection"],[1,"row"],[1,"col-6"],[1,"example-headers-align"],["hideToggle","",3,"opened","expanded"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"click"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModel","ngModelChange",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray",3,"click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.sendToAll",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.sendToAll","name","dataModel.sendToAll",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.sendToAll",1,"custom-control-label"],[1,"message-box"],[1,"row",2,"height","300px"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.content",1,"color-highlight"],["matInput","","name","dataModel.content","type","text","placeholder","...","minlength","1","maxlength","500","rows","9","id","dataModel.content",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[4,"ngIf"],["class","row","style","height: 140px; bottom: 4vh; justify-content: center",4,"ngIf"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModelChange","ngModel"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],[1,"row",2,"height","140px","bottom","4vh","justify-content","center"],["type","submit","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled",4,"ngIf"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(r,e){if(r&1){let i=w();t(0,"div",2),S(1,"app-progress-spinner",3),t(2,"div",4)(3,"p",5),o(4),l(5,"translate"),a(),t(6,"p"),o(7),l(8,"translate"),a(),S(9,"app-cms-form-result-message",6),t(10,"form",7,0),f("ngSubmit",function(){return d(i),m(e.onFormSubmit())}),o(12),t(13,"div",8)(14,"div",9)(15,"div",10)(16,"mat-accordion",11)(17,"mat-expansion-panel",12),f("opened",function(){return d(i),m(e.setStep(0))}),t(18,"mat-expansion-panel-header")(19,"mat-panel-title"),o(20),l(21,"translate"),a(),t(22,"mat-panel-description"),o(23),l(24,"translate"),t(25,"mat-icon"),o(26,"account_circle"),a()()(),t(27,"mat-action-row")(28,"button",13),f("click",function(){return d(i),m(e.nextStep())}),o(29),l(30,"translate"),a()()(),t(31,"mat-expansion-panel",12),f("opened",function(){return d(i),m(e.setStep(1))}),t(32,"mat-expansion-panel-header")(33,"mat-panel-title"),o(34),l(35,"translate"),a(),t(36,"mat-panel-description"),o(37),l(38,"translate"),t(39,"mat-icon"),o(40,"map"),a()()(),y(41,We,2,1,"textarea",14)(42,qe,4,3,"button",15)(43,Qe,4,3,"button",15),t(44,"mat-action-row")(45,"button",16),f("click",function(){return d(i),m(e.prevStep())}),o(46),l(47,"translate"),a(),t(48,"button",13),f("click",function(){return d(i),m(e.nextStep())}),o(49),l(50,"translate"),a()()(),t(51,"mat-expansion-panel",12),f("opened",function(){return d(i),m(e.setStep(2))}),t(52,"mat-expansion-panel-header")(53,"mat-panel-title"),o(54),l(55,"translate"),a(),t(56,"mat-panel-description"),o(57),l(58,"translate"),t(59,"mat-icon"),o(60,"date_range"),a()()(),t(61,"mat-action-row")(62,"button",16),f("click",function(){return d(i),m(e.prevStep())}),o(63),l(64,"translate"),a(),t(65,"button",13),f("click",function(){return d(i),m(e.nextStep())}),o(66),l(67,"translate"),a()()(),t(68,"mat-expansion-panel",12),f("opened",function(){return d(i),m(e.setStep(3))}),t(69,"mat-expansion-panel-header")(70,"mat-panel-title"),o(71),l(72,"translate"),a(),t(73,"mat-panel-description"),o(74),l(75,"translate"),t(76,"mat-icon"),o(77,"date_range"),a()()(),S(78,"div",9)(79,"hr"),t(80,"mat-action-row")(81,"button",16),f("click",function(){return d(i),m(e.prevStep())}),o(82),l(83,"translate"),a(),t(84,"button",13),f("click",function(){return d(i),m(e.nextStep())}),o(85),l(86,"translate"),a()()(),t(87,"mat-expansion-panel",12),f("opened",function(){return d(i),m(e.setStep(4))}),t(88,"mat-expansion-panel-header")(89,"mat-panel-title"),o(90),l(91,"translate"),a(),t(92,"mat-panel-description"),o(93),l(94,"translate"),t(95,"mat-icon"),o(96,"date_range"),a()()(),t(97,"mat-action-row")(98,"button",16),f("click",function(){return d(i),m(e.prevStep())}),o(99),l(100,"translate"),a(),t(101,"button",13),f("click",function(){return d(i),m(e.nextStep())}),o(102),l(103,"translate"),a()()(),t(104,"mat-expansion-panel",12),f("opened",function(){return d(i),m(e.setStep(5))}),t(105,"mat-expansion-panel-header")(106,"mat-panel-title"),o(107),l(108,"translate"),a(),t(109,"mat-panel-description"),o(110),l(111,"translate"),t(112,"mat-icon"),o(113,"date_range"),a()()(),t(114,"div",17)(115,"div",18)(116,"h5",19),o(117),l(118,"translate"),a()(),t(119,"div",20)(120,"div",21)(121,"input",22),R("ngModelChange",function(C){return d(i),B(e.dataModel.sendToAll,C)||(e.dataModel.sendToAll=C),m(C)}),a(),S(122,"label",23),a()()(),t(123,"mat-action-row")(124,"button",16),f("click",function(){return d(i),m(e.prevStep())}),o(125),l(126,"translate"),a(),t(127,"button",13),f("click",function(){return d(i),m(e.nextStep())}),o(128),l(129,"translate"),a()()()()(),t(130,"div",10)(131,"div",24)(132,"div",25)(133,"div",26)(134,"label",27),o(135),l(136,"translate"),a(),t(137,"textarea",28,1),R("ngModelChange",function(C){return d(i),B(e.dataModel.content,C)||(e.dataModel.content=C),m(C)}),a(),t(139,"em"),o(140),a(),y(141,Ue,6,6,"mat-error",29),a()(),y(142,Xe,2,1,"div",30),a()()()()()()()}if(r&2){let i=j(138);n(),M("optionsInfoAreaId",e.constructorInfoAreaId),n(3),s(" ",p(5,44,"TITLE.EDIT_USER_ACCOUNT")," "),n(3),s(" ",p(8,46,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),M("formInfo",e.formInfo),n(3),s(" ",e.formInfo.formTitle," "),n(5),M("expanded",e.step===0),n(3),s(" ",p(21,48,"TITLE.Direction")," "),n(3),s(" ",p(24,50,"TITLE.Select_the_path_to_send_the_message")," "),n(6),s(" ",p(30,52,"ACTION.NEXT")," "),n(2),M("expanded",e.step===1),n(3),s(" ",p(35,54,"TITLE.Message_Text")," "),n(3),s(" ",p(38,56,"TITLE.Select_the_text_of_the_default_messages")," "),n(4),M("ngIf",(e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0),n(),M("ngIf",(e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0&&(e.dataModel.content==null?null:e.dataModel.content.length)>0),n(),M("ngIf",(e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0),n(3),s(" ",p(47,58,"ACTION.BACK")," "),n(3),s(" ",p(50,60,"ACTION.NEXT")," "),n(2),M("expanded",e.step===2),n(3),s(" ",p(55,62,"TITLE.Phonebook")," "),n(3),s(" ",p(58,64,"TITLE.Audience_selection")," "),n(6),s(" ",p(64,66,"ACTION.BACK")," "),n(3),s(" ",p(67,68,"ACTION.NEXT")," "),n(2),M("expanded",e.step===3),n(3),s(" ",p(72,70,"TITLE.Shipping_time")," "),n(3),s(" ",p(75,72,"TITLE.Time_to_start_sending_and_finish")," "),n(8),s(" ",p(83,74,"ACTION.BACK")," "),n(3),s(" ",p(86,76,"ACTION.NEXT")," "),n(2),M("expanded",e.step===4),n(3),s(" ",p(91,78,"TITLE.Timing")," "),n(3),s(" ",p(94,80,"TITLE.Retry_schedule")," "),n(6),s(" ",p(100,82,"ACTION.BACK")," "),n(3),s(" ",p(103,84,"ACTION.NEXT")," "),n(2),M("expanded",e.step===5),n(3),s(" ",p(108,86,"TITLE.Settings")," "),n(3),s(" ",p(111,88,"TITLE.Send_settings")," "),n(7),s(" ",p(118,90,"TITLE.Send_To_All")," "),n(4),k("ngModel",e.dataModel.sendToAll),n(4),s(" ",p(126,92,"ACTION.BACK")," "),n(3),s(" ",p(129,94,"ACTION.END")," "),n(7),G(p(136,96,"TITLE.Message_Text")),n(2),k("ngModel",e.dataModel.content),n(3),s("",i.value.length," / 500"),n(),M("ngIf",i.errors==null?null:i.errors.required),n(),M("ngIf",e.formInfo.submitButtonEnabled)}},dependencies:[z,ce,ae,oe,re,se,de,me,pe,le,be,Me,Se,_e,he,Ce,ge,ve,xe,Oe,Le,Ee],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}.mat-tab-group[_ngcontent-%COMP%]{height:95%}.message-box[_ngcontent-%COMP%]{background-image:url(/assets/media/bg/iphone.png);height:600px;width:300px;background-position:center;background-repeat:no-repeat;background-size:cover;padding-right:33px;padding-left:33px}.message-box-button[_ngcontent-%COMP%]{color:#00f;border-color:transparent;background-color:transparent}.message-box-button[_ngcontent-%COMP%]:hover{color:red;font-size:initial}.message-box-button[_ngcontent-%COMP%]:active{color:#a200ff}"]});var x=I;var ze=[{path:"",component:P,data:{title:"ROUTE.CORE.ACTION"},children:[{path:"send-notification",component:x,data:{title:"ROUTE.CORE.ACTION"}},{path:"send-notification/inbox-extras",component:x,data:{title:"ROUTE.CORE.ACTION"}},{path:"send-notification/outbox-extras",component:x,data:{title:"ROUTE.CORE.ACTION"}}]}],b=class b{};b.\u0275fac=function(r){return new(r||b)},b.\u0275mod=N({type:b}),b.\u0275inj=E({imports:[W.forChild(ze),W]});var L=b;var T=class T{};T.\u0275fac=function(r){return new(r||T)},T.\u0275mod=N({type:T}),T.\u0275inj=E({providers:[$,V,ee,Fe,O],imports:[J,L,ue,fe.withConfig({warnOnNgModelWithFormControl:"never"}),Re,Ae,Ie,Te,ye]});var De=T;export{De as CoreMainActionModule};
