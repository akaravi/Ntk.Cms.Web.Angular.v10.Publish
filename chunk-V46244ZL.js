import{a as An}from"./chunk-YRGFPSHO.js";import{a as zt}from"./chunk-2JTWFKVB.js";import{a as ai}from"./chunk-XSBG6UYX.js";import{a as Ro}from"./chunk-FNI7GNBM.js";import{a as xt}from"./chunk-IXPEP4O3.js";import{a as xo}from"./chunk-NGUGF2GR.js";import{a as vt}from"./chunk-JCUWFHRI.js";import{a as Ct}from"./chunk-BBKOJKGF.js";import{a as Nt}from"./chunk-Z7LLDNBU.js";import{a as Ft}from"./chunk-LXDGOMHV.js";import{a as Vt}from"./chunk-3OXB4ASU.js";import{a as En,b as yn,c as st,d as ct,e as dt,g as pt}from"./chunk-UBA7IFYP.js";import{a as Lt}from"./chunk-7YJZQ2MB.js";import{b as Qt}from"./chunk-CU3OLILU.js";import{a as Tt}from"./chunk-R5M5JHUG.js";import{a as Me}from"./chunk-MDTY2GNU.js";import{a as wn,b as Do}from"./chunk-OPFAG3H4.js";import{a as Rt}from"./chunk-XKBE4SHI.js";import{a as H}from"./chunk-GHOZ2SNL.js";import{$b as bo,Aa as gn,Ab as Ke,Ac as Ao,B as pn,Bb as Je,Cb as Ye,Dc as N,Eb as Cn,Fb as In,Gb as bn,Ha as re,Hb as Mn,Ia as ue,Ja as ye,Jb as Xe,K as Te,Kb as Ze,L as ve,Lb as $e,M as Ce,Mb as et,Nb as tt,O as oo,Ob as it,P as ro,Pa as Ne,Pb as nt,Qb as ot,R as Ee,Rb as rt,Sb as at,T as ao,Tb as ho,U as mn,Wa as _n,Wb as _o,Xa as Tn,Xb as To,Ya as vn,Yb as vo,Zb as Co,_b as Io,ac as Mo,bc as ko,cc as wo,fc as V,gc as B,l as no,ma as W,nc as kn,o as ee,oa as Ve,oc as Eo,r as te,s as Se,tb as So,u as he,ub as Ue,uc as le,v as dn,vb as Qe,vc as O,w as fe,x as _e,xc as yo,ya as fn,yb as ze,za as un,zc as lt}from"./chunk-QFK6R63V.js";import{m as ae}from"./chunk-WNRZ34IP.js";import{a as G}from"./chunk-AXHTCGA7.js";import{$d as U,$f as jt,Ba as an,Bb as X,Bd as ri,Ca as Mt,Cb as Z,Db as $,Dl as fo,E as en,Ed as je,El as yt,Fa as o,Fl as Be,Gd as P,Gl as hn,H as tn,Hb as D,Hc as Et,Hl as uo,Ic as oi,Il as At,Jb as we,Jc as F,Jd as Sn,Jl as Oe,Ka as f,Kd as St,Kl as go,Ll as Ge,Mb as d,Md as so,Ml as Dt,Nb as b,Nc as We,Nd as ht,Nl as Ut,O as nn,Ob as _,Od as j,P as on,Pa as R,Pb as to,Pc as Fe,Qa as ln,Sb as E,Sd as z,Sl as kt,Ta as q,Tb as y,Td as K,Tl as Zn,Ub as A,Ud as ie,Ue as po,Ul as Pe,Va as C,Vb as x,Vc as io,Vl as _t,Wb as Gt,Wl as ft,X as rn,Xa as Xt,Zb as He,_b as qe,bc as S,ca as u,cb as Ot,cc as h,da as g,dc as ni,de as co,ib as c,jb as r,kb as a,lb as T,mg as mo,p as Zi,pb as k,pd as Ie,q as $i,qb as w,qd as lo,rb as ke,rd as oe,sb as M,uc as L,vb as I,vd as Xn,wd as Pt,xb as m,yb as sn,zb as cn}from"./chunk-MDNBQXON.js";import{i as Y}from"./chunk-SEDBTTTN.js";var No=["*"];function Bo(n,l){if(n&1&&(r(0,"label",13),d(1),a()),n&2){let e=m();c("for",Gt("app-cms-site-selector-",e.id)),o(),b(e.optionLabel)}}function Oo(n,l){if(n&1&&(T(0,"img",14),S(1,"cmsthumbnail")),n&2){let e=m();c("src",x(h(1,2,e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),Mt)}}function Go(n,l){if(n&1&&(T(0,"img",14),S(1,"cmsthumbnail")),n&2){let e=m().$implicit;c("src",x(h(1,2,e.linkMainImageIdSrc)),Mt)}}function Po(n,l){if(n&1&&(r(0,"mat-option",15),C(1,Go,2,4,"img",5),r(2,"span"),d(3),a()()),n&2){let e=l.$implicit,i=m();c("value",e)("disabled",i.optionDisabled),o(),c("ngIf",e.linkMainImageIdSrc),o(2),b(i.displayOption(e))}}function Ho(n,l){n&1&&T(0,"i",16)}function qo(n,l){n&1&&T(0,"i",17)}function Wo(n,l){if(n&1){let e=M();r(0,"i",18),I("click",function(){u(e);let t=m();return g(t.onActionSelectClear())}),a()}}function jo(n,l){n&1&&(r(0,"em"),d(1),S(2,"translate"),a()),n&2&&(o(),_("(",h(2,1,"TITLE.Necessary"),")"))}var Kt=class Kt{constructor(l,e,i,t,s){this.coreEnumService=l;this.cdr=e;this.publicHelper=i;this.translate=t;this.categoryService=s;this.id=++Kt.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new j;this.dataModelSelect=new Pe;this.formControl=new dn;this.optionDisabled=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionRequired=!1;this.optionLabel="";this.optionChange=new Xt;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(nn(""),en(1500),tn(),on(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return Y(this,null,function*(){let e=new K;e.rowPerPage=20,e.accessLoad=!0;let i=new z;i.propertyName="Title",i.value=l,i.searchType=ri.Contains,i.clauseType=Pt.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new z,i.propertyName="Id",i.value=l,i.searchType=ri.Equal,i.clauseType=Pt.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield Zi(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe($i(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="number"&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess&&(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item))}});return}if(typeof l==typeof Pe){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new Pe,this.loadOptions()}};Kt.nextId=0,Kt.\u0275fac=function(e){return new(e||Kt)(f(U),f(L),f(N),f(V),f(Be))},Kt.\u0275cmp=R({type:Kt,selectors:[["app-ticketing-departemen-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionRequired:"optionRequired",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:No,decls:16,vars:19,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],["class","fa fa-times  action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=M();sn(),r(0,"div",1),T(1,"app-progress-spinner",2),C(2,Bo,2,3,"label",3),r(3,"span",4),C(4,Oo,2,4,"img",5),d(5," \xA0"),a(),T(6,"input",6),r(7,"mat-autocomplete",7,0),I("optionSelected",function(v){return u(t),g(i.onActionSelect(v.option.value))}),C(9,Po,4,4,"mat-option",8),S(10,"async"),a(),C(11,Ho,1,0,"i",9)(12,qo,1,0,"i",10)(13,Wo,1,0,"i",11)(14,jo,3,3,"em",12),cn(15),a()}if(e&2){let t=D(8);o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),o(2),c("ngIf",i.dataModelSelect&&(i.dataModelSelect==null?null:i.dataModelSelect.linkMainImageIdSrc)),o(2),c("placeholder",x(i.optionPlaceholder))("id",Gt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),Ot("disabled",i.optionDisabled?!0:null),o(),c("displayWith",i.displayFn),o(2),c("ngForOf",h(10,17,i.filteredOptions)),o(2),c("ngIf",!i.formControl.valid),o(),c("ngIf",i.optionRequired&&i.formControl.valid),o(),c("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[oi,F,ee,te,Te,pn,Tn,_n,vn,ao,W,H,Fe,B,Qt],encapsulation:2});var Ae=Kt;var Uo=["vform"];function Qo(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",11),A("modelChange",function(t){u(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function zo(n,l){if(n&1){let e=M();r(0,"div",12)(1,"label",13),d(2),S(3,"translate"),a(),r(4,"textarea",14,1),S(6,"translate"),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),g(t)}),d(7,"                "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),b(h(3,6,"TITLE.Answer_Text")),o(2),c("placeholder",x(h(6,8,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)),o(5),_("",e.value.length," / 1000")}}function Ko(n,l){if(n&1){let e=M();r(0,"div",15)(1,"button",16),I("click",function(){u(e);let t=m();return g(t.onActionBackToParent())}),d(2),S(3,"translate"),a(),r(4,"button",17),d(5),S(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),_(" ",h(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),_(" ",h(6,5,"ACTION.SAVE")," ")}}var li=class li extends Tt{constructor(e,i,t,s,v,p,Q,J,xe,Re){super(p,new kt,s,Re);this.data=e;this.dialogRef=i;this.activatedRoute=t;this.publicHelper=s;this.coreEnumService=v;this.ticketingAnswerService=p;this.cmsToastrService=Q;this.router=J;this.cdr=xe;this.translate=Re;this.requestLinkTaskId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new ie;this.fieldsInfo=new Map;this.dataModel=new kt;this.dataModelResult=new j;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new xt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestLinkTaskId=+e.linkTaskId||0)}ngOnInit(){if(this.requestLinkTaskId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.dataModel.linkTaskId=this.requestLinkTaskId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingAnswerService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorAdd(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorAdd(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}};li.\u0275fac=function(i){return new(i||li)(f(ue),f(re),f(Ie),f(N),f(U),f(yt),f(O),f(oe),f(L),f(V))},li.\u0275cmp=R({type:li,selectors:[["app-ticketing-answer-add"]],viewQuery:function(i,t){if(i&1&&X(Uo,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:15,vars:13,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=M();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return u(s),g(t.onFormSubmit())}),C(10,Qo,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),S(12,"translate"),I("optionChange",function(p){return u(s),g(t.onActionSelectSource(p))}),a(),C(13,zo,10,10,"div",9)(14,Ko,7,7,"div",10),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),_(" ",t.formInfo.formTitle," "),o(2),_(" ",h(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",h(12,11,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessAddField)),o(2),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[F,_e,ee,te,Se,ve,Ce,fe,he,W,Me,H,Ae,B],encapsulation:2});var Dn=li;var Jo=["vform"];function Yo(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",11),A("modelChange",function(t){u(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Xo(n,l){if(n&1){let e=M();r(0,"div",12)(1,"label",13),d(2),S(3,"translate"),a(),r(4,"textarea",14,1),S(6,"translate"),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),g(t)}),d(7,"                "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),b(h(3,6,"TITLE.Answer_Text")),o(2),c("placeholder",x(h(6,8,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessEditField)),o(5),_("",e.value.length," / 1000")}}function Zo(n,l){if(n&1){let e=M();r(0,"div",15)(1,"button",16),I("click",function(){u(e);let t=m();return g(t.onActionBackToParent())}),d(2),S(3,"translate"),a(),r(4,"button",17),d(5),S(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),_(" ",h(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),_(" ",h(6,5,"ACTION.SAVE")," ")}}var si=class si extends Lt{constructor(e,i,t,s,v,p,Q,J,xe,Re){super(p,new kt,s,Re);this.data=e;this.dialogRef=i;this.activatedRoute=t;this.publicHelper=s;this.coreEnumService=v;this.ticketingAnswerService=p;this.cmsToastrService=Q;this.router=J;this.cdr=xe;this.translate=Re;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new ie;this.dataModel=new kt;this.dataModelResult=new ht;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new xt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestId=+e.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(e){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.setAccessDataType(St.Editor),this.ticketingAnswerService.ServiceGetOneById(e).subscribe({next:t=>{this.dataAccessModel=t.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.publicHelper.processService.processStop(i),this.dataModelResult=t,this.formInfo.formSubmitAllow=!0,t.isSuccess?this.dataModel=t.item:this.cmsToastrService.typeErrorGetOne(t.errorMessage)},error:t=>{this.publicHelper.processService.processStop(i),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorGetOne(t)}})}DataEditContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingAnswerService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!1})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}}};si.\u0275fac=function(i){return new(i||si)(f(ue),f(re),f(Ie),f(N),f(U),f(yt),f(O),f(oe),f(L),f(V))},si.\u0275cmp=R({type:si,selectors:[["app-ticketing-answer-edit"]],viewQuery:function(i,t){if(i&1&&X(Jo,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:15,vars:13,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=M();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return u(s),g(t.onFormSubmit())}),C(10,Yo,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),S(12,"translate"),I("optionChange",function(p){return u(s),g(t.onActionSelectSource(p))}),a(),C(13,Xo,10,10,"div",9)(14,Zo,7,7,"div",10),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),_(" ",t.formInfo.formTitle," "),o(2),_(" ",h(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",h(12,11,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessEditField)),o(2),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[F,_e,ee,te,Se,ve,Ce,fe,he,W,Me,H,Ae,B],encapsulation:2});var xn=si;var $o=["vform"];function er(n,l){if(n&1){let e=M();r(0,"div",5)(1,"button",10),I("click",function(){u(e);let t=m();return g(t.onFormCancel())}),T(2,"i",11),d(3),S(4,"translate"),a()()}n&2&&(o(3),_(" ",h(4,1,"ACTION.CANCEL")," "))}var ci=class ci{constructor(l,e,i,t,s,v,p,Q,J,xe){this.data=l;this.dialogRef=e;this.coreEnumService=i;this.ticketingAnswerService=t;this.cmsToastrService=s;this.tokenHelper=v;this.cmsStoreService=p;this.cdr=Q;this.publicHelper=J;this.translate=xe;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new jt;this.dataModelResult=new j;this.dataModel=new kt;this.formInfo=new ie;this.dataModelEnumSendSmsStatusTypeResult=new j;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(l=>{this.formInfo.formTitle=l}),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.tokenInfo=l})),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:l=>{this.dataModelEnumSendSmsStatusTypeResult=l}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,console.log(this.dataModel),e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};ci.\u0275fac=function(e){return new(e||ci)(f(ue),f(re),f(U),f(yt),f(O),f(le),f(ae),f(L),f(N),f(V))},ci.\u0275cmp=R({type:ci,selectors:[["app-ticketing-answer-view"]],viewQuery:function(e,i){if(e&1&&X($o,5),e&2){let t;Z(t=$())&&(i.formGroup=t.first)}},standalone:!1,decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(r(0,"div",0),d(1),a(),r(2,"div",1),T(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),a(),r(5,"div",4)(6,"div",5)(7,"small",6),d(8),a(),r(9,"small",7),d(10),a()()(),r(11,"div",8),C(12,er,5,3,"div",9),a()),e&2&&(o(),_(" ",i.formInfo.formTitle," "),o(2),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("dataModel",i.dataModel)("optionMethod",1),o(4),_("",i.formInfo.formAlert," "),o(2),_("",i.formInfo.formError," "),o(2),c("ngIf",i.formInfo.formSubmitAllow))},dependencies:[F,H,xo,B],encapsulation:2});var Rn=ci;function tr(n,l){n&1&&T(0,"div",10)}function ir(n,l){if(n&1&&(r(0,"div",4)(1,"div",5)(2,"b"),d(3),S(4,"translate"),a(),d(5,": "),a(),T(6,"div",15)(7,"div",12)(8,"div",11),a()),n&2){let e=m();o(3),_("",h(4,2,"TITLE.Description")," "),o(3),c("innerText",e.dataModelResult.item.htmlBody)}}var di=class di{constructor(l,e,i,t,s,v,p,Q){this.headerService=l;this.publicHelper=e;this.cdr=i;this.cmsToastrService=t;this.dialog=s;this.translate=v;this.cmsStoreService=p;this.tokenHelper=Q;this.constructorInfoAreaId=this.constructor.name;this.optionId=0;this.dataModelResult=new j;this.fieldsInfo=new Map;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.optionId>0&&this.DataGetOneContent(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.DataGetOneContent()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.headerService.setAccessLoad(),this.headerService.ServiceGetOneById(this.optionId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess?this.dataModelResult=e:this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l)}})}};di.\u0275fac=function(e){return new(e||di)(f(Ge),f(N),f(L),f(O),f(ye),f(V),f(ae),f(le))},di.\u0275cmp=R({type:di,selectors:[["app-ticketing-task-header"]],inputs:{optionId:"optionId"},standalone:!1,decls:33,vars:11,consts:[[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content"],[1,"table"],[1,"tr"],[1,"td","small-width"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"],[1,"td","large-width",2,"color","darkblue"],["class","td",4,"ngIf"],[1,"td","large-width"],[1,"td"],[2,"clear","both"],[1,"td",2,"text-align","left"],["class","tr",4,"ngIf"],[1,"divider","divider-margins"],[1,"td","large-width",3,"innerText"]],template:function(e,i){e&1&&(r(0,"div",0),T(1,"app-progress-spinner",1),r(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),T(6,"span",6),a(),r(7,"div",7)(8,"h5")(9,"b"),d(10),S(11,"translate"),a()()(),C(12,tr,1,0,"div",8),a(),r(13,"div",4)(14,"div",5)(15,"b"),d(16),a(),d(17,": "),a(),r(18,"div",9),d(19),a(),T(20,"div",10)(21,"div",11),a(),r(22,"div",4)(23,"div",5)(24,"b"),d(25),a(),d(26,": "),a(),r(27,"div",9),d(28),a(),T(29,"div",12)(30,"div",11),a(),C(31,ir,9,4,"div",13),a()()(),T(32,"div",14)),e&2&&(o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(5),c("inlineSVG","./assets/media/svg/icons/Communication/Flag.svg"),o(4),_(" ",h(11,9,"TITLE.Selected_Ticket")," "),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.item==null?null:i.dataModelResult.item.id),o(4),_("",i.fieldsInfo.id==null?null:i.fieldsInfo.id.fieldTitle," "),o(3),b(i.dataModelResult==null||i.dataModelResult.item==null?null:i.dataModelResult.item.id),o(6),_("",i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle," "),o(3),b(i.dataModelResult==null||i.dataModelResult.item==null?null:i.dataModelResult.item.title),o(3),c("ngIf",(i.dataModelResult==null||i.dataModelResult.item==null||i.dataModelResult.item.htmlBody==null?null:i.dataModelResult.item.htmlBody.length)>0))},dependencies:[F,H,Ao,B],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40A1F5;padding:2px;background:#fff;border-radius:5px}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f577;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40A1F5;color:#3d7c7a}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.small-width[_ngcontent-%COMP%]{width:90px}.large-width[_ngcontent-%COMP%]{width:400px}.clear[_ngcontent-%COMP%]{clear:both}"]});var Ln=di;var or=()=>[5,10,20,100],rr=n=>({background:n});function ar(n,l){if(n&1&&T(0,"app-ticketing-task-header",39),n&2){let e=m();c("optionId",e.requestLinkTaskId)}}function lr(n,l){if(n&1){let e=M();r(0,"a",40),I("click",function(){u(e);let t=m();return g(t.onActionBackToParent())}),T(1,"i",41),a()}}function sr(n,l){if(n&1){let e=M();r(0,"div",42)(1,"a",43),I("click",function(){u(e);let t=m();return g(t.onActionButtonNewRow())}),T(2,"i",44)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.ADD")))}function cr(n,l){if(n&1){let e=M();r(0,"div",42)(1,"a",46),I("click",function(){u(e);let t=m();return g(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",47)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.EDIT")))}function dr(n,l){if(n&1){let e=M();r(0,"div",42)(1,"a",48),I("click",function(){u(e);let t=m();return g(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",49)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.DELETE")))}function pr(n,l){if(n&1){let e=M();r(0,"div",42)(1,"a",50),I("click",function(){u(e);let t=m();return g(t.onActionButtonViewRow(t.tableRowSelected))}),T(2,"i",51)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.VIEW")))}function mr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function fr(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.id," ")}}function ur(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.linkTaskId==null?null:e.fieldsInfo.linkTaskId.fieldTitle," ")}}function gr(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.linkTaskId," ")}}function Sr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function hr(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.linkMemberId," ")}}function _r(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Tr(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),_(" ",h(2,1,e.createdDate)," ")}}function vr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Cr(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),_(" ",h(2,1,e.updatedDate)," ")}}function Ir(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.answerStatus==null?null:e.fieldsInfo.answerStatus.fieldTitle," ")}}function br(n,l){if(n&1&&(r(0,"mat-cell",53),d(1),S(2,"enums"),a()),n&2){let e=l.$implicit,i=m();c("ngStyle",qe(5,rr,i.publicHelper.RowStyleAnswerStatus(e.ticketStatus))),o(),_(" ",ni(2,2,e.answerStatus,i.dataModelEnumAnswerStatusResult.listItems)," ")}}function Mr(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),_(" ",h(2,1,"TITLE.OPTION")," "))}function kr(n,l){if(n&1&&(r(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5),i=m();o(),c("matMenuTriggerFor",e)("disabled",!i.dataModelResult.access.accessEditRow&&!i.dataModelResult.access.accessDeleteRow)}}function wr(n,l){n&1&&T(0,"mat-header-row")}function Er(n,l){if(n&1){let e=M();r(0,"mat-row",56),I("click",function(){let t=u(e).$implicit,s=m();return g(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=l.dataIndex,t=m();we("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var pi=class pi extends st{constructor(e,i,t,s,v,p,Q,J,xe,Re,wt,mt,ji){super(e,new kt,mt,p,xe);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=v;this.tokenHelper=p;this.cdr=Q;this.cmsStoreService=J;this.translate=xe;this.ticketingEnumService=Re;this.pageInfo=wt;this.publicHelper=mt;this.dialog=ji;this.requestLinkTaskId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.dataModelEnumAnswerStatusResult=new j;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkTaskId","LinkMemberId","CreatedDate","UpdatedDate","AnswerStatus"];this.tabledisplayedColumnsMobileSource=["Id","LinkTaskId","LinkMemberId","CreatedDate","UpdatedDate","AnswerStatus"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Yn=>this.onSubmitOptionsSearch(Yn)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Ascending}ngOnInit(){this.requestLinkTaskId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkTaskId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.getEnumAnswerStatus(),this.tokenInfo=e,this.DataGetAll()})),this.getEnumAnswerStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}getEnumAnswerStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:e=>{this.dataModelEnumAnswerStatusResult=e}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new kt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),t=new z;this.requestLinkTaskId>0&&(t.propertyName="LinkTaskId",t.value=this.requestLinkTaskId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTaskId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestLinkTaskId==null||this.requestLinkTaskId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Dn,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{linkTaskId:this.requestLinkTaskId>0?this.requestLinkTaskId:this.categoryModelSelected.id}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Rn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(xn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let v=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(v,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(v)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(v)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/task/"])}};pi.\u0275fac=function(i){return new(i||pi)(f(yt),f(Ie),f(O),f(Rt),f(oe),f(le),f(L),f(ae),f(V),f(Ut),f(lt),f(N),f(ye))},pi.\u0275cmp=R({type:pi,selectors:[["app-ticketing-answer-list"]],standalone:!1,features:[q],decls:59,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionId",4,"ngIf"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkTaskId"],["matColumnDef","LinkMemberId"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","AnswerStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[3,"optionId"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","box-shadow-button","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor","disabled"],[3,"click"]],template:function(i,t){if(i&1){let s=M();C(0,ar,1,1,"app-ticketing-task-header",3),r(1,"app-cms-html-list",4),A("optionActionGuideNoticeDisplayChange",function(p){return u(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),g(p)}),I("optionOnActionButtonMemoRow",function(){return u(s),g(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),g(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),g(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),g(t.onActionButtonPrintRow())}),k(2,5),d(3," -------------------------------------- "),w(),ke(4,6)(5,7),k(6,8),C(7,lr,2,0,"a",9),r(8,"a",10),I("click",function(){return u(s),g(t.viewGuideNotice=!t.viewGuideNotice)}),T(9,"i",11),a(),r(10,"a",10),I("click",function(){return u(s),g(t.onActionButtonReload())}),T(11,"i",12),a(),w(),k(12,13),r(13,"a",14),I("click",function(){return u(s),g(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(14,"mat-slide-toggle",15),d(15),S(16,"translate"),a(),r(17,"a",14),I("click",function(){return u(s),g(t.onActionButtonStatist())}),T(18,"mat-slide-toggle",15),d(19),S(20,"translate"),a(),w(),k(21,16),C(22,sr,7,3,"div",17),w(),k(23,18),C(24,cr,7,3,"div",17)(25,dr,7,3,"div",17)(26,pr,7,3,"div",17),w(),k(27,19),r(28,"app-cms-search-list",20),A("optionsChange",function(p){return u(s),y(t.optionsSearch,p)||(t.optionsSearch=p),g(p)}),a(),r(29,"app-cms-statist-list",20),A("optionsChange",function(p){return u(s),y(t.optionsStatist,p)||(t.optionsStatist=p),g(p)}),a(),w(),k(30,21),r(31,"mat-table",22,0),I("matSortChange",function(){u(s);let p=D(32);return g(t.onTableSortData(p))}),k(33,23),C(34,mr,2,1,"mat-header-cell",24)(35,fr,2,1,"mat-cell",25),w(),k(36,26),C(37,ur,2,1,"mat-header-cell",24)(38,gr,2,1,"mat-cell",25),w(),k(39,27),C(40,Sr,2,1,"mat-header-cell",24)(41,hr,2,1,"mat-cell",25),w(),k(42,28),C(43,_r,2,1,"mat-header-cell",24)(44,Tr,3,3,"mat-cell",25),w(),k(45,29),C(46,vr,2,1,"mat-header-cell",24)(47,Cr,3,3,"mat-cell",25),w(),k(48,30),C(49,Ir,2,1,"mat-header-cell",24)(50,br,3,7,"mat-cell",31),w(),k(51,32),C(52,Mr,3,3,"mat-header-cell",33)(53,kr,6,2,"mat-cell",34),w(),C(54,wr,1,0,"mat-header-row",35)(55,Er,1,6,"mat-row",36),a(),w(),k(56,37),r(57,"mat-paginator",38,1),I("page",function(p){return u(s),g(t.onTablePageingData(p))}),a(),w(),a()}i&2&&(c("ngIf",t.requestLinkTaskId>0),o(),c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestLinkTaskId>0),o(7),c("checked",t.optionsSearch.data.show),o(),_("",h(16,26,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),_("",h(20,28,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(23),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(30,or)))},dependencies:[F,We,Ve,Ne,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Ln,B,ai,Ct],encapsulation:2});var Ui=pi;var Ar=["vform"];function Dr(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",14),A("modelChange",function(t){u(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function xr(n,l){n&1&&T(0,"i",21)}function Rr(n,l){n&1&&T(0,"i",22)}function Lr(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function Fr(n,l){if(n&1){let e=M();r(0,"div",15)(1,"label",16),d(2),a(),r(3,"input",17,1),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),g(t)}),a(),C(5,xr,1,0,"i",18)(6,Rr,1,0,"i",19),r(7,"em"),d(8),a(),C(9,Lr,5,4,"mat-error",20),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Vr(n,l){if(n&1&&(T(0,"img",23),S(1,"cmsthumbnail")),n&2){let e=m();c("src",x(h(1,2,e.dataModel.linkMainImageIdSrc)),Mt)}}function Nr(n,l){if(n&1){let e=M();r(0,"div",15)(1,"label",24),I("click",function(){u(e);let t=m();return g(t.fileManagerOpenForm=!0)}),d(2),S(3,"translate"),a(),r(4,"input",25,2),S(6,"translate"),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),g(t)}),I("click",function(){u(e);let t=m();return g(t.fileManagerOpenForm=!0)}),a(),r(7,"cms-file-manager",26),I("itemSelected",function(t){u(e);let s=m();return g(s.onActionFileSelected(t))}),A("openFormChange",function(t){u(e);let s=m();return y(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),g(t)}),a()()}if(n&2){let e=m();o(2),b(h(3,12,"TITLE.Icon_File")),o(2),c("placeholder",x(h(6,14,"TITLE.Original_File_ID"))),E("ngModel",e.dataModel.linkMainImageId),o(3),c("language",e.appLanguage)("isPopup",!0),E("openForm",e.fileManagerOpenForm),c("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Br(n,l){if(n&1){let e=M();r(0,"div",27)(1,"button",28),I("click",function(){u(e);let t=m();return g(t.onFormCancel())}),T(2,"i",29),d(3),S(4,"translate"),a(),r(5,"button",30),T(6,"i",31),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),_(" ",h(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),_(" ",h(8,5,"ACTION.SAVE")," ")}}var Ci=class Ci extends Lt{constructor(e,i,t,s,v,p,Q,J){super(s,new Pe,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingDepartemenService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new ht;this.dataModel=new Pe;this.formInfo=new ie;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(St.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ci.\u0275fac=function(i){return new(i||Ci)(f(ue),f(re),f(U),f(Be),f(O),f(N),f(L),f(V))},Ci.\u0275cmp=R({type:Ci,selectors:[["app-ticketing-departemen-edit"]],viewQuery:function(i,t){if(i&1&&X(Ar,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:18,vars:14,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return u(s),g(t.onFormSubmit())}),C(10,Dr,1,5,"app-cms-enum-record-status-selector",8)(11,Fr,10,9,"div",9),r(12,"div",10)(13,"a",11),S(14,"cmsthumbnail"),C(15,Vr,2,4,"img",12),a()(),C(16,Nr,8,16,"div",9)(17,Br,9,7,"div",13),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),_(" ",t.formInfo.formTitle," "),o(2),_(" ",h(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(2),c("href",x(h(14,12,t.dataModel.linkMainImageIdSrc)),Mt),o(2),c("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),o(),c("ngIf",t.fieldsInfo.linkMainImageId==null?null:t.fieldsInfo.linkMainImageId.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[F,_e,ee,te,Se,Te,ve,Ce,fe,he,Ee,W,Me,H,kn,B,Qt],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var Wt=Ci;var Or=["vform"];function Gr(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",14),A("modelChange",function(t){u(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Pr(n,l){n&1&&T(0,"i",21)}function Hr(n,l){n&1&&T(0,"i",22)}function qr(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function Wr(n,l){if(n&1){let e=M();r(0,"div",15)(1,"label",16),d(2),a(),r(3,"input",17,1),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),g(t)}),a(),C(5,Pr,1,0,"i",18)(6,Hr,1,0,"i",19),r(7,"em"),d(8),a(),C(9,qr,5,4,"mat-error",20),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function jr(n,l){if(n&1&&(T(0,"img",23),S(1,"cmsthumbnail")),n&2){let e=m();c("src",x(h(1,2,e.dataModel.linkMainImageIdSrc)),Mt)}}function Ur(n,l){if(n&1){let e=M();r(0,"div",15)(1,"label",24),I("click",function(){u(e);let t=m();return g(t.fileManagerOpenForm=!0)}),d(2),S(3,"translate"),a(),r(4,"input",25,2),S(6,"translate"),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),g(t)}),I("click",function(){u(e);let t=m();return g(t.fileManagerOpenForm=!0)}),a(),r(7,"cms-file-manager",26),I("itemSelected",function(t){u(e);let s=m();return g(s.onActionFileSelected(t))}),A("openFormChange",function(t){u(e);let s=m();return y(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),g(t)}),a()()}if(n&2){let e=m();o(2),b(h(3,12,"TITLE.Icon_File")),o(2),c("placeholder",x(h(6,14,"TITLE.Original_File_ID"))),E("ngModel",e.dataModel.linkMainImageId),o(3),c("language",e.appLanguage)("isPopup",!0),E("openForm",e.fileManagerOpenForm),c("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Qr(n,l){if(n&1){let e=M();r(0,"div",27)(1,"button",28),I("click",function(){u(e);let t=m();return g(t.onFormCancel())}),T(2,"i",29),d(3),S(4,"translate"),a(),r(5,"button",30),T(6,"i",31),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),_(" ",h(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),_(" ",h(8,5,"ACTION.SAVE")," ")}}var Ii=class Ii extends Tt{constructor(e,i,t,s,v,p,Q,J){super(s,new Pe,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingDepartemenService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new j;this.dataModel=new Pe;this.formInfo=new ie;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ii.\u0275fac=function(i){return new(i||Ii)(f(ue),f(re),f(U),f(Be),f(O),f(N),f(L),f(V))},Ii.\u0275cmp=R({type:Ii,selectors:[["app-ticketing-departemen-add"]],viewQuery:function(i,t){if(i&1&&X(Or,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:18,vars:14,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return u(s),g(t.onFormSubmit())}),C(10,Gr,1,5,"app-cms-enum-record-status-selector",8)(11,Wr,10,9,"div",9),r(12,"div",10)(13,"a",11),S(14,"cmsthumbnail"),C(15,jr,2,4,"img",12),a()(),C(16,Ur,8,16,"div",9)(17,Qr,9,7,"div",13),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),_(" ",t.formInfo.formTitle," "),o(2),_(" ",h(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(2),c("href",x(h(14,12,t.dataModel.linkMainImageIdSrc)),Mt),o(2),c("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),o(),c("ngIf",t.fieldsInfo.linkMainImageId==null?null:t.fieldsInfo.linkMainImageId.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[F,_e,ee,te,Se,Te,ve,Ce,fe,he,Ee,W,Me,H,kn,B,Qt],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var bi=Ii;var zr=["vform"];function Kr(n,l){if(n&1){let e=M();k(0),r(1,"div",7)(2,"label",8),d(3),a(),r(4,"input",9,0),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModelResultCategory.item.title,t)||(s.dataModelResultCategory.item.title=t),g(t)}),a()(),w()}if(n&2){let e=m();o(3),b(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)),E("ngModel",e.dataModelResultCategory.item.title)}}function Jr(n,l){if(n&1){let e=M();r(0,"div",10)(1,"button",11),I("click",function(){u(e);let t=m();return g(t.onFormCancel())}),T(2,"i",12),d(3),S(4,"translate"),a(),r(5,"button",13),I("click",function(){u(e);let t=m();return g(t.onFormDelete())}),T(6,"i",14),d(7),S(8,"translate"),a()()}if(n&2){let e=m();o(3),_(" ",h(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.formInfo.buttonSubmittedEnabled),o(2),_(" ",h(8,5,"ACTION.DELETE")," ")}}var Mi=class Mi{constructor(l,e,i,t,s,v,p){this.data=l;this.dialogRef=e;this.publicHelper=i;this.ticketingDepartemenService=t;this.cdr=s;this.translate=v;this.cmsToastrService=p;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResultCategory=new j;this.dataModelResultCategoryAllData=new j;this.dataModel={};this.formInfo=new ie;this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.requestId<=0){this.cmsToastrService.typeErrorDeleteRowIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(),this.DataGetAll()}DataGetOne(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.translate.get("TITLE.Loading_Information").subscribe(e=>{this.formInfo.formAlert=e});let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(St.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResultCategory=e,e.isSuccess?this.formInfo.formAlert="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorGetOne()),this.formInfo.formErrorStatus=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l)}})}DataGetAll(){this.translate.get("TITLE.Loading_Information").subscribe(i=>{this.formInfo.formAlert=i});let l=new K;l.rowPerPage=100;let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceGetAll(l).subscribe({next:i=>{this.dataModelResultCategoryAllData=i,i.isSuccess?this.formInfo.formAlert="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorGetAll()),this.publicHelper.processService.processStop(e)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormDelete(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.formInfo.formSubmitAllow=!1,this.formInfo.buttonSubmittedEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceDelete(this.requestId).subscribe({next:e=>{this.formInfo.formSubmitAllow=!e.isSuccess,e.isSuccess?(this.translate.get("MESSAGE.Deletion_Was_Successful").subscribe(i=>{this.formInfo.formAlert=i}),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.buttonSubmittedEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(e),this.formInfo.buttonSubmittedEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormChangeNewCatId(l){if(this.formInfo.formAlert="",this.requestId===0||!l||l.id<=0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.dataModel.newCatId=l.id,this.dataModel.newCatId===this.requestId?(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.formError=e}),this.formInfo.buttonSubmittedEnabled=!1):(this.formInfo.buttonSubmittedEnabled=!0,this.formInfo.formError="")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Mi.\u0275fac=function(e){return new(e||Mi)(f(ue),f(re),f(N),f(Be),f(L),f(V),f(O))},Mi.\u0275cmp=R({type:Mi,selectors:[["app-ticketing-departemen-delete"]],viewQuery:function(e,i){if(e&1&&X(zr,5),e&2){let t;Z(t=$())&&(i.formGroup=t.first)}},standalone:!1,decls:10,vars:7,consts:[["Title",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModelResultCategory.item.title",1,"color-highlight"],["matInput","","type","text","name","dataModelResultCategory.item.title","id","dataModelResultCategory.item.title","minlength","3","maxlength","50","readonly","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click","disabled"],[1,"fa","fa-check-square-o"]],template:function(e,i){e&1&&(r(0,"div",1),T(1,"app-progress-spinner",2),r(2,"div",3)(3,"p",4),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),C(8,Kr,6,4,"ng-container",5)(9,Jr,9,7,"div",6),a()()),e&2&&(o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(3),_(" ",i.formInfo.formTitle," "),o(2),_(" ",h(7,5,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),c("ngIf",i.dataModelResultCategory==null?null:i.dataModelResultCategory.item),o(),c("ngIf",i.formInfo.formSubmitAllow))},dependencies:[F,ee,te,ve,Ce,fe,W,H,B],encapsulation:2});var ki=Mi;var Yr=()=>[5,10,20,100],Xr=n=>({display:n});function Zr(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",44),I("click",function(){u(e);let t=m();return g(t.onActionButtonNewRow())}),T(2,"i",45)(3,"br"),a(),r(4,"p",20),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.ADD")))}function $r(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",46),I("click",function(){u(e);let t=m();return g(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",47)(3,"br"),a(),r(4,"p",20),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.EDIT")))}function ea(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",48),I("click",function(){u(e);let t=m();return g(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",49)(3,"br"),a(),r(4,"p",20),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.DELETE")))}function ta(n,l){n&1&&(r(0,"mat-header-cell",50),d(1),S(2,"translate"),a()),n&2&&(o(),_(" ",h(2,1,"TITLE.PICTURE")," "))}function ia(n,l){if(n&1&&(T(0,"img",52),S(1,"cmsthumbnail")),n&2){let e=m().$implicit;c("src",x(h(1,2,e.linkMainImageIdSrc)),Mt)}}function na(n,l){if(n&1&&(r(0,"mat-cell"),C(1,ia,2,4,"img",51),a()),n&2){let e=l.$implicit;o(),c("ngIf",(e==null||e.linkMainImageIdSrc==null?null:e.linkMainImageIdSrc.length)>0)}}function oa(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function ra(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.id," ")}}function aa(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function la(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),_(" ",h(3,3,h(2,1,e.linkSiteId))," ")}}function sa(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function ca(n,l){if(n&1&&T(0,"select",55),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,Xr,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function da(n,l){if(n&1&&(r(0,"mat-cell",53),S(1,"statusCellClass"),T(2,"i",53),S(3,"statusIconClass"),C(4,ca,1,5,"select",54),a()),n&2){let e=l.$implicit,i=m();c("ngClass",h(1,3,e.recordStatus)),o(2),c("ngClass",h(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function pa(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function ma(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.title," ")}}function fa(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function ua(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),_(" ",h(2,1,e.createdDate)," ")}}function ga(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Sa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),_(" ",h(2,1,e.updatedDate)," ")}}function ha(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),_(" ",h(2,1,"TITLE.OPTION")," "))}function _a(n,l){if(n&1&&(r(0,"mat-cell",56)(1,"button",57)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Ta(n,l){n&1&&T(0,"mat-header-row")}function va(n,l){if(n&1){let e=M();r(0,"mat-row",58),I("click",function(){let t=u(e).$implicit,s=m();return g(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=l.dataIndex,t=m();we("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var wi=class wi extends st{constructor(e,i,t,s,v,p,Q,J,xe,Re){super(e,new Pe,xe,s,p);this.contentService=e;this.cmsToastrService=i;this.router=t;this.tokenHelper=s;this.cdr=v;this.translate=p;this.cmsStoreService=Q;this.pageInfo=J;this.publicHelper=xe;this.dialog=Re;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["LinkMainImageIdSrc","Id","RecordStatus"];this.tabledisplayedColumnsMobileSource=["LinkMainImageIdSrc","Id","RecordStatus"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:wt=>this.onSubmitOptionsSearch(wt)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Pe);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess&&(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(bi,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Wt,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(ki,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonFaqList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/faq/",this.tableRowSelected.id])}onActionButtonTemplateList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/template/",this.tableRowSelected.id])}onActionButtonLogList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/departemenlog/DepartemenId/",this.tableRowSelected.id])}onActionButtonTaskList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/task/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}};wi.\u0275fac=function(i){return new(i||wi)(f(Be),f(O),f(oe),f(le),f(L),f(V),f(ae),f(lt),f(N),f(ye))},wi.\u0275cmp=R({type:wi,selectors:[["app-ticketing-departemen-list"]],standalone:!1,features:[q],decls:87,vars:40,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-ticket","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-question","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-memo","font-18",2,"color","#ffffff"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","LinkMainImageIdSrc"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Id"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","40","width","40",3,"src",4,"ngIf"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return u(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),g(p)}),I("optionOnActionButtonMemoRow",function(){return u(s),g(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),g(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),g(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),g(t.onActionButtonPrintRow())}),k(1,4),d(2," -------------------------------------- "),w(),ke(3,5)(4,6),k(5,7),r(6,"a",8),I("click",function(){return u(s),g(t.viewGuideNotice=!t.viewGuideNotice)}),T(7,"i",9),a(),r(8,"a",8),I("click",function(){return u(s),g(t.onActionButtonReload())}),T(9,"i",10),a(),w(),k(10,11),r(11,"a",12),I("click",function(){return u(s),g(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(12,"mat-slide-toggle",13),d(13),S(14,"translate"),a(),r(15,"a",12),I("click",function(){return u(s),g(t.onActionButtonStatist())}),T(16,"mat-slide-toggle",13),d(17),S(18,"translate"),a(),w(),k(19,14),C(20,Zr,7,3,"div",15),w(),k(21,16),C(22,$r,7,3,"div",15)(23,ea,7,3,"div",15),r(24,"div",17)(25,"a",18),I("click",function(){return u(s),g(t.onActionButtonTaskList(t.tableRowSelected))}),T(26,"i",19)(27,"br"),a(),r(28,"p",20),d(29),S(30,"translate"),a()(),r(31,"div",17)(32,"a",18),I("click",function(){return u(s),g(t.onActionButtonFaqList(t.tableRowSelected))}),T(33,"i",21)(34,"br"),a(),r(35,"p",20),d(36),S(37,"translate"),a()(),r(38,"div",17)(39,"a",18),I("click",function(){return u(s),g(t.onActionButtonTemplateList(t.tableRowSelected))}),T(40,"i",22)(41,"br"),a(),r(42,"p",20),d(43),S(44,"translate"),a()(),r(45,"div",17)(46,"a",18),I("click",function(){return u(s),g(t.onActionButtonLogList(t.tableRowSelected))}),T(47,"i",22)(48,"br"),a(),r(49,"p",20),d(50),S(51,"translate"),a()(),w(),k(52,23),r(53,"app-cms-search-list",24),A("optionsChange",function(p){return u(s),y(t.optionsSearch,p)||(t.optionsSearch=p),g(p)}),a(),r(54,"app-cms-statist-list",24),A("optionsChange",function(p){return u(s),y(t.optionsStatist,p)||(t.optionsStatist=p),g(p)}),a(),w(),k(55,25),r(56,"mat-table",26,0),I("matSortChange",function(){u(s);let p=D(57);return g(t.onTableSortData(p))}),k(58,27),C(59,ta,3,3,"mat-header-cell",28)(60,na,2,1,"mat-cell",29),w(),k(61,30),C(62,oa,2,1,"mat-header-cell",28)(63,ra,2,1,"mat-cell",29),w(),k(64,31),C(65,aa,2,1,"mat-header-cell",28)(66,la,4,5,"mat-cell",29),w(),k(67,32),C(68,sa,2,1,"mat-header-cell",28)(69,da,5,7,"mat-cell",33),w(),k(70,34),C(71,pa,2,1,"mat-header-cell",28)(72,ma,2,1,"mat-cell",29),w(),k(73,35),C(74,fa,2,1,"mat-header-cell",28)(75,ua,3,3,"mat-cell",29),w(),k(76,36),C(77,ga,2,1,"mat-header-cell",28)(78,Sa,3,3,"mat-cell",29),w(),k(79,37),C(80,ha,3,3,"mat-header-cell",38)(81,_a,6,1,"mat-cell",39),w(),C(82,Ta,1,0,"mat-header-row",40)(83,va,1,6,"mat-row",41),a(),w(),k(84,42),r(85,"mat-paginator",43,1),I("page",function(p){return u(s),g(t.onTablePageingData(p))}),a(),w(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.departemen.list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(12),c("checked",t.optionsSearch.data.show),o(),_("",h(14,27,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),_("",h(18,29,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(6),b(h(30,31,"ACTION.TICKETS")),o(7),b(h(37,33,"ACTION.QUESTIONS")),o(7),b(h(44,35,"ACTION.TEMPLATES")),o(7),_(" ",h(51,37,"ACTION.LOGS")),o(3),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(26),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(39,Yr)))},dependencies:[Et,F,We,Ve,Ne,W,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Ft,Fe,B,vt,Qt,Ct,Vt,Nt],encapsulation:2});var Fn=wi;function Ca(n,l){if(n&1){let e=M();r(0,"button",13),I("click",function(){u(e);let t=m();return g(t.onActionAdd())}),d(1),S(2,"translate"),a()}n&2&&(o(),b(h(2,1,"ACTION.ADD")))}function Ia(n,l){if(n&1){let e=M();r(0,"button",14),I("click",function(){u(e);let t=m();return g(t.onActionEdit())}),d(1),S(2,"translate"),a()}n&2&&(o(),b(h(2,1,"ACTION.EDIT")))}function ba(n,l){if(n&1){let e=M();r(0,"button",15),I("click",function(){u(e);let t=m();return g(t.onActionDelete())}),d(1),S(2,"translate"),a()}n&2&&(o(),b(h(2,1,"ACTION.DELETE")))}function Ma(n,l){if(n&1){let e=M();r(0,"button",16),I("click",function(){u(e);let t=m();return g(t.onActionButtonReload())}),r(1,"mat-icon",17),S(2,"translate"),d(3,"refresh"),a()()}n&2&&(o(),c("title",x(h(2,2,"ACTION.RELOAD"))))}function ka(n,l){if(n&1){let e=M();r(0,"mat-tree-node",18),I("click",function(){let t=u(e).$implicit,s=m();return g(s.onActionSelect(t))}),T(1,"button",19),d(2),a()}if(n&2){let e=l.$implicit,i=l.dataIndex,t=m();we("ntk-tree-odd",i%2)("ntk-tree-even",!(i%2))("ntk-tree-selected",t.dataModelSelect.id>0&&t.dataModelSelect.id===e.id),o(2),_(" ",e.title," ")}}function wa(n,l){if(n&1){let e=M();r(0,"mat-nested-tree-node")(1,"li")(2,"div",20),I("click",function(){let t=u(e).$implicit,s=m();return g(s.onActionSelect(t))}),r(3,"button",21),I("click",function(){let t=u(e).$implicit,s=m();return g(s.onActionSelect(t))}),r(4,"mat-icon",22),d(5),a()(),d(6),a(),r(7,"ul"),ke(8,23),a()()()}if(n&2){let e=l.$implicit,i=m();o(2),we("ntk-tree-selected",i.dataModelSelect.id>0&&i.dataModelSelect.id===e.id),o(),Ot("aria-label","Toggle "+e.title),o(2),_(" ",i.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),o(),_(" ",e.title," "),o(),we("category-tree-invisible",!i.treeControl.isExpanded(e))}}var Ei=class Ei{constructor(l,e,i,t,s,v,p,Q,J){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.dialog=t;this.cdr=s;this.publicHelper=v;this.tokenHelper=p;this.cmsStoreService=Q;this.translate=J;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new Pe;this.dataModelResult=new j;this.filterModel=new K;this.treeControl=new _o(l=>null);this.dataSource=new wo;this.optionChange=new Xt;this.optionReload=()=>this.onActionButtonReload();this.hasChild=(l,e)=>!1;this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){setTimeout(()=>{this.DataGetAll()},500),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess&&(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new Pe,this.DataGetAll()}onActionSelectForce(l){}onActionAdd(){var l="";this.publicHelper.isMobile?l="dialog-fullscreen":l="dialog-min",this.dialog.open(bi,{height:"90%",panelClass:l,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(i=>{i&&i.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let l=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(l=this.dataModelSelect.id),l===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Wt,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let l=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(l=this.dataModelSelect.id),l===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(ki,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}};Ei.\u0275fac=function(e){return new(e||Ei)(f(O),f(U),f(Be),f(ye),f(L),f(N),f(le),f(ae),f(V))},Ei.\u0275cmp=R({type:Ei,selectors:[["app-ticketing-departemen-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:15,vars:14,consts:[[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[1,"category-tree","cursor-pointer",3,"dataSource","treeControl"],["matTreeNodePadding","",3,"ntk-tree-odd","ntk-tree-even","ntk-tree-selected","click",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding","",3,"click"],["type","button","mat-icon-button","","disabled",""],[1,"mat-tree-node",3,"click"],["type","button","mat-icon-button","","matTreeNodeToggle","",3,"click"],[1,"mat-icon-rtl-mirror"],["matTreeNodeOutlet",""]],template:function(e,i){e&1&&(r(0,"app-cms-html-tree",0),k(1,1),d(2),S(3,"translate"),w(),k(4,2),C(5,Ca,3,3,"button",3)(6,Ia,3,3,"button",4)(7,ba,3,3,"button",5)(8,Ma,4,4,"button",6),w(),k(9,7),T(10,"app-progress-spinner",8),r(11,"mat-tree",9),C(12,ka,3,7,"mat-tree-node",10)(13,wa,9,7,"mat-nested-tree-node",11),a(),w(),ke(14,12),a()),e&2&&(c("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),o(2),_(" ",h(3,12,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),o(3),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessAddRow),o(),c("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)&&(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessDeleteRow)&&(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessWatchRow),o(2),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("dataSource",i.dataSource)("treeControl",i.treeControl),o(2),c("matTreeNodeDefWhen",i.hasChild))},dependencies:[F,Ve,Ne,Co,vo,Io,ko,Mo,To,bo,H,Ro,B],encapsulation:2});var Bt=Ei;var Ea=()=>[5,10,20,100],ya=n=>({display:n});function Aa(n,l){if(n&1){let e=M();r(0,"a",40),I("click",function(){u(e);let t=m();return g(t.onActionBackToParent())}),T(1,"i",41),a()}}function Da(n,l){if(n&1){let e=M();r(0,"div",42)(1,"a",43),I("click",function(){u(e);let t=m();return g(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",44)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.EDIT")))}function xa(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Ra(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.id," ")}}function La(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Fa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),_(" ",h(3,3,h(2,1,e.linkSiteId))," ")}}function Va(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.linkSourceId==null?null:e.fieldsInfo.linkSourceId.fieldTitle," ")}}function Na(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.linkSourceId," ")}}function Ba(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Oa(n,l){if(n&1&&T(0,"select",49),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,ya,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Ga(n,l){if(n&1&&(r(0,"mat-cell",47),S(1,"statusCellClass"),T(2,"i",47),S(3,"statusIconClass"),C(4,Oa,1,5,"select",48),a()),n&2){let e=l.$implicit,i=m();c("ngClass",h(1,3,e.recordStatus)),o(2),c("ngClass",h(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Pa(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function Ha(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.title," ")}}function qa(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Wa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),_(" ",h(2,1,e.createdDate)," ")}}function ja(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Ua(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),_(" ",h(2,1,e.updatedDate)," ")}}function Qa(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),_(" ",h(2,1,"TITLE.OPTION")," "))}function za(n,l){if(n&1&&(r(0,"mat-cell",50)(1,"button",51)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Ka(n,l){n&1&&T(0,"mat-header-row")}function Ja(n,l){if(n&1){let e=M();r(0,"mat-row",52),I("click",function(){let t=u(e).$implicit,s=m();return g(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=l.dataIndex,t=m();we("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var yi=class yi extends st{constructor(e,i,t,s,v,p,Q,J,xe,Re,wt){super(e,new Zn,Re,v,J);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.router=s;this.tokenHelper=v;this.cmsStoreService=p;this.cdr=Q;this.translate=J;this.pageInfo=xe;this.publicHelper=Re;this.dialog=wt;this.requestDepartemenId=0;this.requestOperatorId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus","LinkSourceId","CreatedDate","UpdatedDate"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","LinkSourceId","CreatedDate","UpdatedDate"];this.publicHelper.processService.cdr=this.cdr,this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestOperatorId=+Number(this.activatedRoute.snapshot.paramMap.get("OperatorId")),this.optionsSearch.parentMethods={onSubmit:mt=>this.onSubmitOptionsSearch(mt)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(i=>i.tokenInfoStore).subscribe(i=>Y(this,null,function*(){this.tokenInfo=i,this.DataGetAll()}));let e=new z;this.requestOperatorId>0&&(e.propertyName="LinkFromOperatorId",e.value=this.requestOperatorId,this.filteModelContent.filters.push(e)),this.requestDepartemenId>0&&(e=new z,e.propertyName="LinkFromTicketingDepartemenId",e.value=this.requestDepartemenId,e.clauseType=Pt.Or,this.filteModelContent.filters.push(e),e=new z,e.propertyName="LinkToTicketingDepartemenId",e.value=this.requestDepartemenId,e.clauseType=Pt.Or,this.filteModelContent.filters.push(e))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Zn);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){let t=new z;t.propertyName="LinkFromTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)}this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorGetAll(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}this.router.navigate(["/application/app/edit/",this.tableRowSelected.id])}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}this.router.navigate(["/application/app/delete/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.requestOperatorId>0&&this.router.navigate(["/application/app/"]),this.requestDepartemenId>0&&this.router.navigate(["/ticketing/departemen/"])}};yi.\u0275fac=function(i){return new(i||yi)(f(hn),f(Ie),f(O),f(oe),f(le),f(ae),f(L),f(V),f(lt),f(N),f(ye))},yi.\u0275cmp=R({type:yi,selectors:[["app-application-app-list"]],standalone:!1,features:[q],decls:58,vars:27,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkSourceId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return u(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),g(p)}),I("optionOnActionButtonMemoRow",function(){return u(s),g(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),g(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),g(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),g(t.onActionButtonPrintRow())}),k(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return u(s),g(t.onActionSelectorSelect(p))}),a(),w(),ke(3,6)(4,7),k(5,8),C(6,Aa,2,0,"a",9),r(7,"a",10),I("click",function(){return u(s),g(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),I("click",function(){return u(s),g(t.onActionButtonReload())}),T(10,"i",12),a(),w(),k(11,13),r(12,"a",14),I("click",function(){return u(s),g(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),S(15,"translate"),a(),r(16,"a",14),I("click",function(){return u(s),g(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),S(19,"translate"),a(),w(),ke(20,16),k(21,17),C(22,Da,7,3,"div",18),w(),k(23,19),r(24,"app-cms-search-list",20),A("optionsChange",function(p){return u(s),y(t.optionsSearch,p)||(t.optionsSearch=p),g(p)}),a(),r(25,"app-cms-statist-list",20),A("optionsChange",function(p){return u(s),y(t.optionsStatist,p)||(t.optionsStatist=p),g(p)}),a(),w(),k(26,21),r(27,"mat-table",22,0),I("matSortChange",function(){u(s);let p=D(28);return g(t.onTableSortData(p))}),k(29,23),C(30,xa,2,1,"mat-header-cell",24)(31,Ra,2,1,"mat-cell",25),w(),k(32,26),C(33,La,2,1,"mat-header-cell",24)(34,Fa,4,5,"mat-cell",25),w(),k(35,27),C(36,Va,2,1,"mat-header-cell",24)(37,Na,2,1,"mat-cell",25),w(),k(38,28),C(39,Ba,2,1,"mat-header-cell",24)(40,Ga,5,7,"mat-cell",29),w(),k(41,30),C(42,Pa,2,1,"mat-header-cell",24)(43,Ha,2,1,"mat-cell",25),w(),k(44,31),C(45,qa,2,1,"mat-header-cell",24)(46,Wa,3,3,"mat-cell",25),w(),k(47,32),C(48,ja,2,1,"mat-header-cell",24)(49,Ua,3,3,"mat-cell",25),w(),k(50,33),C(51,Qa,3,3,"mat-header-cell",34)(52,za,6,1,"mat-cell",35),w(),C(53,Ka,1,0,"mat-header-row",36)(54,Ja,1,6,"mat-row",37),a(),w(),k(55,38),r(56,"mat-paginator",39,1),I("page",function(p){return u(s),g(t.onTablePageingData(p))}),a(),w(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),_("",h(15,22,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),_("",h(19,24,"ACTION.STATIST")," "),o(4),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(26),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(26,Ea)))},dependencies:[Et,F,We,Ve,Ne,W,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Ft,Bt,Fe,B,vt,Ct,Vt,Nt],encapsulation:2});var Ki=yi;var Za=["vform"];function $a(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",18),A("modelChange",function(t){u(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function el(n,l){n&1&&T(0,"i",19)}function tl(n,l){n&1&&T(0,"i",20)}function il(n,l){n&1&&(r(0,"mat-error"),d(1," Question is "),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2&&(o(3),b(h(4,1,"MESSAGE.required")))}function nl(n,l){if(n&1){let e=M();r(0,"div",21)(1,"button",22),I("click",function(){u(e);let t=m();return g(t.onFormCancel())}),T(2,"i",23),d(3),S(4,"translate"),a(),r(5,"button",24),T(6,"i",25),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),_(" ",h(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),_(" ",h(8,5,"ACTION.SAVE")," ")}}var Ai=class Ai extends Tt{constructor(e,i,t,s,v,p,Q,J){super(s,new _t,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingFaqService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestParentId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new zt;this.dataModelResult=new j;this.dataModel=new _t;this.dataFileModel=new Map;this.formInfo=new ie;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=+e.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.Submit_New_Content").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";if(this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ai.\u0275fac=function(i){return new(i||Ai)(f(ue),f(re),f(U),f(At),f(O),f(N),f(L),f(V))},Ai.\u0275cmp=R({type:Ai,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,t){if(i&1&&X(Za,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:33,vars:33,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return u(s),g(t.onFormSubmit())}),C(10,$a,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),S(12,"translate"),I("optionChange",function(p){return u(s),g(t.onActionSelectorSelect(p))}),a(),r(13,"div",9)(14,"label",10),d(15),S(16,"translate"),a(),r(17,"input",11,1),S(19,"translate"),A("ngModelChange",function(p){return u(s),y(t.dataModel.question,p)||(t.dataModel.question=p),g(p)}),a(),C(20,el,1,0,"i",12)(21,tl,1,0,"i",13),r(22,"em"),d(23),a(),C(24,il,5,3,"mat-error",14),a(),r(25,"p"),d(26),S(27,"translate"),a(),r(28,"angular-editor",15),S(29,"translate"),A("ngModelChange",function(p){return u(s),y(t.dataModel.answer,p)||(t.dataModel.answer=p),g(p)}),a(),T(30,"br"),r(31,"app-cms-files-selector",16),A("dataFileModelChange",function(p){return u(s),y(t.dataFileModel,p)||(t.dataFileModel=p),g(p)}),a(),C(32,nl,9,7,"div",17),a()()()}if(i&2){let s=D(18);o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),_(" ",t.formInfo.formTitle," "),o(2),_(" ",h(7,21,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",h(12,23,"TITLE.Department")),o(4),b(h(16,25,"TITLE.Question")),o(2),c("placeholder",x(h(19,27,"TITLE.Question"))),E("ngModel",t.dataModel.question),o(3),c("ngIf",!s.value),o(),c("ngIf",s.value),o(2),_("",s.value.length," / 100"),o(),c("ngIf",s.errors==null?null:s.errors.required),o(2),_(" ",h(27,29,"TITLE.Answer")," "),o(2),c("placeholder",h(29,31,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),E("ngModel",t.dataModel.answer),o(3),E("dataFileModel",t.dataFileModel),c("openDirectUploadView",!0),o(),c("ngIf",t.formInfo.formSubmitAllow)}},dependencies:[F,_e,ee,te,Se,Te,ve,Ce,fe,he,Ee,W,Me,H,An,wn,Ae,B],encapsulation:2});var Gn=Ai;var ol=["vform"];function rl(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",18),A("modelChange",function(t){u(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function al(n,l){n&1&&T(0,"i",19)}function ll(n,l){n&1&&T(0,"i",20)}function sl(n,l){n&1&&(r(0,"mat-error"),d(1," Question is "),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2&&(o(3),b(h(4,1,"MESSAGE.required")))}function cl(n,l){if(n&1){let e=M();r(0,"div",21)(1,"button",22),I("click",function(){u(e);let t=m();return g(t.onFormCancel())}),T(2,"i",23),d(3),S(4,"translate"),a(),r(5,"button",24),T(6,"i",25),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),_(" ",h(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),_(" ",h(8,5,"ACTION.SAVE")," ")}}var Di=class Di extends Lt{constructor(e,i,t,s,v,p,Q,J){super(s,new _t,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingFaqService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new zt;this.dataModelResult=new ht;this.dataModel=new _t;this.dataFileModel=new Map;this.formInfo=new ie;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingFaqService.setAccessLoad(),this.ticketingFaqService.setAccessDataType(St.Editor),this.ticketingFaqService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.question,this.formInfo.formAlert="",this.dataModel.linkFileIds&&this.dataModel.linkFileIds.length>0&&this.dataModel.linkFileIds.split(",").forEach((t,s)=>{let v="";this.dataModel.linkFileIdsSrc.length>=this.dataModel.linkFileIdsSrc.length&&(v=this.dataModel.linkFileIdsSrc[s]),this.dataFileModel.set(+t,v)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";if(this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Di.\u0275fac=function(i){return new(i||Di)(f(ue),f(re),f(U),f(At),f(O),f(N),f(L),f(V))},Di.\u0275cmp=R({type:Di,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,t){if(i&1&&X(ol,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:33,vars:33,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return u(s),g(t.onFormSubmit())}),C(10,rl,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),S(12,"translate"),I("optionChange",function(p){return u(s),g(t.onActionSelectorSelect(p))}),a(),r(13,"div",9)(14,"label",10),d(15),S(16,"translate"),a(),r(17,"input",11,1),S(19,"translate"),A("ngModelChange",function(p){return u(s),y(t.dataModel.question,p)||(t.dataModel.question=p),g(p)}),a(),C(20,al,1,0,"i",12)(21,ll,1,0,"i",13),r(22,"em"),d(23),a(),C(24,sl,5,3,"mat-error",14),a(),r(25,"p"),d(26),S(27,"translate"),a(),r(28,"angular-editor",15),S(29,"translate"),A("ngModelChange",function(p){return u(s),y(t.dataModel.answer,p)||(t.dataModel.answer=p),g(p)}),a(),T(30,"br"),r(31,"app-cms-files-selector",16),A("dataFileModelChange",function(p){return u(s),y(t.dataFileModel,p)||(t.dataFileModel=p),g(p)}),a(),C(32,cl,9,7,"div",17),a()()()}if(i&2){let s=D(18);o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),_(" ",t.formInfo.formTitle," "),o(2),_(" ",h(7,21,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",h(12,23,"TITLE.Department")),o(4),b(h(16,25,"TITLE.Question")),o(2),c("placeholder",x(h(19,27,"TITLE.Question"))),E("ngModel",t.dataModel.question),o(3),c("ngIf",!s.value),o(),c("ngIf",s.value),o(2),_("",s.value.length," / 100"),o(),c("ngIf",s.errors==null?null:s.errors.required),o(2),_(" ",h(27,29,"TITLE.Answer")," "),o(2),c("placeholder",h(29,31,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),E("ngModel",t.dataModel.answer),o(3),E("dataFileModel",t.dataFileModel),c("openDirectUploadView",!0),o(),c("ngIf",t.formInfo.formSubmitAllow)}},dependencies:[F,_e,ee,te,Se,Te,ve,Ce,fe,he,Ee,W,Me,H,An,wn,Ae,B],encapsulation:2});var Pn=Di;var dl=()=>[5,10,20,100],pl=n=>({display:n});function ml(n,l){if(n&1){let e=M();r(0,"a",37),I("click",function(){u(e);let t=m();return g(t.onActionBackToParent())}),T(1,"i",38),a()}}function fl(n,l){if(n&1){let e=M();r(0,"div",39)(1,"a",40),I("click",function(){u(e);let t=m();return g(t.onActionButtonNewRow())}),T(2,"i",41)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.ADD")))}function ul(n,l){if(n&1){let e=M();r(0,"div",39)(1,"a",43),I("click",function(){u(e);let t=m();return g(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",44)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.EDIT")))}function gl(n,l){if(n&1){let e=M();r(0,"div",39)(1,"a",45),I("click",function(){u(e);let t=m();return g(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",46)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.DELETE")))}function Sl(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function hl(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.id," ")}}function _l(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Tl(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),_(" ",h(3,3,h(2,1,e.linkSiteId))," ")}}function vl(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Cl(n,l){if(n&1&&T(0,"select",50),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,pl,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Il(n,l){if(n&1&&(r(0,"mat-cell",48),S(1,"statusCellClass"),T(2,"i",48),S(3,"statusIconClass"),C(4,Cl,1,5,"select",49),a()),n&2){let e=l.$implicit,i=m();c("ngClass",h(1,3,e.recordStatus)),o(2),c("ngClass",h(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function bl(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.question==null?null:e.fieldsInfo.question.fieldTitle," ")}}function Ml(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.question," ")}}function kl(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),_(" ",h(2,1,"TITLE.OPTION")," "))}function wl(n,l){if(n&1&&(r(0,"mat-cell",51)(1,"button",52)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function El(n,l){n&1&&T(0,"mat-header-row")}function yl(n,l){if(n&1){let e=M();r(0,"mat-row",53),I("click",function(){let t=u(e).$implicit,s=m();return g(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=l.dataIndex,t=m();we("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var xi=class xi extends st{constructor(e,i,t,s,v,p,Q,J,xe,Re,wt,mt){super(e,new _t,wt,p,J);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=v;this.tokenHelper=p;this.cdr=Q;this.translate=J;this.pageInfo=xe;this.cmsStoreService=Re;this.publicHelper=wt;this.dialog=mt;this.requestDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus","Question"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","Question"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:ji=>this.onSubmitOptionsSearch(ji)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Ascending}ngOnInit(){if(this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestDepartemenId>0){let e=new z;e.propertyName="LinkTicketingDepartemenId",e.value=this.requestDepartemenId,this.filteModelContent.filters.push(e)}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new _t);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){let t=new z;t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)}this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorGetAll(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Gn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{parentId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Pn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.question+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let v=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(v,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(v)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(v)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};xi.\u0275fac=function(i){return new(i||xi)(f(At),f(Ie),f(O),f(Rt),f(oe),f(le),f(L),f(V),f(lt),f(ae),f(N),f(ye))},xi.\u0275cmp=R({type:xi,selectors:[["app-application-app-list"]],standalone:!1,features:[q],decls:51,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Question"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#FFFFFF"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return u(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),g(p)}),I("optionOnActionButtonMemoRow",function(){return u(s),g(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),g(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),g(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),g(t.onActionButtonPrintRow())}),k(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return u(s),g(t.onActionSelectorSelect(p))}),a(),w(),ke(3,6)(4,7),k(5,8),C(6,ml,2,0,"a",9),r(7,"a",10),I("click",function(){return u(s),g(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),I("click",function(){return u(s),g(t.onActionButtonReload())}),T(10,"i",12),a(),w(),k(11,13),r(12,"a",14),I("click",function(){return u(s),g(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),S(15,"translate"),a(),r(16,"a",14),I("click",function(){return u(s),g(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),S(19,"translate"),a(),w(),k(20,16),C(21,fl,7,3,"div",17),w(),k(22,18),C(23,ul,7,3,"div",17)(24,gl,7,3,"div",17),w(),k(25,19),r(26,"app-cms-search-list",20),A("optionsChange",function(p){return u(s),y(t.optionsSearch,p)||(t.optionsSearch=p),g(p)}),a(),r(27,"app-cms-statist-list",20),A("optionsChange",function(p){return u(s),y(t.optionsStatist,p)||(t.optionsStatist=p),g(p)}),a(),w(),k(28,21),r(29,"mat-table",22,0),I("matSortChange",function(){u(s);let p=D(30);return g(t.onTableSortData(p))}),k(31,23),C(32,Sl,2,1,"mat-header-cell",24)(33,hl,2,1,"mat-cell",25),w(),k(34,26),C(35,_l,2,1,"mat-header-cell",24)(36,Tl,4,5,"mat-cell",25),w(),k(37,27),C(38,vl,2,1,"mat-header-cell",24)(39,Il,5,7,"mat-cell",28),w(),k(40,29),C(41,bl,2,1,"mat-header-cell",24)(42,Ml,2,1,"mat-cell",25),w(),k(43,30),C(44,kl,3,3,"mat-header-cell",31)(45,wl,6,1,"mat-cell",32),w(),C(46,El,1,0,"mat-header-row",33)(47,yl,1,6,"mat-row",34),a(),w(),k(48,35),r(49,"mat-paginator",36,1),I("page",function(p){return u(s),g(t.onTablePageingData(p))}),a(),w(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.faq.list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),_("",h(15,24,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),_("",h(19,26,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(17),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(28,dl)))},dependencies:[Et,F,We,Ve,Ne,W,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Ft,Bt,Fe,B,vt,Vt,Nt],encapsulation:2});var Ji=xi;function Al(n,l){if(n&1&&(r(0,"div",6)(1,"button",7),T(2,"i",8),d(3),T(4,"i",9),a(),r(5,"div",10)(6,"div",11),T(7,"p",12),a()()()),n&2){let e=m().$implicit,i=m().$implicit;o(),Ot("data-bs-target","#collapse"+e.id),o(2),_(" ",e.question," "),o(2),c("id",Gt("collapse",e.id)),Ot("data-bs-parent","#accordion-"+i.id),o(2),c("innerHTML",e.answer,an)}}function Dl(n,l){if(n&1&&(k(0),C(1,Al,8,6,"div",5),w()),n&2){let e=l.$implicit,i=m().$implicit;o(),c("ngIf",e.linkTicketingDepartemenId===i.id)}}function xl(n,l){if(n&1&&(k(0),r(1,"div",2)(2,"div",3)(3,"h4"),d(4),a()(),r(5,"div",4),C(6,Dl,2,1,"ng-container",1),a()(),w()),n&2){let e=l.$implicit,i=m();o(4),b(e.title),o(),c("id",Gt("accordion-",e.id)),o(),c("ngForOf",i.dataModelResult.listItems)}}var Ri=class Ri{constructor(l,e,i,t,s,v,p,Q,J){this.ticketingFaqService=l;this.ticketingDepartemenService=e;this.publicHelper=i;this.cmsToastrService=t;this.cmsStoreService=s;this.router=v;this.cdr=p;this.translate=Q;this.tokenHelper=J;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.dataModelResult=new j;this.dataDepartemenModelResult=new j;this.optionsSearch=new En;this.optionsStatist=new yn;this.tokenInfo=new jt;this.tableRowsSelected=[];this.tableRowSelected=new _t;this.tableSource=new ho;this.DataDepartemanLinkSelect=0;this.DataFaqLinkSelect=0;this.publicHelper.processService.cdr=this.cdr,this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Ascending}ngOnInit(){this.DataDepartemenGetAll(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.DataDepartemenGetAll(),this.tokenInfo=l,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.onActionTableRowSelect(new _t);let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(l,i,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let e=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){let i=new z;i.propertyName="LinkTicketingDepartemenId",i.value=this.categoryModelSelected.id,e.filters.push(i)}this.ticketingFaqService.ServiceGetAllOrigin(e).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),i.isSuccess?(this.dataModelResult=i,this.tableSource.data=i.listItems):this.cmsToastrService.typeErrorGetAll(i.errorMessage),this.publicHelper.processService.processStop(l)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(l)}})}DataDepartemenGetAll(){this.ticketingDepartemenService.ServiceGetAllOrigin(null).subscribe({next:l=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(l.access),l.isSuccess?this.dataDepartemenModelResult=l:this.cmsToastrService.typeErrorGetAll(l.errorMessage),Promise.resolve().then(()=>this.cdr.detectChanges())},error:l=>{this.cmsToastrService.typeError(l)}})}onTableSortData(l){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===l.active?this.tableSource.sort.start==="asc"?(l.start="desc",this.filteModelContent.sortColumn=l.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(l.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):l.start="desc":(this.filteModelContent.sortColumn=l.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=l,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(l){this.filteModelContent.currentPageNumber=l.pageIndex+1,this.filteModelContent.rowPerPage=l.pageSize,this.DataGetAll()}onActionSelectorSelect(l){var e=this.filteModelContent.sortColumn,i=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=e,this.filteModelContent.sortType=i,this.categoryModelSelected=l,this.DataGetAll()}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(l){l&&l.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...l]),this.DataGetAll()}onActionTableRowSelect(l){this.tableRowSelected=l,l.expanded||(l.expanded=!1),l.expanded=!l.expanded}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}onActionButtonDeparteman(l){this.DataDepartemanLinkSelect=l,this.DataFaqLinkSelect=0}onActionButtonFaqTitle(l){this.DataFaqLinkSelect=l}};Ri.\u0275fac=function(e){return new(e||Ri)(f(At),f(Be),f(N),f(O),f(ae),f(oe),f(L),f(V),f(le))},Ri.\u0275cmp=R({type:Ri,selectors:[["app-ticketing-faq-originlist"]],standalone:!1,decls:2,vars:2,consts:[[3,"optionsInfoAreaId"],[4,"ngFor","ngForOf"],[1,"card","card-style"],[1,"content"],[1,"accordion",3,"id"],["class","mb-0",4,"ngIf"],[1,"mb-0"],["type","button","data-bs-toggle","collapse",1,"btn","accordion-btn","no-effect","color-theme"],[1,"fa","fa-cloud","color-yellow-dark","me-2"],[1,"fa","fa-chevron-down","font-10","accordion-icon"],[1,"collapse",3,"id"],[1,"pt-1","pb-2","ps-3","pe-3"],[3,"innerHTML"]],template:function(e,i){e&1&&(T(0,"app-progress-spinner",0),C(1,xl,7,4,"ng-container",1)),e&2&&(c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("ngForOf",i.dataDepartemenModelResult.listItems))},dependencies:[oi,F,H],encapsulation:2});var Hn=Ri;var Rl=["*"];function Ll(n,l){if(n&1&&(r(0,"label",11),d(1),a()),n&2){let e=m();c("for",Gt("app-cms-site-selector-",e.id)),o(),b(e.optionLabel)}}function Fl(n,l){if(n&1&&(r(0,"mat-option",12)(1,"span"),d(2),a()()),n&2){let e=l.$implicit,i=m();c("value",e)("disabled",i.optionDisabled),o(2),b(i.displayOption(e))}}function Vl(n,l){n&1&&T(0,"i",13)}function Nl(n,l){n&1&&T(0,"i",14)}function Bl(n,l){if(n&1){let e=M();r(0,"i",15),I("click",function(){u(e);let t=m();return g(t.onActionSelectClear())}),a()}}function Ol(n,l){n&1&&(r(0,"em"),d(1),S(2,"translate"),a()),n&2&&(o(),_("(",h(2,1,"TITLE.Necessary"),")"))}var Yt=class Yt{constructor(l,e,i,t,s){this.coreEnumService=l;this.cdr=e;this.publicHelper=i;this.translate=t;this.categoryService=s;this.id=++Yt.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new j;this.dataModelSelect=new ft;this.formControl=new dn;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new Xt;this.optionReload=()=>this.onActionButtonReload();this.optionItemCount=new Xt;this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(nn(""),en(1500),tn(),on(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return Y(this,null,function*(){let e=new K;e.rowPerPage=20,e.accessLoad=!0;let i=new z;i.propertyName="Title",i.value=l,i.searchType=ri.Contains,i.clauseType=Pt.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new z,i.propertyName="Id",i.value=l,i.searchType=ri.Equal,i.clauseType=Pt.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield Zi(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems?.length>0?this.optionItemCount.emit(s.listItems?.length):this.optionItemCount.emit(0),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe($i(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="number"&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess&&(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item))}});return}if(typeof l==typeof ft){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new ft,this.loadOptions()}};Yt.nextId=0,Yt.\u0275fac=function(e){return new(e||Yt)(f(U),f(L),f(N),f(V),f(Dt))},Yt.\u0275cmp=R({type:Yt,selectors:[["app-ticketing-template-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionItemCount:"optionItemCount"},standalone:!1,ngContentSelectors:Rl,decls:13,vars:18,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],["class","fa fa-times  action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=M();sn(),r(0,"div",1),T(1,"app-progress-spinner",2),C(2,Ll,2,3,"label",3),T(3,"input",4),r(4,"mat-autocomplete",5,0),I("optionSelected",function(v){return u(t),g(i.onActionSelect(v.option.value))}),C(6,Fl,3,3,"mat-option",6),S(7,"async"),a(),C(8,Vl,1,0,"i",7)(9,Nl,1,0,"i",8)(10,Bl,1,0,"i",9)(11,Ol,3,3,"em",10),cn(12),a()}if(e&2){let t=D(5);o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),o(),c("placeholder",x(i.optionPlaceholder))("id",Gt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),Ot("disabled",i.optionDisabled?!0:null),o(),c("displayWith",i.displayFn),o(2),c("ngForOf",h(7,16,i.filteredOptions)),o(2),c("ngIf",!i.formControl.valid),o(),c("ngIf",i.optionRequired&&i.formControl.valid),o(),c("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[oi,F,ee,te,Te,pn,Tn,_n,vn,W,H,Fe,B],encapsulation:2});var qn=Yt;var Pl=["vform"];function Hl(n,l){n&1&&(r(0,"mat-error"),d(1),S(2,"translate"),r(3,"strong"),d(4),S(5,"translate"),a()()),n&2&&(o(),_(" ",h(2,2,"AUTH.INPUT.FULLNAME")," "),o(3),b(h(5,4,"MESSAGE.required")))}function ql(n,l){n&1&&(r(0,"mat-error"),d(1),S(2,"translate"),r(3,"strong"),d(4),S(5,"translate"),a()()),n&2&&(o(),_(" ",h(2,2,"AUTH.INPUT.MOBILE")," "),o(3),b(h(5,4,"MESSAGE.required")))}function Wl(n,l){n&1&&(r(0,"mat-error"),d(1),S(2,"translate"),r(3,"strong"),d(4),S(5,"translate"),a()()),n&2&&(o(),_(" ",h(2,2,"AUTH.INPUT.EMAIL")," "),o(3),b(h(5,4,"MESSAGE.required")))}function jl(n,l){if(n&1){let e=M();r(0,"div",36)(1,"label"),d(2),S(3,"translate"),a(),r(4,"app-ticketing-template-selector",45),I("optionItemCount",function(){u(e);let t=m(2);return g(t.templateItemCount)})("optionChange",function(t){u(e);let s=m(2);return g(s.onActionSelectorSelect(t))}),a()()}n&2&&(o(2),b(h(3,1,"TITLE.Categories")))}function Ul(n,l){n&1&&(r(0,"mat-error"),d(1),S(2,"translate"),r(3,"strong"),d(4),S(5,"translate"),a()()),n&2&&(o(),_(" ",h(2,2,"AUTH.INPUT.YOURMEESAGE")," "),o(3),b(h(5,4,"MESSAGE.required")))}function Ql(n,l){if(n&1){let e=M();r(0,"div",8)(1,"form",29,0),I("ngSubmit",function(){u(e);let t=m();return g(t.onFormSubmit())}),r(3,"fieldset")(4,"div",30)(5,"label",31),d(6),S(7,"translate"),r(8,"span"),d(9),S(10,"translate"),a()(),r(11,"input",32,1),S(13,"translate"),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.fullName,t)||(s.dataModel.fullName=t),g(t)}),a(),C(14,Hl,6,6,"mat-error",33),a(),r(15,"div",30)(16,"label",34),d(17),S(18,"translate"),r(19,"span"),d(20),S(21,"translate"),a()(),r(22,"input",35,2),S(24,"translate"),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),g(t)}),a(),C(25,ql,6,6,"mat-error",33),a(),r(26,"div",36)(27,"label",37),d(28),S(29,"translate"),r(30,"span"),d(31),S(32,"translate"),a()(),r(33,"input",38,3),S(35,"translate"),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.email,t)||(s.dataModel.email=t),g(t)}),a(),C(36,Wl,6,6,"mat-error",33),a(),C(37,jl,5,3,"div",39),r(38,"div",40)(39,"label",41),d(40),S(41,"translate"),r(42,"span"),d(43),S(44,"translate"),a()(),r(45,"textarea",42,4),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),g(t)}),a(),C(47,Ul,6,6,"mat-error",33),a(),r(48,"div",43),T(49,"input",44),S(50,"translate"),a()()()()}if(n&2){let e=D(12),i=D(23),t=D(34),s=D(46),v=m();o(6),_("",h(7,25,"AUTH.INPUT.FULLNAME"),":"),o(3),_("( ",h(10,27,"TITLE.Necessary")," )"),o(2),c("placeholder",x(h(13,29,"TITLE.Enter_your_first_and_last_name"))),E("ngModel",v.dataModel.fullName),o(3),c("ngIf",e.errors==null?null:e.errors.required),o(3),_("",h(18,31,"AUTH.INPUT.MOBILE"),":"),o(3),_("( ",h(21,33,"TITLE.Necessary")," )"),o(2),c("placeholder",x(h(24,35,"TITLE.Enter_your_first_and_last_name"))),E("ngModel",v.dataModel.phoneNo),o(3),c("ngIf",i.errors==null?null:i.errors.required),o(3),_("",h(29,37,"AUTH.INPUT.EMAIL"),":"),o(3),_("( ",h(32,39,"TITLE.Necessary")," )"),o(2),c("placeholder",x(h(35,41,"TITLE.Enter_email"))),E("ngModel",v.dataModel.email),o(3),c("ngIf",t.errors==null?null:t.errors.required),o(),c("ngIf",v.templateItemCount>0),o(3),_("",h(41,43,"AUTH.INPUT.YOURMEESAGE"),":"),o(3),_("( ",h(44,45,"TITLE.Necessary")," )"),o(2),E("ngModel",v.dataModel.htmlBody),o(2),c("ngIf",s.errors==null?null:s.errors.required),o(2),c("value",x(h(50,47,"ACTION.SEND")))}}function zl(n,l){if(n&1&&(r(0,"div",46)(1,"div",11)(2,"div",12)(3,"h1",13),T(4,"i",14),a(),r(5,"h2",15),d(6),S(7,"translate"),a(),r(8,"p",16),d(9),S(10,"translate"),a(),r(11,"p",15),d(12),S(13,"translate"),a(),T(14,"div",47),a()()()),n&2){let e=m();o(6),b(h(7,5,"TITLE.Your_message_has_been_registered_in_the_system")),o(3),b(h(10,7,"TITLE.Note_the_tracking_code_for_further_tracking")),o(3),to(" ",h(13,9,"TITLE.Tracking_Code")," : ",e.dataModelResult.item.id," "),o(2),c("innerHTML",e.dataModelResult.item==null||e.dataModelResult.item.virtual_Departemen==null?null:e.dataModelResult.item.virtual_Departemen.DefaultAnswerBody,an)}}var Li=class Li extends Tt{constructor(e,i,t,s,v,p,Q,J,xe,Re,wt){super(Q,new Oe,v,Re);this.tokenHelper=e;this.cmsStoreService=i;this.activatedRoute=t;this.coreAuthService=s;this.publicHelper=v;this.coreEnumService=p;this.ticketingTaskService=Q;this.cmsToastrService=J;this.router=xe;this.translate=Re;this.cdr=wt;this.requestLinkDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.formInfo=new ie;this.dataModel=new go;this.dataModelResult=new j;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.templateItemCount=0;this.mapOptonCenter=new xt;this.captchaModel=new so;this.countAutoCaptchaOrder=1;this.enumFormSubmitedStatus=Sn;this.onCaptchaOrderInProcess=!1;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&(this.dataModel.fullName=this.tokenInfo.user.lastName,this.dataModel.email=this.tokenInfo.user.email,this.dataModel.phoneNo=this.tokenInfo.user.mobile),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(mt=>mt.tokenInfoStore).subscribe(mt=>Y(this,null,function*(){this.tokenInfo=mt,this.dataModel.fullName=this.tokenInfo.user.lastName,this.dataModel.email=this.tokenInfo.user.email,this.dataModel.phoneNo=this.tokenInfo.user.mobile}))}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.onCaptchaOrder(),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.captchaKey=this.captchaModel.key,this.ticketingTaskService.ServiceContactUS(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.formInfo.formSubmitedStatus=Sn.Success,this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd()):(this.formInfo.formSubmitedStatus=Sn.Error,this.cmsToastrService.typeErrorAdd(i.errorMessage)),this.publicHelper.processService.processStop(e),this.cdr.markForCheck()},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorAdd(i),this.cdr.markForCheck()}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_template_is_not_clear").subscribe(i=>{this.cmsToastrService.typeWarningSelected(i)});return}this.dataModel.htmlBody=e.htmlBody}onActionBackToParent(){this.router.navigate(["/application/app/"])}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}onCaptchaOrder(){this.onCaptchaOrderInProcess||(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModel.captchaText="",this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{if(e.isSuccess){this.captchaModel=e.item,this.expireDate=e.item.expire;let i=new Date,s=new Date(e.item.expire).getTime()-i.getTime();this.countAutoCaptchaOrder<10&&(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,setTimeout(()=>{this.onCaptchaOrder()},s))}else this.cmsToastrService.typeErrorGetCpatcha(e.errorMessage);this.onCaptchaOrderInProcess=!1},error:e=>{this.onCaptchaOrderInProcess=!1}}))}};Li.\u0275fac=function(i){return new(i||Li)(f(le),f(ae),f(Ie),f(po),f(N),f(U),f(Ge),f(O),f(oe),f(V),f(L))},Li.\u0275cmp=R({type:Li,selectors:[["app-ticketing-task-contactus"]],viewQuery:function(i,t){if(i&1&&X(Pl,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:39,vars:21,consts:[["vform","ngForm"],["FullName",""],["phoneNo",""],["Email",""],["HtmlBody",""],[1,"page-content","pb-3"],[1,"card","card-full","rounded-m","pb-4"],[1,"drag-line"],[1,"content"],[1,"font-600","mb-0","color-highlight"],[1,"form-sent","disabled"],[1,"card","card-style"],[1,"shadow-l","rounded-m","gradient-green","ms-n1","mb-0"],[1,"color-white","text-center","pt-4"],[1,"fa","fa-check-circle","fa-3x","shadow-s","scale-box","rounded-circle"],[1,"color-white","bold","text-center","pt-3"],[1,"color-white","pb-4","text-center","mt-n2","mb-0"],[1,"content","text-center"],[1,"boxed-text-xl"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-facebook"],[1,"fab","fa-facebook-f"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-instagram","ms-3","me-3"],[1,"fab","fa-instagram"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-twitter"],[1,"fab","fa-twitter"],[3,"optionsInfoAreaId"],[1,"card","contact-form"],["class","content",4,"ngIf"],["class","form-sent",4,"ngIf"],[3,"ngSubmit"],[1,"form-field","form-name"],["for","contactNameField",1,"contactNameField","color-theme"],["type","text","name","dataModel.fullName","id","contactNameField","required","",1,"round-small",2,"text-align","center !important",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","contactPhoneField",1,"contactNameField","color-theme"],["type","text","name","dataModel.phoneNo","id","contactPhoneField","required","",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],[1,"form-field","form-email"],["for","contactEmailField",1,"contactEmailField","color-theme"],["type","email","name","dataModel.email","id","contactEmailField",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],["class","form-field form-email",4,"ngIf"],[1,"form-field","form-text"],["for","contactMessageTextarea",1,"contactMessageTextarea","color-theme"],["name","dataModel.htmlBody","id","contactMessageTextarea","rows","3","required","",1,"round-small",3,"ngModelChange","ngModel"],[1,"form-button"],["type","submit","data-formId","contactForm",1,"btn","bg-highlight","font-700","btn-m","btn-full","rounded-sm","shadow-xl","contactSubmitButton",3,"value"],[3,"optionItemCount","optionChange"],[1,"form-sent"],[3,"innerHTML"]],template:function(i,t){i&1&&(r(0,"div",5)(1,"div",6),T(2,"div",7),r(3,"div",8)(4,"p",9),d(5),S(6,"translate"),a(),r(7,"p"),d(8),S(9,"translate"),a()(),r(10,"div",10)(11,"div",11)(12,"div",12)(13,"h1",13),T(14,"i",14),a(),r(15,"h2",15),d(16),S(17,"translate"),a(),r(18,"p",16),d(19),S(20,"translate"),a()()(),r(21,"div",11)(22,"div",17)(23,"h2"),d(24),S(25,"translate"),a(),r(26,"p",18),d(27),S(28,"translate"),a(),r(29,"a",19),T(30,"i",20),a(),r(31,"a",21),T(32,"i",22),a(),r(33,"a",23),T(34,"i",24),a()()()(),T(35,"app-progress-spinner",25),r(36,"div",26),C(37,Ql,51,49,"div",27),a(),C(38,zl,15,11,"div",28),a()()),i&2&&(o(5),b(h(6,9,"TITLE.Send_us_your_questions")),o(3),_(" ",h(9,11,"TITLE.GetInTouchWithUs")," "),o(8),b(h(17,13,"TITLE.MESSAGE_SENT")),o(3),b(h(20,15,"TITLE.WE_WILL_CONTACT_YOU_SOON")),o(5),b(h(25,17,"TITLE.LETS_BE_SOCIAL")),o(3),_(" ",h(28,19,"TITLE.SOCIAL_MEDIA_PLATFORMS")," "),o(8),c("optionsInfoAreaId",t.constructorInfoAreaId),o(2),c("ngIf",(t.formInfo==null?null:t.formInfo.formSubmitedStatus)!==t.enumFormSubmitedStatus.Success),o(),c("ngIf",(t.formInfo==null?null:t.formInfo.formSubmitedStatus)===t.enumFormSubmitedStatus.Success))},dependencies:[F,_e,ee,te,Se,Te,fe,he,Ee,H,qn,B],encapsulation:2});var Wn=Li;var Kl=["vform"];function Jl(n,l){if(n&1){let e=M();r(0,"div",14)(1,"button",19),I("click",function(){u(e);let t=m(2);return g(t.onFormCancel())}),T(2,"i",20),d(3),S(4,"translate"),a()()}n&2&&(o(3),_(" ",h(4,1,"ACTION.CANCEL")," "))}function Yl(n,l){if(n&1&&(k(0),r(1,"div",9)(2,"table",10)(3,"thead",11)(4,"tr"),T(5,"th")(6,"th"),a()(),r(7,"tbody")(8,"tr")(9,"td"),d(10),a(),r(11,"td"),d(12),a()(),r(13,"tr")(14,"td"),d(15),a(),r(16,"td"),d(17),a()(),r(18,"tr")(19,"td"),d(20),a(),r(21,"td"),d(22),S(23,"enums"),a()(),r(24,"tr")(25,"td"),d(26),a(),r(27,"td"),d(28),a()(),r(29,"tr")(30,"td"),d(31),S(32,"translate"),a(),r(33,"td"),d(34),a()(),r(35,"tr")(36,"td"),d(37),a(),r(38,"td"),d(39),a()(),r(40,"tr")(41,"td"),d(42),a(),r(43,"td"),d(44),a()(),r(45,"tr")(46,"td"),d(47),a(),r(48,"td"),d(49),S(50,"localeDate"),a()(),r(51,"tr")(52,"td"),d(53),a(),r(54,"td"),d(55),S(56,"localeDate"),a()(),r(57,"tr")(58,"td"),d(59),a(),r(60,"td"),d(61),a()(),r(62,"tr")(63,"td"),d(64),a(),r(65,"td"),d(66),a()(),r(67,"tr")(68,"td"),d(69),a(),r(70,"td"),d(71),a()(),r(72,"tr")(73,"td"),d(74),a(),r(75,"td"),d(76),a()(),r(77,"tr")(78,"td"),d(79),a(),r(80,"td"),d(81),a()()()(),T(82,"hr"),a(),T(83,"div",12),r(84,"div",13)(85,"div",14)(86,"small",15),d(87),a(),r(88,"small",16),d(89),a()()(),r(90,"div",17),C(91,Jl,5,3,"div",18),a(),w()),n&2){let e=m();o(10),b(e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle),o(2),b(e.dataModel.id),o(3),b(e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle),o(2),b(e.dataModel.linkSiteId),o(3),b(e.fieldsInfo.ticketStatus==null?null:e.fieldsInfo.ticketStatus.fieldTitle),o(2),_(" ",ni(23,31,e.dataModel.ticketStatus,e.dataModelEnumTicketStatusResult.listItems)," "),o(4),b(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),o(2),b(e.dataModel.title),o(3),b(h(32,34,"TITLE.Message_Text")),o(3),b(e.dataModel.htmlBody),o(3),b(e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle),o(2),b(e.dataModel.fullName),o(3),b(e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle),o(2),b(e.dataModel.phoneNo),o(3),b(e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle),o(2),b(h(50,36,e.dataModel.createdDate)),o(4),b(e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle),o(2),b(h(56,38,e.dataModel.updatedDate)),o(4),b(e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle),o(2),b(e.dataModel.email),o(3),b(e.fieldsInfo.linkCmsUserId==null?null:e.fieldsInfo.linkCmsUserId.fieldTitle),o(2),b(e.dataModel.linkCmsUserId),o(3),b(e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle),o(2),b(e.dataModel.linkMemberId),o(3),_(" ",e.fieldsInfo.linkTicketingDepartemenId==null?null:e.fieldsInfo.linkTicketingDepartemenId.fieldTitle," "),o(2),b(e.dataModel.linkTicketingDepartemenId),o(3),_(" ",e.fieldsInfo.ticketingDepartemenDefaultAnswerBody==null?null:e.fieldsInfo.ticketingDepartemenDefaultAnswerBody.fieldTitle," "),o(2),b(e.dataModel.ticketingDepartemenDefaultAnswerBody),o(6),_("",e.formInfo.formAlert," "),o(2),_("",e.formInfo.formError," "),o(2),c("ngIf",e.formInfo.formSubmitAllow&&!e.publicHelper.processService.process.inRunAll)}}var Fi=class Fi{constructor(l,e,i,t,s,v,p,Q,J,xe,Re){this.data=l;this.dialogRef=e;this.coreEnumService=i;this.ticketingTaskService=t;this.cmsToastrService=s;this.tokenHelper=v;this.cmsStoreService=p;this.cdr=Q;this.ticketingEnumService=J;this.publicHelper=xe;this.translate=Re;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new jt;this.dataModelResult=new j;this.dataModel=new Oe;this.formInfo=new ie;this.dataModelEnumTicketStatusResult=new j;this.fieldsInfo=new Map;this.dataTaskReadedResult=new ht;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(l=>{this.formInfo.formTitle=l}),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.tokenInfo=l})),this.getEnumTicketStatus()}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:l=>{this.dataModelEnumTicketStatusResult=l}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.title+" ( "+e.item.id+" ) ",this.formInfo.formAlert="",this.dataTaskReaded(this.requestId)):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}dataTaskReaded(l){this.ticketingTaskService.ServiceTaskReaded(l).subscribe({next:e=>{e.isSuccess&&(this.dataTaskReadedResult=e)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Fi.\u0275fac=function(e){return new(e||Fi)(f(ue),f(re),f(U),f(Ge),f(O),f(le),f(ae),f(L),f(Ut),f(N),f(V))},Fi.\u0275cmp=R({type:Fi,selectors:[["app-ticketing-task-view"]],viewQuery:function(e,i){if(e&1&&X(Kl,5),e&2){let t;Z(t=$())&&(i.formGroup=t.first)}},standalone:!1,decls:12,vars:4,consts:[[1,"card","card-style","loader-container",2,"height","100vh","overflow-y","auto"],[3,"optionsInfoAreaId"],[1,"menu-title"],[1,"color-highlight"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[4,"ngIf"],[1,"ntk-cms-html-card-header"],[1,"table","table-striped","center"],[2,"background-color","#81d4fa"],["dir","rtl",1,"ntk-cms-html-card-body","ntk-allow-text-selection"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(r(0,"div",0),T(1,"app-progress-spinner",1),r(2,"div",2)(3,"p",3),d(4),a(),r(5,"a",4),I("click",function(){return i.onFormCancel()}),T(6,"i",5),a(),T(7,"hr"),a(),r(8,"div",6)(9,"p",7),d(10),a(),C(11,Yl,92,40,"ng-container",8),a()()),e&2&&(o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(3),b(i.formInfo.formTitle),o(6),_(" ",i.formInfo.formDescription," "),o(),c("ngIf",!i.publicHelper.processService.process.inRunAll))},dependencies:[F,no,H,B,ai,Ct],encapsulation:2});var Vi=Fi;var Xl=()=>[5,10,20,100],Zl=n=>({display:n});function $l(n,l){if(n&1){let e=M();r(0,"a",38),I("click",function(){u(e);let t=m();return g(t.onActionBackToParent())}),T(1,"i",39),a()}}function es(n,l){if(n&1){let e=M();r(0,"div",40)(1,"a",41),I("click",function(){u(e);let t=m();return g(t.onActionButtonNewRow())}),T(2,"i",42)(3,"br"),a(),r(4,"p",43),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.ADD")))}function ts(n,l){if(n&1){let e=M();r(0,"div",40)(1,"a",9),I("click",function(){u(e);let t=m();return g(t.onActionButtonAnswerList())}),T(2,"i",44)(3,"br"),a(),r(4,"p",43),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.ANSWERS")))}function is(n,l){if(n&1){let e=M();r(0,"div",40)(1,"a",45),I("click",function(){u(e);let t=m();return g(t.onActionButtonAnswerList(t.tableRowSelected))}),T(2,"i",44),a(),r(3,"p",43),d(4),S(5,"translate"),a()()}n&2&&(o(4),b(h(5,1,"ACTION.ANSWERS")))}function ns(n,l){if(n&1){let e=M();r(0,"div",40)(1,"a",46),I("click",function(){u(e);let t=m();return g(t.onActionButtonViewRow(t.tableRowSelected))}),T(2,"i",47),a(),r(3,"p",43),d(4),S(5,"translate"),a()()}n&2&&(o(4),b(h(5,1,"ACTION.VIEW")))}function os(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function rs(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.id," ")}}function as(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function ls(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),_(" ",h(3,3,h(2,1,e.linkSiteId))," ")}}function ss(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function cs(n,l){if(n&1&&T(0,"select",51),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,Zl,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function ds(n,l){if(n&1&&(r(0,"mat-cell",49),S(1,"statusCellClass"),T(2,"i",49),S(3,"statusIconClass"),C(4,cs,1,5,"select",50),a()),n&2){let e=l.$implicit,i=m();c("ngClass",h(1,3,e.recordStatus)),o(2),c("ngClass",h(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function ps(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function ms(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.title," ")}}function fs(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function us(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),_(" ",h(2,1,e.createdDate)," ")}}function gs(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Ss(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),_(" ",h(2,1,e.updatedDate)," ")}}function hs(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),_(" ",h(2,1,"TITLE.OPTION")," "))}function _s(n,l){if(n&1&&(r(0,"mat-cell",52)(1,"button",53)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Ts(n,l){n&1&&T(0,"mat-header-row")}function vs(n,l){if(n&1){let e=M();r(0,"mat-row",54),I("click",function(){let t=u(e).$implicit,s=m();return g(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=l.dataIndex,t=m();we("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var Ni=class Ni extends st{constructor(e,i,t,s,v,p,Q,J,xe,Re,wt){super(e,new Oe,Re,v,Q);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.router=s;this.tokenHelper=v;this.cdr=p;this.translate=Q;this.pageInfo=J;this.cmsStoreService=xe;this.publicHelper=Re;this.dialog=wt;this.requestDepartemenId=0;this.requestLinkCmsUserId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.optionsSearch=new En;this.optionsStatist=new yn;this.tokenInfo=new jt;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus","CreatedDate","UpdatedDate"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","CreatedDate","UpdatedDate"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:mt=>this.onSubmitOptionsSearch(mt)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Oe);let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.requestLinkCmsUserId>0&&(t.propertyName="LinkCmsUserId",t.value=this.requestLinkCmsUserId,i.filters.push(t)),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){this.router.navigate(["/ticketing/contactus/"])}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Vi,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionButtonAnswerList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};Ni.\u0275fac=function(i){return new(i||Ni)(f(Ge),f(Ie),f(O),f(oe),f(le),f(L),f(V),f(lt),f(ae),f(N),f(ye))},Ni.\u0275cmp=R({type:Ni,selectors:[["app-ticketing-task-contact-us-list"]],standalone:!1,features:[q],decls:57,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["mat-menu-item","","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-m","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return u(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),g(p)}),I("optionOnActionButtonMemoRow",function(){return u(s),g(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),g(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),g(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),g(t.onActionButtonPrintRow())}),ke(1,4)(2,5)(3,6),k(4,7),C(5,$l,2,0,"a",8),r(6,"a",9),I("click",function(){return u(s),g(t.viewGuideNotice=!t.viewGuideNotice)}),T(7,"i",10),a(),r(8,"a",9),I("click",function(){return u(s),g(t.onActionButtonReload())}),T(9,"i",11),a(),w(),k(10,12),r(11,"a",13),I("click",function(){return u(s),g(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(12,"mat-slide-toggle",14),d(13),S(14,"translate"),a(),r(15,"a",13),I("click",function(){return u(s),g(t.onActionButtonStatist())}),T(16,"mat-slide-toggle",14),d(17),S(18,"translate"),a(),w(),k(19,15),C(20,es,7,3,"div",16)(21,ts,7,3,"div",16),w(),k(22,17),C(23,is,6,3,"div",16)(24,ns,6,3,"div",16),w(),k(25,18),r(26,"app-cms-search-list",19),A("optionsChange",function(p){return u(s),y(t.optionsSearch,p)||(t.optionsSearch=p),g(p)}),a(),r(27,"app-cms-statist-list",19),A("optionsChange",function(p){return u(s),y(t.optionsStatist,p)||(t.optionsStatist=p),g(p)}),a(),w(),k(28,20),r(29,"mat-table",21,0),I("matSortChange",function(){u(s);let p=D(30);return g(t.onTableSortData(p))}),k(31,22),C(32,os,2,1,"mat-header-cell",23)(33,rs,2,1,"mat-cell",24),w(),k(34,25),C(35,as,2,1,"mat-header-cell",23)(36,ls,4,5,"mat-cell",24),w(),k(37,26),C(38,ss,2,1,"mat-header-cell",23)(39,ds,5,7,"mat-cell",27),w(),k(40,28),C(41,ps,2,1,"mat-header-cell",23)(42,ms,2,1,"mat-cell",24),w(),k(43,29),C(44,fs,2,1,"mat-header-cell",23)(45,us,3,3,"mat-cell",24),w(),k(46,30),C(47,gs,2,1,"mat-header-cell",23)(48,Ss,3,3,"mat-cell",24),w(),k(49,31),C(50,hs,3,3,"mat-header-cell",32)(51,_s,6,1,"mat-cell",33),w(),C(52,Ts,1,0,"mat-header-row",34)(53,vs,1,6,"mat-row",35),a(),w(),k(54,36),r(55,"mat-paginator",37,1),I("page",function(p){return u(s),g(t.onTablePageingData(p))}),a(),w(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.task.contactus-list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(5),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),_("",h(14,25,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),_("",h(18,27,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(23),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(29,Xl)))},dependencies:[Et,F,We,Ve,Ne,W,Ue,So,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Ft,Fe,B,vt,Ct,Vt,Nt],encapsulation:2});var Yi=Ni;var bs=["vform"];function Ms(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",23),A("modelChange",function(t){u(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ks(n,l){n&1&&T(0,"i",30)}function ws(n,l){n&1&&T(0,"i",31)}function Es(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function ys(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",25),d(2),a(),r(3,"input",26,2),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.fullName,t)||(s.dataModel.fullName=t),g(t)}),a(),C(5,ks,1,0,"i",27)(6,ws,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Es,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle)),E("ngModel",i.dataModel.fullName),c("disabled",!(i.fieldsInfo.fullName!=null&&i.fieldsInfo.fullName.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function As(n,l){n&1&&T(0,"i",30)}function Ds(n,l){n&1&&T(0,"i",31)}function xs(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function Rs(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",32),d(2),a(),r(3,"input",33,3),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),g(t)}),a(),C(5,As,1,0,"i",27)(6,Ds,1,0,"i",28),r(7,"em"),d(8),a(),C(9,xs,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Ls(n,l){n&1&&T(0,"i",30)}function Fs(n,l){n&1&&T(0,"i",31)}function Vs(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function Ns(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",34),d(2),a(),r(3,"input",35,4),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),g(t)}),a(),C(5,Ls,1,0,"i",27)(6,Fs,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Vs,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle)),E("ngModel",i.dataModel.phoneNo),c("disabled",!(i.fieldsInfo.phoneNo!=null&&i.fieldsInfo.phoneNo.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Bs(n,l){n&1&&T(0,"i",30)}function Os(n,l){n&1&&T(0,"i",31)}function Gs(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function Ps(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",36),d(2),a(),r(3,"input",37,5),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.email,t)||(s.dataModel.email=t),g(t)}),a(),C(5,Bs,1,0,"i",27)(6,Os,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Gs,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle)),E("ngModel",i.dataModel.email),c("disabled",!(i.fieldsInfo.email!=null&&i.fieldsInfo.email.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Hs(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",38),d(2),S(3,"translate"),a(),r(4,"textarea",39,6),S(6,"translate"),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),g(t)}),d(7,"                        "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),b(h(3,6,"TITLE.Description")),o(2),c("placeholder",x(h(6,8,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)),o(5),_("",e.value.length," / 1000")}}function qs(n,l){if(n&1){let e=M();r(0,"div",40)(1,"label",41),d(2),a(),r(3,"input",42),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),g(t)}),a(),T(4,"mat-datepicker-toggle",43)(5,"mat-datepicker",44,7),a()}if(n&2){let e=D(6),i=m();o(2),b(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),o(),c("matDatepicker",e),E("ngModel",i.dataModel.expireDate),o(),c("for",e)}}function Ws(n,l){if(n&1){let e=M();r(0,"div",45)(1,"button",46),I("click",function(){u(e);let t=m();return g(t.onActionBackToParent())}),d(2),S(3,"translate"),a(),r(4,"button",47),d(5),S(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),_(" ",h(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),_(" ",h(6,5,"ACTION.NEXT")," ")}}function js(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",48),d(2),a(),r(3,"input",49,8),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.userIpAddress,t)||(s.dataModel.userIpAddress=t),g(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle)),E("ngModel",i.dataModel.userIpAddress),c("disabled",!(i.fieldsInfo.userIpAddress!=null&&i.fieldsInfo.userIpAddress.accessAddField)),o(3),_("",e.value.length," / 100")}}function Us(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",50),d(2),a(),r(3,"input",51,9),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.deviceInformation,t)||(s.dataModel.deviceInformation=t),g(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.deviceInformation==null?null:i.fieldsInfo.deviceInformation.fieldTitle)),E("ngModel",i.dataModel.deviceInformation),c("disabled",!(i.fieldsInfo.deviceInformation!=null&&i.fieldsInfo.deviceInformation.accessAddField)),o(3),_("",e.value.length," / 100")}}function Qs(n,l){if(n&1&&(r(0,"div",45)(1,"button",52),d(2),S(3,"translate"),a(),r(4,"button",53),d(5),S(6,"translate"),a()()),n&2){m();let e=D(9);o(2),_(" ",h(3,3,"ACTION.BEFOR")," "),o(2),c("disabled",!e.form.valid),o(),_(" ",h(6,5,"ACTION.SAVE")," ")}}var Bi=class Bi extends Tt{constructor(e,i,t,s,v,p,Q,J,xe){super(s,new Oe,i,xe);this.activatedRoute=e;this.publicHelper=i;this.coreEnumService=t;this.ticketingTaskService=s;this.cmsToastrService=v;this.dialogRef=p;this.router=Q;this.cdr=J;this.translate=xe;this.requestLinkDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.formInfo=new ie;this.dataModel=new Oe;this.dataModelResult=new j;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new xt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTaskService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>this.router.navigate(["/ticketing/task/"]),1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}};Bi.\u0275fac=function(i){return new(i||Bi)(f(Ie),f(N),f(U),f(Ge),f(O),f(re),f(oe),f(L),f(V))},Bi.\u0275cmp=R({type:Bi,selectors:[["app-ticketing-task-add"]],viewQuery:function(i,t){if(i&1&&X(bs,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:32,vars:32,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=M();r(0,"div",10),T(1,"app-progress-spinner",11),r(2,"div",12)(3,"p",13),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",14,0),I("ngSubmit",function(){return u(s),g(t.onFormSubmit())}),r(10,"mat-horizontal-stepper",15,1),I("selectionChange",function(p){u(s);let Q=D(11);return g(t.onStepClick(p,Q))}),r(12,"mat-step",16),S(13,"translate"),C(14,Ms,1,5,"app-cms-enum-record-status-selector",17),r(15,"app-ticketing-departemen-selector",18),S(16,"translate"),I("optionChange",function(p){return u(s),g(t.onActionSelectSource(p))}),a(),C(17,ys,10,9,"div",19)(18,Rs,10,9,"div",19)(19,Ns,10,9,"div",19)(20,Ps,10,9,"div",19)(21,Hs,10,10,"div",19)(22,qs,7,4,"div",20)(23,Ws,7,7,"div",21),a(),r(24,"mat-step",22),S(25,"translate"),r(26,"p"),d(27),S(28,"translate"),a(),C(29,js,7,6,"div",19)(30,Us,7,6,"div",19)(31,Qs,7,7,"div",21),a()()()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),_(" ",t.formInfo.formTitle," "),o(2),_(" ",h(7,22,"TITLE.Be_Careful_When_Entering_Information")," "),o(6),c("label",x(h(13,24,"TITLE.REQUIRED_INFORMATION"))),o(2),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",h(16,26,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessAddField)),o(2),c("ngIf",t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.accessWatchField),o(),c("ngIf",t.fieldsInfo.email==null?null:t.fieldsInfo.email.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow),o(),c("label",x(h(25,28,"TITLE.REST_OF_THE_INFORMATION"))),o(3),b(h(28,30,"TITLE.Rest_of_Information")),o(2),c("ngIf",t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.accessWatchField),o(),c("ngIf",t.fieldsInfo.deviceInformation==null?null:t.fieldsInfo.deviceInformation.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[F,_e,ee,te,Se,Te,ve,Ce,fe,he,fn,un,gn,Ee,mn,W,Cn,In,bn,Mn,Me,H,Ae,B],encapsulation:2});var jn=Bi;var zs=["vform"];function Ks(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",23),A("modelChange",function(t){u(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Js(n,l){n&1&&T(0,"i",30)}function Ys(n,l){n&1&&T(0,"i",31)}function Xs(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function Zs(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",25),d(2),a(),r(3,"input",26,2),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.fullName,t)||(s.dataModel.fullName=t),g(t)}),a(),C(5,Js,1,0,"i",27)(6,Ys,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Xs,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle)),E("ngModel",i.dataModel.fullName),c("disabled",!(i.fieldsInfo.fullName!=null&&i.fieldsInfo.fullName.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function $s(n,l){n&1&&T(0,"i",30)}function ec(n,l){n&1&&T(0,"i",31)}function tc(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function ic(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",32),d(2),a(),r(3,"input",33,3),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),g(t)}),a(),C(5,$s,1,0,"i",27)(6,ec,1,0,"i",28),r(7,"em"),d(8),a(),C(9,tc,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function nc(n,l){n&1&&T(0,"i",30)}function oc(n,l){n&1&&T(0,"i",31)}function rc(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function ac(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",34),d(2),a(),r(3,"input",35,4),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),g(t)}),a(),C(5,nc,1,0,"i",27)(6,oc,1,0,"i",28),r(7,"em"),d(8),a(),C(9,rc,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle)),E("ngModel",i.dataModel.phoneNo),c("disabled",!(i.fieldsInfo.phoneNo!=null&&i.fieldsInfo.phoneNo.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function lc(n,l){n&1&&T(0,"i",30)}function sc(n,l){n&1&&T(0,"i",31)}function cc(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function dc(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",36),d(2),a(),r(3,"input",37,5),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.email,t)||(s.dataModel.email=t),g(t)}),a(),C(5,lc,1,0,"i",27)(6,sc,1,0,"i",28),r(7,"em"),d(8),a(),C(9,cc,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle)),E("ngModel",i.dataModel.email),c("disabled",!(i.fieldsInfo.email!=null&&i.fieldsInfo.email.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function pc(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",38),d(2),S(3,"translate"),a(),r(4,"textarea",39,6),S(6,"translate"),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),g(t)}),d(7,"                        "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),b(h(3,6,"TITLE.Description")),o(2),c("placeholder",x(h(6,8,"TITLE.Description"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessEditField)),o(5),_("",e.value.length," / 1000")}}function mc(n,l){if(n&1){let e=M();r(0,"div",40)(1,"label",41),d(2),a(),r(3,"input",42),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),g(t)}),a(),T(4,"mat-datepicker-toggle",43)(5,"mat-datepicker",44,7),a()}if(n&2){let e=D(6),i=m();o(2),b(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),o(),c("matDatepicker",e),E("ngModel",i.dataModel.expireDate),o(),c("for",e)}}function fc(n,l){if(n&1){let e=M();r(0,"div",45)(1,"button",46),I("click",function(){u(e);let t=m();return g(t.onActionBackToParent())}),d(2),S(3,"translate"),a(),r(4,"button",47),d(5),S(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),_(" ",h(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),_(" ",h(6,5,"ACTION.NEXT")," ")}}function uc(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",48),d(2),a(),r(3,"input",49,8),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.userIpAddress,t)||(s.dataModel.userIpAddress=t),g(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle)),E("ngModel",i.dataModel.userIpAddress),c("disabled",!(i.fieldsInfo.userIpAddress!=null&&i.fieldsInfo.userIpAddress.accessEditField)),o(3),_("",e.value.length," / 100")}}function gc(n,l){if(n&1){let e=M();r(0,"div",24)(1,"label",50),d(2),a(),r(3,"input",51,9),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.deviceInformation,t)||(s.dataModel.deviceInformation=t),g(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.deviceInformation==null?null:i.fieldsInfo.deviceInformation.fieldTitle)),E("ngModel",i.dataModel.deviceInformation),c("disabled",!(i.fieldsInfo.deviceInformation!=null&&i.fieldsInfo.deviceInformation.accessEditField)),o(3),_("",e.value.length," / 100")}}function Sc(n,l){if(n&1&&(r(0,"div",45)(1,"button",52),d(2),S(3,"translate"),a(),r(4,"button",53),d(5),S(6,"translate"),a()()),n&2){m();let e=D(9);o(2),_(" ",h(3,3,"ACTION.BEFOR")," "),o(2),c("disabled",!e.form.valid),o(),_(" ",h(6,5,"ACTION.SAVE")," ")}}var Oi=class Oi extends Lt{constructor(e,i,t,s,v,p,Q,J,xe,Re){super(p,new Oe,s,Re);this.data=e;this.activatedRoute=i;this.dialogRef=t;this.publicHelper=s;this.coreEnumService=v;this.ticketingTaskService=p;this.cmsToastrService=Q;this.router=J;this.cdr=xe;this.translate=Re;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new ie;this.dataModel=new Oe;this.dataModelResult=new ht;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new xt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestId=+e.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(e){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.setAccessDataType(St.Editor),this.ticketingTaskService.ServiceGetOneById(e).subscribe({next:t=>{this.dataAccessModel=t.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.publicHelper.processService.processStop(i),this.dataModelResult=t,this.formInfo.formSubmitAllow=!0,t.isSuccess?(this.dataModel=t.item,this.ticketingTaskService.ServiceTaskReaded(e).subscribe({next:s=>{},error:s=>{this.cmsToastrService.typeErrorGetOne(s)}})):this.cmsToastrService.typeErrorGetOne(t.errorMessage)},error:t=>{this.publicHelper.processService.processStop(i),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorGetOne(t)}})}DataEditContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTaskService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}}};Oi.\u0275fac=function(i){return new(i||Oi)(f(ue),f(Ie),f(re),f(N),f(U),f(Ge),f(O),f(oe),f(L),f(V))},Oi.\u0275cmp=R({type:Oi,selectors:[["app-ticketing-task-edit"]],viewQuery:function(i,t){if(i&1&&X(zs,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:32,vars:32,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=M();r(0,"div",10),T(1,"app-progress-spinner",11),r(2,"div",12)(3,"p",13),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",14,0),I("ngSubmit",function(){return u(s),g(t.onFormSubmit())}),r(10,"mat-horizontal-stepper",15,1),I("selectionChange",function(p){u(s);let Q=D(11);return g(t.onStepClick(p,Q))}),r(12,"mat-step",16),S(13,"translate"),C(14,Ks,1,5,"app-cms-enum-record-status-selector",17),r(15,"app-ticketing-departemen-selector",18),S(16,"translate"),I("optionChange",function(p){return u(s),g(t.onActionSelectSource(p))}),a(),C(17,Zs,10,9,"div",19)(18,ic,10,9,"div",19)(19,ac,10,9,"div",19)(20,dc,10,9,"div",19)(21,pc,10,10,"div",19)(22,mc,7,4,"div",20)(23,fc,7,7,"div",21),a(),r(24,"mat-step",22),S(25,"translate"),r(26,"p"),d(27),S(28,"translate"),a(),C(29,uc,7,6,"div",19)(30,gc,7,6,"div",19)(31,Sc,7,7,"div",21),a()()()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),_(" ",t.formInfo.formTitle," "),o(2),_(" ",h(7,22,"TITLE.Be_Careful_When_Entering_Information")," "),o(6),c("label",x(h(13,24,"TITLE.REQUIRED_INFORMATION"))),o(2),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",h(16,26,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessEditField)),o(2),c("ngIf",t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.accessWatchField),o(),c("ngIf",t.fieldsInfo.email==null?null:t.fieldsInfo.email.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow),o(),c("label",x(h(25,28,"TITLE.REST_OF_THE_INFORMATION"))),o(3),b(h(28,30,"TITLE.Rest_of_Information")),o(2),c("ngIf",t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.accessWatchField),o(),c("ngIf",t.fieldsInfo.deviceInformation==null?null:t.fieldsInfo.deviceInformation.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[F,_e,ee,te,Se,Te,ve,Ce,fe,he,fn,un,gn,Ee,mn,W,Cn,In,bn,Mn,Me,H,Ae,B],encapsulation:2});var Un=Oi;var hc=()=>[5,10,20,100],_c=n=>({background:n});function Tc(n,l){if(n&1){let e=M();r(0,"a",40),I("click",function(){u(e);let t=m();return g(t.onActionBackToParent())}),T(1,"i",41),a()}}function vc(n,l){if(n&1){let e=M();r(0,"div",42)(1,"a",43),I("click",function(){u(e);let t=m();return g(t.onActionButtonNewRow())}),T(2,"i",44)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.ADD")))}function Cc(n,l){if(n&1){let e=M();r(0,"div",42)(1,"a",10),I("click",function(){u(e);let t=m();return g(t.onActionButtonAnswerList())}),T(2,"i",46)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.ANSWERS")))}function Ic(n,l){if(n&1){let e=M();r(0,"div",42)(1,"a",47),I("click",function(){u(e);let t=m();return g(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",48)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.EDIT")))}function bc(n,l){if(n&1){let e=M();r(0,"div",42)(1,"a",49),I("click",function(){u(e);let t=m();return g(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",50)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.DELETE")))}function Mc(n,l){if(n&1){let e=M();r(0,"div",42)(1,"a",51),I("click",function(){u(e);let t=m();return g(t.onActionButtonAnswerList(t.tableRowSelected))}),T(2,"i",46)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.ANSWERS")))}function kc(n,l){if(n&1){let e=M();r(0,"div",42)(1,"a",52),I("click",function(){u(e);let t=m();return g(t.onActionButtonViewRow(t.tableRowSelected))}),T(2,"i",53)(3,"br"),a(),r(4,"p",45),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.VIEW")))}function wc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Ec(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.id," ")}}function yc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Ac(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),_(" ",h(3,3,h(2,1,e.linkSiteId))," ")}}function Dc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function xc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.linkMemberId," ")}}function Rc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function Lc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.title," ")}}function Fc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Vc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),_(" ",h(2,1,e.createdDate)," ")}}function Nc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Bc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),_(" ",h(2,1,e.updatedDate)," ")}}function Oc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.ticketStatus==null?null:e.fieldsInfo.ticketStatus.fieldTitle," ")}}function Gc(n,l){if(n&1&&(r(0,"mat-cell",55),d(1),S(2,"enums"),a()),n&2){let e=l.$implicit,i=m();c("ngStyle",qe(5,_c,i.publicHelper.RowStyleTicketStatus(e.ticketStatus))),o(),_(" ",ni(2,2,e.ticketStatus,i.dataModelEnumTicketStatusResult.listItems)," ")}}function Pc(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),_(" ",h(2,1,"TITLE.OPTION")," "))}function Hc(n,l){if(n&1&&(r(0,"mat-cell",56)(1,"button",57)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function qc(n,l){n&1&&T(0,"mat-header-row")}function Wc(n,l){if(n&1){let e=M();r(0,"mat-row",58),I("click",function(){let t=u(e).$implicit,s=m();return g(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=l.dataIndex,t=m();we("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var Gi=class Gi extends st{constructor(e,i,t,s,v,p,Q,J,xe,Re,wt,mt,ji){super(e,new Oe,mt,p,xe);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=v;this.tokenHelper=p;this.cmsStoreService=Q;this.cdr=J;this.translate=xe;this.ticketingEnumService=Re;this.pageInfo=wt;this.publicHelper=mt;this.dialog=ji;this.requestDepartemenId=0;this.requestLinkCmsUserId=0;this.requestTicketStatus=-1;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.dataModelEnumTicketStatusResult=new j;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Title","LinkMemberId","CreatedDate","UpdatedDate","TicketStatus"];this.tabledisplayedColumnsMobileSource=["Title","LinkMemberId","CreatedDate","UpdatedDate","TicketStatus"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Yn=>this.onSubmitOptionsSearch(Yn)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.activatedRoute.snapshot.paramMap.get("TicketStatus")&&(this.requestTicketStatus=+Number(this.activatedRoute.snapshot.paramMap.get("TicketStatus"))),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.getEnumTicketStatus(),this.tokenInfo=e,this.DataGetAll()})),this.getEnumTicketStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:e=>{this.dataModelEnumTicketStatusResult=e}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Oe);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.requestLinkCmsUserId>0&&(t.propertyName="LinkCmsUserId",t.value=this.requestLinkCmsUserId,i.filters.push(t)),this.requestTicketStatus>=0&&(t.propertyName="TicketStatus",t.value=this.requestTicketStatus,i.filters.push(t)),this.contentService.ServiceGetAll(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(jn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{linkDepartemenId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Vi,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Un,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonAnswerList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let v=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(v,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(v)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(v,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(this.translate.get("MESSAGE.All").subscribe(Q=>{i.set(Q,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(this.translate.get("MESSAGE.Active").subscribe(Q=>{i.set(Q,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.requestTicketStatus=-1,this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};Gi.\u0275fac=function(i){return new(i||Gi)(f(Ge),f(Ie),f(O),f(Rt),f(oe),f(le),f(ae),f(L),f(V),f(Ut),f(lt),f(N),f(ye))},Gi.\u0275cmp=R({type:Gi,selectors:[["app-ticketing-task-list"]],standalone:!1,features:[q],decls:63,vars:32,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkMemberId"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","TicketStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return u(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),g(p)}),I("optionOnActionButtonMemoRow",function(){return u(s),g(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),g(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),g(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),g(t.onActionButtonPrintRow())}),k(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return u(s),g(t.onActionSelectorSelect(p))}),a(),w(),ke(3,6)(4,7),k(5,8),C(6,Tc,2,0,"a",9),r(7,"a",10),I("click",function(){return u(s),g(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),I("click",function(){return u(s),g(t.onActionButtonReload())}),T(10,"i",12),a(),w(),k(11,13),r(12,"a",14),I("click",function(){return u(s),g(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),S(15,"translate"),a(),r(16,"a",14),I("click",function(){return u(s),g(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),S(19,"translate"),a(),w(),k(20,16),C(21,vc,7,3,"div",17)(22,Cc,7,3,"div",17),w(),k(23,18),C(24,Ic,7,3,"div",17)(25,bc,7,3,"div",17)(26,Mc,7,3,"div",17)(27,kc,7,3,"div",17),w(),k(28,19),r(29,"app-cms-search-list",20),A("optionsChange",function(p){return u(s),y(t.optionsSearch,p)||(t.optionsSearch=p),g(p)}),a(),r(30,"app-cms-statist-list",20),A("optionsChange",function(p){return u(s),y(t.optionsStatist,p)||(t.optionsStatist=p),g(p)}),a(),w(),k(31,21),r(32,"mat-table",22,0),I("matSortChange",function(){u(s);let p=D(33);return g(t.onTableSortData(p))}),k(34,23),C(35,wc,2,1,"mat-header-cell",24)(36,Ec,2,1,"mat-cell",25),w(),k(37,26),C(38,yc,2,1,"mat-header-cell",24)(39,Ac,4,5,"mat-cell",25),w(),k(40,27),C(41,Dc,2,1,"mat-header-cell",24)(42,xc,2,1,"mat-cell",25),w(),k(43,28),C(44,Rc,2,1,"mat-header-cell",24)(45,Lc,2,1,"mat-cell",25),w(),k(46,29),C(47,Fc,2,1,"mat-header-cell",24)(48,Vc,3,3,"mat-cell",25),w(),k(49,30),C(50,Nc,2,1,"mat-header-cell",24)(51,Bc,3,3,"mat-cell",25),w(),k(52,31),C(53,Oc,2,1,"mat-header-cell",24)(54,Gc,3,7,"mat-cell",32),w(),k(55,33),C(56,Pc,3,3,"mat-header-cell",34)(57,Hc,6,1,"mat-cell",35),w(),C(58,qc,1,0,"mat-header-row",36)(59,Wc,1,6,"mat-row",37),a(),w(),k(60,38),r(61,"mat-paginator",39,1),I("page",function(p){return u(s),g(t.onTablePageingData(p))}),a(),w(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.task.list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),_("",h(15,27,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),_("",h(19,29,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(26),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(31,hc)))},dependencies:[F,We,Ve,Ne,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Bt,Fe,B,ai,vt,Ct],encapsulation:2});var ei=Gi;var jc=["vform"];function Uc(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",12),A("modelChange",function(t){u(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Qc(n,l){n&1&&T(0,"i",19)}function zc(n,l){n&1&&T(0,"i",20)}function Kc(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function Jc(n,l){if(n&1){let e=M();r(0,"div",13)(1,"label",14),d(2),a(),r(3,"input",15,1),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),g(t)}),a(),C(5,Qc,1,0,"i",16)(6,zc,1,0,"i",17),r(7,"em"),d(8),a(),C(9,Kc,5,4,"mat-error",18),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Yc(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.fieldTitle," "),o(2),b(h(4,2,"MESSAGE.required"))}}function Xc(n,l){if(n&1){let e=M();r(0,"div",13)(1,"label",21),d(2),S(3,"translate"),a(),r(4,"textarea",22,2),S(6,"translate"),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),g(t)}),d(7,"                "),a(),r(8,"em"),d(9),a(),C(10,Yc,5,4,"mat-error",18),a()}if(n&2){let e=D(5),i=m();o(2),b(h(3,8,"TITLE.Description")),o(2),c("disabled",x(!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)))("placeholder",x(h(6,10,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),o(5),_("",e.value.length," / 2000"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Zc(n,l){if(n&1){let e=M();r(0,"div",23)(1,"button",24),I("click",function(){u(e);let t=m();return g(t.onFormCancel())}),T(2,"i",25),d(3),S(4,"translate"),a(),r(5,"button",26),T(6,"i",27),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),_(" ",h(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),_(" ",h(8,5,"ACTION.SAVE")," ")}}var Pi=class Pi extends Tt{constructor(e,i,t,s,v,p,Q,J){super(s,new ft,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingTemplateService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestParentId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.formMatcher=new zt;this.dataModelResult=new j;this.dataModel=new ft;this.formInfo=new ie;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=+e.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId)}ngOnInit(){this.translate.get("TITLE.Submit_New_Content").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Pi.\u0275fac=function(i){return new(i||Pi)(f(ue),f(re),f(U),f(Dt),f(O),f(N),f(L),f(V))},Pi.\u0275cmp=R({type:Pi,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,t){if(i&1&&X(jc,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:16,vars:13,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return u(s),g(t.onFormSubmit())}),C(10,Uc,1,5,"app-cms-enum-record-status-selector",8),r(11,"app-ticketing-departemen-selector",9),S(12,"translate"),I("optionChange",function(p){return u(s),g(t.onActionSelectorSelect(p))}),a(),C(13,Jc,10,8,"div",10)(14,Xc,11,12,"div",10)(15,Zc,9,7,"div",11),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),_(" ",t.formInfo.formTitle," "),o(2),_(" ",h(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",h(12,11,"TITLE.Department")),o(2),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[F,_e,ee,te,Se,Te,ve,Ce,fe,he,Ee,W,Me,H,Ae,B],encapsulation:2});var Qn=Pi;var $c=["vform"];function ed(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",12),A("modelChange",function(t){u(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function td(n,l){n&1&&T(0,"i",19)}function id(n,l){n&1&&T(0,"i",20)}function nd(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),b(h(4,2,"MESSAGE.required"))}}function od(n,l){if(n&1){let e=M();r(0,"div",13)(1,"label",14),d(2),a(),r(3,"input",15,1),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),g(t)}),a(),C(5,td,1,0,"i",16)(6,id,1,0,"i",17),r(7,"em"),d(8),a(),C(9,nd,5,4,"mat-error",18),a()}if(n&2){let e=D(4),i=m();o(2),b(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),_("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function rd(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),_(" ",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.fieldTitle," "),o(2),b(h(4,2,"MESSAGE.required"))}}function ad(n,l){if(n&1){let e=M();r(0,"div",13)(1,"label",21),d(2),S(3,"translate"),a(),r(4,"textarea",22,2),S(6,"translate"),A("ngModelChange",function(t){u(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),g(t)}),d(7,"                "),a(),r(8,"em"),d(9),a(),C(10,rd,5,4,"mat-error",18),a()}if(n&2){let e=D(5),i=m();o(2),b(h(3,8,"TITLE.Description")),o(2),c("disabled",x(!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)))("placeholder",x(h(6,10,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),o(5),_("",e.value.length," / 2000"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function ld(n,l){if(n&1){let e=M();r(0,"div",23)(1,"button",24),I("click",function(){u(e);let t=m();return g(t.onFormCancel())}),T(2,"i",25),d(3),S(4,"translate"),a(),r(5,"button",26),T(6,"i",27),d(7),S(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),_(" ",h(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),_(" ",h(8,5,"ACTION.SAVE")," ")}}var Hi=class Hi extends Lt{constructor(e,i,t,s,v,p,Q,J){super(s,new ft,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingTemplateService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new zt;this.dataModelResult=new ht;this.dataModel=new ft;this.dataFileModel=new Map;this.formInfo=new ie;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.setAccessLoad(),this.ticketingTemplateService.setAccessDataType(St.Editor),this.ticketingTemplateService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Hi.\u0275fac=function(i){return new(i||Hi)(f(ue),f(re),f(U),f(Dt),f(O),f(N),f(L),f(V))},Hi.\u0275cmp=R({type:Hi,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,t){if(i&1&&X($c,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:16,vars:13,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),S(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return u(s),g(t.onFormSubmit())}),C(10,ed,1,5,"app-cms-enum-record-status-selector",8),r(11,"app-ticketing-departemen-selector",9),S(12,"translate"),I("optionChange",function(p){return u(s),g(t.onActionSelectorSelect(p))}),a(),C(13,od,10,8,"div",10)(14,ad,11,12,"div",10)(15,ld,9,7,"div",11),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),_(" ",t.formInfo.formTitle," "),o(2),_(" ",h(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",h(12,11,"TITLE.Department")),o(2),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[F,_e,ee,te,Se,Te,ve,Ce,fe,he,Ee,W,Me,H,Ae,B],encapsulation:2});var zn=Hi;var sd=()=>[5,10,20,100],cd=n=>({display:n});function dd(n,l){if(n&1){let e=M();r(0,"a",37),I("click",function(){u(e);let t=m();return g(t.onActionBackToParent())}),T(1,"i",38),a()}}function pd(n,l){if(n&1){let e=M();r(0,"div",39)(1,"a",40),I("click",function(){u(e);let t=m();return g(t.onActionButtonNewRow())}),T(2,"i",41)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.ADD")))}function md(n,l){if(n&1){let e=M();r(0,"div",39)(1,"a",43),I("click",function(){u(e);let t=m();return g(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",44)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.EDIT")))}function fd(n,l){if(n&1){let e=M();r(0,"div",39)(1,"a",45),I("click",function(){u(e);let t=m();return g(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",46)(3,"br"),a(),r(4,"p",42),d(5),S(6,"translate"),a()()}n&2&&(o(5),b(h(6,1,"ACTION.DELETE")))}function ud(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function gd(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.id," ")}}function Sd(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function hd(n,l){if(n&1&&(r(0,"mat-cell"),d(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),_(" ",h(3,3,h(2,1,e.linkSiteId))," ")}}function _d(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Td(n,l){if(n&1&&T(0,"select",50),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,cd,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function vd(n,l){if(n&1&&(r(0,"mat-cell",48),S(1,"statusCellClass"),T(2,"i",48),S(3,"statusIconClass"),C(4,Td,1,5,"select",49),a()),n&2){let e=l.$implicit,i=m();c("ngClass",h(1,3,e.recordStatus)),o(2),c("ngClass",h(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Cd(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),_(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function Id(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),_(" ",e.title," ")}}function bd(n,l){n&1&&(r(0,"mat-header-cell"),d(1),S(2,"translate"),a()),n&2&&(o(),_(" ",h(2,1,"TITLE.OPTION")," "))}function Md(n,l){if(n&1&&(r(0,"mat-cell",51)(1,"button",52)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function kd(n,l){n&1&&T(0,"mat-header-row")}function wd(n,l){if(n&1){let e=M();r(0,"mat-row",53),I("click",function(){let t=u(e).$implicit,s=m();return g(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=l.dataIndex,t=m();we("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var qi=class qi extends st{constructor(e,i,t,s,v,p,Q,J,xe,Re,wt,mt){super(e,new ft,wt,p,J);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=v;this.tokenHelper=p;this.cdr=Q;this.translate=J;this.cmsStoreService=xe;this.pageInfo=Re;this.publicHelper=wt;this.dialog=mt;this.requestDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:ji=>this.onSubmitOptionsSearch(ji)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new ft);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent)),t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Qn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{parentId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(zn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.No_row_selected_for_editing").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let v=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(v,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(v)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(v)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};qi.\u0275fac=function(i){return new(i||qi)(f(Dt),f(Ie),f(O),f(Rt),f(oe),f(le),f(L),f(V),f(ae),f(lt),f(N),f(ye))},qi.\u0275cmp=R({type:qi,selectors:[["app-application-app-list"]],standalone:!1,features:[q],decls:51,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return u(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),g(p)}),I("optionOnActionButtonMemoRow",function(){return u(s),g(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),g(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),g(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),g(t.onActionButtonPrintRow())}),k(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return u(s),g(t.onActionSelectorSelect(p))}),a(),w(),ke(3,6)(4,7),k(5,8),C(6,dd,2,0,"a",9),r(7,"a",10),I("click",function(){return u(s),g(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),I("click",function(){return u(s),g(t.onActionButtonReload())}),T(10,"i",12),a(),w(),k(11,13),r(12,"a",14),I("click",function(){return u(s),g(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),S(15,"translate"),a(),r(16,"a",14),I("click",function(){return u(s),g(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),S(19,"translate"),a(),w(),k(20,16),C(21,pd,7,3,"div",17),w(),k(22,18),C(23,md,7,3,"div",17)(24,fd,7,3,"div",17),w(),k(25,19),r(26,"app-cms-search-list",20),A("optionsChange",function(p){return u(s),y(t.optionsSearch,p)||(t.optionsSearch=p),g(p)}),a(),r(27,"app-cms-statist-list",20),A("optionsChange",function(p){return u(s),y(t.optionsStatist,p)||(t.optionsStatist=p),g(p)}),a(),w(),k(28,21),r(29,"mat-table",22,0),I("matSortChange",function(){u(s);let p=D(30);return g(t.onTableSortData(p))}),k(31,23),C(32,ud,2,1,"mat-header-cell",24)(33,gd,2,1,"mat-cell",25),w(),k(34,26),C(35,Sd,2,1,"mat-header-cell",24)(36,hd,4,5,"mat-cell",25),w(),k(37,27),C(38,_d,2,1,"mat-header-cell",24)(39,vd,5,7,"mat-cell",28),w(),k(40,29),C(41,Cd,2,1,"mat-header-cell",24)(42,Id,2,1,"mat-cell",25),w(),k(43,30),C(44,bd,3,3,"mat-header-cell",31)(45,Md,6,1,"mat-cell",32),w(),C(46,kd,1,0,"mat-header-row",33)(47,wd,1,6,"mat-row",34),a(),w(),k(48,35),r(49,"mat-paginator",36,1),I("page",function(p){return u(s),g(t.onTablePageingData(p))}),a(),w(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),_("",h(15,24,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),_("",h(19,26,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(17),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(28,sd)))},dependencies:[Et,F,We,Ve,Ne,W,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Ft,Bt,Fe,B,vt,Vt,Nt],encapsulation:2});var Xi=qi;var Wi=class Wi{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};Wi.\u0275fac=function(e){return new(e||Wi)},Wi.\u0275cmp=R({type:Wi,selectors:[["app-ticketing"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&T(0,"router-outlet")},dependencies:[lo],encapsulation:2});var Kn=Wi;var Ed=[{path:"",component:Kn,data:{title:"ROUTE.TICKETING"},children:[{path:"config",loadChildren:()=>import("./chunk-R4QMHNWN.js").then(n=>n.TicketingConfigModule),data:{title:"ROUTE.TICKETING"}},{path:"departemen",component:Fn,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/add/",component:Wt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/edit/:Id",component:Wt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemenlog/DepartemenId/:DepartemenId",component:Ki,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"departemenlog/OperatorId/:OperatorId",component:Ki,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"faq",component:Hn,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/:DepartemenId",component:Ji,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/list",component:Ji,data:{title:"ROUTE.TICKETING.LIST"}},{path:"template",component:Xi,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"template/:DepartemenId",component:Xi,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"contactus",component:Wn,data:{title:"ROUTE.TICKETING.CONTACTUS"}},{path:"task",component:ei,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/listTicketStatus/:TicketStatus",component:ei,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list",component:Yi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list/LinkCmsUserId/:LinkCmsUserId",component:Yi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/:DepartemenId",component:ei,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/LinkCmsUserId/:LinkCmsUserId",component:ei,data:{title:"ROUTE.TICKETING.TASK"}},{path:"answer",component:Ui,data:{title:"ROUTE.TICKETING.ANSWER"}},{path:"answer/LinkTaskId/:LinkTaskId",component:Ui,data:{title:"ROUTE.TICKETING.ANSWER"}}]}],ti=class ti{};ti.\u0275fac=function(e){return new(e||ti)},ti.\u0275mod=ln({type:ti}),ti.\u0275inj=rn({imports:[Xn.forChild(Ed),Xn]});var Jn=ti;var ii=class ii{};ii.\u0275fac=function(e){return new(e||ii)},ii.\u0275mod=ln({type:ii}),ii.\u0275inj=rn({providers:[co,U,fo,mo,Ut,Be,hn,uo,Ge,At,yt,Dt,Rt],imports:[io,Jn,oo,ro.withConfig({warnOnNgModelWithFormControl:"never"}),yo,Do,Eo]});var Fo=ii;export{Fo as TicketingModule};
