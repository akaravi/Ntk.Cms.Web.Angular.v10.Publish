import{a as ri,b as li}from"./chunk-U3OZG6MI.js";import{a as ai}from"./chunk-VCU6MBKY.js";import{a as oi}from"./chunk-NVBTBL2I.js";import{a as An}from"./chunk-AHANMT4X.js";import{a as Tn}from"./chunk-LEI7PMQX.js";import{a as ni}from"./chunk-NEKMKWQ2.js";import{a as wn}from"./chunk-QTZPO3YE.js";import{a as En}from"./chunk-CAGTVCTZ.js";import{a as xn}from"./chunk-TNJYT7QT.js";import{c as In,d as Mn,e as vn,f as ii,g as yn,h as bn}from"./chunk-LVBHI322.js";import{a as ti}from"./chunk-UKBR3SQJ.js";import{a as ae}from"./chunk-TOFJZ4ZQ.js";import{a as Jt}from"./chunk-IQNLTKGO.js";import{a as $t}from"./chunk-BPAAJUWK.js";import{a as Re}from"./chunk-ERXRENUY.js";import{a as Zt,b as hn}from"./chunk-LWVSSOXS.js";import{a as ei}from"./chunk-SZU2MHTC.js";import{a as Yt}from"./chunk-IXPEP4O3.js";import"./chunk-FYZDQGUW.js";import{a as Sn}from"./chunk-R46RXLEJ.js";import{a as G}from"./chunk-SH5H7URI.js";import{e as _n,f as N}from"./chunk-Y6D2OAVU.js";import{$a as ge,Aa as Ft,Ab as $e,Ba as an,Bb as et,Cb as tt,Da as Lt,Db as it,Ea as Bt,Eb as jt,Fa as Ot,Fc as nt,Hb as un,I as fe,Ib as qt,Ic as ot,J as ne,Jb as Ut,K as oe,Kb as zt,Kc as O,La as rn,Lb as Kt,M as Ji,Ma as xe,Mb as Qt,N as Yi,Na as Ae,Nb as Xt,Nc as Cn,Oa as ze,Ob as fn,Qb as L,Rb as B,U as Zi,Z as xt,_ as we,a as Ki,aa as $i,ba as At,bb as U,bc as De,ca as Dt,cc as gn,da as en,ea as tn,fa as Ue,g as Tt,gb as ln,hb as sn,ia as nn,jb as dn,lb as cn,m as K,mb as pn,nb as mn,ob as Nt,p as Q,pb as Pt,q as be,qb as Gt,rb as Wt,s as Ee,sb as Ht,t as Qi,u as ie,ub as Ke,v as Te,va as on,vb as Qe,w as wt,wb as Xe,xa as Rt,xb as Je,ya as kt,yb as Ye,z as Xi,za as Vt,zb as Ze}from"./chunk-XCUKUAEM.js";import{$b as vi,Ab as Pi,Bd as ye,Ca as k,Cb as Z,Db as $,Eb as ee,Ed as bt,F as Fi,Fa as n,Fd as H,Ha as Me,I as Li,Ib as A,Ic as Wi,Jc as je,Jd as pe,Kb as W,Kc as P,Kd as X,Ld as te,Nb as p,Oa as M,Ob as b,Oc as Hi,P as Bi,Pb as h,Q as Oi,Qb as Gi,Qc as yt,Sa as V,Ta as Mt,Tb as T,Td as q,Ub as w,Vb as x,Wa as ce,Wb as y,Wc as ji,Xb as Ne,Xd as qi,Y as It,Ya as I,_b as vt,cc as m,da as f,db as Be,dc as u,ea as g,eg as Ui,jb as d,kb as a,lb as r,mb as v,nd as ve,oj as Ei,p as ki,pj as z,pq as Et,q as Vi,qb as D,qj as me,qq as zi,rb as R,rq as qe,sb as Oe,sd as yi,tb as E,vc as F,vd as bi,vj as J,wb as S,wj as se,xd as ht,xj as Pe,xq as Ti,yb as C,yq as ue,zb as Ni}from"./chunk-KSVKKJSG.js";import{f as Ri,i as le}from"./chunk-SEDBTTTN.js";var at=class at{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};at.\u0275fac=function(e){return new(e||at)},at.\u0275cmp=V({type:at,selectors:[["app-catalog"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&v(0,"router-outlet")},dependencies:[zi],encapsulation:2});var si=at;var Ln=Ri(fn());function Gn(o,l){if(o&1){let e=E();a(0,"mat-tree-node",10),v(1,"button",11),a(2,"mat-checkbox",12),S("change",function(){let t=f(e).$implicit,s=C();return g(s.todoItemSelectionToggle(t))}),p(3),r()()}if(o&2){let e=l.$implicit,i=C();n(2),d("checked",i.checklistSelection.isSelected(e))("indeterminate",i.descendantsPartiallySelected(e)),n(),b(e.title)}}function Wn(o,l){if(o&1){let e=E();a(0,"mat-tree-node",13)(1,"button",14)(2,"mat-icon",15),p(3),r()(),a(4,"mat-checkbox",16),S("change",function(){let t=f(e).$implicit,s=C();return g(s.checklistSelection.toggle(t))}),p(5),r()()}if(o&2){let e=l.$implicit,i=C(),t=A(8);d("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),n(),Be("type","button")("aria-label","Toggle "+e.title),n(2),h(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),n(),d("checked",i.checklistSelection.isSelected(e)),n(),b(e.title)}}var rt=class rt{constructor(l,e,i,t,s,_,c,j,Y){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.cdr=t;this.publicHelper=s;this.translate=_;this.tokenHelper=c;this.cmsStoreService=j;this.dialog=Y;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=[];this.dataModelResult=new H;this.filterModel=new X;this.dataSource=new Xt;this.runComplate=!1;this.optionSelectChecked=new Me;this.optionSelectDisChecked=new Me;this.optionModelChange=new Me;this.unsubscribe=[];this.checklistSelection=new nn(!0);this.hasChild=(l,e)=>!!e.children&&e.children.length>0;this.childrenAccessor=l=>l.children??[];this.hasNoContent=(l,e)=>e.children;this.treeControl=new un(l=>l.children);this.publicHelper.processService.cdr=this.cdr,this.checklistSelection.changed.subscribe(de=>{if(!this.runComplate)return;let Mi=[];this.checklistSelection.selected.forEach(Le=>{Mi.push(Le.id)}),this.optionModelChange.emit(Mi),de.added&&de.added.length>0&&de.added.forEach(Le=>{this.optionSelectChecked.emit(Le.id)}),de.removed&&de.removed.length>0&&de.removed.forEach(Le=>{this.optionSelectDisChecked.emit(Le.id)})})}set optionModel(l){this.dataModelSelect=l,this.loadCheked()}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>le(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}loadCheked(){this.runComplate=!1,this.CompileDataByCheked(this.dataModelResult.listItems,this.dataModelSelect),this.runComplate=!0}CompileDataByCheked(l,e){if(!(l?.length>0))return!1;let i=!1;for(let t of l){let s=!1;e?.includes(t.id)?(this.checklistSelection.select(t),i=!0):this.checklistSelection.deselect(t),t.children?.length>0&&(s=this.CompileDataByCheked(t.children,e),s&&(i=!0,t.isExpanded=!0))}return i}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems,this.loadCheked()):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.publicHelper.processService.processStop(l),this.cmsToastrService.typeError(e)}})}descendantsAllSelected(l){return this.treeControl.getDescendants(l).every(i=>this.checklistSelection.isSelected(i))}descendantsPartiallySelected(l){return this.treeControl.getDescendants(l).some(t=>this.checklistSelection.isSelected(t))&&!this.descendantsAllSelected(l)}todoItemSelectionToggle(l){this.checklistSelection.toggle(l);let e=this.treeControl.getDescendants(l);this.checklistSelection.isSelected(l)?this.checklistSelection.select(...e):this.checklistSelection.deselect(...e)}};rt.\u0275fac=function(e){return new(e||rt)(M(O),M(q),M(z),M(F),M(N),M(L),M(ot),M(nt),M(ze))},rt.\u0275cmp=V({type:rt,selectors:[["app-catalog-category-treeselector"]],inputs:{optionModel:"optionModel"},outputs:{optionSelectChecked:"optionSelectChecked",optionSelectDisChecked:"optionSelectDisChecked",optionModelChange:"optionModelChange"},standalone:!1,decls:12,vars:10,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"change","checked","indeterminate"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[1,"checklist-leaf-node",3,"change","checked"]],template:function(e,i){e&1&&(a(0,"app-cms-html-tree",1),D(1,2),p(2),m(3,"translate"),R(),Oe(4,3),D(5,4),v(6,"app-progress-spinner",5),a(7,"mat-tree",6,0),I(9,Gn,4,3,"mat-tree-node",7)(10,Wn,6,7,"mat-tree-node",8),r(),R(),Oe(11,9),r()),e&2&&(d("optionHeaderDisplay",!0)("optionActionMainDisplay",!1)("optionFooterDisplay",!1),n(2),h(" ",u(3,8,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),n(4),d("optionsInfoAreaId",i.constructorInfoAreaId),n(),d("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),n(3),d("matTreeNodeDefWhen",i.hasChild))},dependencies:[Ue,on,ge,Ut,zt,Qt,Kt,qt,G,ni,B],encapsulation:2});var lt=rt;var to=["vform"];function io(o,l){if(o&1){let e=E();a(0,"app-cms-enum-record-status-selector",82),x("modelChange",function(t){f(e);let s=C();return w(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),r()}if(o&2){let e=C();T("model",e.dataModel.recordStatus),d("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function no(o,l){o&1&&(a(0,"mat-error"),p(1," Title is "),a(2,"strong"),p(3),m(4,"translate"),r()()),o&2&&(n(3),b(u(4,1,"MESSAGE.required")))}function oo(o,l){o&1&&(a(0,"mat-error"),p(1," Description is "),a(2,"strong"),p(3),m(4,"translate"),r()()),o&2&&(n(3),b(u(4,1,"MESSAGE.required")))}function ao(o,l){if(o&1){let e=E();a(0,"div",83)(1,"label",84),p(2),r(),a(3,"input",85),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModel.fromDate,t)||(s.dataModel.fromDate=t),g(t)}),r(),v(4,"mat-datepicker-toggle",86)(5,"mat-datepicker",87,13),r()}if(o&2){let e=A(6),i=C();n(2),b(i.fieldsInfo.fromDate==null?null:i.fieldsInfo.fromDate.fieldTitle),n(),d("placeholder",y(i.fieldsInfo.fromDate==null?null:i.fieldsInfo.fromDate.fieldTitle))("disabled",y(!(i.fieldsInfo.fromDate!=null&&i.fieldsInfo.fromDate.accessEditField)))("matDatepicker",e),T("ngModel",i.dataModel.fromDate),n(),d("for",e)}}function ro(o,l){if(o&1){let e=E();a(0,"div",83)(1,"label",88),p(2),r(),a(3,"input",89),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),g(t)}),r(),v(4,"mat-datepicker-toggle",86)(5,"mat-datepicker",87,14),r()}if(o&2){let e=A(6),i=C();n(2),b(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),n(),d("placeholder",y(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle))("disabled",y(!(i.fieldsInfo.expireDate!=null&&i.fieldsInfo.expireDate.accessEditField)))("matDatepicker",e),T("ngModel",i.dataModel.expireDate),n(),d("for",e)}}function lo(o,l){if(o&1){let e=E();a(0,"div",90)(1,"button",91),S("click",function(){f(e);let t=C();return g(t.onActionBackToParent())}),p(2),m(3,"translate"),r(),a(4,"button",92),p(5),m(6,"translate"),r()()}if(o&2){C();let e=A(11);n(2),h(" ",u(3,3,"ACTION.BACK")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.NEXT")," ")}}function so(o,l){if(o&1){let e=E();a(0,"div",93)(1,"button",91),S("click",function(){f(e);let t=C();return g(t.onActionBackToParent())}),p(2),m(3,"translate"),r(),a(4,"button",92),p(5),m(6,"translate"),r()()}if(o&2){C();let e=A(11);n(2),h(" ",u(3,3,"ACTION.BACK")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.NEXT")," ")}}function co(o,l){if(o&1){let e=E();a(0,"mat-chip",94),S("removed",function(){let t=f(e).$implicit,s=C();return g(s.removeTag(t))}),p(1),a(2,"button",95)(3,"mat-icon"),p(4,"cancel"),r()()()}if(o&2){let e=l.$implicit;n(),h(" ",e," ")}}function po(o,l){if(o&1&&(a(0,"div",93)(1,"button",96),p(2),m(3,"translate"),r(),a(4,"button",92),p(5),m(6,"translate"),r()()),o&2){C();let e=A(11);n(2),h(" ",u(3,3,"ACTION.BEFOR")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.NEXT")," ")}}function mo(o,l){if(o&1&&(v(0,"img",97),m(1,"cmsthumbnail")),o&2){let e=C();d("src",y(u(1,2,e.dataModel.linkMainImageIdSrc)),k)}}function uo(o,l){if(o&1&&(a(0,"audio",98),v(1,"source",99),m(2,"cmsthumbnail"),p(3," Your browser does not support the audio tag. "),r()),o&2){let e=C();n(),d("src",y(u(2,2,e.dataModel.linkFilePodcastIdSrc)),k)}}function fo(o,l){if(o&1&&(a(0,"video",98),v(1,"source",100),p(2," Your browser does not support the video tag. "),r()),o&2){let e=C();n(),d("src",y(e.dataModel.linkFileMovieIdSrc),k)}}function go(o,l){if(o&1&&(a(0,"div",93)(1,"button",96),p(2),m(3,"translate"),r(),a(4,"button",92),p(5),m(6,"translate"),r()()),o&2){C();let e=A(11);n(2),h(" ",u(3,3,"ACTION.BEFOR")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.NEXT")," ")}}function Co(o,l){o&1&&(a(0,"mat-header-cell"),p(1),m(2,"translate"),r()),o&2&&(n(),h(" ",u(2,1,"TITLE.title")," "))}function _o(o,l){if(o&1&&(a(0,"mat-cell"),p(1),r()),o&2){let e=l.$implicit;n(),h(" ",e.title," ")}}function ho(o,l){o&1&&(a(0,"mat-header-cell"),p(1),m(2,"translate"),r()),o&2&&(n(),h(" ",u(2,1,"TITLE.TypeId")," "))}function So(o,l){if(o&1&&(a(0,"mat-cell"),p(1),r()),o&2){let e=l.$implicit;n(),h(" ",e.typeId," ")}}function Io(o,l){o&1&&(a(0,"mat-header-cell"),p(1),m(2,"translate"),r()),o&2&&(n(),h(" ",u(2,1,"TITLE.OPTION")," "))}function Mo(o,l){if(o&1){let e=E();a(0,"mat-cell",101)(1,"small",102),S("click",function(){let t=f(e).index,s=C();return g(s.onActionContentOtherInfoEditFromLIst(t))}),a(2,"mat-icon",103),p(3,"edit"),r(),p(4),m(5,"translate"),r(),p(6,"| "),a(7,"small",102),S("click",function(){let t=f(e).index,s=C();return g(s.onActionContentOtherInfoRemoveFromLIst(t))}),a(8,"mat-icon",104),p(9,"delete"),r(),p(10),m(11,"translate"),r()()}o&2&&(n(4),h("",u(5,2,"ACTION.EDIT")," "),n(6),h("",u(11,4,"ACTION.DELETE")," "))}function vo(o,l){o&1&&v(0,"mat-header-row")}function yo(o,l){if(o&1&&v(0,"mat-row"),o&2){let e=l.$implicit,i=l.dataIndex,t=C();W("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.title===t.contentOtherInfoSelected.title)}}function bo(o,l){if(o&1&&(a(0,"div",93)(1,"button",96),p(2),m(3,"translate"),r(),a(4,"button",92),p(5),m(6,"translate"),r()()),o&2){C();let e=A(11);n(2),h(" ",u(3,3,"ACTION.BEFOR")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.NEXT")," ")}}function Eo(o,l){if(o&1&&(a(0,"div",93)(1,"button",96),p(2),m(3,"translate"),r(),a(4,"button",105),p(5),m(6,"translate"),r()()),o&2){C();let e=A(11);n(2),h(" ",u(3,3,"ACTION.BEFOR")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.SAVE")," ")}}function To(o,l){o&1&&(a(0,"mat-icon"),p(1,"call_end"),r())}function wo(o,l){o&1&&(a(0,"mat-icon"),p(1,"call_end"),r())}function xo(o,l){o&1&&(a(0,"mat-icon"),p(1,"forum"),r())}function Ao(o,l){o&1&&(a(0,"mat-icon"),p(1,"forum"),r())}var dt=class dt extends Jt{constructor(e,i,t,s,_,c,j,Y){super(s,new se,i,Y);this.activatedRoute=e;this.publicHelper=i;this.coreEnumService=t;this.contentService=s;this.cmsToastrService=_;this.router=c;this.cdr=j;this.translate=Y;this.requestCategoryId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.mapOptonCenter=new Yt;this.formInfo=new te;this.dataModel=new se;this.dataModelResult=new H;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.selectFileTypePodcast=["mp3"];this.selectFileTypeMovie=["mp4","webm"];this.fileManagerOpenForm=!1;this.fileManagerOpenFormPodcast=!1;this.fileManagerOpenFormMovie=!1;this.keywordDataModel=[];this.similarDataModel=new Array;this.otherInfoDataModel=new Array;this.contentSimilarSelected=new se;this.contentOtherInfoSelected=new Pe;this.otherInfoTabledisplayedColumns=["Title","TypeId","Action"];this.otherInfoTabledataSource=new jt;this.appLanguage="fa";this.viewMap=!1;this.addOnBlurTag=!0;this.separatorKeysCodes=[13];this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestCategoryId=+Number(this.activatedRoute.snapshot.paramMap.get("CategoryId")),this.requestCategoryId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.DataGetAccess()}onActionFileSelectedLinkMainImageId(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}onActionFileSelectedLinkFilePodcastId(e){this.dataModel.linkFilePodcastId=e.id,this.dataModel.linkFilePodcastIdSrc=e.downloadLinksrc}onActionFileSelectedLinkFileMovieId(e){this.dataModel.linkFileMovieId=e.id,this.dataModel.linkFileMovieIdSrc=e.downloadLinksrc}receiveMap(e=this.mapModel){e&&(this.mapModel=e,this.mapModel.on("click",i=>{let t=i.latlng.lat,s=i.latlng.lng;if(this.mapMarker!==void 0&&this.mapModel.removeLayer(this.mapMarker),t===this.dataModel.geolocationlatitude&&s===this.dataModel.geolocationlongitude){this.dataModel.geolocationlatitude=null,this.dataModel.geolocationlongitude=null;return}this.mapMarker=Ln.marker([t,s]).addTo(this.mapModel),this.dataModel.geolocationlatitude=t,this.dataModel.geolocationlongitude=s}))}receiveZoom(e){}onFormSubmit(){if(!this.dataModel.linkContentCategoryIds||this.dataModel.linkContentCategoryIds.length<=0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}if(this.dataModel.keyword="",this.keywordDataModel&&this.keywordDataModel.length>0){let e=[];this.keywordDataModel.forEach(i=>{i.display?e.push(i.display):e.push(i)}),e&&e.length>0&&(this.dataModel.keyword=e.join(","))}this.DataAddContent()}DataAddContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contentService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd(),setTimeout(()=>this.router.navigate(["/catalog/content/"]),1e3)):this.cmsToastrService.typeErrorAdd(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorAdd(i)}})}onActionContentOtherInfoAddToLIst(){if(this.contentOtherInfoSelected){if(this.otherInfoDataModel.find(e=>e.title===this.contentOtherInfoSelected.title)){this.cmsToastrService.typeErrorAddDuplicate();return}this.otherInfoDataModel.push(this.contentOtherInfoSelected),this.contentOtherInfoSelected=new Pe,this.otherInfoTabledataSource.data=this.otherInfoDataModel}}onActionContentOtherInfoRemoveFromLIst(e){e<0||!this.otherInfoDataModel||this.otherInfoDataModel.length===0||(this.otherInfoDataModel.splice(e,1),this.otherInfoTabledataSource.data=this.otherInfoDataModel)}onActionContentOtherInfoEditFromLIst(e){e<0||!this.otherInfoDataModel||this.otherInfoDataModel.length===0||(this.contentOtherInfoSelected=this.otherInfoDataModel[e],this.otherInfoDataModel.splice(e,1),this.otherInfoTabledataSource.data=this.otherInfoDataModel)}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex&&(this.formGroup.valid||(this.cmsToastrService.typeErrorFormInvalid(),setTimeout(()=>{i.selectedIndex=e.previouslySelectedIndex},10)))}onActionBackToParent(){this.router.navigate(["/catalog/content/"])}onActionSelectorLocation(e){if(!e||!e.id||e.id<=0){this.translate.get("MESSAGE.Information_area_deleted").subscribe(i=>{this.cmsToastrService.typeWarningSelected(i)}),this.dataModel.linkLocationId=null;return}this.dataModel.linkLocationId=e.id}addTag(e){let i=(e.value||"").trim();i&&this.keywordDataModel.push(i),e.chipInput.clear()}removeTag(e){let i=this.keywordDataModel.indexOf(e);i>=0&&this.keywordDataModel.splice(i,1)}};dt.\u0275fac=function(i){return new(i||dt)(M(Et),M(N),M(q),M(me),M(O),M(qe),M(F),M(L))},dt.\u0275cmp=V({type:dt,selectors:[["app-catalog-content-add"]],viewQuery:function(i,t){if(i&1&&Z(to,5),i&2){let s;$(s=ee())&&(t.formGroup=s.first)}},standalone:!1,features:[ce],decls:176,vars:188,consts:[["vform","ngForm"],["stepper",""],["Title",""],["Description",""],["Source",""],["chipList",""],["tagInput",""],["LinkMainImageId",""],["LinkFilePodcastId",""],["LinkFileMovieId",""],["contentOtherInfoSelected_Title",""],["contentOtherInfoSelected_TypeId",""],["contentOtherInfoSelected_Source",""],["FromDate",""],["ExpireDate",""],[3,"Key","svg"],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","name","dataModel.title","type","text","minlength","3","maxlength","100","id","dataModel.title","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],[1,"pb-5"],["id","main","name","dataModel.body",3,"ngModelChange","placeholder","config","ngModel"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"optionModelChange","optionModel"],["class","ntk-button-row",4,"ngIf"],["for","dataModel.source",1,"color-highlight"],["matInput","","name","dataModel.source","type","text","dir","ltr","minlength","3","maxlength","500","id","dataModel.source",1,"form-control","validate-name","input-ltr",2,"text-align","left",3,"ngModelChange","ngModel","placeholder"],["appearance","fill",2,"width","100%"],["aria-label","'TITLE.key_word'|translate"],[3,"removed",4,"ngFor","ngForOf"],[3,"matChipInputTokenEnd","placeholder","matChipInputAddOnBlur","matChipInputFor","matChipInputSeparatorKeyCodes"],["state","file",3,"label"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","name","dataModel.linkMainImageId","type","text","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["controls","",4,"ngIf"],["matInput","","name","dataModel.linkFilePodcastId","type","text","id","dataModel.linkFilePodcastId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],["matInput","","name","dataModel.linkFileMovieId","type","text","id","dataModel.linkFileMovieId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"dataModelChange","dataModel"],[3,"dataModelChange","dataModel","dataImageModel"],["state","otherinfo",3,"label"],["for","contentOtherInfoSelected.title",1,"color-highlight"],["matInput","","name","contentOtherInfoSelected.title","type","text","minlength","3","maxlength","100","id","contentOtherInfoSelected.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","contentOtherInfoSelected.typeId",1,"color-highlight"],["matInput","","name","contentOtherInfoSelected.typeId","type","number","id","contentOtherInfoSelected.typeId",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","contentOtherInfoSelected.source",1,"color-highlight"],["matInput","","name","contentOtherInfoSelected.source","type","text","dir","ltr","placeholder","http://","maxlength","100","id","contentOtherInfoSelected.source",1,"form-control","validate-name",2,"text-align","left",3,"ngModelChange","ngModel"],["id","OtherInfo","name","contentOtherInfoSelected.htmlBody",3,"ngModelChange","placeholder","config","ngModel"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"example-container","mat-elevation-z8"],[3,"dataSource"],["matColumnDef","Title"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","TypeId"],["matColumnDef","Action"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected",4,"matRowDef","matRowDefColumns"],["state","loaction",3,"label"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["id","main-map",3,"map$","zoom$","optonCenter"],["matStepperIcon","main"],["matStepperIcon","seo"],["matStepperIcon","file"],["matStepperIcon","loaction"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.fromDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.fromDate","minlength","3","maxlength","100","id","dataModel.fromDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel","placeholder","disabled"],["matSuffix","",3,"for"],["touchUi",""],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","minlength","3","maxlength","100","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],[1,"ntk-button-row"],[3,"removed"],["type","button","matChipRemove","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["controls",""],["type","audio/mp3",3,"src"],["type","video/mp4",3,"src"],[1,"Action"],[3,"click"],["aria-hidden","false",2,"color","blue"],["aria-hidden","false",2,"color","red"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=E();v(0,"app-cms-guide-notice",15),a(1,"div",16),v(2,"app-progress-spinner",17),a(3,"div",18)(4,"p",19),p(5),m(6,"translate"),r(),a(7,"p"),p(8),m(9,"translate"),r(),a(10,"form",20,0),S("ngSubmit",function(){return f(s),g(t.onFormSubmit())}),p(12),a(13,"mat-vertical-stepper",21,1),S("selectionChange",function(c){f(s);let j=A(14);return g(t.onStepClick(c,j))}),a(15,"mat-step",22),m(16,"translate"),I(17,io,1,5,"app-cms-enum-record-status-selector",23),a(18,"div",24)(19,"label",25),p(20),r(),a(21,"input",26,2),x("ngModelChange",function(c){return f(s),w(t.dataModel.title,c)||(t.dataModel.title=c),g(c)}),r(),a(23,"em"),p(24),r(),I(25,no,5,3,"mat-error",27),r(),a(26,"div",24)(27,"label",28),p(28),r(),a(29,"textarea",29,3),x("ngModelChange",function(c){return f(s),w(t.dataModel.description,c)||(t.dataModel.description=c),g(c)}),r(),a(31,"em"),p(32),r(),I(33,oo,5,3,"mat-error",27),r(),I(34,ao,7,8,"div",30)(35,ro,7,8,"div",30),v(36,"hr",31),a(37,"angular-editor",32),m(38,"translate"),x("ngModelChange",function(c){return f(s),w(t.dataModel.body,c)||(t.dataModel.body=c),g(c)}),r(),I(39,lo,7,7,"div",33),r(),a(40,"mat-step",34),m(41,"translate"),a(42,"app-catalog-category-treeselector",35),x("optionModelChange",function(c){return f(s),w(t.dataModel.linkContentCategoryIds,c)||(t.dataModel.linkContentCategoryIds=c),g(c)}),r(),v(43,"br"),I(44,so,7,7,"div",36),r(),a(45,"mat-step",34),m(46,"translate"),a(47,"p"),p(48),m(49,"translate"),r(),a(50,"div",24)(51,"label",37),p(52),m(53,"translate"),r(),a(54,"input",38,4),m(56,"translate"),x("ngModelChange",function(c){return f(s),w(t.dataModel.source,c)||(t.dataModel.source=c),g(c)}),r(),a(57,"em"),p(58),r()(),a(59,"mat-form-field",39)(60,"mat-label"),p(61),m(62,"translate"),r(),a(63,"mat-chip-grid",40,5),I(65,co,5,1,"mat-chip",41),a(66,"input",42,6),m(68,"translate"),S("matChipInputTokenEnd",function(c){return f(s),g(t.addTag(c))}),r()()(),I(69,po,7,7,"div",36),r(),a(70,"mat-step",43),m(71,"translate"),a(72,"p"),p(73),m(74,"translate"),r(),a(75,"div",44)(76,"a",45),m(77,"cmsthumbnail"),I(78,mo,2,4,"img",46),r()(),a(79,"div",47)(80,"div",24)(81,"label",48),S("click",function(){return f(s),g(t.fileManagerOpenForm=!0)}),p(82),m(83,"translate"),r(),a(84,"input",49,7),m(86,"translate"),x("ngModelChange",function(c){return f(s),w(t.dataModel.linkMainImageId,c)||(t.dataModel.linkMainImageId=c),g(c)}),S("click",function(){return f(s),g(t.fileManagerOpenForm=!0)}),r()(),a(87,"cms-file-manager",50),S("itemSelected",function(c){return f(s),g(t.onActionFileSelectedLinkMainImageId(c))}),x("openFormChange",function(c){return f(s),w(t.fileManagerOpenForm,c)||(t.fileManagerOpenForm=c),g(c)}),r()(),a(88,"div",44),I(89,uo,4,4,"audio",51),r(),a(90,"div",47)(91,"div",24)(92,"input",52,8),m(94,"translate"),x("ngModelChange",function(c){return f(s),w(t.dataModel.linkFilePodcastId,c)||(t.dataModel.linkFilePodcastId=c),g(c)}),S("click",function(){return f(s),g(t.fileManagerOpenFormPodcast=!0)}),r()(),a(95,"cms-file-manager",50),S("itemSelected",function(c){return f(s),g(t.onActionFileSelectedLinkFilePodcastId(c))}),x("openFormChange",function(c){return f(s),w(t.fileManagerOpenFormPodcast,c)||(t.fileManagerOpenFormPodcast=c),g(c)}),r()(),a(96,"div",44),I(97,fo,3,2,"video",51),r(),a(98,"div",47)(99,"div",24)(100,"input",53,9),m(102,"translate"),x("ngModelChange",function(c){return f(s),w(t.dataModel.linkFileMovieId,c)||(t.dataModel.linkFileMovieId=c),g(c)}),S("click",function(){return f(s),g(t.fileManagerOpenFormMovie=!0)}),r()(),a(103,"cms-file-manager",50),S("itemSelected",function(c){return f(s),g(t.onActionFileSelectedLinkFileMovieId(c))}),x("openFormChange",function(c){return f(s),w(t.fileManagerOpenFormMovie,c)||(t.fileManagerOpenFormMovie=c),g(c)}),r()(),a(104,"h3"),p(105),m(106,"translate"),r(),a(107,"app-cms-360-image-list",54),x("dataModelChange",function(c){return f(s),w(t.dataModel.file360Views,c)||(t.dataModel.file360Views=c),g(c)}),r(),v(108,"br"),a(109,"h3"),p(110),m(111,"translate"),r(),a(112,"app-cms-360-tour-list",55),x("dataModelChange",function(c){return f(s),w(t.dataModel.file360Tour,c)||(t.dataModel.file360Tour=c),g(c)}),r(),I(113,go,7,7,"div",36),r(),a(114,"mat-step",56),m(115,"translate"),a(116,"P"),p(117),m(118,"translate"),r(),a(119,"div",24)(120,"label",57),p(121),r(),a(122,"input",58,10),x("ngModelChange",function(c){return f(s),w(t.contentOtherInfoSelected.title,c)||(t.contentOtherInfoSelected.title=c),g(c)}),r(),a(124,"em"),p(125),r()(),a(126,"div",24)(127,"label",59),p(128),m(129,"translate"),r(),a(130,"input",60,11),m(132,"translate"),x("ngModelChange",function(c){return f(s),w(t.contentOtherInfoSelected.typeId,c)||(t.contentOtherInfoSelected.typeId=c),g(c)}),r()(),a(133,"div",24)(134,"label",61),p(135),m(136,"translate"),r(),a(137,"input",62,12),x("ngModelChange",function(c){return f(s),w(t.contentOtherInfoSelected.source,c)||(t.contentOtherInfoSelected.source=c),g(c)}),r(),a(139,"em"),p(140),r()(),a(141,"angular-editor",63),m(142,"translate"),x("ngModelChange",function(c){return f(s),w(t.contentOtherInfoSelected.htmlBody,c)||(t.contentOtherInfoSelected.htmlBody=c),g(c)}),r(),a(143,"button",64),S("click",function(){return f(s),g(t.onActionContentOtherInfoAddToLIst())}),p(144),m(145,"translate"),r(),a(146,"p"),p(147),m(148,"translate"),r(),a(149,"div",65)(150,"mat-table",66),D(151,67),I(152,Co,3,3,"mat-header-cell",68)(153,_o,2,1,"mat-cell",69),R(),D(154,70),I(155,ho,3,3,"mat-header-cell",68)(156,So,2,1,"mat-cell",69),R(),D(157,71),I(158,Io,3,3,"mat-header-cell",68)(159,Mo,12,6,"mat-cell",72),R(),I(160,vo,1,0,"mat-header-row",73)(161,yo,1,6,"mat-row",74),r()(),I(162,bo,7,7,"div",36),r(),a(163,"mat-step",75),m(164,"translate"),a(165,"app-cms-location-selector",76),m(166,"translate"),S("optionChange",function(c){return f(s),g(t.onActionSelectorLocation(c))}),r(),a(167,"p"),p(168),m(169,"translate"),r(),a(170,"app-cms-map",77),S("map$",function(c){return f(s),g(t.receiveMap(c))})("zoom$",function(c){return f(s),g(t.receiveZoom(c))}),r(),I(171,Eo,7,7,"div",36),r(),I(172,To,2,0,"ng-template",78)(173,wo,2,0,"ng-template",79)(174,xo,2,0,"ng-template",80)(175,Ao,2,0,"ng-template",81),r()()()()}if(i&2){let s=A(22),_=A(30),c=A(55),j=A(64),Y=A(123),de=A(138);d("Key","catalog.content.list.add")("svg","assets/media/svg/icons/General/Notifications1.svg"),n(2),d("optionsInfoAreaId",t.constructorInfoAreaId),n(3),h(" ",u(6,126,"TITLE.EDIT_USER_ACCOUNT")," "),n(3),h(" ",u(9,128,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),h(" ",t.formInfo.formTitle," "),n(3),d("label",y(u(16,130,"TITLE.REQUIRED_INFORMATION"))),n(2),d("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),n(3),b(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),d("placeholder",y(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),T("ngModel",t.dataModel.title),n(3),h("",s.value.length," / 100"),n(),d("ngIf",s.errors==null?null:s.errors.required),n(3),b(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),n(),d("placeholder",y(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),T("ngModel",t.dataModel.description),n(3),h("",_.value.length," / 500"),n(),d("ngIf",_.errors==null?null:_.errors.required),n(),d("ngIf",t.fieldsInfo.fromDate==null?null:t.fieldsInfo.fromDate.accessWatchField),n(),d("ngIf",t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.accessWatchField),n(2),d("placeholder",u(38,132,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),T("ngModel",t.dataModel.body),n(2),d("ngIf",t.formInfo.submitButtonEnabled),n(),d("label",y(u(41,134,"TITLE.Categories"))),n(2),T("optionModel",t.dataModel.linkContentCategoryIds),n(2),d("ngIf",t.formInfo.submitButtonEnabled),n(),d("label",y(u(46,136,"TITLE.Search_Engines"))),n(3),h(" ",u(49,138,"TITLE.This_section_helps_search_engines_better_index_content")," "),n(4),b(u(53,140,"TITLE.Source_page_address")),n(2),d("placeholder",y(u(56,142,"TITLE.Content_reference_website_link"))),T("ngModel",t.dataModel.source),n(4),h("",c.value.length," / 500"),n(3),b(u(62,144,"TITLE.Choose_keywords_relative_to_the_content")),n(4),d("ngForOf",t.keywordDataModel),n(),d("placeholder",u(68,146,"TITLE.key_word"))("matChipInputAddOnBlur",t.addOnBlurTag)("matChipInputFor",j)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes),n(3),d("ngIf",t.formInfo.submitButtonEnabled),n(),d("label",y(u(71,148,"TITLE.ATTACH_FILES"))),n(3),b(u(74,150,"TITLE.CONTENT_ATTACH_FILES")),n(3),d("href",y(u(77,152,t.dataModel.linkMainImageIdSrc)),k),n(2),d("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),n(4),b(u(83,154,"TITLE.Original_Photo")),n(2),d("placeholder",y(u(86,156,"TITLE.Original_File_ID"))),T("ngModel",t.dataModel.linkMainImageId),n(3),d("language",t.appLanguage)("isPopup",!0),T("openForm",t.fileManagerOpenForm),d("tree",t.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),n(2),d("ngIf",(t.dataModel==null||t.dataModel.linkFilePodcastIdSrc==null?null:t.dataModel.linkFilePodcastIdSrc.length)>0),n(3),d("placeholder",y(u(94,158,"TITLE.Audio_File_ID"))),T("ngModel",t.dataModel.linkFilePodcastId),n(3),d("language",t.appLanguage)("isPopup",!0),T("openForm",t.fileManagerOpenFormPodcast),d("tree",t.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",t.selectFileTypePodcast)("openFilemanagerButtonView",!1),n(2),d("ngIf",(t.dataModel==null||t.dataModel.linkFileMovieIdSrc==null?null:t.dataModel.linkFileMovieIdSrc.length)>0),n(3),d("placeholder",y(u(102,160,"TITLE.Video_File_ID"))),T("ngModel",t.dataModel.linkFileMovieId),n(3),d("language",t.appLanguage)("isPopup",!0),T("openForm",t.fileManagerOpenFormMovie),d("tree",t.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",t.selectFileTypeMovie)("openFilemanagerButtonView",!1),n(2),b(u(106,162,"TITLE.image_360")),n(2),T("dataModel",t.dataModel.file360Views),n(3),b(u(111,164,"TITLE.virtual_tour")),n(2),T("dataModel",t.dataModel.file360Tour),d("dataImageModel",t.dataModel.file360Views),n(),d("ngIf",t.formInfo.submitButtonEnabled),n(),d("label",y(u(115,166,"TITLE.OTHER_INFO"))),n(3),b(u(118,168,"TITLE.Add_other_information_related_to_this_content_in_this_section")),n(4),b(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),d("placeholder",y(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),T("ngModel",t.contentOtherInfoSelected.title),n(3),h("",Y.value.length," / 100"),n(3),b(u(129,170,"TITLE.Key")),n(2),d("placeholder",y(u(132,172,"TITLE.Agreement_number_to_display"))),T("ngModel",t.contentOtherInfoSelected.typeId),n(5),b(u(136,174,"TITLE.Source")),n(2),T("ngModel",t.contentOtherInfoSelected.source),n(3),h("",de.value.length," / 500"),n(),d("placeholder",u(142,176,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),T("ngModel",t.contentOtherInfoSelected.htmlBody),n(3),h(" ",u(145,178,"ACTION.Add_To_List")," "),n(3),b(u(148,180,"TITLE.List_of_other_information")),n(3),d("dataSource",t.otherInfoTabledataSource),n(10),d("matHeaderRowDef",t.otherInfoTabledisplayedColumns),n(),d("matRowDefColumns",t.otherInfoTabledisplayedColumns),n(),d("ngIf",t.formInfo.submitButtonEnabled),n(),d("label",Ne("",u(164,182,"TITLE.Location")," ")),n(2),d("optionDisabled",!(t.fieldsInfo.linkLocationId!=null&&t.fieldsInfo.linkLocationId.accessEditField))("optionSelectForce",t.dataModel.linkLocationId)("optionPlaceholder",u(166,184,"TITLE.Region")),n(3),h(" ",u(169,186,"TITLE.Click_on_the_map_to_specify_the_location")," "),n(2),d("optonCenter",t.mapOptonCenter),n(),d("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[je,P,Te,K,wt,Q,be,fe,ne,oe,ie,Ee,Tt,kt,Vt,Ft,Rt,Lt,Bt,Ot,Dt,xt,we,At,ge,U,Pt,Gt,Wt,Ht,Nt,Ke,Xe,$e,Je,Qe,et,Ye,Ze,tt,it,Re,ai,ri,li,oi,G,ii,$t,ei,Zt,De,lt,B,ae],encapsulation:2});var ci=dt;var Di=Ri(fn());var Do=["vform"];function Ro(o,l){if(o&1){let e=E();a(0,"app-cms-enum-record-status-selector",79),x("modelChange",function(t){f(e);let s=C();return w(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),r()}if(o&2){let e=C();T("model",e.dataModel.recordStatus),d("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ko(o,l){o&1&&v(0,"i",85)}function Vo(o,l){o&1&&v(0,"i",86)}function Fo(o,l){o&1&&(a(0,"mat-error"),p(1," Title is "),a(2,"strong"),p(3),m(4,"translate"),r()()),o&2&&(n(3),b(u(4,1,"MESSAGE.required")))}function Lo(o,l){if(o&1){let e=E();a(0,"div",40)(1,"label",80),p(2),r(),a(3,"input",81,10),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModel.title,t)||(s.dataModel.title=t),g(t)}),r(),I(5,ko,1,0,"i",82)(6,Vo,1,0,"i",83),a(7,"em"),p(8),r(),I(9,Fo,5,3,"mat-error",84),r()}if(o&2){let e=A(4),i=C();n(2),b(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),n(),d("placeholder",y(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),T("ngModel",i.dataModel.title),d("disabled",!(i.fieldsInfo.description!=null&&i.fieldsInfo.description.accessEditField)),n(2),d("ngIf",!e.value),n(),d("ngIf",e.value),n(2),h("",e.value.length," / 100"),n(),d("ngIf",e.errors==null?null:e.errors.required)}}function Bo(o,l){o&1&&(a(0,"mat-error"),p(1," Description is "),a(2,"strong"),p(3),m(4,"translate"),r()()),o&2&&(n(3),b(u(4,1,"MESSAGE.required")))}function Oo(o,l){if(o&1){let e=E();a(0,"div",40)(1,"label",87),p(2),r(),a(3,"textarea",88,11),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModel.description,t)||(s.dataModel.description=t),g(t)}),p(5,"            "),r(),a(6,"em"),p(7),r(),I(8,Bo,5,3,"mat-error",84),r()}if(o&2){let e=A(4),i=C();n(2),b(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle),n(),d("placeholder",y(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle)),T("ngModel",i.dataModel.description),d("disabled",!(i.fieldsInfo.description!=null&&i.fieldsInfo.description.accessEditField)),n(4),h("",e.value.length," / 500"),n(),d("ngIf",e.errors==null?null:e.errors.required)}}function No(o,l){if(o&1){let e=E();a(0,"div",89)(1,"label",90),p(2),r(),a(3,"input",91),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModel.fromDate,t)||(s.dataModel.fromDate=t),g(t)}),r(),v(4,"mat-datepicker-toggle",92)(5,"mat-datepicker",93,12),r()}if(o&2){let e=A(6),i=C();n(2),b(i.fieldsInfo.fromDate==null?null:i.fieldsInfo.fromDate.fieldTitle),n(),d("placeholder",y(i.fieldsInfo.fromDate==null?null:i.fieldsInfo.fromDate.fieldTitle))("disabled",y(!(i.fieldsInfo.fromDate!=null&&i.fieldsInfo.fromDate.accessEditField)))("matDatepicker",e),T("ngModel",i.dataModel.fromDate),n(),d("for",e)}}function Po(o,l){if(o&1){let e=E();a(0,"div",89)(1,"label",94),p(2),r(),a(3,"input",95),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),g(t)}),r(),v(4,"mat-datepicker-toggle",92)(5,"mat-datepicker",93,13),r()}if(o&2){let e=A(6),i=C();n(2),b(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),n(),d("placeholder",y(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle))("disabled",y(!(i.fieldsInfo.expireDate!=null&&i.fieldsInfo.expireDate.accessEditField)))("matDatepicker",e),T("ngModel",i.dataModel.expireDate),n(),d("for",e)}}function Go(o,l){if(o&1){let e=E();a(0,"div",96)(1,"button",97),S("click",function(){f(e);let t=C();return g(t.onActionBackToParent())}),p(2),m(3,"translate"),r(),a(4,"button",98),p(5),m(6,"translate"),r()()}if(o&2){C();let e=A(10);n(2),h(" ",u(3,3,"ACTION.BACK")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.NEXT")," ")}}function Wo(o,l){if(o&1){let e=E();a(0,"div",96)(1,"button",97),S("click",function(){f(e);let t=C();return g(t.onActionBackToParent())}),p(2),m(3,"translate"),r(),a(4,"button",98),p(5),m(6,"translate"),r()()}if(o&2){C();let e=A(10);n(2),h(" ",u(3,3,"ACTION.BACK")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.NEXT")," ")}}function Ho(o,l){if(o&1){let e=E();a(0,"div",40)(1,"label",99),p(2),m(3,"translate"),r(),a(4,"input",100,14),m(6,"translate"),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModel.source,t)||(s.dataModel.source=t),g(t)}),r(),a(7,"em"),p(8),r()()}if(o&2){let e=A(5),i=C();n(2),b(u(3,6,"TITLE.Source_page_address")),n(2),d("placeholder",y(u(6,8,"TITLE.Content_reference_website_link"))),T("ngModel",i.dataModel.source),d("disabled",!(i.fieldsInfo.source!=null&&i.fieldsInfo.source.accessEditField)),n(4),h("",e.value.length," / 500")}}function jo(o,l){if(o&1){let e=E();a(0,"mat-chip",101),S("removed",function(){let t=f(e).$implicit,s=C();return g(s.removeTag(t))}),p(1),a(2,"button",102)(3,"mat-icon"),p(4,"cancel"),r()()()}if(o&2){let e=l.$implicit;n(),h(" ",e," ")}}function qo(o,l){if(o&1&&(a(0,"div",96)(1,"button",103),p(2),m(3,"translate"),r(),a(4,"button",98),p(5),m(6,"translate"),r()()),o&2){C();let e=A(10);n(2),h(" ",u(3,3,"ACTION.BEFOR")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.NEXT")," ")}}function Uo(o,l){if(o&1&&(v(0,"img",104),m(1,"cmsthumbnail")),o&2){let e=C();d("src",y(u(1,2,e.dataModel.linkMainImageIdSrc)),k)}}function zo(o,l){if(o&1&&(a(0,"audio",105),v(1,"source",106),m(2,"cmsthumbnail"),p(3," Your browser does not support the audio tag. "),r()),o&2){let e=C();n(),d("src",y(u(2,2,e.dataModel.linkFilePodcastIdSrc)),k)}}function Ko(o,l){if(o&1&&(a(0,"video",105),v(1,"source",107),p(2," Your browser does not support the video tag. "),r()),o&2){let e=C();n(),d("src",y(e.dataModel.linkFileMovieIdSrc),k)}}function Qo(o,l){if(o&1){let e=E();a(0,"mat-icon",108),S("click",function(){f(e);let t=C();return g(t.dataModel.linkFileMovieId=null)}),p(1,"close"),r()}}function Xo(o,l){if(o&1&&(a(0,"div",109)(1,"button",103),p(2),m(3,"translate"),r(),a(4,"button",98),p(5),m(6,"translate"),r()()),o&2){C();let e=A(10);n(2),h(" ",u(3,3,"ACTION.BEFOR")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.NEXT")," ")}}function Jo(o,l){o&1&&(a(0,"mat-header-cell"),p(1),m(2,"translate"),r()),o&2&&(n(),h(" ",u(2,1,"TITLE.Id")," "))}function Yo(o,l){if(o&1&&(a(0,"mat-cell"),p(1),r()),o&2){let e=l.$implicit;n(),h(" ",e.id," ")}}function Zo(o,l){o&1&&(a(0,"mat-header-cell"),p(1),m(2,"translate"),r()),o&2&&(n(),h(" ",u(2,1,"TITLE.title")," "))}function $o(o,l){if(o&1&&(a(0,"mat-cell"),p(1),r()),o&2){let e=l.$implicit;n(),h(" ",e.title," ")}}function ea(o,l){o&1&&(a(0,"mat-header-cell"),p(1),m(2,"translate"),r()),o&2&&(n(),h(" ",u(2,1,"TITLE.TypeId")," "))}function ta(o,l){if(o&1&&(a(0,"mat-cell"),p(1),r()),o&2){let e=l.$implicit;n(),h(" ",e.typeId," ")}}function ia(o,l){o&1&&(a(0,"mat-header-cell"),p(1),m(2,"translate"),r()),o&2&&(n(),h(" ",u(2,1,"TITLE.OPTION")," "))}function na(o,l){if(o&1){let e=E();a(0,"mat-cell",110)(1,"small",111),S("click",function(){let t=f(e).index,s=C();return g(s.onActionContentOtherInfoEditFromLIst(t))}),a(2,"mat-icon",112),m(3,"translate"),p(4,"edit"),r()(),p(5,"| "),a(6,"small",111),S("click",function(){let t=f(e).index,s=C();return g(s.onActionContentOtherInfoRemoveFromLIst(t))}),a(7,"mat-icon",113),m(8,"translate"),p(9,"delete"),r()()()}o&2&&(n(2),d("matTooltip",y(u(3,4,"ACTION.EDIT"))),n(5),d("matTooltip",y(u(8,6,"ACTION.DELETE"))))}function oa(o,l){o&1&&v(0,"mat-header-row")}function aa(o,l){if(o&1&&v(0,"mat-row"),o&2){let e=l.$implicit,i=l.dataIndex,t=C();W("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.title===t.contentOtherInfoSelected.title)}}function ra(o,l){if(o&1&&(a(0,"div",96)(1,"button",103),p(2),m(3,"translate"),r(),a(4,"button",98),p(5),m(6,"translate"),r()()),o&2){C();let e=A(10);n(2),h(" ",u(3,3,"ACTION.BEFOR")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.NEXT")," ")}}function la(o,l){if(o&1&&(a(0,"div",96)(1,"button",103),p(2),m(3,"translate"),r(),a(4,"button",114),p(5),m(6,"translate"),r()()),o&2){C();let e=A(10);n(2),h(" ",u(3,3,"ACTION.BEFOR")," "),n(2),d("disabled",!e.form.valid),n(),h(" ",u(6,5,"ACTION.SAVE")," ")}}function sa(o,l){o&1&&(a(0,"mat-icon"),p(1,"call_end"),r())}function da(o,l){o&1&&(a(0,"mat-icon"),p(1,"call_end"),r())}function ca(o,l){o&1&&(a(0,"mat-icon"),p(1,"forum"),r())}function pa(o,l){o&1&&(a(0,"mat-icon"),p(1,"forum"),r())}var pt=class pt extends ti{constructor(e,i,t,s,_,c,j,Y){super(s,new se,t,Y);this.activatedRoute=e;this.coreEnumService=i;this.publicHelper=t;this.contentService=s;this.cmsToastrService=_;this.router=c;this.cdr=j;this.translate=Y;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModel=new se;this.dataModelResult=new bt;this.dataContentOtherInfoModelResult=new H;this.dataContentCategoryModel=[];this.similarDataModel=new Array;this.otherInfoDataModel=new Array;this.contentSimilarSelected=new se;this.contentOtherInfoSelected=new Pe;this.otherInfoTabledisplayedColumns=["Id","Title","TypeId","Action"];this.otherInfoTabledataSource=new jt;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.selectFileTypePodcast=["mp3"];this.selectFileTypeMovie=["mp4","webm"];this.formInfo=new te;this.fileManagerOpenForm=!1;this.fileManagerOpenFormPodcast=!1;this.fileManagerOpenFormMovie=!1;this.keywordDataModel=[];this.appLanguage="fa";this.viewMap=!1;this.mapMarkerPoints=[];this.mapOptonCenter=new Yt;this.addOnBlurTag=!0;this.separatorKeysCodes=[13];this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId=this.activatedRoute.snapshot.paramMap.get("Id"),!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.DataGetOne(),this.DataCategoryGetAll()}onActionFileSelectedLinkMainImageId(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}onActionFileSelectedLinkFilePodcastId(e){this.dataModel.linkFilePodcastId=e.id,this.dataModel.linkFilePodcastIdSrc=e.downloadLinksrc}onActionFileSelectedLinkFileMovieId(e){this.dataModel.linkFileMovieId=e.id,this.dataModel.linkFileMovieIdSrc=e.downloadLinksrc}onFormSubmit(){if(!this.requestId||this.requestId.length<=0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}if(this.dataModel.keyword="",this.keywordDataModel&&this.keywordDataModel.length>0){let e=[];this.keywordDataModel.forEach(i=>{i.display?e.push(i.display):e.push(i)}),e&&e.length>0&&(this.dataModel.keyword=e.join(","))}this.DataEditContent()}DataGetOne(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contentService.setAccessLoad(),this.contentService.setAccessDataType(ye.Editor),this.contentService.ServiceGetOneById(this.requestId).subscribe({next:i=>{if(this.dataAccessModel=i.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.publicHelper.processService.processStop(e),this.dataModelResult=i,this.formInfo.submitButtonEnabled=!0,i.isSuccess){this.dataModel=i.item;let t=this.dataModel.geolocationlatitude,s=this.dataModel.geolocationlongitude;t>0&&s>0&&(this.mapMarkerPoints=[],this.mapMarkerPoints.push({lat:t,lon:s}),this.receiveMap()),this.dataModel.keyword=this.dataModel.keyword+"",this.keywordDataModel=this.dataModel.keyword.split(","),this.publicHelper.processService.processStop(e)}else this.cmsToastrService.typeErrorGetOne(i.errorMessage)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorGetOne(i)}})}DataEditContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contentService.ServiceEdit(this.dataModel).subscribe({next:i=>le(this,null,function*(){this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),yield this.DataActionAfterAddContentSuccessfulOtherInfo(this.dataModel),setTimeout(()=>this.router.navigate(["/catalog/content"]),1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)}),error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorEdit(i)}})}DataActionAfterAddContentSuccessfulOtherInfo(e){return le(this,null,function*(){let i=new Array,t=new Array;this.otherInfoDataModel&&this.otherInfoDataModel.forEach(s=>{let _=new Pe;_.linkContentId=e.id,(!this.dataContentOtherInfoModelResult.listItems||!s.id||!this.dataContentOtherInfoModelResult.listItems.find(c=>c.id===s.id))&&i.push(_)}),this.dataContentOtherInfoModelResult.listItems&&this.dataContentOtherInfoModelResult.listItems.forEach(s=>{(!this.otherInfoDataModel||!this.otherInfoDataModel.find(_=>_.id===s.id))&&t.push(s)}),i&&i.length>0,t&&t.length>0})}DataCategoryGetAll(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.get_category_information_from_the_server").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)});let i=new X,t=new pe;t.propertyName="LinkContentId",t.value=this.requestId,t.clauseType=ve.And,i.filters.push(t)}onActionContentOtherInfoAddToLIst(){if(this.contentOtherInfoSelected){if(this.otherInfoDataModel.find(e=>e.title===this.contentOtherInfoSelected.title)){this.cmsToastrService.typeErrorAddDuplicate();return}this.otherInfoDataModel.push(this.contentOtherInfoSelected),this.contentOtherInfoSelected=new Pe,this.otherInfoTabledataSource.data=this.otherInfoDataModel}}onActionContentOtherInfoRemoveFromLIst(e){e<0||!this.otherInfoDataModel||this.otherInfoDataModel.length===0||(this.otherInfoDataModel.splice(e,1),this.otherInfoTabledataSource.data=this.otherInfoDataModel)}onActionContentOtherInfoEditFromLIst(e){e<0||!this.otherInfoDataModel||this.otherInfoDataModel.length===0||(this.contentOtherInfoSelected=this.otherInfoDataModel[e],this.otherInfoDataModel.splice(e,1),this.otherInfoTabledataSource.data=this.otherInfoDataModel)}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex&&(this.formGroup.valid||(this.cmsToastrService.typeErrorFormInvalid(),setTimeout(()=>{i.selectedIndex=e.previouslySelectedIndex},10)))}onActionBackToParent(){this.router.navigate(["/catalog/content/"])}receiveMap(e=this.mapModel){e&&(this.mapModel=e,this.mapMarkerPoints&&this.mapMarkerPoints.length>0&&(this.mapMarkerPoints.forEach(i=>{this.mapMarker=Di.marker([i.lat,i.lon]).addTo(this.mapModel)}),this.mapOptonCenter=this.mapMarkerPoints[0],this.mapMarkerPoints=[]),this.mapModel.on("click",i=>{let t=i.latlng.lat,s=i.latlng.lng;if(this.mapMarker!==void 0&&this.mapModel.removeLayer(this.mapMarker),t===this.dataModel.geolocationlatitude&&s===this.dataModel.geolocationlongitude){this.dataModel.geolocationlatitude=null,this.dataModel.geolocationlongitude=null;return}this.mapMarker=Di.marker([t,s]).addTo(this.mapModel),this.dataModel.geolocationlatitude=t,this.dataModel.geolocationlongitude=s}))}receiveZoom(e){}onActionSelectorLocation(e){if(!e||!e.id||e.id<=0){this.translate.get("MESSAGE.Information_area_deleted").subscribe(i=>{this.cmsToastrService.typeWarningSelected(i)}),this.dataModel.linkLocationId=null;return}this.dataModel.linkLocationId=e.id}addTag(e){let i=(e.value||"").trim();i&&this.keywordDataModel.push(i),e.chipInput.clear()}removeTag(e){let i=this.keywordDataModel.indexOf(e);i>=0&&this.keywordDataModel.splice(i,1)}};pt.\u0275fac=function(i){return new(i||pt)(M(Et),M(q),M(N),M(me),M(O),M(qe),M(F),M(L))},pt.\u0275cmp=V({type:pt,selectors:[["app-catalog-content-edit"]],viewQuery:function(i,t){if(i&1&&Z(Do,5),i&2){let s;$(s=ee())&&(t.formGroup=s.first)}},standalone:!1,features:[ce],decls:158,vars:168,consts:[["vform","ngForm"],["stepper",""],["chipList",""],["tagInput",""],["LinkMainImageId",""],["LinkFilePodcastId",""],["LinkFileMovieId",""],["contentOtherInfoSelected_Title",""],["contentOtherInfoSelected_TypeId",""],["contentOtherInfoSelected_Source",""],["Title",""],["Description",""],["FromDate",""],["ExpireDate",""],["Source",""],[3,"Key","svg"],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],[1,"pb-5"],["id","main","name","dataModel.body",3,"ngModelChange","placeholder","config","ngModel"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"optionModelChange","optionModel"],["appearance","fill",2,"width","100%"],["aria-label","'TITLE.key_word'|translate"],[3,"removed",4,"ngFor","ngForOf"],[3,"matChipInputTokenEnd","placeholder","matChipInputAddOnBlur","matChipInputFor","matChipInputSeparatorKeyCodes"],["state","file",3,"label"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","name","dataModel.linkMainImageId","type","text","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],[3,"dataModelChange","dataModel"],[3,"dataModelChange","dataModel","dataImageModel"],["controls","",4,"ngIf"],["matInput","","name","dataModel.linkFilePodcastId","type","text","id","dataModel.linkFilePodcastId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],["matInput","","name","dataModel.linkFileMovieId","type","text","id","dataModel.linkFileMovieId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],["class","ntk-button-row",4,"ngIf"],["state","otherinfo",3,"label"],["for","contentOtherInfoSelected.title",1,"color-highlight"],["matInput","","name","contentOtherInfoSelected.title","type","text","minlength","3","maxlength","100","id","contentOtherInfoSelected.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","contentOtherInfoSelected.typeId",1,"color-highlight"],["matInput","","name","contentOtherInfoSelected.typeId","type","number","id","contentOtherInfoSelected.typeId",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","contentOtherInfoSelected.source",1,"color-highlight"],["matInput","","name","contentOtherInfoSelected.source","type","text","dir","ltr","placeholder","http://","maxlength","100","id","contentOtherInfoSelected.source",1,"form-control","validate-name",2,"text-align","left",3,"ngModelChange","ngModel"],["id","OtherInfo","name","contentOtherInfoSelected.htmlBody",3,"ngModelChange","placeholder","config","ngModel"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"example-container","mat-elevation-z8"],[3,"dataSource"],["matColumnDef","Id"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","TypeId"],["matColumnDef","Action"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected",4,"matRowDef","matRowDefColumns"],["state","loaction",3,"label"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["id","main-map",3,"map$","zoom$","optonCenter"],["matStepperIcon","main"],["matStepperIcon","seo"],["matStepperIcon","file"],["matStepperIcon","loaction"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.fromDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.fromDate","minlength","3","maxlength","100","id","dataModel.fromDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel","placeholder","disabled"],["matSuffix","",3,"for"],["touchUi",""],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","minlength","3","maxlength","100","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.source",1,"color-highlight"],["matInput","","name","dataModel.source","type","text","dir","ltr","id","dataModel.source","minlength","3","maxlength","500",1,"form-control","validate-name","input-ltr",2,"text-align","left",3,"ngModelChange","ngModel","placeholder","disabled"],[3,"removed"],["type","button","matChipRemove","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["controls",""],["type","audio/mp3",3,"src"],["type","video/mp4",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"ntk-button-row"],[1,"Action"],[3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue",3,"matTooltip"],["matTooltipPosition","before","aria-hidden","false",2,"color","red",3,"matTooltip"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=E();v(0,"app-cms-guide-notice",15),a(1,"div",16),v(2,"app-progress-spinner",17),a(3,"div",18)(4,"p",19),p(5),r(),a(6,"p"),p(7),m(8,"translate"),r(),a(9,"form",20,0),S("ngSubmit",function(){return f(s),g(t.onFormSubmit())}),a(11,"mat-vertical-stepper",21,1),S("selectionChange",function(c){f(s);let j=A(12);return g(t.onStepClick(c,j))}),a(13,"mat-step",22),m(14,"translate"),I(15,Ro,1,5,"app-cms-enum-record-status-selector",23)(16,Lo,10,9,"div",24)(17,Oo,9,7,"div",24)(18,No,7,8,"div",25)(19,Po,7,8,"div",25),v(20,"hr",26),a(21,"angular-editor",27),m(22,"translate"),x("ngModelChange",function(c){return f(s),w(t.dataModel.body,c)||(t.dataModel.body=c),g(c)}),r(),I(23,Go,7,7,"div",28),r(),a(24,"mat-step",29),m(25,"translate"),a(26,"app-catalog-category-treeselector",30),x("optionModelChange",function(c){return f(s),w(t.dataModel.linkContentCategoryIds,c)||(t.dataModel.linkContentCategoryIds=c),g(c)}),r(),v(27,"br"),I(28,Wo,7,7,"div",28),r(),a(29,"mat-step",29),m(30,"translate"),a(31,"p"),p(32),m(33,"translate"),r(),I(34,Ho,9,10,"div",24),a(35,"mat-form-field",31)(36,"mat-label"),p(37),m(38,"translate"),r(),a(39,"mat-chip-grid",32,2),I(41,jo,5,1,"mat-chip",33),a(42,"input",34,3),m(44,"translate"),S("matChipInputTokenEnd",function(c){return f(s),g(t.addTag(c))}),r()()(),I(45,qo,7,7,"div",28),r(),a(46,"mat-step",35),m(47,"translate"),a(48,"p"),p(49),m(50,"translate"),r(),a(51,"div",36)(52,"a",37),m(53,"cmsthumbnail"),I(54,Uo,2,4,"img",38),r()(),a(55,"div",39)(56,"div",40)(57,"label",41),S("click",function(){return f(s),g(t.fileManagerOpenForm=!0)}),p(58),m(59,"translate"),r(),a(60,"input",42,4),m(62,"translate"),x("ngModelChange",function(c){return f(s),w(t.dataModel.linkMainImageId,c)||(t.dataModel.linkMainImageId=c),g(c)}),S("click",function(){return f(s),g(t.fileManagerOpenForm=!0)}),r()(),a(63,"cms-file-manager",43),S("itemSelected",function(c){return f(s),g(t.onActionFileSelectedLinkMainImageId(c))}),x("openFormChange",function(c){return f(s),w(t.fileManagerOpenForm,c)||(t.fileManagerOpenForm=c),g(c)}),r()(),a(64,"h3"),p(65),m(66,"translate"),r(),a(67,"app-cms-360-image-list",44),x("dataModelChange",function(c){return f(s),w(t.dataModel.file360Views,c)||(t.dataModel.file360Views=c),g(c)}),r(),v(68,"br"),a(69,"h3"),p(70),m(71,"translate"),r(),a(72,"app-cms-360-tour-list",45),x("dataModelChange",function(c){return f(s),w(t.dataModel.file360Tour,c)||(t.dataModel.file360Tour=c),g(c)}),r(),a(73,"div",36),I(74,zo,4,4,"audio",46),r(),a(75,"div",39)(76,"div",40)(77,"input",47,5),m(79,"translate"),x("ngModelChange",function(c){return f(s),w(t.dataModel.linkFilePodcastId,c)||(t.dataModel.linkFilePodcastId=c),g(c)}),S("click",function(){return f(s),g(t.fileManagerOpenFormPodcast=!0)}),r()(),a(80,"cms-file-manager",43),S("itemSelected",function(c){return f(s),g(t.onActionFileSelectedLinkFilePodcastId(c))}),x("openFormChange",function(c){return f(s),w(t.fileManagerOpenFormPodcast,c)||(t.fileManagerOpenFormPodcast=c),g(c)}),r()(),a(81,"div",36),I(82,Ko,3,2,"video",46),r(),a(83,"div",39)(84,"div",40)(85,"input",48,6),m(87,"translate"),x("ngModelChange",function(c){return f(s),w(t.dataModel.linkFileMovieId,c)||(t.dataModel.linkFileMovieId=c),g(c)}),S("click",function(){return f(s),g(t.fileManagerOpenFormMovie=!0)}),r(),I(88,Qo,2,0,"mat-icon",49),a(89,"mat-icon",50),S("click",function(){return f(s),g(t.fileManagerOpenFormMovie=!0)}),p(90,"mode_edit"),r()(),a(91,"cms-file-manager",43),S("itemSelected",function(c){return f(s),g(t.onActionFileSelectedLinkFileMovieId(c))}),x("openFormChange",function(c){return f(s),w(t.fileManagerOpenFormMovie,c)||(t.fileManagerOpenFormMovie=c),g(c)}),r()(),I(92,Xo,7,7,"div",51),r(),a(93,"mat-step",52),m(94,"translate"),a(95,"P"),p(96),m(97,"translate"),r(),a(98,"div",40)(99,"label",53),p(100),r(),a(101,"input",54,7),x("ngModelChange",function(c){return f(s),w(t.contentOtherInfoSelected.title,c)||(t.contentOtherInfoSelected.title=c),g(c)}),r(),a(103,"em"),p(104),r()(),a(105,"div",40)(106,"label",55),p(107),m(108,"translate"),r(),a(109,"input",56,8),m(111,"translate"),x("ngModelChange",function(c){return f(s),w(t.contentOtherInfoSelected.typeId,c)||(t.contentOtherInfoSelected.typeId=c),g(c)}),r()(),a(112,"div",40)(113,"label",57),p(114),m(115,"translate"),r(),a(116,"input",58,9),x("ngModelChange",function(c){return f(s),w(t.contentOtherInfoSelected.source,c)||(t.contentOtherInfoSelected.source=c),g(c)}),r(),a(118,"em"),p(119),r()(),a(120,"angular-editor",59),m(121,"translate"),x("ngModelChange",function(c){return f(s),w(t.contentOtherInfoSelected.htmlBody,c)||(t.contentOtherInfoSelected.htmlBody=c),g(c)}),r(),a(122,"button",60),S("click",function(){return f(s),g(t.onActionContentOtherInfoAddToLIst())}),p(123),m(124,"translate"),r(),a(125,"p"),p(126),m(127,"translate"),r(),a(128,"div",61)(129,"mat-table",62),D(130,63),I(131,Jo,3,3,"mat-header-cell",64)(132,Yo,2,1,"mat-cell",65),R(),D(133,66),I(134,Zo,3,3,"mat-header-cell",64)(135,$o,2,1,"mat-cell",65),R(),D(136,67),I(137,ea,3,3,"mat-header-cell",64)(138,ta,2,1,"mat-cell",65),R(),D(139,68),I(140,ia,3,3,"mat-header-cell",64)(141,na,10,8,"mat-cell",69),R(),I(142,oa,1,0,"mat-header-row",70)(143,aa,1,6,"mat-row",71),r()(),I(144,ra,7,7,"div",28),r(),a(145,"mat-step",72),m(146,"translate"),a(147,"app-cms-location-selector",73),m(148,"translate"),S("optionChange",function(c){return f(s),g(t.onActionSelectorLocation(c))}),r(),a(149,"p"),p(150),m(151,"translate"),r(),a(152,"app-cms-map",74),S("map$",function(c){return f(s),g(t.receiveMap(c))})("zoom$",function(c){return f(s),g(t.receiveZoom(c))}),r(),I(153,la,7,7,"div",28),r(),I(154,sa,2,0,"ng-template",75)(155,da,2,0,"ng-template",76)(156,ca,2,0,"ng-template",77)(157,pa,2,0,"ng-template",78),r()()()()}if(i&2){let s=A(40),_=A(102),c=A(117);d("Key","catalog.content.list.add")("svg","assets/media/svg/icons/General/Notifications1.svg"),n(2),d("optionsInfoAreaId",t.constructorInfoAreaId),n(3),h(" ",t.formInfo.formTitle," "),n(2),h(" ",u(8,112,"TITLE.Be_Careful_When_Entering_Information")," "),n(6),d("label",y(u(14,114,"TITLE.REQUIRED_INFORMATION"))),n(2),d("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),n(),d("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),n(),d("ngIf",t.fieldsInfo.description==null?null:t.fieldsInfo.description.accessWatchField),n(),d("ngIf",t.fieldsInfo.fromDate==null?null:t.fieldsInfo.fromDate.accessWatchField),n(),d("ngIf",t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.accessWatchField),n(2),d("placeholder",u(22,116,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),T("ngModel",t.dataModel.body),n(2),d("ngIf",t.formInfo.submitButtonEnabled),n(),d("label",y(u(25,118,"TITLE.Categories"))),n(2),T("optionModel",t.dataModel.linkContentCategoryIds),n(2),d("ngIf",t.formInfo.submitButtonEnabled),n(),d("label",y(u(30,120,"TITLE.Search_Engines"))),n(3),h(" ",u(33,122,"TITLE.This_section_helps_search_engines_better_index_content")," "),n(2),d("ngIf",t.fieldsInfo.source==null?null:t.fieldsInfo.source.accessWatchField),n(3),b(u(38,124,"TITLE.Choose_keywords_relative_to_the_content")),n(4),d("ngForOf",t.keywordDataModel),n(),d("placeholder",u(44,126,"TITLE.key_word"))("matChipInputAddOnBlur",t.addOnBlurTag)("matChipInputFor",s)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes),n(3),d("ngIf",t.formInfo.submitButtonEnabled),n(),d("label",y(u(47,128,"TITLE.ATTACH_FILES"))),n(3),b(u(50,130,"TITLE.CONTENT_ATTACH_FILES")),n(3),d("href",y(u(53,132,t.dataModel.linkMainImageIdSrc)),k),n(2),d("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),n(4),b(u(59,134,"TITLE.Original_Photo")),n(2),d("placeholder",y(u(62,136,"TITLE.Original_File_ID"))),T("ngModel",t.dataModel.linkMainImageId),n(3),d("language",t.appLanguage)("isPopup",!0),T("openForm",t.fileManagerOpenForm),d("tree",t.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),n(2),b(u(66,138,"TITLE.image_360")),n(2),T("dataModel",t.dataModel.file360Views),n(3),b(u(71,140,"TITLE.virtual_tour")),n(2),T("dataModel",t.dataModel.file360Tour),d("dataImageModel",t.dataModel.file360Views),n(2),d("ngIf",(t.dataModel==null||t.dataModel.linkFilePodcastIdSrc==null?null:t.dataModel.linkFilePodcastIdSrc.length)>0),n(3),d("placeholder",y(u(79,142,"TITLE.Audio_File_ID"))),T("ngModel",t.dataModel.linkFilePodcastId),n(3),d("language",t.appLanguage)("isPopup",!0),T("openForm",t.fileManagerOpenFormPodcast),d("tree",t.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",t.selectFileTypePodcast)("openFilemanagerButtonView",!1),n(2),d("ngIf",(t.dataModel==null||t.dataModel.linkFileMovieIdSrc==null?null:t.dataModel.linkFileMovieIdSrc.length)>0),n(3),d("placeholder",y(u(87,144,"TITLE.Video_File_ID"))),T("ngModel",t.dataModel.linkFileMovieId),n(3),d("ngIf",t.dataModel.linkFileMovieId),n(3),d("language",t.appLanguage)("isPopup",!0),T("openForm",t.fileManagerOpenFormMovie),d("tree",t.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",t.selectFileTypeMovie)("openFilemanagerButtonView",!1),n(),d("ngIf",t.formInfo.submitButtonEnabled),n(),d("label",y(u(94,146,"TITLE.OTHER_INFO"))),n(3),b(u(97,148,"TITLE.Add_other_information_related_to_this_content_in_this_section")),n(4),b(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),d("placeholder",y(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),T("ngModel",t.contentOtherInfoSelected.title),n(3),h("",_.value.length," / 100"),n(3),b(u(108,150,"TITLE.Key")),n(2),d("placeholder",y(u(111,152,"TITLE.Agreement_number_to_display"))),T("ngModel",t.contentOtherInfoSelected.typeId),n(5),b(u(115,154,"TITLE.Source")),n(2),T("ngModel",t.contentOtherInfoSelected.source),n(3),h("",c.value.length," / 500"),n(),d("placeholder",u(121,156,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),T("ngModel",t.contentOtherInfoSelected.htmlBody),n(3),h(" ",u(124,158,"ACTION.Add_To_List")," "),n(3),b(u(127,160,"TITLE.List_of_other_information")),n(3),d("dataSource",t.otherInfoTabledataSource),n(13),d("matHeaderRowDef",t.otherInfoTabledisplayedColumns),n(),d("matRowDefColumns",t.otherInfoTabledisplayedColumns),n(),d("ngIf",t.formInfo.submitButtonEnabled),n(),d("label",Ne("",u(146,162,"TITLE.Location")," ")),n(2),d("optionDisabled",!(t.fieldsInfo.linkLocationId!=null&&t.fieldsInfo.linkLocationId.accessEditField))("optionSelectForce",t.dataModel.linkLocationId)("optionPlaceholder",u(148,164,"TITLE.Region")),n(3),h(" ",u(151,166,"TITLE.Click_on_the_map_to_specify_the_location")," "),n(2),d("optonCenter",t.mapOptonCenter),n(),d("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[je,P,Te,K,wt,Q,be,fe,ne,oe,ie,Ee,Tt,kt,Vt,Ft,Rt,Lt,Bt,Ot,Dt,xt,we,At,ge,U,Pt,Gt,Wt,Ht,Nt,Ke,Xe,$e,Je,Qe,et,Ye,Ze,tt,it,an,Re,ai,ri,li,oi,G,ii,$t,ei,Zt,De,lt,B,ae],encapsulation:2});var mi=pt;var ma=["vform"];function ua(o,l){if(o&1){let e=E();D(0),a(1,"div",8)(2,"label",9),p(3),r(),a(4,"input",10,0),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModelResultContent.item.title,t)||(s.dataModelResultContent.item.title=t),g(t)}),r()(),a(6,"div",8)(7,"label",11),p(8),r(),a(9,"textarea",12,1),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModelResultContent.item.description,t)||(s.dataModelResultContent.item.description=t),g(t)}),r()(),R()}if(o&2){let e=C();n(3),b(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),n(),d("placeholder",y(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)),T("ngModel",e.dataModelResultContent.item.title),n(4),b(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),n(),d("placeholder",y(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle)),T("ngModel",e.dataModelResultContent.item.description)}}function fa(o,l){if(o&1){let e=E();a(0,"div",13)(1,"button",14),S("click",function(){f(e);let t=C();return g(t.onFormDelete())}),v(2,"i",15),p(3),m(4,"translate"),r(),a(5,"button",16),S("click",function(){f(e);let t=C();return g(t.onFormCancel())}),v(6,"i",17),p(7),m(8,"translate"),r()()}if(o&2){let e=C();n(),d("disabled",!e.formInfo.submitButtonEnabled),n(2),h(" ",u(4,3,"ACTION.DELETE")," "),n(4),h(" ",u(8,5,"ACTION.CANCEL")," ")}}var mt=class mt{constructor(l,e,i,t,s,_,c){this.data=l;this.dialogRef=e;this.publicHelper=i;this.contentService=t;this.cdr=s;this.translate=_;this.cmsToastrService=c;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResultContent=new H;this.formInfo=new te;this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=l.id||"")}ngOnInit(){if(this.requestId.length<=0){this.cmsToastrService.typeErrorDeleteRowIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne()}DataGetOne(){if(this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.translate.get("TITLE.Loading_Information").subscribe(e=>{this.formInfo.submitResultMessage=e});let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.contentService.setAccessLoad(),this.contentService.setAccessDataType(ye.Editor),this.contentService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResultContent=e,e.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeErrorGetOne()),this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onFormDelete(){if(this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.formInfo.submitButtonEnabled=!1,this.formInfo.submitButtonEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.requestId).subscribe({next:e=>{this.formInfo.submitButtonEnabled=!e.isSuccess,e.isSuccess?(this.translate.get("MESSAGE.Deletion_Was_Successful").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};mt.\u0275fac=function(e){return new(e||mt)(M(Ae),M(xe),M(N),M(me),M(F),M(L),M(O))},mt.\u0275cmp=V({type:mt,selectors:[["app-catalog-content-delete"]],viewQuery:function(e,i){if(e&1&&Z(ma,5),e&2){let t;$(t=ee())&&(i.formGroup=t.first)}},standalone:!1,decls:10,vars:7,consts:[["Writer",""],["Content",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModelResultContent.item.title",1,"color-highlight"],["matInput","","name","dataModelResultContent.item.title","type","text","required","","readonly","","id","dataModelResultContent.item.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModelResultContent.item.description",1,"color-highlight"],["matInput","","name","dataModelResultContent.item.description","type","text","minlength","1","maxlength","100","readonly","","required","","rows","5","id","dataModelResultContent.item.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click","disabled"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(a(0,"div",2),v(1,"app-progress-spinner",3),a(2,"div",4)(3,"p",5),p(4),r(),a(5,"p"),p(6),m(7,"translate"),r(),I(8,ua,11,8,"ng-container",6)(9,fa,9,7,"div",7),r()()),e&2&&(n(),d("optionsInfoAreaId",i.constructorInfoAreaId),n(3),h(" ",i.formInfo.formTitle," "),n(2),h(" ",u(7,5,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),d("ngIf",i.dataModelResultContent==null?null:i.dataModelResultContent.item),n(),d("ngIf",i.formInfo.submitButtonEnabled))},dependencies:[P,K,Q,fe,ne,oe,ie,U,G,B],encapsulation:2});var ui=mt;var ga=["vform"];function Ca(o,l){if(o&1){let e=E();a(0,"app-cms-enum-record-status-selector",21),x("modelChange",function(t){f(e);let s=C();return w(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),r()}if(o&2){let e=C();T("model",e.dataModel.recordStatus),d("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function _a(o,l){if(o&1&&(a(0,"mat-error"),p(1),a(2,"strong"),p(3),m(4,"translate"),r()()),o&2){let e=C();n(),h(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),b(u(4,2,"MESSAGE.required"))}}function ha(o,l){o&1&&(a(0,"mat-error"),p(1," Description is "),a(2,"strong"),p(3),m(4,"translate"),r()()),o&2&&(n(3),b(u(4,1,"MESSAGE.required")))}function Sa(o,l){if(o&1&&(v(0,"img",22),m(1,"cmsthumbnail")),o&2){let e=C();d("src",y(u(1,2,e.dataModel.linkMainImageIdSrc)),k)}}function Ia(o,l){if(o&1){let e=E();a(0,"div",10)(1,"label",23),S("click",function(){f(e);let t=C();return g(t.fileManagerOpenForm=!0)}),p(2),m(3,"translate"),r(),a(4,"input",24,3),m(6,"translate"),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),g(t)}),S("click",function(){f(e);let t=C();return g(t.fileManagerOpenForm=!0)}),r(),a(7,"cms-file-manager",25),S("itemSelected",function(t){f(e);let s=C();return g(s.onActionFileSelected(t))}),x("openFormChange",function(t){f(e);let s=C();return w(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),g(t)}),r()()}if(o&2){let e=C();n(2),b(u(3,12,"TITLE.Icon_File")),n(2),d("placeholder",y(u(6,14,"TITLE.Original_File_ID"))),T("ngModel",e.dataModel.linkMainImageId),n(3),d("language",e.appLanguage)("isPopup",!0)("openDirectUploadView",!0),T("openForm",e.fileManagerOpenForm),d("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Ma(o,l){if(o&1){let e=E();a(0,"div",26)(1,"button",27),S("click",function(){f(e);let t=C();return g(t.onFormCancel())}),v(2,"i",28),p(3),m(4,"translate"),r(),a(5,"button",29),v(6,"i",30),p(7),m(8,"translate"),r()()}if(o&2){C();let e=A(9);n(3),h(" ",u(4,3,"ACTION.CANCEL")," "),n(2),d("disabled",!e.form.valid),n(2),h(" ",u(8,5,"ACTION.SAVE")," ")}}var ut=class ut extends Jt{constructor(e,i,t,s,_,c,j,Y){super(s,new J,c,Y);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.categoryService=s;this.cmsToastrService=_;this.publicHelper=c;this.cdr=j;this.translate=Y;this.requestParentId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new H;this.dataModel=new J;this.formInfo=new te;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=e.parentId||""),this.requestParentId?.length>0&&(this.dataModel.linkParentId=this.requestParentId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}ngOnInit(){this.translate.get("TITLE.Register_New_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.categoryService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};ut.\u0275fac=function(i){return new(i||ut)(M(Ae),M(xe),M(q),M(z),M(O),M(N),M(F),M(L))},ut.\u0275cmp=V({type:ut,selectors:[["app-catalog-category-add"]],viewQuery:function(i,t){if(i&1&&Z(ga,5),i&2){let s;$(s=ee())&&(t.formGroup=s.first)}},standalone:!1,features:[ce],decls:34,vars:25,consts:[["vform","ngForm"],["Title",""],["Description",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openDirectUploadView","openForm","tree","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=E();a(0,"div",4),v(1,"app-progress-spinner",5),a(2,"div",6)(3,"p",7),p(4),r(),a(5,"p"),p(6),m(7,"translate"),r(),a(8,"form",8,0),S("ngSubmit",function(){return f(s),g(t.onFormSubmit())}),I(10,Ca,1,5,"app-cms-enum-record-status-selector",9),a(11,"div",10)(12,"label",11),p(13),r(),a(14,"input",12,1),x("ngModelChange",function(c){return f(s),w(t.dataModel.title,c)||(t.dataModel.title=c),g(c)}),r(),a(16,"em"),p(17),r(),I(18,_a,5,4,"mat-error",13),r(),a(19,"div",10)(20,"label",14),p(21),r(),a(22,"textarea",15,2),x("ngModelChange",function(c){return f(s),w(t.dataModel.description,c)||(t.dataModel.description=c),g(c)}),p(24,"        "),r(),a(25,"em"),p(26),r(),I(27,ha,5,3,"mat-error",13),r(),a(28,"div",16)(29,"a",17),m(30,"cmsthumbnail"),I(31,Sa,2,4,"img",18),r()(),I(32,Ia,8,16,"div",19)(33,Ma,9,7,"div",20),r()()()}if(i&2){let s=A(15),_=A(23);n(),d("optionsInfoAreaId",t.constructorInfoAreaId),n(3),h(" ",t.formInfo.formTitle," "),n(2),h(" ",u(7,21,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),d("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),n(3),b(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),d("placeholder",y(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),T("ngModel",t.dataModel.title),n(3),h("",s.value.length," / 100"),n(),d("ngIf",s.errors==null?null:s.errors.required),n(3),b(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),n(),d("placeholder",y(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),T("ngModel",t.dataModel.description),n(4),h("",_.value.length," / 500"),n(),d("ngIf",_.errors==null?null:_.errors.required),n(2),d("href",y(u(30,23,t.dataModel.linkMainImageIdSrc)),k),n(2),d("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),n(),d("ngIf",t.fieldsInfo.linkMainImageId==null?null:t.fieldsInfo.linkMainImageId.accessWatchField),n(),d("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[P,Te,K,Q,be,ne,oe,ie,Ee,we,U,Re,G,De,B,ae],encapsulation:2});var fi=ut;var va=["*"];function ya(o,l){if(o&1&&(a(0,"label",14),p(1),r()),o&2){let e=C();d("for",Ne("app-cms-site-selector-",e.id)),n(),b(e.optionLabel)}}function ba(o,l){if(o&1&&(v(0,"img",15),m(1,"cmsthumbnail")),o&2){let e=C();d("src",y(u(1,2,e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),k)}}function Ea(o,l){if(o&1&&(v(0,"img",15),m(1,"cmsthumbnail")),o&2){let e=C().$implicit;d("src",y(u(1,2,e.linkMainImageIdSrc)),k)}}function Ta(o,l){if(o&1&&(a(0,"mat-option",16),I(1,Ea,2,4,"img",5),a(2,"span"),p(3),r()()),o&2){let e=l.$implicit,i=C();d("value",e)("disabled",i.optionDisabled),n(),d("ngIf",e.linkMainImageIdSrc),n(2),b(i.displayOption(e))}}function wa(o,l){o&1&&v(0,"i",17)}function xa(o,l){o&1&&v(0,"i",18)}function Aa(o,l){if(o&1){let e=E();a(0,"i",19),S("click",function(){f(e);let t=C();return g(t.onActionSelectClear())}),r()}}function Da(o,l){o&1&&(a(0,"em"),p(1),m(2,"translate"),r()),o&2&&(n(),h("(",u(2,1,"TITLE.Necessary"),")"))}var Fe=class Fe{constructor(l,e,i,t,s,_){this.coreEnumService=l;this.cmsToastrService=e;this.cdr=i;this.publicHelper=t;this.translate=s;this.categoryService=_;this.id=++Fe.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new H;this.dataModelSelect=new J;this.formControl=new Qi;this.optionPlaceholder="";this.optionSelectFirstItem=!1;this.optionDisabled=!1;this.optionRequired=!1;this.optionLabel="";this.optionChange=new Me;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(Bi(""),Fi(1500),Li(),Oi(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return le(this,null,function*(){let e=new X;e.rowPerPage=20,e.accessLoad=!0;let i=new pe;i.propertyName="Title",i.value=l,i.searchType=yi.Contains,i.clauseType=ve.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new pe,i.propertyName="Id",i.value=l,i.searchType=yi.Equal,i.clauseType=ve.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield ki(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id.length<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe(Vi(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="string"&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof l==typeof J){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new J,this.loadOptions()}};Fe.nextId=0,Fe.\u0275fac=function(e){return new(e||Fe)(M(q),M(O),M(F),M(N),M(L),M(z))},Fe.\u0275cmp=V({type:Fe,selectors:[["app-catalog-category-selector"]],inputs:{optionPlaceholder:"optionPlaceholder",optionSelectFirstItem:"optionSelectFirstItem",optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:va,decls:18,vars:25,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=E();Ni(),a(0,"div",1),v(1,"app-progress-spinner",2),I(2,ya,2,3,"label",3),a(3,"span",4),I(4,ba,2,4,"img",5),p(5," \xA0"),r(),v(6,"input",6),a(7,"mat-autocomplete",7,0),S("optionSelected",function(_){return f(t),g(i.onActionSelect(_.option.value))}),I(9,Ta,4,4,"mat-option",8),m(10,"async"),r(),I(11,wa,1,0,"i",9)(12,xa,1,0,"i",10)(13,Aa,1,0,"i",11),a(14,"i",12),m(15,"translate"),S("click",function(){return f(t),g(i.onActionButtonReload())}),r(),I(16,Da,3,3,"em",13),Pi(17),r()}if(e&2){let t=A(8);n(),d("optionsInfoAreaId",i.constructorInfoAreaId),n(),d("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),n(2),d("ngIf",i.dataModelSelect&&(i.dataModelSelect==null?null:i.dataModelSelect.linkMainImageIdSrc)),n(2),d("placeholder",y(i.optionPlaceholder))("id",Ne("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),Be("disabled",i.optionDisabled?!0:null),n(),d("displayWith",i.displayFn),n(2),d("ngForOf",u(10,21,i.filteredOptions)),n(2),d("ngIf",!i.formControl.valid),n(),d("ngIf",i.optionRequired&&i.formControl.valid),n(),d("ngIf",(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0),n(),W("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),d("title",y(u(15,23,"ACTION.RELOAD"))),n(2),d("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id.length<=0))}},dependencies:[je,P,K,Q,fe,Xi,en,Zi,tn,$i,U,G,yt,B,ae],encapsulation:2});var gi=Fe;var ka=["vform"];function Va(o,l){if(o&1){let e=E();D(0),a(1,"div",8)(2,"label",9),p(3),r(),a(4,"input",10,0),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModelResultCategory.item.title,t)||(s.dataModelResultCategory.item.title=t),g(t)}),r()(),a(6,"div",8)(7,"label",11),p(8),r(),a(9,"textarea",12,1),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModelResultCategory.item.description,t)||(s.dataModelResultCategory.item.description=t),g(t)}),r()(),v(11,"app-catalog-category-selector",13),m(12,"translate"),R()}if(o&2){let e=C();n(3),b(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),n(),d("placeholder",y(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)),T("ngModel",e.dataModelResultCategory.item.title),n(4),b(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),n(),d("placeholder",y(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle)),T("ngModel",e.dataModelResultCategory.item.description),n(2),d("optionPlaceholder",u(12,9,"TITLE.Alternative_classification_to_move_information_to_this_branch"))}}function Fa(o,l){if(o&1){let e=E();a(0,"div",14)(1,"button",15),S("click",function(){f(e);let t=C();return g(t.onFormMove())}),v(2,"i",16),p(3),m(4,"translate"),r(),a(5,"button",17),S("click",function(){f(e);let t=C();return g(t.onFormDelete())}),v(6,"i",18),p(7),m(8,"translate"),r(),a(9,"button",19),S("click",function(){f(e);let t=C();return g(t.onFormCancel())}),v(10,"i",16),p(11),m(12,"translate"),r()()}if(o&2){let e=C();n(),d("disabled",!e.formInfo.submitButtonEnabled),n(2),h(" ",u(4,5,"TITLE.MOVE_DATA")," "),n(2),d("disabled",!e.formInfo.submitButtonEnabled),n(2),h(" ",u(8,7,"ACTION.DELETE")," "),n(4),h(" ",u(12,9,"ACTION.CANCEL")," ")}}var ft=class ft{constructor(l,e,i,t,s,_,c){this.data=l;this.dialogRef=e;this.publicHelper=i;this.categoryService=t;this.cdr=s;this.translate=_;this.cmsToastrService=c;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResultCategory=new H;this.dataModelResultCategoryAllData=new H;this.dataModel={};this.formInfo=new te;this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=l.id||"")}ngOnInit(){if(this.requestId===""){this.cmsToastrService.typeErrorDeleteRowIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(),this.DataGetAll()}DataGetOne(){if(this.requestId===""){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.translate.get("TITLE.Loading_Information").subscribe(e=>{this.formInfo.submitResultMessage=e});let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.setAccessLoad(),this.categoryService.setAccessDataType(ye.Editor),this.categoryService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResultCategory=e,e.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeErrorGetOne()),this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}DataGetAll(){this.translate.get("TITLE.Loading_Information").subscribe(i=>{this.formInfo.submitResultMessage=i});let l=new X;l.rowPerPage=100;let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(l).subscribe({next:i=>{this.dataModelResultCategoryAllData=i,i.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeErrorGetAll()),this.publicHelper.processService.processStop(e)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormMove(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(!this.formGroup.valid)return;this.formInfo.submitButtonEnabled=!0,this.dataModel.newCatId===this.requestId&&(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitButtonEnabled=!0),this.formInfo.submitButtonEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceMove(this.requestId,this.dataModel.newCatId).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.The_Transfer_Was_Successful").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeSuccessMove()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorMove()),this.formInfo.submitButtonEnabled=!0,this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormDelete(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.formInfo.submitButtonEnabled=!1,this.formInfo.submitButtonEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceDelete(this.requestId).subscribe({next:e=>{this.formInfo.submitButtonEnabled=!e.isSuccess,e.isSuccess?(this.translate.get("MESSAGE.Deletion_Was_Successful").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormChangeNewCatId(l){if(this.formInfo.submitResultMessage="",!this.requestId||this.requestId.length===0||!l||!l.id||l.id.length<=0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.dataModel.newCatId=l.id,this.dataModel.newCatId===this.requestId?(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitButtonEnabled=!1):(this.formInfo.submitButtonEnabled=!0,this.formInfo.submitResultMessage="")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};ft.\u0275fac=function(e){return new(e||ft)(M(Ae),M(xe),M(N),M(z),M(F),M(L),M(O))},ft.\u0275cmp=V({type:ft,selectors:[["app-catalog-category-delete"]],viewQuery:function(e,i){if(e&1&&Z(ka,5),e&2){let t;$(t=ee())&&(i.formGroup=t.first)}},standalone:!1,decls:10,vars:7,consts:[["Title",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModelResultCategory.item.title",1,"color-highlight"],["matInput","","name","dataModelResultCategory.item.title","type","text","minlength","3","maxlength","50","required","","readonly","","id","dataModelResultCategory.item.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModelResultCategory.item.description",1,"color-highlight"],["matInput","","name","dataModelResultCategory.item.description","type","text","minlength","1","maxlength","100","readonly","","required","","rows","5","id","dataModelResultCategory.item.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[3,"optionPlaceholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click","disabled"],[1,"ft-x"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click","disabled"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"]],template:function(e,i){e&1&&(a(0,"div",2),v(1,"app-progress-spinner",3),a(2,"div",4)(3,"p",5),p(4),r(),a(5,"p"),p(6),m(7,"translate"),r(),I(8,Va,13,11,"ng-container",6)(9,Fa,13,11,"div",7),r()()),e&2&&(n(),d("optionsInfoAreaId",i.constructorInfoAreaId),n(3),h(" ",i.formInfo.formTitle," "),n(2),h(" ",u(7,5,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),d("ngIf",i.dataModelResultCategory==null?null:i.dataModelResultCategory.item),n(),d("ngIf",i.formInfo.submitButtonEnabled))},dependencies:[P,K,Q,fe,ne,oe,ie,U,G,gi,B],encapsulation:2});var Ci=ft;var La=["vform"];function Ba(o,l){if(o&1){let e=E();a(0,"app-cms-enum-record-status-selector",20),x("modelChange",function(t){f(e);let s=C();return w(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),r()}if(o&2){let e=C();T("model",e.dataModel.recordStatus),d("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Oa(o,l){if(o&1&&(a(0,"mat-error"),p(1),a(2,"strong"),p(3),m(4,"translate"),r()()),o&2){let e=C();n(),h(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),b(u(4,2,"MESSAGE.required"))}}function Na(o,l){o&1&&(a(0,"mat-error"),p(1," Description is "),a(2,"strong"),p(3),m(4,"translate"),r()()),o&2&&(n(3),b(u(4,1,"MESSAGE.required")))}function Pa(o,l){if(o&1&&(v(0,"img",21),m(1,"cmsthumbnail")),o&2){let e=C();d("src",y(u(1,2,e.dataModel.linkMainImageIdSrc)),k)}}function Ga(o,l){if(o&1){let e=E();a(0,"div",10)(1,"label",22),S("click",function(){f(e);let t=C();return g(t.fileManagerOpenForm=!0)}),p(2),m(3,"translate"),r(),a(4,"input",23,3),m(6,"translate"),x("ngModelChange",function(t){f(e);let s=C();return w(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),g(t)}),S("click",function(){f(e);let t=C();return g(t.fileManagerOpenForm=!0)}),r(),a(7,"cms-file-manager",24),S("itemSelected",function(t){f(e);let s=C();return g(s.onActionFileSelected(t))}),x("openFormChange",function(t){f(e);let s=C();return w(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),g(t)}),r()()}if(o&2){let e=C();n(2),b(u(3,12,"TITLE.Icon_File")),n(2),d("placeholder",y(u(6,14,"TITLE.Original_File_ID"))),T("ngModel",e.dataModel.linkMainImageId),n(3),d("language",e.appLanguage)("isPopup",!0)("openDirectUploadView",!0),T("openForm",e.fileManagerOpenForm),d("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}var gt=class gt extends ti{constructor(e,i,t,s,_,c,j,Y){super(s,new J,c,Y);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.categoryService=s;this.cmsToastrService=_;this.publicHelper=c;this.cdr=j;this.translate=Y;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new bt;this.dataModel=new J;this.formInfo=new te;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id||""),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}ngOnInit(){if(this.requestId?.length>0)this.translate.get("TITLE.Edit_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.categoryService.setAccessLoad(),this.categoryService.setAccessDataType(ye.Editor),this.categoryService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.categoryService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};gt.\u0275fac=function(i){return new(i||gt)(M(Ae),M(xe),M(q),M(z),M(O),M(N),M(F),M(L))},gt.\u0275cmp=V({type:gt,selectors:[["app-catalog-category-edit"]],viewQuery:function(i,t){if(i&1&&Z(La,5),i&2){let s;$(s=ee())&&(t.formGroup=s.first)}},standalone:!1,features:[ce],decls:33,vars:24,consts:[["vform","ngForm"],["Title",""],["Description",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openDirectUploadView","openForm","tree","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"]],template:function(i,t){if(i&1){let s=E();a(0,"div",4),v(1,"app-progress-spinner",5),a(2,"div",6)(3,"p",7),p(4),r(),a(5,"p"),p(6),m(7,"translate"),r(),a(8,"form",8,0),S("ngSubmit",function(){return f(s),g(t.onFormSubmit())}),I(10,Ba,1,5,"app-cms-enum-record-status-selector",9),a(11,"div",10)(12,"label",11),p(13),r(),a(14,"input",12,1),x("ngModelChange",function(c){return f(s),w(t.dataModel.title,c)||(t.dataModel.title=c),g(c)}),r(),a(16,"em"),p(17),r(),I(18,Oa,5,4,"mat-error",13),r(),a(19,"div",10)(20,"label",14),p(21),r(),a(22,"textarea",15,2),x("ngModelChange",function(c){return f(s),w(t.dataModel.description,c)||(t.dataModel.description=c),g(c)}),p(24,"        "),r(),a(25,"em"),p(26),r(),I(27,Na,5,3,"mat-error",13),r(),a(28,"div",16)(29,"a",17),m(30,"cmsthumbnail"),I(31,Pa,2,4,"img",18),r()(),I(32,Ga,8,16,"div",19),r()()()}if(i&2){let s=A(15),_=A(23);n(),d("optionsInfoAreaId",t.constructorInfoAreaId),n(3),h(" ",t.formInfo.formTitle," "),n(2),h(" ",u(7,20,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),d("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),n(3),b(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),d("placeholder",y(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),T("ngModel",t.dataModel.title),n(3),h("",s.value.length," / 100"),n(),d("ngIf",s.errors==null?null:s.errors.required),n(3),b(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),n(),d("placeholder",y(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),T("ngModel",t.dataModel.description),n(4),h("",_.value.length," / 500"),n(),d("ngIf",_.errors==null?null:_.errors.required),n(2),d("href",y(u(30,22,t.dataModel.linkMainImageIdSrc)),k),n(2),d("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),n(),d("ngIf",t.fieldsInfo.linkMainImageId==null?null:t.fieldsInfo.linkMainImageId.accessWatchField)}},dependencies:[P,Te,K,Q,be,ne,oe,ie,Ee,we,U,Re,G,De,B,ae],encapsulation:2});var _i=gt;function Wa(o,l){if(o&1){let e=E();a(0,"button",14),S("click",function(){f(e);let t=C();return g(t.onActionAdd())}),p(1),m(2,"translate"),r()}o&2&&(n(),h(" ",u(2,1,"ACTION.ADD")," "))}function Ha(o,l){if(o&1){let e=E();a(0,"button",15),S("click",function(){f(e);let t=C();return g(t.onActionEdit())}),p(1),m(2,"translate"),r()}o&2&&(n(),h(" ",u(2,1,"ACTION.EDIT")," "))}function ja(o,l){if(o&1){let e=E();a(0,"button",16),S("click",function(){f(e);let t=C();return g(t.onActionDelete())}),p(1),m(2,"translate"),r()}o&2&&(n(),h(" ",u(2,1,"ACTION.DELETE")," "))}function qa(o,l){if(o&1){let e=E();a(0,"button",17),S("click",function(){f(e);let t=C();return g(t.onActionButtonReload())}),a(1,"mat-icon",18),m(2,"translate"),p(3,"refresh"),r()()}if(o&2){let e=C();n(),W("rotation360",e.publicHelper.processService.process.inRunArea[e.constructorInfoAreaId]),d("title",y(u(2,4,"ACTION.RELOAD")))}}function Ua(o,l){if(o&1){let e=E();a(0,"mat-tree-node",19),v(1,"button",20),a(2,"span",21),S("click",function(){let t=f(e).$implicit,s=C();return g(s.onActionSelect(t))}),p(3),r()()}if(o&2){let e=l.$implicit,i=C();W("ntk-tree-selected",(i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0&&i.dataModelSelect.id===e.id),n(3),b(e.title)}}function za(o,l){if(o&1){let e=E();a(0,"mat-tree-node",22)(1,"button",23)(2,"mat-icon",24),p(3),r()(),a(4,"span",21),S("click",function(){let t=f(e).$implicit,s=C();return g(s.onActionSelect(t))}),p(5),r()()}if(o&2){let e=l.$implicit,i=C(),t=A(12);W("ntk-tree-selected",(i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0&&i.dataModelSelect.id===e.id),d("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),n(),Be("type","button")("aria-label","Toggle "+e.title),n(2),h(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),n(2),b(e.title)}}function Ka(o,l){if(o&1){let e=E();a(0,"mat-tree-node",19),v(1,"button",20),a(2,"span",21),S("click",function(){let t=f(e).$implicit,s=C();return g(s.onActionSelect(t))}),p(3),r()()}if(o&2){let e=l.$implicit,i=C();W("ntk-tree-selected",(i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0&&i.dataModelSelect.id===e.id),n(3),b(e.title)}}function Qa(o,l){if(o&1){let e=E();a(0,"mat-tree-node",22)(1,"button",23)(2,"mat-icon",24),p(3),r()(),a(4,"span",21),S("click",function(){let t=f(e).$implicit,s=C();return g(s.onActionSelect(t))}),p(5),r()()}if(o&2){let e=l.$implicit,i=C(),t=A(12);W("ntk-tree-selected",(i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0&&i.dataModelSelect.id===e.id),d("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),n(),Be("type","button")("aria-label","Toggle "+e.title),n(2),h(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),n(2),b(e.title)}}var Ct=class Ct{constructor(l,e,i,t,s,_,c,j,Y){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.dialog=t;this.tokenHelper=s;this.cmsStoreService=_;this.translate=c;this.cdr=j;this.publicHelper=Y;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new J;this.dataModelResult=new H;this.filterModel=new X;this.dataSource=new Xt;this.optionChange=new Me;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(l,e)=>!!e.children&&e.children.length>0;this.childrenAccessor=l=>l.children??[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>le(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new J,this.DataGetAll()}onActionSelectForce(l){}onActionAdd(){let l="";this.dataModelSelect&&this.dataModelSelect.id&&this.dataModelSelect.id.length>0&&(l=this.dataModelSelect.id);let e=new rn;e.disableClose=!0,e.autoFocus=!0,e.data={parentId:l},this.dialog.open(fi,e).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let l="";if(this.dataModelSelect&&this.dataModelSelect.id&&this.dataModelSelect.id.length>0&&(l=this.dataModelSelect.id),l.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(_i,{height:"90%",panelClass:e,enterAnimationDuration:ue.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:ue.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let l="";if(this.dataModelSelect&&this.dataModelSelect.id&&this.dataModelSelect.id.length>0&&(l=this.dataModelSelect.id),l.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Ci,{height:"90%",panelClass:e,enterAnimationDuration:ue.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:ue.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}};Ct.\u0275fac=function(e){return new(e||Ct)(M(O),M(q),M(z),M(ze),M(ot),M(nt),M(L),M(F),M(N))},Ct.\u0275cmp=V({type:Ct,selectors:[["app-catalog-category-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:20,vars:17,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,i){e&1&&(a(0,"app-cms-html-tree",1),D(1,2),p(2),m(3,"translate"),R(),D(4,3),I(5,Wa,3,3,"button",4)(6,Ha,3,3,"button",5)(7,ja,3,3,"button",6)(8,qa,4,6,"button",7),R(),D(9,8),v(10,"app-progress-spinner",9),a(11,"mat-tree",10,0),I(13,Ua,4,3,"mat-tree-node",11)(14,za,6,8,"mat-tree-node",12),r(),a(15,"mat-tree",10,0),I(17,Ka,4,3,"mat-tree-node",11)(18,Qa,6,8,"mat-tree-node",12),r(),R(),Oe(19,13),r()),e&2&&(d("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),n(2),h(" ",u(3,15,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),n(3),d("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessAddRow),n(),d("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)&&(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0),n(),d("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessDeleteRow)&&(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0),n(),d("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessWatchRow),n(2),d("optionsInfoAreaId",i.constructorInfoAreaId),n(),d("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),n(3),d("matTreeNodeDefWhen",i.hasChild),n(),d("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),n(3),d("matTreeNodeDefWhen",i.hasChild))},dependencies:[P,Ue,ge,Ut,zt,Qt,Kt,qt,G,ni,B],encapsulation:2});var hi=Ct;var Ja=()=>["expandedTitle"],Ya=()=>["expandedDetail"],Za=()=>[5,10,20,100],Bn=o=>({display:o});function $a(o,l){if(o&1){let e=E();a(0,"div",21)(1,"a",51),S("click",function(){f(e);let t=C();return g(t.onActionButtonNewRow())}),v(2,"i",52)(3,"br"),r(),a(4,"p",23),p(5),m(6,"translate"),r()()}o&2&&(n(5),h(" ",u(6,1,"ACTION.ADD")," "))}function er(o,l){if(o&1){let e=E();a(0,"div",21)(1,"a",9),S("click",function(){f(e);let t=C();return g(t.onActionButtonComment())}),v(2,"i",22)(3,"br"),r(),a(4,"p",23),p(5),m(6,"translate"),r()()}o&2&&(n(5),h(" ",u(6,1,"ACTION.COMMENT")," "))}function tr(o,l){if(o&1){let e=E();a(0,"div",21)(1,"a",53),S("click",function(){f(e);let t=C();return g(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",54)(3,"br"),r(),a(4,"p",23),p(5),m(6,"translate"),r()()}o&2&&(n(5),h(" ",u(6,1,"ACTION.EDIT")," "))}function ir(o,l){if(o&1){let e=E();a(0,"div",21)(1,"a",55),S("click",function(){f(e);let t=C();return g(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",56)(3,"br"),r(),a(4,"p",23),p(5),m(6,"translate"),r()()}o&2&&(n(5),h(" ",u(6,1,"ACTION.DELETE")," "))}function nr(o,l){o&1&&(a(0,"mat-header-cell"),p(1),m(2,"translate"),r()),o&2&&(n(),h(" ",u(2,1,"TITLE.MENU")," "))}function or(o,l){if(o&1){let e=E();a(0,"mat-cell")(1,"button",57),S("click",function(){let t=f(e).$implicit,s=C();return g(s.onActionTableRowSelectActionMenu(t))}),v(2,"i",58),r()()}}function ar(o,l){o&1&&(a(0,"mat-header-cell",59),p(1),m(2,"translate"),r()),o&2&&(n(),h(" ",u(2,1,"TITLE.PICTURE")," "))}function rr(o,l){if(o&1&&(v(0,"img",61),m(1,"cmsthumbnail")),o&2){let e=C().$implicit;d("src",y(u(1,2,e.linkMainImageIdSrc)),k)}}function lr(o,l){if(o&1&&(a(0,"mat-cell"),I(1,rr,2,4,"img",60),r()),o&2){let e=l.$implicit;n(),d("ngIf",(e==null||e.linkMainImageIdSrc==null?null:e.linkMainImageIdSrc.length)>0)}}function sr(o,l){if(o&1&&(a(0,"mat-header-cell",59),p(1),r()),o&2){let e=C();n(),h(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function dr(o,l){if(o&1&&(a(0,"mat-cell"),p(1),r()),o&2){let e=l.$implicit;n(),h(" ",e.id," ")}}function cr(o,l){if(o&1&&(a(0,"mat-header-cell",59),p(1),r()),o&2){let e=C();n(),h(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function pr(o,l){if(o&1&&(a(0,"mat-cell"),p(1),m(2,"cmssiteinfo"),m(3,"async"),r()),o&2){let e=l.$implicit;n(),h(" ",u(3,3,u(2,1,e.linkSiteId))," ")}}function mr(o,l){if(o&1&&(a(0,"mat-header-cell",59),p(1),r()),o&2){let e=C();n(),h(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function ur(o,l){if(o&1&&v(0,"select",64),o&2){let e=C().$implicit,i=C();d("contentService",i.contentService)("row",e)("ngStyle",vi(3,Bn,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function fr(o,l){if(o&1&&(a(0,"mat-cell"),v(1,"i",62),m(2,"statusIconClass"),I(3,ur,1,5,"select",63),r()),o&2){let e=l.$implicit,i=C();n(),d("ngClass",u(2,2,e.recordStatus)),n(2),d("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function gr(o,l){if(o&1&&(a(0,"mat-header-cell",59),p(1),r()),o&2){let e=C();n(),h(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function Cr(o,l){if(o&1&&(a(0,"mat-cell"),p(1),r()),o&2){let e=l.$implicit;n(),h(" ",e.title," ")}}function _r(o,l){if(o&1&&(a(0,"mat-header-cell",59),p(1),r()),o&2){let e=C();n(),h(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function hr(o,l){if(o&1&&(a(0,"mat-cell"),p(1),m(2,"localeDate"),r()),o&2){let e=l.$implicit;n(),h(" ",u(2,1,e.createdDate)," ")}}function Sr(o,l){if(o&1&&(a(0,"mat-header-cell",59),p(1),r()),o&2){let e=C();n(),h(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Ir(o,l){if(o&1&&(a(0,"mat-cell"),p(1),m(2,"localeDate"),r()),o&2){let e=l.$implicit;n(),h(" ",u(2,1,e.updatedDate)," ")}}function Mr(o,l){o&1&&(a(0,"mat-header-cell"),p(1),m(2,"translate"),r()),o&2&&(n(),h(" ",u(2,1,"TITLE.OPTION")," "))}function vr(o,l){if(o&1&&(a(0,"mat-cell",65)(1,"button",66)(2,"mat-icon"),p(3,"more_vert"),r()(),v(4,"mat-menu",null,2),r()),o&2){let e=A(5);n(),d("matMenuTriggerFor",e)}}function yr(o,l){o&1&&(a(0,"mat-header-cell",59),p(1),m(2,"translate"),r()),o&2&&(n(),h(" ",u(2,1,"TITLE.LINKTO")," "))}function br(o,l){if(o&1){let e=E();a(0,"mat-cell")(1,"button",67),S("click",function(){let t=f(e).$implicit,s=C();return g(s.onActionButtonLinkTo(t))}),a(2,"mat-icon",68),p(3,"\u2197"),r()()()}}function Er(o,l){if(o&1&&(a(0,"mat-cell"),p(1),r()),o&2){let e=l.$implicit;n(),h(" ",e.title," ")}}function Tr(o,l){if(o&1&&(v(0,"img",73),m(1,"cmsthumbnail")),o&2){let e=C().$implicit;d("src",y(u(1,2,e.linkMainImageIdSrc)),k)}}function wr(o,l){if(o&1&&(a(0,"tr"),v(1,"td"),a(2,"td"),p(3),m(4,"localeDate"),r()()),o&2){let e=C().$implicit,i=C();n(3),Gi(" ",i.fieldsInfo.updatedDate==null?null:i.fieldsInfo.updatedDate.fieldTitle," : ",u(4,2,e.updatedDate)," ")}}function xr(o,l){if(o&1){let e=E();a(0,"mat-cell")(1,"div")(2,"table")(3,"tr")(4,"th"),I(5,Tr,2,4,"img",69),r(),a(6,"th"),p(7),a(8,"span",70),S("click",function(){f(e);let t=C();return g(t.onActionCopied())}),v(9,"i",71),r()()(),I(10,wr,5,4,"tr",72),a(11,"tr"),v(12,"td"),a(13,"td"),p(14),r()(),a(15,"tr"),v(16,"td"),a(17,"td"),p(18),r()(),a(19,"tr"),v(20,"td")(21,"td"),r()()()()}if(o&2){let e=l.$implicit;n(5),d("ngIf",(e==null||e.linkMainImageIdSrc==null?null:e.linkMainImageIdSrc.length)>0),n(2),h(" ",e.id," "),n(),d("cdkCopyToClipboard",e.id),n(2),d("ngIf",e.updatedDate),n(4),b(e.title),n(4),b(e.description)}}function Ar(o,l){o&1&&v(0,"mat-header-row")}function Dr(o,l){if(o&1){let e=E();a(0,"mat-row",74),S("click",function(t){let s=f(e).$implicit,_=C();return g(_.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=f(e).$implicit,_=C();return g(_.onActionTableRowSelect(s,t))})("mouseenter",function(){let t=f(e).$implicit,s=C();return g(s.onActionTableRowMouseEnter(t))})("mouseleave",function(){let t=f(e).$implicit,s=C();return g(s.onActionTableRowMouseLeave(t))}),r()}if(o&2){let e=l.$implicit,i=C();W("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}function Rr(o,l){if(o&1){let e=E();a(0,"mat-row",75),S("click",function(t){let s=f(e).$implicit,_=C();return g(_.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=f(e).$implicit,_=C();return g(_.onActionTableRowSelect(s,t))})("mouseenter",function(){let t=f(e).$implicit,s=C();return g(s.onActionTableRowMouseEnter(t))})("mouseleave",function(){let t=f(e).$implicit,s=C();return g(s.onActionTableRowMouseLeave(t))}),r()}if(o&2){let e=l.$implicit,i=C();W("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}function kr(o,l){if(o&1){let e=E();a(0,"mat-row",76),S("click",function(t){let s=f(e).$implicit,_=C();return g(_.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=f(e).$implicit,_=C();return g(_.onActionTableRowSelect(s,t))})("mouseenter",function(){let t=f(e).$implicit,s=C();return g(s.onActionTableRowMouseEnter(t))})("mouseleave",function(){let t=f(e).$implicit,s=C();return g(s.onActionTableRowMouseLeave(t))}),r()}if(o&2){let e=l.$implicit,i=C();W("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)),d("ngStyle",vi(3,Bn,e.expanded===!0?"":"none"))}}var _t=class _t extends In{constructor(e,i,t,s,_,c,j,Y,de,Mi){super(e,new se,de,t,c);this.contentService=e;this.cmsToastrService=i;this.tokenHelper=t;this.router=s;this.cdr=_;this.translate=c;this.cmsStoreService=j;this.pageInfo=Y;this.publicHelper=de;this.dialog=Mi;this.constructorInfoAreaId=this.constructor.name;this.filteModelContent=new X;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["LinkMainImageIdSrc","Id","RecordStatus","CreatedDate","UpdatedDate","LinkTo","action_menu"];this.tabledisplayedColumnsMobileSource=["LinkMainImageIdSrc","Id","RecordStatus","CreatedDate","UpdatedDate","LinkTo","action_menu"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Le=>this.onSubmitOptionsSearch(Le)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=ht.Descending}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>le(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new se);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);{if(this.categoryModelSelected&&this.categoryModelSelected.id?.length>0){let t=new pe,s=new pe;s.propertyName="LinkCategoryId",s.value=this.categoryModelSelected.id,s.clauseType=ve.Or,t.filters.push(s),s=new pe,s.propertyName="ContentCategores",s.propertyAnyName="LinkCategoryId",s.value=this.categoryModelSelected.id,s.clauseType=ve.Or,t.filters.push(s),i.filters.push(t)}this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=ht.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=ht.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=ht.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new X,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let e="";this.categoryModelSelected&&this.categoryModelSelected?.id&&(e=this.categoryModelSelected.id),this.router.navigate(["/catalog/content/add",e])}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}this.router.navigate(["/catalog/content/edit",this.tableRowSelected.id])}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(ui,{height:"90%",panelClass:i,enterAnimationDuration:ue.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:ue.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(c=>{i.set(c,0)}),this.translate.get("MESSAGE.All").subscribe(c=>{i.set(c,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(c=>{this.publicHelper.processService.processStart(t,c,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:c=>{c.isSuccess?(this.translate.get("MESSAGE.All").subscribe(j=>{i.set(j,c.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(c.errorMessage),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t,!1)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),_=new pe;_.propertyName="RecordStatus",_.value=bi.Available,s.filters.push(_),this.contentService.ServiceGetCount(s).subscribe({next:c=>{c.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(j=>{i.set(j,c.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(c.errorMessage),this.publicHelper.processService.processStop(t)},error:c=>{this.cmsToastrService.typeError(c),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.DataGetAll()}onActionCopied(){this.cmsToastrService.typeSuccessCopedToClipboard()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionButtonLinkTo(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(e.recordStatus!=bi.Available){this.cmsToastrService.typeWarningRecordStatusNoAvailable();return}this.onActionTableRowSelect(e);let i=this.constructor.name+"ServiceGetOneById";this.translate.get("MESSAGE.Get_catalog_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.contentService.ServiceGetOneById(e.id).subscribe({next:t=>{if(t.isSuccess){var s="";this.publicHelper.isMobile?s="dialog-fullscreen":s="dialog-min",this.dialog.open(An,{height:"90%",width:"90%",panelClass:s,enterAnimationDuration:ue.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:ue.cmsViewConfig.exitAnimationDuration,data:{title:t.item.title,urlViewContentQRCodeBase64:t.item.urlViewContentQRCodeBase64,urlViewContent:t.item.urlViewContent}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}else this.cmsToastrService.typeErrorMessage(t.errorMessage);this.publicHelper.processService.processStop(i)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(i,!1)}})}};_t.\u0275fac=function(i){return new(i||_t)(M(me),M(O),M(ot),M(qe),M(F),M(L),M(nt),M(_n),M(N),M(ze))},_t.\u0275cmp=V({type:_t,selectors:[["app-catalog-content-list"]],standalone:!1,features:[ce],decls:90,vars:42,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionActionRowDisplayMenuAct","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-maximize","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-minimize","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],[1,"fa-solid","fa-comment","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-share","font-18",2,"color","#ffffff"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","","multiTemplateDataRows","",3,"matSortChange","dataSource"],["matColumnDef","action_menu"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkMainImageIdSrc"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","Id"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],["class","Action",4,"matCellDef"],["matColumnDef","LinkTo"],["matColumnDef","expandedTitle"],["matColumnDef","expandedDetail"],[4,"matHeaderRowDef"],["class","ntk-row-expandedTitle",3,"ntk-row-selected","click","rtclick","mouseenter","mouseleave",4,"matRowDef","matRowDefColumns"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick","mouseenter","mouseleave",4,"matRowDef","matRowDefColumns"],["class","ntk-row-expandedDetail",3,"ntk-row-selected","ngStyle","click","rtclick","mouseenter","mouseleave",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"click"],[1,"fa","fa-bars","font-18"],["mat-sort-header",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","40","width","40",3,"src",4,"ngIf"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["type","button","mat-icon-button","",3,"click"],[2,"color","#ff671f"],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","80","width","80",3,"src",4,"ngIf"],[1,"navi-icon","pointer",3,"click","cdkCopyToClipboard"],[1,"flaticon2-copy"],[4,"ngIf"],["aria-hidden","","height","80","width","80",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"ntk-row-expandedTitle",3,"click","rtclick","mouseenter","mouseleave"],[1,"ntk-row-mainfild",3,"click","rtclick","mouseenter","mouseleave"],[1,"ntk-row-expandedDetail",3,"click","rtclick","mouseenter","mouseleave","ngStyle"]],template:function(i,t){if(i&1){let s=E();a(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(c){return f(s),w(t.viewGuideNotice,c)||(t.viewGuideNotice=c),g(c)}),S("optionOnActionButtonMemoRow",function(){return f(s),g(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(s),g(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(s),g(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(s),g(t.onActionButtonPrintRow())}),D(1,4),a(2,"app-catalog-category-tree",5),S("optionChange",function(c){return f(s),g(t.onActionSelectorSelect(c))}),r(),R(),Oe(3,6)(4,7),D(5,8),a(6,"a",9),S("click",function(){return f(s),g(t.viewGuideNotice=!t.viewGuideNotice)}),v(7,"i",10),r(),a(8,"a",9),S("click",function(){return f(s),g(t.onActionButtonReload())}),v(9,"i",11),r(),a(10,"a",12),S("click",function(){return f(s),g(t.onActionGridExpandRows(!0))}),v(11,"i",13),r(),a(12,"a",12),S("click",function(){return f(s),g(t.onActionGridExpandRows(!1))}),v(13,"i",14),r(),R(),D(14,15),a(15,"a",16),S("click",function(){return f(s),g(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(16,"mat-slide-toggle",17),p(17),m(18,"translate"),r(),a(19,"a",16),S("click",function(){return f(s),g(t.onActionButtonStatist())}),v(20,"mat-slide-toggle",17),p(21),m(22,"translate"),r(),R(),D(23,18),I(24,$a,7,3,"div",19)(25,er,7,3,"div",19),R(),D(26,20),I(27,tr,7,3,"div",19)(28,ir,7,3,"div",19),a(29,"div",21)(30,"a",12),S("click",function(){return f(s),g(t.onActionButtonComment(t.tableRowSelected))}),v(31,"i",22)(32,"br"),r(),a(33,"p",23),p(34),m(35,"translate"),r()(),a(36,"div",21)(37,"a",9),S("click",function(){return f(s),g(t.onActionButtonLinkTo(t.tableRowSelected))}),v(38,"i",24)(39,"br"),r(),a(40,"p",23),p(41),m(42,"translate"),r()(),R(),D(43,25),a(44,"app-cms-search-list",26),x("optionsChange",function(c){return f(s),w(t.optionsSearch,c)||(t.optionsSearch=c),g(c)}),r(),a(45,"app-cms-statist-list",26),x("optionsChange",function(c){return f(s),w(t.optionsStatist,c)||(t.optionsStatist=c),g(c)}),r(),R(),D(46,27),a(47,"mat-table",28,0),S("matSortChange",function(){f(s);let c=A(48);return g(t.onTableSortData(c))}),D(49,29),I(50,nr,3,3,"mat-header-cell",30)(51,or,3,0,"mat-cell",31),R(),D(52,32),I(53,ar,3,3,"mat-header-cell",33)(54,lr,2,1,"mat-cell",31),R(),D(55,34),I(56,sr,2,1,"mat-header-cell",33)(57,dr,2,1,"mat-cell",31),R(),D(58,35),I(59,cr,2,1,"mat-header-cell",33)(60,pr,4,5,"mat-cell",31),R(),D(61,36),I(62,mr,2,1,"mat-header-cell",33)(63,fr,4,4,"mat-cell",31),R(),D(64,37),I(65,gr,2,1,"mat-header-cell",33)(66,Cr,2,1,"mat-cell",31),R(),D(67,38),I(68,_r,2,1,"mat-header-cell",33)(69,hr,3,3,"mat-cell",31),R(),D(70,39),I(71,Sr,2,1,"mat-header-cell",33)(72,Ir,3,3,"mat-cell",31),R(),D(73,40),I(74,Mr,3,3,"mat-header-cell",30)(75,vr,6,1,"mat-cell",41),R(),D(76,42),I(77,yr,3,3,"mat-header-cell",33)(78,br,4,0,"mat-cell",31),R(),D(79,43),I(80,Er,2,1,"mat-cell",31),R(),D(81,44),I(82,xr,22,6,"mat-cell",31),R(),I(83,Ar,1,0,"mat-header-row",45)(84,Dr,1,2,"mat-row",46)(85,Rr,1,2,"mat-row",47)(86,kr,1,5,"mat-row",48),r(),R(),D(87,49),a(88,"mat-paginator",50,1),S("page",function(c){return f(s),g(t.onTablePageingData(c))}),r(),R(),r()}i&2&&(d("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","catalog.content.list"),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),d("optionTreeDisplay",!0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionActionRowDisplayMenuAct",t.tableRowSelectActionMenuClick)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),n(9),W("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),n(7),d("checked",t.optionsSearch.data.show),n(),h("",u(18,31,"ACTION.SEARCH")," "),n(3),d("checked",t.optionsStatist.data.show),n(),h("",u(22,33,"ACTION.STATIST")," "),n(3),d("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),n(),d("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.id.length)>0),n(2),d("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),n(),d("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),n(6),h(" ",u(35,35,"ACTION.COMMENT")," "),n(7),h(" ",u(42,37,"TITLE.LINKTO")," "),n(3),T("options",t.optionsSearch),n(),T("options",t.optionsStatist),n(2),d("dataSource",t.tableSource),n(36),d("matHeaderRowDef",t.tabledisplayedColumns),n(),d("matRowDefColumns",vt(39,Ja)),n(),d("matRowDefColumns",t.tabledisplayedColumns),n(),d("matRowDefColumns",vt(40,Ya)),n(2),d("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",vt(41,Za)))},dependencies:[Wi,P,Hi,Ue,ge,U,ln,sn,dn,cn,pn,mn,Ke,Xe,$e,Je,Qe,et,Ye,Ze,tt,it,Ki,Mn,vn,yn,bn,En,hi,yt,B,Tn,ae,wn,xn],encapsulation:2});var Si=_t;var Vr=[{path:"",component:si,data:{title:"ROUTE.CATALOG"},children:[{path:"config",loadChildren:()=>import("./chunk-NXXZ3WJ3.js").then(o=>o.CatalogConfigModule),data:{title:"ROUTE.CATALOG"}},{path:"content",component:Si,data:{title:"ROUTE.CATALOG"}},{path:"content/add/:CategoryId",component:ci,data:{title:"ROUTE.CATALOG"}},{path:"content/edit/:Id",component:mi,data:{title:"ROUTE.CATALOG"}}]}],We=class We{};We.\u0275fac=function(e){return new(e||We)},We.\u0275mod=Mt({type:We}),We.\u0275inj=It({imports:[Ti.forChild(Vr),Ti]});var Ii=We;var He=class He{};He.\u0275fac=function(e){return new(e||He)},He.\u0275mod=Mt({type:He}),He.\u0275inj=It({providers:[qi,q,Ei,Ui,Sn,z,Ei,me],imports:[ji,Ii,Ji,Yi.withConfig({warnOnNgModelWithFormControl:"never"}),Cn,hn,gn]});var On=He;export{On as CatalogModule};
