import{a as ae}from"./chunk-SGYUJ4C2.js";import{a as ne,b as re}from"./chunk-HWVBXPYB.js";import{a as ie}from"./chunk-XTZQYX3Z.js";import{f as oe}from"./chunk-HZFOD3TS.js";import{Fc as Z,Ib as z,Ic as ee,Jb as q,Kb as J,Kc as te,Lb as K,Ma as $,Mb as Q,Nb as U,Qb as X,Rb as Y,Za as W,ba as F}from"./chunk-VNRE2N75.js";import{Cq as h,Fa as r,Gd as B,Ha as R,Ib as V,Kb as E,Kc as O,Ld as G,Nb as p,Oa as s,Ob as x,Pb as C,Sa as w,Ud as L,Wb as H,Ya as A,Yd as j,bf as y,cc as M,da as u,db as k,dc as S,ea as m,jb as l,kb as a,lb as d,mb as I,qb as v,rb as T,sb as N,tb as f,vc as P,wb as b,yb as c}from"./chunk-7KXCO7RP.js";import{i as D}from"./chunk-SEDBTTTN.js";function se(n,o){if(n&1){let e=f();a(0,"button",14),b("click",function(){u(e);let i=c();return m(i.onActionAdd())}),p(1),M(2,"translate"),d()}n&2&&(r(),C(" ",S(2,1,"ACTION.ADD")," "))}function de(n,o){if(n&1){let e=f();a(0,"button",15),b("click",function(){u(e);let i=c();return m(i.onActionEdit())}),p(1),M(2,"translate"),d()}n&2&&(r(),C(" ",S(2,1,"ACTION.EDIT")," "))}function ce(n,o){if(n&1){let e=f();a(0,"button",16),b("click",function(){u(e);let i=c();return m(i.onActionDelete())}),p(1),M(2,"translate"),d()}n&2&&(r(),C(" ",S(2,1,"ACTION.DELETE")," "))}function pe(n,o){if(n&1){let e=f();a(0,"button",17),b("click",function(){u(e);let i=c();return m(i.onActionButtonReload())}),a(1,"mat-icon",18),M(2,"translate"),p(3,"refresh"),d()()}if(n&2){let e=c();r(),E("rotation360",e.publicHelper.processService.process.inRunArea[e.constructorInfoAreaId]),l("title",H(S(2,4,"ACTION.RELOAD")))}}function ue(n,o){if(n&1){let e=f();a(0,"mat-tree-node",19),I(1,"button",20),a(2,"span",21),b("click",function(){let i=u(e).$implicit,_=c();return m(_.onActionSelect(i))}),p(3),d()()}if(n&2){let e=o.$implicit,t=c();E("ntk-tree-selected",t.dataModelSelect.id>0&&t.dataModelSelect.id===e.id),r(3),x(e.titleML)}}function me(n,o){if(n&1){let e=f();a(0,"mat-tree-node",22)(1,"button",23)(2,"mat-icon",24),p(3),d()(),a(4,"span",21),b("click",function(){let i=u(e).$implicit,_=c();return m(_.onActionSelect(i))}),p(5),d()()}if(n&2){let e=o.$implicit,t=c(),i=V(12);E("ntk-tree-selected",t.dataModelSelect.id>0&&t.dataModelSelect.id===e.id),l("cdkTreeNodeTypeaheadLabel",e.titleML)("isExpanded",e.isExpanded??!1),r(),k("type","button")("aria-label","Toggle "+e.titleML),r(2),C(" ",i.isExpanded(e)?"expand_more":"chevron_right"," "),r(2),x(e.titleML)}}var g=class g{constructor(o,e,t,i,_,fe,be,Ce,Me){this.cmsToastrService=o;this.coreEnumService=e;this.categoryService=t;this.dialog=i;this.cdr=_;this.publicHelper=fe;this.tokenHelper=be;this.cmsStoreService=Ce;this.translate=Me;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new y;this.dataModelResult=new B;this.filterModel=new G;this.dataSource=new U;this.optionChange=new R;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(o,e)=>!1;this.childrenAccessor=o=>[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(o){this.onActionSelectForce(o)}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(o=>o.tokenInfoStore).subscribe(o=>D(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(o=>o.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let o=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(o,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(o)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(o,!1)}})}onActionSelect(o){this.dataModelSelect=o,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new y,this.DataGetAll()}onActionSelectForce(o){}onActionAdd(){var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(ne,{height:"90%",panelClass:o,enterAnimationDuration:h.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:h.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let o=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(o=this.dataModelSelect.id),o===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(re,{height:"90%",panelClass:e,enterAnimationDuration:h.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:h.cmsViewConfig.exitAnimationDuration,data:{id:o}}).afterClosed().subscribe(i=>{i&&i.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let o=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(o=this.dataModelSelect.id),o===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(e=>{this.cmsToastrService.typeErrorSelected(e)});return}}};g.\u0275fac=function(e){return new(e||g)(s(te),s(L),s(j),s($),s(P),s(oe),s(ee),s(Z),s(X))},g.\u0275cmp=w({type:g,selectors:[["app-core-module-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:16,vars:14,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,t){e&1&&(a(0,"app-cms-html-tree",1),v(1,2),p(2),M(3,"translate"),T(),v(4,3),A(5,se,3,3,"button",4)(6,de,3,3,"button",5)(7,ce,3,3,"button",6)(8,pe,4,6,"button",7),T(),v(9,8),I(10,"app-progress-spinner",9),a(11,"mat-tree",10,0),A(13,ue,4,3,"mat-tree-node",11)(14,me,6,8,"mat-tree-node",12),d(),T(),N(15,13),d()),e&2&&(l("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),r(2),C(" ",S(3,12,"TABLE."+(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.moduleEntityName))," "),r(3),l("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),r(),l("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)&&(t.dataModelSelect==null?null:t.dataModelSelect.id)>0),r(),l("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow)&&(t.dataModelSelect==null?null:t.dataModelSelect.id)>0),r(),l("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(2),l("optionsInfoAreaId",t.constructorInfoAreaId),r(),l("dataSource",t.dataSource)("childrenAccessor",t.childrenAccessor),r(3),l("matTreeNodeDefWhen",t.hasChild))},dependencies:[O,F,W,q,J,Q,K,z,ie,ae,Y],encapsulation:2});var le=g;export{le as a};
