import{f as p}from"./chunk-EF7DKNFT.js";import{Qc as f}from"./chunk-4ZDW4SNU.js";import{$d as m,Dd as s,Na as d,Oa as i,Ua as l,ia as c,ua as o,yb as u,yc as h}from"./chunk-GC7IBVIU.js";import{i as n}from"./chunk-SEDBTTTN.js";var g="https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",E="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png",R="https://replit.com/public/images/loading_dots.gif",a=class a{constructor(t,e,r,S,b,C){this.elRef=t;this.renderer=e;this.publicHelper=r;this.cmsToastrService=S;this.cdr=b;this.document=C;this.DataEnumRecordStatus()}DataEnumRecordStatus(){return n(this,null,function*(){(yield this.publicHelper.getEnumRecordStatus()).listItems.forEach(e=>{let r=document.createElement("option");r.innerHTML=" "+e.title+' <i Class="'+this.iconRecordStatus(e.value)+'"></i>',r.value=e.value.toString(),this.elRef.nativeElement.add(r)}),this.elRef.nativeElement.options.length>0&&this.row&&this.row.recordStatus&&this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus)})}onChange(){let t=this.elRef.nativeElement,e=t.value;this.addLoader(t),this.contentService.setAccessDataType(m.Editor),this.contentService.ServiceSetStatus(this.row.id,e).subscribe({next:r=>{r.isSuccess?(this.handleSuccessCase(t),this.cmsToastrService.typeSuccessSetStatus(r.errorMessage),this.row.recordStatus=e|0,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(r.errorMessage),this.handleErrorCase(t))},error:r=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(r),this.handleErrorCase(t)}})}handleSuccessCase(t){this.removeBackground(t),this.addSuccess(t),setTimeout(()=>{this.removeBackground(t)},1e3)}handleErrorCase(t){this.removeBackground(t);let e=this.document.createElement("img");e.style.width="20px",e.src=E;let r=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(r,e),setTimeout(()=>{this.renderer.removeChild(r,e)},1e3)}addLoader(t){this.addBackground(t,R,20)}addSuccess(t){this.addBackground(t,g,20)}addBackground(t,e,r){t.style.background=`#fff url("${e}") no-repeat right 20px center`,t.style.backgroundSize=`${r}px`}removeBackground(t){t.style.background="none"}iconRecordStatus(t){let e="";switch(t){case s.Available:e="fa fa-check";break;case s.Disable:e="fa fa-eye-slash";break;case s.Deleted:e="fa fa-trash";break;case s.Pending:e="fa fa-hourglass-half";break;case s.DeniedConfirmed:e="fa fa-times";break;case s.Archive:e="fa fa-archive";break;default:e="fa fa-check"}return e}};a.\u0275fac=function(e){return new(e||a)(i(o),i(d),i(p),i(f),i(h),i(c))},a.\u0275dir=l({type:a,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(e,r){e&1&&u("change",function(){return r.onChange()})},inputs:{row:"row",contentService:"contentService"},standalone:!1});var v=a;export{v as a};
