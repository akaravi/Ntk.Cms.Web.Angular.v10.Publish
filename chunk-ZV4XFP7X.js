import{f as Xe}from"./chunk-GV6GOUWQ.js";import{a as Je}from"./chunk-YOACE3NF.js";import{a as q}from"./chunk-DKWFUDCJ.js";import{f as H}from"./chunk-XDNTQ2L4.js";import{Fb as ze,Gb as Ue,Gc as j,I as fe,J as Qe,K as je,La as Ge,Ma as We,Qb as B,Rb as Q,U as ge,_ as He,a as Oe,aa as qe,ab as D,da as Se,ea as be,m as N,p as F,q as Ne,qc as Ke,s as Fe,t as ue,tc as Ye,u as De,v as Be,z as he}from"./chunk-VXZRGRY5.js";import{Bb as Me,Ca as I,Cb as _e,Db as Ie,Ed as pe,F as Y,Fa as o,Hb as E,I as J,Ic as le,Id as O,Jc as R,Jd as ce,Ka as m,Kd as we,Mb as u,Nb as v,Nc as Ae,Ob as y,P as X,Pa as V,Pc as se,Q as Z,Rd as me,Rf as ke,Sb as oe,Tb as ne,Ub as re,Va as g,Vb as A,Wb as T,Wj as de,Xa as $,Xb as G,_b as ye,bc as h,bk as z,cb as ee,cc as f,da as S,ea as b,ed as Te,ib as r,jb as a,jk as xe,kb as s,kq as Re,lb as p,lk as Ee,md as W,p as U,q as K,qk as Pe,rd as L,rq as Le,sb as _,uc as ae,vb as C,wk as Ve,xb as d,yb as te,zb as ie}from"./chunk-7YF6ZEWS.js";import{i as P}from"./chunk-SEDBTTTN.js";var mt=["*"];function dt(n,t){if(n&1&&(a(0,"label",13),u(1),s()),n&2){let e=d();r("for",T("app-cms-site-selector-",e.id)),o(),v(e.optionLabel)}}function ut(n,t){if(n&1&&(p(0,"img",14),h(1,"cmsthumbnail")),n&2){let e=d();r("src",A(f(1,2,e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),I)}}function ht(n,t){if(n&1&&(p(0,"img",14),h(1,"cmsthumbnail")),n&2){let e=d().$implicit;r("src",A(f(1,2,e.linkMainImageIdSrc)),I)}}function ft(n,t){if(n&1&&(a(0,"mat-option",15),g(1,ht,2,4,"img",5),a(2,"span"),u(3),s()()),n&2){let e=t.$implicit,i=d();r("value",e)("disabled",i.optionDisabled),o(),r("ngIf",e.linkMainImageIdSrc),o(2),v(i.displayOption(e))}}function gt(n,t){n&1&&p(0,"i",16)}function St(n,t){n&1&&p(0,"i",17)}function bt(n,t){if(n&1){let e=_();a(0,"i",18),C("click",function(){S(e);let l=d();return b(l.onActionSelectClear())}),s()}}function Ct(n,t){n&1&&(a(0,"em"),u(1),h(2,"translate"),s()),n&2&&(o(),y("(",f(2,1,"TITLE.Necessary"),")"))}var w=class w{constructor(t,e,i,l,c,M){this.coreEnumService=t;this.cmsToastrService=e;this.cdr=i;this.publicHelper=l;this.translate=c;this.categoryService=M;this.id=++w.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new pe;this.dataModelSelect=new de;this.formControl=new ue;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new $;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(X(""),Y(1500),J(),Z(t=>typeof t=="string"||typeof t=="number"?this.DataGetAll(t||""):[]))}displayFn(t){return t?t.title:void 0}displayOption(t){return t?t.title:void 0}DataGetAll(t){return P(this,null,function*(){let e=new ce;e.rowPerPage=20,e.accessLoad=!0;let i=new O;i.propertyName="Title",i.value=t,i.searchType=L.Contains,i.clauseType=W.Or,e.filters.push(i),t&&typeof+t=="number"&&+t>0&&(i=new O,i.propertyName="Id",i.value=t,i.searchType=L.Equal,i.clauseType=W.Or,e.filters.push(i));let l=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(l,c,this.constructorInfoAreaId)}),yield U(this.categoryService.ServiceGetAll(e)).then(c=>(this.dataModelResult=c,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id.length<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(l),c.listItems))})}onActionSelect(t){this.optionDisabled||(this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(t){return this.filteredOptions.pipe(K(e=>(e.find(i=>i.id===t.id)||e.push(t),e)))}onActionSelectForce(t){if(typeof t=="string"&&t.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===t)){let e=this.dataModelResult.listItems.find(i=>i.id===t);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(t).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof t==typeof de){this.filteredOptions=this.push(t),this.dataModelSelect=t,this.formControl.setValue(t);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new de,this.loadOptions()}};w.nextId=0,w.\u0275fac=function(e){return new(e||w)(m(me),m(j),m(ae),m(H),m(B),m(Pe))},w.\u0275cmp=V({type:w,selectors:[["app-cms-sms-apipath-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:mt,decls:16,vars:19,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let l=_();te(),a(0,"div",1),p(1,"app-progress-spinner",2),g(2,dt,2,3,"label",3),a(3,"span",4),g(4,ut,2,4,"img",5),u(5," \xA0"),s(),p(6,"input",6),a(7,"mat-autocomplete",7,0),C("optionSelected",function(M){return S(l),b(i.onActionSelect(M.option.value))}),g(9,ft,4,4,"mat-option",8),h(10,"async"),s(),g(11,gt,1,0,"i",9)(12,St,1,0,"i",10)(13,bt,1,0,"i",11)(14,Ct,3,3,"em",12),ie(15),s()}if(e&2){let l=E(8);o(),r("optionsInfoAreaId",i.constructorInfoAreaId),o(),r("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),o(2),r("ngIf",i.dataModelSelect&&(i.dataModelSelect==null?null:i.dataModelSelect.linkMainImageIdSrc)),o(2),r("placeholder",A(i.optionPlaceholder))("id",T("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",l)("required",i.optionRequired),ee("disabled",i.optionDisabled?!0:null),o(),r("displayWith",i.displayFn),o(2),r("ngForOf",f(10,17,i.filteredOptions)),o(2),r("ngIf",!i.formControl.valid),o(),r("ngIf",i.optionRequired&&i.formControl.valid),o(),r("ngIf",(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0),o(),r("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||(i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)===0))}},dependencies:[le,R,N,F,fe,he,Se,ge,be,qe,D,q,se,Q,Je],encapsulation:2});var Ce=w;var Mt=["*"];function _t(n,t){if(n&1&&(a(0,"label",11),u(1),s()),n&2){let e=d();r("for",T("app-cms-site-selector-",e.id)),o(),v(e.optionLabel)}}function It(n,t){if(n&1&&(a(0,"mat-option",12)(1,"span"),u(2),s()()),n&2){let e=t.$implicit,i=d();r("value",e)("disabled",i.optionDisabled),o(2),v(i.displayOption(e))}}function yt(n,t){n&1&&p(0,"i",13)}function At(n,t){n&1&&p(0,"i",14)}function Tt(n,t){if(n&1){let e=_();a(0,"i",15),C("click",function(){S(e);let l=d();return b(l.onActionSelectClear())}),s()}}function wt(n,t){n&1&&(a(0,"em"),u(1),h(2,"translate"),s()),n&2&&(o(),y("(",f(2,1,"TITLE.Necessary"),")"))}var k=class k{constructor(t,e,i,l,c,M){this.coreEnumService=t;this.cmsToastrService=e;this.translate=i;this.cdr=l;this.publicHelper=c;this.categoryService=M;this.id=++k.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new pe;this.dataModelSelect=new z;this.formControl=new ue;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionSelectFirstItemOnChangeApi=!1;this.optionLabel="";this.optionPlaceholder="";this.optionChange=new $;this.optionReload=()=>this.onActionButtonReload();this.privateLinkApiPathId="";this.privateLinkApiPathIdLast="";this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(t){this.onActionSelectForce(t)}set optionLinkApiPathId(t){t!=this.privateLinkApiPathId&&(this.privateLinkApiPathId!=""&&this.onActionSelectClear(),this.privateLinkApiPathId=t,this.privateLinkApiPathId!=this.privateLinkApiPathIdLast&&(this.optionSelectFirstItem=this.optionSelectFirstItemOnChangeApi),this.privateLinkApiPathIdLast=t,this.loadOptions())}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(X(""),Y(1500),J(),Z(t=>typeof t=="string"||typeof t=="number"?this.DataGetAll(t||""):[]))}displayFn(t){return t?t.numberChar:void 0}displayOption(t){return t?t.numberChar:void 0}DataGetAll(t){return P(this,null,function*(){let e=new ce;e.rowPerPage=20,e.accessLoad=!0;let i=new O;i.propertyName="NumberChar",i.value=t,i.searchType=L.Contains,i.clauseType=W.Or,e.filters.push(i),this.privateLinkApiPathId&&this.privateLinkApiPathId.length>0&&(i=new O,i.propertyName="ApiPathAndApiNumbers",i.propertyAnyName="LinkApiPathId",i.value=this.privateLinkApiPathId,i.searchType=L.Equal,e.filters.push(i));let l=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(l,c,this.constructorInfoAreaId)}),yield U(this.categoryService.ServiceGetAll(e)).then(c=>(this.dataModelResult=c,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id.length<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0]),this.onActionSelect(this.dataModelResult.listItems[0])},1e3)),this.publicHelper.processService.processStop(l),c.listItems))})}onActionSelect(t){this.optionDisabled||(this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=new z,this.formControl.setValue(null),this.optionChange.emit(null))}push(t){return this.filteredOptions.pipe(K(e=>(e.find(i=>i.id===t.id)||e.push(t),e)))}onActionSelectForce(t){if(typeof t=="string"&&t.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===t)){let e=this.dataModelResult.listItems.find(i=>i.id===t);this.dataModelSelect=e,this.formControl.setValue(e);return}if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.numberChar===t)){let e=this.dataModelResult.listItems.find(i=>i.numberChar===t);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(t).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):(!this.dataModelResult.listItems||this.dataModelResult.listItems.length===0)&&this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof t==typeof z){this.filteredOptions=this.push(t),this.dataModelSelect=t,this.formControl.setValue(t);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new z,this.loadOptions()}};k.nextId=0,k.\u0275fac=function(e){return new(e||k)(m(me),m(j),m(B),m(ae),m(H),m(Ve))},k.\u0275cmp=V({type:k,selectors:[["app-cms-sms-api-number-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionSelectFirstItemOnChangeApi:"optionSelectFirstItemOnChangeApi",optionLabel:"optionLabel",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLinkApiPathId:"optionLinkApiPathId"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:Mt,decls:13,vars:18,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let l=_();te(),a(0,"div",1),p(1,"app-progress-spinner",2),g(2,_t,2,3,"label",3),p(3,"input",4),a(4,"mat-autocomplete",5,0),C("optionSelected",function(M){return S(l),b(i.onActionSelect(M.option.value))}),g(6,It,3,3,"mat-option",6),h(7,"async"),s(),g(8,yt,1,0,"i",7)(9,At,1,0,"i",8)(10,Tt,1,0,"i",9)(11,wt,3,3,"em",10),ie(12),s()}if(e&2){let l=E(5);o(),r("optionsInfoAreaId",i.constructorInfoAreaId),o(),r("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),o(),r("placeholder",A(i.optionPlaceholder))("id",T("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",l)("required",i.optionRequired),ee("disabled",i.optionDisabled?!0:null),o(),r("displayWith",i.displayFn),o(2),r("ngForOf",f(7,16,i.filteredOptions)),o(2),r("ngIf",!i.formControl.valid),o(),r("ngIf",i.optionRequired&&i.formControl.valid),o(),r("ngIf",(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0),o(),r("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||(i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)===0))}},dependencies:[le,R,N,F,fe,he,Se,ge,be,D,q,se,Q],encapsulation:2});var ve=k;var xt=["Message"],Et=["vform"],Pt=n=>({direction:n});function Vt(n,t){if(n&1){let e=_();a(0,"button",51),C("click",function(){S(e);let l=d(2);return b(l.onActionSendUrlToQDoc())}),p(1,"i",52),u(2),h(3,"translate"),s()}n&2&&(o(2),y(" ",f(3,1,"ACTION.VIEW")," "))}function Rt(n,t){if(n&1&&(a(0,"div")(1,"a",53),p(2,"img",54),h(3,"translate"),s()()),n&2){let e=d(2);o(),r("href",A(e.optionurlViewContent),I),o(),r("alt",A(f(3,5,"TITLE.Scan_the_barcode")))("src",e.optionurlViewContentQRCodeBase64,I)}}function Lt(n,t){if(n&1){let e=_();a(0,"div")(1,"div",17)(2,"div",31)(3,"p"),u(4),s()()(),a(5,"div",17)(6,"div",32)(7,"div",25)(8,"label",33),u(9),h(10,"translate"),s(),a(11,"input",34,2),re("ngModelChange",function(l){S(e);let c=d();return ne(c.QDocModel.username,l)||(c.QDocModel.username=l),b(l)}),s()(),g(13,Vt,4,3,"button",35),p(14,"br")(15,"br"),a(16,"button",36),C("click",function(){S(e);let l=d();return b(l.onActionOpenLink())}),u(17),h(18,"translate"),s()(),a(19,"div",37),g(20,Rt,4,7,"div",16),a(21,"div",38)(22,"a",39),p(23,"i",40),s(),a(24,"a",41),p(25,"i",42),s(),a(26,"a",43),p(27,"i",44),s(),a(28,"a",45),p(29,"i",46),s(),a(30,"a",47),p(31,"i",48),s(),a(32,"span",49),C("click",function(){S(e);let l=d();return b(l.onActionCopied())}),p(33,"i",50),s()()()()()}if(n&2){let e=d();o(4),v(e.optionLabel),o(5),v(f(10,21,"ACTION.ID_Code")),o(2),oe("ngModel",e.QDocModel.username),o(2),r("ngIf",e.optionurlViewContent&&e.optionurlViewContent.length>0&&e.QDocModel.username),o(4),y(" ",f(18,23,"ACTION.VIEW_PAGE")," "),o(3),r("ngIf",(e.optionurlViewContentQRCodeBase64==null?null:e.optionurlViewContentQRCodeBase64.length)>0&&(e.optionurlViewContent==null?null:e.optionurlViewContent.length)>0),o(2),r("href",G("whatsapp://send?text=",e.optionLabel,"- ",e.optionurlViewContent),I),o(2),r("href",G("https://telegram.me/share/url?url=",e.optionurlViewContent,"&text=",e.optionLabel),I),o(2),r("href",G("https://www.linkedin.com/shareArticle?url=",e.optionurlViewContent,"&title=",e.optionLabel),I),o(2),r("href",T("http://www.facebook.com/share.php?u=",e.optionurlViewContent),I),o(2),r("href",G("http://twitter.com/share?text=",e.optionLabel,"&url=",e.optionurlViewContent),I),o(2),r("cdkCopyToClipboard",e.optionurlViewContent)}}function Ot(n,t){if(n&1){let e=_();a(0,"app-cms-sms-api-number-selector",55),h(1,"translate"),C("optionChange",function(l){S(e);let c=d();return b(c.onActionSelectApiNumber(l))}),s()}if(n&2){let e=d();r("optionLinkApiPathId",e.dataModel==null?null:e.dataModel.linkApiPathId)("optionPlaceholder",f(1,4,"TITLE.sender_number"))("optionSelectFirstItem",!0)("optionSelectFirstItemOnChangeApi",!0)}}function Nt(n,t){n&1&&(a(0,"mat-error"),u(1),h(2,"translate"),a(3,"strong"),u(4),h(5,"translate"),s()()),n&2&&(o(),y(" ",f(2,2,"TITLE.Message_Text")," "),o(3),v(f(5,4,"MESSAGE.required")))}function Ft(n,t){if(n&1){let e=_();a(0,"div",25)(1,"label",56),u(2),h(3,"translate"),s(),a(4,"textarea",57,3),re("ngModelChange",function(l){S(e);let c=d();return ne(c.dataModel.toNumbers,l)||(c.dataModel.toNumbers=l),b(l)}),s(),a(6,"em")(7,"strong",58),u(8),h(9,"translate"),s()()()}if(n&2){let e=d();o(2),v(f(3,3,"TITLE.Receiver_number")),o(2),oe("ngModel",e.dataModel.toNumbers),o(4),v(f(9,5,"TITLE.You_can_separate_the_number_of_the_recipient_of_the_message_with_an_inter"))}}function Dt(n,t){if(n&1&&(a(0,"button",61),p(1,"i",52),u(2),h(3,"translate"),s()),n&2){d(2);let e=E(13);r("disabled",!e.valid),o(2),y(" ",f(3,2,"ACTION.Send_Message")," ")}}function Bt(n,t){if(n&1&&(a(0,"div",59),g(1,Dt,4,4,"button",60),s()),n&2){let e=d();o(),r("ngIf",!e.publicHelper.processService.process.inRunAll)}}var x=class x{constructor(t,e,i,l,c,M,Qt,jt,Ht,qt){this.cmsToastrService=t;this.data=e;this.dialogRef=i;this.smsActionService=l;this.http=c;this.router=M;this.translate=Qt;this.tokenHelper=jt;this.cmsStoreService=Ht;this.publicHelper=qt;this.id=++x.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModel=new xe;this.formInfo=new we;this.tokenInfo=new ke;this.optionLabel="";this.optionurlViewContentQRCodeBase64="";this.optionurlViewContent="";this.QDocModel={};this.unsubscribe=[];this.sendByShow=!1;e&&(this.optionLabel=e.title,this.optionurlViewContentQRCodeBase64=e.urlViewContentQRCodeBase64,this.optionurlViewContent=e.urlViewContent,this.formInfo.formTitle=e.title),this.formInfo.formDescription="\u0645\u062D\u062A\u0648\u0627 \u0631\u0627 \u0627\u0634\u062A\u0631\u0627\u06A9 \u0628\u06AF\u0630\u0627\u0631\u06CC\u062F"}ngOnInit(){this.dataModel.message=`${this.optionLabel}
    ${this.optionurlViewContent}`,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(t=>t.tokenInfoStore).subscribe(t=>P(this,null,function*(){this.tokenInfo=t})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(t=>t.unsubscribe())}onActionSelectApiNumber(t){t&&t.id?.length>0?this.dataModel.linkFromNumber=t.id:t&&t.numberChar?.length>0&&(this.dataModel.linkFromNumber=t.numberChar)}onActionMessageLTR(){this.message.nativeElement.style.direction="ltr",this.message.nativeElement.style.textAlign="left"}onActionMessageRTL(){this.message.nativeElement.style.direction="rtl",this.message.nativeElement.style.textAlign="right"}onActionSelectPrivateSiteConfig(t){this.dataModelParentSelected=t,t&&t.id?.length>0&&(this.dataModel.linkApiPathId=t.id,this.sendByShow=!1,t.apiAbilitySendByDirect&&(this.dataModel.sendByQueue=!1),t.apiAbilitySendByQueue&&(this.dataModel.sendByQueue=!0),t.apiAbilitySendByQueue&&t.apiAbilitySendByDirect&&(this.sendByShow=!0))}onActionSendUrlToQDoc(){if(this.QDocModel.message=this.optionurlViewContent,!this.QDocModel.username&&this.QDocModel.username.length<=0){this.cmsToastrService.typeWarningSelected("\u06A9\u062F \u0634\u0646\u0627\u0633\u0647 \u0631\u0627 \u0627\u0632 \u0648\u0628\u0633\u0627\u06CC\u062A https://Qdoc.ir \u062F\u0631\u06CC\u0627\u0641\u062A \u0646\u0645\u0627\u06CC\u06CC\u062F");return}this.http.post(Le.cmsServerConfig.configQDocServerPath,this.QDocModel,{headers:{}}).subscribe({next:t=>{this.translate.get("MESSAGE.The_order_was_sent_to_the_website").subscribe(e=>{this.cmsToastrService.typeSuccessMessage(e)})},error:t=>{this.cmsToastrService.typeErrorMessage("\u0628\u0631\u0631\u0648\u0632 \u062E\u0637\u0627 \u062F\u0631 \u0627\u0631\u0633\u0627\u0644 \u062F\u0633\u062A\u0648\u0631",t)}})}onFormSubmit(){if(!this.formGroup.valid)return;(!this.dataModel.linkApiPathId||this.dataModel.linkApiPathId.length<=0)&&this.cmsToastrService.typeErrorFormInvalid(),this.formInfo.submitButtonEnabled=!1;let t=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(t,e,this.constructorInfoAreaId)}),this.formInfo.submitResultMessage="",this.formInfo.submitResultMessage="",this.smsActionService.ServiceSendMessage(this.dataModel).subscribe({next:e=>{this.formInfo.submitButtonEnabled=!0,e.isSuccess?(this.translate.get("MESSAGE.Submit_request_was_successfully_registered").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.translate.get("MESSAGE.Send_request_was_successfully_registered").subscribe(i=>{this.cmsToastrService.typeSuccessMessage(i)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(t)},error:e=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(t,!1)}})}onActionCopied(){this.cmsToastrService.typeSuccessCopedToClipboard()}onActionOpenLink(){let t=this.router.serializeUrl(this.router.createUrlTree([this.optionurlViewContent]));window.open(this.optionurlViewContent,"_blank")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};x.nextId=0,x.\u0275fac=function(e){return new(e||x)(m(j),m(We),m(Ge),m(Ee),m(Te),m(Re),m(B),m(Ye),m(Ke),m(H))},x.\u0275cmp=V({type:x,selectors:[["app-cms-link-to"]],viewQuery:function(e,i){if(e&1&&(Me(xt,5),Me(Et,5)),e&2){let l;_e(l=Ie())&&(i.message=l.first),_e(l=Ie())&&(i.formGroup=l.first)}},inputs:{optionLabel:"optionLabel",optionurlViewContentQRCodeBase64:"optionurlViewContentQRCodeBase64",optionurlViewContent:"optionurlViewContent"},standalone:!1,decls:42,vars:30,consts:[["vform","ngForm"],["Message",""],["QDocCode",""],["ToNumbers",""],[3,"Key"],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"menu-title"],[1,"color-highlight"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit","ngStyle"],[3,"label"],[1,"row",2,"padding","5px"],[4,"ngIf"],[1,"row"],[1,"col-md-6","col-sm-6","col-xs-9",2,"padding-top","40px"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionSelectFirstItem"],[3,"optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionSelectFirstItemOnChangeApi","optionChange",4,"ngIf"],[1,"col-sm-12","col-md-6"],[1,"message-box"],[1,"row",2,"margin-bottom","0px !important","height","90px"],[1,"row",2,"margin-bottom","0px !important","height","283px"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.message",1,"color-highlight"],["matInput","","name","dataModel.message","type","text","placeholder","...","id","dataModel.message","minlength","1","maxlength","500","rows","9",1,"form-control","validate-name",2,"height","276px",3,"ngModelChange","ngModel"],[1,"row",2,"margin-bottom","0px !important","height","140px","margin-top","11px"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","row","style",`
                    margin-bottom: 0px !important;
                    height: 40px;
                    bottom: 4vh;
                    justify-content: center;
                  `,4,"ngIf"],[1,"col-md-12","col-sm-12","col-xs-18"],[1,"col-md-6","col-sm-6","col-xs-9"],["for","QDocModel.username",1,"color-highlight"],["matInput","","type","text","name","QDocModel.username","id","QDocModel.username","placeholder","12345",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["type","button","type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"col-md-6","col-sm-6","col-xs-9",2,"text-align","center"],[1,"mt-4"],["target","_blank",1,"style","whatsapp",3,"href"],[1,"flaticon-whatsapp","text-dark"],["target","_blank",1,"style","telegram",3,"href"],[1,"flaticon2-telegram-logo","text-dark"],["target","_blank",1,"style","linkedin",3,"href"],[1,"flaticon-linkedin-logo","text-dark"],["target","_blank",1,"style","facebook",3,"href"],[1,"flaticon-facebook-letter-logo","text-dark"],["target","_blank",1,"style","twitter",3,"href"],[1,"flaticon-twitter-logo","text-dark"],[1,"navi-icon","style","cursor",3,"click","cdkCopyToClipboard"],[1,"flaticon2-copy","text-dark"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa","fa-check-square-o"],["target","_blank",3,"href"],["height","200px","width","200px",3,"src","alt"],[3,"optionChange","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionSelectFirstItemOnChangeApi"],["for","dataModel.toNumbers",1,"color-highlight"],["matInput","","name","dataModel.toNumbers","id","dataModel.toNumbers","type","text","placeholder","0912","rows","2",2,"height","138px",3,"ngModelChange","ngModel"],[1,"info-field-text"],[1,"row",2,"margin-bottom","0px !important","height","40px","bottom","4vh","justify-content","center"],["type","submit","class","message-box-button",3,"disabled",4,"ngIf"],["type","submit",1,"message-box-button",3,"disabled"]],template:function(e,i){if(e&1){let l=_();p(0,"app-cms-guide-notice",4),a(1,"div",5),p(2,"app-progress-spinner",6),a(3,"div",7)(4,"p",8),u(5),s(),a(6,"a",9),C("click",function(){return S(l),b(i.onFormCancel())}),p(7,"i",10),s(),p(8,"hr"),s(),a(9,"div",11)(10,"p",12),u(11),s(),a(12,"form",13,0),C("ngSubmit",function(){return S(l),b(i.onFormSubmit())}),a(14,"mat-tab-group")(15,"mat-tab",14),h(16,"translate"),a(17,"div",15),g(18,Lt,34,25,"div",16),s()(),a(19,"mat-tab",14),h(20,"translate"),a(21,"div",17)(22,"div",18)(23,"app-cms-sms-apipath-selector",19),h(24,"translate"),C("optionChange",function(M){return S(l),b(i.onActionSelectPrivateSiteConfig(M))}),s(),g(25,Ot,2,6,"app-cms-sms-api-number-selector",20),s(),a(26,"div",21)(27,"div",22),p(28,"div",23),a(29,"div",24)(30,"div",25)(31,"label",26),u(32),h(33,"translate"),s(),a(34,"textarea",27,1),re("ngModelChange",function(M){return S(l),ne(i.dataModel.message,M)||(i.dataModel.message=M),b(M)}),s(),a(36,"em"),u(37),s(),g(38,Nt,6,6,"mat-error",16),s()(),a(39,"div",28),g(40,Ft,10,7,"div",29),s(),g(41,Bt,2,1,"div",30),s()()()()()()()()}if(e&2){let l=E(35);r("Key","linkto.content"),o(2),r("optionsInfoAreaId",i.constructorInfoAreaId),o(3),v(i.formInfo.formTitle),o(6),y(" ",i.formInfo.formDescription," "),o(),r("ngStyle",ye(28,Pt,i.tokenInfo==null||i.tokenInfo.access==null?null:i.tokenInfo.access.direction)),o(3),r("label",A(f(16,20,"TITLE.LINKTO"))),o(3),r("ngIf",i.optionurlViewContent&&i.optionurlViewContent.length>0),o(),r("label",A(f(20,22,"TITLE.Send_Message"))),o(4),r("optionSelectForce",i.dataModel==null?null:i.dataModel.linkApiPathId)("optionPlaceholder",f(24,24,"TITLE.Direction"))("optionSelectFirstItem",!0),o(2),r("ngIf",(i.dataModel.linkApiPathId==null?null:i.dataModel.linkApiPathId.length)>0),o(7),v(f(33,26,"TITLE.Message_Text")),o(2),oe("ngModel",i.dataModel.message),o(3),y("",l.value.length," / 500"),o(),r("ngIf",l.errors==null?null:l.errors.required),o(2),r("ngIf",(!i.dataModel.toContactCategories||(i.dataModel.toContactCategories==null?null:i.dataModel.toContactCategories.length)===0)&&(!i.dataModel.toContactContents||(i.dataModel.toContactContents==null?null:i.dataModel.toContactContents.length)===0)),o(),r("ngIf",i.formInfo.submitButtonEnabled)}},dependencies:[R,Ae,Be,N,F,Ne,Qe,je,De,Fe,He,D,ze,Ue,Oe,q,Xe,Ce,ve,Q],styles:[".style[_ngcontent-%COMP%]{padding:6px;margin:2px;font-size:20px;text-align:center;text-decoration:none;border:black solid 2px;border-radius:50%}.style-copy[_ngcontent-%COMP%]{color:#000;border-radius:20%}.whatsapp[_ngcontent-%COMP%]:hover{background-color:#adff2f}.facebook[_ngcontent-%COMP%]:hover{background:#3b5998}.twitter[_ngcontent-%COMP%]:hover{background:#55acee}.linkedin[_ngcontent-%COMP%]:hover{background:#007bb5}.telegram[_ngcontent-%COMP%]:hover{background:#125688}.cursor[_ngcontent-%COMP%]{cursor:pointer}.message-box[_ngcontent-%COMP%]{background-image:url(/assets/media/bg/iphone.png);height:600px;width:300px;background-position:center;background-repeat:no-repeat;background-size:cover;padding-right:33px;padding-left:33px}.message-box-button[_ngcontent-%COMP%]{color:#00f;border-color:transparent;background-color:transparent}.message-box-button[_ngcontent-%COMP%]:hover{color:red;font-size:initial}.message-box-button[_ngcontent-%COMP%]:active{color:#a200ff}"]});var st=x;export{st as a};
