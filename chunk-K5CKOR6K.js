import{a as le}from"./chunk-GPJVB2QT.js";import{a as re,b as ae}from"./chunk-7MG5QAUX.js";import{a as ne}from"./chunk-HFMA3TIZ.js";import{f as oe}from"./chunk-WFPIYFXV.js";import{$b as Z,Pa as W,Pc as ee,Sb as q,Sc as te,Tb as J,Ub as K,Uc as ie,Vb as Q,Wb as U,Xb as X,_b as Y,ab as z,da as $}from"./chunk-G2V2D7LA.js";import{Ab as s,Fa as r,Gd as G,Ha as w,If as I,Kb as P,Kr as v,Ld as L,Mb as x,Oa as l,Pb as c,Qb as R,Rb as M,Sa as k,Ya as N,Yb as O,da as p,db as V,ea as u,fb as g,fc as S,gb as _,gc as b,lb as m,mb as a,nb as d,ob as D,qe as j,sb as E,tb as A,ub as H,ue as F,vb as C,xc as B,yb as f}from"./chunk-4YSQYRXM.js";import{i as y}from"./chunk-SEDBTTTN.js";function se(n,i){if(n&1){let e=C();a(0,"button",14),f("click",function(){p(e);let o=s();return u(o.onActionAdd())}),c(1),S(2,"translate"),d()}n&2&&(r(),M(" ",b(2,1,"ACTION.ADD")," "))}function ce(n,i){if(n&1){let e=C();a(0,"button",15),f("click",function(){p(e);let o=s();return u(o.onActionEdit())}),c(1),S(2,"translate"),d()}n&2&&(r(),M(" ",b(2,1,"ACTION.EDIT")," "))}function pe(n,i){if(n&1){let e=C();a(0,"button",16),f("click",function(){p(e);let o=s();return u(o.onActionDelete())}),c(1),S(2,"translate"),d()}n&2&&(r(),M(" ",b(2,1,"ACTION.DELETE")," "))}function ue(n,i){if(n&1){let e=C();a(0,"button",17),f("click",function(){p(e);let o=s();return u(o.onActionButtonReload())}),a(1,"mat-icon",18),S(2,"translate"),c(3,"refresh"),d()()}if(n&2){let e=s();r(),x("rotation360",e.publicHelper.processService.process.inRunArea[e.constructorInfoAreaId]),m("title",O(b(2,4,"ACTION.RELOAD")))}}function me(n,i){if(n&1){let e=C();a(0,"mat-tree-node",19),D(1,"button",20),a(2,"span",21),f("click",function(){let o=p(e).$implicit,T=s();return u(T.onActionSelect(o))}),c(3),d()()}if(n&2){let e=i.$implicit,t=s();x("ntk-tree-selected",(t.dataModelSelect==null?null:t.dataModelSelect.id)>0&&(t.dataModelSelect==null?null:t.dataModelSelect.id)===e.id),r(3),R(e.titleML)}}function Ce(n,i){if(n&1){let e=C();a(0,"mat-tree-node",22)(1,"button",23)(2,"mat-icon",24),c(3),d()(),a(4,"span",21),f("click",function(){let o=p(e).$implicit,T=s();return u(T.onActionSelect(o))}),c(5),d()()}if(n&2){let e=i.$implicit,t=s(),o=P(12);x("ntk-tree-selected",(t.dataModelSelect==null?null:t.dataModelSelect.id)>0&&(t.dataModelSelect==null?null:t.dataModelSelect.id)===e.id),m("cdkTreeNodeTypeaheadLabel",e.titleML)("isExpanded",e.isExpanded??!1),r(),V("type","button")("aria-label","Toggle "+e.titleML),r(2),M(" ",o.isExpanded(e)?"expand_more":"chevron_right"," "),r(2),R(e.titleML)}}var h=class h{constructor(i,e,t,o,T,fe,Me,Se,be){this.cmsToastrService=i;this.coreEnumService=e;this.categoryService=t;this.dialog=o;this.cdr=T;this.publicHelper=fe;this.tokenHelper=Me;this.cmsStoreService=Se;this.translate=be;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new I;this.dataModelResult=new G;this.filterModel=new L;this.dataSource=new X;this.optionChange=new w;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(i,e)=>!1;this.childrenAccessor=i=>[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(i){this.onActionSelectForce(i)}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(i=>i.tokenInfoStore).subscribe(i=>y(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(i=>i.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(i)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i,!1)}})}onActionSelect(i){i&&this.dataModelSelect&&i.id==this.dataModelSelect.id?(this.dataModelSelect=null,this.optionChange.emit(null)):(this.dataModelSelect=i,this.optionChange.emit(this.dataModelSelect))}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new I,this.DataGetAll()}onActionSelectForce(i){}onActionAdd(){var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(re,{height:"90%",panelClass:i,enterAnimationDuration:v.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:v.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let i=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(i=this.dataModelSelect.id),i===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(ae,{height:"90%",panelClass:e,enterAnimationDuration:v.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:v.cmsViewConfig.exitAnimationDuration,data:{id:i}}).afterClosed().subscribe(o=>{o&&o.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let i=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(i=this.dataModelSelect.id),i===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(e=>{this.cmsToastrService.typeErrorSelected(e)});return}}};h.\u0275fac=function(e){return new(e||h)(l(ie),l(j),l(F),l(W),l(B),l(oe),l(te),l(ee),l(Y))},h.\u0275cmp=k({type:h,selectors:[["app-core-module-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:16,vars:14,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,t){e&1&&(a(0,"app-cms-html-tree",1),E(1,2),c(2),S(3,"translate"),A(),E(4,3),g(5,se,3,3,"button",4),g(6,ce,3,3,"button",5),g(7,pe,3,3,"button",6),g(8,ue,4,6,"button",7),A(),E(9,8),D(10,"app-progress-spinner",9),a(11,"mat-tree",10,0),N(13,me,4,3,"mat-tree-node",11)(14,Ce,6,8,"mat-tree-node",12),d(),A(),H(15,13),d()),e&2&&(m("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),r(2),M(" ",b(3,12,"TABLE."+(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.moduleEntityName))," "),r(3),_(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?5:-1),r(),_(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow&&(t.dataModelSelect==null?null:t.dataModelSelect.id)>0?6:-1),r(),_(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow&&(t.dataModelSelect==null?null:t.dataModelSelect.id)>0?7:-1),r(),_(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow?8:-1),r(2),m("optionsInfoAreaId",t.constructorInfoAreaId),r(),m("dataSource",t.dataSource)("childrenAccessor",t.childrenAccessor),r(3),m("matTreeNodeDefWhen",t.hasChild))},dependencies:[$,z,J,K,U,Q,q,ne,le,Z],encapsulation:2});var de=h;export{de as a};
