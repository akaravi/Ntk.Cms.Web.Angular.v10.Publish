import{a as fe}from"./chunk-XTRBIGOT.js";import{a as ue}from"./chunk-AFM3XPYU.js";import{f as me}from"./chunk-CZFZ5GBP.js";import{$b as de,A as ne,J as re,R as ae,_b as pe,aa as le,ba as se,cb as ce,n as te,q as ie,u as oe}from"./chunk-ZS6LHH6I.js";import{Ab as S,Bb as z,Ca as U,Cb as W,De as T,Ee as ee,F as N,Fa as r,Gd as X,Ha as L,I as k,Kb as $,Kd as l,Ld as Y,Mb as x,Oa as C,Od as p,P,Pb as _,Q as V,Qb as A,Rb as J,Sa as q,Sc as Q,Td as d,Yb as M,Zb as R,da as g,db as B,ea as b,fb as m,fc as v,gb as u,gc as y,ib as H,jb as j,kb as G,lb as s,mb as a,nb as c,ob as h,p as D,q as F,qe as Z,vb as O,xc as K,yb as I}from"./chunk-ZCQJE7HW.js";import{i as E}from"./chunk-SEDBTTTN.js";var Se=["*"];function ve(n,e){if(n&1&&(a(0,"label",3),_(1),c()),n&2){let t=S();s("for",R("app-cms-site-selector-",t.id)),r(),A(t.optionLabel)}}function ye(n,e){if(n&1&&(h(0,"img",4),v(1,"cmsthumbnail")),n&2){let t=S();s("src",M(y(1,2,t.dataModelSelect==null?null:t.dataModelSelect.linkMainImageIdSrc)),U)}}function Me(n,e){if(n&1&&(h(0,"img",4),v(1,"cmsthumbnail")),n&2){let t=S().$implicit;s("src",M(y(1,2,t.linkMainImageIdSrc)),U)}}function ge(n,e){if(n&1&&(a(0,"mat-option",7),m(1,Me,2,4,"img",4),a(2,"span"),_(3),c()()),n&2){let t=e.$implicit,o=S();s("value",t)("disabled",o.optionDisabled),r(),u(t.linkMainImageIdSrc?1:-1),r(2),A(o.displayOption(t))}}function be(n,e){n&1&&h(0,"i",8)}function Ie(n,e){n&1&&h(0,"i",9)}function _e(n,e){if(n&1){let t=O();a(0,"i",12),I("click",function(){g(t);let i=S();return b(i.onActionSelectClear())}),c()}}function Te(n,e){n&1&&(a(0,"em"),_(1),v(2,"translate"),c()),n&2&&(r(),J("(",y(2,1,"TITLE.Necessary"),")"))}var f=class f{constructor(e,t,o,i,w){this.coreEnumService=e;this.cdr=t;this.publicHelper=o;this.translate=i;this.categoryService=w;this.id=++f.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new X;this.dataModelSelect=new T;this.formControl=new oe;this.optionDisabled=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionRequired=!1;this.optionChange=new L;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(P(""),N(1500),k(),V(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){let t="";return e&&(e.username&&e.username.length>0&&(t=t+" "+e.username),e.name&&e.name.length>0&&(t=t+" "+e.name),e.lastName&&e.lastName.length>0&&(t=t+" "+e.lastName),t=t+"#:"+e.id),t}displayOption(e){let t="";return e&&(e.username&&e.username.length>0&&(t=t+" "+e.username),e.name&&e.name.length>0&&(t=t+" "+e.name),e.lastName&&e.lastName.length>0&&(t=t+" "+e.lastName),t=t+"#:"+e.id),t}DataGetAll(e){return E(this,null,function*(){let t=new Y;if(t.rowPerPage=20,t.accessLoad=!0,e&&e.length>0){let i=new l;i=new l,i.propertyName="username",i.value=e,i.searchType=d.Contains,i.clauseType=p.Or,t.filters.push(i),i=new l,i.propertyName="name",i.value=e,i.searchType=d.Contains,i.clauseType=p.Or,t.filters.push(i),i=new l,i.propertyName="email",i.value=e,i.searchType=d.Contains,i.clauseType=p.Or,t.filters.push(i),i=new l,i.propertyName="lastname",i.value=e,i.searchType=d.Contains,i.clauseType=p.Or,t.filters.push(i),i=new l,i.propertyName="id",i.value=e,i.searchType=d.Equal,i.clauseType=p.Or,t.filters.push(i),i=new l,i.propertyName="mobile",i.value=e,i.searchType=d.Contains,i.clauseType=p.Or,t.filters.push(i),i=new l,i.propertyName="tell",i.value=e,i.searchType=d.Contains,i.clauseType=p.Or,t.filters.push(i),i=new l,i.propertyName="companyName",i.value=e,i.searchType=d.Contains,i.clauseType=p.Or,t.filters.push(i)}let o=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(o,i,this.constructorInfoAreaId)}),yield D(this.categoryService.ServiceGetAll(t)).then(i=>(this.dataModelResult=i,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(o),i.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe(F(t=>(t.find(o=>o.id===e.id)||t.push(e),t)))}onActionSelectForce(e){if(typeof e=="number"&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(t=>t.id===e)){let t=this.dataModelResult.listItems.find(o=>o.id===e);this.dataModelSelect=t,this.formControl.setValue(t);return}this.categoryService.ServiceGetOneById(e).subscribe({next:t=>{t.isSuccess&&(this.filteredOptions=this.push(t.item),this.dataModelSelect=t.item,this.formControl.setValue(t.item),this.optionChange.emit(t.item))}});return}if(typeof e==typeof T){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new T,this.loadOptions()}};f.nextId=0,f.\u0275fac=function(t){return new(t||f)(C(Z),C(K),C(me),C(pe),C(ee))},f.\u0275cmp=q({type:f,selectors:[["app-cms-user-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionRequired:"optionRequired",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:Se,decls:18,vars:24,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(t,o){if(t&1){let i=O();z(),a(0,"div",1),h(1,"app-progress-spinner",2),m(2,ve,2,3,"label",3),a(3,"span"),m(4,ye,2,4,"img",4),c(),h(5,"input",5),a(6,"mat-autocomplete",6,0),I("optionSelected",function(Ce){return g(i),b(o.onActionSelect(Ce.option.value))}),j(8,ge,4,4,"mat-option",7,H),v(10,"async"),c(),m(11,be,1,0,"i",8),m(12,Ie,1,0,"i",9),m(13,_e,1,0,"i",10),a(14,"i",11),v(15,"translate"),I("click",function(){return g(i),b(o.onActionButtonReload())}),c(),m(16,Te,3,3,"em"),W(17),c()}if(t&2){let i=$(7);r(),s("optionsInfoAreaId",o.constructor.name),r(),u((o.optionLabel==null?null:o.optionLabel.length)>0?2:-1),r(2),u(o.dataModelSelect&&(o.dataModelSelect!=null&&o.dataModelSelect.linkMainImageIdSrc)?4:-1),r(),s("placeholder",M(o.optionPlaceholder))("id",R("app-cms-site-selector-",o.id))("formControl",o.formControl)("matAutocomplete",i)("required",o.optionRequired),B("disabled",o.optionDisabled?!0:null),r(),s("displayWith",o.displayFn),r(2),G(y(10,20,o.filteredOptions)),r(3),u(o.formControl.valid?-1:11),r(),u(o.optionRequired&&o.formControl.valid?12:-1),r(),u((o.dataModelSelect==null?null:o.dataModelSelect.id)>0?13:-1),r(),x("rotation360",o.publicHelper.processService.process.inRunArea[o.constructorInfoAreaId]),s("title",M(y(15,22,"ACTION.RELOAD"))),r(2),u(o.optionRequired&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)?16:-1)}},dependencies:[te,ie,re,ne,le,ae,se,ce,ue,Q,de,fe],encapsulation:2});var he=f;export{he as a};
