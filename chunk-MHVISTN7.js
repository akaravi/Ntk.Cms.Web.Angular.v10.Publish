import{a as Fe}from"./chunk-XHM57VXZ.js";import{a as Le}from"./chunk-5QDJNW4W.js";import{a as Oe,d as Pe}from"./chunk-GGQ7GVZY.js";import{f as Ve}from"./chunk-UAJZPUTD.js";import{$a as Ie,K as ce,L as me,Lc as Ne,N as ue,O as fe,Oc as ke,Qc as Be,Sa as Me,Ta as Ce,Tc as Re,Ua as Se,Va as _e,W as ge,Wa as he,Wb as Ee,Xa as Te,Xb as we,Ya as be,Za as ve,_a as xe,m as oe,n as ae,q as re,r as se,t as le,v as pe,w as de,yb as ye,zc as Ae}from"./chunk-UQKNR4GM.js";import{$e as ee,Ab as b,Cd as q,Eb as D,Fa as n,Fb as H,Fk as Q,Gb as j,Gk as U,Hd as Z,Kb as G,Oa as S,Pb as o,Qb as W,Rb as s,Sa as N,Ta as k,Vb as B,Wb as R,Xb as V,Y as A,_c as J,da as c,ea as m,ef as te,fb as h,fc as l,ff as P,gb as T,gc as p,kg as ne,lb as M,mb as t,nb as a,ob as C,re as O,vb as w,vd as Y,ve as $,xk as ie,yb as f,yc as z}from"./chunk-CZ63DPC3.js";import{i as X}from"./chunk-SEDBTTTN.js";var I=class I{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};I.\u0275fac=function(r){return new(r||I)},I.\u0275cmp=N({type:I,selectors:[["app-core-main-action"]],standalone:!1,decls:1,vars:0,template:function(r,e){r&1&&C(0,"router-outlet")},dependencies:[Y],encapsulation:2});var L=I;var je=["vform"],Ge=["Message"];function We(g,d){if(g&1){let r=w();t(0,"textarea",30),V("ngModelChange",function(i){c(r);let u=b();return R(u.dataMessageContentModel.messageBody,i)||(u.dataMessageContentModel.messageBody=i),m(i)}),o(1,"                  "),a()}if(g&2){let r=b();B("ngModel",r.dataMessageContentModel.messageBody)}}function qe(g,d){if(g&1){let r=w();t(0,"button",31),f("click",function(){c(r);let i=b();return m(i.onActionMessageContentAdd())}),C(1,"i",32),o(2),l(3,"translate"),a()}g&2&&(n(2),s(" ",p(3,1,"TITLE.Added_to_the_text")," "))}function Qe(g,d){if(g&1){let r=w();t(0,"button",31),f("click",function(){c(r);let i=b();return m(i.onActionMessageContentNew())}),C(1,"i",32),o(2),l(3,"translate"),a()}g&2&&(n(2),s(" ",p(3,1,"TITLE.Message_Text")," "))}function Ue(g,d){g&1&&(t(0,"mat-error"),o(1),l(2,"translate"),t(3,"strong"),o(4),l(5,"translate"),a()()),g&2&&(n(),s(" ",p(2,2,"TITLE.Message_Text")," "),n(3),W(p(5,4,"content.required")))}function Ke(g,d){if(g&1&&(t(0,"button",33),C(1,"i",34),o(2),l(3,"translate"),a()),g&2){b(2);let r=G(11);M("disabled",!r.valid),n(2),s(" ",p(3,2,"ACTION.Send_Message")," ")}}function Xe(g,d){if(g&1&&(t(0,"div",29),h(1,Ke,4,4,"button",33),a()),g&2){let r=b();n(),T(r.publicHelper.processService.process.inRunAll?-1:1)}}var y=class y{constructor(d,r,e,i,u,_,Je,Ye){this.coreEnumService=d;this.coreTokenConnectionService=r;this.cmsStoreService=e;this.cmsToastrService=i;this.cdr=u;this.publicHelper=_;this.translate=Je;this.tokenHelper=Ye;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new ne;this.dataModelParentSelected=new ie;this.dataModel=new te;this.dataModelResult=new Z;this.formInfo=new Pe;this.clipboardText="";this.dataMessageCategoryModel=new Q;this.dataMessageContentModel=new U;this.step=0;this.publicHelper.processService.cdr=this.cdr,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore}ngOnInit(){}readClipboardFromDevTools(){return new Promise((d,r)=>{let e=()=>X(null,null,function*(){try{let i=yield navigator.clipboard.readText();d(i)}catch(i){r(i)}window.removeEventListener("focus",e)});window.addEventListener("focus",e),console.log("Hit <Tab> to give focus back to document (or we will face a DOMException);")})}onActionMessageLTR(){this.message.nativeElement.style.direction="ltr",this.message.nativeElement.style.textAlign="left"}onActionMessageRTL(){this.message.nativeElement.style.direction="rtl",this.message.nativeElement.style.textAlign="right"}onActionSelectMessageCategory(d){d&&d.id?.length>0?this.dataMessageCategoryModel=d:this.dataMessageCategoryModel=new Q}onActionSelectMessageContent(d){d&&d.id?.length>0?this.dataMessageContentModel=d:this.dataMessageContentModel=new U}onActionMessageContentAdd(){this.dataMessageContentModel?.messageBody?.length>0?this.dataModel.content.length>0&&(this.dataModel.content=this.dataModel.content+" "+this.dataMessageContentModel.messageBody):this.dataModel.content=this.dataMessageContentModel.messageBody}onActionMessageContentNew(){this.dataMessageContentModel?.messageBody?.length>0&&(this.dataModel.content=this.dataMessageContentModel.messageBody)}onFormSubmit(){if(!this.formGroup.valid)return;this.formInfo.submitButtonEnabled=!1;let d=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(r=>{this.publicHelper.processService.processStart(d,r,this.constructorInfoAreaId)}),this.formInfo.submitResultMessage="",this.formInfo.submitResultMessage="",this.coreTokenConnectionService.ServiceSendNotification(this.dataModel).subscribe({next:r=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=r,r.isSuccess?(this.translate.get("MESSAGE.Submit_request_was_successfully_registered").subscribe(e=>{this.formInfo.submitResultMessage=e,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1}),this.translate.get("MESSAGE.Send_request_was_successfully_registered").subscribe(e=>{this.cmsToastrService.typeSuccessMessage(e)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage=r.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(r.errorMessage)),this.publicHelper.processService.processStop(d)},error:r=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(r),this.publicHelper.processService.processStop(d,!1)}})}setStep(d){this.step=d}nextStep(){this.step++}prevStep(){this.step--}};y.\u0275fac=function(r){return new(r||y)(S(O),S(P),S(Ne),S(Be),S(z),S(Ve),S(Ee),S(ke))},y.\u0275cmp=N({type:y,selectors:[["app-core-main-action-send-notification"]],viewQuery:function(r,e){if(r&1&&(D(je,5),D(Ge,5)),r&2){let i;H(i=j())&&(e.formGroup=i.first),H(i=j())&&(e.message=i.first)}},standalone:!1,decls:143,vars:98,consts:[["vform","ngForm"],["content",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection"],[1,"row"],[1,"col-6"],[1,"example-headers-align"],["hideToggle","",3,"opened","expanded"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"click"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModel"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.sendToAll",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.sendToAll","name","dataModel.sendToAll",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.sendToAll",1,"custom-control-label"],[1,"message-box"],[1,"row",2,"height","300px"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.content",1,"color-highlight"],["matInput","","name","dataModel.content","type","text","placeholder","...","minlength","1","maxlength","500","rows","9","id","dataModel.content",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"row",2,"height","140px","bottom","4vh","justify-content","center"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModelChange","ngModel"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(r,e){if(r&1){let i=w();t(0,"div",2),C(1,"app-progress-spinner",3),t(2,"div",4)(3,"p",5),o(4),l(5,"translate"),a(),t(6,"p"),o(7),l(8,"translate"),a(),C(9,"app-cms-form-result-message",6),t(10,"form",7,0),f("ngSubmit",function(){return c(i),m(e.onFormSubmit())}),o(12),t(13,"div",8)(14,"div",9)(15,"div",10)(16,"mat-accordion",11)(17,"mat-expansion-panel",12),f("opened",function(){return c(i),m(e.setStep(0))}),t(18,"mat-expansion-panel-header")(19,"mat-panel-title"),o(20),l(21,"translate"),a(),t(22,"mat-panel-description"),o(23),l(24,"translate"),t(25,"mat-icon"),o(26,"account_circle"),a()()(),t(27,"mat-action-row")(28,"button",13),f("click",function(){return c(i),m(e.nextStep())}),o(29),l(30,"translate"),a()()(),t(31,"mat-expansion-panel",12),f("opened",function(){return c(i),m(e.setStep(1))}),t(32,"mat-expansion-panel-header")(33,"mat-panel-title"),o(34),l(35,"translate"),a(),t(36,"mat-panel-description"),o(37),l(38,"translate"),t(39,"mat-icon"),o(40,"map"),a()()(),h(41,We,2,1,"textarea",14),h(42,qe,4,3,"button",15),h(43,Qe,4,3,"button",15),t(44,"mat-action-row")(45,"button",16),f("click",function(){return c(i),m(e.prevStep())}),o(46),l(47,"translate"),a(),t(48,"button",13),f("click",function(){return c(i),m(e.nextStep())}),o(49),l(50,"translate"),a()()(),t(51,"mat-expansion-panel",12),f("opened",function(){return c(i),m(e.setStep(2))}),t(52,"mat-expansion-panel-header")(53,"mat-panel-title"),o(54),l(55,"translate"),a(),t(56,"mat-panel-description"),o(57),l(58,"translate"),t(59,"mat-icon"),o(60,"date_range"),a()()(),t(61,"mat-action-row")(62,"button",16),f("click",function(){return c(i),m(e.prevStep())}),o(63),l(64,"translate"),a(),t(65,"button",13),f("click",function(){return c(i),m(e.nextStep())}),o(66),l(67,"translate"),a()()(),t(68,"mat-expansion-panel",12),f("opened",function(){return c(i),m(e.setStep(3))}),t(69,"mat-expansion-panel-header")(70,"mat-panel-title"),o(71),l(72,"translate"),a(),t(73,"mat-panel-description"),o(74),l(75,"translate"),t(76,"mat-icon"),o(77,"date_range"),a()()(),C(78,"div",9)(79,"hr"),t(80,"mat-action-row")(81,"button",16),f("click",function(){return c(i),m(e.prevStep())}),o(82),l(83,"translate"),a(),t(84,"button",13),f("click",function(){return c(i),m(e.nextStep())}),o(85),l(86,"translate"),a()()(),t(87,"mat-expansion-panel",12),f("opened",function(){return c(i),m(e.setStep(4))}),t(88,"mat-expansion-panel-header")(89,"mat-panel-title"),o(90),l(91,"translate"),a(),t(92,"mat-panel-description"),o(93),l(94,"translate"),t(95,"mat-icon"),o(96,"date_range"),a()()(),t(97,"mat-action-row")(98,"button",16),f("click",function(){return c(i),m(e.prevStep())}),o(99),l(100,"translate"),a(),t(101,"button",13),f("click",function(){return c(i),m(e.nextStep())}),o(102),l(103,"translate"),a()()(),t(104,"mat-expansion-panel",12),f("opened",function(){return c(i),m(e.setStep(5))}),t(105,"mat-expansion-panel-header")(106,"mat-panel-title"),o(107),l(108,"translate"),a(),t(109,"mat-panel-description"),o(110),l(111,"translate"),t(112,"mat-icon"),o(113,"date_range"),a()()(),t(114,"div",17)(115,"div",18)(116,"h5",19),o(117),l(118,"translate"),a()(),t(119,"div",20)(120,"div",21)(121,"input",22),V("ngModelChange",function(_){return c(i),R(e.dataModel.sendToAll,_)||(e.dataModel.sendToAll=_),m(_)}),a(),C(122,"label",23),a()()(),t(123,"mat-action-row")(124,"button",16),f("click",function(){return c(i),m(e.prevStep())}),o(125),l(126,"translate"),a(),t(127,"button",13),f("click",function(){return c(i),m(e.nextStep())}),o(128),l(129,"translate"),a()()()()(),t(130,"div",10)(131,"div",24)(132,"div",25)(133,"div",26)(134,"label",27),o(135),l(136,"translate"),a(),t(137,"textarea",28,1),V("ngModelChange",function(_){return c(i),R(e.dataModel.content,_)||(e.dataModel.content=_),m(_)}),a(),t(139,"em"),o(140),a(),h(141,Ue,6,6,"mat-error"),a()(),h(142,Xe,2,1,"div",29),a()()()()()()()}if(r&2){let i=G(138);n(),M("optionsInfoAreaId",e.constructorInfoAreaId),n(3),s(" ",p(5,44,"TITLE.EDIT_USER_ACCOUNT")," "),n(3),s(" ",p(8,46,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),M("formInfo",e.formInfo),n(3),s(" ",e.formInfo.formTitle," "),n(5),M("expanded",e.step===0),n(3),s(" ",p(21,48,"TITLE.Direction")," "),n(3),s(" ",p(24,50,"TITLE.Select_the_path_to_send_the_message")," "),n(6),s(" ",p(30,52,"ACTION.NEXT")," "),n(2),M("expanded",e.step===1),n(3),s(" ",p(35,54,"TITLE.Message_Text")," "),n(3),s(" ",p(38,56,"TITLE.Select_the_text_of_the_default_messages")," "),n(4),T((e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0?41:-1),n(),T((e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0&&(e.dataModel.content==null?null:e.dataModel.content.length)>0?42:-1),n(),T((e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0?43:-1),n(3),s(" ",p(47,58,"ACTION.BACK")," "),n(3),s(" ",p(50,60,"ACTION.NEXT")," "),n(2),M("expanded",e.step===2),n(3),s(" ",p(55,62,"TITLE.Phonebook")," "),n(3),s(" ",p(58,64,"TITLE.Audience_selection")," "),n(6),s(" ",p(64,66,"ACTION.BACK")," "),n(3),s(" ",p(67,68,"ACTION.NEXT")," "),n(2),M("expanded",e.step===3),n(3),s(" ",p(72,70,"TITLE.Shipping_time")," "),n(3),s(" ",p(75,72,"TITLE.Time_to_start_sending_and_finish")," "),n(8),s(" ",p(83,74,"ACTION.BACK")," "),n(3),s(" ",p(86,76,"ACTION.NEXT")," "),n(2),M("expanded",e.step===4),n(3),s(" ",p(91,78,"TITLE.Timing")," "),n(3),s(" ",p(94,80,"TITLE.Retry_schedule")," "),n(6),s(" ",p(100,82,"ACTION.BACK")," "),n(3),s(" ",p(103,84,"ACTION.NEXT")," "),n(2),M("expanded",e.step===5),n(3),s(" ",p(108,86,"TITLE.Settings")," "),n(3),s(" ",p(111,88,"TITLE.Send_settings")," "),n(7),s(" ",p(118,90,"TITLE.Send_To_All")," "),n(4),B("ngModel",e.dataModel.sendToAll),n(4),s(" ",p(126,92,"ACTION.BACK")," "),n(3),s(" ",p(129,94,"ACTION.END")," "),n(7),W(p(136,96,"TITLE.Message_Text")),n(2),B("ngModel",e.dataModel.content),n(3),s("",i.value.length," / 500"),n(),T(i.errors!=null&&i.errors.required?141:-1),n(),T(e.formInfo.submitButtonEnabled?142:-1)}},dependencies:[de,ae,oe,re,se,ce,me,pe,le,Te,Me,Ce,Se,he,_e,ge,ve,Ie,Oe,Le,we],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}.mat-tab-group[_ngcontent-%COMP%]{height:95%}.message-box[_ngcontent-%COMP%]{background-image:url(/assets/media/bg/iphone.png);height:600px;width:300px;background-position:center;background-repeat:no-repeat;background-size:cover;padding-right:33px;padding-left:33px}.message-box-button[_ngcontent-%COMP%]{color:#00f;border-color:transparent;background-color:transparent}.message-box-button[_ngcontent-%COMP%]:hover{color:red;font-size:initial}.message-box-button[_ngcontent-%COMP%]:active{color:#a200ff}"]});var E=y;var ze=[{path:"",component:L,data:{title:"ROUTE.CORE.ACTION"},children:[{path:"send-notification",component:E,data:{title:"ROUTE.CORE.ACTION"}},{path:"send-notification/inbox-extras",component:E,data:{title:"ROUTE.CORE.ACTION"}},{path:"send-notification/outbox-extras",component:E,data:{title:"ROUTE.CORE.ACTION"}}]}],v=class v{};v.\u0275fac=function(r){return new(r||v)},v.\u0275mod=k({type:v}),v.\u0275inj=A({imports:[q.forChild(ze),q]});var F=v;var x=class x{};x.\u0275fac=function(r){return new(r||x)},x.\u0275mod=k({type:x}),x.\u0275inj=A({providers:[$,O,ee,Fe,P],imports:[J,F,ue,fe.withConfig({warnOnNgModelWithFormControl:"never"}),Re,Ae,xe,be,ye]});var De=x;export{De as CoreMainActionModule};
