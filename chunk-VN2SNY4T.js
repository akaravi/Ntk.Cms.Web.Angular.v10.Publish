import{b as de}from"./chunk-WPZLHJFX.js";import{a as pe}from"./chunk-QJ4SB3EG.js";import{B as K,Dc as ce,K as Q,T as X,Wa as re,Xa as ne,Ya as le,fc as ae,gc as se,ma as Y,o as W,r as $,v as J}from"./chunk-MZT2GAV3.js";import{$d as ie,Bd as M,Bf as v,Ca as _,E,Fa as n,H as D,Hb as j,Ic as x,Jc as U,Ka as d,Kd as Z,Mb as f,Nb as A,O as P,Ob as B,Od as ee,P as k,Pa as V,Pc as z,Sd as S,Td as te,Va as m,Vb as y,Xa as L,bc as h,be as oe,ca as I,cb as q,cc as C,da as b,ib as l,jb as a,kb as s,lb as p,p as F,q as w,sb as R,uc as G,vb as T,wd as g,xb as u,yb as N,zb as H}from"./chunk-Y22UWZ2R.js";import{i as O}from"./chunk-SEDBTTTN.js";var he=["*"];function Ce(r,e){if(r&1&&(p(0,"img",13),h(1,"cmsthumbnail")),r&2){let t=u();l("src",y(C(1,2,t.dataModelSelect==null?null:t.dataModelSelect.linkMainImageIdSrc)),_)}}function Se(r,e){if(r&1&&(p(0,"img",13),h(1,"cmsthumbnail")),r&2){let t=u().$implicit;l("src",y(C(1,2,t.linkMainImageIdSrc)),_)}}function ye(r,e){if(r&1&&(a(0,"mat-option",14),m(1,Se,2,4,"img",4),a(2,"span"),f(3),s()()),r&2){let t=e.$implicit,i=u();l("value",t)("disabled",i.optionDisabled),n(),l("ngIf",t.linkMainImageIdSrc),n(2),A(i.displayOption(t))}}function ge(r,e){r&1&&p(0,"i",15)}function Me(r,e){r&1&&p(0,"i",16)}function ve(r,e){if(r&1){let t=R();a(0,"i",17),T("click",function(){I(t);let o=u();return b(o.onActionSelectClear())}),s()}}function Ie(r,e){r&1&&(a(0,"em"),f(1),h(2,"translate"),s()),r&2&&(n(),B("(",C(2,1,"TITLE.Necessary"),")"))}var c=class c{constructor(e,t,i,o,ue){this.coreEnumService=e;this.translate=t;this.cdr=i;this.publicHelper=o;this.categoryService=ue;this.id=++c.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ee;this.dataModelSelect=new v;this.formControl=new J;this.optionDisabled=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionRequired=!1;this.optionChange=new L;this.optionReload=()=>this.onActionButtonReload();this.dateUseStore=!0;this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(P(""),E(1500),D(),k(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){return e?e.titleML:void 0}displayOption(e){return e?e.titleML:void 0}DataGetAll(e){return O(this,null,function*(){if(this.dateUseStore&&(this.dataModelResult=yield this.publicHelper.getCurrency(),this.dataModelResult.isSuccess))return this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.dataModelResult.listItems;let t=new te;if(t.rowPerPage=20,t.accessLoad=!0,e&&e.length>0){let o=new S;o=new S,o.propertyName="Symbol",o.value=e,o.searchType=M.Contains,o.clauseType=g.Or,t.filters.push(o),o=new S,o.propertyName="Title",o.value=e,o.searchType=M.Contains,o.clauseType=g.Or,t.filters.push(o),e&&typeof+e=="number"&&+e>0&&(o=new S,o.propertyName="Id",o.value=e,o.searchType=M.Equal,o.clauseType=g.Or,t.filters.push(o))}let i=this.constructor.name+"ServiceGetAll";return this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(i,o,this.constructorInfoAreaId)}),this.categoryService.setAccessDataType(Z.Viewer),yield F(this.categoryService.ServiceGetAll(t)).then(o=>(this.dataModelResult=o,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(i),o.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe(w(t=>(t.find(i=>i.id===e.id)||t.push(e),t)))}onActionSelectForce(e){if(typeof e=="number"&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(t=>t.id===e)){let t=this.dataModelResult.listItems.find(i=>i.id===e);this.dataModelSelect=t,this.formControl.setValue(t);return}this.categoryService.ServiceGetOneById(e).subscribe({next:t=>{t.isSuccess&&(this.filteredOptions=this.push(t.item),this.dataModelSelect=t.item,this.formControl.setValue(t.item),this.optionChange.emit(t.item))}});return}if(typeof e==typeof v){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new v,this.loadOptions()}};c.nextId=0,c.\u0275fac=function(t){return new(t||c)(d(ie),d(ae),d(G),d(ce),d(oe))},c.\u0275cmp=V({type:c,selectors:[["app-cms-currency-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionRequired:"optionRequired",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:he,decls:17,vars:17,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required"],["for","forminput",1,"color-highlight"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],["class","fa fa-times  action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(t,i){if(t&1){let o=R();N(),a(0,"div",1),p(1,"app-progress-spinner",2),a(2,"span",3),m(3,Ce,2,4,"img",4),f(4," \xA0"),s(),p(5,"input",5),a(6,"label",6),f(7),s(),a(8,"mat-autocomplete",7,0),T("optionSelected",function(fe){return I(o),b(i.onActionSelect(fe.option.value))}),m(10,ye,4,4,"mat-option",8),h(11,"async"),s(),m(12,ge,1,0,"i",9)(13,Me,1,0,"i",10)(14,ve,1,0,"i",11)(15,Ie,3,3,"em",12),H(16),s()}if(t&2){let o=j(9);n(),l("optionsInfoAreaId",i.constructor.name),n(2),l("ngIf",i.dataModelSelect&&(i.dataModelSelect==null?null:i.dataModelSelect.linkMainImageIdSrc)),n(2),l("placeholder",y(i.optionPlaceholder))("formControl",i.formControl)("matAutocomplete",o)("required",i.optionRequired),q("disabled",i.optionDisabled?!0:null),n(2),A(i.optionLabel),n(),l("displayWith",i.displayFn),n(2),l("ngForOf",C(11,15,i.filteredOptions)),n(2),l("ngIf",!i.formControl.valid),n(),l("ngIf",i.optionRequired&&i.formControl.valid),n(),l("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),n(),l("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[x,U,W,$,Q,K,ne,re,le,X,Y,pe,z,se,de],encapsulation:2});var me=c;export{me as a};
