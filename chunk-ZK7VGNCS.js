import{a as hn}from"./chunk-YJOP3S3T.js";import{a as Ft}from"./chunk-GSBDZZET.js";import{a as Sn}from"./chunk-BNOYYRKK.js";import{a as gn}from"./chunk-JEF4OJ24.js";import{a as Lt}from"./chunk-TQPHF322.js";import{d as Vt,e as un,f as fn,i as Cn}from"./chunk-L2MDIT3B.js";import"./chunk-JGF2I6KA.js";import{a as Ye}from"./chunk-A4MVKAYT.js";import"./chunk-NKVR7DNS.js";import{a as Qe}from"./chunk-WJ7SXTGT.js";import{a as Nt}from"./chunk-CZGHVK7J.js";import{a as Bt}from"./chunk-4NXYJRHA.js";import{b as mn}from"./chunk-3RHHJRHJ.js";import"./chunk-7DUNEHBM.js";import"./chunk-T2SWGMVG.js";import"./chunk-V5RHHWLX.js";import{a as Re}from"./chunk-HNLXB3RO.js";import"./chunk-HGNWVODT.js";import{a as z,d as pn}from"./chunk-AQCXI2UP.js";import{e as kt,f as H}from"./chunk-MZCEX4RF.js";import{A as qe,Ab as V,B as Oi,Ba as we,Bb as F,Da as ie,E as Pi,H as ki,I as Ni,Ia as ji,J as Bi,Ja as Wi,K as Li,La as qi,M as Vi,Ma as zi,Nb as Pt,Oa as Ui,Ob as cn,P as Fi,Pa as Qi,R as Tt,Sa as Yi,Ua as Ki,V as Gi,Va as Ji,W as Hi,cb as Xi,db as Zi,eb as $i,fb as en,gb as tn,hb as nn,ib as on,jb as rn,kb as an,la as ft,lb as ln,m as Et,ma as fe,na as Ce,oa as ze,pc as Ue,qb as sn,r as xi,rb as xt,s as xe,sb as wt,sc as Ae,tb as At,u as wi,ub as Rt,uc as G,vb as Dt,w as Ai,x as Ri,xb as Ot,xc as dn,y as Di}from"./chunk-XYT3HHVP.js";import{A as yt,B as me,C as ue,F as Ei,G as Ti,b as It,c as ee,h as Q,i as ye,k as Ee,l as Ii,m as te,n as Te,r as yi}from"./chunk-QRBNL5ZA.js";import{$ as q,Ah as ut,Bh as vi,Ch as U,D as Jt,Dh as pe,Eh as We,Fn as Ct,H as mt,K as He,d as fi,da as Si,e as Ci,f as gi,l as Kt,m as hi,p as vt,q as Y,rh as Mi,sh as bi,th as je,u as de,v as K,y as pt,yh as j,zc as _i,zh as le}from"./chunk-RBCLPN4V.js";import{Ab as v,Ad as ui,Cb as ct,Db as se,Dc as u,Eb as ce,Ec as f,Fb as S,Gb as o,Hb as a,Ib as y,K as ni,Mb as O,Nb as P,O as oi,Ob as ke,Pb as T,Ra as he,Sb as I,Ub as m,Va as n,Vb as li,Wb as si,Xa as Ie,Xc as L,Yb as X,Z as ri,Zb as Z,_ as ai,_b as $,cb as _,cc as D,dc as ci,ec as ae,ga as _t,hc as c,ib as N,ic as M,jb as Mt,jc as p,kc as dt,mb as J,mc as di,nc as x,ob as W,oc as w,pa as g,pc as A,qa as h,s as St,t as ii,tc as R,td as bt,uc as Yt,xb as Se,xc as pi,xd as mi,yb as Ge,zb as b}from"./chunk-2AL2II5Z.js";import{i as re}from"./chunk-SEDBTTTN.js";var Ke=class Ke{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};Ke.\u0275fac=function(e){return new(e||Ke)},Ke.\u0275cmp=N({type:Ke,selectors:[["app-contact"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&y(0,"router-outlet")},dependencies:[Ci],encapsulation:2});var Gt=Ke;function wn(r,l){if(r&1){let e=T();o(0,"mat-tree-node",10),y(1,"button",11),o(2,"mat-checkbox",12),I("change",function(){let t=g(e).$implicit,s=m();return h(s.todoItemSelectionToggle(t))}),c(3),a()()}if(r&2){let e=l.$implicit,i=m();n(2),S("checked",i.checklistSelection.isSelected(e))("indeterminate",i.descendantsPartiallySelected(e)),n(),M(e.title)}}function An(r,l){if(r&1){let e=T();o(0,"mat-tree-node",13)(1,"button",14)(2,"mat-icon",15),c(3),a()(),o(4,"mat-checkbox",16),I("change",function(){let t=g(e).$implicit,s=m();return h(s.checklistSelection.toggle(t))}),c(5),a()()}if(r&2){let e=l.$implicit,i=m(),t=D(8);S("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),n(),Se("type","button")("aria-label","Toggle "+e.title)("type","button"),n(2),p(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),n(),S("checked",i.checklistSelection.isSelected(e)),n(),M(e.title)}}var Je=class Je{constructor(l,e,i,t,s,C,d,E,k){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.cdr=t;this.publicHelper=s;this.dialog=C;this.translate=d;this.tokenHelper=E;this.cmsStoreService=k;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=[];this.dataModelResult=new Y;this.filterModel=new K;this.dataSource=new Ot;this.optionSelectChecked=new Ie;this.optionSelectDisChecked=new Ie;this.optionModelChange=new Ie;this.unsubscribe=[];this.checklistSelection=new Pi(!0);this.hasChild=(l,e)=>!!e.children&&e.children.length>0;this.childrenAccessor=l=>l.children??[];this.hasNoContent=(l,e)=>e.children;this.runComplate=!1;this.treeControl=new sn(l=>l.children);this.publicHelper.processService.cdr=this.cdr,this.checklistSelection.changed.subscribe(B=>{if(!this.runComplate)return;let oe=[];this.checklistSelection.selected.forEach(Pe=>{oe.push(Pe.id)}),this.optionModelChange.emit(oe),B.added&&B.added.length>0&&B.added.forEach(Pe=>{this.optionSelectChecked.emit(Pe.id)}),B.removed&&B.removed.length>0&&B.removed.forEach(Pe=>{this.optionSelectDisChecked.emit(Pe.id)})})}set optionModel(l){this.dataModelSelect=l,this.loadCheked()}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>re(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}loadCheked(){this.runComplate=!1,this.CompileDataByCheked(this.dataModelResult.listItems,this.dataModelSelect),this.runComplate=!0}CompileDataByCheked(l,e){if(!(l?.length>0))return!1;let i=!1;for(let t of l){let s=!1;e?.includes(t.id)?(this.checklistSelection.select(t),i=!0):this.checklistSelection.deselect(t),t.children?.length>0&&(s=this.CompileDataByCheked(t.children,e),s&&(i=!0,t.isExpanded=!0))}return i}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems,this.loadCheked()):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.publicHelper.processService.processStop(l),this.cmsToastrService.typeError(e)}})}descendantsAllSelected(l){return this.treeControl.getDescendants(l).every(i=>this.checklistSelection.isSelected(i))}descendantsPartiallySelected(l){return this.treeControl.getDescendants(l).some(t=>this.checklistSelection.isSelected(t))&&!this.descendantsAllSelected(l)}todoItemSelectionToggle(l){this.checklistSelection.toggle(l);let e=this.treeControl.getDescendants(l);this.checklistSelection.isSelected(l)?this.checklistSelection.select(...e):this.checklistSelection.deselect(...e)}};Je.\u0275fac=function(e){return new(e||Je)(_(G),_(q),_(U),_(L),_(H),_(ze),_(V),_(Ae),_(Ue))},Je.\u0275cmp=N({type:Je,selectors:[["app-contact-category-treeselector"]],inputs:{optionModel:"optionModel"},outputs:{optionSelectChecked:"optionSelectChecked",optionSelectDisChecked:"optionSelectDisChecked",optionModelChange:"optionModelChange"},standalone:!1,decls:12,vars:10,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"change","checked","indeterminate"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[1,"checklist-leaf-node",3,"change","checked"]],template:function(e,i){e&1&&(o(0,"app-cms-html-tree",1),O(1,2),c(2),u(3,"translate"),P(),ke(4,3),O(5,4),y(6,"app-progress-spinner",5),o(7,"mat-tree",6,0),W(9,wn,4,3,"mat-tree-node",7)(10,An,6,8,"mat-tree-node",8),a(),P(),ke(11,9),a()),e&2&&(S("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),n(2),p(" ",f(3,8,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),n(4),S("optionsInfoAreaId",i.constructorInfoAreaId),n(),S("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),n(3),S("matTreeNodeDefWhen",i.hasChild))},dependencies:[qe,Tt,we,wt,At,Dt,Rt,xt,z,Ft,F],encapsulation:2});var Xe=Je;var Rn=["vform"];function Dn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function On(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.firstName==null?null:e.fieldsInfo.firstName.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function Pn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.lastName==null?null:e.fieldsInfo.lastName.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function kn(r,l){r&1&&(o(0,"mat-error"),c(1," Numbers is "),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2&&(n(3),M(f(4,1,"MESSAGE.required")))}function Nn(r,l){if(r&1){let e=T();o(0,"div",24)(1,"div",30)(2,"h5",31),c(3),a()(),o(4,"div",32)(5,"div",33)(6,"input",34),A("ngModelChange",function(t){g(e);let s=m();return w(s.dataModel.numberHidden,t)||(s.dataModel.numberHidden=t),h(t)}),a(),y(7,"label",35),a()()()}if(r&2){let e=m();n(3),p(" ",e.fieldsInfo.numberHidden==null?null:e.fieldsInfo.numberHidden.fieldTitle," "),n(3),x("ngModel",e.dataModel.numberHidden)}}function Bn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function Ln(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.organization==null?null:e.fieldsInfo.organization.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function Vn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.jobTitle==null?null:e.fieldsInfo.jobTitle.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function Fn(r,l){if(r&1){let e=T();o(0,"div",29)(1,"button",36),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),y(2,"i",37),c(3),u(4,"translate"),a(),o(5,"button",38),y(6,"i",39),c(7),u(8,"translate"),a()()}if(r&2){m();let e=D(10);n(3),p(" ",f(4,3,"ACTION.CANCEL")," "),n(2),S("disabled",!e.form.valid),n(2),p(" ",f(8,5,"ACTION.SAVE")," ")}}var Ze=class Ze extends Nt{constructor(e,i,t,s,C,d,E,k,B){super(s,new le,E,B);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ContactContentService=s;this.contentCategoryService=C;this.cmsToastrService=d;this.publicHelper=E;this.cdr=k;this.translate=B;this.linkCategoryId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new Y;this.dataModel=new le;this.fileManagerOpenForm=!1;this.dataContentCategoryModel=[];this.publicHelper.processService.cdr=this.cdr,this.dataContentCategoryModel=[],e&&(this.linkCategoryId=e.linkCategoryId,this.dataContentCategoryModel.push(this.linkCategoryId)),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){}ngOnInit(){this.translate.get("TITLE.Register_New_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ContactContentService.ServiceAdd(this.dataModel).subscribe({next:i=>{if(this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess){this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessAdd();for(let t=0;t<this.dataContentCategoryModel.length;t++){let s=new ut;s.linkCategoryId=this.dataContentCategoryModel[t],s.linkContentId=i.item.id,this.contentCategoryService.ServiceAdd(s).subscribe({next:C=>{C.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(d=>{this.formInfo.submitResultMessage=d,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(d=>{this.formInfo.submitResultMessage=d}),this.formInfo.submitResultMessage=C.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(C.errorMessage))},error:C=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(C)}})}this.dialogRef.close({dialogChangedDate:!0})}else this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage);this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionCategorySelectChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}onActionCategorySelectDisChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionSelectCategory(e){if(!e||e.id?.length==0){this.translate.get("MESSAGE.Category_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}};Ze.\u0275fac=function(i){return new(i||Ze)(_(Ce),_(fe),_(q),_(pe),_(We),_(G),_(H),_(L),_(V))},Ze.\u0275cmp=N({type:Ze,selectors:[["app-contact-content-add"]],viewQuery:function(i,t){if(i&1&&X(Rn,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[J],decls:71,vars:51,consts:[["vform","ngForm"],["Title",""],["FirstName",""],["LastName",""],["Numbers",""],["Email",""],["Organization",""],["JobTitle",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"optionModelChange","optionSelectChecked","optionSelectDisChecked","optionModel"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.firstName",1,"color-highlight"],["matInput","","type","text","name","dataModel.firstName","minlength","3","maxlength","100","id","dataModel.firstName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.lastName",1,"color-highlight"],["matInput","","type","text","name","dataModel.lastName","minlength","3","maxlength","100","id","dataModel.lastName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.numbers",1,"color-highlight"],["matInput","","name","dataModel.numbers","minlength","1","maxlength","5000","rows","5","id","dataModel.numbers",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"d-flex","mb-3"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","minlength","3","maxlength","100","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.organization","minlength","3","maxlength","100","id","dataModel.organization",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.jobTitle","minlength","3","maxlength","100","id","dataModel.jobTitle",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],[1,"pt-1"],["data-trigger-switch","dataModel.numberHidden",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.numberHidden","name","dataModel.numberHidden",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.numberHidden",1,"custom-control-label"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=T();o(0,"div",8),y(1,"app-progress-spinner",9),o(2,"div",10)(3,"p",11),c(4),a(),o(5,"p"),c(6),u(7,"translate"),a(),y(8,"app-cms-form-result-message",12),o(9,"form",13,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),o(11,"app-contact-category-treeselector",14),A("optionModelChange",function(d){return g(s),w(t.dataContentCategoryModel,d)||(t.dataContentCategoryModel=d),h(d)}),I("optionSelectChecked",function(d){return g(s),h(t.onActionCategorySelectChecked(d))})("optionSelectDisChecked",function(d){return g(s),h(t.onActionCategorySelectDisChecked(d))}),a(),o(12,"div",15)(13,"label",16),c(14),a(),o(15,"input",17,1),A("ngModelChange",function(d){return g(s),w(t.dataModel.title,d)||(t.dataModel.title=d),h(d)}),a(),o(17,"em"),c(18),a(),b(19,Dn,5,4,"mat-error"),a(),o(20,"div",15)(21,"label",18),c(22),a(),o(23,"input",19,2),A("ngModelChange",function(d){return g(s),w(t.dataModel.firstName,d)||(t.dataModel.firstName=d),h(d)}),a(),o(25,"em"),c(26),a(),b(27,On,5,4,"mat-error"),a(),o(28,"div",15)(29,"label",20),c(30),a(),o(31,"input",21,3),A("ngModelChange",function(d){return g(s),w(t.dataModel.lastName,d)||(t.dataModel.lastName=d),h(d)}),a(),o(33,"em"),c(34),a(),b(35,Pn,5,4,"mat-error"),a(),o(36,"div",15)(37,"label",22),c(38),a(),o(39,"textarea",23,4),A("ngModelChange",function(d){return g(s),w(t.dataModel.numbers,d)||(t.dataModel.numbers=d),h(d)}),c(41,"              "),a(),o(42,"em"),c(43),a(),b(44,kn,5,3,"mat-error"),a(),b(45,Nn,8,2,"div",24),o(46,"div",15)(47,"label",25),c(48),a(),o(49,"input",26,5),A("ngModelChange",function(d){return g(s),w(t.dataModel.email,d)||(t.dataModel.email=d),h(d)}),a(),o(51,"em"),c(52),a(),b(53,Bn,5,4,"mat-error"),a(),o(54,"div",15)(55,"label",25),c(56),a(),o(57,"input",27,6),A("ngModelChange",function(d){return g(s),w(t.dataModel.organization,d)||(t.dataModel.organization=d),h(d)}),a(),o(59,"em"),c(60),a(),b(61,Ln,5,4,"mat-error"),a(),o(62,"div",15)(63,"label",25),c(64),a(),o(65,"input",28,7),A("ngModelChange",function(d){return g(s),w(t.dataModel.jobTitle,d)||(t.dataModel.jobTitle=d),h(d)}),a(),o(67,"em"),c(68),a(),b(69,Vn,5,4,"mat-error"),a(),b(70,Fn,9,7,"div",29),a()()()}if(i&2){let s=D(16),C=D(24),d=D(32),E=D(40),k=D(50),B=D(58),oe=D(66);n(),S("optionsInfoAreaId",t.constructorInfoAreaId),n(3),p(" ",t.formInfo.formTitle," "),n(2),p(" ",f(7,49,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),S("formInfo",t.formInfo),n(3),x("optionModel",t.dataContentCategoryModel),n(3),M(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),x("ngModel",t.dataModel.title),n(3),p("",s.value.length," / 100"),n(),v(s.errors!=null&&s.errors.required?19:-1),n(3),M(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle)),x("ngModel",t.dataModel.firstName),n(3),p("",C.value.length," / 100"),n(),v(C.errors!=null&&C.errors.required?27:-1),n(3),M(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle)),x("ngModel",t.dataModel.lastName),n(3),p("",d.value.length," / 100"),n(),v(d.errors!=null&&d.errors.required?35:-1),n(3),M(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle)),x("ngModel",t.dataModel.numbers),n(4),p("",E.value.length," / 5000"),n(),v(E.errors!=null&&E.errors.required?44:-1),n(),v(t.fieldsInfo.numberHidden!=null&&t.fieldsInfo.numberHidden.accessWatchField?45:-1),n(3),M(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle)),x("ngModel",t.dataModel.email),n(3),p("",k.value.length," / 100"),n(),v(k.errors!=null&&k.errors.required?53:-1),n(3),M(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle)),x("ngModel",t.dataModel.organization),n(3),p("",B.value.length," / 100"),n(),v(B.errors!=null&&B.errors.required?61:-1),n(3),M(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle)),x("ngModel",t.dataModel.jobTitle),n(3),p("",oe.value.length," / 100"),n(),v(oe.errors!=null&&oe.errors.required?69:-1),n(),v(t.formInfo.submitButtonEnabled?70:-1)}},dependencies:[Te,ee,It,Q,ye,me,ue,te,Ee,xe,ie,z,Re,Xe,F],encapsulation:2});var $e=Ze;var Gn=["vform"];function Hn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function jn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.firstName==null?null:e.fieldsInfo.firstName.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function Wn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.lastName==null?null:e.fieldsInfo.lastName.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function qn(r,l){r&1&&(o(0,"mat-error"),c(1," Numbers is "),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2&&(n(3),M(f(4,1,"MESSAGE.required")))}function zn(r,l){if(r&1){let e=T();o(0,"div",24)(1,"div",30)(2,"h5",31),c(3),a()(),o(4,"div",32)(5,"div",33)(6,"input",34),A("ngModelChange",function(t){g(e);let s=m();return w(s.dataModel.numberHidden,t)||(s.dataModel.numberHidden=t),h(t)}),a(),y(7,"label",35),a()()()}if(r&2){let e=m();n(3),p(" ",e.fieldsInfo.numberHidden==null?null:e.fieldsInfo.numberHidden.fieldTitle," "),n(3),x("ngModel",e.dataModel.numberHidden)}}function Un(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function Qn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.organization==null?null:e.fieldsInfo.organization.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function Yn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.jobTitle==null?null:e.fieldsInfo.jobTitle.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function Kn(r,l){if(r&1){let e=T();o(0,"div",29)(1,"button",36),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),y(2,"i",37),c(3),u(4,"translate"),a(),o(5,"button",38),y(6,"i",39),c(7),u(8,"translate"),a()()}if(r&2){m();let e=D(10);n(3),p(" ",f(4,3,"ACTION.CANCEL")," "),n(2),S("disabled",!e.form.valid),n(2),p(" ",f(8,5,"ACTION.SAVE")," ")}}var tt=class tt extends Lt{constructor(e,i,t,s,C,d,E,k,B){super(s,new le,E,B);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ContactContentService=s;this.contentCategoryService=C;this.cmsToastrService=d;this.publicHelper=E;this.cdr=k;this.translate=B;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new vt;this.dataModel=new le;this.fileManagerOpenForm=!1;this.dataContentCategoryModel=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){}ngOnInit(){this.DataGetOneContent(),this.DataCategoryGetAll()}DataGetOneContent(){if(this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ContactContentService.setAccessLoad(),this.ContactContentService.setAccessDataType(He.Editor),this.ContactContentService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataCategoryGetAll(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.get_category_information_from_the_server").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_category_information_from_the_server").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)});let i=new K,t=new de;t.propertyName="LinkContentId",t.value=this.requestId,t.clauseType=pt.And,i.filters.push(t),this.contentCategoryService.ServiceGetAll(i).subscribe({next:s=>{let C=[];s.listItems.forEach(d=>{C.push(d.linkCategoryId)}),this.dataContentCategoryModel=C,this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(e)},error:s=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorGetAll(s),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ContactContentService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionCategorySelectChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}let i=new ut;i.linkCategoryId=e,i.linkContentId=this.dataModel.id,this.contentCategoryService.ServiceAdd(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.formInfo.submitResultMessage=t.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(t)}})}onActionCategorySelectDisChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}let i=new ut;i.linkCategoryId=e,i.linkContentId=this.dataModel.id,this.contentCategoryService.ServiceDeleteEntity(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.formInfo.submitResultMessage=t.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(t)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionSelectCategory(e){if(!e||e.id?.length==0){this.translate.get("MESSAGE.Category_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}};tt.\u0275fac=function(i){return new(i||tt)(_(Ce),_(fe),_(q),_(pe),_(We),_(G),_(H),_(L),_(V))},tt.\u0275cmp=N({type:tt,selectors:[["app-contact-content-edit"]],viewQuery:function(i,t){if(i&1&&X(Gn,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[J],decls:71,vars:51,consts:[["vform","ngForm"],["Title",""],["FirstName",""],["LastName",""],["Numbers",""],["Email",""],["Organization",""],["JobTitle",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"optionModelChange","optionSelectChecked","optionSelectDisChecked","optionModel"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.firstName",1,"color-highlight"],["matInput","","type","text","name","dataModel.firstName","minlength","3","maxlength","100","id","dataModel.firstName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.lastName",1,"color-highlight"],["matInput","","type","text","name","dataModel.lastName","minlength","3","maxlength","100","id","dataModel.lastName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.numbers",1,"color-highlight"],["matInput","","name","dataModel.numbers","minlength","1","maxlength","5000","rows","5","id","dataModel.numbers",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"d-flex","mb-3"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","minlength","3","maxlength","100","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.organization","minlength","3","maxlength","100","id","dataModel.organization",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.jobTitle","minlength","3","maxlength","100","id","dataModel.jobTitle",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],[1,"pt-1"],["data-trigger-switch","dataModel.numberHidden",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.numberHidden","name","dataModel.numberHidden",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.numberHidden",1,"custom-control-label"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=T();o(0,"div",8),y(1,"app-progress-spinner",9),o(2,"div",10)(3,"p",11),c(4),a(),o(5,"p"),c(6),u(7,"translate"),a(),y(8,"app-cms-form-result-message",12),o(9,"form",13,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),o(11,"app-contact-category-treeselector",14),A("optionModelChange",function(d){return g(s),w(t.dataContentCategoryModel,d)||(t.dataContentCategoryModel=d),h(d)}),I("optionSelectChecked",function(d){return g(s),h(t.onActionCategorySelectChecked(d))})("optionSelectDisChecked",function(d){return g(s),h(t.onActionCategorySelectDisChecked(d))}),a(),o(12,"div",15)(13,"label",16),c(14),a(),o(15,"input",17,1),A("ngModelChange",function(d){return g(s),w(t.dataModel.title,d)||(t.dataModel.title=d),h(d)}),a(),o(17,"em"),c(18),a(),b(19,Hn,5,4,"mat-error"),a(),o(20,"div",15)(21,"label",18),c(22),a(),o(23,"input",19,2),A("ngModelChange",function(d){return g(s),w(t.dataModel.firstName,d)||(t.dataModel.firstName=d),h(d)}),a(),o(25,"em"),c(26),a(),b(27,jn,5,4,"mat-error"),a(),o(28,"div",15)(29,"label",20),c(30),a(),o(31,"input",21,3),A("ngModelChange",function(d){return g(s),w(t.dataModel.lastName,d)||(t.dataModel.lastName=d),h(d)}),a(),o(33,"em"),c(34),a(),b(35,Wn,5,4,"mat-error"),a(),o(36,"div",15)(37,"label",22),c(38),a(),o(39,"textarea",23,4),A("ngModelChange",function(d){return g(s),w(t.dataModel.numbers,d)||(t.dataModel.numbers=d),h(d)}),c(41,"              "),a(),o(42,"em"),c(43),a(),b(44,qn,5,3,"mat-error"),a(),b(45,zn,8,2,"div",24),o(46,"div",15)(47,"label",25),c(48),a(),o(49,"input",26,5),A("ngModelChange",function(d){return g(s),w(t.dataModel.email,d)||(t.dataModel.email=d),h(d)}),a(),o(51,"em"),c(52),a(),b(53,Un,5,4,"mat-error"),a(),o(54,"div",15)(55,"label",25),c(56),a(),o(57,"input",27,6),A("ngModelChange",function(d){return g(s),w(t.dataModel.organization,d)||(t.dataModel.organization=d),h(d)}),a(),o(59,"em"),c(60),a(),b(61,Qn,5,4,"mat-error"),a(),o(62,"div",15)(63,"label",25),c(64),a(),o(65,"input",28,7),A("ngModelChange",function(d){return g(s),w(t.dataModel.jobTitle,d)||(t.dataModel.jobTitle=d),h(d)}),a(),o(67,"em"),c(68),a(),b(69,Yn,5,4,"mat-error"),a(),b(70,Kn,9,7,"div",29),a()()()}if(i&2){let s=D(16),C=D(24),d=D(32),E=D(40),k=D(50),B=D(58),oe=D(66);n(),S("optionsInfoAreaId",t.constructorInfoAreaId),n(3),p(" ",t.formInfo.formTitle," "),n(2),p(" ",f(7,49,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),S("formInfo",t.formInfo),n(3),x("optionModel",t.dataContentCategoryModel),n(3),M(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),x("ngModel",t.dataModel.title),n(3),p("",s.value.length," / 100"),n(),v(s.errors!=null&&s.errors.required?19:-1),n(3),M(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle)),x("ngModel",t.dataModel.firstName),n(3),p("",C.value.length," / 100"),n(),v(C.errors!=null&&C.errors.required?27:-1),n(3),M(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle)),x("ngModel",t.dataModel.lastName),n(3),p("",d.value.length," / 100"),n(),v(d.errors!=null&&d.errors.required?35:-1),n(3),M(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle)),x("ngModel",t.dataModel.numbers),n(4),p("",E.value.length," / 5000"),n(),v(E.errors!=null&&E.errors.required?44:-1),n(),v(t.fieldsInfo.numberHidden!=null&&t.fieldsInfo.numberHidden.accessWatchField?45:-1),n(3),M(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle)),x("ngModel",t.dataModel.email),n(3),p("",k.value.length," / 100"),n(),v(k.errors!=null&&k.errors.required?53:-1),n(3),M(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle)),x("ngModel",t.dataModel.organization),n(3),p("",B.value.length," / 100"),n(),v(B.errors!=null&&B.errors.required?61:-1),n(3),M(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle)),x("ngModel",t.dataModel.jobTitle),n(3),p("",oe.value.length," / 100"),n(),v(oe.errors!=null&&oe.errors.required?69:-1),n(),v(t.formInfo.submitButtonEnabled?70:-1)}},dependencies:[Te,ee,It,Q,ye,me,ue,te,Ee,xe,ie,z,Re,Xe,F],encapsulation:2});var it=tt;var Xn=["*"];function Zn(r,l){if(r&1&&(o(0,"label",3),c(1),a()),r&2){let e=m();S("for",Yt("app-cms-site-selector-",e.id)),n(),M(e.optionLabel)}}function $n(r,l){if(r&1&&(y(0,"img",5),u(1,"cmsthumbnail")),r&2){let e=m();S("src",R(f(1,2,e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),he)}}function eo(r,l){if(r&1&&(y(0,"img",5),u(1,"cmsthumbnail")),r&2){let e=m().$implicit;S("src",R(f(1,2,e.linkMainImageIdSrc)),he)}}function to(r,l){if(r&1&&(o(0,"mat-option",8),b(1,eo,2,4,"img",5),o(2,"span"),c(3),a()()),r&2){let e=l.$implicit,i=m();S("value",e)("disabled",i.optionDisabled),n(),v(e.linkMainImageIdSrc?1:-1),n(2),M(i.displayOption(e))}}function io(r,l){r&1&&y(0,"i",9)}function no(r,l){r&1&&y(0,"i",10)}function oo(r,l){if(r&1){let e=T();o(0,"i",13),I("click",function(){g(e);let t=m();return h(t.onActionSelectClear())}),a()}}function ro(r,l){r&1&&(o(0,"em"),c(1),u(2,"translate"),a()),r&2&&(n(),p("(",f(2,1,"TITLE.Necessary"),")"))}var De=class De{constructor(l,e,i,t,s,C){this.coreEnumService=l;this.cmsToastrService=e;this.cdr=i;this.publicHelper=t;this.translate=s;this.categoryService=C;this.id=++De.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new Y;this.dataModelSelect=new j;this.formControl=new Ii;this.optionPlaceholder="";this.optionSelectFirstItem=!1;this.optionDisabled=!1;this.optionRequired=!1;this.optionLabel="";this.optionChange=new Ie;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(ri(""),ni(1500),oi(),ai(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return re(this,null,function*(){let e=new K;e.rowPerPage=20,e.accessLoad=!0;let i=new de;i.propertyName="title",i.value=l,i.searchType=Jt.Contains,i.clauseType=pt.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new de,i.propertyName="id",i.value=l,i.searchType=Jt.Equal,i.clauseType=pt.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield St(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id.length==0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe(ii(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="string"&&l.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof l==typeof j){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new j,this.loadOptions()}};De.nextId=0,De.\u0275fac=function(e){return new(e||De)(_(q),_(G),_(L),_(H),_(V),_(U))},De.\u0275cmp=N({type:De,selectors:[["app-contact-category-selector"]],inputs:{optionPlaceholder:"optionPlaceholder",optionSelectFirstItem:"optionSelectFirstItem",optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:Xn,decls:18,vars:24,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],[1,"color-highlight",3,"for"],["matPrefix",""],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=T();li(),o(0,"div",1),y(1,"app-progress-spinner",2),b(2,Zn,2,3,"label",3),o(3,"span",4),b(4,$n,2,4,"img",5),a(),y(5,"input",6),o(6,"mat-autocomplete",7,0),I("optionSelected",function(C){return g(t),h(i.onActionSelect(C.option.value))}),se(8,to,4,4,"mat-option",8,ct),u(10,"async"),a(),b(11,io,1,0,"i",9),b(12,no,1,0,"i",10),b(13,oo,1,0,"i",11),o(14,"i",12),u(15,"translate"),I("click",function(){return g(t),h(i.onActionButtonReload())}),a(),b(16,ro,3,3,"em"),si(17),a()}if(e&2){let t=D(7);n(),S("optionsInfoAreaId",i.constructorInfoAreaId),n(),v((i.optionLabel==null?null:i.optionLabel.length)>0?2:-1),n(2),v(i.dataModelSelect&&(i.dataModelSelect!=null&&i.dataModelSelect.linkMainImageIdSrc)?4:-1),n(),S("placeholder",R(i.optionPlaceholder))("id",Yt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),Se("disabled",i.optionDisabled?!0:null),n(),S("displayWith",i.displayFn),n(2),ce(f(10,20,i.filteredOptions)),n(3),v(i.formControl.valid?-1:11),n(),v(i.optionRequired&&i.formControl.valid?12:-1),n(),v((i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0?13:-1),n(),ae("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),S("title",R(f(15,22,"ACTION.RELOAD"))),n(2),v(i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id.length<=0)?16:-1)}},dependencies:[ee,Q,yt,yi,Ri,Et,Di,wi,ie,z,bt,F,Qe],encapsulation:2});var Oe=De;var so=["fileInput"];function co(r,l){if(r&1){let e=T();o(0,"div",9)(1,"div")(2,"p",13),c(3),a(),o(4,"span",14),c(5),u(6,"translate"),a()(),o(7,"button",15),I("click",function(){g(e);let t=m();return h(t.onRemoveFile())}),c(8),u(9,"translate"),a()()}if(r&2){let e=m();n(3),M(e.selectedFile.name),n(2),dt(" ",f(6,5,"CONTACT.IMPORT.FILE_SIZE"),": ",e.formatFileSize(e.selectedFile)," "),n(2),S("disabled",e.isPreviewLoading),n(),p(" ",f(9,7,"CONTACT.IMPORT.CLEAR_BUTTON")," ")}}function po(r,l){r&1&&y(0,"mat-progress-bar",11)}function mo(r,l){if(r&1&&(o(0,"p",12),c(1),a()),r&2){let e=m();n(),p(" ",e.lastPreviewError," ")}}function uo(r,l){if(r&1&&(o(0,"mat-chip",31),c(1),a()),r&2){let e=l.$implicit;n(),p(" ",e," ")}}function fo(r,l){if(r&1&&(o(0,"div",19)(1,"label"),c(2),u(3,"translate"),a(),o(4,"mat-chip-set"),se(5,uo,2,1,"mat-chip",31,Ge().trackByHeader,!0),a()()),r&2){let e=m(2);n(2),M(f(3,1,"CONTACT.IMPORT.SOURCE_HEADERS_TITLE")),n(3),ce(e.sourceHeaders)}}function Co(r,l){r&1&&(o(0,"span",33),c(1),u(2,"translate"),a()),r&2&&(n(),p(" ",f(2,1,"CONTACT.IMPORT.REQUIRED_BADGE")," "))}function go(r,l){if(r&1&&(o(0,"mat-option",37),c(1),a()),r&2){let e=l.$implicit;S("value",e),n(),p(" ",e," ")}}function ho(r,l){if(r&1){let e=T();o(0,"div",23)(1,"div",32)(2,"div")(3,"p"),c(4),a(),o(5,"small"),c(6),a()(),b(7,Co,3,3,"span",33),a(),o(8,"mat-form-field",34)(9,"mat-label"),c(10),u(11,"translate"),a(),o(12,"mat-select",35),A("ngModelChange",function(t){let s=g(e).$implicit,C=m(2);return w(C.mappingSelections[s.key],t)||(C.mappingSelections[s.key]=t),h(t)}),I("selectionChange",function(){g(e);let t=m(2);return h(t.onMappingChange())}),o(13,"mat-option",36),c(14),u(15,"translate"),a(),se(16,go,2,2,"mat-option",37,Ge().trackByHeader,!0),a()()()}if(r&2){let e=l.$implicit,i=m(2);n(4),M(e.title||e.key),n(2),M(e.key),n(),v(e.required?7:-1),n(3),p(" ",f(11,6,"CONTACT.IMPORT.SELECT_SOURCE_HEADER_LABEL")," "),n(2),x("ngModel",i.mappingSelections[e.key]),n(2),p(" ",f(15,8,"CONTACT.IMPORT.OPTION_SKIP")," "),n(2),ce(i.sourceHeaders)}}function So(r,l){r&1&&(o(0,"p",12),c(1),u(2,"translate"),a()),r&2&&(n(),p(" ",f(2,1,"CONTACT.IMPORT.MISSING_REQUIRED")," "))}function _o(r,l){r&1&&y(0,"mat-progress-spinner",27),r&2&&S("diameter",18)("strokeWidth",3)}function Mo(r,l){if(r&1&&(o(0,"p",12),c(1),a()),r&2){let e=m(2);n(),p(" ",e.lastApplyError," ")}}function bo(r,l){r&1&&(o(0,"span",47),c(1," * "),a())}function vo(r,l){if(r&1&&(o(0,"mat-option",46),c(1),b(2,bo,2,0,"span",47),a()),r&2){let e=l.$implicit,i=m().$implicit,t=m(3);S("value",e.key)("disabled",t.isDestinationUsed(e.key,i)),n(),p(" ",e.title||e.key," "),n(),v(e.required?2:-1)}}function Io(r,l){if(r&1){let e=T();o(0,"div",40)(1,"div",42)(2,"span",43),c(3),a(),o(4,"mat-form-field",44)(5,"mat-label"),c(6),u(7,"translate"),a(),o(8,"mat-select",45),I("selectionChange",function(t){let s=g(e).$implicit,C=m(3);return h(C.onSourceHeaderMappingChange(s,t.value))}),o(9,"mat-option",36),c(10),u(11,"translate"),a(),se(12,vo,3,4,"mat-option",46,Ge().trackByDestination,!0),a()()()()}if(r&2){let e=l.$implicit,i=m(3);n(3),M(e),n(3),p(" ",f(7,4,"CONTACT.IMPORT.SELECT_DESTINATION_LABEL")," "),n(2),S("value",i.getDestinationForSource(e)),n(2),p(" ",f(11,6,"CONTACT.IMPORT.OPTION_SKIP")," "),n(2),ce(i.destinationHeaders)}}function yo(r,l){if(r&1&&(o(0,"div",48),c(1),a()),r&2){let e=l.$implicit,i=m().$implicit;n(),p(" ",i[e]||"-"," ")}}function Eo(r,l){if(r&1&&(o(0,"div",41),se(1,yo,2,1,"div",48,Ge().trackByHeader,!0),a()),r&2){let e=m(3);n(),ce(e.sourceHeaders)}}function To(r,l){if(r&1&&(o(0,"div")(1,"div",38)(2,"div",39),se(3,Io,14,8,"div",40,Ge().trackByHeader,!0),a(),se(5,Eo,3,0,"div",41,ct),a()()),r&2){let e=m(2);n(),ci("--columns-count",e.sourceHeaders.length),n(2),ce(e.sourceHeaders),n(2),ce(e.sampleRows)}}function xo(r,l){r&1&&(o(0,"p",29),c(1),u(2,"translate"),a()),r&2&&(n(),p(" ",f(2,1,"CONTACT.IMPORT.NO_SAMPLE_ROWS")," "))}function wo(r,l){if(r&1&&(o(0,"mat-card",30)(1,"mat-card-header")(2,"mat-card-title"),c(3),u(4,"translate"),a()(),o(5,"mat-card-content")(6,"div",49)(7,"div")(8,"span"),c(9),u(10,"translate"),a(),o(11,"strong"),c(12),a()(),o(13,"div")(14,"span"),c(15),u(16,"translate"),a(),o(17,"strong"),c(18),a()()(),o(19,"p",29),c(20),u(21,"translate"),a()()()),r&2){let e=m(2);n(3),p(" ",f(4,6,"CONTACT.IMPORT.RESULT_TITLE")," "),n(6),M(f(10,8,"CONTACT.IMPORT.RESULT_IMPORTED")),n(3),M(e.applyResult==null?null:e.applyResult.importedCount),n(3),M(f(16,10,"CONTACT.IMPORT.RESULT_SKIPPED")),n(3),M(e.applyResult==null?null:e.applyResult.skippedCount),n(2),p(" ",f(21,12,"CONTACT.IMPORT.RESULT_NO_ERRORS")," ")}}function Ao(r,l){if(r&1){let e=T();o(0,"mat-card",16)(1,"mat-card-header")(2,"mat-card-title"),c(3),u(4,"translate"),a(),o(5,"mat-card-subtitle"),c(6),u(7,"translate"),a()(),o(8,"mat-card-content")(9,"div",17)(10,"div",18)(11,"span"),c(12),u(13,"translate"),a(),o(14,"strong"),c(15),a()(),o(16,"div",18)(17,"span"),c(18),u(19,"translate"),a(),o(20,"strong"),c(21),u(22,"translate"),a()(),o(23,"div",18)(24,"span"),c(25),u(26,"translate"),a(),o(27,"strong"),c(28),u(29,"number"),a()(),o(30,"div",18)(31,"span"),c(32),u(33,"translate"),a(),o(34,"strong"),c(35),a()()(),b(36,fo,7,3,"div",19),a()(),o(37,"mat-card",20)(38,"mat-card-header")(39,"mat-card-title"),c(40),u(41,"translate"),a(),o(42,"mat-card-subtitle"),c(43),u(44,"translate"),a()(),o(45,"mat-card-content"),y(46,"br"),o(47,"app-contact-category-selector",21),u(48,"translate"),I("optionChange",function(t){g(e);let s=m();return h(s.modelCategory=t)}),a(),y(49,"br"),o(50,"div",22),se(51,ho,18,10,"div",23,ct),a(),b(53,So,3,3,"p",12),o(54,"div",24)(55,"button",25),I("click",function(){g(e);let t=m();return h(t.onResetImport())}),c(56),u(57,"translate"),a(),o(58,"button",26),I("click",function(){g(e);let t=m();return h(t.onApplyImport())}),b(59,_o,1,2,"mat-progress-spinner",27),o(60,"span"),c(61),u(62,"translate"),a()()(),b(63,Mo,2,1,"p",12),a()(),o(64,"mat-card",28)(65,"mat-card-header")(66,"mat-card-title"),c(67),u(68,"translate"),a()(),o(69,"mat-card-content"),b(70,To,7,2,"div")(71,xo,3,3,"p",29),a()(),b(72,wo,22,14,"mat-card",30)}if(r&2){let e=m();n(3),p(" ",f(4,26,"CONTACT.IMPORT.PREVIEW_SUMMARY_TITLE")," "),n(3),p(" ",f(7,28,"CONTACT.IMPORT.PREVIEW_SUMMARY_SUBTITLE")," "),n(6),M(f(13,30,"CONTACT.IMPORT.SESSION_LABEL")),n(3),M(e.previewResponse==null?null:e.previewResponse.sessionId),n(3),M(f(19,32,"CONTACT.IMPORT.FILE_TYPE_LABEL")),n(3),M(f(22,34,e.fileTypeTranslationMap[(e.previewResponse==null?null:e.previewResponse.fileType)||0])),n(4),M(f(26,36,"CONTACT.IMPORT.ROW_COUNT")),n(3),M(f(29,38,e.previewResponse==null?null:e.previewResponse.rowCount)),n(4),M(f(33,40,"CONTACT.IMPORT.HEADERS_FOUND")),n(3),M(e.sourceHeaders.length),n(),v(e.sourceHeaders.length?36:-1),n(4),p(" ",f(41,42,"CONTACT.IMPORT.MAPPING_TITLE")," "),n(3),p(" ",f(44,44,"CONTACT.IMPORT.MAPPING_SUBTITLE")," "),n(4),S("optionSelectFirstItem",!0)("optionRequired",!0)("optionLabel",f(48,46,"TITLE.Category")),n(4),ce(e.destinationHeaders),n(2),v(e.missingRequiredHeaders.length?53:-1),n(2),S("disabled",e.isPreviewLoading||!e.selectedFile),n(),p(" ",f(57,48,"CONTACT.IMPORT.RESET_BUTTON")," "),n(2),S("disabled",e.isApplyDisabled),n(),v(e.isApplyLoading?59:-1),n(2),M(f(62,50,"CONTACT.IMPORT.APPLY_BUTTON")),n(2),v(e.lastApplyError?63:-1),n(4),p(" ",f(68,52,"CONTACT.IMPORT.SAMPLE_ROWS_TITLE")," "),n(3),v(e.sampleRows!=null&&e.sampleRows.length?70:71),n(2),v(e.applyResult?72:-1)}}var nt=class nt extends Vt{constructor(e,i,t,s,C,d,E,k){super(e,new le,k,s,d);this.contentService=e;this.cmsToastrService=i;this.cmsConfirmationDialogService=t;this.tokenHelper=s;this.cdr=C;this.translate=d;this.pageInfo=E;this.publicHelper=k;this.constructorInfoAreaId=this.constructor.name;this.fileAccept=".csv,.xls,.xlsx,.vcf";this.allowedExtensions=[".csv",".xls",".xlsx",".vcf"];this.previewProcessKey=`${this.constructor.name}_preview`;this.applyProcessKey=`${this.constructor.name}_apply`;this.sourceHeaders=[];this.destinationHeaders=[];this.sampleRows=[];this.mappingSelections={};this.sourceToDestinationMapping={};this.isPreviewLoading=!1;this.isApplyLoading=!1;this.lastPreviewError="";this.lastApplyError="";this.fileTypeTranslationMap={[je.Unknown]:"CONTACT.IMPORT.FILE_TYPE.UNKNOWN",[je.GoogleCsv]:"CONTACT.IMPORT.FILE_TYPE.GOOGLE",[je.OutlookCsv]:"CONTACT.IMPORT.FILE_TYPE.OUTLOOK",[je.VCard]:"CONTACT.IMPORT.FILE_TYPE.VCARD",[je.Excel]:"CONTACT.IMPORT.FILE_TYPE.EXCEL"};this.modelCategory=new j;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.translate.get(["CONTACT.IMPORT.PAGE_TITLE","CONTACT.IMPORT.PAGE_DESCRIPTION"]).subscribe(e=>{this.pageInfo.updateTitle(e["CONTACT.IMPORT.PAGE_TITLE"]),this.pageInfo.updateDescription(e["CONTACT.IMPORT.PAGE_DESCRIPTION"])})}ngOnDestroy(){this.publicHelper.processService.processStop(this.previewProcessKey),this.publicHelper.processService.processStop(this.applyProcessKey)}get missingRequiredHeaders(){return this.destinationHeaders?.length?this.destinationHeaders.filter(e=>e.required&&!this.mappingSelections[e.key]):[]}get isApplyDisabled(){return!this.previewResponse||!this.selectedFile||this.isApplyLoading||this.missingRequiredHeaders.length>0}onFileSelected(e){let t=e.target?.files?.[0];if(t){if(!this.isExtensionAllowed(t)){this.translate.get("CONTACT.IMPORT.ERROR_UNSUPPORTED_FILE").subscribe(s=>{this.cmsToastrService.typeErrorMessage(s),this.lastPreviewError=s}),this.clearFileSelection();return}this.selectedFile=t,this.lastPreviewError="",this.lastApplyError="",this.applyResult=void 0,this.requestPreview(t)}}onRemoveFile(){this.clearFileSelection()}onResetImport(){!this.selectedFile||this.isPreviewLoading||(this.applyResult=void 0,this.lastApplyError="",this.requestPreview(this.selectedFile))}onMappingChange(){this.lastApplyError="",this.updateSourceToDestinationMapping(),this.cdr.detectChanges()}onSourceHeaderMappingChange(e,i){let t=this.sourceToDestinationMapping[e];t&&t!==i&&(this.mappingSelections[t]="");let s=Object.keys(this.sourceToDestinationMapping).find(C=>this.sourceToDestinationMapping[C]===i);s&&s!==e&&delete this.sourceToDestinationMapping[s],i&&i.trim()!==""?(this.sourceToDestinationMapping[e]=i,this.mappingSelections[i]=e):(delete this.sourceToDestinationMapping[e],t&&(this.mappingSelections[t]="")),this.onMappingChange()}updateSourceToDestinationMapping(){this.sourceToDestinationMapping={},Object.entries(this.mappingSelections).forEach(([e,i])=>{i&&i.trim()!==""&&(this.sourceToDestinationMapping[i]=e)})}isDestinationUsed(e,i){return!e||e.trim()===""?!1:Object.entries(this.sourceToDestinationMapping).some(([t,s])=>t!==i&&s===e)}getDestinationForSource(e){return this.sourceToDestinationMapping[e]||""}get mappedColumns(){return Object.entries(this.sourceToDestinationMapping).map(([e,i])=>{let t=this.destinationHeaders.find(s=>s.key===i);return t?{sourceHeader:e,destination:t}:null}).filter(e=>e!==null)}onApplyImport(){return re(this,null,function*(){if(this.isApplyDisabled)return;if(!this.modelCategory?.id){this.translate.get("MESSAGE.Category_is_not_clear").subscribe(t=>{this.cmsToastrService.typeErrorMessage(t)});return}if(!(yield this.askForConfirmation()))return;this.lastApplyError="",this.applyResult=void 0,this.isApplyLoading=!0;let i=this.buildApplyModel();i.linkCategoryId=this.modelCategory.id,this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(this.applyProcessKey,t,this.constructorInfoAreaId)}),Array.isArray(i.mappings)&&(i.mappings=i.mappings.filter(t=>!!t.sourceHeader&&t.sourceHeader.trim()!=="")),this.contentService.ServiceImportApply(i).subscribe({next:t=>{this.isApplyLoading=!1,this.publicHelper.processService.processStop(this.applyProcessKey),t.isSuccess?(this.applyResult=t.item,this.translate.get("CONTACT.IMPORT.APPLY_SUCCESS").subscribe(s=>{this.cmsToastrService.typeSuccessMessage(s)})):(this.lastApplyError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.cdr.detectChanges()},error:t=>{this.isApplyLoading=!1,this.publicHelper.processService.processStop(this.applyProcessKey,!1),this.lastApplyError=t,this.cmsToastrService.typeError(t)}})})}formatFileSize(e){if(!e)return"";let i=e.size;if(i<1024)return`${i} B`;let t=i/1024;if(t<1024)return`${t.toFixed(1)} KB`;let s=t/1024;return s<1024?`${s.toFixed(1)} MB`:`${(s/1024).toFixed(1)} GB`}trackByHeader(e,i){return i}trackByMappedColumn(e,i){return i.sourceHeader}trackByDestination(e,i){return i.key}requestPreview(e){this.isPreviewLoading=!0,this.previewResponse=void 0,this.sourceHeaders=[],this.destinationHeaders=[],this.sampleRows=[],this.mappingSelections={},this.applyResult=void 0,this.lastPreviewError="",this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(this.previewProcessKey,i,this.constructorInfoAreaId)}),this.contentService.ServiceImportPreview(e).subscribe({next:i=>{this.isPreviewLoading=!1,this.publicHelper.processService.processStop(this.previewProcessKey),i.isSuccess?(this.previewResponse=i.item,this.sourceHeaders=i.item?.sourceHeaders??[],this.destinationHeaders=i.item?.destinationHeaders??[],this.sampleRows=i.item?.sampleRows??[],this.initializeMappings(),this.translate.get("CONTACT.IMPORT.PREVIEW_READY").subscribe(t=>{this.cmsToastrService.typeSuccessMessage(t)})):(this.lastPreviewError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.cdr.detectChanges()},error:i=>{this.isPreviewLoading=!1,this.publicHelper.processService.processStop(this.previewProcessKey,!1),this.lastPreviewError=i,this.cmsToastrService.typeError(i)}})}initializeMappings(){this.mappingSelections={},this.sourceToDestinationMapping={},this.destinationHeaders?.length&&this.destinationHeaders.forEach(e=>{let i=this.findAutoMatch(e);i?(this.mappingSelections[e.key]=i,this.sourceToDestinationMapping[i]=e.key):this.mappingSelections[e.key]=""})}findAutoMatch(e){if(!e||!this.sourceHeaders?.length)return;let i=[e.title,e.key].filter(t=>!!t).map(t=>t.toLowerCase());return this.sourceHeaders.find(t=>i.includes(t.toLowerCase()))}buildApplyModel(){let e=new Mi;return e.sessionId=this.previewResponse?.sessionId??"",e.mappings=this.destinationHeaders.map(i=>{let t=new bi;return t.destinationKey=i.key,t.sourceHeader=this.mappingSelections[i.key]??"",t}),e}clearFileSelection(){this.selectedFile=void 0,this.previewResponse=void 0,this.sourceHeaders=[],this.destinationHeaders=[],this.sampleRows=[],this.mappingSelections={},this.sourceToDestinationMapping={},this.applyResult=void 0,this.lastPreviewError="",this.lastApplyError="",this.fileInput?.nativeElement&&(this.fileInput.nativeElement.value=""),this.cdr.detectChanges()}isExtensionAllowed(e){let i=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();return this.allowedExtensions.includes(i)}askForConfirmation(){return re(this,null,function*(){let e=yield St(this.translate.get(["CONTACT.IMPORT.CONFIRM_APPLY_TITLE","CONTACT.IMPORT.CONFIRM_APPLY_MESSAGE"]));return this.cmsConfirmationDialogService.confirm(e["CONTACT.IMPORT.CONFIRM_APPLY_TITLE"],e["CONTACT.IMPORT.CONFIRM_APPLY_MESSAGE"]+`<br><br><b>\u062F\u0631 \u062F\u0633\u062A\u0647 \u0628\u0646\u062F\u06CC  ${this.modelCategory?.title}</b>`)})}};nt.\u0275fac=function(i){return new(i||nt)(_(pe),_(G),_(Ye),_(Ae),_(L),_(V),_(kt),_(H))},nt.\u0275cmp=N({type:nt,selectors:[["app-contact-content-import"]],viewQuery:function(i,t){if(i&1&&X(so,5),i&2){let s;Z(s=$())&&(t.fileInput=s.first)}},standalone:!1,features:[J],decls:45,vars:43,consts:[["fileInput",""],[1,"contact-import"],[1,"import-card"],["mat-card-avatar","",1,"import-card__icon"],[1,"section-label"],[1,"section-hint"],[1,"upload-area"],["type","file",1,"upload-input",3,"change","accept","disabled"],[1,"upload-copy"],[1,"selected-file"],[1,"supported-list"],["mode","indeterminate"],[1,"error-panel"],[1,"selected-file__name"],[1,"selected-file__meta"],["mat-stroked-button","","color","warn","type","button",3,"click","disabled"],[1,"preview-card"],[1,"preview-grid"],[1,"preview-grid__item"],[1,"chip-groups"],[1,"mapping-card"],[3,"optionChange","optionSelectFirstItem","optionRequired","optionLabel"],[1,"mapping-grid"],[1,"mapping-row"],[1,"action-bar"],["mat-stroked-button","","type","button","color","primary",3,"click","disabled"],["mat-flat-button","","type","button","color","accent",1,"apply-button",3,"click","disabled"],["mode","indeterminate",3,"diameter","strokeWidth"],[1,"sample-card"],[1,"muted"],[1,"result-card"],["color","primary","selected",""],[1,"mapping-row__header"],[1,"required-badge"],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value"],[1,"sample-table"],[1,"sample-table__row","sample-table__row--head"],[1,"sample-table__header-cell"],[1,"sample-table__row"],[1,"header-cell-content"],[1,"header-name"],["appearance","outline",1,"header-mapping-dropdown"],[3,"selectionChange","value"],[3,"value","disabled"],[1,"required-indicator"],[1,"sample-table__cell"],[1,"result-stats"]],template:function(i,t){if(i&1){let s=T();o(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"div",3)(4,"mat-icon"),c(5,"import_contacts"),a()(),o(6,"mat-card-title"),c(7),u(8,"translate"),a(),o(9,"mat-card-subtitle"),c(10),u(11,"translate"),a()(),o(12,"mat-card-content")(13,"h3",4),c(14),u(15,"translate"),a(),o(16,"p",5),c(17),u(18,"translate"),a(),o(19,"div",6)(20,"input",7,0),I("change",function(d){return g(s),h(t.onFileSelected(d))}),a(),o(22,"div",8)(23,"mat-icon"),c(24,"cloud_upload"),a(),o(25,"p"),c(26),u(27,"translate"),a(),o(28,"small"),c(29),u(30,"translate"),a()()(),b(31,co,10,9,"div",9),o(32,"div",10)(33,"strong"),c(34),u(35,"translate"),a(),o(36,"span"),c(37),u(38,"translate"),u(39,"translate"),u(40,"translate"),u(41,"translate"),a()(),b(42,po,1,0,"mat-progress-bar",11),b(43,mo,2,1,"p",12),a()(),b(44,Ao,73,54),a()}i&2&&(n(7),M(f(8,21,"CONTACT.IMPORT.PAGE_TITLE")),n(3),p(" ",f(11,23,"CONTACT.IMPORT.PAGE_DESCRIPTION")," "),n(4),p(" ",f(15,25,"CONTACT.IMPORT.UPLOAD_TITLE")," "),n(3),p(" ",f(18,27,"CONTACT.IMPORT.UPLOAD_DESCRIPTION")," "),n(2),ae("upload-area--active",!!t.selectedFile)("upload-area--loading",t.isPreviewLoading),n(),S("accept",t.fileAccept)("disabled",t.isPreviewLoading),n(6),M(f(27,29,"CONTACT.IMPORT.UPLOAD_PLACEHOLDER")),n(3),M(f(30,31,"CONTACT.IMPORT.SUPPORTED_FORMATS_HINT")),n(2),v(t.selectedFile?31:-1),n(3),p("",f(35,33,"CONTACT.IMPORT.SUPPORTED_FORMATS"),":"),n(3),di(" ",f(38,35,"CONTACT.IMPORT.FILE_TYPE.GOOGLE")," \xB7 ",f(39,37,"CONTACT.IMPORT.FILE_TYPE.OUTLOOK")," \xB7 ",f(40,39,"CONTACT.IMPORT.FILE_TYPE.VCARD")," \xB7 ",f(41,41,"CONTACT.IMPORT.FILE_TYPE.EXCEL")," "),n(5),v(t.isPreviewLoading?42:-1),n(),v(t.lastPreviewError?43:-1),n(),v(t.previewResponse?44:-1))},dependencies:[Q,te,Et,Oi,ki,Fi,Bi,Vi,Li,Ni,Gi,Hi,Ai,xi,we,Ui,Qi,qi,Oe,mi,F],styles:["[_nghost-%COMP%]{display:block;width:100%}.contact-import[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;padding:24px 12px 48px}@media (min-width: 992px){.contact-import[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:32px 0 64px}}.import-card__icon[_ngcontent-%COMP%]{background:#e5f2ff;color:#0057c2;display:flex;align-items:center;justify-content:center}.section-label[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#1a1a27}.section-hint[_ngcontent-%COMP%]{margin:4px 0 16px;color:#5e6278}.upload-area[_ngcontent-%COMP%]{border:1px dashed #c3c8d4;border-radius:16px;padding:32px 16px;text-align:center;background:#f8f9fb;position:relative;transition:border-color .2s ease,background .2s ease}.upload-area--active[_ngcontent-%COMP%]{border-color:#009ef7;background:#f0f9ff}.upload-area--loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.upload-input[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;opacity:0;cursor:pointer}.upload-copy[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;color:#3f4254}.upload-copy[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;color:#009ef7}.selected-file[_ngcontent-%COMP%]{margin-top:16px;padding:16px 20px;border-radius:12px;background:#f5f8fa;display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap}.selected-file__name[_ngcontent-%COMP%]{margin:0;font-weight:600}.selected-file__meta[_ngcontent-%COMP%]{font-size:.9rem;color:#5e6278}.supported-list[_ngcontent-%COMP%]{margin-top:12px;font-size:.9rem;color:#5e6278;display:flex;flex-direction:column;gap:4px}.preview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:16px}.preview-grid__item[_ngcontent-%COMP%]{border:1px solid #eff2f5;border-radius:14px;padding:16px;background:#fcfcff;display:flex;flex-direction:column;gap:4px}.preview-grid__item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;color:#5e6278}.preview-grid__item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.1rem;color:#1a1a27}.chip-groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.chip-groups[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#3f4254}.mapping-grid[_ngcontent-%COMP%]{display:grid;gap:16px}.mapping-row[_ngcontent-%COMP%]{border:1px solid #eef0f4;border-radius:18px;padding:16px;background:#fff;box-shadow:0 8px 24px #0f172a0f}.mapping-row__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;margin-bottom:12px}.mapping-row__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:600}.mapping-row__header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#7e8299}.required-badge[_ngcontent-%COMP%]{align-self:flex-start;border-radius:999px;padding:2px 10px;background:#fff0f1;color:#c62828;font-size:.75rem;font-weight:600}.error-panel[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;border-radius:12px;background:#fff4f4;color:#c62828;font-size:.9rem}.action-bar[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end;gap:12px;flex-wrap:wrap}.apply-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px}.apply-button[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{width:18px;height:18px}.sample-table[_ngcontent-%COMP%]{border:1px solid #eef0f4;border-radius:12px;overflow-x:auto;overflow-y:visible;width:100%;display:block;position:relative;-webkit-overflow-scrolling:touch;scrollbar-width:auto;scrollbar-color:#009ef7 #f5f8fa}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:12px}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f8fa;border-radius:6px;border:1px solid #eef0f4}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#009ef7;border-radius:6px;border:2px solid #f5f8fa}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0085d1}.sample-table__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(var(--columns-count, 1),250px);width:max-content}.sample-table__row--head[_ngcontent-%COMP%]{background:#f5f8fa;font-weight:600}.sample-table__row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #eef0f4;border-right:1px solid #eef0f4;width:250px;box-sizing:border-box;word-break:break-word;overflow:hidden;text-overflow:ellipsis}.sample-table__row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:0}.sample-table__header-cell[_ngcontent-%COMP%]{padding:16px!important;background:#f8f9fb;display:flex;flex-direction:column;gap:8px;width:250px;box-sizing:border-box}.header-cell-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.header-name[_ngcontent-%COMP%]{font-weight:600;color:#1a1a27;font-size:.9rem}.header-mapping-dropdown[_ngcontent-%COMP%]{width:100%;margin:0}.header-mapping-dropdown[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.header-mapping-dropdown[_ngcontent-%COMP%]     .mat-mdc-form-field{font-size:.85rem}.sample-table__cell[_ngcontent-%COMP%]{min-width:0;word-break:break-word}.required-indicator[_ngcontent-%COMP%]{color:#c62828;font-weight:600;margin-left:4px}.result-stats[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:16px}.result-stats[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1 1 160px;border:1px solid #eef0f4;border-radius:12px;padding:16px;background:#f5f8ff}.result-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;color:#5e6278}.result-stats[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:1.3rem;color:#1a1a27;margin-top:4px}.muted[_ngcontent-%COMP%]{color:#7e8299;font-size:.9rem}"]});var Ht=nt;var Ro=["vform"];function Do(r,l){if(r&1){let e=T();o(0,"div",7)(1,"label",8),c(2),a(),o(3,"input",9,0),A("ngModelChange",function(t){g(e);let s=m();return w(s.dataModelResultCategory.item.title,t)||(s.dataModelResultCategory.item.title=t),h(t)}),a()(),o(5,"div",7)(6,"label",10),c(7),a(),o(8,"textarea",11,1),A("ngModelChange",function(t){g(e);let s=m();return w(s.dataModelResultCategory.item.description,t)||(s.dataModelResultCategory.item.description=t),h(t)}),a()()}if(r&2){let e=m();n(2),M(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),n(),S("placeholder",R(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)),x("ngModel",e.dataModelResultCategory.item.title),n(4),M(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),n(),S("placeholder",R(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle)),x("ngModel",e.dataModelResultCategory.item.description)}}function Oo(r,l){if(r&1){let e=T();o(0,"div",6)(1,"button",12),I("click",function(){g(e);let t=m();return h(t.onFormMove())}),y(2,"i",13),c(3),u(4,"translate"),a(),o(5,"button",14),I("click",function(){g(e);let t=m();return h(t.onFormDelete())}),y(6,"i",15),c(7),u(8,"translate"),a(),o(9,"button",16),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),y(10,"i",13),c(11),u(12,"translate"),a()()}if(r&2){let e=m();n(),S("disabled",!e.formInfo.submitButtonEnabled),n(2),p(" ",f(4,5,"TITLE.MOVE_DATA")," "),n(2),S("disabled",!e.formInfo.submitButtonEnabled),n(2),p(" ",f(8,7,"ACTION.DELETE")," "),n(4),p(" ",f(12,9,"ACTION.CANCEL")," ")}}var ot=class ot{constructor(l,e,i,t,s,C,d){this.data=l;this.dialogRef=e;this.publicHelper=i;this.contactCategoryService=t;this.cdr=s;this.translate=C;this.cmsToastrService=d;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResultCategory=new Y;this.dataModelResultCategoryAllData=new Y;this.dataModel={};this.formInfo=new pn;this.publicHelper.processService.cdr=this.cdr,l&&l.id&&l.id.length>0&&(this.requestId=l.id)}ngOnInit(){if(this.requestId.length==0){this.cmsToastrService.typeErrorDeleteRowIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(),this.DataGetAll()}DataGetOne(){if(this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.translate.get("TITLE.Loading_Information").subscribe(e=>{this.formInfo.submitResultMessage=e});let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.contactCategoryService.setAccessLoad(),this.contactCategoryService.setAccessDataType(He.Editor),this.contactCategoryService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResultCategory=e,e.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeErrorGetOne()),this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}DataGetAll(){this.translate.get("TITLE.Loading_Information").subscribe(i=>{this.formInfo.submitResultMessage=i});let l=new K;l.rowPerPage=100;let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceGetAll(l).subscribe({next:i=>{this.dataModelResultCategoryAllData=i,i.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeErrorGetAll()),this.publicHelper.processService.processStop(e)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormMove(){if(this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(!this.formGroup.valid)return;this.formInfo.submitButtonEnabled=!0,this.dataModel.newCatId===this.requestId&&(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitButtonEnabled=!0),this.formInfo.submitButtonEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceMove(this.requestId,this.dataModel.newCatId).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.The_Transfer_Was_Successful").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeSuccessMove()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorMove()),this.formInfo.submitButtonEnabled=!0,this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormDelete(){if(this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.formInfo.submitButtonEnabled=!1,this.formInfo.submitButtonEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceDelete(this.requestId).subscribe({next:e=>{this.formInfo.submitButtonEnabled=!e.isSuccess,e.isSuccess?(this.translate.get("MESSAGE.Deletion_Was_Successful").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormChangeNewCatId(l){if(this.formInfo.submitResultMessage="",this.requestId.length===0||!l||l.id.length<=0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.dataModel.newCatId=l.id,this.dataModel.newCatId===this.requestId?(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitButtonEnabled=!1):(this.formInfo.submitButtonEnabled=!0,this.formInfo.submitResultMessage="")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};ot.\u0275fac=function(e){return new(e||ot)(_(Ce),_(fe),_(H),_(U),_(L),_(V),_(G))},ot.\u0275cmp=N({type:ot,selectors:[["app-contact-category-delete"]],viewQuery:function(e,i){if(e&1&&X(Ro,5),e&2){let t;Z(t=$())&&(i.formGroup=t.first)}},standalone:!1,decls:10,vars:7,consts:[["Title",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[1,"form-actions"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModelResultCategory.item.title",1,"color-highlight"],["matInput","","name","dataModelResultCategory.item.title","type","text","minlength","3","maxlength","50","required","","readonly","","id","dataModelResultCategory.item.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModelResultCategory.item.description",1,"color-highlight"],["matInput","","name","dataModelResultCategory.item.description","type","text","minlength","1","maxlength","100","readonly","","required","","rows","5","id","dataModelResultCategory.item.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click","disabled"],[1,"ft-x"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click","disabled"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"]],template:function(e,i){e&1&&(o(0,"div",2),y(1,"app-progress-spinner",3),o(2,"div",4)(3,"p",5),c(4),a(),o(5,"p"),c(6),u(7,"translate"),a(),b(8,Do,10,8),b(9,Oo,13,11,"div",6),a()()),e&2&&(n(),S("optionsInfoAreaId",i.constructorInfoAreaId),n(3),p(" ",i.formInfo.formTitle," "),n(2),p(" ",f(7,5,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),v(i.dataModelResultCategory!=null&&i.dataModelResultCategory.item?8:-1),n(),v(i.formInfo.submitButtonEnabled?9:-1))},dependencies:[ee,Q,yt,me,ue,te,ie,z,F],encapsulation:2});var jt=ot;var No=["vform"];function Bo(r,l){if(r&1){let e=T();o(0,"app-cms-enum-record-status-selector",21),A("modelChange",function(t){g(e);let s=m();return w(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(r&2){let e=m();x("model",e.dataModel.recordStatus),S("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Lo(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function Vo(r,l){r&1&&(o(0,"mat-error"),c(1," Description is "),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2&&(n(3),M(f(4,1,"MESSAGE.required")))}function Fo(r,l){if(r&1&&(y(0,"img",19),u(1,"cmsthumbnail")),r&2){let e=m();S("src",R(f(1,2,e.dataModel.linkMainImageIdSrc)),he)}}function Go(r,l){if(r&1){let e=T();o(0,"div",12)(1,"label",22),I("click",function(){g(e);let t=m();return h(t.fileManagerOpenForm=!0)}),c(2),u(3,"translate"),a(),o(4,"input",23,3),u(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return w(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),h(t)}),I("click",function(){g(e);let t=m();return h(t.fileManagerOpenForm=!0)}),a(),o(7,"cms-file-manager",24),I("itemSelected",function(t){g(e);let s=m();return h(s.onActionFileSelected(t))}),A("openFormChange",function(t){g(e);let s=m();return w(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),h(t)}),a()()}if(r&2){let e=m();n(2),M(f(3,12,"TITLE.Icon_File")),n(2),S("placeholder",R(f(6,14,"TITLE.Original_File_ID"))),x("ngModel",e.dataModel.linkMainImageId),n(3),S("language",e.appLanguage)("isPopup",!0)("openDirectUploadView",!0),x("openForm",e.fileManagerOpenForm),S("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Ho(r,l){if(r&1){let e=T();o(0,"div",20)(1,"button",25),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),y(2,"i",26),c(3),u(4,"translate"),a(),o(5,"button",27),y(6,"i",28),c(7),u(8,"translate"),a()()}if(r&2){m();let e=D(10);n(3),p(" ",f(4,3,"ACTION.CANCEL")," "),n(2),S("disabled",!e.form.valid),n(2),p(" ",f(8,5,"ACTION.SAVE")," ")}}var rt=class rt extends Lt{constructor(e,i,t,s,C,d,E,k){super(s,new j,d,k);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.contactCategoryService=s;this.cmsToastrService=C;this.publicHelper=d;this.cdr=E;this.translate=k;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new vt;this.dataModel=new j;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&e.id&&e.id.length>0&&(this.requestId=e.id),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}ngOnInit(){if(this.requestId.length>0)this.translate.get("TITLE.Edit_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}}DataGetOneContent(){if(this.requestId.length==0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.setAccessLoad(),this.contactCategoryService.setAccessDataType(He.Editor),this.contactCategoryService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionParentSelect(e){this.dataModel?.id!=e?.id&&(e&&e.id?.length>0?this.dataModel.linkParentId=e.id:this.dataModel.linkParentId=null)}};rt.\u0275fac=function(i){return new(i||rt)(_(Ce),_(fe),_(q),_(U),_(G),_(H),_(L),_(V))},rt.\u0275cmp=N({type:rt,selectors:[["app-contact-category-edit"]],viewQuery:function(i,t){if(i&1&&X(No,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[J],decls:37,vars:31,consts:[["vform","ngForm"],["Title",""],["Description",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["target","_blank",3,"href"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openDirectUploadView","openForm","tree","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=T();o(0,"div",4),y(1,"app-progress-spinner",5),o(2,"div",6)(3,"p",7),c(4),a(),o(5,"p"),c(6),u(7,"translate"),a(),y(8,"app-cms-form-result-message",8),o(9,"form",9,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),b(11,Bo,1,5,"app-cms-enum-record-status-selector",10),o(12,"app-contact-category-selector",11),u(13,"translate"),I("optionChange",function(d){return g(s),h(t.onActionParentSelect(d))}),a(),o(14,"div",12)(15,"label",13),c(16),a(),o(17,"input",14,1),A("ngModelChange",function(d){return g(s),w(t.dataModel.title,d)||(t.dataModel.title=d),h(d)}),a(),o(19,"em"),c(20),a(),b(21,Lo,5,4,"mat-error"),a(),o(22,"div",12)(23,"label",15),c(24),a(),o(25,"textarea",16,2),A("ngModelChange",function(d){return g(s),w(t.dataModel.description,d)||(t.dataModel.description=d),h(d)}),c(27,"          "),a(),o(28,"em"),c(29),a(),b(30,Vo,5,3,"mat-error"),a(),o(31,"div",17)(32,"a",18),u(33,"cmsthumbnail"),b(34,Fo,2,4,"img",19),a()(),b(35,Go,8,16,"div",12),b(36,Ho,9,7,"div",20),a()()()}if(i&2){let s=D(18),C=D(26);n(),S("optionsInfoAreaId",t.constructorInfoAreaId),n(3),p(" ",t.formInfo.formTitle," "),n(2),p(" ",f(7,25,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),S("formInfo",t.formInfo),n(3),v(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),n(),S("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",f(13,27,"TITLE.Parent_Area")),n(4),M(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),x("ngModel",t.dataModel.title),n(3),p("",s.value.length," / 100"),n(),v(s.errors!=null&&s.errors.required?21:-1),n(3),M(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),x("ngModel",t.dataModel.description),n(4),p("",C.value.length," / 500"),n(),v(C.errors!=null&&C.errors.required?30:-1),n(2),S("href",R(f(33,29,t.dataModel.linkMainImageIdSrc)),he),n(2),v((t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0?34:-1),n(),v(t.fieldsInfo.linkMainImageId!=null&&t.fieldsInfo.linkMainImageId.accessWatchField?35:-1),n(),v(t.formInfo.submitButtonEnabled?36:-1)}},dependencies:[Te,ee,Q,ye,me,ue,te,Ee,xe,ie,Bt,z,Re,Pt,Oe,F,Qe],encapsulation:2});var Wt=rt;var jo=["vform"];function Wo(r,l){if(r&1){let e=T();o(0,"app-cms-enum-record-status-selector",21),A("modelChange",function(t){g(e);let s=m();return w(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),h(t)}),a()}if(r&2){let e=m();x("model",e.dataModel.recordStatus),S("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function qo(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2){let e=m();n(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),M(f(4,2,"MESSAGE.required"))}}function zo(r,l){r&1&&(o(0,"mat-error"),c(1," Description is "),o(2,"strong"),c(3),u(4,"translate"),a()()),r&2&&(n(3),M(f(4,1,"MESSAGE.required")))}function Uo(r,l){if(r&1&&(y(0,"img",19),u(1,"cmsthumbnail")),r&2){let e=m();S("src",R(f(1,2,e.dataModel.linkMainImageIdSrc)),he)}}function Qo(r,l){if(r&1){let e=T();o(0,"div",11)(1,"label",22),I("click",function(){g(e);let t=m();return h(t.fileManagerOpenForm=!0)}),c(2),u(3,"translate"),a(),o(4,"input",23,3),u(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return w(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),h(t)}),I("click",function(){g(e);let t=m();return h(t.fileManagerOpenForm=!0)}),a(),o(7,"cms-file-manager",24),I("itemSelected",function(t){g(e);let s=m();return h(s.onActionFileSelected(t))}),A("openFormChange",function(t){g(e);let s=m();return w(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),h(t)}),a()()}if(r&2){let e=m();n(2),M(f(3,12,"TITLE.Icon_File")),n(2),S("placeholder",R(f(6,14,"TITLE.Original_File_ID"))),x("ngModel",e.dataModel.linkMainImageId),n(3),S("language",e.appLanguage)("isPopup",!0)("openDirectUploadView",!0),x("openForm",e.fileManagerOpenForm),S("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Yo(r,l){if(r&1){let e=T();o(0,"div",20)(1,"button",25),I("click",function(){g(e);let t=m();return h(t.onFormCancel())}),y(2,"i",26),c(3),u(4,"translate"),a(),o(5,"button",27),y(6,"i",28),c(7),u(8,"translate"),a()()}if(r&2){m();let e=D(10);n(3),p(" ",f(4,3,"ACTION.CANCEL")," "),n(2),S("disabled",!e.form.valid),n(2),p(" ",f(8,5,"ACTION.SAVE")," ")}}var at=class at extends Nt{constructor(e,i,t,s,C,d,E,k){super(s,new j,d,k);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.contactCategoryService=s;this.cmsToastrService=C;this.publicHelper=d;this.cdr=E;this.translate=k;this.requestParentId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new Y;this.dataModel=new j;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&e.parentId&&e.parentId.length>0&&(this.requestParentId=e.parentId),this.requestParentId.length>0&&(this.dataModel.linkParentId=this.requestParentId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}ngOnInit(){this.translate.get("TITLE.Register_New_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionParentSelect(e){this.dataModel?.id!=e?.id&&(e&&e.id?.length>0?this.dataModel.linkParentId=e.id:this.dataModel.linkParentId=null)}};at.\u0275fac=function(i){return new(i||at)(_(Ce),_(fe),_(q),_(U),_(G),_(H),_(L),_(V))},at.\u0275cmp=N({type:at,selectors:[["app-contact-category-add"]],viewQuery:function(i,t){if(i&1&&X(jo,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[J],decls:37,vars:31,consts:[["vform","ngForm"],["Title",""],["Description",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["target","_blank",3,"href"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openDirectUploadView","openForm","tree","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=T();o(0,"div",4),y(1,"app-progress-spinner",5),o(2,"div",6)(3,"p",7),c(4),a(),o(5,"p"),c(6),u(7,"translate"),a(),y(8,"app-cms-form-result-message",8),o(9,"form",9,0),I("ngSubmit",function(){return g(s),h(t.onFormSubmit())}),b(11,Wo,1,5,"app-cms-enum-record-status-selector",10),o(12,"div",11)(13,"label",12),c(14),a(),o(15,"input",13,1),A("ngModelChange",function(d){return g(s),w(t.dataModel.title,d)||(t.dataModel.title=d),h(d)}),a(),o(17,"em"),c(18),a(),b(19,qo,5,4,"mat-error"),a(),o(20,"app-contact-category-selector",14),u(21,"translate"),I("optionChange",function(d){return g(s),h(t.onActionParentSelect(d))}),a(),o(22,"div",11)(23,"label",15),c(24),a(),o(25,"textarea",16,2),A("ngModelChange",function(d){return g(s),w(t.dataModel.description,d)||(t.dataModel.description=d),h(d)}),c(27,"          "),a(),o(28,"em"),c(29),a(),b(30,zo,5,3,"mat-error"),a(),o(31,"div",17)(32,"a",18),u(33,"cmsthumbnail"),b(34,Uo,2,4,"img",19),a()(),b(35,Qo,8,16,"div",11),b(36,Yo,9,7,"div",20),a()()()}if(i&2){let s=D(16),C=D(26);n(),S("optionsInfoAreaId",t.constructorInfoAreaId),n(3),p(" ",t.formInfo.formTitle," "),n(2),p(" ",f(7,25,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),S("formInfo",t.formInfo),n(3),v(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),n(3),M(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),x("ngModel",t.dataModel.title),n(3),p("",s.value.length," / 100"),n(),v(s.errors!=null&&s.errors.required?19:-1),n(),S("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",f(21,27,"TITLE.Parent_Area")),n(4),M(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),n(),S("placeholder",R(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),x("ngModel",t.dataModel.description),n(4),p("",C.value.length," / 500"),n(),v(C.errors!=null&&C.errors.required?30:-1),n(2),S("href",R(f(33,29,t.dataModel.linkMainImageIdSrc)),he),n(2),v((t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0?34:-1),n(),v(t.fieldsInfo.linkMainImageId!=null&&t.fieldsInfo.linkMainImageId.accessWatchField?35:-1),n(),v(t.formInfo.submitButtonEnabled?36:-1)}},dependencies:[Te,ee,Q,ye,me,ue,te,Ee,xe,ie,Bt,z,Re,Pt,Oe,F,Qe],encapsulation:2});var qt=at;function Ko(r,l){if(r&1){let e=T();o(0,"button",14),I("click",function(){g(e);let t=m();return h(t.onActionAdd())}),c(1),u(2,"translate"),a()}r&2&&(n(),p(" ",f(2,1,"ACTION.ADD")," "))}function Jo(r,l){if(r&1){let e=T();o(0,"button",15),I("click",function(){g(e);let t=m();return h(t.onActionEdit())}),c(1),u(2,"translate"),a()}r&2&&(n(),p(" ",f(2,1,"ACTION.EDIT")," "))}function Xo(r,l){if(r&1){let e=T();o(0,"button",16),I("click",function(){g(e);let t=m();return h(t.onActionDelete())}),c(1),u(2,"translate"),a()}r&2&&(n(),p(" ",f(2,1,"ACTION.DELETE")," "))}function Zo(r,l){if(r&1){let e=T();o(0,"button",17),I("click",function(){g(e);let t=m();return h(t.onActionButtonReload())}),o(1,"mat-icon",18),u(2,"translate"),c(3,"refresh"),a()()}if(r&2){let e=m();n(),ae("rotation360",e.publicHelper.processService.process.inRunArea[e.constructorInfoAreaId]),S("title",R(f(2,4,"ACTION.RELOAD")))}}function $o(r,l){if(r&1){let e=T();o(0,"mat-tree-node",19),y(1,"button",20),o(2,"span",21),I("click",function(){let t=g(e).$implicit,s=m();return h(s.onActionSelect(t))}),c(3),a()()}if(r&2){let e=l.$implicit,i=m();ae("ntk-tree-selected",(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0&&(i.dataModelSelect==null?null:i.dataModelSelect.id)===e.id),n(3),M(e.title)}}function er(r,l){if(r&1){let e=T();o(0,"mat-tree-node",22)(1,"button",23)(2,"mat-icon",24),c(3),a()(),o(4,"span",21),I("click",function(){let t=g(e).$implicit,s=m();return h(s.onActionSelect(t))}),c(5),a()()}if(r&2){let e=l.$implicit,i=m(),t=D(12);ae("ntk-tree-selected",(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0&&(i.dataModelSelect==null?null:i.dataModelSelect.id)===e.id),S("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),n(),Se("type","button")("aria-label","Toggle "+e.title),n(2),p(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),n(2),M(e.title)}}var lt=class lt{constructor(l,e,i,t,s,C,d,E,k){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.dialog=t;this.cdr=s;this.publicHelper=C;this.tokenHelper=d;this.cmsStoreService=E;this.translate=k;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new j;this.dataModelResult=new Y;this.filterModel=new K;this.dataSource=new Ot;this.optionChange=new Ie;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(l,e)=>!!e.children&&e.children.length>0;this.childrenAccessor=l=>l.children??[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>re(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onActionSelect(l){l&&this.dataModelSelect&&l.id==this.dataModelSelect.id?(this.dataModelSelect=null,this.optionChange.emit(null)):(this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect))}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new j,this.DataGetAll()}onActionSelectForce(l){}onActionAdd(){let l="";this.dataModelSelect&&this.dataModelSelect.id?.length>0&&(l=this.dataModelSelect.id);let e=new ft;e.disableClose=!0,e.autoFocus=!0,e.data={parentId:l},this.dialog.open(qt,e).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let l="";if(this.dataModelSelect&&this.dataModelSelect.id?.length>0&&(l=this.dataModelSelect.id),l.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Wt,{height:"90%",panelClass:e,enterAnimationDuration:Ct.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Ct.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let l="";if(this.dataModelSelect&&this.dataModelSelect.id?.length>0&&(l=this.dataModelSelect.id),l.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(jt,{height:"90%",panelClass:e,enterAnimationDuration:Ct.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Ct.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}};lt.\u0275fac=function(e){return new(e||lt)(_(G),_(q),_(U),_(ze),_(L),_(H),_(Ae),_(Ue),_(V))},lt.\u0275cmp=N({type:lt,selectors:[["app-contact-category-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:16,vars:14,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,i){e&1&&(o(0,"app-cms-html-tree",1),O(1,2),c(2),u(3,"translate"),P(),O(4,3),b(5,Ko,3,3,"button",4),b(6,Jo,3,3,"button",5),b(7,Xo,3,3,"button",6),b(8,Zo,4,6,"button",7),P(),O(9,8),y(10,"app-progress-spinner",9),o(11,"mat-tree",10,0),W(13,$o,4,3,"mat-tree-node",11)(14,er,6,8,"mat-tree-node",12),a(),P(),ke(15,13),a()),e&2&&(S("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),n(2),p(" ",f(3,12,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),n(3),v(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessAddRow?5:-1),n(),v(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow&&(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0?6:-1),n(),v(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessDeleteRow&&(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0?7:-1),n(),v(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessWatchRow?8:-1),n(2),S("optionsInfoAreaId",i.constructorInfoAreaId),n(),S("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),n(3),S("matTreeNodeDefWhen",i.hasChild))},dependencies:[qe,we,wt,At,Dt,Rt,xt,z,Ft,F],encapsulation:2});var zt=lt;var ir=()=>[5,10,20,100];function nr(r,l){if(r&1){let e=T();o(0,"a",10),I("click",function(){g(e);let t=m();return h(t.onActionButtonBulkDelete())}),y(1,"i",42),c(2),u(3,"translate"),a()}if(r&2){let e=m();n(2),dt(" ",f(3,2,"ACTION.DELETE_SELECTED")," (",e.getSelectedCount(),") ")}}function or(r,l){if(r&1){let e=T();o(0,"div",18)(1,"a",43),I("click",function(){g(e);let t=m();return h(t.onActionButtonNewRow())}),y(2,"i",44)(3,"br"),a(),o(4,"p",45),c(5),u(6,"translate"),a()()}r&2&&(n(5),p(" ",f(6,1,"ACTION.ADD")," "))}function rr(r,l){if(r&1){let e=T();o(0,"div",18)(1,"a",46),I("click",function(){g(e);let t=m();return h(t.onActionButtonImport())}),y(2,"i",16)(3,"br"),a(),o(4,"p",45),c(5),u(6,"translate"),a()()}r&2&&(n(5),p(" ",f(6,1,"ACTION.IMPORT")," "))}function ar(r,l){if(r&1){let e=T();o(0,"div",18)(1,"a",47),I("click",function(){g(e);let t=m();return h(t.onActionButtonBulkDelete())}),y(2,"i",48)(3,"br"),a(),o(4,"p",45),c(5),u(6,"translate"),a()()}if(r&2){let e=m();n(5),dt(" ",f(6,2,"ACTION.DELETE_SELECTED")," (",e.getSelectedCount(),") ")}}function lr(r,l){if(r&1){let e=T();o(0,"div",18)(1,"a",49),I("click",function(){g(e);let t=m();return h(t.onActionButtonEditRow(t.tableRowSelected))}),y(2,"i",50)(3,"br"),a(),o(4,"p",45),c(5),u(6,"translate"),a()()}r&2&&(n(5),p(" ",f(6,1,"ACTION.EDIT")," "))}function sr(r,l){if(r&1){let e=T();o(0,"div",18)(1,"a",47),I("click",function(){g(e);let t=m();return h(t.onActionButtonDeleteRow(t.tableRowSelected))}),y(2,"i",51)(3,"br"),a(),o(4,"p",45),c(5),u(6,"translate"),a()()}r&2&&(n(5),p(" ",f(6,1,"ACTION.DELETE")," "))}function cr(r,l){if(r&1&&(o(0,"mat-header-cell",52),c(1),a()),r&2){let e=m();n(),p(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function dr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),a()),r&2){let e=l.$implicit;n(),p(" ",e.id," ")}}function pr(r,l){if(r&1&&(o(0,"mat-header-cell",52),c(1),a()),r&2){let e=m();n(),p(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function mr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),u(2,"cmssiteinfo"),u(3,"async"),a()),r&2){let e=l.$implicit;n(),p(" ",f(3,3,f(2,1,e.linkSiteId))," ")}}function ur(r,l){if(r&1&&(o(0,"mat-header-cell",52),c(1),a()),r&2){let e=m();n(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function fr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),a()),r&2){let e=l.$implicit;n(),p(" ",e.title," ")}}function Cr(r,l){if(r&1&&(o(0,"mat-header-cell",52),c(1),a()),r&2){let e=m();n(),p(" ",e.fieldsInfo.firstName==null?null:e.fieldsInfo.firstName.fieldTitle," ")}}function gr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),a()),r&2){let e=l.$implicit;n(),p(" ",e.firstName," ")}}function hr(r,l){if(r&1&&(o(0,"mat-header-cell",52),c(1),a()),r&2){let e=m();n(),p(" ",e.fieldsInfo.lastName==null?null:e.fieldsInfo.lastName.fieldTitle," ")}}function Sr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),a()),r&2){let e=l.$implicit;n(),p(" ",e.lastName," ")}}function _r(r,l){if(r&1&&(o(0,"mat-header-cell",52),c(1),a()),r&2){let e=m();n(),p(" ",e.fieldsInfo.countNumber==null?null:e.fieldsInfo.countNumber.fieldTitle," ")}}function Mr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),a()),r&2){let e=l.$implicit;n(),p(" ",e.countNumber," ")}}function br(r,l){if(r&1&&(o(0,"mat-header-cell",52),c(1),a()),r&2){let e=m();n(),p(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function vr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),u(2,"localeDate"),a()),r&2){let e=l.$implicit;n(),p(" ",f(2,1,e.createdDate)," ")}}function Ir(r,l){if(r&1&&(o(0,"mat-header-cell",52),c(1),a()),r&2){let e=m();n(),p(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function yr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),u(2,"localeDate"),a()),r&2){let e=l.$implicit;n(),p(" ",f(2,1,e.updatedDate)," ")}}function Er(r,l){r&1&&(o(0,"mat-header-cell"),c(1),u(2,"translate"),a()),r&2&&(n(),p(" ",f(2,1,"TITLE.OPTION")," "))}function Tr(r,l){if(r&1&&(o(0,"mat-cell",53)(1,"button",54)(2,"mat-icon"),c(3,"more_vert"),a()(),y(4,"mat-menu",null,2),a()),r&2){let e=D(5);n(),S("matMenuTriggerFor",e)}}function xr(r,l){if(r&1){let e=T();o(0,"mat-header-cell")(1,"mat-checkbox",55),u(2,"translate"),I("change",function(t){g(e);let s=m();return h(s.onSelectAllChange(t))}),a()()}if(r&2){let e=m();n(),S("checked",e.isAllSelected)("indeterminate",e.selectedRowsForBulkDelete.size>0&&e.selectedRowsForBulkDelete.size<e.tableSource.data.length),Se("aria-label",f(2,3,"ACTION.SELECT"))}}function wr(r,l){if(r&1){let e=T();o(0,"mat-cell")(1,"mat-checkbox",56),u(2,"translate"),I("change",function(t){let s=g(e).$implicit,C=m();return h(C.onCheckboxChange(s,t))})("click",function(t){return g(e),h(t.stopPropagation())}),a()()}if(r&2){let e=l.$implicit,i=m();n(),S("checked",i.isRowSelected(e.id)),Se("aria-label",f(2,2,"ACTION.SELECT"))}}function Ar(r,l){r&1&&y(0,"mat-header-row")}function Rr(r,l){if(r&1){let e=T();o(0,"mat-row",57),I("click",function(t){let s=g(e).$implicit,C=m();return h(C.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=g(e).$implicit,C=m();return h(C.onActionTableRowSelect(s,t))}),a()}if(r&2){let e=l.$implicit,i=m();ae("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var st=class st extends Vt{constructor(e,i,t,s,C,d,E,k,B,oe,Pe,Or){super(e,new le,Pe,d,B);this.contentService=e;this.cmsToastrService=i;this.cmsConfirmationDialogService=t;this.router=s;this.activatedRoute=C;this.tokenHelper=d;this.cdr=E;this.cmsStoreService=k;this.translate=B;this.pageInfo=oe;this.publicHelper=Pe;this.dialog=Or;this.requestLinkCategoryId="";this.constructorInfoAreaId=this.constructor.name;this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.categoryModelSelected=new j;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","title","firstName","lastName","countNumber"];this.tabledisplayedColumnsMobileSource=["id","title","firstName","lastName"];this.selectedRowsForBulkDelete=new Set;this.isAllSelected=!1;this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkCategoryId=this.activatedRoute.snapshot.paramMap.get("LinkCategoryId"),this.optionsSearch.parentMethods={onSubmit:Fe=>this.onSubmitOptionsSearch(Fe)},this.filteModelContent.sortColumn="id",this.filteModelContent.sortType=mt.Descending,this.requestLinkCategoryId&&this.requestLinkCategoryId.length>0){let Fe=new de;Fe.propertyName="ContentCategores",Fe.propertyAnyName="LinkCategoryId",Fe.value=this.requestLinkCategoryId,this.filteModelContent.filters.push(Fe)}}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>re(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}filterModelCompiler(e){let i=JSON.parse(JSON.stringify(e));return this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),i}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tabledisplayedColumns.indexOf("select")===-1&&this.tabledisplayedColumns.push("select"),this.tableRowsSelected=[],this.selectedRowsForBulkDelete.clear(),this.isAllSelected=!1,this.onActionTableRowSelect(new le);let i=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(i,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let t=this.filterModelCompiler(this.filteModelContent);this.categoryModelSelected&&this.categoryModelSelected.id?.length>0?(this.contentService.setAccessLoad(),this.contentService.ServiceGetAllWithHierarchyCategoryId(this.categoryModelSelected.id,t).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorMessage(s.errorMessage),this.publicHelper.processService.processStop(i)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(i,!1)}})):(this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(t).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorMessage(s.errorMessage),this.publicHelper.processService.processStop(i)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(i,!1)}}))}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=mt.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=mt.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=mt.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){let e=new ft;e.disableClose=!0,e.autoFocus=!0,e.height="90%",e.data={linkCategoryId:this.categoryModelSelected?.id},this.dialog.open($e,e).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonImport(){this.router.navigate(["/contact/content/import"])}onActionButtonEditRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}let i=new ft;i.disableClose=!0,i.autoFocus=!0,i.height="90%",i.data={id:this.tableRowSelected.id},this.dialog.open(it,i).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(C,d,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:d=>{d.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(E=>{i.set(E,0)}),this.translate.get("MESSAGE.All").subscribe(E=>{i.set(E,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(E=>{this.publicHelper.processService.processStart(t,E,this.constructorInfoAreaId)});var s=this.filterModelCompiler(this.filteModelContent);if(this.categoryModelSelected&&this.categoryModelSelected.id?.length>0){let E=new de;E.propertyName="ContentCategores",E.propertyAnyName="LinkCategoryId",E.value=this.categoryModelSelected.id,s.filters.push(E)}this.contentService.ServiceGetCount(s).subscribe({next:E=>{E.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{i.set(k,E.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(E.errorMessage),this.publicHelper.processService.processStop(t)},error:E=>{this.cmsToastrService.typeError(E),this.publicHelper.processService.processStop(t,!1)}});let C=this.filterModelCompiler(this.filteModelContent),d=new de;if(d.propertyName="recordStatus",d.value=hi.Available,C.filters.push(d),this.categoryModelSelected&&this.categoryModelSelected.id?.length>0){let E=new de;E.propertyName="ContentCategores",E.propertyAnyName="LinkCategoryId",E.value=this.categoryModelSelected.id,C.filters.push(E)}this.contentService.ServiceGetCount(C).subscribe({next:E=>{E.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{i.set(k,E.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(E.errorMessage),this.publicHelper.processService.processStop(t)},error:E=>{this.cmsToastrService.typeError(E),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onCheckboxChange(e,i){i.checked?this.selectedRowsForBulkDelete.add(e.id):this.selectedRowsForBulkDelete.delete(e.id),this.updateSelectAllState()}isRowSelected(e){return this.selectedRowsForBulkDelete.has(e)}onSelectAllChange(e){this.isAllSelected=e.checked,this.isAllSelected?this.tableSource.data.forEach(i=>{i.id&&this.selectedRowsForBulkDelete.add(i.id)}):this.selectedRowsForBulkDelete.clear()}updateSelectAllState(){if(this.tableSource.data.length===0){this.isAllSelected=!1;return}let e=this.tableSource.data.every(i=>this.selectedRowsForBulkDelete.has(i.id));this.isAllSelected=e}getSelectedCount(){return this.selectedRowsForBulkDelete.size}onActionButtonBulkDelete(){if(this.selectedRowsForBulkDelete.size===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var e="",i="";let t=this.selectedRowsForBulkDelete.size;this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{e=s["MESSAGE.Please_Confirm"],i=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+t+" \u0622\u06CC\u062A\u0645 \u0627\u0646\u062A\u062E\u0627\u0628 \u0634\u062F\u0647 ) "}),this.cmsConfirmationDialogService.confirm(e,i).then(s=>{if(s){let C=this.constructor.name+"BulkDelete";this.translate.get("MESSAGE.Receiving_information").subscribe(E=>{this.publicHelper.processService.processStart(C,E,this.constructorInfoAreaId)});let d=Array.from(this.selectedRowsForBulkDelete);this.contentService.ServiceDeleteList(d).subscribe({next:E=>{E.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.selectedRowsForBulkDelete.clear(),this.isAllSelected=!1,this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:E=>{this.cmsToastrService.typeError(E),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}};st.\u0275fac=function(i){return new(i||st)(_(pe),_(G),_(Ye),_(gi),_(fi),_(Ae),_(L),_(Ue),_(V),_(kt),_(H),_(ze))},st.\u0275cmp=N({type:st,selectors:[["app-contact-content-list"]],standalone:!1,features:[J],decls:72,vars:36,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],[1,"fa-solid","fa-file-import","font-18",2,"color","#ffffff"],["cms-action-main",""],[1,"col-4"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","title"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","countNumber"],["matColumnDef","createdDate"],["matColumnDef","updatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],["matColumnDef","select"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[1,"fa-solid","fa-trash-can","font-18",2,"color","#ff0000"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"click"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash-can","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"change","checked","indeterminate"],[3,"change","click","checked"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=T();o(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(d){return g(s),w(t.viewGuideNotice,d)||(t.viewGuideNotice=d),h(d)}),I("optionOnActionButtonMemoRow",function(){return g(s),h(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),h(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),h(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),h(t.onActionButtonPrintRow())}),O(1,4),o(2,"app-contact-category-tree",5),I("optionChange",function(d){return g(s),h(t.onActionSelectorSelect(d))}),a(),P(),ke(3,6)(4,7),O(5,8),b(6,nr,4,4,"a",9),o(7,"a",10),I("click",function(){return g(s),h(t.viewGuideNotice=!t.viewGuideNotice)}),y(8,"i",11),a(),o(9,"a",10),I("click",function(){return g(s),h(t.onActionButtonReload())}),y(10,"i",12),a(),P(),O(11,13),o(12,"a",14),I("click",function(){return g(s),h(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),y(13,"mat-slide-toggle",15),c(14),u(15,"translate"),a(),o(16,"a",14),I("click",function(){return g(s),h(t.onActionButtonStatist())}),y(17,"mat-slide-toggle",15),c(18),u(19,"translate"),a(),o(20,"a",14),I("click",function(){return g(s),h(t.onActionButtonImport())}),y(21,"i",16),c(22),u(23,"translate"),a(),P(),O(24,17),b(25,or,7,3,"div",18),b(26,rr,7,3,"div",18),b(27,ar,7,4,"div",18),P(),O(28,19),b(29,lr,7,3,"div",18),b(30,sr,7,3,"div",18),P(),O(31,20),o(32,"app-cms-search-list",21),A("optionsChange",function(d){return g(s),w(t.optionsSearch,d)||(t.optionsSearch=d),h(d)}),a(),o(33,"app-cms-statist-list",21),A("optionsChange",function(d){return g(s),w(t.optionsStatist,d)||(t.optionsStatist=d),h(d)}),a(),P(),O(34,22),o(35,"mat-table",23,0),I("matSortChange",function(){g(s);let d=D(36);return h(t.onTableSortData(d))}),O(37,24),W(38,cr,2,1,"mat-header-cell",25)(39,dr,2,1,"mat-cell",26),P(),O(40,27),W(41,pr,2,1,"mat-header-cell",25)(42,mr,4,5,"mat-cell",26),P(),O(43,28),W(44,ur,2,1,"mat-header-cell",25)(45,fr,2,1,"mat-cell",26),P(),O(46,29),W(47,Cr,2,1,"mat-header-cell",25)(48,gr,2,1,"mat-cell",26),P(),O(49,30),W(50,hr,2,1,"mat-header-cell",25)(51,Sr,2,1,"mat-cell",26),P(),O(52,31),W(53,_r,2,1,"mat-header-cell",25)(54,Mr,2,1,"mat-cell",26),P(),O(55,32),W(56,br,2,1,"mat-header-cell",25)(57,vr,3,3,"mat-cell",26),P(),O(58,33),W(59,Ir,2,1,"mat-header-cell",25)(60,yr,3,3,"mat-cell",26),P(),O(61,34),W(62,Er,3,3,"mat-header-cell",35)(63,Tr,6,1,"mat-cell",36),P(),O(64,37),W(65,xr,3,5,"mat-header-cell",35)(66,wr,3,4,"mat-cell",26),P(),W(67,Ar,1,0,"mat-header-row",38)(68,Rr,1,2,"mat-row",39),a(),P(),O(69,40),o(70,"mat-paginator",41,1),I("page",function(d){return g(s),h(t.onTablePageingData(d))}),a(),P(),a()}i&2&&(S("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","contact.content.list"),x("optionActionGuideNoticeDisplay",t.viewGuideNotice),S("optionTreeDisplay",!t.requestLinkCategoryId||t.requestLinkCategoryId.length===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),n(6),v(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow&&t.selectedRowsForBulkDelete.size>0?6:-1),n(4),ae("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),n(3),S("checked",t.optionsSearch.data.show),n(),p("",f(15,29,"ACTION.SEARCH")," "),n(3),S("checked",t.optionsStatist.data.show),n(),p("",f(19,31,"ACTION.STATIST")," "),n(4),p(" ",f(23,33,"ACTION.IMPORT")," "),n(3),v(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?25:-1),n(),v(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?26:-1),n(),v(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow&&t.selectedRowsForBulkDelete.size>0?27:-1),n(2),v(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?29:-1),n(),v(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?30:-1),n(2),x("options",t.optionsSearch),n(),x("options",t.optionsStatist),n(2),S("dataSource",t.tableSource),n(32),S("matHeaderRowDef",t.tabledisplayedColumns),n(),S("matRowDefColumns",t.tabledisplayedColumns),n(2),S("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",pi(35,ir)))},dependencies:[qe,Tt,we,ji,Wi,zi,Yi,Ki,Ji,Xi,$i,on,en,Zi,rn,tn,nn,an,ln,un,fn,Cn,gn,zt,bt,F,hn,Sn],encapsulation:2});var Ut=st;var Dr=[{path:"",component:Gt,data:{title:"ROUTE.CONTACT"},children:[{path:"config",loadChildren:()=>import("./chunk-DBPBJ5XI.js").then(r=>r.ContactConfigModule),data:{title:"ROUTE.CONTACT"}},{path:"content",component:Ut,data:{title:"ROUTE.CONTACT"}},{path:"content/add/:CategoryId",component:$e,data:{title:"ROUTE.CONTACT"}},{path:"content/edit/:id",component:it,data:{title:"ROUTE.CONTACT"}},{path:"content/import",component:Ht,data:{title:"ROUTE.CONTACT"}}]}],Le=class Le{};Le.\u0275fac=function(e){return new(e||Le)},Le.\u0275mod=Mt({type:Le}),Le.\u0275inj=_t({imports:[Kt.forChild(Dr),Kt]});var Qt=Le;var Ve=class Ve{};Ve.\u0275fac=function(e){return new(e||Ve)},Ve.\u0275mod=Mt({type:Ve}),Ve.\u0275inj=_t({providers:[Si,q,vi,_i,Ye,U,pe,We],imports:[ui,Qt,Ei,Ti.withConfig({warnOnNgModelWithFormControl:"never"}),dn,mn,cn]});var In=Ve;export{In as ContactModule};
