import{a as gt}from"./chunk-VUTOZI3K.js";import{a as vi}from"./chunk-XWFZ3L2H.js";import{a as ft}from"./chunk-775PCYXF.js";import{a as vt}from"./chunk-Z24YCPDY.js";import{a as vn}from"./chunk-L7YQRCUL.js";import{a as nt}from"./chunk-K33TURJC.js";import{a as _n}from"./chunk-ZQS5NAG4.js";import{a as ot}from"./chunk-AMUOTFQZ.js";import{a as ke}from"./chunk-JEF4OJ24.js";import{a as ut}from"./chunk-Z6MCA55N.js";import{d as et,e as tt,f as it,i as xe}from"./chunk-KI4BYTXY.js";import{a as ht}from"./chunk-R5IOBYDR.js";import{a as Oe}from"./chunk-UJ7M5GGB.js";import{a as qt}from"./chunk-W4QJTKOP.js";import{b as dt,d as Ze}from"./chunk-LGQ64WON.js";import{b as gn}from"./chunk-3RHHJRHJ.js";import"./chunk-7DUNEHBM.js";import{a as pt}from"./chunk-T2SWGMVG.js";import"./chunk-5OYG6RKY.js";import{a as Xe}from"./chunk-4CWCAOGK.js";import"./chunk-HGNWVODT.js";import{a as re,d as Ye}from"./chunk-A6ZARURL.js";import{e as Ae,f as H}from"./chunk-JNTEQNXZ.js";import{$ as sn,A as he,B as en,Ba as fe,Cb as B,Da as Je,Db as O,Fa as dn,Ga as pn,H as tn,Ha as un,I as on,Ia as fn,J as nn,Ja as Sn,Ka as Pe,La as Be,M as rn,Oa as $e,Qb as Cn,Ua as Ke,V as an,Wa as _e,Xa as ve,da as ln,ea as cn,eb as be,fa as mn,fb as Me,gb as Ie,hb as Ee,ib as we,jb as ye,kb as Te,lb as Le,ma as oe,mb as Re,na as ne,nb as De,oa as ge,pb as co,rc as G,s as _i,uc as W,v as Zo,wc as q,zc as hn}from"./chunk-UI6VEI3C.js";import{B as so,C as lo,F as Yo,G as Xo,c as qe,h as Qe,i as lt,k as ct,m as ze,n as mt,u as Ci,v as hi,x as gi}from"./chunk-QRBNL5ZA.js";import{$a as Ht,H as j,K as st,Mn as Q,N as mi,O as di,P as Vt,Q as pi,R as Pt,S as Bt,T as Ot,U as Gt,Wb as We,X as ui,Y as ao,Za as fi,_a as Si,ab as Ft,ba as $,bb as Ki,cb as jt,d as Fe,db as Ut,e as $o,eb as Wt,f as je,fa as Ko,ic as wt,l as Po,m as Ue,p as ci,q as F,u as N,v as Ve}from"./chunk-5ABB5WE5.js";import{$ as It,Ab as L,Ad as Jo,C as Fo,Cb as xt,Db as kt,Dc as h,Eb as Nt,Ec as g,Fb as _,Fc as Et,Gb as a,Hb as r,Ib as v,Mb as M,Nb as I,Ob as K,Pb as y,Qa as rt,Sb as E,Ub as C,Va as s,Xc as P,Yb as Z,Z as jo,Zb as ee,_b as te,cb as p,cc as J,ec as ie,f as li,ga as io,hc as l,ib as V,ic as z,jb as oo,jc as d,ld as He,mb as X,md as Wo,nc as R,nd as qo,ob as w,oc as D,pa as f,pc as A,qa as S,rd as ro,tc as Uo,td as at,ud as Qo,vd as zo,xc as Ge,yc as no,zb as T}from"./chunk-2AL2II5Z.js";import{a as Go,b as Ho,i as U}from"./chunk-SEDBTTTN.js";var In=["vform"];function En(i,n){if(i&1&&(a(0,"div"),v(1,"div",17),h(2,"prettyjson"),r()),i&2){let e=C();s(),_("innerHTML",g(2,1,e.dataModel),rt)}}function wn(i,n){if(i&1){let e=y();a(0,"div",16)(1,"button",18),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",19),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var bi=class bi extends ut{constructor(e,o,t,c,u,m,b,k,Y,Ce){super(c,new fi,Y,Ce);this.data=e;this.dialogRef=o;this.coreEnumService=t;this.coreLogAvoidDuplicateDataEntryService=c;this.cmsToastrService=u;this.tokenHelper=m;this.cmsStoreService=b;this.cdr=k;this.publicHelper=Y;this.translate=Ce;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ci;this.dataModel=new fi;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(e,o,this.constructorInfoAreaId)}),this.coreLogAvoidDuplicateDataEntryService.setAccessLoad(),this.coreLogAvoidDuplicateDataEntryService.setAccessDataType(st.Editor),this.coreLogAvoidDuplicateDataEntryService.ServiceGetOneById(this.requestId).subscribe({next:o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access),this.dataModel=o.item,o.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+o.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=o.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.publicHelper.processService.processStop(e)},error:o=>{this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};bi.\u0275fac=function(o){return new(o||bi)(p(ne),p(oe),p($),p(mi),p(q),p(W),p(G),p(P),p(H),p(B))},bi.\u0275cmp=V({type:bi,selectors:[["app-core-log-avoid-duplicate-edit"]],viewQuery:function(o,t){if(o&1&&Z(In,5),o&2){let c;ee(c=te())&&(t.formGroup=c.first)}},standalone:!1,features:[X],decls:31,vars:20,consts:[["vform","ngForm"],["ModuleName",""],["ModuleEntityName",""],["ModuleEntityId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleName","placeholder","ModuleName","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityName","placeholder","ModuleEntityName","id","dataModel.moduleEntityName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityId",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityId","placeholder","ModuleEntityId","id","dataModel.moduleEntityId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"form-actions"],[3,"innerHTML"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(o,t){if(o&1){let c=y();a(0,"div",4),v(1,"app-progress-spinner",5),a(2,"div",6)(3,"p",7),l(4),r(),a(5,"p"),l(6),h(7,"translate"),r(),a(8,"form",null,0),v(10,"app-cms-user-selector",8),h(11,"translate"),v(12,"app-cms-member-selector",8),h(13,"translate"),a(14,"div",9)(15,"label",10),l(16,"ModuleName"),r(),a(17,"input",11,1),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleName,m)||(t.dataModel.moduleName=m),S(m)}),r()(),a(19,"div",9)(20,"label",12),l(21,"ModuleEntityName"),r(),a(22,"input",13,2),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleEntityName,m)||(t.dataModel.moduleEntityName=m),S(m)}),r()(),a(24,"div",9)(25,"label",14),l(26,"EntityId"),r(),a(27,"input",15,3),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleEntityId,m)||(t.dataModel.moduleEntityId=m),S(m)}),r()(),T(29,En,3,3,"div"),T(30,wn,5,3,"div",16),r()()()}o&2&&(s(),_("optionsInfoAreaId",t.constructorInfoAreaId),s(3),d(" ",t.formInfo.formTitle," "),s(2),d(" ",g(7,14,"TITLE.Be_Careful_When_Entering_Information")," "),s(4),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",g(11,16,"TITLE.USER")),s(2),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkMemberId)("optionPlaceholder",g(13,18,"TITLE.Member")),s(5),R("ngModel",t.dataModel.moduleName),s(5),R("ngModel",t.dataModel.moduleEntityName),s(5),R("ngModel",t.dataModel.moduleEntityId),s(2),L(t.tokenInfo.access.userAccessAdminAllowToProfessionalData?29:-1),s(),L(t.formInfo.submitButtonEnabled?30:-1))},dependencies:[mt,qe,Qe,lt,ze,ct,Je,ht,gt,re,O,pt],encapsulation:2});var mo=bi;var yn=()=>[5,10,20,100];function Tn(i,n){if(i&1){let e=y();a(0,"div",16)(1,"a",44),E("click",function(){f(e);let t=C();return S(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",45)(3,"br"),r(),a(4,"p",19),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.EDIT")," "))}function Ln(i,n){if(i&1){let e=y();a(0,"div",16)(1,"a",46),E("click",function(){f(e);let t=C();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",47)(3,"br"),r(),a(4,"p",19),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.DELETE")," "))}function Rn(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Dn(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.id," ")}}function An(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function xn(i,n){if(i&1&&(a(0,"mat-cell",49),h(1,"statusCellClass"),v(2,"i",49),h(3,"statusIconClass"),r()),i&2){let e=n.$implicit;_("ngClass",g(1,2,e.recordStatus)),s(2),_("ngClass",g(3,4,e.recordStatus))}}function kn(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function Nn(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmsuserinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.linkUserId))," ")}}function Vn(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkMemberUserId==null?null:e.fieldsInfo.linkMemberUserId.fieldTitle," ")}}function Pn(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.linkMemberUserId," ")}}function Bn(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.moduleName==null?null:e.fieldsInfo.moduleName.fieldTitle," ")}}function On(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.moduleName," ")}}function Gn(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.moduleEntityName==null?null:e.fieldsInfo.moduleEntityName.fieldTitle," ")}}function Hn(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.moduleEntityName," ")}}function Fn(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.moduleEntityId==null?null:e.fieldsInfo.moduleEntityId.fieldTitle," ")}}function jn(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.moduleEntityId," ")}}function Un(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Wn(i,n){if(i&1&&(a(0,"mat-cell",50),l(1),h(2,"localeDateTime"),r()),i&2){let e=n.$implicit;s(),d(" ",g(2,1,e.createdDate)," ")}}function qn(i,n){i&1&&(a(0,"mat-header-cell"),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"TITLE.OPTION")," "))}function Qn(i,n){if(i&1&&(a(0,"mat-cell",51)(1,"button",52)(2,"mat-icon"),l(3,"more_vert"),r()(),v(4,"mat-menu",null,2),r()),i&2){let e=J(5);s(),_("matMenuTriggerFor",e)}}function zn(i,n){i&1&&v(0,"mat-header-row")}function Jn(i,n){if(i&1){let e=y();a(0,"mat-row",53),E("click",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))})("rtclick",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))}),r()}if(i&2){let e=n.$implicit,o=C();ie("ntk-row-selected",e.id===(o.tableRowSelected==null?null:o.tableRowSelected.id))}}var Ii=class Ii extends et{constructor(e,o,t,c,u,m,b,k,Y,Ce,_t,Ct){super(e,new fi,_t,Y,k);this.contentService=e;this.cmsToastrService=o;this.cmsConfirmationDialogService=t;this.activatedRoute=c;this.router=u;this.cdr=m;this.cmsStoreService=b;this.translate=k;this.tokenHelper=Y;this.pageInfo=Ce;this.publicHelper=_t;this.dialog=Ct;this.requestLinkUserId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new Ve;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","ModuleName","ModuleEntityName","linkUserId","LinkMemberUserId","ModuleEntityId","createdDate"];this.tabledisplayedColumnsMobileSource=["id","ModuleName","ModuleEntityName","linkUserId","LinkMemberUserId","ModuleEntityId","createdDate"];this.dataModelEnumManageUserAccessAreaTypesResult=new F;this.dataModelEnumManageUserAccessUserTypesResult=new F;this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestLinkUserId>0){let se=new N;se.propertyName="linkUserId",se.value=this.requestLinkUserId,this.filteModelContent.filters.push(se)}this.optionsSearch.parentMethods={onSubmit:se=>this.onSubmitOptionsSearch(se)},this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending}ngOnInit(){this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))),this.getEnumManageUserAccessAreaTypes(),this.getEnumManageUserAccessUserTypes()}getEnumManageUserAccessAreaTypes(){}getEnumManageUserAccessUserTypes(){}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}filterModelCompiler(e){let o=JSON.parse(JSON.stringify(e));return this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(o.filters=[...this.filterDataModelQueryBuilder]),o}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new fi);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let o=this.filterModelCompiler(this.filteModelContent);this.contentService.ServiceGetAllEditor(o).subscribe({next:t=>{t.isSuccess&&(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(mo,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var o="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{o=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(o,t).then(c=>{if(c){let u=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(u,m,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:m=>{m.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(u)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(u,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let o=new Map;this.translate.get("MESSAGE.Active").subscribe(b=>{o.set(b,0)}),this.translate.get("MESSAGE.All").subscribe(b=>{o.set(b,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(b=>{this.publicHelper.processService.processStart(t,b,this.constructorInfoAreaId)});let c=this.filterModelCompiler(this.filteModelContent);this.contentService.ServiceGetCount(c).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}});let u=this.filterModelCompiler(this.filteModelContent),m=new N;m.propertyName="recordStatus",m.value=Ue.Available,u.filters.push(m),this.contentService.ServiceGetCount(u).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkUserId||this.tableRowSelected.linkUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkUserId])}onActionButtonViewMemberRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkMemberId||this.tableRowSelected.linkMemberId===""){this.translate.get("MESSAGE.Content_does_not_include_device_information").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/member/user/edit",this.tableRowSelected.linkMemberId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};Ii.\u0275fac=function(o){return new(o||Ii)(p(mi),p(q),p(Oe),p(Fe),p(je),p(P),p(G),p(B),p(W),p(Ae),p(H),p(ge))},Ii.\u0275cmp=V({type:Ii,selectors:[["app-core-log-avoid-duplicate-list"]],standalone:!1,features:[X],decls:75,vars:35,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-id-card-clip","font-18",2,"color","#ffffff"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","linkUserId"],["matColumnDef","LinkMemberUserId"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","ModuleEntityId"],["matColumnDef","createdDate"],["style","direction: ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(o,t){if(o&1){let c=y();a(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(m){return f(c),D(t.viewGuideNotice,m)||(t.viewGuideNotice=m),S(m)}),E("optionOnActionButtonMemoRow",function(){return f(c),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),S(t.onActionButtonPrintRow())}),M(1,4),l(2," -------------------------------------- "),I(),K(3,5)(4,6),M(5,7),a(6,"a",8),E("click",function(){return f(c),S(t.viewGuideNotice=!t.viewGuideNotice)}),v(7,"i",9),r(),a(8,"a",8),E("click",function(){return f(c),S(t.onActionButtonReload())}),v(9,"i",10),r(),I(),M(10,11),a(11,"a",12),E("click",function(){return f(c),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(12,"mat-slide-toggle",13),l(13),h(14,"translate"),r(),a(15,"a",12),E("click",function(){return f(c),S(t.onActionButtonStatist())}),v(16,"mat-slide-toggle",13),l(17),h(18,"translate"),r(),I(),K(19,14),M(20,15),T(21,Tn,7,3,"div",16),T(22,Ln,7,3,"div",16),a(23,"div",16)(24,"a",17),E("click",function(){return f(c),S(t.onActionButtonViewUserRow(t.tableRowSelected))}),v(25,"i",18)(26,"br"),r(),a(27,"p",19),l(28),h(29,"translate"),r()(),a(30,"div",16)(31,"a",17),E("click",function(){return f(c),S(t.onActionButtonViewMemberRow(t.tableRowSelected))}),v(32,"i",20)(33,"br"),r(),a(34,"p",19),l(35),h(36,"translate"),r()(),I(),M(37,21),a(38,"app-cms-search-list",22),A("optionsChange",function(m){return f(c),D(t.optionsSearch,m)||(t.optionsSearch=m),S(m)}),r(),a(39,"app-cms-statist-list",22),A("optionsChange",function(m){return f(c),D(t.optionsStatist,m)||(t.optionsStatist=m),S(m)}),r(),I(),M(40,23),a(41,"mat-table",24,0),E("matSortChange",function(){f(c);let m=J(42);return S(t.onTableSortData(m))}),M(43,25),w(44,Rn,2,1,"mat-header-cell",26)(45,Dn,2,1,"mat-cell",27),I(),M(46,28),w(47,An,2,1,"mat-header-cell",26)(48,xn,4,6,"mat-cell",29),I(),M(49,30),w(50,kn,2,1,"mat-header-cell",26)(51,Nn,4,5,"mat-cell",27),I(),M(52,31),w(53,Vn,2,1,"mat-header-cell",26)(54,Pn,2,1,"mat-cell",27),I(),M(55,32),w(56,Bn,2,1,"mat-header-cell",26)(57,On,2,1,"mat-cell",27),I(),M(58,33),w(59,Gn,2,1,"mat-header-cell",26)(60,Hn,2,1,"mat-cell",27),I(),M(61,34),w(62,Fn,2,1,"mat-header-cell",26)(63,jn,2,1,"mat-cell",27),I(),M(64,35),w(65,Un,2,1,"mat-header-cell",26)(66,Wn,3,3,"mat-cell",36),I(),M(67,37),w(68,qn,3,3,"mat-header-cell",38)(69,Qn,6,1,"mat-cell",39),I(),w(70,zn,1,0,"mat-header-row",40)(71,Jn,1,2,"mat-row",41),r(),I(),M(72,42),a(73,"mat-paginator",43,1),E("page",function(m){return f(c),S(t.onTablePageingData(m))}),r(),I(),r()}o&2&&(_("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),R("optionActionGuideNoticeDisplay",t.viewGuideNotice),_("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),s(9),ie("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),s(3),_("checked",t.optionsSearch.data.show),s(),d("",g(14,26,"ACTION.SEARCH")," "),s(3),_("checked",t.optionsStatist.data.show),s(),d("",g(18,28,"ACTION.STATIST")," "),s(4),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?21:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?22:-1),s(6),d(" ",g(29,30,"ACTION.USER")," "),s(7),d(" ",g(36,32,"ACTION.MEMBER")," "),s(3),R("options",t.optionsSearch),s(),R("options",t.optionsStatist),s(2),_("dataSource",t.tableSource),s(29),_("matHeaderRowDef",t.tabledisplayedColumns),s(),_("matRowDefColumns",t.tabledisplayedColumns),s(2),_("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Ge(34,yn)))},dependencies:[He,he,fe,Pe,Be,$e,Ke,_e,ve,be,Ie,Te,Ee,Me,Le,we,ye,Re,De,tt,it,xe,ke,at,O,dt,Ze,ot,nt],encapsulation:2});var Zi=Ii;var wi=class wi{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};wi.\u0275fac=function(e){return new(e||wi)},wi.\u0275cmp=V({type:wi,selectors:[["app-corelog"]],standalone:!1,decls:1,vars:0,template:function(e,o){e&1&&v(0,"router-outlet")},dependencies:[$o],encapsulation:2});var po=wi;var $n=["vform"];function Kn(i,n){if(i&1){let e=y();a(0,"div",7)(1,"button",8),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",9),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var yi=class yi{constructor(n,e,o,t,c,u,m,b,k,Y){this.data=n;this.dialogRef=e;this.coreEnumService=o;this.coreLogCurrencyService=t;this.cmsToastrService=c;this.publicHelper=u;this.cdr=m;this.tokenHelper=b;this.cmsStoreService=k;this.translate=Y;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new We;this.dataModelResult=new F;this.dataModel=new Ki;this.formInfo=new Ye;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,n&&(this.requestId=n.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(n=>{this.formInfo.formTitle=n}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(n=>n.tokenInfoStore).subscribe(n=>U(this,null,function*(){this.tokenInfo=n})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(n=>n.unsubscribe())}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage="";let n=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(n,e,this.constructorInfoAreaId)}),this.coreLogCurrencyService.setAccessLoad(),this.coreLogCurrencyService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(n)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(n,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};yi.\u0275fac=function(e){return new(e||yi)(p(ne),p(oe),p($),p(di),p(q),p(H),p(P),p(W),p(G),p(B))},yi.\u0275cmp=V({type:yi,selectors:[["app-core-log-currency-view"]],viewQuery:function(e,o){if(e&1&&Z($n,5),e&2){let t;ee(t=te())&&(o.formGroup=t.first)}},standalone:!1,decls:9,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[3,"formInfo"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,o){e&1&&(a(0,"div",0),l(1),r(),a(2,"div",1),v(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),r(),a(5,"div",4),v(6,"app-cms-form-result-message",5),r(),a(7,"div",6),T(8,Kn,5,3,"div",7),r()),e&2&&(s(),d(" ",o.formInfo.formTitle," "),s(2),_("optionsInfoAreaId",o.constructorInfoAreaId),s(),_("dataModel",o.dataModel)("optionMethod",1),s(2),_("formInfo",o.formInfo),s(2),L(o.formInfo.submitButtonEnabled?8:-1))},dependencies:[re,ft,Xe,O],encapsulation:2});var uo=yi;var Yn=()=>[5,10,20,100],Xn=i=>({display:i});function Zn(i,n){if(i&1){let e=y();a(0,"a",42),E("click",function(){f(e);let t=C();return S(t.onActionBackToParent())}),v(1,"i",43),r()}}function er(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",44),E("click",function(){f(e);let t=C();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",45)(3,"br"),r(),a(4,"p",46),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.DELETE")," "))}function tr(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",47),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewRow())}),v(2,"i",48)(3,"br"),r(),a(4,"p",46),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.VIEW")," "))}function ir(i,n){if(i&1&&(a(0,"mat-header-cell",49),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function or(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.id," ")}}function nr(i,n){if(i&1&&(a(0,"mat-header-cell",49),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.mainId==null?null:e.fieldsInfo.mainId.fieldTitle," ")}}function rr(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.mainId," ")}}function ar(i,n){if(i&1&&(a(0,"mat-header-cell",49),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function sr(i,n){if(i&1&&v(0,"select",51),i&2){let e=C().$implicit,o=C();_("contentService",o.contentService)("row",e)("ngStyle",no(3,Xn,e.id===(o.tableRowSelected==null?null:o.tableRowSelected.id)?"":"none"))}}function lr(i,n){if(i&1&&(a(0,"mat-cell",50),h(1,"statusCellClass"),v(2,"i",50),h(3,"statusIconClass"),T(4,sr,1,5,"select",51),r()),i&2){let e=n.$implicit,o=C();_("ngClass",g(1,3,e.recordStatus)),s(2),_("ngClass",g(3,5,e.recordStatus)),s(2),L(!(o.dataModelResult==null||o.dataModelResult.access==null)&&o.dataModelResult.access.accessEditRow?4:-1)}}function cr(i,n){if(i&1&&(a(0,"mat-header-cell",49),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function mr(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.title," ")}}function dr(i,n){if(i&1&&(a(0,"mat-header-cell",49),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.symbol==null?null:e.fieldsInfo.symbol.fieldTitle," ")}}function pr(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.symbol," ")}}function ur(i,n){if(i&1&&(a(0,"mat-header-cell",49),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.exchangeBuyRatio==null?null:e.fieldsInfo.exchangeBuyRatio.fieldTitle," ")}}function fr(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.exchangeBuyRatio," ")}}function Sr(i,n){if(i&1&&(a(0,"mat-header-cell",49),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.exchangeSaleRatio==null?null:e.fieldsInfo.exchangeSaleRatio.fieldTitle," ")}}function Cr(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.exchangeSaleRatio," ")}}function hr(i,n){if(i&1&&(a(0,"mat-header-cell",49),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.masterCurrency==null?null:e.fieldsInfo.masterCurrency.fieldTitle," ")}}function gr(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.masterCurrency," ")}}function _r(i,n){if(i&1&&(a(0,"mat-header-cell",49),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function vr(i,n){if(i&1&&(a(0,"mat-cell",52),l(1),h(2,"localeDateTime"),r()),i&2){let e=n.$implicit;s(),d(" ",g(2,1,e.createdDate)," ")}}function br(i,n){i&1&&(a(0,"mat-header-cell"),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"TITLE.OPTION")," "))}function Mr(i,n){if(i&1&&(a(0,"mat-cell",53)(1,"button",54)(2,"mat-icon"),l(3,"more_vert"),r()(),v(4,"mat-menu",null,2),r()),i&2){let e=J(5);s(),_("matMenuTriggerFor",e)}}function Ir(i,n){i&1&&v(0,"mat-header-row")}function Er(i,n){if(i&1){let e=y();a(0,"mat-row",55),E("click",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))})("rtclick",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))}),r()}if(i&2){let e=n.$implicit,o=C();ie("ntk-row-selected",e.id===(o.tableRowSelected==null?null:o.tableRowSelected.id))}}var Li=class Li extends et{constructor(e,o,t,c,u,m,b,k,Y,Ce,_t,Ct){super(e,new Ki,_t,u,b);this.contentService=e;this.cmsToastrService=o;this.cmsConfirmationDialogService=t;this.activatedRoute=c;this.tokenHelper=u;this.cdr=m;this.translate=b;this.cmsStoreService=k;this.router=Y;this.pageInfo=Ce;this.publicHelper=_t;this.dialog=Ct;this.requestLinkCurrencyId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new Ve;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","MainId","recordStatus","Symbol","ExchangeBuyRatio","ExchangeSaleRatio","MasterCurrency","createdDate"];this.tabledisplayedColumnsMobileSource=["id","MainId","recordStatus","Symbol","ExchangeBuyRatio","ExchangeSaleRatio","MasterCurrency","createdDate"];this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkCurrencyId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCurrencyId")),this.requestLinkCurrencyId>0){let se=new N;se.propertyName="MainId",se.value=this.requestLinkCurrencyId,this.filteModelContent.filters.push(se)}this.optionsSearch.parentMethods={onSubmit:se=>this.onSubmitOptionsSearch(se)},this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending}ngOnInit(){this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}filterModelCompiler(e){let o=JSON.parse(JSON.stringify(e));return this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(o.filters=[...this.filterDataModelQueryBuilder]),o}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ki);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let o=this.filterModelCompiler(this.filteModelContent);this.contentService.ServiceGetAllEditor(o).subscribe({next:t=>{t.isSuccess&&(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(uo,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var o="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{o=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(o,t).then(c=>{if(c){let u=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(u,m,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:m=>{m.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(u)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(u,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let o=new Map;this.translate.get("MESSAGE.Active").subscribe(b=>{o.set(b,0)}),this.translate.get("MESSAGE.All").subscribe(b=>{o.set(b,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(b=>{this.publicHelper.processService.processStart(t,b,this.constructorInfoAreaId)});let c=this.filterModelCompiler(this.filteModelContent);this.contentService.ServiceGetCount(c).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}});let u=this.filterModelCompiler(this.filteModelContent),m=new N;m.propertyName="recordStatus",m.value=Ue.Available,u.filters.push(m),this.contentService.ServiceGetCount(u).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/currency/"])}};Li.\u0275fac=function(o){return new(o||Li)(p(di),p(q),p(Oe),p(Fe),p(W),p(P),p(B),p(G),p(je),p(Ae),p(H),p(ge))},Li.\u0275cmp=V({type:Li,selectors:[["app-core-log-currency-list"]],standalone:!1,features:[X],decls:65,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],[1,"col-4"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","MainId"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","Symbol"],["matColumnDef","ExchangeBuyRatio"],["matColumnDef","ExchangeSaleRatio"],["matColumnDef","MasterCurrency"],["matColumnDef","createdDate"],["style","direction: ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(o,t){if(o&1){let c=y();a(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(m){return f(c),D(t.viewGuideNotice,m)||(t.viewGuideNotice=m),S(m)}),E("optionOnActionButtonMemoRow",function(){return f(c),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),S(t.onActionButtonPrintRow())}),M(1,4),l(2," -------------------------------------- "),I(),K(3,5)(4,6),M(5,7),T(6,Zn,2,0,"a",8),a(7,"a",9),E("click",function(){return f(c),S(t.viewGuideNotice=!t.viewGuideNotice)}),v(8,"i",10),r(),a(9,"a",9),E("click",function(){return f(c),S(t.onActionButtonReload())}),v(10,"i",11),r(),I(),M(11,12),a(12,"a",13),E("click",function(){return f(c),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(13,"mat-slide-toggle",14),l(14),h(15,"translate"),r(),a(16,"a",13),E("click",function(){return f(c),S(t.onActionButtonStatist())}),v(17,"mat-slide-toggle",14),l(18),h(19,"translate"),r(),I(),K(20,15),M(21,16),T(22,er,7,3,"div",17),T(23,tr,7,3,"div",17),I(),M(24,18),a(25,"app-cms-search-list",19),A("optionsChange",function(m){return f(c),D(t.optionsSearch,m)||(t.optionsSearch=m),S(m)}),r(),a(26,"app-cms-statist-list",19),A("optionsChange",function(m){return f(c),D(t.optionsStatist,m)||(t.optionsStatist=m),S(m)}),r(),I(),M(27,20),a(28,"mat-table",21,0),E("matSortChange",function(){f(c);let m=J(29);return S(t.onTableSortData(m))}),M(30,22),w(31,ir,2,1,"mat-header-cell",23)(32,or,2,1,"mat-cell",24),I(),M(33,25),w(34,nr,2,1,"mat-header-cell",23)(35,rr,2,1,"mat-cell",24),I(),M(36,26),w(37,ar,2,1,"mat-header-cell",23)(38,lr,5,7,"mat-cell",27),I(),M(39,28),w(40,cr,2,1,"mat-header-cell",23)(41,mr,2,1,"mat-cell",24),I(),M(42,29),w(43,dr,2,1,"mat-header-cell",23)(44,pr,2,1,"mat-cell",24),I(),M(45,30),w(46,ur,2,1,"mat-header-cell",23)(47,fr,2,1,"mat-cell",24),I(),M(48,31),w(49,Sr,2,1,"mat-header-cell",23)(50,Cr,2,1,"mat-cell",24),I(),M(51,32),w(52,hr,2,1,"mat-header-cell",23)(53,gr,2,1,"mat-cell",24),I(),M(54,33),w(55,_r,2,1,"mat-header-cell",23)(56,vr,3,3,"mat-cell",34),I(),M(57,35),w(58,br,3,3,"mat-header-cell",36)(59,Mr,6,1,"mat-cell",37),I(),w(60,Ir,1,0,"mat-header-row",38)(61,Er,1,2,"mat-row",39),r(),I(),M(62,40),a(63,"mat-paginator",41,1),E("page",function(m){return f(c),S(t.onTablePageingData(m))}),r(),I(),r()}o&2&&(_("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),R("optionActionGuideNoticeDisplay",t.viewGuideNotice),_("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),s(6),L(t.requestLinkCurrencyId>0?6:-1),s(4),ie("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),s(3),_("checked",t.optionsSearch.data.show),s(),d("",g(15,25,"ACTION.SEARCH")," "),s(3),_("checked",t.optionsStatist.data.show),s(),d("",g(19,27,"ACTION.STATIST")," "),s(4),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?22:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow&&(t.tableRowSelected==null||t.tableRowSelected.id==null?null:t.tableRowSelected.id.length)>0?23:-1),s(2),R("options",t.optionsSearch),s(),R("options",t.optionsStatist),s(2),_("dataSource",t.tableSource),s(32),_("matHeaderRowDef",t.tabledisplayedColumns),s(),_("matRowDefColumns",t.tabledisplayedColumns),s(2),_("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Ge(29,Yn)))},dependencies:[He,ro,he,fe,Je,Pe,Be,$e,Ke,_e,ve,be,Ie,Te,Ee,Me,Le,we,ye,Re,De,tt,it,xe,ke,_n,O,Ze,ot,nt],encapsulation:2});var to=Li;var wr=["vform"];function yr(i,n){if(i&1&&(a(0,"option",16),l(1),r()),i&2){let e=n.$implicit;_("value",e.value),s(),d(" ",e.description," ")}}function Tr(i,n){i&1&&(a(0,"mat-error"),l(1," SendStatusType is "),a(2,"strong"),l(3),h(4,"translate"),r()()),i&2&&(s(3),z(g(4,1,"content.required")))}function Lr(i,n){if(i&1&&(a(0,"div"),v(1,"div",35),h(2,"prettyjson"),r()),i&2){let e=C();s(),_("innerHTML",g(2,1,e.dataModel),rt)}}function Rr(i,n){if(i&1){let e=y();a(0,"div",34)(1,"button",36),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",37),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var Ri=class Ri extends ut{constructor(e,o,t,c,u,m,b,k,Y,Ce){super(c,new Ft,Y,Ce);this.data=e;this.dialogRef=o;this.coreEnumService=t;this.coreLogEmailService=c;this.cmsToastrService=u;this.tokenHelper=m;this.cmsStoreService=b;this.cdr=k;this.publicHelper=Y;this.translate=Ce;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new F;this.dataModel=new Ft;this.dataModelEnumSendEmailStatusTypeResult=new F;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e}))),this.getEnumSendEmailStatusType()}getEnumSendEmailStatusType(){this.coreEnumService.ServiceSendEmailStatusTypeEnum().subscribe({next:e=>{this.dataModelEnumSendEmailStatusTypeResult=e}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(e,o,this.constructorInfoAreaId)}),this.coreLogEmailService.setAccessLoad(),this.coreLogEmailService.setAccessDataType(st.Editor),this.coreLogEmailService.ServiceGetOneById(this.requestId).subscribe({next:o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access),this.dataModel=o.item,o.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+o.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=o.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.publicHelper.processService.processStop(e)},error:o=>{this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ri.\u0275fac=function(o){return new(o||Ri)(p(ne),p(oe),p($),p(Vt),p(q),p(W),p(G),p(P),p(H),p(B))},Ri.\u0275cmp=V({type:Ri,selectors:[["app-core-log-email-edit"]],viewQuery:function(o,t){if(o&1&&Z(wr,5),o&2){let c;ee(c=te())&&(t.formGroup=c.first)}},standalone:!1,features:[X],decls:70,vars:35,consts:[["vform","ngForm"],["SendStatusType","ngModel"],["ModuleName",""],["ModuleEntityName",""],["ModuleEntityId",""],["fromEmail",""],["toEmail",""],["emailSubject",""],["emailBody",""],["ReturnApi",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["id","dataModel.sendStatusType","name","dataModel.sendStatusType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleName","placeholder","ModuleName","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityName","placeholder","ModuleEntityName","id","dataModel.moduleEntityName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityId",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityId","placeholder","ModuleEntityId","id","dataModel.moduleEntityId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.fromEmail",1,"color-highlight"],["matInput","","type","text","name","dataModel.fromEmail","placeholder","fromEmail","id","dataModel.fromEmail",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.toEmail",1,"color-highlight"],["matInput","","type","text","name","dataModel.toEmail","placeholder","toEmail","id","dataModel.toEmail",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.emailSubject",1,"color-highlight"],["matInput","","name","dataModel.emailSubject","type","text","placeholder","emailSubject","id","dataModel.emailSubject",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.emailBody",1,"color-highlight"],["matInput","","name","dataModel.emailBody","type","text","placeholder","emailBody","id","dataModel.emailBody",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.returnApi",1,"color-highlight"],["matInput","","name","dataModel.returnApi","type","text","placeholder","ReturnApi","id","dataModel.returnApi",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"form-actions"],[3,"innerHTML"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(o,t){if(o&1){let c=y();a(0,"div",10),v(1,"app-progress-spinner",11),a(2,"div",12)(3,"p",13),l(4),r(),a(5,"p"),l(6),h(7,"translate"),r(),a(8,"form",null,0)(10,"div",14)(11,"select",15,1),A("ngModelChange",function(m){return f(c),D(t.dataModel.sendStatusType,m)||(t.dataModel.sendStatusType=m),S(m)}),kt(13,yr,2,2,"option",16,xt),r(),a(15,"em"),l(16),h(17,"translate"),r(),T(18,Tr,5,3,"mat-error"),r(),v(19,"app-cms-site-selector",17),h(20,"translate"),v(21,"app-cms-user-selector",17),h(22,"translate"),v(23,"app-cms-member-selector",17),h(24,"translate"),a(25,"div",14)(26,"label",18),l(27,"ModuleName"),r(),a(28,"input",19,2),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleName,m)||(t.dataModel.moduleName=m),S(m)}),r()(),a(30,"div",14)(31,"label",20),l(32,"ModuleEntityName"),r(),a(33,"input",21,3),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleEntityName,m)||(t.dataModel.moduleEntityName=m),S(m)}),r()(),a(35,"div",14)(36,"label",22),l(37,"ModuleEntityId"),r(),a(38,"input",23,4),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleEntityId,m)||(t.dataModel.moduleEntityId=m),S(m)}),r()(),a(40,"div",14)(41,"label",24),l(42,"fromEmail"),r(),a(43,"input",25,5),A("ngModelChange",function(m){return f(c),D(t.dataModel.fromEmail,m)||(t.dataModel.fromEmail=m),S(m)}),r()(),a(45,"div",14)(46,"label",26),l(47,"toEmail"),r(),a(48,"input",27,6),A("ngModelChange",function(m){return f(c),D(t.dataModel.toEmail,m)||(t.dataModel.toEmail=m),S(m)}),r()(),a(50,"div",14)(51,"label",28),l(52,"emailSubject"),r(),a(53,"textarea",29,7),A("ngModelChange",function(m){return f(c),D(t.dataModel.emailSubject,m)||(t.dataModel.emailSubject=m),S(m)}),l(55,"                            "),r()(),a(56,"div",14)(57,"label",30),l(58,"emailBody"),r(),a(59,"textarea",31,8),A("ngModelChange",function(m){return f(c),D(t.dataModel.emailBody,m)||(t.dataModel.emailBody=m),S(m)}),l(61,"                              "),r()(),a(62,"div",14)(63,"label",32),l(64,"ReturnApi"),r(),a(65,"textarea",33,9),A("ngModelChange",function(m){return f(c),D(t.dataModel.returnApi,m)||(t.dataModel.returnApi=m),S(m)}),l(67,"                                "),r()(),T(68,Lr,3,3,"div"),T(69,Rr,5,3,"div",34),r()()()}if(o&2){let c=J(12);s(),_("optionsInfoAreaId",t.constructorInfoAreaId),s(3),d(" ",t.formInfo.formTitle," "),s(2),d(" ",g(7,25,"TITLE.Be_Careful_When_Entering_Information")," "),s(5),R("ngModel",t.dataModel.sendStatusType),s(2),Nt(t.dataModelEnumSendEmailStatusTypeResult.listItems),s(3),z(g(17,27,"TITLE.SELECT_STATUS")),s(2),L(c.errors!=null&&c.errors.required?18:-1),s(),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",g(20,29,"TITLE.SITE")),s(2),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",g(22,31,"TITLE.USER")),s(2),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkMemberId)("optionPlaceholder",g(24,33,"TITLE.Member")),s(5),R("ngModel",t.dataModel.moduleName),s(5),R("ngModel",t.dataModel.moduleEntityName),s(5),R("ngModel",t.dataModel.moduleEntityId),s(5),R("ngModel",t.dataModel.fromEmail),s(5),R("ngModel",t.dataModel.toEmail),s(5),R("ngModel",t.dataModel.emailSubject),s(6),R("ngModel",t.dataModel.emailBody),s(6),R("ngModel",t.dataModel.returnApi),s(3),L(t.tokenInfo.access.userAccessAdminAllowToProfessionalData?68:-1),s(),L(t.formInfo.submitButtonEnabled?69:-1)}},dependencies:[mt,hi,gi,qe,Ci,Qe,lt,ze,ct,_i,Je,qt,ht,gt,re,O,pt],encapsulation:2});var fo=Ri;var Dr=["vform"];function Ar(i,n){if(i&1){let e=y();a(0,"div",7)(1,"button",8),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",9),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var Di=class Di{constructor(n,e,o,t,c,u,m,b,k,Y){this.data=n;this.dialogRef=e;this.coreEnumService=o;this.coreLogEmailService=t;this.cmsToastrService=c;this.tokenHelper=u;this.cmsStoreService=m;this.cdr=b;this.publicHelper=k;this.translate=Y;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new We;this.dataModelResult=new F;this.dataModel=new Ft;this.formInfo=new Ye;this.dataModelEnumSendEmailStatusTypeResult=new F;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,n&&(this.requestId=n.id+"")}ngOnInit(){if(this.translate.get("aaaaaaaaaTITLE.VIEWaaaaa").subscribe(n=>{this.formInfo.formTitle=n}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(n=>n.tokenInfoStore).subscribe(n=>U(this,null,function*(){this.tokenInfo=n}))),this.getEnumSendEmailStatusType()}getEnumSendEmailStatusType(){this.coreEnumService.ServiceSendEmailStatusTypeEnum().subscribe({next:n=>{this.dataModelEnumSendEmailStatusTypeResult=n}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(n=>n.unsubscribe())}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage="";let n=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(n,e,this.constructorInfoAreaId)}),this.coreLogEmailService.setAccessLoad(),this.coreLogEmailService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(n)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(n,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Di.\u0275fac=function(e){return new(e||Di)(p(ne),p(oe),p($),p(Vt),p(q),p(W),p(G),p(P),p(H),p(B))},Di.\u0275cmp=V({type:Di,selectors:[["app-core-log-email-view"]],viewQuery:function(e,o){if(e&1&&Z(Dr,5),e&2){let t;ee(t=te())&&(o.formGroup=t.first)}},standalone:!1,decls:9,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[3,"formInfo"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,o){e&1&&(a(0,"div",0),l(1),r(),a(2,"div",1),v(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),r(),a(5,"div",4),v(6,"app-cms-form-result-message",5),r(),a(7,"div",6),T(8,Ar,5,3,"div",7),r()),e&2&&(s(),d(" ",o.formInfo.formTitle," "),s(2),_("optionsInfoAreaId",o.constructorInfoAreaId),s(),_("dataModel",o.dataModel)("optionMethod",1),s(2),_("formInfo",o.formInfo),s(2),L(o.formInfo.submitButtonEnabled?8:-1))},dependencies:[re,ft,Xe,O],encapsulation:2});var So=Di;var xr=()=>[5,10,20,100];function kr(i,n){if(i&1){let e=y();a(0,"a",44),E("click",function(){f(e);let t=C();return S(t.onActionBackToParent())}),v(1,"i",45),r()}}function Nr(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",46),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewRow(t.tableRowSelected))}),v(2,"i",47)(3,"br"),r(),a(4,"p",48),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.VIEW")," "))}function Vr(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",49),E("click",function(){f(e);let t=C();return S(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",50)(3,"br"),r(),a(4,"p",48),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.EDIT")," "))}function Pr(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",51),E("click",function(){f(e);let t=C();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",52)(3,"br"),r(),a(4,"p",48),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.DELETE")," "))}function Br(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",46),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewUserRow(t.tableRowSelected))}),v(2,"i",53)(3,"br"),r(),a(4,"p",48),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.USER")," "))}function Or(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",46),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewMemberRow(t.tableRowSelected))}),v(2,"i",54)(3,"br"),r(),a(4,"p",48),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.MEMBER")," "))}function Gr(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Hr(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.id," ")}}function Fr(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function jr(i,n){if(i&1&&(a(0,"mat-cell",56),h(1,"statusCellClass"),v(2,"i",56),h(3,"statusIconClass"),r()),i&2){let e=n.$implicit;_("ngClass",g(1,2,e.recordStatus)),s(2),_("ngClass",g(3,4,e.recordStatus))}}function Ur(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Wr(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmssiteinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.linkSiteId))," ")}}function qr(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function Qr(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmsuserinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.linkUserId))," ")}}function zr(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function Jr(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.linkMemberId," ")}}function $r(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.fromEmail==null?null:e.fieldsInfo.fromEmail.fieldTitle," ")}}function Kr(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.fromEmail," ")}}function Yr(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.toEmail==null?null:e.fieldsInfo.toEmail.fieldTitle," ")}}function Xr(i,n){if(i&1&&(a(0,"mat-cell",57),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.toEmail," ")}}function Zr(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.emailSubject==null?null:e.fieldsInfo.emailSubject.fieldTitle," ")}}function ea(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.emailSubject," ")}}function ta(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.sendStatusType==null?null:e.fieldsInfo.sendStatusType.fieldTitle," ")}}function ia(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"enums"),r()),i&2){let e=n.$implicit,o=C();s(),d(" ",Et(2,1,e.sendStatusType,o.dataModelEnumSendEmailStatusTypeResult.listItems)," ")}}function oa(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function na(i,n){if(i&1&&(a(0,"mat-cell",58),l(1),h(2,"localeDateTime"),r()),i&2){let e=n.$implicit;s(),d(" ",g(2,1,e.createdDate)," ")}}function ra(i,n){i&1&&(a(0,"mat-header-cell"),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"TITLE.OPTION")," "))}function aa(i,n){if(i&1&&(a(0,"mat-cell",59)(1,"button",60)(2,"mat-icon"),l(3,"more_vert"),r()(),v(4,"mat-menu",null,2),r()),i&2){let e=J(5);s(),_("matMenuTriggerFor",e)}}function sa(i,n){i&1&&v(0,"mat-header-row")}function la(i,n){if(i&1){let e=y();a(0,"mat-row",61),E("click",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))})("rtclick",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))}),r()}if(i&2){let e=n.$implicit,o=C();ie("ntk-row-selected",e.id===(o.tableRowSelected==null?null:o.tableRowSelected.id))}}var Ai=class Ai extends et{constructor(e,o,t,c,u,m,b,k,Y,Ce,_t,Ct,se){super(o,new Ft,Ct,b,Y);this.coreEnumService=e;this.contentService=o;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=u;this.cmsStoreService=m;this.tokenHelper=b;this.cdr=k;this.translate=Y;this.router=Ce;this.pageInfo=_t;this.publicHelper=Ct;this.dialog=se;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestLinkDeviceId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new Ve;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","linkUserId","linkSiteId","linkMemberId","SendStatusType","fromEmail","toEmail","emailSubject","createdDate"];this.tabledisplayedColumnsMobileSource=["linkUserId","linkSiteId","linkMemberId","fromEmail","toEmail","emailSubject","createdDate"];this.dataModelEnumSendEmailStatusTypeResult=new F;this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestLinkDeviceId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDeviceId")),this.requestLinkSiteId>0){let x=new N;x.propertyName="LinkCmsSiteId",x.value=this.requestLinkSiteId,this.filteModelContent.filters.push(x)}if(this.requestLinkUserId>0){let x=new N;x.propertyName="linkUserId",x.value=this.requestLinkUserId,this.filteModelContent.filters.push(x)}if(this.requestLinkDeviceId>0){let x=new N;x.propertyName="LinkDeviceId",x.value=this.requestLinkDeviceId,this.filteModelContent.filters.push(x)}this.optionsSearch.parentMethods={onSubmit:x=>this.onSubmitOptionsSearch(x)},this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.optionsSearch.data.filterModelContent=this.filteModelContent,this.optionsSearch.data.filterActionSearchRecordStatusShow=!0,this.tokenHelper.isAdminSite?(this.optionsSearch.data.filterActionSearchLinkUserIdShow=!0,this.optionsSearch.data.filterActionSearchLinkSiteIdShow=!0):(this.optionsSearch.data.filterActionSearchLinkSiteIdShow=!1,this.optionsSearch.data.filterActionSearchLinkUserIdShow=!1)}ngOnInit(){this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))),this.getEnumSendEmailStatusType()}getEnumSendEmailStatusType(){this.coreEnumService.ServiceSendEmailStatusTypeEnum().subscribe({next:e=>{this.dataModelEnumSendEmailStatusTypeResult=e}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}filterModelCompiler(e){let o=JSON.parse(JSON.stringify(e));return this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(o.filters=[...this.filterDataModelQueryBuilder]),o}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ft);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let o=this.filterModelCompiler(this.filteModelContent);if(this.filteModelContent.filterActionSearchRecordStatus>0){let t=new N;t.propertyName="recordStatus",t.value=this.filteModelContent.filterActionSearchRecordStatus,o.filters.push(t)}if(this.filteModelContent.filterActionSearchLinkSiteId>0){let t=new N;t.propertyName="linkSiteId",t.value=this.filteModelContent.filterActionSearchLinkSiteId,o.filters.push(t)}if(this.filteModelContent.filterActionSearchLinkUserId>0){let t=new N;t.propertyName="linkUserId",t.value=this.filteModelContent.filterActionSearchLinkUserId,o.filters.push(t)}this.contentService.ServiceGetAllEditor(o).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(So,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(fo,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var o="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{o=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(o,t).then(c=>{if(c){let u=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(u,m,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:m=>{m.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(u)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(u,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let o=new Map;this.translate.get("MESSAGE.Active").subscribe(b=>{o.set(b,0)}),this.translate.get("MESSAGE.All").subscribe(b=>{o.set(b,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(b=>{this.publicHelper.processService.processStart(t,b,this.constructorInfoAreaId)});let c=this.filterModelCompiler(this.filteModelContent);this.contentService.ServiceGetCount(c).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}});let u=this.filterModelCompiler(this.filteModelContent),m=new N;m.propertyName="recordStatus",m.value=Ue.Available,u.filters.push(m),this.contentService.ServiceGetCount(u).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkUserId||this.tableRowSelected.linkUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkUserId])}onActionButtonViewMemberRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkMemberId||this.tableRowSelected.linkMemberId===""){this.translate.get("MESSAGE.content_does_not_include_member_informations").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/member/user/edit",this.tableRowSelected.linkMemberId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};Ai.\u0275fac=function(o){return new(o||Ai)(p($),p(Vt),p(q),p(Oe),p(Fe),p(G),p(W),p(P),p(B),p(je),p(Ae),p(H),p(ge))},Ai.\u0275cmp=V({type:Ai,selectors:[["app-core-log-email-list"]],standalone:!1,features:[X],decls:71,vars:33,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],[1,"col-4"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","linkUserId"],["matColumnDef","linkMemberId"],["matColumnDef","fromEmail"],["matColumnDef","toEmail"],["class","grid-row-ltr",4,"matCellDef"],["matColumnDef","emailSubject"],["matColumnDef","SendStatusType"],["matColumnDef","createdDate"],["style","direction: ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-id-card-clip",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],[1,"grid-row-ltr"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(o,t){if(o&1){let c=y();a(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(m){return f(c),D(t.viewGuideNotice,m)||(t.viewGuideNotice=m),S(m)}),E("optionOnActionButtonMemoRow",function(){return f(c),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),S(t.onActionButtonPrintRow())}),M(1,4),l(2," -------------------------------------- "),I(),K(3,5)(4,6),M(5,7),T(6,kr,2,0,"a",8),a(7,"a",9),E("click",function(){return f(c),S(t.viewGuideNotice=!t.viewGuideNotice)}),v(8,"i",10),r(),a(9,"a",9),E("click",function(){return f(c),S(t.onActionButtonReload())}),v(10,"i",11),r(),I(),M(11,12),a(12,"a",13),E("click",function(){return f(c),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(13,"mat-slide-toggle",14),l(14),h(15,"translate"),r(),a(16,"a",13),E("click",function(){return f(c),S(t.onActionButtonStatist())}),v(17,"mat-slide-toggle",14),l(18),h(19,"translate"),r(),I(),K(20,15),M(21,16),T(22,Nr,7,3,"div",17),T(23,Vr,7,3,"div",17),T(24,Pr,7,3,"div",17),T(25,Br,7,3,"div",17),T(26,Or,7,3,"div",17),I(),M(27,18),a(28,"app-cms-search-list",19),A("optionsChange",function(m){return f(c),D(t.optionsSearch,m)||(t.optionsSearch=m),S(m)}),r(),a(29,"app-cms-statist-list",19),A("optionsChange",function(m){return f(c),D(t.optionsStatist,m)||(t.optionsStatist=m),S(m)}),r(),I(),M(30,20),a(31,"mat-table",21,0),E("matSortChange",function(){f(c);let m=J(32);return S(t.onTableSortData(m))}),M(33,22),w(34,Gr,2,1,"mat-header-cell",23)(35,Hr,2,1,"mat-cell",24),I(),M(36,25),w(37,Fr,2,1,"mat-header-cell",23)(38,jr,4,6,"mat-cell",26),I(),M(39,27),w(40,Ur,2,1,"mat-header-cell",23)(41,Wr,4,5,"mat-cell",24),I(),M(42,28),w(43,qr,2,1,"mat-header-cell",23)(44,Qr,4,5,"mat-cell",24),I(),M(45,29),w(46,zr,2,1,"mat-header-cell",23)(47,Jr,2,1,"mat-cell",24),I(),M(48,30),w(49,$r,2,1,"mat-header-cell",23)(50,Kr,2,1,"mat-cell",24),I(),M(51,31),w(52,Yr,2,1,"mat-header-cell",23)(53,Xr,2,1,"mat-cell",32),I(),M(54,33),w(55,Zr,2,1,"mat-header-cell",23)(56,ea,2,1,"mat-cell",24),I(),M(57,34),w(58,ta,2,1,"mat-header-cell",23)(59,ia,3,4,"mat-cell",24),I(),M(60,35),w(61,oa,2,1,"mat-header-cell",23)(62,na,3,3,"mat-cell",36),I(),M(63,37),w(64,ra,3,3,"mat-header-cell",38)(65,aa,6,1,"mat-cell",39),I(),w(66,sa,1,0,"mat-header-row",40)(67,la,1,2,"mat-row",41),r(),I(),M(68,42),a(69,"mat-paginator",43,1),E("page",function(m){return f(c),S(t.onTablePageingData(m))}),r(),I(),r()}o&2&&(_("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),R("optionActionGuideNoticeDisplay",t.viewGuideNotice),_("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),s(6),L(t.requestLinkSiteId>0?6:-1),s(4),ie("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),s(3),_("checked",t.optionsSearch.data.show),s(),d("",g(15,28,"ACTION.SEARCH")," "),s(3),_("checked",t.optionsStatist.data.show),s(),d("",g(19,30,"ACTION.STATIST")," "),s(4),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow?22:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?23:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?24:-1),s(),L((t.tableRowSelected==null?null:t.tableRowSelected.linkUserId)>0?25:-1),s(),L((t.tableRowSelected==null?null:t.tableRowSelected.linkMemberId)>0?26:-1),s(2),R("options",t.optionsSearch),s(),R("options",t.optionsStatist),s(2),_("dataSource",t.tableSource),s(35),_("matHeaderRowDef",t.tabledisplayedColumns),s(),_("matRowDefColumns",t.tabledisplayedColumns),s(2),_("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Ge(32,xr)))},dependencies:[He,he,fe,Pe,Be,$e,Ke,_e,ve,be,Ie,Te,Ee,Me,Le,we,ye,Re,De,tt,it,xe,ke,at,O,vi,dt,vt,Ze,ot,nt],encapsulation:2});var Co=Ai;var ca=["vform"];function ma(i,n){if(i&1&&(a(0,"div"),v(1,"div",20),h(2,"prettyjson"),r()),i&2){let e=C();s(),_("innerHTML",g(2,1,e.dataModel),rt)}}function da(i,n){if(i&1){let e=y();a(0,"div",19)(1,"button",21),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",22),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var xi=class xi extends ut{constructor(e,o,t,c,u,m,b,k,Y,Ce){super(c,new Si,Y,Ce);this.data=e;this.dialogRef=o;this.coreEnumService=t;this.coreLogErrorService=c;this.cmsToastrService=u;this.tokenHelper=m;this.cmsStoreService=b;this.cdr=k;this.publicHelper=Y;this.translate=Ce;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new F;this.dataModel=new Si;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(e,o,this.constructorInfoAreaId)}),this.coreLogErrorService.setAccessLoad(),this.coreLogErrorService.setAccessDataType(st.Editor),this.coreLogErrorService.ServiceGetOneById(this.requestId).subscribe({next:o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access),this.dataModel=o.item,o.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+o.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=o.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.publicHelper.processService.processStop(e)},error:o=>{this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};xi.\u0275fac=function(o){return new(o||xi)(p(ne),p(oe),p($),p(pi),p(q),p(W),p(G),p(P),p(H),p(B))},xi.\u0275cmp=V({type:xi,selectors:[["app-core-log-error-edit"]],viewQuery:function(o,t){if(o&1&&Z(ca,5),o&2){let c;ee(c=te())&&(t.formGroup=c.first)}},standalone:!1,features:[X],decls:36,vars:22,consts:[["vform","ngForm"],["ModuleName",""],["ModuleEntityName",""],["ModuleEntityId",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleName","placeholder","ModuleName","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityName","placeholder","ModuleEntityName","id","dataModel.moduleEntityName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityId",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityId","placeholder","ModuleEntityId","id","dataModel.moduleEntityId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","placeholder","description","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"form-actions"],[3,"innerHTML"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(o,t){if(o&1){let c=y();a(0,"div",5),v(1,"app-progress-spinner",6),a(2,"div",7)(3,"p",8),l(4),r(),a(5,"p"),l(6),h(7,"translate"),r(),a(8,"form",null,0),v(10,"app-cms-user-selector",9),h(11,"translate"),v(12,"app-cms-member-selector",9),h(13,"translate"),a(14,"div",10)(15,"label",11),l(16,"ModuleName"),r(),a(17,"input",12,1),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleName,m)||(t.dataModel.moduleName=m),S(m)}),r()(),a(19,"div",10)(20,"label",13),l(21,"ModuleEntityName"),r(),a(22,"input",14,2),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleEntityName,m)||(t.dataModel.moduleEntityName=m),S(m)}),r()(),a(24,"div",10)(25,"label",15),l(26,"EntityId"),r(),a(27,"input",16,3),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleEntityId,m)||(t.dataModel.moduleEntityId=m),S(m)}),r()(),a(29,"div",10)(30,"label",17),l(31),r(),a(32,"input",18,4),A("ngModelChange",function(m){return f(c),D(t.dataModel.description,m)||(t.dataModel.description=m),S(m)}),r()(),T(34,ma,3,3,"div"),T(35,da,5,3,"div",19),r()()()}o&2&&(s(),_("optionsInfoAreaId",t.constructorInfoAreaId),s(3),d(" ",t.formInfo.formTitle," "),s(2),d(" ",g(7,16,"TITLE.Be_Careful_When_Entering_Information")," "),s(4),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",g(11,18,"TITLE.USER")),s(2),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkMemberId)("optionPlaceholder",g(13,20,"TITLE.Member")),s(5),R("ngModel",t.dataModel.moduleName),s(5),R("ngModel",t.dataModel.moduleEntityName),s(5),R("ngModel",t.dataModel.moduleEntityId),s(4),z(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),s(),R("ngModel",t.dataModel.description),s(2),L(t.tokenInfo.access.userAccessAdminAllowToProfessionalData?34:-1),s(),L(t.formInfo.submitButtonEnabled?35:-1))},dependencies:[mt,qe,Qe,lt,so,lo,ze,ct,Je,ht,gt,re,O,pt],encapsulation:2});var go=xi;var pa=()=>[5,10,20,100];function ua(i,n){if(i&1){let e=y();a(0,"div",16)(1,"a",44),E("click",function(){f(e);let t=C();return S(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",45)(3,"br"),r(),a(4,"p",19),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.EDIT")," "))}function fa(i,n){if(i&1){let e=y();a(0,"div",16)(1,"a",46),E("click",function(){f(e);let t=C();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",47)(3,"br"),r(),a(4,"p",19),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.DELETE")," "))}function Sa(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Ca(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.id," ")}}function ha(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function ga(i,n){if(i&1&&(a(0,"mat-cell",49),h(1,"statusCellClass"),v(2,"i",49),h(3,"statusIconClass"),r()),i&2){let e=n.$implicit;_("ngClass",g(1,2,e.recordStatus)),s(2),_("ngClass",g(3,4,e.recordStatus))}}function _a(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function va(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmsuserinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.linkUserId))," ")}}function ba(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function Ma(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.linkMemberId," ")}}function Ia(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.moduleName==null?null:e.fieldsInfo.moduleName.fieldTitle," ")}}function Ea(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.moduleName," ")}}function wa(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.moduleEntityName==null?null:e.fieldsInfo.moduleEntityName.fieldTitle," ")}}function ya(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.moduleEntityName," ")}}function Ta(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.moduleEntityId==null?null:e.fieldsInfo.moduleEntityId.fieldTitle," ")}}function La(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.moduleEntityId," ")}}function Ra(i,n){if(i&1&&(a(0,"mat-header-cell",48),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Da(i,n){if(i&1&&(a(0,"mat-cell",50),l(1),h(2,"localeDateTime"),r()),i&2){let e=n.$implicit;s(),d(" ",g(2,1,e.createdDate)," ")}}function Aa(i,n){i&1&&(a(0,"mat-header-cell"),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"TITLE.OPTION")," "))}function xa(i,n){if(i&1&&(a(0,"mat-cell",51)(1,"button",52)(2,"mat-icon"),l(3,"more_vert"),r()(),v(4,"mat-menu",null,2),r()),i&2){let e=J(5);s(),_("matMenuTriggerFor",e)}}function ka(i,n){i&1&&v(0,"mat-header-row")}function Na(i,n){if(i&1){let e=y();a(0,"mat-row",53),E("click",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))})("rtclick",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))}),r()}if(i&2){let e=n.$implicit,o=C();ie("ntk-row-selected",e.id===(o.tableRowSelected==null?null:o.tableRowSelected.id))}}var ki=class ki extends et{constructor(e,o,t,c,u,m,b,k,Y,Ce,_t,Ct){super(e,new Si,_t,Y,k);this.contentService=e;this.cmsToastrService=o;this.cmsConfirmationDialogService=t;this.activatedRoute=c;this.cmsStoreService=u;this.router=m;this.cdr=b;this.translate=k;this.tokenHelper=Y;this.pageInfo=Ce;this.publicHelper=_t;this.dialog=Ct;this.requestLinkUserId=0;this.requestLinkDeviceId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new Ve;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","ModuleName","ModuleEntityName","linkUserId","linkMemberId","ModuleEntityId","createdDate"];this.tabledisplayedColumnsMobileSource=["id","ModuleName","ModuleEntityName","linkUserId","linkMemberId","ModuleEntityId","createdDate"];this.dataModelEnumManageUserAccessAreaTypesResult=new F;this.dataModelEnumManageUserAccessUserTypesResult=new F;this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestLinkDeviceId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDeviceId")),this.requestLinkUserId>0){let se=new N;se.propertyName="linkUserId",se.value=this.requestLinkUserId,this.filteModelContent.filters.push(se)}if(this.requestLinkDeviceId>0){let se=new N;se.propertyName="LinkDeviceId",se.value=this.requestLinkDeviceId,this.filteModelContent.filters.push(se)}this.optionsSearch.parentMethods={onSubmit:se=>this.onSubmitOptionsSearch(se)},this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending}ngOnInit(){this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))),this.getEnumManageUserAccessAreaTypes(),this.getEnumManageUserAccessUserTypes()}getEnumManageUserAccessAreaTypes(){}getEnumManageUserAccessUserTypes(){}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}filterModelCompiler(e){let o=JSON.parse(JSON.stringify(e));return this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(o.filters=[...this.filterDataModelQueryBuilder]),o}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Si);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let o=this.filterModelCompiler(this.filteModelContent);this.contentService.ServiceGetAllEditor(o).subscribe({next:t=>{t.isSuccess&&(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(go,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var o="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{o=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(o,t).then(c=>{if(c){let u=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(u,m,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:m=>{m.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(u)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(u,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let o=new Map;this.translate.get("MESSAGE.Active").subscribe(b=>{o.set(b,0)}),this.translate.get("MESSAGE.All").subscribe(b=>{o.set(b,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(b=>{this.publicHelper.processService.processStart(t,b,this.constructorInfoAreaId)});let c=this.filterModelCompiler(this.filteModelContent);this.contentService.ServiceGetCount(c).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}});let u=this.filterModelCompiler(this.filteModelContent),m=new N;m.propertyName="recordStatus",m.value=Ue.Available,u.filters.push(m),this.contentService.ServiceGetCount(u).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkUserId||this.tableRowSelected.linkUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkUserId])}onActionButtonViewMemberRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkMemberId||this.tableRowSelected.linkMemberId===""){this.translate.get("MESSAGE.Content_does_not_include_device_information").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/member/user/edit",this.tableRowSelected.linkMemberId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};ki.\u0275fac=function(o){return new(o||ki)(p(pi),p(q),p(Oe),p(Fe),p(G),p(je),p(P),p(B),p(W),p(Ae),p(H),p(ge))},ki.\u0275cmp=V({type:ki,selectors:[["app-core-log-error-list"]],standalone:!1,features:[X],decls:75,vars:35,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-id-card-clip","font-18",2,"color","#ffffff"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","linkUserId"],["matColumnDef","linkMemberId"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","ModuleEntityId"],["matColumnDef","createdDate"],["style","direction: ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(o,t){if(o&1){let c=y();a(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(m){return f(c),D(t.viewGuideNotice,m)||(t.viewGuideNotice=m),S(m)}),E("optionOnActionButtonMemoRow",function(){return f(c),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),S(t.onActionButtonPrintRow())}),M(1,4),l(2," -------------------------------------- "),I(),K(3,5)(4,6),M(5,7),a(6,"a",8),E("click",function(){return f(c),S(t.viewGuideNotice=!t.viewGuideNotice)}),v(7,"i",9),r(),a(8,"a",8),E("click",function(){return f(c),S(t.onActionButtonReload())}),v(9,"i",10),r(),I(),M(10,11),a(11,"a",12),E("click",function(){return f(c),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(12,"mat-slide-toggle",13),l(13),h(14,"translate"),r(),a(15,"a",12),E("click",function(){return f(c),S(t.onActionButtonStatist())}),v(16,"mat-slide-toggle",13),l(17),h(18,"translate"),r(),I(),K(19,14),M(20,15),T(21,ua,7,3,"div",16),T(22,fa,7,3,"div",16),a(23,"div",16)(24,"a",17),E("click",function(){return f(c),S(t.onActionButtonViewUserRow(t.tableRowSelected))}),v(25,"i",18)(26,"br"),r(),a(27,"p",19),l(28),h(29,"translate"),r()(),a(30,"div",16)(31,"a",17),E("click",function(){return f(c),S(t.onActionButtonViewMemberRow(t.tableRowSelected))}),v(32,"i",20)(33,"br"),r(),a(34,"p",19),l(35),h(36,"translate"),r()(),I(),M(37,21),a(38,"app-cms-search-list",22),A("optionsChange",function(m){return f(c),D(t.optionsSearch,m)||(t.optionsSearch=m),S(m)}),r(),a(39,"app-cms-statist-list",22),A("optionsChange",function(m){return f(c),D(t.optionsStatist,m)||(t.optionsStatist=m),S(m)}),r(),I(),M(40,23),a(41,"mat-table",24,0),E("matSortChange",function(){f(c);let m=J(42);return S(t.onTableSortData(m))}),M(43,25),w(44,Sa,2,1,"mat-header-cell",26)(45,Ca,2,1,"mat-cell",27),I(),M(46,28),w(47,ha,2,1,"mat-header-cell",26)(48,ga,4,6,"mat-cell",29),I(),M(49,30),w(50,_a,2,1,"mat-header-cell",26)(51,va,4,5,"mat-cell",27),I(),M(52,31),w(53,ba,2,1,"mat-header-cell",26)(54,Ma,2,1,"mat-cell",27),I(),M(55,32),w(56,Ia,2,1,"mat-header-cell",26)(57,Ea,2,1,"mat-cell",27),I(),M(58,33),w(59,wa,2,1,"mat-header-cell",26)(60,ya,2,1,"mat-cell",27),I(),M(61,34),w(62,Ta,2,1,"mat-header-cell",26)(63,La,2,1,"mat-cell",27),I(),M(64,35),w(65,Ra,2,1,"mat-header-cell",26)(66,Da,3,3,"mat-cell",36),I(),M(67,37),w(68,Aa,3,3,"mat-header-cell",38)(69,xa,6,1,"mat-cell",39),I(),w(70,ka,1,0,"mat-header-row",40)(71,Na,1,2,"mat-row",41),r(),I(),M(72,42),a(73,"mat-paginator",43,1),E("page",function(m){return f(c),S(t.onTablePageingData(m))}),r(),I(),r()}o&2&&(_("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),R("optionActionGuideNoticeDisplay",t.viewGuideNotice),_("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),s(9),ie("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),s(3),_("checked",t.optionsSearch.data.show),s(),d("",g(14,26,"ACTION.SEARCH")," "),s(3),_("checked",t.optionsStatist.data.show),s(),d("",g(18,28,"ACTION.STATIST")," "),s(4),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?21:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?22:-1),s(6),d(" ",g(29,30,"ACTION.USER")," "),s(7),d(" ",g(36,32,"ACTION.MEMBER")," "),s(3),R("options",t.optionsSearch),s(),R("options",t.optionsStatist),s(2),_("dataSource",t.tableSource),s(29),_("matHeaderRowDef",t.tabledisplayedColumns),s(),_("matRowDefColumns",t.tabledisplayedColumns),s(2),_("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Ge(34,pa)))},dependencies:[He,he,fe,Pe,Be,$e,Ke,_e,ve,be,Ie,Te,Ee,Me,Le,we,ye,Re,De,tt,it,xe,ke,at,O,dt,Ze,ot,nt],encapsulation:2});var _o=ki;var Va=["vform"];function Pa(i,n){if(i&1&&(a(0,"div"),v(1,"div",11),h(2,"prettyjson"),r()),i&2){let e=C();s(),_("innerHTML",g(2,1,e.dataModel),rt)}}function Ba(i,n){if(i&1){let e=y();a(0,"div",10)(1,"button",12),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",13),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var Ni=class Ni extends ut{constructor(e,o,t,c,u,m,b,k,Y,Ce){super(c,new jt,Y,Ce);this.data=e;this.dialogRef=o;this.coreEnumService=t;this.coreLogMemberService=c;this.cmsToastrService=u;this.tokenHelper=m;this.cmsStoreService=b;this.cdr=k;this.publicHelper=Y;this.translate=Ce;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ci;this.dataModel=new jt;this.dataModelEnumSendMemberStatusTypeResult=new F;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(e,o,this.constructorInfoAreaId)}),this.coreLogMemberService.setAccessLoad(),this.coreLogMemberService.setAccessDataType(st.Editor),this.coreLogMemberService.ServiceGetOneById(this.requestId).subscribe({next:o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access),this.dataModel=o.item,o.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+o.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=o.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.publicHelper.processService.processStop(e)},error:o=>{this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ni.\u0275fac=function(o){return new(o||Ni)(p(ne),p(oe),p($),p(Pt),p(q),p(W),p(G),p(P),p(H),p(B))},Ni.\u0275cmp=V({type:Ni,selectors:[["app-core-log-member-edit"]],viewQuery:function(o,t){if(o&1&&Z(Va,5),o&2){let c;ee(c=te())&&(t.formGroup=c.first)}},standalone:!1,features:[X],decls:19,vars:14,consts:[["vform","ngForm"],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","placeholder","Description","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"form-actions"],[3,"innerHTML"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(o,t){if(o&1){let c=y();a(0,"div",2),v(1,"app-progress-spinner",3),a(2,"div",4)(3,"p",5),l(4),r(),a(5,"p"),l(6),h(7,"translate"),r(),a(8,"form",null,0),v(10,"app-cms-user-selector",6),h(11,"translate"),a(12,"div",7)(13,"label",8),l(14),r(),a(15,"input",9,1),A("ngModelChange",function(m){return f(c),D(t.dataModel.description,m)||(t.dataModel.description=m),S(m)}),r()(),T(17,Pa,3,3,"div"),T(18,Ba,5,3,"div",10),r()()()}o&2&&(s(),_("optionsInfoAreaId",t.constructorInfoAreaId),s(3),d(" ",t.formInfo.formTitle," "),s(2),d(" ",g(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),s(4),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkCoreUserId)("optionPlaceholder",g(11,12,"TITLE.USER")),s(4),z(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),s(),R("ngModel",t.dataModel.description),s(2),L(t.tokenInfo.access.userAccessAdminAllowToProfessionalData?17:-1),s(),L(t.formInfo.submitButtonEnabled?18:-1))},dependencies:[mt,qe,Qe,lt,so,lo,ze,ct,Je,ht,re,O,pt],encapsulation:2});var vo=Ni;var Oa=["vform"];function Ga(i,n){if(i&1){let e=y();a(0,"div",7)(1,"button",8),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",9),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var Vi=class Vi{constructor(n,e,o,t,c,u,m,b,k,Y){this.data=n;this.dialogRef=e;this.coreEnumService=o;this.coreLogMemberService=t;this.cmsToastrService=c;this.tokenHelper=u;this.cmsStoreService=m;this.cdr=b;this.publicHelper=k;this.translate=Y;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new We;this.dataModelResult=new F;this.dataModel=new jt;this.formInfo=new Ye;this.dataModelEnumSendMemberStatusTypeResult=new F;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,n&&(this.requestId=n.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(n=>{this.formInfo.formTitle=n}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(n=>n.tokenInfoStore).subscribe(n=>U(this,null,function*(){this.tokenInfo=n})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(n=>n.unsubscribe())}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage="";let n=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(n,e,this.constructorInfoAreaId)}),this.coreLogMemberService.setAccessLoad(),this.coreLogMemberService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(n)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(n,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Vi.\u0275fac=function(e){return new(e||Vi)(p(ne),p(oe),p($),p(Pt),p(q),p(W),p(G),p(P),p(H),p(B))},Vi.\u0275cmp=V({type:Vi,selectors:[["app-core-log-member-view"]],viewQuery:function(e,o){if(e&1&&Z(Oa,5),e&2){let t;ee(t=te())&&(o.formGroup=t.first)}},standalone:!1,decls:9,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[3,"formInfo"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,o){e&1&&(a(0,"div",0),l(1),r(),a(2,"div",1),v(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),r(),a(5,"div",4),v(6,"app-cms-form-result-message",5),r(),a(7,"div",6),T(8,Ga,5,3,"div",7),r()),e&2&&(s(),d(" ",o.formInfo.formTitle," "),s(2),_("optionsInfoAreaId",o.constructorInfoAreaId),s(),_("dataModel",o.dataModel)("optionMethod",1),s(2),_("formInfo",o.formInfo),s(2),L(o.formInfo.submitButtonEnabled?8:-1))},dependencies:[re,ft,Xe,O],encapsulation:2});var bo=Vi;var Ha=()=>[5,10,20,100];function Fa(i,n){if(i&1){let e=y();a(0,"a",46),E("click",function(){f(e);let t=C();return S(t.onActionBackToParent())}),v(1,"i",47),r()}}function ja(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",18),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewRow(t.tableRowSelected))}),v(2,"i",48)(3,"br"),r(),a(4,"p",20),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.VIEW")," "))}function Ua(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",49),E("click",function(){f(e);let t=C();return S(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",50)(3,"br"),r(),a(4,"p",20),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.EDIT")," "))}function Wa(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",51),E("click",function(){f(e);let t=C();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",52)(3,"br"),r(),a(4,"p",20),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.DELETE")," "))}function qa(i,n){if(i&1&&(a(0,"mat-header-cell",53),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Qa(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.id," ")}}function za(i,n){if(i&1&&(a(0,"mat-header-cell",53),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Ja(i,n){if(i&1&&(a(0,"mat-cell",54),h(1,"statusCellClass"),v(2,"i",54),h(3,"statusIconClass"),r()),i&2){let e=n.$implicit;_("ngClass",g(1,2,e.recordStatus)),s(2),_("ngClass",g(3,4,e.recordStatus))}}function $a(i,n){if(i&1&&(a(0,"mat-header-cell",53),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Ka(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmssiteinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.linkSiteId))," ")}}function Ya(i,n){if(i&1&&(a(0,"mat-header-cell",53),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function Xa(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmsuserinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.linkUserId))," ")}}function Za(i,n){if(i&1&&(a(0,"mat-header-cell",53),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkMemberUserId==null?null:e.fieldsInfo.linkMemberUserId.fieldTitle," ")}}function es(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.linkMemberUserId," ")}}function ts(i,n){if(i&1&&(a(0,"mat-header-cell",53),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.apiNumber==null?null:e.fieldsInfo.apiNumber.fieldTitle," ")}}function is(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.apiNumber," ")}}function os(i,n){if(i&1&&(a(0,"mat-header-cell",53),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.fromNumber==null?null:e.fieldsInfo.fromNumber.fieldTitle," ")}}function ns(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.fromNumber," ")}}function rs(i,n){if(i&1&&(a(0,"mat-header-cell",53),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.toNumber==null?null:e.fieldsInfo.toNumber.fieldTitle," ")}}function as(i,n){if(i&1&&(a(0,"mat-cell",55),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.toNumber," ")}}function ss(i,n){if(i&1&&(a(0,"mat-header-cell",53),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function ls(i,n){if(i&1&&(a(0,"mat-cell",56),l(1),h(2,"localeDateTime"),r()),i&2){let e=n.$implicit;s(),d(" ",g(2,1,e.createdDate)," ")}}function cs(i,n){i&1&&(a(0,"mat-header-cell"),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"TITLE.OPTION")," "))}function ms(i,n){if(i&1&&(a(0,"mat-cell",57)(1,"button",58)(2,"mat-icon"),l(3,"more_vert"),r()(),v(4,"mat-menu",null,2),r()),i&2){let e=J(5);s(),_("matMenuTriggerFor",e)}}function ds(i,n){i&1&&v(0,"mat-header-row")}function ps(i,n){if(i&1){let e=y();a(0,"mat-row",59),E("click",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))})("rtclick",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))}),r()}if(i&2){let e=n.$implicit,o=C();ie("ntk-row-selected",e.id===(o.tableRowSelected==null?null:o.tableRowSelected.id))}}var Pi=class Pi extends et{constructor(e,o,t,c,u,m,b,k,Y,Ce,_t,Ct,se){super(o,new jt,Ct,m,k);this.coreEnumService=e;this.contentService=o;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=u;this.tokenHelper=m;this.cdr=b;this.translate=k;this.cmsStoreService=Y;this.router=Ce;this.pageInfo=_t;this.publicHelper=Ct;this.dialog=se;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestLinkDeviceId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new Ve;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","linkUserId","linkSiteId","LinkMemberUserId","FromNumber","ToNumber","ApiNumber","createdDate"];this.tabledisplayedColumnsMobileSource=["id","linkUserId","linkSiteId","LinkMemberUserId","FromNumber","ToNumber","ApiNumber","createdDate"];this.dataModelEnumSendMemberStatusTypeResult=new F;this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestLinkDeviceId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDeviceId")),this.requestLinkSiteId>0){let x=new N;x.propertyName="LinkCmsSiteId",x.value=this.requestLinkSiteId,this.filteModelContent.filters.push(x)}if(this.requestLinkUserId>0){let x=new N;x.propertyName="linkUserId",x.value=this.requestLinkUserId,this.filteModelContent.filters.push(x)}if(this.requestLinkDeviceId>0){let x=new N;x.propertyName="LinkDeviceId",x.value=this.requestLinkDeviceId,this.filteModelContent.filters.push(x)}this.optionsSearch.parentMethods={onSubmit:x=>this.onSubmitOptionsSearch(x)},this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.optionsSearch.data.filterModelContent=this.filteModelContent,this.optionsSearch.data.filterActionSearchRecordStatusShow=!0,this.tokenHelper.isAdminSite?(this.optionsSearch.data.filterActionSearchLinkUserIdShow=!0,this.optionsSearch.data.filterActionSearchLinkSiteIdShow=!0):(this.optionsSearch.data.filterActionSearchLinkSiteIdShow=!1,this.optionsSearch.data.filterActionSearchLinkUserIdShow=!1)}ngOnInit(){this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}filterModelCompiler(e){let o=JSON.parse(JSON.stringify(e));return this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(o.filters=[...this.filterDataModelQueryBuilder]),o}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new jt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let o=this.filterModelCompiler(this.filteModelContent);if(this.filteModelContent.filterActionSearchRecordStatus>0){let t=new N;t.propertyName="recordStatus",t.value=this.filteModelContent.filterActionSearchRecordStatus,o.filters.push(t)}if(this.filteModelContent.filterActionSearchLinkSiteId>0){let t=new N;t.propertyName="linkSiteId",t.value=this.filteModelContent.filterActionSearchLinkSiteId,o.filters.push(t)}if(this.filteModelContent.filterActionSearchLinkUserId>0){let t=new N;t.propertyName="linkUserId",t.value=this.filteModelContent.filterActionSearchLinkUserId,o.filters.push(t)}this.contentService.ServiceGetAllEditor(o).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(bo,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(vo,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var o="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{o=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(o,t).then(c=>{if(c){let u=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(u,m,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:m=>{m.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(u)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(u,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let o=new Map;this.translate.get("MESSAGE.Active").subscribe(b=>{o.set(b,0)}),this.translate.get("MESSAGE.All").subscribe(b=>{o.set(b,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(b=>{this.publicHelper.processService.processStart(t,b,this.constructorInfoAreaId)});let c=this.filterModelCompiler(this.filteModelContent);this.contentService.ServiceGetCount(c).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}});let u=this.filterModelCompiler(this.filteModelContent),m=new N;m.propertyName="recordStatus",m.value=Ue.Available,u.filters.push(m),this.contentService.ServiceGetCount(u).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkCoreUserId||this.tableRowSelected.linkCoreUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkCoreUserId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};Pi.\u0275fac=function(o){return new(o||Pi)(p($),p(Pt),p(q),p(Oe),p(Fe),p(W),p(P),p(B),p(G),p(je),p(Ae),p(H),p(ge))},Pi.\u0275cmp=V({type:Pi,selectors:[["app-core-log-member-list"]],standalone:!1,features:[X],decls:73,vars:34,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","linkUserId"],["matColumnDef","LinkMemberUserId"],["matColumnDef","ApiNumber"],["matColumnDef","FromNumber"],["matColumnDef","ToNumber"],["class","grid-row-ltr",4,"matCellDef"],["matColumnDef","createdDate"],["style","direction: ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],[1,"grid-row-ltr"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(o,t){if(o&1){let c=y();a(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(m){return f(c),D(t.viewGuideNotice,m)||(t.viewGuideNotice=m),S(m)}),E("optionOnActionButtonMemoRow",function(){return f(c),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),S(t.onActionButtonPrintRow())}),M(1,4),l(2," -------------------------------------- "),I(),K(3,5)(4,6),M(5,7),T(6,Fa,2,0,"a",8),a(7,"a",9),E("click",function(){return f(c),S(t.viewGuideNotice=!t.viewGuideNotice)}),v(8,"i",10),r(),a(9,"a",9),E("click",function(){return f(c),S(t.onActionButtonReload())}),v(10,"i",11),r(),I(),M(11,12),a(12,"a",13),E("click",function(){return f(c),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(13,"mat-slide-toggle",14),l(14),h(15,"translate"),r(),a(16,"a",13),E("click",function(){return f(c),S(t.onActionButtonStatist())}),v(17,"mat-slide-toggle",14),l(18),h(19,"translate"),r(),I(),K(20,15),M(21,16),T(22,ja,7,3,"div",17),T(23,Ua,7,3,"div",17),T(24,Wa,7,3,"div",17),a(25,"div",17)(26,"a",18),E("click",function(){return f(c),S(t.onActionButtonViewUserRow(t.tableRowSelected))}),v(27,"i",19)(28,"br"),r(),a(29,"p",20),l(30),h(31,"translate"),r()(),I(),M(32,21),a(33,"app-cms-search-list",22),A("optionsChange",function(m){return f(c),D(t.optionsSearch,m)||(t.optionsSearch=m),S(m)}),r(),a(34,"app-cms-statist-list",22),A("optionsChange",function(m){return f(c),D(t.optionsStatist,m)||(t.optionsStatist=m),S(m)}),r(),I(),M(35,23),a(36,"mat-table",24,0),E("matSortChange",function(){f(c);let m=J(37);return S(t.onTableSortData(m))}),M(38,25),w(39,qa,2,1,"mat-header-cell",26)(40,Qa,2,1,"mat-cell",27),I(),M(41,28),w(42,za,2,1,"mat-header-cell",26)(43,Ja,4,6,"mat-cell",29),I(),M(44,30),w(45,$a,2,1,"mat-header-cell",26)(46,Ka,4,5,"mat-cell",27),I(),M(47,31),w(48,Ya,2,1,"mat-header-cell",26)(49,Xa,4,5,"mat-cell",27),I(),M(50,32),w(51,Za,2,1,"mat-header-cell",26)(52,es,2,1,"mat-cell",27),I(),M(53,33),w(54,ts,2,1,"mat-header-cell",26)(55,is,2,1,"mat-cell",27),I(),M(56,34),w(57,os,2,1,"mat-header-cell",26)(58,ns,2,1,"mat-cell",27),I(),M(59,35),w(60,rs,2,1,"mat-header-cell",26)(61,as,2,1,"mat-cell",36),I(),M(62,37),w(63,ss,2,1,"mat-header-cell",26)(64,ls,3,3,"mat-cell",38),I(),M(65,39),w(66,cs,3,3,"mat-header-cell",40)(67,ms,6,1,"mat-cell",41),I(),w(68,ds,1,0,"mat-header-row",42)(69,ps,1,2,"mat-row",43),r(),I(),M(70,44),a(71,"mat-paginator",45,1),E("page",function(m){return f(c),S(t.onTablePageingData(m))}),r(),I(),r()}o&2&&(_("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),R("optionActionGuideNoticeDisplay",t.viewGuideNotice),_("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),s(6),L(t.requestLinkSiteId>0?6:-1),s(4),ie("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),s(3),_("checked",t.optionsSearch.data.show),s(),d("",g(15,27,"ACTION.SEARCH")," "),s(3),_("checked",t.optionsStatist.data.show),s(),d("",g(19,29,"ACTION.STATIST")," "),s(4),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow?22:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?23:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?24:-1),s(6),d(" ",g(31,31,"ACTION.USER")," "),s(3),R("options",t.optionsSearch),s(),R("options",t.optionsStatist),s(2),_("dataSource",t.tableSource),s(32),_("matHeaderRowDef",t.tabledisplayedColumns),s(),_("matRowDefColumns",t.tabledisplayedColumns),s(2),_("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Ge(33,Ha)))},dependencies:[He,he,fe,Pe,Be,$e,Ke,_e,ve,be,Ie,Te,Ee,Me,Le,we,ye,Re,De,tt,it,xe,ke,at,O,dt,vt,Ze,ot,nt],encapsulation:2});var Mo=Pi;var us=["vform"];function fs(i,n){if(i&1){let e=y();a(0,"div",7)(1,"button",8),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",9),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var Bi=class Bi{constructor(n,e,o,t,c,u){this.data=n;this.dialogRef=e;this.cmsStoreService=o;this.cdr=t;this.publicHelper=c;this.translate=u;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new We;this.formInfo=new Ye;this.dataModel={};this.fieldsInfo=new Map;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.dataModel=n?.item??{}}ngOnInit(){this.translate.get("TITLE.VIEW").subscribe(n=>{let e=this.dataModel?.appInfo?` ${this.dataModel.appInfo}`:"";this.formInfo.formTitle=`${n}${e}`}),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(n=>n.tokenInfoStore).subscribe(n=>U(this,null,function*(){this.tokenInfo=n,this.cdr.markForCheck()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(n=>n.unsubscribe())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Bi.\u0275fac=function(e){return new(e||Bi)(p(ne),p(oe),p(G),p(P),p(H),p(B))},Bi.\u0275cmp=V({type:Bi,selectors:[["app-core-log-micro-service-ping-view"]],viewQuery:function(e,o){if(e&1&&Z(us,5),e&2){let t;ee(t=te())&&(o.formGroup=t.first)}},standalone:!1,decls:9,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[3,"formInfo"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,o){e&1&&(a(0,"div",0),l(1),r(),a(2,"div",1),v(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),r(),a(5,"div",4),v(6,"app-cms-form-result-message",5),r(),a(7,"div",6),T(8,fs,5,3,"div",7),r()),e&2&&(s(),d(" ",o.formInfo.formTitle,`
`),s(2),_("optionsInfoAreaId",o.constructorInfoAreaId),s(),_("dataModel",o.dataModel)("optionMethod",1),s(2),_("formInfo",o.formInfo),s(2),L(o.formInfo.submitButtonEnabled?8:-1))},dependencies:[re,ft,Xe,O],encapsulation:2});var Io=Bi;function Ss(i,n){if(i&1&&(a(0,"div",16),l(1),r()),i&2){let e=C();s(),z(e.errorMessage)}}function Cs(i,n){if(i&1&&(a(0,"mat-header-cell",32),l(1),h(2,"translate"),r()),i&2){let e=C();s(),d(" ",(e.fieldsInfo.appInfo==null?null:e.fieldsInfo.appInfo.fieldTitle)||g(2,1,"ROUTE.CORELOG.MICROSERVICEPING_APPINFO")," ")}}function hs(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.appInfo||"-"," ")}}function gs(i,n){if(i&1&&(a(0,"mat-header-cell",32),l(1),h(2,"translate"),r()),i&2){let e=C();s(),d(" ",(e.fieldsInfo.rttMs==null?null:e.fieldsInfo.rttMs.fieldTitle)||g(2,1,"ROUTE.CORELOG.MICROSERVICEPING_RTT")," ")}}function _s(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.rttMs??"-"," ms ")}}function vs(i,n){if(i&1&&(a(0,"mat-header-cell",32),l(1),h(2,"translate"),r()),i&2){let e=C();s(),d(" ",(e.fieldsInfo.pingTimestamp==null?null:e.fieldsInfo.pingTimestamp.fieldTitle)||g(2,1,"ROUTE.CORELOG.MICROSERVICEPING_PINGTIME")," ")}}function bs(i,n){if(i&1&&(a(0,"mat-cell",33),l(1),r()),i&2){let e=n.$implicit,o=C();s(),d(" ",o.getPingTimestamp(e)," ")}}function Ms(i,n){if(i&1&&(a(0,"mat-header-cell",32),l(1),h(2,"translate"),r()),i&2){let e=C();s(),d(" ",(e.fieldsInfo.pongTimestamp==null?null:e.fieldsInfo.pongTimestamp.fieldTitle)||g(2,1,"ROUTE.CORELOG.MICROSERVICEPING_PONGTIME")," ")}}function Is(i,n){if(i&1&&(a(0,"mat-cell",33),l(1),r()),i&2){let e=n.$implicit,o=C();s(),d(" ",o.getPongTimestamp(e)," ")}}function Es(i,n){i&1&&(a(0,"mat-header-cell"),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"TITLE.OPTION")," "))}function ws(i,n){if(i&1){let e=y();a(0,"mat-cell",34)(1,"button",35),E("click",function(t){return f(e),S(t.stopPropagation())}),a(2,"mat-icon"),l(3,"more_vert"),r()(),a(4,"mat-menu",null,1)(6,"button",36),E("click",function(){let t=f(e).$implicit,c=C();return S(c.onActionButtonViewRow(t))}),a(7,"mat-icon"),l(8,"visibility"),r(),a(9,"span"),l(10),h(11,"translate"),r()()()()}if(i&2){let e=J(5);s(),_("matMenuTriggerFor",e),s(9),z(g(11,2,"ACTION.VIEW"))}}function ys(i,n){i&1&&v(0,"mat-header-row")}function Ts(i,n){if(i&1){let e=y();a(0,"mat-row",37),E("click",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))})("rtclick",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))}),r()}if(i&2){let e=n.$implicit,o=C();ie("ntk-row-selected",e.id===(o.tableRowSelected==null?null:o.tableRowSelected.id))}}function Ls(i,n){i&1&&(a(0,"p",30),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"ROUTE.CORELOG.MICROSERVICEPING_EMPTY")," "))}var Oi=class Oi{constructor(n,e,o,t,c,u,m,b){this.pingService=n;this.tokenHelper=e;this.translate=o;this.publicHelper=t;this.pageInfo=c;this.cmsStoreService=u;this.cdr=m;this.dialog=b;this.constructorInfoAreaId=this.constructor.name;this.pingList=[];this.tableSource=new co([]);this.tableRowSelected=null;this.statusLoading=!1;this.errorMessage=null;this.viewGuideNotice=!1;this.fieldsInfo=new Map;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["appInfo","rttMs","pingTimestamp","pongTimestamp","Action"];this.tabledisplayedColumnsMobileSource=["appInfo","rttMs","pingTimestamp","pongTimestamp"];this.tableRowSelect2Click=!1;this.destroy$=new li;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.cmsStoreService.getStateAll.tokenInfoStore),this.loadPingList()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getListFromResponse(n){if(!n)return[];let e=n,o=e.listItems??e.ListItems??e.items??e.Items??e.data??e.Data;return(Array.isArray(o)?o:[]).map(c=>this.normalizePingItem(c))}normalizePingItem(n){if(!n||typeof n!="object")return{};let e=n,o=(t,c)=>e[t]??e[c];return{id:o("id","Id"),requestId:o("requestId","RequestId")??"",appInfo:o("appInfo","AppInfo")??"",pingTimestamp:o("pingTimestamp","PingTimestamp"),pongTimestamp:o("pongTimestamp","PongTimestamp"),rttMs:o("rttMs","RttMs")??0}}loadPingList(){this.statusLoading=!0,this.errorMessage=null;let n=new Ve;n.accessLoad=!0,this.pingService.ServiceGetAll(n).pipe(It(this.destroy$)).subscribe({next:e=>{this.statusLoading=!1,e?.isSuccess?(this.pingList=this.getListFromResponse(e),this.tableSource.data=this.pingList,this.errorMessage=null):(this.pingList=[],this.tableSource.data=[],this.errorMessage=e?.errorMessage??"\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u0644\u06CC\u0633\u062A Ping"),this.cdr.markForCheck()},error:e=>{this.statusLoading=!1,this.pingList=[],this.tableSource.data=[],this.errorMessage=e?.message||e?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627 \u0633\u0631\u0648\u0631",this.cdr.markForCheck()}})}onActionTableRowSelect(n,e=null){if(e&&e.preventDefault(),this.tableRowSelected=n,e?.button===2){setTimeout(()=>{this.tableRowSelect2Click=!0},100);return}this.cdr.markForCheck()}onTableSortData(n){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===n.active&&(this.tableSource.sort.start==="asc"?n.start="desc":this.tableSource.sort.start==="desc"?n.start="asc":n.start="desc"),this.tableSource.sort=n,this.cdr.markForCheck()}getPingTimestamp(n){let e=n?.pingTimestamp;if(e==null)return"-";let o=typeof e=="string"?new Date(e):e;return isNaN(o.getTime())?"-":o.toLocaleString("fa-IR")}getPongTimestamp(n){let e=n?.pongTimestamp;if(e==null)return"-";let o=typeof e=="string"?new Date(e):e;return isNaN(o.getTime())?"-":o.toLocaleString("fa-IR")}trackById(n,e){return e?.id??e?.requestId??`idx-${n}`}onActionButtonReload(){this.loadPingList()}onActionButtonViewRow(n=this.tableRowSelected){if(!n)return;let e=this.publicHelper.isMobile?"dialog-fullscreen":"dialog-min";this.dialog.open(Io,{height:"90%",panelClass:e,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{item:n}})}};Oi.\u0275fac=function(e){return new(e||Oi)(p(ao),p(W),p(B),p(H),p(Ae),p(G),p(P),p(ge))},Oi.\u0275cmp=V({type:Oi,selectors:[["app-core-log-micro-service-ping-list"]],standalone:!1,decls:36,vars:15,consts:[["tableSort","matSort"],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click","disabled"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],["cms-action-main",""],["cms-action-row",""],["cms-action-area",""],["cms-body",""],[1,"alert","alert-error"],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","appInfo"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","rttMs"],["matColumnDef","pingTimestamp"],["style","direction: ltr",4,"matCellDef"],["matColumnDef","pongTimestamp"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],[1,"empty-message"],["cms-footer",""],["mat-sort-header",""],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(e,o){if(e&1){let t=y();a(0,"app-cms-html-list",2),A("optionActionGuideNoticeDisplayChange",function(u){return f(t),D(o.viewGuideNotice,u)||(o.viewGuideNotice=u),S(u)}),K(1,3)(2,4)(3,5),M(4,6),a(5,"a",7),E("click",function(){return f(t),S(o.viewGuideNotice=!o.viewGuideNotice)}),v(6,"i",8),r(),a(7,"button",9),E("click",function(){return f(t),S(o.onActionButtonReload())}),v(8,"i",10),r(),I(),K(9,11)(10,12)(11,13)(12,14),M(13,15),T(14,Ss,2,1,"div",16),a(15,"mat-table",17,0),E("matSortChange",function(){f(t);let u=J(16);return S(o.onTableSortData(u))}),M(17,18),w(18,Cs,3,3,"mat-header-cell",19)(19,hs,2,1,"mat-cell",20),I(),M(20,21),w(21,gs,3,3,"mat-header-cell",19)(22,_s,2,1,"mat-cell",20),I(),M(23,22),w(24,vs,3,3,"mat-header-cell",19)(25,bs,2,1,"mat-cell",23),I(),M(26,24),w(27,Ms,3,3,"mat-header-cell",19)(28,Is,2,1,"mat-cell",23),I(),M(29,25),w(30,Es,3,3,"mat-header-cell",26)(31,ws,12,4,"mat-cell",27),I(),w(32,ys,1,0,"mat-header-row",28)(33,Ts,1,2,"mat-row",29),r(),T(34,Ls,3,3,"p",30),I(),K(35,31),r()}e&2&&(_("optionsListInfoAreaId",o.constructorInfoAreaId)("optionGuideNoticeKey",""),R("optionActionGuideNoticeDisplay",o.viewGuideNotice),_("optionTreeDisplay",!1)("optionActionRowId",o.tableRowSelected==null?null:o.tableRowSelected.id)("optionActionRowDisplayMenu",o.tableRowSelect2Click)("optionSelectRowItemTitle",o.tableRowSelected==null?null:o.tableRowSelected.appInfo),s(7),_("disabled",o.statusLoading),s(),ie("rotation360",o.statusLoading),s(6),L(o.errorMessage?14:-1),s(),_("dataSource",o.tableSource),s(17),_("matHeaderRowDef",o.tabledisplayedColumns),s(),_("matRowDefColumns",o.tabledisplayedColumns),s(),L(!o.statusLoading&&!(o.pingList!=null&&o.pingList.length)?34:-1))},dependencies:[he,fe,Pe,Sn,Be,_e,ve,be,Ie,Te,Ee,Me,Le,we,ye,Re,De,xe,ke,O],styles:[".alert[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:8px;margin-bottom:1rem}.alert.alert-error[_ngcontent-%COMP%]{background:#fef2f2;color:#b91c1c;border:1px solid #fecaca}.empty-message[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#64748b}"]});var Eo=Oi;var Rs=["vform"];function Ds(i,n){if(i&1&&(a(0,"div",7),l(1),r()),i&2){let e=C();s(),z(e.errorMessage)}}function As(i,n){if(i&1&&(a(0,"mat-chip",24),l(1),r()),i&2){let e=n.$implicit;s(),z(e)}}function xs(i,n){if(i&1&&(a(0,"div",18),kt(1,As,2,1,"mat-chip",24,xt),r()),i&2){let e=C();s(),Nt(e.dataModel.activeQueues)}}function ks(i,n){i&1&&(a(0,"span",19),l(1,"\u0647\u06CC\u0686 Queue \u0641\u0639\u0627\u0644\u06CC \u0648\u062C\u0648\u062F \u0646\u062F\u0627\u0631\u062F"),r())}function Ns(i,n){if(i&1&&(a(0,"div",2)(1,"mat-card",11)(2,"mat-card-header")(3,"mat-card-title"),l(4,"\u0622\u0645\u0627\u0631 \u0639\u0645\u0644\u06A9\u0631\u062F"),r()(),a(5,"mat-card-content")(6,"pre",25),l(7),h(8,"json"),r()()()()),i&2){let e=C();s(7),z(g(8,1,e.dataModel.operationStatisticsJson))}}function Vs(i,n){if(i&1&&(a(0,"div",2)(1,"mat-card",11)(2,"mat-card-header")(3,"mat-card-title"),l(4,"\u0648\u0636\u0639\u06CC\u062A SMS Provider"),r()(),a(5,"mat-card-content")(6,"pre",25),l(7),h(8,"json"),r()()()()),i&2){let e=C();s(7),z(g(8,1,e.dataModel.smsProviderStatusJson))}}function Ps(i,n){if(i&1){let e=y();a(0,"div",23)(1,"button",26),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",27),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var Gi=class Gi{constructor(n,e,o,t,c,u,m){this.data=n;this.dialogRef=e;this.cmsStoreService=o;this.cdr=t;this.publicHelper=c;this.translate=u;this.statusService=m;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new We;this.formInfo=new Ye;this.dataModel={};this.fieldsInfo=new Map;this.unsubscribe=[];this.destroy$=new li;this.pingLoading=!1;this.commandLoading=!1;this.errorMessage=null;this.MicroServiceCommandTypeEnum=wt;this.publicHelper.processService.cdr=this.cdr,this.dataModel=n?.item??{}}ngOnInit(){this.translate.get("TITLE.VIEW").subscribe(n=>{let e=this.dataModel?.appInfo?` ${this.dataModel.appInfo}`:"";this.formInfo.formTitle=`${n}${e}`}),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(n=>n.tokenInfoStore).subscribe(n=>U(this,null,function*(){this.tokenInfo=n,this.cdr.markForCheck()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(n=>n.unsubscribe()),this.destroy$.next(),this.destroy$.complete()}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionPing(){if(!this.dataModel)return;let n=this.dataModel.routeTarget||this.dataModel.appInfo;n&&(this.pingLoading=!0,this.errorMessage=null,this.statusService.ServicePing(n,15).pipe(It(this.destroy$)).subscribe({next:e=>{this.pingLoading=!1,e?.isSuccess?(this.errorMessage=null,alert(`Ping \u0645\u0648\u0641\u0642 - RTT: ${e.item?.rttMs||0}ms`)):this.errorMessage=e?.errorMessage||"Ping \u0646\u0627\u0645\u0648\u0641\u0642",this.cdr.markForCheck()},error:e=>{this.pingLoading=!1,this.errorMessage=e?.message||e?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 Ping",this.cdr.markForCheck()}}))}onActionReloadConfig(){if(!this.dataModel)return;let n=this.dataModel.routeTarget||this.dataModel.appInfo;n&&(this.commandLoading=!0,this.errorMessage=null,this.statusService.ServiceSendCommand(n,{commandType:wt.ReloadConfig}).pipe(It(this.destroy$)).subscribe({next:e=>{this.commandLoading=!1,e?.isSuccess?(this.errorMessage=null,alert("\u062F\u0633\u062A\u0648\u0631 Reload Config \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0631\u0633\u0627\u0644 \u0634\u062F")):this.errorMessage=e?.errorMessage||"\u0627\u0631\u0633\u0627\u0644 \u062F\u0633\u062A\u0648\u0631 \u0646\u0627\u0645\u0648\u0641\u0642",this.cdr.markForCheck()},error:e=>{this.commandLoading=!1,this.errorMessage=e?.message||e?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0627\u0631\u0633\u0627\u0644 \u062F\u0633\u062A\u0648\u0631",this.cdr.markForCheck()}}))}onActionBack(){this.onFormCancel()}};Gi.\u0275fac=function(e){return new(e||Gi)(p(ne),p(oe),p(G),p(P),p(H),p(B),p(ui))},Gi.\u0275cmp=V({type:Gi,selectors:[["app-core-log-micro-service-status-view"]],viewQuery:function(e,o){if(e&1&&Z(Rs,5),e&2){let t;ee(t=te())&&(o.formGroup=t.first)}},standalone:!1,decls:99,vars:27,consts:[[1,"ntk-cms-html-card-header"],[1,"row"],[1,"col-12"],[1,"col-12","text-end"],["type","button","mat-raised-button","","color","primary",1,"m-1",3,"click","disabled"],["type","button","mat-raised-button","","color","accent",1,"m-1",3,"click","disabled"],["type","button","mat-button","",1,"m-1",3,"click"],[1,"alert","alert-danger","m-2"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[1,"col-12","col-md-6"],[1,"m-2"],["matListItemTitle",""],["matListItemLine","",1,"font-bold"],["matListItemLine",""],["color","primary"],["color","accent"],["color","warn"],[1,"mt-2"],[1,"text-muted"],[1,"ntk-cms-html-card-message"],[3,"formInfo"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["color","primary",1,"mr-1","mb-1"],[1,"p-3","bg-light","border","rounded"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),l(4),r()()(),a(5,"div",1)(6,"div",3)(7,"button",4),E("click",function(){return o.onActionPing()}),a(8,"mat-icon"),l(9,"send"),r(),l(10),r(),a(11,"button",5),E("click",function(){return o.onActionReloadConfig()}),a(12,"mat-icon"),l(13,"refresh"),r(),l(14),r(),a(15,"button",6),E("click",function(){return o.onActionBack()}),a(16,"mat-icon"),l(17,"arrow_back"),r(),l(18," \u0628\u0627\u0632\u06AF\u0634\u062A "),r()()(),T(19,Ds,2,1,"div",7),r(),a(20,"div",8),v(21,"app-progress-spinner",9),a(22,"div",1)(23,"div",10)(24,"mat-card",11)(25,"mat-card-header")(26,"mat-card-title"),l(27,"\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0627\u0635\u0644\u06CC"),r()(),a(28,"mat-card-content")(29,"mat-list")(30,"mat-list-item")(31,"span",12),l(32,"App Info:"),r(),a(33,"span",13),l(34),r()(),a(35,"mat-list-item")(36,"span",12),l(37,"App Version:"),r(),a(38,"span",14),l(39),r()(),a(40,"mat-list-item")(41,"span",12),l(42,"App Location:"),r(),a(43,"span",14),l(44),r()(),a(45,"mat-list-item")(46,"span",12),l(47,"App Info Start:"),r(),a(48,"span",14),l(49),h(50,"date"),r()(),a(51,"mat-list-item")(52,"span",12),l(53,"Create Date Message:"),r(),a(54,"span",14),l(55),h(56,"date"),r()()()()()(),a(57,"div",10)(58,"mat-card",11)(59,"mat-card-header")(60,"mat-card-title"),l(61,"\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0645\u0633\u06CC\u0631\u06CC\u0627\u0628\u06CC \u0648 RabbitMQ"),r()(),a(62,"mat-card-content")(63,"mat-list")(64,"mat-list-item")(65,"span",12),l(66,"Instance Identifier:"),r(),a(67,"span",14)(68,"mat-chip",15),l(69),r()()(),a(70,"mat-list-item")(71,"span",12),l(72,"Runtime Identity:"),r(),a(73,"span",14)(74,"mat-chip",16),l(75),r()()(),a(76,"mat-list-item")(77,"span",12),l(78,"Route Target:"),r(),a(79,"span",14)(80,"mat-chip",17),l(81),r()()(),a(82,"mat-list-item")(83,"span",12),l(84,"RabbitMQ UserName:"),r(),a(85,"span",14),l(86),r()(),a(87,"mat-list-item")(88,"span",12),l(89,"Queue\u0647\u0627\u06CC \u0641\u0639\u0627\u0644:"),r(),a(90,"span",14),T(91,xs,3,0,"div",18)(92,ks,2,0,"span",19),r()()()()()(),T(93,Ns,9,3,"div",2),T(94,Vs,9,3,"div",2),r()(),a(95,"div",20),v(96,"app-cms-form-result-message",21),r(),a(97,"div",22),T(98,Ps,5,3,"div",23),r()),e&2&&(s(4),z(o.formInfo.formTitle),s(3),_("disabled",o.pingLoading),s(3),d(" ",o.pingLoading?"\u062F\u0631 \u062D\u0627\u0644 Ping...":"Ping"," "),s(),_("disabled",o.commandLoading),s(3),d(" ",o.commandLoading?"\u062F\u0631 \u062D\u0627\u0644 \u0627\u0631\u0633\u0627\u0644...":"Reload Config"," "),s(5),L(o.errorMessage?19:-1),s(2),_("optionsInfoAreaId",o.constructorInfoAreaId),s(13),z(o.dataModel.appInfo||"-"),s(5),d("v",o.dataModel.appVersion||"-"),s(5),z(o.dataModel.appLocation||"-"),s(5),d(" ",o.dataModel.appInfoStart?Et(50,21,o.dataModel.appInfoStart,"yyyy-MM-dd HH:mm:ss"):"-"," "),s(6),d(" ",o.dataModel.createDateMessage?Et(56,24,o.dataModel.createDateMessage,"yyyy-MM-dd HH:mm:ss"):"-"," "),s(14),z(o.dataModel.instanceIdentifier||"-"),s(6),z(o.dataModel.runtimeIdentity||"-"),s(6),z(o.dataModel.routeTarget||"-"),s(5),z(o.dataModel.rabbitMQUserName||"-"),s(5),L(o.dataModel.activeQueues&&o.dataModel.activeQueues.length>0?91:92),s(2),L(o.dataModel.operationStatisticsJson?93:-1),s(),L(o.dataModel.smsProviderStatusJson?94:-1),s(2),_("formInfo",o.formInfo),s(2),L(o.formInfo.submitButtonEnabled?98:-1))},dependencies:[en,tn,nn,rn,on,an,fe,un,fn,pn,dn,re,Xe,zo,Qo,O],encapsulation:2});var wo=Gi;function Bs(i,n){if(i&1&&(a(0,"div",36)(1,"div",37)(2,"strong"),l(3),r()()()),i&2){let e=C(2);s(3),d("RTT: ",e.pingResult.rttMs??"-"," ms")}}function Os(i,n){if(i&1&&(a(0,"div",36)(1,"div",38),l(2),r()()),i&2){let e=C(2);s(2),z(e.errorMessage)}}function Gs(i,n){if(i&1){let e=y();a(0,"div",23)(1,"button",24),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewRow(t.tableRowSelected))}),v(2,"i",25)(3,"br"),r(),a(4,"p",26),l(5),h(6,"translate"),r()(),a(7,"div",23)(8,"button",8),E("click",function(){f(e);let t=C();return S(t.onPing())}),v(9,"i",27)(10,"br"),r(),a(11,"p",26),l(12),h(13,"translate"),r()(),a(14,"div",23)(15,"button",28),E("click",function(){f(e);let t=C();return S(t.onSendCommand(t.MicroServiceCommandTypeEnum.PauseStatus))}),v(16,"i",29)(17,"br"),r(),a(18,"p",26),l(19),r()(),a(20,"div",23)(21,"button",30),E("click",function(){f(e);let t=C();return S(t.onSendCommand(t.MicroServiceCommandTypeEnum.ResumeStatus))}),v(22,"i",31)(23,"br"),r(),a(24,"p",26),l(25),r()(),a(26,"div",23)(27,"button",32),E("click",function(){f(e);let t=C();return S(t.onSendCommand(t.MicroServiceCommandTypeEnum.ReloadConfig))}),v(28,"i",33)(29,"br"),r(),a(30,"p",26),l(31),r()(),a(32,"div",23)(33,"button",34),E("click",function(){f(e);let t=C();return S(t.onSendCommand(t.MicroServiceCommandTypeEnum.UpdateSettings))}),v(34,"i",35)(35,"br"),r(),a(36,"p",26),l(37),r()(),T(38,Bs,4,1,"div",36),T(39,Os,3,1,"div",36)}if(i&2){let e=C();s(5),d(" ",g(6,13,"ACTION.VIEW")," "),s(3),_("disabled",e.pingLoading),s(4),d(" ",e.pingLoading?g(13,15,"ROUTE.CORELOG.MICROSERVICEMONITOR_PINGING"):"Ping"," "),s(3),_("disabled",e.commandLoading),s(4),d(" ",e.getCommandLabel(e.MicroServiceCommandTypeEnum.PauseStatus)," "),s(2),_("disabled",e.commandLoading),s(4),d(" ",e.getCommandLabel(e.MicroServiceCommandTypeEnum.ResumeStatus)," "),s(2),_("disabled",e.commandLoading),s(4),d(" ",e.getCommandLabel(e.MicroServiceCommandTypeEnum.ReloadConfig)," "),s(2),_("disabled",e.commandLoading),s(4),d(" ",e.getCommandLabel(e.MicroServiceCommandTypeEnum.UpdateSettings)," "),s(),L(e.pingResult?38:-1),s(),L(e.errorMessage?39:-1)}}function Hs(i,n){if(i&1&&(a(0,"div",18),l(1),r()),i&2){let e=C();s(),z(e.errorMessage)}}function Fs(i,n){i&1&&(a(0,"div",19),v(1,"i",39),a(2,"p"),l(3),h(4,"translate"),r()()),i&2&&(s(3),z(g(4,1,"ACTION.LOADING")))}function js(i,n){i&1&&(a(0,"mat-header-cell",56),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"ROUTE.CORELOG.MICROSERVICEMONITOR_APPINFO")," "))}function Us(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),z(e.appInfo||"-")}}function Ws(i,n){i&1&&(a(0,"mat-header-cell",56),l(1," Instance Identifier "),r())}function qs(i,n){if(i&1&&(a(0,"mat-cell")(1,"span",57),l(2),r()()),i&2){let e=n.$implicit;s(2),z(e.instanceIdentifier||"-")}}function Qs(i,n){i&1&&(a(0,"mat-header-cell",56),l(1," Runtime Identity "),r())}function zs(i,n){if(i&1&&(a(0,"mat-cell")(1,"span",58),l(2),r()()),i&2){let e=n.$implicit;s(2),z(e.runtimeIdentity||"-")}}function Js(i,n){i&1&&(a(0,"mat-header-cell",56),l(1," RabbitMQ UserName "),r())}function $s(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.rabbitMQUserName||"-"," ")}}function Ks(i,n){i&1&&(a(0,"mat-header-cell"),l(1," Queue\u0647\u0627\u06CC \u0641\u0639\u0627\u0644 "),r())}function Ys(i,n){i&1&&(a(0,"span"),l(1,", "),r())}function Xs(i,n){if(i&1&&(a(0,"span",62),l(1),w(2,Ys,2,0,"span",59),r()),i&2){let e=n.$implicit,o=n.last;s(),d(" ",e),s(),_("ngIf",!o)}}function Zs(i,n){if(i&1&&(a(0,"span"),w(1,Xs,3,2,"span",61),r()),i&2){let e=C().$implicit;s(),_("ngForOf",e.activeQueues)}}function el(i,n){i&1&&(a(0,"span",63),l(1," - "),r())}function tl(i,n){if(i&1&&(a(0,"mat-cell"),w(1,Zs,2,1,"span",59)(2,el,2,0,"span",60),r()),i&2){let e=n.$implicit;s(),_("ngIf",e.activeQueues&&e.activeQueues.length>0),s(),_("ngIf",!e.activeQueues||e.activeQueues.length===0)}}function il(i,n){i&1&&(a(0,"mat-header-cell",56),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"ROUTE.CORELOG.MICROSERVICEMONITOR_VERSION")," "))}function ol(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d("v",e.appVersion||"-")}}function nl(i,n){i&1&&(a(0,"mat-header-cell"),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"ROUTE.CORELOG.MICROSERVICEMONITOR_STATUS")," "))}function rl(i,n){if(i&1&&(a(0,"mat-cell")(1,"span",64),v(2,"span",65),l(3),h(4,"translate"),h(5,"translate"),r()()),i&2){let e=n.$implicit,o=C(2);s(2),ie("online",o.isOnline(e)),s(),d(" ",o.isOnline(e)?g(4,3,"ROUTE.CORELOG.MICROSERVICEMONITOR_ONLINE"):g(5,5,"ROUTE.CORELOG.MICROSERVICEMONITOR_OFFLINE")," ")}}function al(i,n){i&1&&(a(0,"mat-header-cell",56),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"ROUTE.CORELOG.MICROSERVICEMONITOR_LASTUPDATE")," "))}function sl(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit,o=C(2);s(),z(o.getLastUpdate(e))}}function ll(i,n){i&1&&(a(0,"mat-header-cell"),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"TITLE.OPTION")," "))}function cl(i,n){if(i&1){let e=y();a(0,"mat-cell",66)(1,"button",67),h(2,"translate"),E("click",function(){let t=f(e).$implicit,c=C(2);return S(c.onActionView(t))}),a(3,"mat-icon"),l(4,"visibility"),r()(),a(5,"button",68),E("click",function(){let t=f(e).$implicit,c=C(2);return S(c.onActionPing(t))}),a(6,"mat-icon"),l(7,"send"),r()()()}if(i&2){let e=C(2);s(),_("matTooltip",Uo(g(2,3,"ACTION.VIEW"))),s(4),_("disabled",e.pingLoading)}}function ml(i,n){i&1&&v(0,"mat-header-row")}function dl(i,n){if(i&1){let e=y();a(0,"mat-row",69),E("click",function(t){let c=f(e).$implicit,u=C(2);return S(u.onActionTableRowSelect(c,t))})("rtclick",function(t){let c=f(e).$implicit,u=C(2);return S(u.onActionTableRowSelect(c,t))}),r()}if(i&2){let e=n.$implicit,o=C(2);ie("ntk-row-selected",e.id===(o.tableRowSelected==null?null:o.tableRowSelected.id))}}function pl(i,n){if(i&1){let e=y();a(0,"mat-table",40,0),E("matSortChange",function(){f(e);let t=J(1),c=C();return S(c.onTableSortData(t))}),M(2,41),w(3,js,3,3,"mat-header-cell",42)(4,Us,2,1,"mat-cell",43),I(),M(5,44),w(6,Ws,2,0,"mat-header-cell",42)(7,qs,3,1,"mat-cell",43),I(),M(8,45),w(9,Qs,2,0,"mat-header-cell",42)(10,zs,3,1,"mat-cell",43),I(),M(11,46),w(12,Js,2,0,"mat-header-cell",42)(13,$s,2,1,"mat-cell",43),I(),M(14,47),w(15,Ks,2,0,"mat-header-cell",48)(16,tl,3,2,"mat-cell",43),I(),M(17,49),w(18,il,3,3,"mat-header-cell",42)(19,ol,2,1,"mat-cell",43),I(),M(20,50),w(21,nl,3,3,"mat-header-cell",48)(22,rl,6,7,"mat-cell",43),I(),M(23,51),w(24,al,3,3,"mat-header-cell",42)(25,sl,2,1,"mat-cell",43),I(),M(26,52),w(27,ll,3,3,"mat-header-cell",48)(28,cl,8,5,"mat-cell",53),I(),w(29,ml,1,0,"mat-header-row",54)(30,dl,1,2,"mat-row",55),r()}if(i&2){let e=C();_("dataSource",e.tableSource),s(29),_("matHeaderRowDef",e.tabledisplayedColumns),s(),_("matRowDefColumns",e.tabledisplayedColumns)}}function ul(i,n){i&1&&(a(0,"div",21),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"ROUTE.CORELOG.MICROSERVICEMONITOR_EMPTY")," "))}var Hi=class Hi{constructor(n,e,o,t,c,u,m,b){this.statusService=n;this.tokenHelper=e;this.translate=o;this.publicHelper=t;this.pageInfo=c;this.cmsStoreService=u;this.cdr=m;this.dialog=b;this.constructorInfoAreaId=this.constructor.name;this.statusList=[];this.tableSource=new co([]);this.tableRowSelected=null;this.pingResult=null;this.pingLoading=!1;this.commandLoading=!1;this.statusLoading=!1;this.errorMessage=null;this.pollIntervalSeconds=10;this.appInfoFilter="";this.viewGuideNotice=!1;this.fieldsInfo=new Map;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["appInfo","instanceIdentifier","runtimeIdentity","rabbitMQUserName","activeQueues","appVersion","status","lastUpdate","Action"];this.tabledisplayedColumnsMobileSource=["appInfo","instanceIdentifier","runtimeIdentity","appVersion","status","lastUpdate"];this.MicroServiceCommandTypeEnum=wt;this.pollSubscription=null;this.destroy$=new li;this.tableRowSelect2Click=!1;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.cmsStoreService.getStateAll.tokenInfoStore),this.loadStatus(),this.startPolling()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.stopPolling()}getProp(n,e,o){if(!n||typeof n!="object")return;let t=n;return t[e]??t[o]}normalizeStatusItem(n){if(!n||typeof n!="object")return{};let e=n;return Ho(Go({},e),{id:this.getProp(e,"id","Id"),appInfo:this.getProp(e,"appInfo","AppInfo")??"",appVersion:this.getProp(e,"appVersion","AppVersion")??"",appLocation:this.getProp(e,"appLocation","AppLocation")??"",appInfoStart:this.getProp(e,"appInfoStart","AppInfoStart"),createDateMessage:this.getProp(e,"createDateMessage","CreateDateMessage"),operationStatisticsJson:this.getProp(e,"operationStatisticsJson","OperationStatisticsJson")??"",smsProviderStatusJson:this.getProp(e,"smsProviderStatusJson","SmsProviderStatusJson")??"",instanceIdentifier:this.getProp(e,"instanceIdentifier","InstanceIdentifier"),runtimeIdentity:this.getProp(e,"runtimeIdentity","RuntimeIdentity"),activeQueuesJson:this.getProp(e,"activeQueuesJson","ActiveQueuesJson"),rabbitMQUserName:this.getProp(e,"rabbitMQUserName","RabbitMQUserName")})}getListFromResponse(n){if(!n)return[];let e=[];if(Array.isArray(n))e=n;else if(typeof n=="object"){let o=n,t=o.listItems??o.ListItems??o.items??o.Items??o.data??o.Data;e=Array.isArray(t)?t:[]}return e.map(o=>this.normalizeStatusItem(o))}isSuccessResponse(n){if(!n||typeof n!="object")return!1;let e=n;return e.isSuccess===!0||e.IsSuccess===!0}getErrorMessage(n){if(!n||typeof n!="object")return"\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u0648\u0636\u0639\u06CC\u062A";let e=n;return e.errorMessage??e.ErrorMessage??"\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u0648\u0636\u0639\u06CC\u062A"}loadStatus(){let n=this.appInfoFilter?.trim();this.errorMessage=null,(n?this.statusService.ServiceGetStatusByAppInfoFilter(n):this.statusService.ServiceGetAllStatus()).pipe(It(this.destroy$)).subscribe({next:o=>{this.statusLoading=!1,this.isSuccessResponse(o)?(this.statusList=this.getListFromResponse(o),this.tableSource.data=this.statusList,this.errorMessage=null):(this.statusList=[],this.tableSource.data=[],this.errorMessage=this.getErrorMessage(o)),this.cdr.markForCheck()},error:o=>{this.statusLoading=!1,this.statusList=[],this.tableSource.data=[],this.errorMessage=o?.message||o?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627 \u0633\u0631\u0648\u0631",this.cdr.markForCheck()}})}startPolling(){this.stopPolling(),this.pollSubscription=Fo(this.pollIntervalSeconds*1e3).pipe(jo(0)).subscribe(()=>this.loadStatus())}stopPolling(){this.pollSubscription&&(this.pollSubscription.unsubscribe(),this.pollSubscription=null)}onActionTableRowSelect(n,e=null){if(e&&e.preventDefault(),this.tableRowSelected=n,this.pingResult=null,e?.button===2){setTimeout(()=>{this.tableRowSelect2Click=!0},100);return}this.cdr.markForCheck()}onPing(){let n=this.tableRowSelected;if(!n)return;let e=n.routeTarget||n.appInfo;e&&(this.pingLoading=!0,this.pingResult=null,this.errorMessage=null,this.statusService.ServicePing(e,15).pipe(It(this.destroy$)).subscribe({next:o=>{if(this.pingLoading=!1,o?.isSuccess){let t=o.item??o?.listItems?.[0];this.pingResult=t??null,this.errorMessage=null}else this.errorMessage=o?.errorMessage||"Ping \u0646\u0627\u0645\u0648\u0641\u0642";this.cdr.markForCheck()},error:o=>{this.pingLoading=!1,this.errorMessage=o?.message||o?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 Ping",this.cdr.markForCheck()}}))}onSendCommand(n){let e=this.tableRowSelected;if(!e)return;let o=e.routeTarget||e.appInfo;o&&(this.commandLoading=!0,this.errorMessage=null,this.statusService.ServiceSendCommand(o,{commandType:n}).pipe(It(this.destroy$)).subscribe({next:t=>{this.commandLoading=!1,t?.isSuccess?(this.errorMessage=null,this.loadStatus()):this.errorMessage=t?.errorMessage||"\u0627\u0631\u0633\u0627\u0644 \u062F\u0633\u062A\u0648\u0631 \u0646\u0627\u0645\u0648\u0641\u0642",this.cdr.markForCheck()},error:t=>{this.commandLoading=!1,this.errorMessage=t?.message||t?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0627\u0631\u0633\u0627\u0644 \u062F\u0633\u062A\u0648\u0631",this.cdr.markForCheck()}}))}onApplyFilter(){this.loadStatus()}onTableSortData(n){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===n.active&&(this.tableSource.sort.start==="asc"?n.start="desc":this.tableSource.sort.start==="desc"?n.start="asc":n.start="desc"),this.tableSource.sort=n,this.cdr.markForCheck()}getAppInfoStart(n){let e=n?.appInfoStart;if(e==null)return"-";let o=typeof e=="string"?new Date(e):e;return isNaN(o.getTime())?"-":o.toLocaleString("fa-IR")}getLastUpdate(n){let e=n?.createDateMessage;if(e==null)return"-";let o=typeof e=="string"?new Date(e):e;return isNaN(o.getTime())?"-":o.toLocaleString("fa-IR")}getCommandLabel(n){return{[wt.PauseStatus]:"\u062A\u0648\u0642\u0641 \u0648\u0636\u0639\u06CC\u062A",[wt.ResumeStatus]:"\u0627\u0632 \u0633\u0631\u06AF\u06CC\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A",[wt.ReloadConfig]:"\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F \u062A\u0646\u0638\u06CC\u0645\u0627\u062A",[wt.UpdateSettings]:"\u0628\u0647\u200C\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u062A\u0646\u0638\u06CC\u0645\u0627\u062A"}[n]??""}trackById(n,e){return e?.id??e?.appInfo??`idx-${n}`}isOnline(n){let e=n?.createDateMessage;if(e==null)return!1;let o=typeof e=="string"?new Date(e):e;return isNaN(o.getTime())?!1:Date.now()-o.getTime()<12e4}onActionButtonReload(){this.loadStatus()}onActionButtonViewRow(n=this.tableRowSelected){if(!n)return;let e=this.publicHelper.isMobile?"dialog-fullscreen":"dialog-min";this.dialog.open(wo,{height:"90%",panelClass:e,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{item:n}})}onActionView(n){this.onActionButtonViewRow(n)}onActionPing(n){this.tableRowSelected=n,this.onPing()}};Hi.\u0275fac=function(e){return new(e||Hi)(p(ui),p(W),p(B),p(H),p(Ae),p(G),p(P),p(ge))},Hi.\u0275cmp=V({type:Hi,selectors:[["app-core-log-micro-service-status-list"]],standalone:!1,decls:26,vars:20,consts:[["tableSort","matSort"],[3,"optionActionGuideNoticeDisplayChange","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click","disabled"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],[1,"filter-group","m-1"],["type","text",1,"form-control",2,"display","inline-block","width","auto",3,"ngModelChange","ngModel","placeholder"],["type","button",1,"btn","btn-primary","m-1",3,"click"],["cms-action-header-end",""],["cms-action-main",""],["cms-action-row",""],["cms-action-area",""],["cms-body",""],[1,"alert","alert-error"],[1,"text-center","p-4"],["matSort","",3,"dataSource"],[1,"cms-m-empty"],["cms-footer",""],[1,"col-4"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-signal","font-18",2,"color","#ffffff"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click","disabled"],[1,"fa-solid","fa-pause","font-18",2,"color","#ffffff"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"click","disabled"],[1,"fa-solid","fa-play","font-18",2,"color","#ffffff"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"click","disabled"],[1,"fa-solid","fa-rotate","font-18",2,"color","#ffffff"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-yellow",3,"click","disabled"],[1,"fa-solid","fa-gear","font-18",2,"color","#ffffff"],[1,"col-12"],[1,"ping-result","p-2","bg-success","text-white","rounded"],[1,"alert","alert-danger"],[1,"fa-solid","fa-spinner","fa-spin","font-24"],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","appInfo"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","instanceIdentifier"],["matColumnDef","runtimeIdentity"],["matColumnDef","rabbitMQUserName"],["matColumnDef","activeQueues"],[4,"matHeaderCellDef"],["matColumnDef","appVersion"],["matColumnDef","status"],["matColumnDef","lastUpdate"],["matColumnDef","Action"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"badge","badge-info"],[1,"badge","badge-secondary"],[4,"ngIf"],["class","text-muted",4,"ngIf"],["class","badge badge-success mr-1",4,"ngFor","ngForOf"],[1,"badge","badge-success","mr-1"],[1,"text-muted"],[1,"status-badge"],[1,"dot"],[1,"Action"],["type","button","mat-icon-button","",3,"click","matTooltip"],["type","button","mat-icon-button","","color","primary","matTooltip","Ping",3,"click","disabled"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(e,o){e&1&&(a(0,"app-cms-html-list",1),A("optionActionGuideNoticeDisplayChange",function(c){return D(o.viewGuideNotice,c)||(o.viewGuideNotice=c),c}),K(1,2)(2,3)(3,4),M(4,5),a(5,"a",6),E("click",function(){return o.viewGuideNotice=!o.viewGuideNotice}),v(6,"i",7),r(),a(7,"button",8),E("click",function(){return o.onActionButtonReload()}),v(8,"i",9),r(),a(9,"div",10)(10,"input",11),h(11,"translate"),A("ngModelChange",function(c){return D(o.appInfoFilter,c)||(o.appInfoFilter=c),c}),r(),a(12,"button",12),E("click",function(){return o.onApplyFilter()}),l(13),h(14,"translate"),r()(),I(),K(15,13)(16,14),M(17,15),T(18,Gs,40,17),I(),K(19,16),M(20,17),T(21,Hs,2,1,"div",18),T(22,Fs,5,3,"div",19)(23,pl,31,3,"mat-table",20)(24,ul,3,3,"div",21),I(),K(25,22),r()),e&2&&(_("optionsListInfoAreaId",o.constructorInfoAreaId)("optionGuideNoticeKey",""),R("optionActionGuideNoticeDisplay",o.viewGuideNotice),_("optionTreeDisplay",!1)("optionActionRowId",o.tableRowSelected==null?null:o.tableRowSelected.id)("optionActionRowDisplayMenu",o.tableRowSelect2Click)("optionSelectRowItemTitle",o.tableRowSelected==null?null:o.tableRowSelected.appInfo),s(7),_("disabled",o.statusLoading),s(),ie("rotation360",o.statusLoading),s(2),R("ngModel",o.appInfoFilter),_("placeholder",g(11,16,"ROUTE.CORELOG.MICROSERVICEMONITOR_FILTER")),s(3),d(" ",g(14,18,"ROUTE.CORELOG.MICROSERVICEMONITOR_APPLY")," "),s(5),L(o.tableRowSelected?18:-1),s(3),L(o.errorMessage&&!(o.statusList!=null&&o.statusList.length)?21:-1),s(),L(o.statusLoading?22:o.statusList!=null&&o.statusList.length?23:o.statusLoading?-1:24))},dependencies:[Wo,qo,qe,Qe,ze,he,fe,_e,ve,be,Ie,Te,Ee,Me,Le,we,ye,Re,De,sn,xe,ke,O],styles:[".filter-input[_ngcontent-%COMP%]{padding:.5rem .75rem;border:1px solid #e0e0e0;border-radius:8px;background:#fff;color:#1a1a1a;min-width:200px;font-size:.9rem}.filter-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.filter-input[_ngcontent-%COMP%]{padding:.5rem .75rem;border:1px solid var(--monitor-border);border-radius:8px;background:var(--monitor-card);color:var(--monitor-text);min-width:200px;font-size:.9rem}.filter-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.alert[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:8px;margin-bottom:1rem}.alert.alert-error[_ngcontent-%COMP%]{background:#fef2f2;color:#b91c1c;border:1px solid #fecaca}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;font-size:.75rem}.status-badge[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#ef4444}.status-badge[_ngcontent-%COMP%]   .dot.online[_ngcontent-%COMP%]{background:#22c55e;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.empty-message[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#64748b}.ping-result[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem;background:#22c55e1a;border-radius:8px;color:#22c55e;text-align:center}"]});var yo=Hi;var fl=["vform"];function Sl(i,n){if(i&1&&(a(0,"option",14),l(1),r()),i&2){let e=n.$implicit;_("value",e.value),s(),d(" ",e.description," ")}}function Cl(i,n){i&1&&(a(0,"mat-error"),l(1," SendStatusType is "),a(2,"strong"),l(3),h(4,"translate"),r()()),i&2&&(s(3),z(g(4,1,"content.required")))}function hl(i,n){if(i&1&&(a(0,"div"),v(1,"div",29),h(2,"prettyjson"),r()),i&2){let e=C();s(),_("innerHTML",g(2,1,e.dataModel),rt)}}function gl(i,n){if(i&1){let e=y();a(0,"div",28)(1,"button",30),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",31),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var Fi=class Fi extends ut{constructor(e,o,t,c,u,m,b,k,Y,Ce){super(c,new Wt,Y,Ce);this.data=e;this.dialogRef=o;this.coreEnumService=t;this.coreLogNotificationService=c;this.cmsToastrService=u;this.tokenHelper=m;this.cmsStoreService=b;this.cdr=k;this.publicHelper=Y;this.translate=Ce;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new F;this.dataModel=new Wt;this.dataModelEnumSendNotificationStatusTypeResult=new F;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e}))),this.getEnumSendNotificationStatusType()}getEnumSendNotificationStatusType(){this.coreEnumService.ServiceSendNotificationStatusTypeEnum().subscribe({next:e=>{this.dataModelEnumSendNotificationStatusTypeResult=e}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(e,o,this.constructorInfoAreaId)}),this.coreLogNotificationService.setAccessLoad(),this.coreLogNotificationService.setAccessDataType(st.Editor),this.coreLogNotificationService.ServiceGetOneById(this.requestId).subscribe({next:o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access),this.dataModel=o.item,o.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+o.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=o.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.publicHelper.processService.processStop(e)},error:o=>{this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Fi.\u0275fac=function(o){return new(o||Fi)(p(ne),p(oe),p($),p(Bt),p(q),p(W),p(G),p(P),p(H),p(B))},Fi.\u0275cmp=V({type:Fi,selectors:[["app-core-log-notification-edit"]],viewQuery:function(o,t){if(o&1&&Z(fl,5),o&2){let c;ee(c=te())&&(t.formGroup=c.first)}},standalone:!1,features:[X],decls:57,vars:29,consts:[["vform","ngForm"],["SendStatusType","ngModel"],["ModuleName",""],["ModuleEntityName",""],["ModuleEntityId",""],["Title",""],["content",""],["ReturnApi",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["id","dataModel.sendStatusType","name","dataModel.sendStatusType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleName","placeholder","ModuleName","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityName","placeholder","ModuleEntityName","id","dataModel.moduleEntityName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityId",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityId","placeholder","ModuleEntityId","id","dataModel.moduleEntityId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","placeholder","title","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.content",1,"color-highlight"],["matInput","","name","dataModel.content","type","text","placeholder","content","id","dataModel.content",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.returnApi",1,"color-highlight"],["matInput","","name","dataModel.returnApi","type","text","placeholder","ReturnApi","id","dataModel.returnApi",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"form-actions"],[3,"innerHTML"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(o,t){if(o&1){let c=y();a(0,"div",8),v(1,"app-progress-spinner",9),a(2,"div",10)(3,"p",11),l(4),r(),a(5,"p"),l(6),h(7,"translate"),r(),a(8,"form",null,0)(10,"div",12)(11,"select",13,1),A("ngModelChange",function(m){return f(c),D(t.dataModel.sendStatusType,m)||(t.dataModel.sendStatusType=m),S(m)}),kt(13,Sl,2,2,"option",14,xt),r(),a(15,"em"),l(16),h(17,"translate"),r(),T(18,Cl,5,3,"mat-error"),r(),v(19,"app-cms-site-selector",15),h(20,"translate"),v(21,"app-cms-member-selector",15),h(22,"translate"),a(23,"div",12)(24,"label",16),l(25,"ModuleName"),r(),a(26,"input",17,2),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleName,m)||(t.dataModel.moduleName=m),S(m)}),r()(),a(28,"div",12)(29,"label",18),l(30,"ModuleEntityName"),r(),a(31,"input",19,3),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleEntityName,m)||(t.dataModel.moduleEntityName=m),S(m)}),r()(),a(33,"div",12)(34,"label",20),l(35,"EntityId"),r(),a(36,"input",21,4),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleEntityId,m)||(t.dataModel.moduleEntityId=m),S(m)}),r()(),a(38,"div",12)(39,"label",22),l(40),r(),a(41,"input",23,5),A("ngModelChange",function(m){return f(c),D(t.dataModel.title,m)||(t.dataModel.title=m),S(m)}),r()(),a(43,"div",12)(44,"label",24),l(45,"content"),r(),a(46,"textarea",25,6),A("ngModelChange",function(m){return f(c),D(t.dataModel.content,m)||(t.dataModel.content=m),S(m)}),l(48,"                      "),r()(),a(49,"div",12)(50,"label",26),l(51,"ReturnApi"),r(),a(52,"textarea",27,7),A("ngModelChange",function(m){return f(c),D(t.dataModel.returnApi,m)||(t.dataModel.returnApi=m),S(m)}),l(54,"                        "),r()(),T(55,hl,3,3,"div"),T(56,gl,5,3,"div",28),r()()()}if(o&2){let c=J(12);s(),_("optionsInfoAreaId",t.constructorInfoAreaId),s(3),d(" ",t.formInfo.formTitle," "),s(2),d(" ",g(7,21,"TITLE.Be_Careful_When_Entering_Information")," "),s(5),R("ngModel",t.dataModel.sendStatusType),s(2),Nt(t.dataModelEnumSendNotificationStatusTypeResult.listItems),s(3),z(g(17,23,"TITLE.SELECT_STATUS")),s(2),L(c.errors!=null&&c.errors.required?18:-1),s(),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",g(20,25,"TITLE.SITE")),s(2),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkMemberId)("optionPlaceholder",g(22,27,"TITLE.Member")),s(5),R("ngModel",t.dataModel.moduleName),s(5),R("ngModel",t.dataModel.moduleEntityName),s(5),R("ngModel",t.dataModel.moduleEntityId),s(4),z(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),s(),R("ngModel",t.dataModel.title),s(5),R("ngModel",t.dataModel.content),s(6),R("ngModel",t.dataModel.returnApi),s(3),L(t.tokenInfo.access.userAccessAdminAllowToProfessionalData?55:-1),s(),L(t.formInfo.submitButtonEnabled?56:-1)}},dependencies:[mt,hi,gi,qe,Ci,Qe,lt,ze,ct,_i,Je,qt,gt,re,O,pt],encapsulation:2});var To=Fi;var _l=["vform"];function vl(i,n){if(i&1){let e=y();a(0,"div",7)(1,"button",8),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",9),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var ji=class ji{constructor(n,e,o,t,c,u,m,b,k,Y){this.data=n;this.dialogRef=e;this.coreEnumService=o;this.coreLogNotificationService=t;this.cmsToastrService=c;this.tokenHelper=u;this.cmsStoreService=m;this.cdr=b;this.publicHelper=k;this.translate=Y;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new We;this.dataModelResult=new F;this.dataModel=new Wt;this.formInfo=new Ye;this.dataModelEnumSendNotificationStatusTypeResult=new F;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,n&&(this.requestId=n.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(n=>{this.formInfo.formTitle=n}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(n=>n.tokenInfoStore).subscribe(n=>U(this,null,function*(){this.tokenInfo=n}))),this.getEnumSendNotificationStatusType()}getEnumSendNotificationStatusType(){this.coreEnumService.ServiceSendNotificationStatusTypeEnum().subscribe({next:n=>{this.dataModelEnumSendNotificationStatusTypeResult=n}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(n=>n.unsubscribe())}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage="";let n=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(n,e,this.constructorInfoAreaId)}),this.coreLogNotificationService.setAccessLoad(),this.coreLogNotificationService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(n)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(n,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};ji.\u0275fac=function(e){return new(e||ji)(p(ne),p(oe),p($),p(Bt),p(q),p(W),p(G),p(P),p(H),p(B))},ji.\u0275cmp=V({type:ji,selectors:[["app-core-log-notification-view"]],viewQuery:function(e,o){if(e&1&&Z(_l,5),e&2){let t;ee(t=te())&&(o.formGroup=t.first)}},standalone:!1,decls:9,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[3,"formInfo"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,o){e&1&&(a(0,"div",0),l(1),r(),a(2,"div",1),v(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),r(),a(5,"div",4),v(6,"app-cms-form-result-message",5),r(),a(7,"div",6),T(8,vl,5,3,"div",7),r()),e&2&&(s(),d(" ",o.formInfo.formTitle," "),s(2),_("optionsInfoAreaId",o.constructorInfoAreaId),s(),_("dataModel",o.dataModel)("optionMethod",1),s(2),_("formInfo",o.formInfo),s(2),L(o.formInfo.submitButtonEnabled?8:-1))},dependencies:[re,ft,Xe,O],encapsulation:2});var Lo=ji;var bl=()=>[5,10,20,100];function Ml(i,n){if(i&1){let e=y();a(0,"div",11)(1,"a",37),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewRow(t.tableRowSelected))}),v(2,"i",38)(3,"br"),r(),a(4,"p",39),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.VIEW")," "))}function Il(i,n){if(i&1){let e=y();a(0,"div",11)(1,"a",40),E("click",function(){f(e);let t=C();return S(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",41)(3,"br"),r(),a(4,"p",39),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.EDIT")," "))}function El(i,n){if(i&1){let e=y();a(0,"div",11)(1,"a",42),E("click",function(){f(e);let t=C();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",43)(3,"br"),r(),a(4,"p",39),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.DELETE")," "))}function wl(i,n){if(i&1){let e=y();a(0,"div",11)(1,"a",37),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewMemberRow(t.tableRowSelected))}),v(2,"i",44)(3,"br"),r(),a(4,"p",39),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.MEMBER")," "))}function yl(i,n){if(i&1&&(a(0,"mat-header-cell",45),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Tl(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.id," ")}}function Ll(i,n){if(i&1&&(a(0,"mat-header-cell",45),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Rl(i,n){if(i&1&&(a(0,"mat-cell",46),h(1,"statusCellClass"),v(2,"i",46),h(3,"statusIconClass"),r()),i&2){let e=n.$implicit;_("ngClass",g(1,2,e.recordStatus)),s(2),_("ngClass",g(3,4,e.recordStatus))}}function Dl(i,n){if(i&1&&(a(0,"mat-header-cell",45),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Al(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmssiteinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.linkSiteId))," ")}}function xl(i,n){if(i&1&&(a(0,"mat-header-cell",45),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function kl(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.linkMemberId," ")}}function Nl(i,n){if(i&1&&(a(0,"mat-header-cell",45),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.contentType==null?null:e.fieldsInfo.contentType.fieldTitle," ")}}function Vl(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d("",e.contentType," ")}}function Pl(i,n){if(i&1&&(a(0,"mat-header-cell",45),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.senderlinkUserId==null?null:e.fieldsInfo.senderlinkUserId.fieldTitle," ")}}function Bl(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmsuserinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.senderlinkUserId))," ")}}function Ol(i,n){if(i&1&&(a(0,"mat-header-cell",45),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.receiverlinkUserId==null?null:e.fieldsInfo.receiverlinkUserId.fieldTitle," ")}}function Gl(i,n){if(i&1&&(a(0,"mat-cell",47),l(1),h(2,"cmsuserinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.receiverlinkUserId))," ")}}function Hl(i,n){if(i&1&&(a(0,"mat-header-cell",45),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.sendStatusType==null?null:e.fieldsInfo.sendStatusType.fieldTitle," ")}}function Fl(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"enums"),r()),i&2){let e=n.$implicit,o=C();s(),d(" ",Et(2,1,e.sendStatusType,o.dataModelEnumSendNotificationStatusTypeResult.listItems)," ")}}function jl(i,n){if(i&1&&(a(0,"mat-header-cell",45),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Ul(i,n){if(i&1&&(a(0,"mat-cell",48),l(1),h(2,"localeDateTime"),r()),i&2){let e=n.$implicit;s(),d(" ",g(2,1,e.createdDate)," ")}}function Wl(i,n){i&1&&(a(0,"mat-header-cell"),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"TITLE.OPTION")," "))}function ql(i,n){if(i&1&&(a(0,"mat-cell",49)(1,"button",50)(2,"mat-icon"),l(3,"more_vert"),r()(),v(4,"mat-menu",null,2),r()),i&2){let e=J(5);s(),_("matMenuTriggerFor",e)}}function Ql(i,n){i&1&&v(0,"mat-header-row")}function zl(i,n){if(i&1){let e=y();a(0,"mat-row",51),E("click",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))})("rtclick",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))}),r()}if(i&2){let e=n.$implicit,o=C();ie("ntk-row-selected",e.id===(o.tableRowSelected==null?null:o.tableRowSelected.id))}}var Ui=class Ui extends et{constructor(e,o,t,c,u,m,b,k,Y,Ce,_t,Ct,se){super(o,new Wt,Ct,m,k);this.coreEnumService=e;this.contentService=o;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=u;this.tokenHelper=m;this.cdr=b;this.translate=k;this.cmsStoreService=Y;this.router=Ce;this.pageInfo=_t;this.publicHelper=Ct;this.dialog=se;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestLinkDeviceId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new Ve;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","linkUserId","linkSiteId","linkMemberId","SendStatusType","senderlinkUserId","receiverlinkUserId","contentType","createdDate"];this.tabledisplayedColumnsMobileSource=["id","linkUserId","linkSiteId","linkMemberId","SendStatusType","senderlinkUserId","receiverlinkUserId","contentType","createdDate"];this.dataModelEnumSendNotificationStatusTypeResult=new F;this.dataModelEnumContentTypeResult=new F;this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestLinkDeviceId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDeviceId")),this.requestLinkSiteId>0){let x=new N;x.propertyName="LinkCmsSiteId",x.value=this.requestLinkSiteId,this.filteModelContent.filters.push(x)}if(this.requestLinkUserId>0){let x=new N;x.propertyName="linkUserId",x.value=this.requestLinkUserId,this.filteModelContent.filters.push(x)}if(this.requestLinkDeviceId>0){let x=new N;x.propertyName="LinkDeviceId",x.value=this.requestLinkDeviceId,this.filteModelContent.filters.push(x)}this.optionsSearch.parentMethods={onSubmit:x=>this.onSubmitOptionsSearch(x)},this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.optionsSearch.data.filterModelContent=this.filteModelContent,this.optionsSearch.data.filterActionSearchRecordStatusShow=!0,this.tokenHelper.isAdminSite?(this.optionsSearch.data.filterActionSearchLinkUserIdShow=!0,this.optionsSearch.data.filterActionSearchLinkSiteIdShow=!0):(this.optionsSearch.data.filterActionSearchLinkSiteIdShow=!1,this.optionsSearch.data.filterActionSearchLinkUserIdShow=!1)}ngOnInit(){this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))),this.getEnumSendNotificationStatusType()}getEnumSendNotificationStatusType(){this.coreEnumService.ServiceSendNotificationStatusTypeEnum().subscribe({next:e=>{this.dataModelEnumSendNotificationStatusTypeResult=e}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}filterModelCompiler(e){let o=JSON.parse(JSON.stringify(e));return this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(o.filters=[...this.filterDataModelQueryBuilder]),o}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Wt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let o=this.filterModelCompiler(this.filteModelContent);if(this.filteModelContent.filterActionSearchRecordStatus>0){let t=new N;t.propertyName="recordStatus",t.value=this.filteModelContent.filterActionSearchRecordStatus,o.filters.push(t)}if(this.filteModelContent.filterActionSearchLinkSiteId>0){let t=new N;t.propertyName="linkSiteId",t.value=this.filteModelContent.filterActionSearchLinkSiteId,o.filters.push(t)}if(this.filteModelContent.filterActionSearchLinkUserId>0){let t=new N;t.propertyName="linkUserId",t.value=this.filteModelContent.filterActionSearchLinkUserId,o.filters.push(t)}this.contentService.ServiceGetAllEditor(o).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(Lo,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(To,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var o="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{o=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(o,t).then(c=>{if(c){let u=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(u,m,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:m=>{m.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(u)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(u,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let o=new Map;this.translate.get("MESSAGE.Active").subscribe(b=>{o.set(b,0)}),this.translate.get("MESSAGE.All").subscribe(b=>{o.set(b,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(b=>{this.publicHelper.processService.processStart(t,b,this.constructorInfoAreaId)});let c=this.filterModelCompiler(this.filteModelContent);this.contentService.ServiceGetCount(c).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}});let u=this.filterModelCompiler(this.filteModelContent),m=new N;m.propertyName="recordStatus",m.value=Ue.Available,u.filters.push(m),this.contentService.ServiceGetCount(u).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewMemberRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkMemberId||this.tableRowSelected.linkMemberId===""){this.translate.get("MESSAGE.content_does_not_include_member_informations").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/member/user/edit",this.tableRowSelected.linkMemberId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};Ui.\u0275fac=function(o){return new(o||Ui)(p($),p(Bt),p(q),p(Oe),p(Fe),p(W),p(P),p(B),p(G),p(je),p(Ae),p(H),p(ge))},Ui.\u0275cmp=V({type:Ui,selectors:[["app-core-log-notification-list"]],standalone:!1,features:[X],decls:60,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],[1,"col-4"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","linkMemberId"],["matColumnDef","contentType"],["matColumnDef","senderlinkUserId"],["matColumnDef","receiverlinkUserId"],["class","grid-row-ltr",4,"matCellDef"],["matColumnDef","SendStatusType"],["matColumnDef","createdDate"],["style","direction: ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-id-card-clip","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],[1,"grid-row-ltr"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(o,t){if(o&1){let c=y();a(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(m){return f(c),D(t.viewGuideNotice,m)||(t.viewGuideNotice=m),S(m)}),E("optionOnActionButtonMemoRow",function(){return f(c),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),S(t.onActionButtonPrintRow())}),M(1,4),l(2," -------------------------------------- "),I(),K(3,5),M(4,6),a(5,"a",7),E("click",function(){return f(c),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(6,"mat-slide-toggle",8),l(7),h(8,"translate"),r(),a(9,"a",7),E("click",function(){return f(c),S(t.onActionButtonStatist())}),v(10,"mat-slide-toggle",8),l(11),h(12,"translate"),r(),I(),K(13,9),M(14,10),T(15,Ml,7,3,"div",11),T(16,Il,7,3,"div",11),T(17,El,7,3,"div",11),T(18,wl,7,3,"div",11),I(),M(19,12),a(20,"app-cms-search-list",13),A("optionsChange",function(m){return f(c),D(t.optionsSearch,m)||(t.optionsSearch=m),S(m)}),r(),a(21,"app-cms-statist-list",13),A("optionsChange",function(m){return f(c),D(t.optionsStatist,m)||(t.optionsStatist=m),S(m)}),r(),I(),M(22,14),a(23,"mat-table",15,0),E("matSortChange",function(){f(c);let m=J(24);return S(t.onTableSortData(m))}),M(25,16),w(26,yl,2,1,"mat-header-cell",17)(27,Tl,2,1,"mat-cell",18),I(),M(28,19),w(29,Ll,2,1,"mat-header-cell",17)(30,Rl,4,6,"mat-cell",20),I(),M(31,21),w(32,Dl,2,1,"mat-header-cell",17)(33,Al,4,5,"mat-cell",18),I(),M(34,22),w(35,xl,2,1,"mat-header-cell",17)(36,kl,2,1,"mat-cell",18),I(),M(37,23),w(38,Nl,2,1,"mat-header-cell",17)(39,Vl,2,1,"mat-cell",18),I(),M(40,24),w(41,Pl,2,1,"mat-header-cell",17)(42,Bl,4,5,"mat-cell",18),I(),M(43,25),w(44,Ol,2,1,"mat-header-cell",17)(45,Gl,4,5,"mat-cell",26),I(),M(46,27),w(47,Hl,2,1,"mat-header-cell",17)(48,Fl,3,4,"mat-cell",18),I(),M(49,28),w(50,jl,2,1,"mat-header-cell",17)(51,Ul,3,3,"mat-cell",29),I(),M(52,30),w(53,Wl,3,3,"mat-header-cell",31)(54,ql,6,1,"mat-cell",32),I(),w(55,Ql,1,0,"mat-header-row",33)(56,zl,1,2,"mat-row",34),r(),I(),M(57,35),a(58,"mat-paginator",36,1),E("page",function(m){return f(c),S(t.onTablePageingData(m))}),r(),I(),r()}o&2&&(_("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),R("optionActionGuideNoticeDisplay",t.viewGuideNotice),_("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),s(6),_("checked",t.optionsSearch.data.show),s(),d("",g(8,24,"ACTION.SEARCH")," "),s(3),_("checked",t.optionsStatist.data.show),s(),d("",g(12,26,"ACTION.STATIST")," "),s(4),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow?15:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?16:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?17:-1),s(),L((t.tableRowSelected==null?null:t.tableRowSelected.linkMemberId)>0?18:-1),s(2),R("options",t.optionsSearch),s(),R("options",t.optionsStatist),s(2),_("dataSource",t.tableSource),s(32),_("matHeaderRowDef",t.tabledisplayedColumns),s(),_("matRowDefColumns",t.tabledisplayedColumns),s(2),_("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Ge(28,bl)))},dependencies:[He,he,fe,Pe,Be,$e,Ke,_e,ve,be,Ie,Te,Ee,Me,Le,we,ye,Re,De,tt,it,xe,ke,at,O,vi,dt,vt,Ze,ot,nt],encapsulation:2});var Ro=Ui;var Jl=["vform"];function $l(i,n){if(i&1){let e=y();a(0,"div",14)(1,"label",16),l(2),r(),a(3,"input",17),A("ngModelChange",function(t){f(e);let c=C();return D(c.dataModel.expireDate,t)||(c.dataModel.expireDate=t),S(t)}),r(),v(4,"mat-datepicker-toggle",18)(5,"mat-datepicker",19,3),r()}if(i&2){let e=J(6),o=C();s(2),z(o.fieldsInfo.expireDate==null?null:o.fieldsInfo.expireDate.fieldTitle),s(),_("matDatepicker",e),R("ngModel",o.dataModel.expireDate),s(),_("for",e),s(),_("calendarHeaderComponent",o.datapickerHeader)}}function Kl(i,n){if(i&1&&(a(0,"div"),v(1,"div",20),h(2,"prettyjson"),r()),i&2){let e=C();s(),_("innerHTML",g(2,1,e.dataModel),rt)}}function Yl(i,n){if(i&1){let e=y();a(0,"div",15)(1,"button",21),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",22),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var Wi=class Wi extends ut{constructor(e,o,t,c,u,m,b,k,Y,Ce){super(c,new Ut,Y,Ce);this.data=e;this.dialogRef=o;this.coreEnumService=t;this.coreLogReportDataService=c;this.cmsToastrService=u;this.tokenHelper=m;this.cmsStoreService=b;this.cdr=k;this.publicHelper=Y;this.translate=Ce;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ci;this.dataModel=new Ut;this.dataModelEnumSendReportDataStatusTypeResult=new F;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(e,o,this.constructorInfoAreaId)}),this.coreLogReportDataService.setAccessLoad(),this.coreLogReportDataService.setAccessDataType(st.Editor),this.coreLogReportDataService.ServiceGetOneById(this.requestId).subscribe({next:o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access),this.dataModel=o.item,o.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+o.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=o.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.publicHelper.processService.processStop(e)},error:o=>{this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Wi.\u0275fac=function(o){return new(o||Wi)(p(ne),p(oe),p($),p(Ot),p(q),p(W),p(G),p(P),p(H),p(B))},Wi.\u0275cmp=V({type:Wi,selectors:[["app-core-log-report-data-edit"]],viewQuery:function(o,t){if(o&1&&Z(Jl,5),o&2){let c;ee(c=te())&&(t.formGroup=c.first)}},standalone:!1,features:[X],decls:30,vars:25,consts:[["vform","ngForm"],["ModuleEntityId",""],["ReportData",""],["ExpireDate",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.moduleEntityId",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityId","placeholder","ModuleEntityId","id","dataModel.moduleEntityId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.reportData",1,"color-highlight"],["matInput","","name","dataModel.reportData","type","text","placeholder","ReportData","id","dataModel.reportData",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],[1,"form-actions"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi","",3,"calendarHeaderComponent"],[3,"innerHTML"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(o,t){if(o&1){let c=y();a(0,"div",4),v(1,"app-progress-spinner",5),a(2,"div",6)(3,"p",7),l(4),r(),a(5,"p"),l(6),h(7,"translate"),r(),a(8,"form",null,0),v(10,"app-cms-site-selector",8),h(11,"translate"),v(12,"app-cms-user-selector",8),h(13,"translate"),v(14,"app-cms-member-selector",8),h(15,"translate"),a(16,"div",9)(17,"label",10),l(18,"ModuleEntityId"),r(),a(19,"input",11,1),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleEntityId,m)||(t.dataModel.moduleEntityId=m),S(m)}),r()(),a(21,"div",9)(22,"label",12),l(23,"Report Data"),r(),a(24,"textarea",13,2),A("ngModelChange",function(m){return f(c),D(t.dataModel.reportData,m)||(t.dataModel.reportData=m),S(m)}),l(26,"        "),r()(),T(27,$l,7,5,"div",14),T(28,Kl,3,3,"div"),T(29,Yl,5,3,"div",15),r()()()}o&2&&(s(),_("optionsInfoAreaId",t.constructorInfoAreaId),s(3),d(" ",t.formInfo.formTitle," "),s(2),d(" ",g(7,17,"TITLE.Be_Careful_When_Entering_Information")," "),s(4),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",g(11,19,"TITLE.SITE")),s(2),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",g(13,21,"TITLE.USER")),s(2),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkMemberId)("optionPlaceholder",g(15,23,"TITLE.Member")),s(5),R("ngModel",t.dataModel.moduleEntityId),s(5),R("ngModel",t.dataModel.reportData),s(3),L(t.fieldsInfo.expireDate!=null&&t.fieldsInfo.expireDate.accessWatchField?27:-1),s(),L(t.tokenInfo.access.userAccessAdminAllowToProfessionalData?28:-1),s(),L(t.formInfo.submitButtonEnabled?29:-1))},dependencies:[mt,qe,Qe,lt,ze,ct,ln,cn,mn,Zo,Je,qt,ht,gt,re,O,pt],encapsulation:2});var Do=Wi;var Xl=["vform"];function Zl(i,n){if(i&1){let e=y();a(0,"div",7)(1,"button",8),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",9),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var qi=class qi{constructor(n,e,o,t,c,u,m,b,k,Y){this.data=n;this.dialogRef=e;this.coreEnumService=o;this.coreLogReportDataService=t;this.cmsToastrService=c;this.tokenHelper=u;this.cmsStoreService=m;this.cdr=b;this.publicHelper=k;this.translate=Y;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new We;this.dataModelResult=new F;this.dataModel=new Ut;this.formInfo=new Ye;this.dataModelEnumSendSmsStatusTypeResult=new F;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,n&&(this.requestId=n.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(n=>{this.formInfo.formTitle=n}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(n=>n.tokenInfoStore).subscribe(n=>U(this,null,function*(){this.tokenInfo=n}))),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:n=>{this.dataModelEnumSendSmsStatusTypeResult=n}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(n=>n.unsubscribe())}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage="";let n=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(n,e,this.constructorInfoAreaId)}),this.coreLogReportDataService.setAccessLoad(),this.coreLogReportDataService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(n)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(n,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};qi.\u0275fac=function(e){return new(e||qi)(p(ne),p(oe),p($),p(Ot),p(q),p(W),p(G),p(P),p(H),p(B))},qi.\u0275cmp=V({type:qi,selectors:[["app-core-log-report-data-view"]],viewQuery:function(e,o){if(e&1&&Z(Xl,5),e&2){let t;ee(t=te())&&(o.formGroup=t.first)}},standalone:!1,decls:9,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[3,"formInfo"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,o){e&1&&(a(0,"div",0),l(1),r(),a(2,"div",1),v(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),r(),a(5,"div",4),v(6,"app-cms-form-result-message",5),r(),a(7,"div",6),T(8,Zl,5,3,"div",7),r()),e&2&&(s(),d(" ",o.formInfo.formTitle," "),s(2),_("optionsInfoAreaId",o.constructorInfoAreaId),s(),_("dataModel",o.dataModel)("optionMethod",1),s(2),_("formInfo",o.formInfo),s(2),L(o.formInfo.submitButtonEnabled?8:-1))},dependencies:[re,ft,Xe,O],encapsulation:2});var Ao=qi;var ec=()=>[5,10,20,100],tc=i=>({background:i});function ic(i,n){if(i&1){let e=y();a(0,"a",43),E("click",function(){f(e);let t=C();return S(t.onActionBackToParent())}),v(1,"i",44),r()}}function oc(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",45),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewRow(t.tableRowSelected))}),v(2,"i",46)(3,"br"),r(),a(4,"p",47),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.VIEW")," "))}function nc(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",48),E("click",function(){f(e);let t=C();return S(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",49)(3,"br"),r(),a(4,"p",47),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.EDIT")," "))}function rc(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",50),E("click",function(){f(e);let t=C();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",51)(3,"br"),r(),a(4,"p",47),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.DELETE")," "))}function ac(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",45),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewUserRow(t.tableRowSelected))}),v(2,"i",52)(3,"br"),r(),a(4,"p",47),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.USER")," "))}function sc(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",45),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewMemberRow(t.tableRowSelected))}),v(2,"i",53)(3,"br"),r(),a(4,"p",47),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.MEMBER")," "))}function lc(i,n){if(i&1&&(a(0,"mat-header-cell",54),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function cc(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.id," ")}}function mc(i,n){if(i&1&&(a(0,"mat-header-cell",54),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function dc(i,n){if(i&1&&(a(0,"mat-cell",55),h(1,"statusCellClass"),v(2,"i",55),h(3,"statusIconClass"),r()),i&2){let e=n.$implicit;_("ngClass",g(1,2,e.recordStatus)),s(2),_("ngClass",g(3,4,e.recordStatus))}}function pc(i,n){if(i&1&&(a(0,"mat-header-cell",54),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function uc(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmssiteinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.linkSiteId))," ")}}function fc(i,n){if(i&1&&(a(0,"mat-header-cell",54),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function Sc(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmsuserinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.linkUserId))," ")}}function Cc(i,n){if(i&1&&(a(0,"mat-header-cell",54),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function hc(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.linkMemberId," ")}}function gc(i,n){if(i&1&&(a(0,"mat-header-cell",54),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkModuleEntityId==null?null:e.fieldsInfo.linkModuleEntityId.fieldTitle," ")}}function _c(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.linkModuleEntityId," ")}}function vc(i,n){if(i&1&&(a(0,"mat-header-cell",54),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkModuleEntityReportFileId==null?null:e.fieldsInfo.linkModuleEntityReportFileId.fieldTitle," ")}}function bc(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.linkModuleEntityReportFileId," ")}}function Mc(i,n){if(i&1&&(a(0,"mat-header-cell",54),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Ic(i,n){if(i&1&&(a(0,"mat-cell",56),l(1),h(2,"localeDateTime"),r()),i&2){let e=n.$implicit;s(),d(" ",g(2,1,e.createdDate)," ")}}function Ec(i,n){if(i&1&&(a(0,"mat-header-cell",54),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.expireDate==null?null:e.fieldsInfo.expireDate.fieldTitle," ")}}function wc(i,n){if(i&1&&(a(0,"mat-cell",57),l(1),h(2,"persianDate"),r()),i&2){let e=n.$implicit,o=C();_("ngStyle",no(4,tc,o.publicHelper.RowStyleExpireDate(e.expireDate))),s(),d(" ",g(2,2,e.expireDate)," ")}}function yc(i,n){i&1&&(a(0,"mat-header-cell"),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"TITLE.OPTION")," "))}function Tc(i,n){if(i&1&&(a(0,"mat-cell",58)(1,"button",59)(2,"mat-icon"),l(3,"more_vert"),r()(),v(4,"mat-menu",null,2),r()),i&2){let e=J(5);s(),_("matMenuTriggerFor",e)}}function Lc(i,n){i&1&&v(0,"mat-header-row")}function Rc(i,n){if(i&1){let e=y();a(0,"mat-row",60),E("click",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))})("rtclick",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))}),r()}if(i&2){let e=n.$implicit,o=C();ie("ntk-row-selected",e.id===(o.tableRowSelected==null?null:o.tableRowSelected.id))}}var Qi=class Qi extends et{constructor(e,o,t,c,u,m,b,k,Y,Ce,_t,Ct,se){super(o,new Ut,Ct,m,k);this.coreEnumService=e;this.contentService=o;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=u;this.tokenHelper=m;this.cdr=b;this.translate=k;this.cmsStoreService=Y;this.router=Ce;this.pageInfo=_t;this.publicHelper=Ct;this.dialog=se;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestLinkModuleEntityId=0;this.requestLinkModuleEntityReportFileId="";this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new Ve;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","linkUserId","linkSiteId","linkMemberId","LinkModuleEntityId","LinkModuleEntityReportFileId","createdDate","ExpireDate"];this.tabledisplayedColumnsMobileSource=["id","linkUserId","linkSiteId","linkMemberId","LinkModuleEntityId","LinkModuleEntityReportFileId","createdDate","ExpireDate"];this.dataModelEnumSendReportDataStatusTypeResult=new F;this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestLinkModuleEntityId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkModuleEntityId")),this.requestLinkModuleEntityReportFileId=this.activatedRoute.snapshot.paramMap.get("LinkModuleEntityReportFileId"),this.requestLinkSiteId>0){let x=new N;x.propertyName="LinkCmsSiteId",x.value=this.requestLinkSiteId,this.filteModelContent.filters.push(x)}if(this.requestLinkUserId>0){let x=new N;x.propertyName="linkUserId",x.value=this.requestLinkUserId,this.filteModelContent.filters.push(x)}if(this.requestLinkModuleEntityId>0){let x=new N;x.propertyName="LinkModuleEntityId",x.value=this.requestLinkModuleEntityId,this.filteModelContent.filters.push(x)}if(this.requestLinkModuleEntityReportFileId&&this.requestLinkModuleEntityReportFileId.length>0){let x=new N;x.propertyName="LinkModuleEntityReportFileId",x.value=this.requestLinkModuleEntityReportFileId,this.filteModelContent.filters.push(x)}this.optionsSearch.parentMethods={onSubmit:x=>this.onSubmitOptionsSearch(x)},this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.optionsSearch.data.filterModelContent=this.filteModelContent,this.optionsSearch.data.filterActionSearchRecordStatusShow=!0,this.tokenHelper.isAdminSite?(this.optionsSearch.data.filterActionSearchLinkUserIdShow=!0,this.optionsSearch.data.filterActionSearchLinkSiteIdShow=!0):(this.optionsSearch.data.filterActionSearchLinkSiteIdShow=!1,this.optionsSearch.data.filterActionSearchLinkUserIdShow=!1)}ngOnInit(){this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}filterModelCompiler(e){let o=JSON.parse(JSON.stringify(e));return this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(o.filters=[...this.filterDataModelQueryBuilder]),o}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ut);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let o=this.filterModelCompiler(this.filteModelContent);if(this.filteModelContent.filterActionSearchRecordStatus>0){let t=new N;t.propertyName="recordStatus",t.value=this.filteModelContent.filterActionSearchRecordStatus,o.filters.push(t)}if(this.filteModelContent.filterActionSearchLinkSiteId>0){let t=new N;t.propertyName="linkSiteId",t.value=this.filteModelContent.filterActionSearchLinkSiteId,o.filters.push(t)}if(this.filteModelContent.filterActionSearchLinkUserId>0){let t=new N;t.propertyName="linkUserId",t.value=this.filteModelContent.filterActionSearchLinkUserId,o.filters.push(t)}this.contentService.ServiceGetAllEditor(o).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(Ao,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(Do,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var o="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{o=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(o,t).then(c=>{if(c){let u=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(u,m,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:m=>{m.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(u)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(u,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let o=new Map;this.translate.get("MESSAGE.Active").subscribe(b=>{o.set(b,0)}),this.translate.get("MESSAGE.All").subscribe(b=>{o.set(b,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(b=>{this.publicHelper.processService.processStart(t,b,this.constructorInfoAreaId)});let c=this.filterModelCompiler(this.filteModelContent);if(this.filteModelContent.filterActionSearchRecordStatus>0){let b=new N;b.propertyName="recordStatus",b.value=this.filteModelContent.filterActionSearchRecordStatus,c.filters.push(b)}if(this.filteModelContent.filterActionSearchLinkSiteId>0){let b=new N;b.propertyName="linkSiteId",b.value=this.filteModelContent.filterActionSearchLinkSiteId,c.filters.push(b)}if(this.filteModelContent.filterActionSearchLinkUserId>0){let b=new N;b.propertyName="linkUserId",b.value=this.filteModelContent.filterActionSearchLinkUserId,c.filters.push(b)}this.contentService.ServiceGetCount(c).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}});let u=this.filterModelCompiler(this.filteModelContent);if(this.filteModelContent.filterActionSearchRecordStatus>0){let b=new N;b.propertyName="recordStatus",b.value=this.filteModelContent.filterActionSearchRecordStatus,u.filters.push(b)}if(this.filteModelContent.filterActionSearchLinkSiteId>0){let b=new N;b.propertyName="linkSiteId",b.value=this.filteModelContent.filterActionSearchLinkSiteId,u.filters.push(b)}if(this.filteModelContent.filterActionSearchLinkUserId>0){let b=new N;b.propertyName="linkUserId",b.value=this.filteModelContent.filterActionSearchLinkUserId,u.filters.push(b)}let m=new N;m.propertyName="recordStatus",m.value=Ue.Available,u.filters.push(m),this.contentService.ServiceGetCount(u).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkUserId||this.tableRowSelected.linkUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkUserId])}onActionButtonViewMemberRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkMemberId||this.tableRowSelected.linkMemberId===""){this.translate.get("MESSAGE.content_does_not_include_member_informations").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/member/user/edit",this.tableRowSelected.linkMemberId])}onActionButtonViewSiteRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkSiteId||this.tableRowSelected.linkSiteId===0){this.translate.get("MESSAGE.content_does_not_include_site_information").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/core/site/edit",this.tableRowSelected.linkSiteId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};Qi.\u0275fac=function(o){return new(o||Qi)(p($),p(Ot),p(q),p(Oe),p(Fe),p(W),p(P),p(B),p(G),p(je),p(Ae),p(H),p(ge))},Qi.\u0275cmp=V({type:Qi,selectors:[["app-core-log-report-data-list"]],standalone:!1,features:[X],decls:68,vars:33,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],[1,"col-4"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","linkUserId"],["matColumnDef","linkMemberId"],["matColumnDef","LinkModuleEntityId"],["matColumnDef","LinkModuleEntityReportFileId"],["matColumnDef","createdDate"],["style","direction: ltr",4,"matCellDef"],["matColumnDef","ExpireDate"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-id-card-clip","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],[2,"direction","ltr"],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(o,t){if(o&1){let c=y();a(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(m){return f(c),D(t.viewGuideNotice,m)||(t.viewGuideNotice=m),S(m)}),E("optionOnActionButtonMemoRow",function(){return f(c),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),S(t.onActionButtonPrintRow())}),M(1,4),l(2," -------------------------------------- "),I(),K(3,5)(4,6),M(5,7),T(6,ic,2,0,"a",8),a(7,"a",9),E("click",function(){return f(c),S(t.viewGuideNotice=!t.viewGuideNotice)}),v(8,"i",10),r(),a(9,"a",9),E("click",function(){return f(c),S(t.onActionButtonReload())}),v(10,"i",11),r(),I(),M(11,12),a(12,"a",13),E("click",function(){return f(c),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(13,"mat-slide-toggle",14),l(14),h(15,"translate"),r(),a(16,"a",13),E("click",function(){return f(c),S(t.onActionButtonStatist())}),v(17,"mat-slide-toggle",14),l(18),h(19,"translate"),r(),I(),K(20,15),M(21,16),T(22,oc,7,3,"div",17),T(23,nc,7,3,"div",17),T(24,rc,7,3,"div",17),T(25,ac,7,3,"div",17),T(26,sc,7,3,"div",17),I(),M(27,18),a(28,"app-cms-search-list",19),A("optionsChange",function(m){return f(c),D(t.optionsSearch,m)||(t.optionsSearch=m),S(m)}),r(),a(29,"app-cms-statist-list",19),A("optionsChange",function(m){return f(c),D(t.optionsStatist,m)||(t.optionsStatist=m),S(m)}),r(),I(),M(30,20),a(31,"mat-table",21,0),E("matSortChange",function(){f(c);let m=J(32);return S(t.onTableSortData(m))}),M(33,22),w(34,lc,2,1,"mat-header-cell",23)(35,cc,2,1,"mat-cell",24),I(),M(36,25),w(37,mc,2,1,"mat-header-cell",23)(38,dc,4,6,"mat-cell",26),I(),M(39,27),w(40,pc,2,1,"mat-header-cell",23)(41,uc,4,5,"mat-cell",24),I(),M(42,28),w(43,fc,2,1,"mat-header-cell",23)(44,Sc,4,5,"mat-cell",24),I(),M(45,29),w(46,Cc,2,1,"mat-header-cell",23)(47,hc,2,1,"mat-cell",24),I(),M(48,30),w(49,gc,2,1,"mat-header-cell",23)(50,_c,2,1,"mat-cell",24),I(),M(51,31),w(52,vc,2,1,"mat-header-cell",23)(53,bc,2,1,"mat-cell",24),I(),M(54,32),w(55,Mc,2,1,"mat-header-cell",23)(56,Ic,3,3,"mat-cell",33),I(),M(57,34),w(58,Ec,2,1,"mat-header-cell",23)(59,wc,3,6,"mat-cell",35),I(),M(60,36),w(61,yc,3,3,"mat-header-cell",37)(62,Tc,6,1,"mat-cell",38),I(),w(63,Lc,1,0,"mat-header-row",39)(64,Rc,1,2,"mat-row",40),r(),I(),M(65,41),a(66,"mat-paginator",42,1),E("page",function(m){return f(c),S(t.onTablePageingData(m))}),r(),I(),r()}o&2&&(_("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),R("optionActionGuideNoticeDisplay",t.viewGuideNotice),_("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),s(6),L(t.requestLinkSiteId>0?6:-1),s(4),ie("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),s(3),_("checked",t.optionsSearch.data.show),s(),d("",g(15,28,"ACTION.SEARCH")," "),s(3),_("checked",t.optionsStatist.data.show),s(),d("",g(19,30,"ACTION.STATIST")," "),s(4),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow?22:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?23:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?24:-1),s(),L((t.tableRowSelected==null?null:t.tableRowSelected.linkUserId)>0?25:-1),s(),L((t.tableRowSelected==null?null:t.tableRowSelected.linkMemberId)>0?26:-1),s(2),R("options",t.optionsSearch),s(),R("options",t.optionsStatist),s(2),_("dataSource",t.tableSource),s(32),_("matHeaderRowDef",t.tabledisplayedColumns),s(),_("matRowDefColumns",t.tabledisplayedColumns),s(2),_("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Ge(32,ec)))},dependencies:[He,ro,he,fe,Pe,Be,$e,Ke,_e,ve,be,Ie,Te,Ee,Me,Le,we,ye,Re,De,tt,it,xe,ke,at,O,vn,dt,vt,Ze,ot,nt],encapsulation:2});var Jt=Qi;var Dc=["vform"];function Ac(i,n){if(i&1&&(a(0,"option",16),l(1),r()),i&2){let e=n.$implicit;_("value",e.value),s(),d(" ",e.description," ")}}function xc(i,n){i&1&&(a(0,"mat-error"),l(1," SendStatusType is "),a(2,"strong"),l(3),h(4,"translate"),r()()),i&2&&(s(3),z(g(4,1,"content.required")))}function kc(i,n){if(i&1&&(a(0,"div"),v(1,"div",35),h(2,"prettyjson"),r()),i&2){let e=C();s(),_("innerHTML",g(2,1,e.dataModel),rt)}}function Nc(i,n){if(i&1){let e=y();a(0,"div",34)(1,"button",36),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",37),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var zi=class zi extends ut{constructor(e,o,t,c,u,m,b,k,Y,Ce){super(c,new Ht,Y,Ce);this.data=e;this.dialogRef=o;this.coreEnumService=t;this.coreLogSmsService=c;this.cmsToastrService=u;this.tokenHelper=m;this.cmsStoreService=b;this.cdr=k;this.publicHelper=Y;this.translate=Ce;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new F;this.dataModel=new Ht;this.dataModelEnumSendSmsStatusTypeResult=new F;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e}))),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:e=>{this.dataModelEnumSendSmsStatusTypeResult=e}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(e,o,this.constructorInfoAreaId)}),this.coreLogSmsService.setAccessLoad(),this.coreLogSmsService.setAccessDataType(st.Editor),this.coreLogSmsService.ServiceGetOneById(this.requestId).subscribe({next:o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access),this.dataModel=o.item,o.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+o.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=o.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.publicHelper.processService.processStop(e)},error:o=>{this.cmsToastrService.typeError(o),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};zi.\u0275fac=function(o){return new(o||zi)(p(ne),p(oe),p($),p(Gt),p(q),p(W),p(G),p(P),p(H),p(B))},zi.\u0275cmp=V({type:zi,selectors:[["app-core-log-sms-edit"]],viewQuery:function(o,t){if(o&1&&Z(Dc,5),o&2){let c;ee(c=te())&&(t.formGroup=c.first)}},standalone:!1,features:[X],decls:69,vars:35,consts:[["vform","ngForm"],["SendStatusType","ngModel"],["ModuleName",""],["ModuleEntityName",""],["ModuleEntityId",""],["FromNumber",""],["toNumber",""],["ApiNumber",""],["Message",""],["ReturnApi",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["id","dataModel.sendStatusType","name","dataModel.sendStatusType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleName","placeholder","ModuleName","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityName","placeholder","ModuleEntityName","id","dataModel.moduleEntityName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityId",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityId","placeholder","ModuleEntityId","id","dataModel.moduleEntityId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.fromNumber",1,"color-highlight"],["matInput","","type","text","name","dataModel.fromNumber","placeholder","FromNumber","id","dataModel.fromNumber",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.toNumber",1,"color-highlight"],["matInput","","type","text","name","dataModel.toNumber","placeholder","toNumber","id","dataModel.toNumber",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.apiNumber",1,"color-highlight"],["matInput","","type","text","name","dataModel.apiNumber","placeholder","ApiNumber","id","dataModel.apiNumber",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.message",1,"color-highlight"],["matInput","","name","dataModel.message","type","text","placeholder","Message","id","dataModel.message",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.returnApi",1,"color-highlight"],["matInput","","name","dataModel.returnApi","type","text","placeholder","ReturnApi","id","dataModel.returnApi",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[1,"form-actions"],[3,"innerHTML"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(o,t){if(o&1){let c=y();a(0,"div",10),v(1,"app-progress-spinner",11),a(2,"div",12)(3,"p",13),l(4),r(),a(5,"p"),l(6),h(7,"translate"),r(),a(8,"form",null,0)(10,"div",14)(11,"select",15,1),A("ngModelChange",function(m){return f(c),D(t.dataModel.sendStatusType,m)||(t.dataModel.sendStatusType=m),S(m)}),kt(13,Ac,2,2,"option",16,xt),r(),a(15,"em"),l(16),h(17,"translate"),r(),T(18,xc,5,3,"mat-error"),r(),v(19,"app-cms-site-selector",17),h(20,"translate"),v(21,"app-cms-user-selector",17),h(22,"translate"),v(23,"app-cms-member-selector",17),h(24,"translate"),a(25,"div",14)(26,"label",18),l(27,"ModuleName"),r(),a(28,"input",19,2),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleName,m)||(t.dataModel.moduleName=m),S(m)}),r()(),a(30,"div",14)(31,"label",20),l(32,"ModuleEntityName"),r(),a(33,"input",21,3),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleEntityName,m)||(t.dataModel.moduleEntityName=m),S(m)}),r()(),a(35,"div",14)(36,"label",22),l(37,"ModuleEntityId"),r(),a(38,"input",23,4),A("ngModelChange",function(m){return f(c),D(t.dataModel.moduleEntityId,m)||(t.dataModel.moduleEntityId=m),S(m)}),r()(),a(40,"div",14)(41,"label",24),l(42,"FromNumber"),r(),a(43,"input",25,5),A("ngModelChange",function(m){return f(c),D(t.dataModel.fromNumber,m)||(t.dataModel.fromNumber=m),S(m)}),r()(),a(45,"div",14)(46,"label",26),l(47,"toNumber"),r(),a(48,"input",27,6),A("ngModelChange",function(m){return f(c),D(t.dataModel.toNumber,m)||(t.dataModel.toNumber=m),S(m)}),r()(),a(50,"div",14)(51,"label",28),l(52,"ApiNumber"),r(),a(53,"input",29,7),A("ngModelChange",function(m){return f(c),D(t.dataModel.apiNumber,m)||(t.dataModel.apiNumber=m),S(m)}),r()(),a(55,"div",14)(56,"label",30),l(57,"Message"),r(),a(58,"textarea",31,8),A("ngModelChange",function(m){return f(c),D(t.dataModel.message,m)||(t.dataModel.message=m),S(m)}),l(60,"                              "),r()(),a(61,"div",14)(62,"label",32),l(63,"ReturnApi"),r(),a(64,"textarea",33,9),A("ngModelChange",function(m){return f(c),D(t.dataModel.returnApi,m)||(t.dataModel.returnApi=m),S(m)}),l(66,"                                "),r()(),T(67,kc,3,3,"div"),T(68,Nc,5,3,"div",34),r()()()}if(o&2){let c=J(12);s(),_("optionsInfoAreaId",t.constructorInfoAreaId),s(3),d(" ",t.formInfo.formTitle," "),s(2),d(" ",g(7,25,"TITLE.Be_Careful_When_Entering_Information")," "),s(5),R("ngModel",t.dataModel.sendStatusType),s(2),Nt(t.dataModelEnumSendSmsStatusTypeResult.listItems),s(3),z(g(17,27,"TITLE.SELECT_STATUS")),s(2),L(c.errors!=null&&c.errors.required?18:-1),s(),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",g(20,29,"TITLE.SITE")),s(2),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",g(22,31,"TITLE.USER")),s(2),_("optionDisabled",!0)("optionSelectForce",t.dataModel.linkMemberId)("optionPlaceholder",g(24,33,"TITLE.Member")),s(5),R("ngModel",t.dataModel.moduleName),s(5),R("ngModel",t.dataModel.moduleEntityName),s(5),R("ngModel",t.dataModel.moduleEntityId),s(5),R("ngModel",t.dataModel.fromNumber),s(5),R("ngModel",t.dataModel.toNumber),s(5),R("ngModel",t.dataModel.apiNumber),s(5),R("ngModel",t.dataModel.message),s(6),R("ngModel",t.dataModel.returnApi),s(3),L(t.tokenInfo.access.userAccessAdminAllowToProfessionalData?67:-1),s(),L(t.formInfo.submitButtonEnabled?68:-1)}},dependencies:[mt,hi,gi,qe,Ci,Qe,lt,ze,ct,_i,Je,qt,ht,gt,re,O,pt],encapsulation:2});var xo=zi;var Vc=["vform"];function Pc(i,n){if(i&1){let e=y();a(0,"div",7)(1,"button",8),E("click",function(){f(e);let t=C();return S(t.onFormCancel())}),v(2,"i",9),l(3),h(4,"translate"),r()()}i&2&&(s(3),d(" ",g(4,1,"ACTION.CANCEL")," "))}var Ji=class Ji{constructor(n,e,o,t,c,u,m,b,k,Y){this.data=n;this.dialogRef=e;this.coreEnumService=o;this.coreLogSmsService=t;this.cmsToastrService=c;this.tokenHelper=u;this.cmsStoreService=m;this.cdr=b;this.publicHelper=k;this.translate=Y;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new We;this.dataModelResult=new F;this.dataModel=new Ht;this.formInfo=new Ye;this.dataModelEnumSendSmsStatusTypeResult=new F;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,n&&(this.requestId=n.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(n=>{this.formInfo.formTitle=n}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(n=>n.tokenInfoStore).subscribe(n=>U(this,null,function*(){this.tokenInfo=n}))),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:n=>{this.dataModelEnumSendSmsStatusTypeResult=n}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(n=>n.unsubscribe())}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage="";let n=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(n,e,this.constructorInfoAreaId)}),this.coreLogSmsService.setAccessLoad(),this.coreLogSmsService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(o=>{this.formInfo.submitResultMessage=o}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(n)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(n,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ji.\u0275fac=function(e){return new(e||Ji)(p(ne),p(oe),p($),p(Gt),p(q),p(W),p(G),p(P),p(H),p(B))},Ji.\u0275cmp=V({type:Ji,selectors:[["app-core-log-sms-view"]],viewQuery:function(e,o){if(e&1&&Z(Vc,5),e&2){let t;ee(t=te())&&(o.formGroup=t.first)}},standalone:!1,decls:9,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[3,"formInfo"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,o){e&1&&(a(0,"div",0),l(1),r(),a(2,"div",1),v(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),r(),a(5,"div",4),v(6,"app-cms-form-result-message",5),r(),a(7,"div",6),T(8,Pc,5,3,"div",7),r()),e&2&&(s(),d(" ",o.formInfo.formTitle," "),s(2),_("optionsInfoAreaId",o.constructorInfoAreaId),s(),_("dataModel",o.dataModel)("optionMethod",1),s(2),_("formInfo",o.formInfo),s(2),L(o.formInfo.submitButtonEnabled?8:-1))},dependencies:[re,ft,Xe,O],encapsulation:2});var ko=Ji;var Bc=()=>[5,10,20,100];function Oc(i,n){if(i&1){let e=y();a(0,"a",44),E("click",function(){f(e);let t=C();return S(t.onActionBackToParent())}),v(1,"i",45),r()}}function Gc(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",46),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewRow(t.tableRowSelected))}),v(2,"i",47)(3,"br"),r(),a(4,"p",48),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.VIEW")," "))}function Hc(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",49),E("click",function(){f(e);let t=C();return S(t.onActionButtonEditRow(t.tableRowSelected))}),v(2,"i",50)(3,"br"),r(),a(4,"p",48),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.EDIT")," "))}function Fc(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",51),E("click",function(){f(e);let t=C();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),v(2,"i",52)(3,"br"),r(),a(4,"p",48),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.DELETE")," "))}function jc(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",46),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewUserRow(t.tableRowSelected))}),v(2,"i",53)(3,"br"),r(),a(4,"p",48),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.USER")," "))}function Uc(i,n){if(i&1){let e=y();a(0,"div",17)(1,"a",46),E("click",function(){f(e);let t=C();return S(t.onActionButtonViewMemberRow(t.tableRowSelected))}),v(2,"i",54)(3,"br"),r(),a(4,"p",48),l(5),h(6,"translate"),r()()}i&2&&(s(5),d(" ",g(6,1,"ACTION.MEMBER")," "))}function Wc(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function qc(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.id," ")}}function Qc(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function zc(i,n){if(i&1&&(a(0,"mat-cell",56),h(1,"statusCellClass"),v(2,"i",56),h(3,"statusIconClass"),r()),i&2){let e=n.$implicit;_("ngClass",g(1,2,e.recordStatus)),s(2),_("ngClass",g(3,4,e.recordStatus))}}function Jc(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function $c(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmssiteinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.linkSiteId))," ")}}function Kc(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function Yc(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"cmsuserinfo"),h(3,"async"),r()),i&2){let e=n.$implicit;s(),d(" ",g(3,3,g(2,1,e.linkUserId))," ")}}function Xc(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function Zc(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.linkMemberId," ")}}function em(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.apiNumber==null?null:e.fieldsInfo.apiNumber.fieldTitle," ")}}function tm(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.apiNumber," ")}}function im(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.fromNumber==null?null:e.fieldsInfo.fromNumber.fieldTitle," ")}}function om(i,n){if(i&1&&(a(0,"mat-cell"),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.fromNumber," ")}}function nm(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.toNumber==null?null:e.fieldsInfo.toNumber.fieldTitle," ")}}function rm(i,n){if(i&1&&(a(0,"mat-cell",57),l(1),r()),i&2){let e=n.$implicit;s(),d(" ",e.toNumber," ")}}function am(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.sendStatusType==null?null:e.fieldsInfo.sendStatusType.fieldTitle," ")}}function sm(i,n){if(i&1&&(a(0,"mat-cell"),l(1),h(2,"enums"),r()),i&2){let e=n.$implicit,o=C();s(),d(" ",Et(2,1,e.sendStatusType,o.dataModelEnumSendSmsStatusTypeResult.listItems)," ")}}function lm(i,n){if(i&1&&(a(0,"mat-header-cell",55),l(1),r()),i&2){let e=C();s(),d(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function cm(i,n){if(i&1&&(a(0,"mat-cell",58),l(1),h(2,"localeDateTime"),r()),i&2){let e=n.$implicit;s(),d(" ",g(2,1,e.createdDate)," ")}}function mm(i,n){i&1&&(a(0,"mat-header-cell"),l(1),h(2,"translate"),r()),i&2&&(s(),d(" ",g(2,1,"TITLE.OPTION")," "))}function dm(i,n){if(i&1&&(a(0,"mat-cell",59)(1,"button",60)(2,"mat-icon"),l(3,"more_vert"),r()(),v(4,"mat-menu",null,2),r()),i&2){let e=J(5);s(),_("matMenuTriggerFor",e)}}function pm(i,n){i&1&&v(0,"mat-header-row")}function um(i,n){if(i&1){let e=y();a(0,"mat-row",61),E("click",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))})("rtclick",function(t){let c=f(e).$implicit,u=C();return S(u.onActionTableRowSelect(c,t))}),r()}if(i&2){let e=n.$implicit,o=C();ie("ntk-row-selected",e.id===(o.tableRowSelected==null?null:o.tableRowSelected.id))}}var $i=class $i extends et{constructor(e,o,t,c,u,m,b,k,Y,Ce,_t,Ct,se){super(o,new Ht,Ct,m,k);this.coreEnumService=e;this.contentService=o;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=u;this.tokenHelper=m;this.cdr=b;this.translate=k;this.cmsStoreService=Y;this.router=Ce;this.pageInfo=_t;this.publicHelper=Ct;this.dialog=se;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestLinkDeviceId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new Ve;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","linkUserId","linkSiteId","linkMemberId","SendStatusType","FromNumber","ToNumber","ApiNumber","createdDate"];this.tabledisplayedColumnsMobileSource=["id","linkUserId","linkSiteId","linkMemberId","SendStatusType","FromNumber","ToNumber","ApiNumber","createdDate"];this.dataModelEnumSendSmsStatusTypeResult=new F;this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestLinkDeviceId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDeviceId")),this.requestLinkSiteId>0){let x=new N;x.propertyName="LinkCmsSiteId",x.value=this.requestLinkSiteId,this.filteModelContent.filters.push(x)}if(this.requestLinkUserId>0){let x=new N;x.propertyName="linkUserId",x.value=this.requestLinkUserId,this.filteModelContent.filters.push(x)}if(this.requestLinkDeviceId>0){let x=new N;x.propertyName="LinkDeviceId",x.value=this.requestLinkDeviceId,this.filteModelContent.filters.push(x)}this.optionsSearch.parentMethods={onSubmit:x=>this.onSubmitOptionsSearch(x)},this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.optionsSearch.data.filterModelContent=this.filteModelContent,this.optionsSearch.data.filterActionSearchRecordStatusShow=!0,this.tokenHelper.isAdminSite?(this.optionsSearch.data.filterActionSearchLinkUserIdShow=!0,this.optionsSearch.data.filterActionSearchLinkSiteIdShow=!0):(this.optionsSearch.data.filterActionSearchLinkSiteIdShow=!1,this.optionsSearch.data.filterActionSearchLinkUserIdShow=!1)}ngOnInit(){this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=j.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>U(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:e=>{this.dataModelEnumSendSmsStatusTypeResult=e}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}filterModelCompiler(e){let o=JSON.parse(JSON.stringify(e));return this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(o.filters=[...this.filterDataModelQueryBuilder]),o}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ht);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let o=this.filterModelCompiler(this.filteModelContent);if(this.filteModelContent.filterActionSearchRecordStatus>0){let t=new N;t.propertyName="recordStatus",t.value=this.filteModelContent.filterActionSearchRecordStatus,o.filters.push(t)}if(this.filteModelContent.filterActionSearchLinkSiteId>0){let t=new N;t.propertyName="linkSiteId",t.value=this.filteModelContent.filterActionSearchLinkSiteId,o.filters.push(t)}if(this.filteModelContent.filterActionSearchLinkUserId>0){let t=new N;t.propertyName="linkUserId",t.value=this.filteModelContent.filterActionSearchLinkUserId,o.filters.push(t)}this.contentService.ServiceGetAllEditor(o).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=j.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=j.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(ko,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(xo,{height:"90%",panelClass:o,enterAnimationDuration:Q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var o="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{o=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(o,t).then(c=>{if(c){let u=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(u,m,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:m=>{m.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(u)},error:m=>{this.cmsToastrService.typeError(m),this.publicHelper.processService.processStop(u,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let o=new Map;this.translate.get("MESSAGE.Active").subscribe(b=>{o.set(b,0)}),this.translate.get("MESSAGE.All").subscribe(b=>{o.set(b,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(b=>{this.publicHelper.processService.processStart(t,b,this.constructorInfoAreaId)});let c=this.filterModelCompiler(this.filteModelContent);this.contentService.ServiceGetCount(c).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}});let u=this.filterModelCompiler(this.filteModelContent),m=new N;m.propertyName="recordStatus",m.value=Ue.Available,u.filters.push(m),this.contentService.ServiceGetCount(u).subscribe({next:b=>{b.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{o.set(k,b.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(b.errorMessage),this.publicHelper.processService.processStop(t)},error:b=>{this.cmsToastrService.typeError(b),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkUserId||this.tableRowSelected.linkUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkUserId])}onActionButtonViewMemberRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkMemberId||this.tableRowSelected.linkMemberId===""){this.translate.get("MESSAGE.content_does_not_include_member_informations").subscribe(o=>{this.cmsToastrService.typeErrorSelected(o)});return}this.router.navigate(["/member/user/edit",this.tableRowSelected.linkMemberId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};$i.\u0275fac=function(o){return new(o||$i)(p($),p(Gt),p(q),p(Oe),p(Fe),p(W),p(P),p(B),p(G),p(je),p(Ae),p(H),p(ge))},$i.\u0275cmp=V({type:$i,selectors:[["app-core-log-sms-list"]],standalone:!1,features:[X],decls:71,vars:33,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],[1,"col-4"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","linkUserId"],["matColumnDef","linkMemberId"],["matColumnDef","ApiNumber"],["matColumnDef","FromNumber"],["matColumnDef","ToNumber"],["class","grid-row-ltr",4,"matCellDef"],["matColumnDef","SendStatusType"],["matColumnDef","createdDate"],["style","direction: ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-id-card-clip",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],[1,"grid-row-ltr"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(o,t){if(o&1){let c=y();a(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(m){return f(c),D(t.viewGuideNotice,m)||(t.viewGuideNotice=m),S(m)}),E("optionOnActionButtonMemoRow",function(){return f(c),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(c),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(c),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(c),S(t.onActionButtonPrintRow())}),M(1,4),l(2," -------------------------------------- "),I(),K(3,5)(4,6),M(5,7),T(6,Oc,2,0,"a",8),a(7,"a",9),E("click",function(){return f(c),S(t.viewGuideNotice=!t.viewGuideNotice)}),v(8,"i",10),r(),a(9,"a",9),E("click",function(){return f(c),S(t.onActionButtonReload())}),v(10,"i",11),r(),I(),M(11,12),a(12,"a",13),E("click",function(){return f(c),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),v(13,"mat-slide-toggle",14),l(14),h(15,"translate"),r(),a(16,"a",13),E("click",function(){return f(c),S(t.onActionButtonStatist())}),v(17,"mat-slide-toggle",14),l(18),h(19,"translate"),r(),I(),K(20,15),M(21,16),T(22,Gc,7,3,"div",17),T(23,Hc,7,3,"div",17),T(24,Fc,7,3,"div",17),T(25,jc,7,3,"div",17),T(26,Uc,7,3,"div",17),I(),M(27,18),a(28,"app-cms-search-list",19),A("optionsChange",function(m){return f(c),D(t.optionsSearch,m)||(t.optionsSearch=m),S(m)}),r(),a(29,"app-cms-statist-list",19),A("optionsChange",function(m){return f(c),D(t.optionsStatist,m)||(t.optionsStatist=m),S(m)}),r(),I(),M(30,20),a(31,"mat-table",21,0),E("matSortChange",function(){f(c);let m=J(32);return S(t.onTableSortData(m))}),M(33,22),w(34,Wc,2,1,"mat-header-cell",23)(35,qc,2,1,"mat-cell",24),I(),M(36,25),w(37,Qc,2,1,"mat-header-cell",23)(38,zc,4,6,"mat-cell",26),I(),M(39,27),w(40,Jc,2,1,"mat-header-cell",23)(41,$c,4,5,"mat-cell",24),I(),M(42,28),w(43,Kc,2,1,"mat-header-cell",23)(44,Yc,4,5,"mat-cell",24),I(),M(45,29),w(46,Xc,2,1,"mat-header-cell",23)(47,Zc,2,1,"mat-cell",24),I(),M(48,30),w(49,em,2,1,"mat-header-cell",23)(50,tm,2,1,"mat-cell",24),I(),M(51,31),w(52,im,2,1,"mat-header-cell",23)(53,om,2,1,"mat-cell",24),I(),M(54,32),w(55,nm,2,1,"mat-header-cell",23)(56,rm,2,1,"mat-cell",33),I(),M(57,34),w(58,am,2,1,"mat-header-cell",23)(59,sm,3,4,"mat-cell",24),I(),M(60,35),w(61,lm,2,1,"mat-header-cell",23)(62,cm,3,3,"mat-cell",36),I(),M(63,37),w(64,mm,3,3,"mat-header-cell",38)(65,dm,6,1,"mat-cell",39),I(),w(66,pm,1,0,"mat-header-row",40)(67,um,1,2,"mat-row",41),r(),I(),M(68,42),a(69,"mat-paginator",43,1),E("page",function(m){return f(c),S(t.onTablePageingData(m))}),r(),I(),r()}o&2&&(_("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),R("optionActionGuideNoticeDisplay",t.viewGuideNotice),_("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),s(6),L(t.requestLinkSiteId>0?6:-1),s(4),ie("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),s(3),_("checked",t.optionsSearch.data.show),s(),d("",g(15,28,"ACTION.SEARCH")," "),s(3),_("checked",t.optionsStatist.data.show),s(),d("",g(19,30,"ACTION.STATIST")," "),s(4),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow?22:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?23:-1),s(),L(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?24:-1),s(),L((t.tableRowSelected==null?null:t.tableRowSelected.linkUserId)>0?25:-1),s(),L((t.tableRowSelected==null?null:t.tableRowSelected.linkMemberId)>0?26:-1),s(2),R("options",t.optionsSearch),s(),R("options",t.optionsStatist),s(2),_("dataSource",t.tableSource),s(35),_("matHeaderRowDef",t.tabledisplayedColumns),s(),_("matRowDefColumns",t.tabledisplayedColumns),s(2),_("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Ge(32,Bc)))},dependencies:[He,he,fe,Pe,Be,$e,Ke,_e,ve,be,Ie,Te,Ee,Me,Le,we,ye,Re,De,tt,it,xe,ke,at,O,vi,dt,vt,Ze,ot,nt],encapsulation:2});var No=$i;var fm=[{path:"",component:po,data:{title:"ROUTE.CORELOG"},children:[{path:"error",component:_o,data:{title:"ROUTE.CORELOG.ERROR"}},{path:"avoid-duplicate",component:Zi,data:{title:"ROUTE.CORELOG"}},{path:"avoid-duplicate/:LinkUserId",component:Zi,data:{title:"ROUTE.CORELOG"}},{path:"sms",component:No,data:{title:"ROUTE.CORELOG"}},{path:"email",component:Co,data:{title:"ROUTE.CORELOG"}},{path:"notification",component:Ro,data:{title:"ROUTE.CORELOG"}},{path:"report-data",component:Jt,data:{title:"ROUTE.CORELOG"}},{path:"report-data/LinkSiteId/:LinkSiteId",component:Jt,data:{title:"ROUTE.CORELOG"}},{path:"report-data/LinkUserId/:LinkUserId",component:Jt,data:{title:"ROUTE.CORELOG"}},{path:"report-data/LinkModuleEntityId/:LinkModuleEntityId",component:Jt,data:{title:"ROUTE.CORELOG"}},{path:"report-data/LinkModuleEntityReportFileId/:LinkModuleEntityReportFileId",component:Jt,data:{title:"ROUTE.CORELOG"}},{path:"member",component:Mo,data:{title:"ROUTE.CORELOG"}},{path:"currency",component:to,data:{title:"ROUTE.CORELOG"}},{path:"currency/:LinkCurrencyId",component:to,data:{title:"ROUTE.CORELOG"}},{path:"micro-service-status",component:yo,data:{title:"ROUTE.CORELOG.MICROSERVICESTATUS"}},{path:"micro-service-ping",component:Eo,data:{title:"ROUTE.CORELOG.MICROSERVICEPING"}}]}],ai=class ai{};ai.\u0275fac=function(e){return new(e||ai)},ai.\u0275mod=oo({type:ai}),ai.\u0275inj=io({imports:[Po.forChild(fm),Po]});var Vo=ai;var si=class si{};si.\u0275fac=function(e){return new(e||si)},si.\u0275mod=oo({type:si}),si.\u0275inj=io({providers:[Ko,pi,Gt,Vt,Bt,Pt,di,mi,Ot,ui,ao,Oe],imports:[Vo,Jo,Yo,Xo.withConfig({warnOnNgModelWithFormControl:"never"}),hn,gn,Cn]});var Mn=si;export{Mn as CoreLogModule};
