import{a as un}from"./chunk-VSYY4AIL.js";import{a as Bt}from"./chunk-S2RDI572.js";import{a as fn}from"./chunk-7FDTK4WM.js";import{c as Nt,d as cn,e as dn,g as pn,h as mn}from"./chunk-44ANJLTO.js";import{a as Pt}from"./chunk-7CBKBXFK.js";import{a as qe}from"./chunk-OWDIM4AP.js";import{a as Ot}from"./chunk-EEHKHPIK.js";import{a as kt}from"./chunk-2EBKIGWG.js";import{b as sn}from"./chunk-IRSRD4AH.js";import"./chunk-IP2K5E25.js";import"./chunk-HTBUGXYF.js";import{a as ze}from"./chunk-XSO7DJFU.js";import{a as q}from"./chunk-JI72DBZ7.js";import{e as Dt,f as L}from"./chunk-HXH5Z4PQ.js";import{$ as xi,$a as te,A as Ii,Ab as en,Bb as tn,Cb as nn,Db as on,Fc as je,Hb as rn,Ib as yt,Ic as xe,J as It,Ja as pt,Jb as Et,K as ce,Ka as pe,Kb as Tt,Kc as V,L as de,La as me,Lb as xt,Ma as We,Mb as wt,N as Mi,Nb as At,Nc as ln,O as bi,Q as Mt,Qb as B,Rb as F,V as yi,W as Ee,Y as Ei,Za as Te,_ as Ti,aa as wi,ba as He,bc as Rt,ca as Ai,cc as an,eb as Li,fa as Ri,fb as Gi,gb as Hi,hb as Wi,ia as Di,ib as ji,ja as Oi,jb as qi,ka as ki,la as Pi,lb as zi,m as vt,mb as Ui,n as $,na as Ni,nb as Qi,q as U,qa as Bi,r as Me,sa as bt,t as be,u as vi,ub as Yi,v as ee,va as Fi,vb as Ki,w as ye,wa as Vi,wb as Ji,xb as Xi,yb as Zi,zb as $i}from"./chunk-OXCCWIF2.js";import{Ab as oi,Al as ae,Bl as ct,Bq as Qt,Ca as fe,Cb as J,Cd as Ve,Cl as gi,Cq as dt,Db as X,Dl as Ci,Eb as Z,El as Ge,F as $t,Fa as n,Fd as St,Gd as Q,Ha as ve,I as ei,Ib as A,Jb as ri,Jc as ht,Kb as re,Kc as H,Kd as Ie,Ld as Y,Md as le,Nb as c,Oa as S,Ob as I,P as ti,Pb as m,Q as ii,Qb as at,Qc as _t,Sa as k,Sb as ai,Ta as Ct,Tb as E,Tc as ci,Ub as T,Ud as j,Vb as x,Wa as K,Wb as w,Wc as di,Xb as zt,Y as gt,Ya as v,Yd as mi,_b as li,cc as f,da as h,db as ge,dc as g,ea as _,fg as ui,hc as si,jb as d,kb as o,lb as a,mb as b,nd as lt,p as ft,q as Zt,qb as R,rb as D,rl as fi,sb as Oe,sd as Ut,sl as z,tb as y,tl as se,tq as hi,ul as Le,uq as _i,vc as N,vd as pi,vq as Si,wb as M,yb as u,yd as st,zb as ni,zl as W}from"./chunk-SG3IEC2T.js";import{i as oe}from"./chunk-SEDBTTTN.js";var Ue=class Ue{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};Ue.\u0275fac=function(e){return new(e||Ue)},Ue.\u0275cmp=k({type:Ue,selectors:[["app-contact"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&b(0,"router-outlet")},dependencies:[_i],encapsulation:2});var Ft=Ue;function bn(r,l){if(r&1){let e=y();o(0,"mat-tree-node",10),b(1,"button",11),o(2,"mat-checkbox",12),M("change",function(){let t=h(e).$implicit,s=u();return _(s.todoItemSelectionToggle(t))}),c(3),a()()}if(r&2){let e=l.$implicit,i=u();n(2),d("checked",i.checklistSelection.isSelected(e))("indeterminate",i.descendantsPartiallySelected(e)),n(),I(e.title)}}function yn(r,l){if(r&1){let e=y();o(0,"mat-tree-node",13)(1,"button",14)(2,"mat-icon",15),c(3),a()(),o(4,"mat-checkbox",16),M("change",function(){let t=h(e).$implicit,s=u();return _(s.checklistSelection.toggle(t))}),c(5),a()()}if(r&2){let e=l.$implicit,i=u(),t=A(8);d("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),n(),ge("type","button")("aria-label","Toggle "+e.title)("type","button"),n(2),m(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),n(),d("checked",i.checklistSelection.isSelected(e)),n(),I(e.title)}}var Qe=class Qe{constructor(l,e,i,t,s,C,p,O,G){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.cdr=t;this.publicHelper=s;this.dialog=C;this.translate=p;this.tokenHelper=O;this.cmsStoreService=G;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=[];this.dataModelResult=new Q;this.filterModel=new Y;this.dataSource=new At;this.optionSelectChecked=new ve;this.optionSelectDisChecked=new ve;this.optionModelChange=new ve;this.unsubscribe=[];this.checklistSelection=new Ri(!0);this.hasChild=(l,e)=>!!e.children&&e.children.length>0;this.childrenAccessor=l=>l.children??[];this.hasNoContent=(l,e)=>e.children;this.runComplate=!1;this.treeControl=new rn(l=>l.children);this.publicHelper.processService.cdr=this.cdr,this.checklistSelection.changed.subscribe(P=>{if(!this.runComplate)return;let ne=[];this.checklistSelection.selected.forEach(De=>{ne.push(De.id)}),this.optionModelChange.emit(ne),P.added&&P.added.length>0&&P.added.forEach(De=>{this.optionSelectChecked.emit(De.id)}),P.removed&&P.removed.length>0&&P.removed.forEach(De=>{this.optionSelectDisChecked.emit(De.id)})})}set optionModel(l){this.dataModelSelect=l,this.loadCheked()}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>oe(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}loadCheked(){this.runComplate=!1,this.CompileDataByCheked(this.dataModelResult.listItems,this.dataModelSelect),this.runComplate=!0}CompileDataByCheked(l,e){if(!(l?.length>0))return!1;let i=!1;for(let t of l){let s=!1;e?.includes(t.id)?(this.checklistSelection.select(t),i=!0):this.checklistSelection.deselect(t),t.children?.length>0&&(s=this.CompileDataByCheked(t.children,e),s&&(i=!0,t.isExpanded=!0))}return i}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems,this.loadCheked()):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.publicHelper.processService.processStop(l),this.cmsToastrService.typeError(e)}})}descendantsAllSelected(l){return this.treeControl.getDescendants(l).every(i=>this.checklistSelection.isSelected(i))}descendantsPartiallySelected(l){return this.treeControl.getDescendants(l).some(t=>this.checklistSelection.isSelected(t))&&!this.descendantsAllSelected(l)}todoItemSelectionToggle(l){this.checklistSelection.toggle(l);let e=this.treeControl.getDescendants(l);this.checklistSelection.isSelected(l)?this.checklistSelection.select(...e):this.checklistSelection.deselect(...e)}};Qe.\u0275fac=function(e){return new(e||Qe)(S(V),S(j),S(z),S(N),S(L),S(We),S(B),S(xe),S(je))},Qe.\u0275cmp=k({type:Qe,selectors:[["app-contact-category-treeselector"]],inputs:{optionModel:"optionModel"},outputs:{optionSelectChecked:"optionSelectChecked",optionSelectDisChecked:"optionSelectDisChecked",optionModelChange:"optionModelChange"},standalone:!1,decls:12,vars:10,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"change","checked","indeterminate"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[1,"checklist-leaf-node",3,"change","checked"]],template:function(e,i){e&1&&(o(0,"app-cms-html-tree",1),R(1,2),c(2),f(3,"translate"),D(),Oe(4,3),R(5,4),b(6,"app-progress-spinner",5),o(7,"mat-tree",6,0),v(9,bn,4,3,"mat-tree-node",7)(10,yn,6,8,"mat-tree-node",8),a(),D(),Oe(11,9),a()),e&2&&(d("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),n(2),m(" ",g(3,8,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),n(4),d("optionsInfoAreaId",i.constructorInfoAreaId),n(),d("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),n(3),d("matTreeNodeDefWhen",i.hasChild))},dependencies:[He,bt,Te,Et,Tt,wt,xt,yt,q,Bt,F],encapsulation:2});var Ye=Qe;var En=["vform"];function Tn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function xn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.firstName==null?null:e.fieldsInfo.firstName.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function wn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.lastName==null?null:e.fieldsInfo.lastName.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function An(r,l){r&1&&(o(0,"mat-error"),c(1," Numbers is "),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2&&(n(3),I(g(4,1,"MESSAGE.required")))}function Rn(r,l){if(r&1){let e=y();o(0,"div",30)(1,"div",31)(2,"h5",32),c(3),a()(),o(4,"div",33)(5,"div",34)(6,"input",35),x("ngModelChange",function(t){h(e);let s=u();return T(s.dataModel.numberHidden,t)||(s.dataModel.numberHidden=t),_(t)}),a(),b(7,"label",36),a()()()}if(r&2){let e=u();n(3),m(" ",e.fieldsInfo.numberHidden==null?null:e.fieldsInfo.numberHidden.fieldTitle," "),n(3),E("ngModel",e.dataModel.numberHidden)}}function Dn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function On(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.organization==null?null:e.fieldsInfo.organization.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function kn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.jobTitle==null?null:e.fieldsInfo.jobTitle.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function Pn(r,l){if(r&1){let e=y();o(0,"div",37)(1,"button",38),M("click",function(){h(e);let t=u();return _(t.onFormCancel())}),b(2,"i",39),c(3),f(4,"translate"),a(),o(5,"button",40),b(6,"i",41),c(7),f(8,"translate"),a()()}if(r&2){u();let e=A(9);n(3),m(" ",g(4,3,"ACTION.CANCEL")," "),n(2),d("disabled",!e.form.valid),n(2),m(" ",g(8,5,"ACTION.SAVE")," ")}}var Ke=class Ke extends Ot{constructor(e,i,t,s,C,p,O,G,P){super(s,new ae,O,P);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ContactContentService=s;this.contentCategoryService=C;this.cmsToastrService=p;this.publicHelper=O;this.cdr=G;this.translate=P;this.linkCategoryId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new Q;this.dataModel=new ae;this.formInfo=new le;this.fileManagerOpenForm=!1;this.dataContentCategoryModel=[];this.publicHelper.processService.cdr=this.cdr,this.dataContentCategoryModel=[],e&&(this.linkCategoryId=e.linkCategoryId,this.dataContentCategoryModel.push(this.linkCategoryId)),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){}ngOnInit(){this.translate.get("TITLE.Register_New_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ContactContentService.ServiceAdd(this.dataModel).subscribe({next:i=>{if(this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess){this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd();for(let t=0;t<this.dataContentCategoryModel.length;t++){let s=new ct;s.linkCategoryId=this.dataContentCategoryModel[t],s.linkContentId=i.item.id,this.contentCategoryService.ServiceAdd(s).subscribe({next:C=>{C.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(p=>{this.formInfo.submitResultMessage=p}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(p=>{this.formInfo.submitResultMessage=p}),this.formInfo.submitResultMessage=C.errorMessage,this.cmsToastrService.typeErrorMessage(C.errorMessage))},error:C=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(C)}})}this.dialogRef.close({dialogChangedDate:!0})}else this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage);this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionCategorySelectChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}onActionCategorySelectDisChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionSelectCategory(e){if(!e||e.id?.length==0){this.translate.get("MESSAGE.Category_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}};Ke.\u0275fac=function(i){return new(i||Ke)(S(me),S(pe),S(j),S(se),S(Le),S(V),S(L),S(N),S(B))},Ke.\u0275cmp=k({type:Ke,selectors:[["app-contact-content-add"]],viewQuery:function(i,t){if(i&1&&J(En,5),i&2){let s;X(s=Z())&&(t.formGroup=s.first)}},standalone:!1,features:[K],decls:70,vars:50,consts:[["vform","ngForm"],["Title",""],["FirstName",""],["LastName",""],["Numbers",""],["Email",""],["Organization",""],["JobTitle",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"optionModelChange","optionSelectChecked","optionSelectDisChecked","optionModel"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.firstName",1,"color-highlight"],["matInput","","type","text","name","dataModel.firstName","minlength","3","maxlength","100","id","dataModel.firstName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.lastName",1,"color-highlight"],["matInput","","type","text","name","dataModel.lastName","minlength","3","maxlength","100","id","dataModel.lastName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.numbers",1,"color-highlight"],["matInput","","name","dataModel.numbers","type","text","minlength","1","maxlength","5000","rows","5","id","dataModel.numbers",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","d-flex mb-3",4,"ngIf"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","minlength","3","maxlength","100","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.organization","minlength","3","maxlength","100","id","dataModel.organization",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.jobTitle","minlength","3","maxlength","100","id","dataModel.jobTitle",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","form-actions",4,"ngIf"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.numberHidden",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.numberHidden","name","dataModel.numberHidden",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.numberHidden",1,"custom-control-label"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=y();o(0,"div",8),b(1,"app-progress-spinner",9),o(2,"div",10)(3,"p",11),c(4),a(),o(5,"p"),c(6),f(7,"translate"),a(),o(8,"form",12,0),M("ngSubmit",function(){return h(s),_(t.onFormSubmit())}),o(10,"app-contact-category-treeselector",13),x("optionModelChange",function(p){return h(s),T(t.dataContentCategoryModel,p)||(t.dataContentCategoryModel=p),_(p)}),M("optionSelectChecked",function(p){return h(s),_(t.onActionCategorySelectChecked(p))})("optionSelectDisChecked",function(p){return h(s),_(t.onActionCategorySelectDisChecked(p))}),a(),o(11,"div",14)(12,"label",15),c(13),a(),o(14,"input",16,1),x("ngModelChange",function(p){return h(s),T(t.dataModel.title,p)||(t.dataModel.title=p),_(p)}),a(),o(16,"em"),c(17),a(),v(18,Tn,5,4,"mat-error",17),a(),o(19,"div",14)(20,"label",18),c(21),a(),o(22,"input",19,2),x("ngModelChange",function(p){return h(s),T(t.dataModel.firstName,p)||(t.dataModel.firstName=p),_(p)}),a(),o(24,"em"),c(25),a(),v(26,xn,5,4,"mat-error",17),a(),o(27,"div",14)(28,"label",20),c(29),a(),o(30,"input",21,3),x("ngModelChange",function(p){return h(s),T(t.dataModel.lastName,p)||(t.dataModel.lastName=p),_(p)}),a(),o(32,"em"),c(33),a(),v(34,wn,5,4,"mat-error",17),a(),o(35,"div",14)(36,"label",22),c(37),a(),o(38,"textarea",23,4),x("ngModelChange",function(p){return h(s),T(t.dataModel.numbers,p)||(t.dataModel.numbers=p),_(p)}),c(40,"        "),a(),o(41,"em"),c(42),a(),v(43,An,5,3,"mat-error",17),a(),v(44,Rn,8,2,"div",24),o(45,"div",14)(46,"label",25),c(47),a(),o(48,"input",26,5),x("ngModelChange",function(p){return h(s),T(t.dataModel.email,p)||(t.dataModel.email=p),_(p)}),a(),o(50,"em"),c(51),a(),v(52,Dn,5,4,"mat-error",17),a(),o(53,"div",14)(54,"label",25),c(55),a(),o(56,"input",27,6),x("ngModelChange",function(p){return h(s),T(t.dataModel.organization,p)||(t.dataModel.organization=p),_(p)}),a(),o(58,"em"),c(59),a(),v(60,On,5,4,"mat-error",17),a(),o(61,"div",14)(62,"label",25),c(63),a(),o(64,"input",28,7),x("ngModelChange",function(p){return h(s),T(t.dataModel.jobTitle,p)||(t.dataModel.jobTitle=p),_(p)}),a(),o(66,"em"),c(67),a(),v(68,kn,5,4,"mat-error",17),a(),v(69,Pn,9,7,"div",29),a()()()}if(i&2){let s=A(15),C=A(23),p=A(31),O=A(39),G=A(49),P=A(57),ne=A(65);n(),d("optionsInfoAreaId",t.constructorInfoAreaId),n(3),m(" ",t.formInfo.formTitle," "),n(2),m(" ",g(7,48,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),E("optionModel",t.dataContentCategoryModel),n(3),I(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),E("ngModel",t.dataModel.title),n(3),m("",s.value.length," / 100"),n(),d("ngIf",s.errors==null?null:s.errors.required),n(3),I(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle)),E("ngModel",t.dataModel.firstName),n(3),m("",C.value.length," / 100"),n(),d("ngIf",C.errors==null?null:C.errors.required),n(3),I(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle)),E("ngModel",t.dataModel.lastName),n(3),m("",p.value.length," / 100"),n(),d("ngIf",p.errors==null?null:p.errors.required),n(3),I(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle)),E("ngModel",t.dataModel.numbers),n(4),m("",O.value.length," / 5000"),n(),d("ngIf",O.errors==null?null:O.errors.required),n(),d("ngIf",t.fieldsInfo.numberHidden==null?null:t.fieldsInfo.numberHidden.accessWatchField),n(3),I(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle)),E("ngModel",t.dataModel.email),n(3),m("",G.value.length," / 100"),n(),d("ngIf",G.errors==null?null:G.errors.required),n(3),I(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle)),E("ngModel",t.dataModel.organization),n(3),m("",P.value.length," / 100"),n(),d("ngIf",P.errors==null?null:P.errors.required),n(3),I(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle)),E("ngModel",t.dataModel.jobTitle),n(3),m("",ne.value.length," / 100"),n(),d("ngIf",ne.errors==null?null:ne.errors.required),n(),d("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[H,ye,$,vt,U,Me,ce,de,ee,be,Ee,te,q,Ye,F],encapsulation:2});var Je=Ke;var Nn=["vform"];function Bn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function Fn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.firstName==null?null:e.fieldsInfo.firstName.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function Vn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.lastName==null?null:e.fieldsInfo.lastName.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function Ln(r,l){r&1&&(o(0,"mat-error"),c(1," Numbers is "),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2&&(n(3),I(g(4,1,"MESSAGE.required")))}function Gn(r,l){if(r&1){let e=y();o(0,"div",30)(1,"div",31)(2,"h5",32),c(3),a()(),o(4,"div",33)(5,"div",34)(6,"input",35),x("ngModelChange",function(t){h(e);let s=u();return T(s.dataModel.numberHidden,t)||(s.dataModel.numberHidden=t),_(t)}),a(),b(7,"label",36),a()()()}if(r&2){let e=u();n(3),m(" ",e.fieldsInfo.numberHidden==null?null:e.fieldsInfo.numberHidden.fieldTitle," "),n(3),E("ngModel",e.dataModel.numberHidden)}}function Hn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function Wn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.organization==null?null:e.fieldsInfo.organization.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function jn(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.jobTitle==null?null:e.fieldsInfo.jobTitle.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function qn(r,l){if(r&1){let e=y();o(0,"div",37)(1,"button",38),M("click",function(){h(e);let t=u();return _(t.onFormCancel())}),b(2,"i",39),c(3),f(4,"translate"),a(),o(5,"button",40),b(6,"i",41),c(7),f(8,"translate"),a()()}if(r&2){u();let e=A(9);n(3),m(" ",g(4,3,"ACTION.CANCEL")," "),n(2),d("disabled",!e.form.valid),n(2),m(" ",g(8,5,"ACTION.SAVE")," ")}}var Ze=class Ze extends Pt{constructor(e,i,t,s,C,p,O,G,P){super(s,new ae,O,P);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ContactContentService=s;this.contentCategoryService=C;this.cmsToastrService=p;this.publicHelper=O;this.cdr=G;this.translate=P;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new St;this.dataModel=new ae;this.formInfo=new le;this.fileManagerOpenForm=!1;this.dataContentCategoryModel=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){}ngOnInit(){this.DataGetOneContent(),this.DataCategoryGetAll()}DataGetOneContent(){if(this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ContactContentService.setAccessLoad(),this.ContactContentService.setAccessDataType(Ve.Editor),this.ContactContentService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataCategoryGetAll(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.get_category_information_from_the_server").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_category_information_from_the_server").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)});let i=new Y,t=new Ie;t.propertyName="LinkContentId",t.value=this.requestId,t.clauseType=lt.And,i.filters.push(t),this.contentCategoryService.ServiceGetAll(i).subscribe({next:s=>{let C=[];s.listItems.forEach(p=>{C.push(p.linkCategoryId)}),this.dataContentCategoryModel=C,this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(e)},error:s=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorGetAll(s),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ContactContentService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionCategorySelectChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}let i=new ct;i.linkCategoryId=e,i.linkContentId=this.dataModel.id,this.contentCategoryService.ServiceAdd(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.formInfo.submitResultMessage=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(t)}})}onActionCategorySelectDisChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}let i=new ct;i.linkCategoryId=e,i.linkContentId=this.dataModel.id,this.contentCategoryService.ServiceDeleteEntity(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.formInfo.submitResultMessage=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(t)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionSelectCategory(e){if(!e||e.id?.length==0){this.translate.get("MESSAGE.Category_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}};Ze.\u0275fac=function(i){return new(i||Ze)(S(me),S(pe),S(j),S(se),S(Le),S(V),S(L),S(N),S(B))},Ze.\u0275cmp=k({type:Ze,selectors:[["app-contact-content-edit"]],viewQuery:function(i,t){if(i&1&&J(Nn,5),i&2){let s;X(s=Z())&&(t.formGroup=s.first)}},standalone:!1,features:[K],decls:70,vars:50,consts:[["vform","ngForm"],["Title",""],["FirstName",""],["LastName",""],["Numbers",""],["Email",""],["Organization",""],["JobTitle",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"optionModelChange","optionSelectChecked","optionSelectDisChecked","optionModel"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.firstName",1,"color-highlight"],["matInput","","type","text","name","dataModel.firstName","minlength","3","maxlength","100","id","dataModel.firstName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.lastName",1,"color-highlight"],["matInput","","type","text","name","dataModel.lastName","minlength","3","maxlength","100","id","dataModel.lastName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.numbers",1,"color-highlight"],["matInput","","name","dataModel.numbers","type","text","minlength","1","maxlength","5000","rows","5","id","dataModel.numbers",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","d-flex mb-3",4,"ngIf"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","minlength","3","maxlength","100","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.organization","minlength","3","maxlength","100","id","dataModel.organization",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.jobTitle","minlength","3","maxlength","100","id","dataModel.jobTitle",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","form-actions",4,"ngIf"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.numberHidden",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.numberHidden","name","dataModel.numberHidden",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.numberHidden",1,"custom-control-label"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=y();o(0,"div",8),b(1,"app-progress-spinner",9),o(2,"div",10)(3,"p",11),c(4),a(),o(5,"p"),c(6),f(7,"translate"),a(),o(8,"form",12,0),M("ngSubmit",function(){return h(s),_(t.onFormSubmit())}),o(10,"app-contact-category-treeselector",13),x("optionModelChange",function(p){return h(s),T(t.dataContentCategoryModel,p)||(t.dataContentCategoryModel=p),_(p)}),M("optionSelectChecked",function(p){return h(s),_(t.onActionCategorySelectChecked(p))})("optionSelectDisChecked",function(p){return h(s),_(t.onActionCategorySelectDisChecked(p))}),a(),o(11,"div",14)(12,"label",15),c(13),a(),o(14,"input",16,1),x("ngModelChange",function(p){return h(s),T(t.dataModel.title,p)||(t.dataModel.title=p),_(p)}),a(),o(16,"em"),c(17),a(),v(18,Bn,5,4,"mat-error",17),a(),o(19,"div",14)(20,"label",18),c(21),a(),o(22,"input",19,2),x("ngModelChange",function(p){return h(s),T(t.dataModel.firstName,p)||(t.dataModel.firstName=p),_(p)}),a(),o(24,"em"),c(25),a(),v(26,Fn,5,4,"mat-error",17),a(),o(27,"div",14)(28,"label",20),c(29),a(),o(30,"input",21,3),x("ngModelChange",function(p){return h(s),T(t.dataModel.lastName,p)||(t.dataModel.lastName=p),_(p)}),a(),o(32,"em"),c(33),a(),v(34,Vn,5,4,"mat-error",17),a(),o(35,"div",14)(36,"label",22),c(37),a(),o(38,"textarea",23,4),x("ngModelChange",function(p){return h(s),T(t.dataModel.numbers,p)||(t.dataModel.numbers=p),_(p)}),c(40,"        "),a(),o(41,"em"),c(42),a(),v(43,Ln,5,3,"mat-error",17),a(),v(44,Gn,8,2,"div",24),o(45,"div",14)(46,"label",25),c(47),a(),o(48,"input",26,5),x("ngModelChange",function(p){return h(s),T(t.dataModel.email,p)||(t.dataModel.email=p),_(p)}),a(),o(50,"em"),c(51),a(),v(52,Hn,5,4,"mat-error",17),a(),o(53,"div",14)(54,"label",25),c(55),a(),o(56,"input",27,6),x("ngModelChange",function(p){return h(s),T(t.dataModel.organization,p)||(t.dataModel.organization=p),_(p)}),a(),o(58,"em"),c(59),a(),v(60,Wn,5,4,"mat-error",17),a(),o(61,"div",14)(62,"label",25),c(63),a(),o(64,"input",28,7),x("ngModelChange",function(p){return h(s),T(t.dataModel.jobTitle,p)||(t.dataModel.jobTitle=p),_(p)}),a(),o(66,"em"),c(67),a(),v(68,jn,5,4,"mat-error",17),a(),v(69,qn,9,7,"div",29),a()()()}if(i&2){let s=A(15),C=A(23),p=A(31),O=A(39),G=A(49),P=A(57),ne=A(65);n(),d("optionsInfoAreaId",t.constructorInfoAreaId),n(3),m(" ",t.formInfo.formTitle," "),n(2),m(" ",g(7,48,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),E("optionModel",t.dataContentCategoryModel),n(3),I(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),E("ngModel",t.dataModel.title),n(3),m("",s.value.length," / 100"),n(),d("ngIf",s.errors==null?null:s.errors.required),n(3),I(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle)),E("ngModel",t.dataModel.firstName),n(3),m("",C.value.length," / 100"),n(),d("ngIf",C.errors==null?null:C.errors.required),n(3),I(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle)),E("ngModel",t.dataModel.lastName),n(3),m("",p.value.length," / 100"),n(),d("ngIf",p.errors==null?null:p.errors.required),n(3),I(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle)),E("ngModel",t.dataModel.numbers),n(4),m("",O.value.length," / 5000"),n(),d("ngIf",O.errors==null?null:O.errors.required),n(),d("ngIf",t.fieldsInfo.numberHidden==null?null:t.fieldsInfo.numberHidden.accessWatchField),n(3),I(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle)),E("ngModel",t.dataModel.email),n(3),m("",G.value.length," / 100"),n(),d("ngIf",G.errors==null?null:G.errors.required),n(3),I(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle)),E("ngModel",t.dataModel.organization),n(3),m("",P.value.length," / 100"),n(),d("ngIf",P.errors==null?null:P.errors.required),n(3),I(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle)),E("ngModel",t.dataModel.jobTitle),n(3),m("",ne.value.length," / 100"),n(),d("ngIf",ne.errors==null?null:ne.errors.required),n(),d("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[H,ye,$,vt,U,Me,ce,de,ee,be,Ee,te,q,Ye,F],encapsulation:2});var $e=Ze;var Un=["*"];function Qn(r,l){if(r&1&&(o(0,"label",14),c(1),a()),r&2){let e=u();d("for",zt("app-cms-site-selector-",e.id)),n(),I(e.optionLabel)}}function Yn(r,l){if(r&1&&(b(0,"img",15),f(1,"cmsthumbnail")),r&2){let e=u();d("src",w(g(1,2,e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),fe)}}function Kn(r,l){if(r&1&&(b(0,"img",15),f(1,"cmsthumbnail")),r&2){let e=u().$implicit;d("src",w(g(1,2,e.linkMainImageIdSrc)),fe)}}function Jn(r,l){if(r&1&&(o(0,"mat-option",16),v(1,Kn,2,4,"img",5),o(2,"span"),c(3),a()()),r&2){let e=l.$implicit,i=u();d("value",e)("disabled",i.optionDisabled),n(),d("ngIf",e.linkMainImageIdSrc),n(2),I(i.displayOption(e))}}function Xn(r,l){r&1&&b(0,"i",17)}function Zn(r,l){r&1&&b(0,"i",18)}function $n(r,l){if(r&1){let e=y();o(0,"i",19),M("click",function(){h(e);let t=u();return _(t.onActionSelectClear())}),a()}}function eo(r,l){r&1&&(o(0,"em"),c(1),f(2,"translate"),a()),r&2&&(n(),m("(",g(2,1,"TITLE.Necessary"),")"))}var Ae=class Ae{constructor(l,e,i,t,s,C){this.coreEnumService=l;this.cmsToastrService=e;this.cdr=i;this.publicHelper=t;this.translate=s;this.categoryService=C;this.id=++Ae.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new Q;this.dataModelSelect=new W;this.formControl=new vi;this.optionPlaceholder="";this.optionSelectFirstItem=!1;this.optionDisabled=!1;this.optionRequired=!1;this.optionLabel="";this.optionChange=new ve;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(ti(""),$t(1500),ei(),ii(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return oe(this,null,function*(){let e=new Y;e.rowPerPage=20,e.accessLoad=!0;let i=new Ie;i.propertyName="title",i.value=l,i.searchType=Ut.Contains,i.clauseType=lt.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new Ie,i.propertyName="id",i.value=l,i.searchType=Ut.Equal,i.clauseType=lt.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield ft(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id.length==0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe(Zt(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="string"&&l.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof l==typeof W){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new W,this.loadOptions()}};Ae.nextId=0,Ae.\u0275fac=function(e){return new(e||Ae)(S(j),S(V),S(N),S(L),S(B),S(z))},Ae.\u0275cmp=k({type:Ae,selectors:[["app-contact-category-selector"]],inputs:{optionPlaceholder:"optionPlaceholder",optionSelectFirstItem:"optionSelectFirstItem",optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:Un,decls:18,vars:25,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=y();ni(),o(0,"div",1),b(1,"app-progress-spinner",2),v(2,Qn,2,3,"label",3),o(3,"span",4),v(4,Yn,2,4,"img",5),c(5," \xA0"),a(),b(6,"input",6),o(7,"mat-autocomplete",7,0),M("optionSelected",function(C){return h(t),_(i.onActionSelect(C.option.value))}),v(9,Jn,4,4,"mat-option",8),f(10,"async"),a(),v(11,Xn,1,0,"i",9)(12,Zn,1,0,"i",10)(13,$n,1,0,"i",11),o(14,"i",12),f(15,"translate"),M("click",function(){return h(t),_(i.onActionButtonReload())}),a(),v(16,eo,3,3,"em",13),oi(17),a()}if(e&2){let t=A(8);n(),d("optionsInfoAreaId",i.constructorInfoAreaId),n(),d("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),n(2),d("ngIf",i.dataModelSelect&&(i.dataModelSelect==null?null:i.dataModelSelect.linkMainImageIdSrc)),n(2),d("placeholder",w(i.optionPlaceholder))("id",zt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),ge("disabled",i.optionDisabled?!0:null),n(),d("displayWith",i.displayFn),n(2),d("ngForOf",g(10,21,i.filteredOptions)),n(2),d("ngIf",!i.formControl.valid),n(),d("ngIf",i.optionRequired&&i.formControl.valid),n(),d("ngIf",(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0),n(),re("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),d("title",w(g(15,23,"ACTION.RELOAD"))),n(2),d("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id.length<=0))}},dependencies:[ht,H,$,U,It,Ii,xi,Mt,wi,Ei,te,q,_t,F,qe],encapsulation:2});var Re=Ae;var no=["fileInput"];function oo(r,l){if(r&1){let e=y();o(0,"div",15)(1,"div")(2,"p",16),c(3),a(),o(4,"span",17),c(5),f(6,"translate"),a()(),o(7,"button",18),M("click",function(){h(e);let t=u();return _(t.onRemoveFile())}),c(8),f(9,"translate"),a()()}if(r&2){let e=u();n(3),I(e.selectedFile.name),n(2),at(" ",g(6,5,"CONTACT.IMPORT.FILE_SIZE"),": ",e.formatFileSize(e.selectedFile)," "),n(2),d("disabled",e.isPreviewLoading),n(),m(" ",g(9,7,"CONTACT.IMPORT.CLEAR_BUTTON")," ")}}function ro(r,l){r&1&&b(0,"mat-progress-bar",19)}function ao(r,l){if(r&1&&(o(0,"p",20),c(1),a()),r&2){let e=u();n(),m(" ",e.lastPreviewError," ")}}function lo(r,l){if(r&1&&(o(0,"mat-chip",38),c(1),a()),r&2){let e=l.$implicit;n(),m(" ",e," ")}}function so(r,l){if(r&1&&(o(0,"div",36)(1,"label"),c(2),f(3,"translate"),a(),o(4,"mat-chip-set"),v(5,lo,2,1,"mat-chip",37),a()()),r&2){let e=u(2);n(2),I(g(3,3,"CONTACT.IMPORT.SOURCE_HEADERS_TITLE")),n(3),d("ngForOf",e.sourceHeaders)("ngForTrackBy",e.trackByHeader)}}function co(r,l){r&1&&(o(0,"span",46),c(1),f(2,"translate"),a()),r&2&&(n(),m(" ",g(2,1,"CONTACT.IMPORT.REQUIRED_BADGE")," "))}function po(r,l){if(r&1&&(o(0,"mat-option",47),c(1),a()),r&2){let e=l.$implicit;d("value",e),n(),m(" ",e," ")}}function mo(r,l){if(r&1){let e=y();o(0,"div",39)(1,"div",40)(2,"div")(3,"p"),c(4),a(),o(5,"small"),c(6),a()(),v(7,co,3,3,"span",41),a(),o(8,"mat-form-field",42)(9,"mat-label"),c(10),f(11,"translate"),a(),o(12,"mat-select",43),x("ngModelChange",function(t){let s=h(e).$implicit,C=u(2);return T(C.mappingSelections[s.key],t)||(C.mappingSelections[s.key]=t),_(t)}),M("selectionChange",function(){h(e);let t=u(2);return _(t.onMappingChange())}),o(13,"mat-option",44),c(14),f(15,"translate"),a(),v(16,po,2,2,"mat-option",45),a()()()}if(r&2){let e=l.$implicit,i=u(2);n(4),I(e.title||e.key),n(2),I(e.key),n(),d("ngIf",e.required),n(3),m(" ",g(11,8,"CONTACT.IMPORT.SELECT_SOURCE_HEADER_LABEL")," "),n(2),E("ngModel",i.mappingSelections[e.key]),n(2),m(" ",g(15,10,"CONTACT.IMPORT.OPTION_SKIP")," "),n(2),d("ngForOf",i.sourceHeaders)("ngForTrackBy",i.trackByHeader)}}function uo(r,l){r&1&&(o(0,"p",20),c(1),f(2,"translate"),a()),r&2&&(n(),m(" ",g(2,1,"CONTACT.IMPORT.MISSING_REQUIRED")," "))}function fo(r,l){r&1&&b(0,"mat-progress-spinner",48),r&2&&d("diameter",18)("strokeWidth",3)}function go(r,l){if(r&1&&(o(0,"p",20),c(1),a()),r&2){let e=u(2);n(),m(" ",e.lastApplyError," ")}}function Co(r,l){r&1&&(o(0,"span",61),c(1," * "),a())}function ho(r,l){if(r&1&&(o(0,"mat-option",59),c(1),v(2,Co,2,0,"span",60),a()),r&2){let e=l.$implicit,i=u().$implicit,t=u(3);d("value",e.key)("disabled",t.isDestinationUsed(e.key,i)),n(),m(" ",e.title||e.key," "),n(),d("ngIf",e.required)}}function _o(r,l){if(r&1){let e=y();o(0,"div",53)(1,"div",54)(2,"span",55),c(3),a(),o(4,"mat-form-field",56)(5,"mat-label"),c(6),f(7,"translate"),a(),o(8,"mat-select",57),M("selectionChange",function(t){let s=h(e).$implicit,C=u(3);return _(C.onSourceHeaderMappingChange(s,t.value))}),o(9,"mat-option",44),c(10),f(11,"translate"),a(),v(12,ho,3,4,"mat-option",58),a()()()()}if(r&2){let e=l.$implicit,i=u(3);n(3),I(e),n(3),m(" ",g(7,6,"CONTACT.IMPORT.SELECT_DESTINATION_LABEL")," "),n(2),d("value",i.getDestinationForSource(e)),n(2),m(" ",g(11,8,"CONTACT.IMPORT.OPTION_SKIP")," "),n(2),d("ngForOf",i.destinationHeaders)("ngForTrackBy",i.trackByDestination)}}function So(r,l){if(r&1&&(o(0,"div",64),c(1),a()),r&2){let e=l.$implicit,i=u().$implicit;n(),m(" ",i[e]||"-"," ")}}function vo(r,l){if(r&1&&(o(0,"div",62),v(1,So,2,1,"div",63),a()),r&2){let e=u(3);n(),d("ngForOf",e.sourceHeaders)("ngForTrackBy",e.trackByHeader)}}function Io(r,l){if(r&1&&(o(0,"div")(1,"div",49)(2,"div",50),v(3,_o,13,10,"div",51),a(),v(4,vo,2,2,"div",52),a()()),r&2){let e=u(2);n(),ri("--columns-count",e.sourceHeaders.length),n(2),d("ngForOf",e.sourceHeaders)("ngForTrackBy",e.trackByHeader),n(),d("ngForOf",e.sampleRows)}}function Mo(r,l){r&1&&(o(0,"p",65),c(1),f(2,"translate"),a()),r&2&&(n(),m(" ",g(2,1,"CONTACT.IMPORT.NO_SAMPLE_ROWS")," "))}function bo(r,l){if(r&1&&(o(0,"mat-card",66)(1,"mat-card-header")(2,"mat-card-title"),c(3),f(4,"translate"),a()(),o(5,"mat-card-content")(6,"div",67)(7,"div")(8,"span"),c(9),f(10,"translate"),a(),o(11,"strong"),c(12),a()(),o(13,"div")(14,"span"),c(15),f(16,"translate"),a(),o(17,"strong"),c(18),a()()(),o(19,"p",65),c(20),f(21,"translate"),a()()()),r&2){let e=u(2);n(3),m(" ",g(4,6,"CONTACT.IMPORT.RESULT_TITLE")," "),n(6),I(g(10,8,"CONTACT.IMPORT.RESULT_IMPORTED")),n(3),I(e.applyResult==null?null:e.applyResult.importedCount),n(3),I(g(16,10,"CONTACT.IMPORT.RESULT_SKIPPED")),n(3),I(e.applyResult==null?null:e.applyResult.skippedCount),n(2),m(" ",g(21,12,"CONTACT.IMPORT.RESULT_NO_ERRORS")," ")}}function yo(r,l){if(r&1){let e=y();R(0),o(1,"mat-card",21)(2,"mat-card-header")(3,"mat-card-title"),c(4),f(5,"translate"),a(),o(6,"mat-card-subtitle"),c(7),f(8,"translate"),a()(),o(9,"mat-card-content")(10,"div",22)(11,"div",23)(12,"span"),c(13),f(14,"translate"),a(),o(15,"strong"),c(16),a()(),o(17,"div",23)(18,"span"),c(19),f(20,"translate"),a(),o(21,"strong"),c(22),f(23,"translate"),a()(),o(24,"div",23)(25,"span"),c(26),f(27,"translate"),a(),o(28,"strong"),c(29),f(30,"number"),a()(),o(31,"div",23)(32,"span"),c(33),f(34,"translate"),a(),o(35,"strong"),c(36),a()()(),v(37,so,6,5,"div",24),a()(),o(38,"mat-card",25)(39,"mat-card-header")(40,"mat-card-title"),c(41),f(42,"translate"),a(),o(43,"mat-card-subtitle"),c(44),f(45,"translate"),a()(),o(46,"mat-card-content"),b(47,"br"),o(48,"app-contact-category-selector",26),f(49,"translate"),M("optionChange",function(t){h(e);let s=u();return _(s.modelCategory=t)}),a(),b(50,"br"),o(51,"div",27),v(52,mo,17,12,"div",28),a(),v(53,uo,3,3,"p",13),o(54,"div",29)(55,"button",30),M("click",function(){h(e);let t=u();return _(t.onResetImport())}),c(56),f(57,"translate"),a(),o(58,"button",31),M("click",function(){h(e);let t=u();return _(t.onApplyImport())}),v(59,fo,1,2,"mat-progress-spinner",32),o(60,"span"),c(61),f(62,"translate"),a()()(),v(63,go,2,1,"p",13),a()(),o(64,"mat-card",33)(65,"mat-card-header")(66,"mat-card-title"),c(67),f(68,"translate"),a()(),o(69,"mat-card-content"),v(70,Io,5,5,"div",34)(71,Mo,3,3,"ng-template",null,1,si),a()(),v(73,bo,22,14,"mat-card",35),D()}if(r&2){let e=A(72),i=u();n(4),m(" ",g(5,28,"CONTACT.IMPORT.PREVIEW_SUMMARY_TITLE")," "),n(3),m(" ",g(8,30,"CONTACT.IMPORT.PREVIEW_SUMMARY_SUBTITLE")," "),n(6),I(g(14,32,"CONTACT.IMPORT.SESSION_LABEL")),n(3),I(i.previewResponse==null?null:i.previewResponse.sessionId),n(3),I(g(20,34,"CONTACT.IMPORT.FILE_TYPE_LABEL")),n(3),I(g(23,36,i.fileTypeTranslationMap[(i.previewResponse==null?null:i.previewResponse.fileType)||0])),n(4),I(g(27,38,"CONTACT.IMPORT.ROW_COUNT")),n(3),I(g(30,40,i.previewResponse==null?null:i.previewResponse.rowCount)),n(4),I(g(34,42,"CONTACT.IMPORT.HEADERS_FOUND")),n(3),I(i.sourceHeaders.length),n(),d("ngIf",i.sourceHeaders.length),n(4),m(" ",g(42,44,"CONTACT.IMPORT.MAPPING_TITLE")," "),n(3),m(" ",g(45,46,"CONTACT.IMPORT.MAPPING_SUBTITLE")," "),n(4),d("optionSelectFirstItem",!0)("optionRequired",!0)("optionLabel",g(49,48,"TITLE.Category")),n(4),d("ngForOf",i.destinationHeaders),n(),d("ngIf",i.missingRequiredHeaders.length),n(2),d("disabled",i.isPreviewLoading||!i.selectedFile),n(),m(" ",g(57,50,"CONTACT.IMPORT.RESET_BUTTON")," "),n(2),d("disabled",i.isApplyDisabled),n(),d("ngIf",i.isApplyLoading),n(2),I(g(62,52,"CONTACT.IMPORT.APPLY_BUTTON")),n(2),d("ngIf",i.lastApplyError),n(4),m(" ",g(68,54,"CONTACT.IMPORT.SAMPLE_ROWS_TITLE")," "),n(3),d("ngIf",i.sampleRows==null?null:i.sampleRows.length)("ngIfElse",e),n(3),d("ngIf",i.applyResult)}}var et=class et extends Nt{constructor(e,i,t,s,C,p,O,G){super(e,new ae,G,s,p);this.contentService=e;this.cmsToastrService=i;this.cmsConfirmationDialogService=t;this.tokenHelper=s;this.cdr=C;this.translate=p;this.pageInfo=O;this.publicHelper=G;this.constructorInfoAreaId=this.constructor.name;this.fileAccept=".csv,.xls,.xlsx,.vcf";this.allowedExtensions=[".csv",".xls",".xlsx",".vcf"];this.previewProcessKey=`${this.constructor.name}_preview`;this.applyProcessKey=`${this.constructor.name}_apply`;this.sourceHeaders=[];this.destinationHeaders=[];this.sampleRows=[];this.mappingSelections={};this.sourceToDestinationMapping={};this.isPreviewLoading=!1;this.isApplyLoading=!1;this.lastPreviewError="";this.lastApplyError="";this.fileTypeTranslationMap={[Ge.Unknown]:"CONTACT.IMPORT.FILE_TYPE.UNKNOWN",[Ge.GoogleCsv]:"CONTACT.IMPORT.FILE_TYPE.GOOGLE",[Ge.OutlookCsv]:"CONTACT.IMPORT.FILE_TYPE.OUTLOOK",[Ge.VCard]:"CONTACT.IMPORT.FILE_TYPE.VCARD",[Ge.Excel]:"CONTACT.IMPORT.FILE_TYPE.EXCEL"};this.modelCategory=new W;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.translate.get(["CONTACT.IMPORT.PAGE_TITLE","CONTACT.IMPORT.PAGE_DESCRIPTION"]).subscribe(e=>{this.pageInfo.updateTitle(e["CONTACT.IMPORT.PAGE_TITLE"]),this.pageInfo.updateDescription(e["CONTACT.IMPORT.PAGE_DESCRIPTION"])})}ngOnDestroy(){this.publicHelper.processService.processStop(this.previewProcessKey),this.publicHelper.processService.processStop(this.applyProcessKey)}get missingRequiredHeaders(){return this.destinationHeaders?.length?this.destinationHeaders.filter(e=>e.required&&!this.mappingSelections[e.key]):[]}get isApplyDisabled(){return!this.previewResponse||!this.selectedFile||this.isApplyLoading||this.missingRequiredHeaders.length>0}onFileSelected(e){let t=e.target?.files?.[0];if(t){if(!this.isExtensionAllowed(t)){this.translate.get("CONTACT.IMPORT.ERROR_UNSUPPORTED_FILE").subscribe(s=>{this.cmsToastrService.typeErrorMessage(s),this.lastPreviewError=s}),this.clearFileSelection();return}this.selectedFile=t,this.lastPreviewError="",this.lastApplyError="",this.applyResult=void 0,this.requestPreview(t)}}onRemoveFile(){this.clearFileSelection()}onResetImport(){!this.selectedFile||this.isPreviewLoading||(this.applyResult=void 0,this.lastApplyError="",this.requestPreview(this.selectedFile))}onMappingChange(){this.lastApplyError="",this.updateSourceToDestinationMapping(),this.cdr.detectChanges()}onSourceHeaderMappingChange(e,i){let t=this.sourceToDestinationMapping[e];t&&t!==i&&(this.mappingSelections[t]="");let s=Object.keys(this.sourceToDestinationMapping).find(C=>this.sourceToDestinationMapping[C]===i);s&&s!==e&&delete this.sourceToDestinationMapping[s],i&&i.trim()!==""?(this.sourceToDestinationMapping[e]=i,this.mappingSelections[i]=e):(delete this.sourceToDestinationMapping[e],t&&(this.mappingSelections[t]="")),this.onMappingChange()}updateSourceToDestinationMapping(){this.sourceToDestinationMapping={},Object.entries(this.mappingSelections).forEach(([e,i])=>{i&&i.trim()!==""&&(this.sourceToDestinationMapping[i]=e)})}isDestinationUsed(e,i){return!e||e.trim()===""?!1:Object.entries(this.sourceToDestinationMapping).some(([t,s])=>t!==i&&s===e)}getDestinationForSource(e){return this.sourceToDestinationMapping[e]||""}get mappedColumns(){return Object.entries(this.sourceToDestinationMapping).map(([e,i])=>{let t=this.destinationHeaders.find(s=>s.key===i);return t?{sourceHeader:e,destination:t}:null}).filter(e=>e!==null)}onApplyImport(){return oe(this,null,function*(){if(this.isApplyDisabled)return;if(!this.modelCategory?.id){this.translate.get("MESSAGE.Category_is_not_clear").subscribe(t=>{this.cmsToastrService.typeErrorMessage(t)});return}if(!(yield this.askForConfirmation()))return;this.lastApplyError="",this.applyResult=void 0,this.isApplyLoading=!0;let i=this.buildApplyModel();i.linkCategoryId=this.modelCategory.id,this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(this.applyProcessKey,t,this.constructorInfoAreaId)}),Array.isArray(i.mappings)&&(i.mappings=i.mappings.filter(t=>!!t.sourceHeader&&t.sourceHeader.trim()!=="")),this.contentService.ServiceImportApply(i).subscribe({next:t=>{this.isApplyLoading=!1,this.publicHelper.processService.processStop(this.applyProcessKey),t.isSuccess?(this.applyResult=t.item,this.translate.get("CONTACT.IMPORT.APPLY_SUCCESS").subscribe(s=>{this.cmsToastrService.typeSuccessMessage(s)})):(this.lastApplyError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.cdr.detectChanges()},error:t=>{this.isApplyLoading=!1,this.publicHelper.processService.processStop(this.applyProcessKey,!1),this.lastApplyError=t,this.cmsToastrService.typeError(t)}})})}formatFileSize(e){if(!e)return"";let i=e.size;if(i<1024)return`${i} B`;let t=i/1024;if(t<1024)return`${t.toFixed(1)} KB`;let s=t/1024;return s<1024?`${s.toFixed(1)} MB`:`${(s/1024).toFixed(1)} GB`}trackByHeader(e,i){return i}trackByMappedColumn(e,i){return i.sourceHeader}trackByDestination(e,i){return i.key}requestPreview(e){this.isPreviewLoading=!0,this.previewResponse=void 0,this.sourceHeaders=[],this.destinationHeaders=[],this.sampleRows=[],this.mappingSelections={},this.applyResult=void 0,this.lastPreviewError="",this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(this.previewProcessKey,i,this.constructorInfoAreaId)}),this.contentService.ServiceImportPreview(e).subscribe({next:i=>{this.isPreviewLoading=!1,this.publicHelper.processService.processStop(this.previewProcessKey),i.isSuccess?(this.previewResponse=i.item,this.sourceHeaders=i.item?.sourceHeaders??[],this.destinationHeaders=i.item?.destinationHeaders??[],this.sampleRows=i.item?.sampleRows??[],this.initializeMappings(),this.translate.get("CONTACT.IMPORT.PREVIEW_READY").subscribe(t=>{this.cmsToastrService.typeSuccessMessage(t)})):(this.lastPreviewError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.cdr.detectChanges()},error:i=>{this.isPreviewLoading=!1,this.publicHelper.processService.processStop(this.previewProcessKey,!1),this.lastPreviewError=i,this.cmsToastrService.typeError(i)}})}initializeMappings(){this.mappingSelections={},this.sourceToDestinationMapping={},this.destinationHeaders?.length&&this.destinationHeaders.forEach(e=>{let i=this.findAutoMatch(e);i?(this.mappingSelections[e.key]=i,this.sourceToDestinationMapping[i]=e.key):this.mappingSelections[e.key]=""})}findAutoMatch(e){if(!e||!this.sourceHeaders?.length)return;let i=[e.title,e.key].filter(t=>!!t).map(t=>t.toLowerCase());return this.sourceHeaders.find(t=>i.includes(t.toLowerCase()))}buildApplyModel(){let e=new gi;return e.sessionId=this.previewResponse?.sessionId??"",e.mappings=this.destinationHeaders.map(i=>{let t=new Ci;return t.destinationKey=i.key,t.sourceHeader=this.mappingSelections[i.key]??"",t}),e}clearFileSelection(){this.selectedFile=void 0,this.previewResponse=void 0,this.sourceHeaders=[],this.destinationHeaders=[],this.sampleRows=[],this.mappingSelections={},this.sourceToDestinationMapping={},this.applyResult=void 0,this.lastPreviewError="",this.lastApplyError="",this.fileInput?.nativeElement&&(this.fileInput.nativeElement.value=""),this.cdr.detectChanges()}isExtensionAllowed(e){let i=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();return this.allowedExtensions.includes(i)}askForConfirmation(){return oe(this,null,function*(){let e=yield ft(this.translate.get(["CONTACT.IMPORT.CONFIRM_APPLY_TITLE","CONTACT.IMPORT.CONFIRM_APPLY_MESSAGE"]));return this.cmsConfirmationDialogService.confirm(e["CONTACT.IMPORT.CONFIRM_APPLY_TITLE"],e["CONTACT.IMPORT.CONFIRM_APPLY_MESSAGE"]+`<br><br><b>\u062F\u0631 \u062F\u0633\u062A\u0647 \u0628\u0646\u062F\u06CC  ${this.modelCategory?.title}</b>`)})}};et.\u0275fac=function(i){return new(i||et)(S(se),S(V),S(ze),S(xe),S(N),S(B),S(Dt),S(L))},et.\u0275cmp=k({type:et,selectors:[["app-contact-content-import"]],viewQuery:function(i,t){if(i&1&&J(no,5),i&2){let s;X(s=Z())&&(t.fileInput=s.first)}},standalone:!1,features:[K],decls:45,vars:43,consts:[["fileInput",""],["noSampleRows",""],[1,"contact-import"],[1,"import-card"],["mat-card-avatar","",1,"import-card__icon"],[1,"section-label"],[1,"section-hint"],[1,"upload-area"],["type","file",1,"upload-input",3,"change","accept","disabled"],[1,"upload-copy"],["class","selected-file",4,"ngIf"],[1,"supported-list"],["mode","indeterminate",4,"ngIf"],["class","error-panel",4,"ngIf"],[4,"ngIf"],[1,"selected-file"],[1,"selected-file__name"],[1,"selected-file__meta"],["mat-stroked-button","","color","warn","type","button",3,"click","disabled"],["mode","indeterminate"],[1,"error-panel"],[1,"preview-card"],[1,"preview-grid"],[1,"preview-grid__item"],["class","chip-groups",4,"ngIf"],[1,"mapping-card"],[3,"optionChange","optionSelectFirstItem","optionRequired","optionLabel"],[1,"mapping-grid"],["class","mapping-row",4,"ngFor","ngForOf"],[1,"action-bar"],["mat-stroked-button","","type","button","color","primary",3,"click","disabled"],["mat-flat-button","","type","button","color","accent",1,"apply-button",3,"click","disabled"],["mode","indeterminate",3,"diameter","strokeWidth",4,"ngIf"],[1,"sample-card"],[4,"ngIf","ngIfElse"],["class","result-card",4,"ngIf"],[1,"chip-groups"],["color","primary","selected","",4,"ngFor","ngForOf","ngForTrackBy"],["color","primary","selected",""],[1,"mapping-row"],[1,"mapping-row__header"],["class","required-badge",4,"ngIf"],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"required-badge"],[3,"value"],["mode","indeterminate",3,"diameter","strokeWidth"],[1,"sample-table"],[1,"sample-table__row","sample-table__row--head"],["class","sample-table__header-cell",4,"ngFor","ngForOf","ngForTrackBy"],["class","sample-table__row",4,"ngFor","ngForOf"],[1,"sample-table__header-cell"],[1,"header-cell-content"],[1,"header-name"],["appearance","outline",1,"header-mapping-dropdown"],[3,"selectionChange","value"],[3,"value","disabled",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value","disabled"],["class","required-indicator",4,"ngIf"],[1,"required-indicator"],[1,"sample-table__row"],["class","sample-table__cell",4,"ngFor","ngForOf","ngForTrackBy"],[1,"sample-table__cell"],[1,"muted"],[1,"result-card"],[1,"result-stats"]],template:function(i,t){if(i&1){let s=y();o(0,"div",2)(1,"mat-card",3)(2,"mat-card-header")(3,"div",4)(4,"mat-icon"),c(5,"import_contacts"),a()(),o(6,"mat-card-title"),c(7),f(8,"translate"),a(),o(9,"mat-card-subtitle"),c(10),f(11,"translate"),a()(),o(12,"mat-card-content")(13,"h3",5),c(14),f(15,"translate"),a(),o(16,"p",6),c(17),f(18,"translate"),a(),o(19,"div",7)(20,"input",8,0),M("change",function(p){return h(s),_(t.onFileSelected(p))}),a(),o(22,"div",9)(23,"mat-icon"),c(24,"cloud_upload"),a(),o(25,"p"),c(26),f(27,"translate"),a(),o(28,"small"),c(29),f(30,"translate"),a()()(),v(31,oo,10,9,"div",10),o(32,"div",11)(33,"strong"),c(34),f(35,"translate"),a(),o(36,"span"),c(37),f(38,"translate"),f(39,"translate"),f(40,"translate"),f(41,"translate"),a()(),v(42,ro,1,0,"mat-progress-bar",12)(43,ao,2,1,"p",13),a()(),v(44,yo,74,56,"ng-container",14),a()}i&2&&(n(7),I(g(8,21,"CONTACT.IMPORT.PAGE_TITLE")),n(3),m(" ",g(11,23,"CONTACT.IMPORT.PAGE_DESCRIPTION")," "),n(4),m(" ",g(15,25,"CONTACT.IMPORT.UPLOAD_TITLE")," "),n(3),m(" ",g(18,27,"CONTACT.IMPORT.UPLOAD_DESCRIPTION")," "),n(2),re("upload-area--active",!!t.selectedFile)("upload-area--loading",t.isPreviewLoading),n(),d("accept",t.fileAccept)("disabled",t.isPreviewLoading),n(6),I(g(27,29,"CONTACT.IMPORT.UPLOAD_PLACEHOLDER")),n(3),I(g(30,31,"CONTACT.IMPORT.SUPPORTED_FORMATS_HINT")),n(2),d("ngIf",t.selectedFile),n(3),m("",g(35,33,"CONTACT.IMPORT.SUPPORTED_FORMATS"),":"),n(3),ai(" ",g(38,35,"CONTACT.IMPORT.FILE_TYPE.GOOGLE")," \xB7 ",g(39,37,"CONTACT.IMPORT.FILE_TYPE.OUTLOOK")," \xB7 ",g(40,39,"CONTACT.IMPORT.FILE_TYPE.VCARD")," \xB7 ",g(41,41,"CONTACT.IMPORT.FILE_TYPE.EXCEL")," "),n(5),d("ngIf",t.isPreviewLoading),n(),d("ngIf",t.lastPreviewError),n(),d("ngIf",t.previewResponse))},dependencies:[ht,H,U,ee,Mt,Ai,Di,Bi,ki,Ni,Pi,Oi,Fi,Vi,Ti,yi,Te,ji,qi,Hi,Re,ci,F],styles:["[_nghost-%COMP%]{display:block;width:100%}.contact-import[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;padding:24px 12px 48px}@media (min-width: 992px){.contact-import[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:32px 0 64px}}.import-card__icon[_ngcontent-%COMP%]{background:#e5f2ff;color:#0057c2;display:flex;align-items:center;justify-content:center}.section-label[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#1a1a27}.section-hint[_ngcontent-%COMP%]{margin:4px 0 16px;color:#5e6278}.upload-area[_ngcontent-%COMP%]{border:1px dashed #c3c8d4;border-radius:16px;padding:32px 16px;text-align:center;background:#f8f9fb;position:relative;transition:border-color .2s ease,background .2s ease}.upload-area--active[_ngcontent-%COMP%]{border-color:#009ef7;background:#f0f9ff}.upload-area--loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.upload-input[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;opacity:0;cursor:pointer}.upload-copy[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;color:#3f4254}.upload-copy[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;color:#009ef7}.selected-file[_ngcontent-%COMP%]{margin-top:16px;padding:16px 20px;border-radius:12px;background:#f5f8fa;display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap}.selected-file__name[_ngcontent-%COMP%]{margin:0;font-weight:600}.selected-file__meta[_ngcontent-%COMP%]{font-size:.9rem;color:#5e6278}.supported-list[_ngcontent-%COMP%]{margin-top:12px;font-size:.9rem;color:#5e6278;display:flex;flex-direction:column;gap:4px}.preview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:16px}.preview-grid__item[_ngcontent-%COMP%]{border:1px solid #eff2f5;border-radius:14px;padding:16px;background:#fcfcff;display:flex;flex-direction:column;gap:4px}.preview-grid__item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;color:#5e6278}.preview-grid__item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.1rem;color:#1a1a27}.chip-groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.chip-groups[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#3f4254}.mapping-grid[_ngcontent-%COMP%]{display:grid;gap:16px}.mapping-row[_ngcontent-%COMP%]{border:1px solid #eef0f4;border-radius:18px;padding:16px;background:#fff;box-shadow:0 8px 24px #0f172a0f}.mapping-row__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;margin-bottom:12px}.mapping-row__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:600}.mapping-row__header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#7e8299}.required-badge[_ngcontent-%COMP%]{align-self:flex-start;border-radius:999px;padding:2px 10px;background:#fff0f1;color:#c62828;font-size:.75rem;font-weight:600}.error-panel[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;border-radius:12px;background:#fff4f4;color:#c62828;font-size:.9rem}.action-bar[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end;gap:12px;flex-wrap:wrap}.apply-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px}.apply-button[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{width:18px;height:18px}.sample-table[_ngcontent-%COMP%]{border:1px solid #eef0f4;border-radius:12px;overflow-x:auto;overflow-y:visible;width:100%;display:block;position:relative;-webkit-overflow-scrolling:touch;scrollbar-width:auto;scrollbar-color:#009ef7 #f5f8fa}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:12px}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f8fa;border-radius:6px;border:1px solid #eef0f4}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#009ef7;border-radius:6px;border:2px solid #f5f8fa}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0085d1}.sample-table__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(var(--columns-count, 1),250px);width:max-content}.sample-table__row--head[_ngcontent-%COMP%]{background:#f5f8fa;font-weight:600}.sample-table__row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #eef0f4;border-right:1px solid #eef0f4;width:250px;box-sizing:border-box;word-break:break-word;overflow:hidden;text-overflow:ellipsis}.sample-table__row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:0}.sample-table__header-cell[_ngcontent-%COMP%]{padding:16px!important;background:#f8f9fb;display:flex;flex-direction:column;gap:8px;width:250px;box-sizing:border-box}.header-cell-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.header-name[_ngcontent-%COMP%]{font-weight:600;color:#1a1a27;font-size:.9rem}.header-mapping-dropdown[_ngcontent-%COMP%]{width:100%;margin:0}.header-mapping-dropdown[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.header-mapping-dropdown[_ngcontent-%COMP%]     .mat-mdc-form-field{font-size:.85rem}.sample-table__cell[_ngcontent-%COMP%]{min-width:0;word-break:break-word}.required-indicator[_ngcontent-%COMP%]{color:#c62828;font-weight:600;margin-left:4px}.result-stats[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:16px}.result-stats[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1 1 160px;border:1px solid #eef0f4;border-radius:12px;padding:16px;background:#f5f8ff}.result-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;color:#5e6278}.result-stats[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:1.3rem;color:#1a1a27;margin-top:4px}.muted[_ngcontent-%COMP%]{color:#7e8299;font-size:.9rem}"]});var Vt=et;var Eo=["vform"];function To(r,l){if(r&1){let e=y();R(0),o(1,"div",8)(2,"label",9),c(3),a(),o(4,"input",10,0),x("ngModelChange",function(t){h(e);let s=u();return T(s.dataModelResultCategory.item.title,t)||(s.dataModelResultCategory.item.title=t),_(t)}),a()(),o(6,"div",8)(7,"label",11),c(8),a(),o(9,"textarea",12,1),x("ngModelChange",function(t){h(e);let s=u();return T(s.dataModelResultCategory.item.description,t)||(s.dataModelResultCategory.item.description=t),_(t)}),a()(),D()}if(r&2){let e=u();n(3),I(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),n(),d("placeholder",w(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)),E("ngModel",e.dataModelResultCategory.item.title),n(4),I(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),n(),d("placeholder",w(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle)),E("ngModel",e.dataModelResultCategory.item.description)}}function xo(r,l){if(r&1){let e=y();o(0,"div",13)(1,"button",14),M("click",function(){h(e);let t=u();return _(t.onFormMove())}),b(2,"i",15),c(3),f(4,"translate"),a(),o(5,"button",16),M("click",function(){h(e);let t=u();return _(t.onFormDelete())}),b(6,"i",17),c(7),f(8,"translate"),a(),o(9,"button",18),M("click",function(){h(e);let t=u();return _(t.onFormCancel())}),b(10,"i",15),c(11),f(12,"translate"),a()()}if(r&2){let e=u();n(),d("disabled",!e.formInfo.submitButtonEnabled),n(2),m(" ",g(4,5,"TITLE.MOVE_DATA")," "),n(2),d("disabled",!e.formInfo.submitButtonEnabled),n(2),m(" ",g(8,7,"ACTION.DELETE")," "),n(4),m(" ",g(12,9,"ACTION.CANCEL")," ")}}var tt=class tt{constructor(l,e,i,t,s,C,p){this.data=l;this.dialogRef=e;this.publicHelper=i;this.contactCategoryService=t;this.cdr=s;this.translate=C;this.cmsToastrService=p;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResultCategory=new Q;this.dataModelResultCategoryAllData=new Q;this.dataModel={};this.formInfo=new le;this.publicHelper.processService.cdr=this.cdr,l&&l.id&&l.id.length>0&&(this.requestId=l.id)}ngOnInit(){if(this.requestId.length==0){this.cmsToastrService.typeErrorDeleteRowIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(),this.DataGetAll()}DataGetOne(){if(this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.translate.get("TITLE.Loading_Information").subscribe(e=>{this.formInfo.submitResultMessage=e});let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.contactCategoryService.setAccessLoad(),this.contactCategoryService.setAccessDataType(Ve.Editor),this.contactCategoryService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResultCategory=e,e.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeErrorGetOne()),this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}DataGetAll(){this.translate.get("TITLE.Loading_Information").subscribe(i=>{this.formInfo.submitResultMessage=i});let l=new Y;l.rowPerPage=100;let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceGetAll(l).subscribe({next:i=>{this.dataModelResultCategoryAllData=i,i.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeErrorGetAll()),this.publicHelper.processService.processStop(e)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormMove(){if(this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(!this.formGroup.valid)return;this.formInfo.submitButtonEnabled=!0,this.dataModel.newCatId===this.requestId&&(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitButtonEnabled=!0),this.formInfo.submitButtonEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceMove(this.requestId,this.dataModel.newCatId).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.The_Transfer_Was_Successful").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeSuccessMove()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorMove()),this.formInfo.submitButtonEnabled=!0,this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormDelete(){if(this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.formInfo.submitButtonEnabled=!1,this.formInfo.submitButtonEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceDelete(this.requestId).subscribe({next:e=>{this.formInfo.submitButtonEnabled=!e.isSuccess,e.isSuccess?(this.translate.get("MESSAGE.Deletion_Was_Successful").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormChangeNewCatId(l){if(this.formInfo.submitResultMessage="",this.requestId.length===0||!l||l.id.length<=0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.dataModel.newCatId=l.id,this.dataModel.newCatId===this.requestId?(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitButtonEnabled=!1):(this.formInfo.submitButtonEnabled=!0,this.formInfo.submitResultMessage="")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};tt.\u0275fac=function(e){return new(e||tt)(S(me),S(pe),S(L),S(z),S(N),S(B),S(V))},tt.\u0275cmp=k({type:tt,selectors:[["app-contact-category-delete"]],viewQuery:function(e,i){if(e&1&&J(Eo,5),e&2){let t;X(t=Z())&&(i.formGroup=t.first)}},standalone:!1,decls:10,vars:7,consts:[["Title",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModelResultCategory.item.title",1,"color-highlight"],["matInput","","name","dataModelResultCategory.item.title","type","text","minlength","3","maxlength","50","required","","readonly","","id","dataModelResultCategory.item.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModelResultCategory.item.description",1,"color-highlight"],["matInput","","name","dataModelResultCategory.item.description","type","text","minlength","1","maxlength","100","readonly","","required","","rows","5","id","dataModelResultCategory.item.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click","disabled"],[1,"ft-x"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click","disabled"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"]],template:function(e,i){e&1&&(o(0,"div",2),b(1,"app-progress-spinner",3),o(2,"div",4)(3,"p",5),c(4),a(),o(5,"p"),c(6),f(7,"translate"),a(),v(8,To,11,8,"ng-container",6)(9,xo,13,11,"div",7),a()()),e&2&&(n(),d("optionsInfoAreaId",i.constructorInfoAreaId),n(3),m(" ",i.formInfo.formTitle," "),n(2),m(" ",g(7,5,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),d("ngIf",i.dataModelResultCategory==null?null:i.dataModelResultCategory.item),n(),d("ngIf",i.formInfo.submitButtonEnabled))},dependencies:[H,$,U,It,ce,de,ee,te,q,F],encapsulation:2});var Lt=tt;var Ro=["vform"];function Do(r,l){if(r&1){let e=y();o(0,"app-cms-enum-record-status-selector",22),x("modelChange",function(t){h(e);let s=u();return T(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),_(t)}),a()}if(r&2){let e=u();E("model",e.dataModel.recordStatus),d("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Oo(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function ko(r,l){r&1&&(o(0,"mat-error"),c(1," Description is "),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2&&(n(3),I(g(4,1,"MESSAGE.required")))}function Po(r,l){if(r&1&&(b(0,"img",23),f(1,"cmsthumbnail")),r&2){let e=u();d("src",w(g(1,2,e.dataModel.linkMainImageIdSrc)),fe)}}function No(r,l){if(r&1){let e=y();o(0,"div",11)(1,"label",24),M("click",function(){h(e);let t=u();return _(t.fileManagerOpenForm=!0)}),c(2),f(3,"translate"),a(),o(4,"input",25,3),f(6,"translate"),x("ngModelChange",function(t){h(e);let s=u();return T(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),_(t)}),M("click",function(){h(e);let t=u();return _(t.fileManagerOpenForm=!0)}),a(),o(7,"cms-file-manager",26),M("itemSelected",function(t){h(e);let s=u();return _(s.onActionFileSelected(t))}),x("openFormChange",function(t){h(e);let s=u();return T(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),_(t)}),a()()}if(r&2){let e=u();n(2),I(g(3,12,"TITLE.Icon_File")),n(2),d("placeholder",w(g(6,14,"TITLE.Original_File_ID"))),E("ngModel",e.dataModel.linkMainImageId),n(3),d("language",e.appLanguage)("isPopup",!0)("openDirectUploadView",!0),E("openForm",e.fileManagerOpenForm),d("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Bo(r,l){if(r&1){let e=y();o(0,"div",27)(1,"button",28),M("click",function(){h(e);let t=u();return _(t.onFormCancel())}),b(2,"i",29),c(3),f(4,"translate"),a(),o(5,"button",30),b(6,"i",31),c(7),f(8,"translate"),a()()}if(r&2){u();let e=A(9);n(3),m(" ",g(4,3,"ACTION.CANCEL")," "),n(2),d("disabled",!e.form.valid),n(2),m(" ",g(8,5,"ACTION.SAVE")," ")}}var it=class it extends Pt{constructor(e,i,t,s,C,p,O,G){super(s,new W,p,G);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.contactCategoryService=s;this.cmsToastrService=C;this.publicHelper=p;this.cdr=O;this.translate=G;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new St;this.dataModel=new W;this.formInfo=new le;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&e.id&&e.id.length>0&&(this.requestId=e.id),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}ngOnInit(){if(this.requestId.length>0)this.translate.get("TITLE.Edit_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}}DataGetOneContent(){if(this.requestId.length==0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.setAccessLoad(),this.contactCategoryService.setAccessDataType(Ve.Editor),this.contactCategoryService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionParentSelect(e){this.dataModel?.id!=e?.id&&(e&&e.id?.length>0?this.dataModel.linkParentId=e.id:this.dataModel.linkParentId=null)}};it.\u0275fac=function(i){return new(i||it)(S(me),S(pe),S(j),S(z),S(V),S(L),S(N),S(B))},it.\u0275cmp=k({type:it,selectors:[["app-contact-category-edit"]],viewQuery:function(i,t){if(i&1&&J(Ro,5),i&2){let s;X(s=Z())&&(t.formGroup=s.first)}},standalone:!1,features:[K],decls:36,vars:30,consts:[["vform","ngForm"],["Title",""],["Description",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openDirectUploadView","openForm","tree","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=y();o(0,"div",4),b(1,"app-progress-spinner",5),o(2,"div",6)(3,"p",7),c(4),a(),o(5,"p"),c(6),f(7,"translate"),a(),o(8,"form",8,0),M("ngSubmit",function(){return h(s),_(t.onFormSubmit())}),v(10,Do,1,5,"app-cms-enum-record-status-selector",9),o(11,"app-contact-category-selector",10),f(12,"translate"),M("optionChange",function(p){return h(s),_(t.onActionParentSelect(p))}),a(),o(13,"div",11)(14,"label",12),c(15),a(),o(16,"input",13,1),x("ngModelChange",function(p){return h(s),T(t.dataModel.title,p)||(t.dataModel.title=p),_(p)}),a(),o(18,"em"),c(19),a(),v(20,Oo,5,4,"mat-error",14),a(),o(21,"div",11)(22,"label",15),c(23),a(),o(24,"textarea",16,2),x("ngModelChange",function(p){return h(s),T(t.dataModel.description,p)||(t.dataModel.description=p),_(p)}),c(26,"        "),a(),o(27,"em"),c(28),a(),v(29,ko,5,3,"mat-error",14),a(),o(30,"div",17)(31,"a",18),f(32,"cmsthumbnail"),v(33,Po,2,4,"img",19),a()(),v(34,No,8,16,"div",20)(35,Bo,9,7,"div",21),a()()()}if(i&2){let s=A(17),C=A(25);n(),d("optionsInfoAreaId",t.constructorInfoAreaId),n(3),m(" ",t.formInfo.formTitle," "),n(2),m(" ",g(7,24,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),d("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),n(),d("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",g(12,26,"TITLE.Parent_Area")),n(4),I(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),E("ngModel",t.dataModel.title),n(3),m("",s.value.length," / 100"),n(),d("ngIf",s.errors==null?null:s.errors.required),n(3),I(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),E("ngModel",t.dataModel.description),n(4),m("",C.value.length," / 500"),n(),d("ngIf",C.errors==null?null:C.errors.required),n(2),d("href",w(g(32,28,t.dataModel.linkMainImageIdSrc)),fe),n(2),d("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),n(),d("ngIf",t.fieldsInfo.linkMainImageId==null?null:t.fieldsInfo.linkMainImageId.accessWatchField),n(),d("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[H,ye,$,U,Me,ce,de,ee,be,Ee,te,kt,q,Rt,Re,F,qe],encapsulation:2});var Gt=it;var Fo=["vform"];function Vo(r,l){if(r&1){let e=y();o(0,"app-cms-enum-record-status-selector",22),x("modelChange",function(t){h(e);let s=u();return T(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),_(t)}),a()}if(r&2){let e=u();E("model",e.dataModel.recordStatus),d("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Lo(r,l){if(r&1&&(o(0,"mat-error"),c(1),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2){let e=u();n(),m(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),I(g(4,2,"MESSAGE.required"))}}function Go(r,l){r&1&&(o(0,"mat-error"),c(1," Description is "),o(2,"strong"),c(3),f(4,"translate"),a()()),r&2&&(n(3),I(g(4,1,"MESSAGE.required")))}function Ho(r,l){if(r&1&&(b(0,"img",23),f(1,"cmsthumbnail")),r&2){let e=u();d("src",w(g(1,2,e.dataModel.linkMainImageIdSrc)),fe)}}function Wo(r,l){if(r&1){let e=y();o(0,"div",10)(1,"label",24),M("click",function(){h(e);let t=u();return _(t.fileManagerOpenForm=!0)}),c(2),f(3,"translate"),a(),o(4,"input",25,3),f(6,"translate"),x("ngModelChange",function(t){h(e);let s=u();return T(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),_(t)}),M("click",function(){h(e);let t=u();return _(t.fileManagerOpenForm=!0)}),a(),o(7,"cms-file-manager",26),M("itemSelected",function(t){h(e);let s=u();return _(s.onActionFileSelected(t))}),x("openFormChange",function(t){h(e);let s=u();return T(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),_(t)}),a()()}if(r&2){let e=u();n(2),I(g(3,12,"TITLE.Icon_File")),n(2),d("placeholder",w(g(6,14,"TITLE.Original_File_ID"))),E("ngModel",e.dataModel.linkMainImageId),n(3),d("language",e.appLanguage)("isPopup",!0)("openDirectUploadView",!0),E("openForm",e.fileManagerOpenForm),d("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function jo(r,l){if(r&1){let e=y();o(0,"div",27)(1,"button",28),M("click",function(){h(e);let t=u();return _(t.onFormCancel())}),b(2,"i",29),c(3),f(4,"translate"),a(),o(5,"button",30),b(6,"i",31),c(7),f(8,"translate"),a()()}if(r&2){u();let e=A(9);n(3),m(" ",g(4,3,"ACTION.CANCEL")," "),n(2),d("disabled",!e.form.valid),n(2),m(" ",g(8,5,"ACTION.SAVE")," ")}}var nt=class nt extends Ot{constructor(e,i,t,s,C,p,O,G){super(s,new W,p,G);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.contactCategoryService=s;this.cmsToastrService=C;this.publicHelper=p;this.cdr=O;this.translate=G;this.requestParentId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new Q;this.dataModel=new W;this.formInfo=new le;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&e.parentId&&e.parentId.length>0&&(this.requestParentId=e.parentId),this.requestParentId.length>0&&(this.dataModel.linkParentId=this.requestParentId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}ngOnInit(){this.translate.get("TITLE.Register_New_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionParentSelect(e){this.dataModel?.id!=e?.id&&(e&&e.id?.length>0?this.dataModel.linkParentId=e.id:this.dataModel.linkParentId=null)}};nt.\u0275fac=function(i){return new(i||nt)(S(me),S(pe),S(j),S(z),S(V),S(L),S(N),S(B))},nt.\u0275cmp=k({type:nt,selectors:[["app-contact-category-add"]],viewQuery:function(i,t){if(i&1&&J(Fo,5),i&2){let s;X(s=Z())&&(t.formGroup=s.first)}},standalone:!1,features:[K],decls:36,vars:30,consts:[["vform","ngForm"],["Title",""],["Description",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openDirectUploadView","openForm","tree","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=y();o(0,"div",4),b(1,"app-progress-spinner",5),o(2,"div",6)(3,"p",7),c(4),a(),o(5,"p"),c(6),f(7,"translate"),a(),o(8,"form",8,0),M("ngSubmit",function(){return h(s),_(t.onFormSubmit())}),v(10,Vo,1,5,"app-cms-enum-record-status-selector",9),o(11,"div",10)(12,"label",11),c(13),a(),o(14,"input",12,1),x("ngModelChange",function(p){return h(s),T(t.dataModel.title,p)||(t.dataModel.title=p),_(p)}),a(),o(16,"em"),c(17),a(),v(18,Lo,5,4,"mat-error",13),a(),o(19,"app-contact-category-selector",14),f(20,"translate"),M("optionChange",function(p){return h(s),_(t.onActionParentSelect(p))}),a(),o(21,"div",10)(22,"label",15),c(23),a(),o(24,"textarea",16,2),x("ngModelChange",function(p){return h(s),T(t.dataModel.description,p)||(t.dataModel.description=p),_(p)}),c(26,"        "),a(),o(27,"em"),c(28),a(),v(29,Go,5,3,"mat-error",13),a(),o(30,"div",17)(31,"a",18),f(32,"cmsthumbnail"),v(33,Ho,2,4,"img",19),a()(),v(34,Wo,8,16,"div",20)(35,jo,9,7,"div",21),a()()()}if(i&2){let s=A(15),C=A(25);n(),d("optionsInfoAreaId",t.constructorInfoAreaId),n(3),m(" ",t.formInfo.formTitle," "),n(2),m(" ",g(7,24,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),d("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),n(3),I(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),E("ngModel",t.dataModel.title),n(3),m("",s.value.length," / 100"),n(),d("ngIf",s.errors==null?null:s.errors.required),n(),d("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",g(20,26,"TITLE.Parent_Area")),n(4),I(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),n(),d("placeholder",w(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),E("ngModel",t.dataModel.description),n(4),m("",C.value.length," / 500"),n(),d("ngIf",C.errors==null?null:C.errors.required),n(2),d("href",w(g(32,28,t.dataModel.linkMainImageIdSrc)),fe),n(2),d("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),n(),d("ngIf",t.fieldsInfo.linkMainImageId==null?null:t.fieldsInfo.linkMainImageId.accessWatchField),n(),d("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[H,ye,$,U,Me,ce,de,ee,be,Ee,te,kt,q,Rt,Re,F,qe],encapsulation:2});var Ht=nt;function qo(r,l){if(r&1){let e=y();o(0,"button",14),M("click",function(){h(e);let t=u();return _(t.onActionAdd())}),c(1),f(2,"translate"),a()}r&2&&(n(),m(" ",g(2,1,"ACTION.ADD")," "))}function zo(r,l){if(r&1){let e=y();o(0,"button",15),M("click",function(){h(e);let t=u();return _(t.onActionEdit())}),c(1),f(2,"translate"),a()}r&2&&(n(),m(" ",g(2,1,"ACTION.EDIT")," "))}function Uo(r,l){if(r&1){let e=y();o(0,"button",16),M("click",function(){h(e);let t=u();return _(t.onActionDelete())}),c(1),f(2,"translate"),a()}r&2&&(n(),m(" ",g(2,1,"ACTION.DELETE")," "))}function Qo(r,l){if(r&1){let e=y();o(0,"button",17),M("click",function(){h(e);let t=u();return _(t.onActionButtonReload())}),o(1,"mat-icon",18),f(2,"translate"),c(3,"refresh"),a()()}if(r&2){let e=u();n(),re("rotation360",e.publicHelper.processService.process.inRunArea[e.constructorInfoAreaId]),d("title",w(g(2,4,"ACTION.RELOAD")))}}function Yo(r,l){if(r&1){let e=y();o(0,"mat-tree-node",19),b(1,"button",20),o(2,"span",21),M("click",function(){let t=h(e).$implicit,s=u();return _(s.onActionSelect(t))}),c(3),a()()}if(r&2){let e=l.$implicit,i=u();re("ntk-tree-selected",(i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0&&i.dataModelSelect.id===e.id),n(3),I(e.title)}}function Ko(r,l){if(r&1){let e=y();o(0,"mat-tree-node",22)(1,"button",23)(2,"mat-icon",24),c(3),a()(),o(4,"span",21),M("click",function(){let t=h(e).$implicit,s=u();return _(s.onActionSelect(t))}),c(5),a()()}if(r&2){let e=l.$implicit,i=u(),t=A(12);re("ntk-tree-selected",(i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0&&i.dataModelSelect.id===e.id),d("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),n(),ge("type","button")("aria-label","Toggle "+e.title),n(2),m(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),n(2),I(e.title)}}var ot=class ot{constructor(l,e,i,t,s,C,p,O,G){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.dialog=t;this.cdr=s;this.publicHelper=C;this.tokenHelper=p;this.cmsStoreService=O;this.translate=G;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new W;this.dataModelResult=new Q;this.filterModel=new Y;this.dataSource=new At;this.optionChange=new ve;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(l,e)=>!!e.children&&e.children.length>0;this.childrenAccessor=l=>l.children??[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>oe(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new W,this.DataGetAll()}onActionSelectForce(l){}onActionAdd(){let l="";this.dataModelSelect&&this.dataModelSelect.id?.length>0&&(l=this.dataModelSelect.id);let e=new pt;e.disableClose=!0,e.autoFocus=!0,e.data={parentId:l},this.dialog.open(Ht,e).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let l="";if(this.dataModelSelect&&this.dataModelSelect.id?.length>0&&(l=this.dataModelSelect.id),l.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Gt,{height:"90%",panelClass:e,enterAnimationDuration:dt.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:dt.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let l="";if(this.dataModelSelect&&this.dataModelSelect.id?.length>0&&(l=this.dataModelSelect.id),l.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Lt,{height:"90%",panelClass:e,enterAnimationDuration:dt.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:dt.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}};ot.\u0275fac=function(e){return new(e||ot)(S(V),S(j),S(z),S(We),S(N),S(L),S(xe),S(je),S(B))},ot.\u0275cmp=k({type:ot,selectors:[["app-contact-category-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:16,vars:14,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,i){e&1&&(o(0,"app-cms-html-tree",1),R(1,2),c(2),f(3,"translate"),D(),R(4,3),v(5,qo,3,3,"button",4)(6,zo,3,3,"button",5)(7,Uo,3,3,"button",6)(8,Qo,4,6,"button",7),D(),R(9,8),b(10,"app-progress-spinner",9),o(11,"mat-tree",10,0),v(13,Yo,4,3,"mat-tree-node",11)(14,Ko,6,8,"mat-tree-node",12),a(),D(),Oe(15,13),a()),e&2&&(d("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),n(2),m(" ",g(3,12,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),n(3),d("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessAddRow),n(),d("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)&&(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0),n(),d("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessDeleteRow)&&(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0),n(),d("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessWatchRow),n(2),d("optionsInfoAreaId",i.constructorInfoAreaId),n(),d("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),n(3),d("matTreeNodeDefWhen",i.hasChild))},dependencies:[H,He,Te,Et,Tt,wt,xt,yt,q,Bt,F],encapsulation:2});var Wt=ot;var Xo=()=>[5,10,20,100];function Zo(r,l){if(r&1){let e=y();o(0,"a",10),M("click",function(){h(e);let t=u();return _(t.onActionButtonBulkDelete())}),b(1,"i",42),c(2),f(3,"translate"),a()}if(r&2){let e=u();n(2),at(" ",g(3,2,"ACTION.DELETE_SELECTED")," (",e.getSelectedCount(),") ")}}function $o(r,l){if(r&1){let e=y();o(0,"div",43)(1,"a",44),M("click",function(){h(e);let t=u();return _(t.onActionButtonNewRow())}),b(2,"i",45)(3,"br"),a(),o(4,"p",46),c(5),f(6,"translate"),a()()}r&2&&(n(5),m(" ",g(6,1,"ACTION.ADD")," "))}function er(r,l){if(r&1){let e=y();o(0,"div",43)(1,"a",47),M("click",function(){h(e);let t=u();return _(t.onActionButtonImport())}),b(2,"i",16)(3,"br"),a(),o(4,"p",46),c(5),f(6,"translate"),a()()}r&2&&(n(5),m(" ",g(6,1,"ACTION.IMPORT")," "))}function tr(r,l){if(r&1){let e=y();o(0,"div",43)(1,"a",48),M("click",function(){h(e);let t=u();return _(t.onActionButtonBulkDelete())}),b(2,"i",49)(3,"br"),a(),o(4,"p",46),c(5),f(6,"translate"),a()()}if(r&2){let e=u();n(5),at(" ",g(6,2,"ACTION.DELETE_SELECTED")," (",e.getSelectedCount(),") ")}}function ir(r,l){if(r&1){let e=y();o(0,"div",43)(1,"a",50),M("click",function(){h(e);let t=u();return _(t.onActionButtonEditRow(t.tableRowSelected))}),b(2,"i",51)(3,"br"),a(),o(4,"p",46),c(5),f(6,"translate"),a()()}r&2&&(n(5),m(" ",g(6,1,"ACTION.EDIT")," "))}function nr(r,l){if(r&1){let e=y();o(0,"div",43)(1,"a",48),M("click",function(){h(e);let t=u();return _(t.onActionButtonDeleteRow(t.tableRowSelected))}),b(2,"i",52)(3,"br"),a(),o(4,"p",46),c(5),f(6,"translate"),a()()}r&2&&(n(5),m(" ",g(6,1,"ACTION.DELETE")," "))}function or(r,l){if(r&1&&(o(0,"mat-header-cell",53),c(1),a()),r&2){let e=u();n(),m(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function rr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),a()),r&2){let e=l.$implicit;n(),m(" ",e.id," ")}}function ar(r,l){if(r&1&&(o(0,"mat-header-cell",53),c(1),a()),r&2){let e=u();n(),m(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function lr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),f(2,"cmssiteinfo"),f(3,"async"),a()),r&2){let e=l.$implicit;n(),m(" ",g(3,3,g(2,1,e.linkSiteId))," ")}}function sr(r,l){if(r&1&&(o(0,"mat-header-cell",53),c(1),a()),r&2){let e=u();n(),m(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function cr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),a()),r&2){let e=l.$implicit;n(),m(" ",e.title," ")}}function dr(r,l){if(r&1&&(o(0,"mat-header-cell",53),c(1),a()),r&2){let e=u();n(),m(" ",e.fieldsInfo.firstName==null?null:e.fieldsInfo.firstName.fieldTitle," ")}}function pr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),a()),r&2){let e=l.$implicit;n(),m(" ",e.firstName," ")}}function mr(r,l){if(r&1&&(o(0,"mat-header-cell",53),c(1),a()),r&2){let e=u();n(),m(" ",e.fieldsInfo.lastName==null?null:e.fieldsInfo.lastName.fieldTitle," ")}}function ur(r,l){if(r&1&&(o(0,"mat-cell"),c(1),a()),r&2){let e=l.$implicit;n(),m(" ",e.lastName," ")}}function fr(r,l){if(r&1&&(o(0,"mat-header-cell",53),c(1),a()),r&2){let e=u();n(),m(" ",e.fieldsInfo.countNumber==null?null:e.fieldsInfo.countNumber.fieldTitle," ")}}function gr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),a()),r&2){let e=l.$implicit;n(),m(" ",e.countNumber," ")}}function Cr(r,l){if(r&1&&(o(0,"mat-header-cell",53),c(1),a()),r&2){let e=u();n(),m(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function hr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),f(2,"localeDate"),a()),r&2){let e=l.$implicit;n(),m(" ",g(2,1,e.createdDate)," ")}}function _r(r,l){if(r&1&&(o(0,"mat-header-cell",53),c(1),a()),r&2){let e=u();n(),m(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Sr(r,l){if(r&1&&(o(0,"mat-cell"),c(1),f(2,"localeDate"),a()),r&2){let e=l.$implicit;n(),m(" ",g(2,1,e.updatedDate)," ")}}function vr(r,l){r&1&&(o(0,"mat-header-cell"),c(1),f(2,"translate"),a()),r&2&&(n(),m(" ",g(2,1,"TITLE.OPTION")," "))}function Ir(r,l){if(r&1&&(o(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),c(3,"more_vert"),a()(),b(4,"mat-menu",null,2),a()),r&2){let e=A(5);n(),d("matMenuTriggerFor",e)}}function Mr(r,l){if(r&1){let e=y();o(0,"mat-header-cell")(1,"mat-checkbox",56),f(2,"translate"),M("change",function(t){h(e);let s=u();return _(s.onSelectAllChange(t))}),a()()}if(r&2){let e=u();n(),d("checked",e.isAllSelected)("indeterminate",e.selectedRowsForBulkDelete.size>0&&e.selectedRowsForBulkDelete.size<e.tableSource.data.length),ge("aria-label",g(2,3,"ACTION.SELECT"))}}function br(r,l){if(r&1){let e=y();o(0,"mat-cell")(1,"mat-checkbox",57),f(2,"translate"),M("change",function(t){let s=h(e).$implicit,C=u();return _(C.onCheckboxChange(s,t))})("click",function(t){return h(e),_(t.stopPropagation())}),a()()}if(r&2){let e=l.$implicit,i=u();n(),d("checked",i.isRowSelected(e.id)),ge("aria-label",g(2,2,"ACTION.SELECT"))}}function yr(r,l){r&1&&b(0,"mat-header-row")}function Er(r,l){if(r&1){let e=y();o(0,"mat-row",58),M("click",function(t){let s=h(e).$implicit,C=u();return _(C.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=h(e).$implicit,C=u();return _(C.onActionTableRowSelect(s,t))}),a()}if(r&2){let e=l.$implicit,i=u();re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var rt=class rt extends Nt{constructor(e,i,t,s,C,p,O,G,P,ne,De,xr){super(e,new ae,De,p,P);this.contentService=e;this.cmsToastrService=i;this.cmsConfirmationDialogService=t;this.router=s;this.activatedRoute=C;this.tokenHelper=p;this.cdr=O;this.cmsStoreService=G;this.translate=P;this.pageInfo=ne;this.publicHelper=De;this.dialog=xr;this.requestLinkCategoryId="";this.constructorInfoAreaId=this.constructor.name;this.filteModelContent=new Y;this.filterDataModelQueryBuilder=[];this.categoryModelSelected=new W;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","title","firstName","lastName","countNumber"];this.tabledisplayedColumnsMobileSource=["id","title","firstName","lastName"];this.selectedRowsForBulkDelete=new Set;this.isAllSelected=!1;this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkCategoryId=this.activatedRoute.snapshot.paramMap.get("LinkCategoryId"),this.optionsSearch.parentMethods={onSubmit:Fe=>this.onSubmitOptionsSearch(Fe)},this.filteModelContent.sortColumn="id",this.filteModelContent.sortType=st.Descending,this.requestLinkCategoryId&&this.requestLinkCategoryId.length>0){let Fe=new Ie;Fe.propertyName="ContentCategores",Fe.propertyAnyName="LinkCategoryId",Fe.value=this.requestLinkCategoryId,this.filteModelContent.filters.push(Fe)}}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>oe(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tabledisplayedColumns.indexOf("select")===-1&&this.tabledisplayedColumns.push("select"),this.tableRowsSelected=[],this.selectedRowsForBulkDelete.clear(),this.isAllSelected=!1,this.onActionTableRowSelect(new ae);let i=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(i,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let t=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(t.filters=[...this.filterDataModelQueryBuilder]);debugger;this.categoryModelSelected&&this.categoryModelSelected.id?.length>0?(this.contentService.setAccessLoad(),this.contentService.ServiceGetAllWithHierarchyCategoryId(this.categoryModelSelected.id,t).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorMessage(s.errorMessage),this.publicHelper.processService.processStop(i)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(i,!1)}})):(this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(t).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorMessage(s.errorMessage),this.publicHelper.processService.processStop(i)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(i,!1)}}))}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=st.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=st.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=st.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){let e=new pt;e.disableClose=!0,e.autoFocus=!0,e.height="90%",e.data={linkCategoryId:this.categoryModelSelected?.id},this.dialog.open(Je,e).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonImport(){this.router.navigate(["/contact/content/import"])}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}let i=new pt;i.disableClose=!0,i.autoFocus=!0,i.height="90%",i.data={id:this.tableRowSelected.id},this.dialog.open($e,i).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(C,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess?(this.translate.get("MESSAGE.All").subscribe(O=>{i.set(O,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(p.errorMessage),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),C=new Ie;C.propertyName="recordStatus",C.value=pi.Available,s.filters.push(C),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(O=>{i.set(O,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(p.errorMessage),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new Y,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onCheckboxChange(e,i){i.checked?this.selectedRowsForBulkDelete.add(e.id):this.selectedRowsForBulkDelete.delete(e.id),this.updateSelectAllState()}isRowSelected(e){return this.selectedRowsForBulkDelete.has(e)}onSelectAllChange(e){this.isAllSelected=e.checked,this.isAllSelected?this.tableSource.data.forEach(i=>{i.id&&this.selectedRowsForBulkDelete.add(i.id)}):this.selectedRowsForBulkDelete.clear()}updateSelectAllState(){if(this.tableSource.data.length===0){this.isAllSelected=!1;return}let e=this.tableSource.data.every(i=>this.selectedRowsForBulkDelete.has(i.id));this.isAllSelected=e}getSelectedCount(){return this.selectedRowsForBulkDelete.size}onActionButtonBulkDelete(){if(this.selectedRowsForBulkDelete.size===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var e="",i="";let t=this.selectedRowsForBulkDelete.size;this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{e=s["MESSAGE.Please_Confirm"],i=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+t+" \u0622\u06CC\u062A\u0645 \u0627\u0646\u062A\u062E\u0627\u0628 \u0634\u062F\u0647 ) "}),this.cmsConfirmationDialogService.confirm(e,i).then(s=>{if(s){let C=this.constructor.name+"BulkDelete";this.translate.get("MESSAGE.Receiving_information").subscribe(O=>{this.publicHelper.processService.processStart(C,O,this.constructorInfoAreaId)});let p=Array.from(this.selectedRowsForBulkDelete);this.contentService.ServiceDeleteList(p).subscribe({next:O=>{O.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.selectedRowsForBulkDelete.clear(),this.isAllSelected=!1,this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:O=>{this.cmsToastrService.typeError(O),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}};rt.\u0275fac=function(i){return new(i||rt)(S(se),S(V),S(ze),S(Si),S(hi),S(xe),S(N),S(je),S(B),S(Dt),S(L),S(We))},rt.\u0275cmp=k({type:rt,selectors:[["app-contact-content-list"]],standalone:!1,features:[K],decls:72,vars:36,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],[1,"fa-solid","fa-file-import","font-18",2,"color","#ffffff"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","title"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","countNumber"],["matColumnDef","createdDate"],["matColumnDef","updatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],["matColumnDef","select"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[1,"fa-solid","fa-trash-can","font-18",2,"color","#ff0000"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"click"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash-can","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"change","checked","indeterminate"],[3,"change","click","checked"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=y();o(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(p){return h(s),T(t.viewGuideNotice,p)||(t.viewGuideNotice=p),_(p)}),M("optionOnActionButtonMemoRow",function(){return h(s),_(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return h(s),_(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return h(s),_(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return h(s),_(t.onActionButtonPrintRow())}),R(1,4),o(2,"app-contact-category-tree",5),M("optionChange",function(p){return h(s),_(t.onActionSelectorSelect(p))}),a(),D(),Oe(3,6)(4,7),R(5,8),v(6,Zo,4,4,"a",9),o(7,"a",10),M("click",function(){return h(s),_(t.viewGuideNotice=!t.viewGuideNotice)}),b(8,"i",11),a(),o(9,"a",10),M("click",function(){return h(s),_(t.onActionButtonReload())}),b(10,"i",12),a(),D(),R(11,13),o(12,"a",14),M("click",function(){return h(s),_(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),b(13,"mat-slide-toggle",15),c(14),f(15,"translate"),a(),o(16,"a",14),M("click",function(){return h(s),_(t.onActionButtonStatist())}),b(17,"mat-slide-toggle",15),c(18),f(19,"translate"),a(),o(20,"a",14),M("click",function(){return h(s),_(t.onActionButtonImport())}),b(21,"i",16),c(22),f(23,"translate"),a(),D(),R(24,17),v(25,$o,7,3,"div",18)(26,er,7,3,"div",18)(27,tr,7,4,"div",18),D(),R(28,19),v(29,ir,7,3,"div",18)(30,nr,7,3,"div",18),D(),R(31,20),o(32,"app-cms-search-list",21),x("optionsChange",function(p){return h(s),T(t.optionsSearch,p)||(t.optionsSearch=p),_(p)}),a(),o(33,"app-cms-statist-list",21),x("optionsChange",function(p){return h(s),T(t.optionsStatist,p)||(t.optionsStatist=p),_(p)}),a(),D(),R(34,22),o(35,"mat-table",23,0),M("matSortChange",function(){h(s);let p=A(36);return _(t.onTableSortData(p))}),R(37,24),v(38,or,2,1,"mat-header-cell",25)(39,rr,2,1,"mat-cell",26),D(),R(40,27),v(41,ar,2,1,"mat-header-cell",25)(42,lr,4,5,"mat-cell",26),D(),R(43,28),v(44,sr,2,1,"mat-header-cell",25)(45,cr,2,1,"mat-cell",26),D(),R(46,29),v(47,dr,2,1,"mat-header-cell",25)(48,pr,2,1,"mat-cell",26),D(),R(49,30),v(50,mr,2,1,"mat-header-cell",25)(51,ur,2,1,"mat-cell",26),D(),R(52,31),v(53,fr,2,1,"mat-header-cell",25)(54,gr,2,1,"mat-cell",26),D(),R(55,32),v(56,Cr,2,1,"mat-header-cell",25)(57,hr,3,3,"mat-cell",26),D(),R(58,33),v(59,_r,2,1,"mat-header-cell",25)(60,Sr,3,3,"mat-cell",26),D(),R(61,34),v(62,vr,3,3,"mat-header-cell",35)(63,Ir,6,1,"mat-cell",36),D(),R(64,37),v(65,Mr,3,5,"mat-header-cell",35)(66,br,3,4,"mat-cell",26),D(),v(67,yr,1,0,"mat-header-row",38)(68,Er,1,2,"mat-row",39),a(),D(),R(69,40),o(70,"mat-paginator",41,1),M("page",function(p){return h(s),_(t.onTablePageingData(p))}),a(),D(),a()}i&2&&(d("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","contact.content.list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),d("optionTreeDisplay",!t.requestLinkCategoryId||t.requestLinkCategoryId.length===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),n(6),d("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow)&&t.selectedRowsForBulkDelete.size>0),n(4),re("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),n(3),d("checked",t.optionsSearch.data.show),n(),m("",g(15,29,"ACTION.SEARCH")," "),n(3),d("checked",t.optionsStatist.data.show),n(),m("",g(19,31,"ACTION.STATIST")," "),n(4),m(" ",g(23,33,"ACTION.IMPORT")," "),n(3),d("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),n(),d("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),n(),d("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow)&&t.selectedRowsForBulkDelete.size>0),n(2),d("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),n(),d("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),n(2),E("options",t.optionsSearch),n(),E("options",t.optionsStatist),n(2),d("dataSource",t.tableSource),n(32),d("matHeaderRowDef",t.tabledisplayedColumns),n(),d("matRowDefColumns",t.tabledisplayedColumns),n(2),d("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",li(35,Xo)))},dependencies:[H,He,bt,Te,Li,Gi,Wi,zi,Ui,Qi,Yi,Ji,en,Xi,Ki,tn,Zi,$i,nn,on,cn,dn,pn,mn,Wt,_t,F,un,fn],encapsulation:2});var jt=rt;var Tr=[{path:"",component:Ft,data:{title:"ROUTE.CONTACT"},children:[{path:"config",loadChildren:()=>import("./chunk-X6IK2NHT.js").then(r=>r.ContactConfigModule),data:{title:"ROUTE.CONTACT"}},{path:"content",component:jt,data:{title:"ROUTE.CONTACT"}},{path:"content/add/:CategoryId",component:Je,data:{title:"ROUTE.CONTACT"}},{path:"content/edit/:Id",component:$e,data:{title:"ROUTE.CONTACT"}},{path:"content/import",component:Vt,data:{title:"ROUTE.CONTACT"}}]}],Ne=class Ne{};Ne.\u0275fac=function(e){return new(e||Ne)},Ne.\u0275mod=Ct({type:Ne}),Ne.\u0275inj=gt({imports:[Qt.forChild(Tr),Qt]});var qt=Ne;var Be=class Be{};Be.\u0275fac=function(e){return new(e||Be)},Be.\u0275mod=Ct({type:Be}),Be.\u0275inj=gt({providers:[mi,j,fi,ui,ze,z,se,Le],imports:[di,qt,Mi,bi.withConfig({warnOnNgModelWithFormControl:"never"}),ln,sn,an]});var _n=Be;export{_n as ContactModule};
