import{a as Kt}from"./chunk-427LK5UZ.js";import{a as Yt}from"./chunk-4ZSQJJ2P.js";import{a as Xe}from"./chunk-MSPTBTZ2.js";import{a as j}from"./chunk-KWRX3ZYJ.js";import{e as me,f as k}from"./chunk-OJFGUJQJ.js";import{$a as pe,Fc as q,Gc as de,I as ae,Ic as Je,J as se,K as le,Kc as H,Lc as qt,M as Ht,N as kt,Nc as jt,Oa as Vt,Pa as Lt,Qa as Dt,Qb as G,Ra as Ft,Rb as W,Sa as Gt,_ as Ce,ba as ce,ec as Wt,l as Ke,m as ee,p as te,q as ie,s as re,u as ne,uc as Ye,v as oe,wc as Ee}from"./chunk-A57DJJYQ.js";import{$ as ve,$b as ue,Ad as O,Ba as yt,Ca as V,Cb as Ct,Cq as z,Db as Et,Dd as X,Dq as ze,Eb as Tt,Eq as Qe,Fa as t,Fd as At,Ib as T,Iq as L,Kc as J,Ld as Z,Me as U,Nb as d,Oa as S,Ob as b,Oc as We,Pb as f,Pd as qe,Qb as Fe,Sa as P,Ta as De,Tb as M,Tf as Pt,Ub as x,Uf as je,Vb as A,Wb as E,Wc as xt,Wf as pt,X as It,Xb as ct,Xd as wt,Xf as Bt,Y as Ve,Ya as C,Yb as Mt,Yf as Rt,_ as Le,_b as B,_f as Ot,cc as s,da as g,dc as l,ea as _,hc as Ge,ja as Ie,jb as p,kb as i,lb as o,lq as Ut,mb as u,mq as Nt,nq as N,oq as $,qb as K,rb as Y,tb as w,tq as dt,uq as ye,vc as R,wb as I,x as vt,yb as h,yq as Te}from"./chunk-VFD7HG72.js";import{i as F}from"./chunk-SEDBTTTN.js";var fe=class fe{constructor(a,e,r){this.cmsStoreService=a;this.authService=e;this.router=r}canActivate(a,e){return F(this,null,function*(){return this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.siteId>0&&this.authService.getJWT()?.accessToken?.length>0?(setTimeout(()=>{this.router.navigate(["/dashboard"],{queryParams:{}})},10),!1):this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.authService.getJWT()?.accessToken?.length>0?(setTimeout(()=>{this.router.navigate([L],{queryParams:{}})},10),!1):!0})}};fe.\u0275fac=function(e){return new(e||fe)(Le(q),Le(U),Le(N))},fe.\u0275prov=It({token:fe,factory:fe.\u0275fac,providedIn:"root"});var he=fe;var Me=class Me{constructor(a,e,r,n,m,v){this.router=a;this.publicHelper=e;this.tokenHelper=r;this.translate=n;this.cmsStoreService=m;this.cdr=v;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Pt;this.today=new Date;this.showSplashModel=!0;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){window.innerWidth<ye.cmsViewConfig.mobileWindowInnerWidth&&setTimeout(()=>{this.showSplashModel=!1,this.cdr.markForCheck()},5e3)}};Me.\u0275fac=function(e){return new(e||Me)(S(N),S(k),S(Je),S(de),S(q),S(R))},Me.\u0275cmp=P({type:Me,selectors:[["app-auth"]],standalone:!1,decls:7,vars:0,consts:[[1,"page-content","header-clear-medium"],[1,"content"],[1,"row"],[1,"col-sm-0","col-md-2","col-lg-3","col-xl-4"],[1,"col-sm-12","col-md-8","col-lg-6","col-xl-4"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),u(3,"div",3),i(4,"div",4),u(5,"router-outlet"),o(),u(6,"div",3),o()()())},dependencies:[Nt],encapsulation:2});var $e=Me;var ei=()=>["/auth/signinbyusername"],ti=()=>["/auth/signup"],gt=c=>({display:c});function ii(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.FORGOT.MOBILE")," "),t(3),b(l(5,4,"MESSAGE.required")))}function ri(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),b(l(5,4,"MESSAGE.required")))}function ni(c,a){if(c&1){let e=w();i(0,"form",18,1),I("ngSubmit",function(){g(e);let n=h();return _(n.onActionSubmitOrderCodeBySms())}),i(2,"div",19),u(3,"i",20),i(4,"input",21,2),s(6,"translate"),A("ngModelChange",function(n){g(e);let m=h();return x(m.dataModelforgetPasswordBySms.mobile,n)||(m.dataModelforgetPasswordBySms.mobile=n),_(n)}),o(),i(7,"label",22),d(8),s(9,"translate"),o(),u(10,"i",23)(11,"i",24),i(12,"em"),d(13),s(14,"translate"),o(),C(15,ii,6,6,"mat-error",25),o(),i(16,"img",26),I("click",function(){g(e);let n=h();return _(n.onCaptchaOrder())}),o(),i(17,"mat-icon",27),I("click",function(){g(e);let n=h();return _(n.onCaptchaOrder())}),d(18,"refresh"),o(),i(19,"div",19),u(20,"i",28),i(21,"input",29,3),s(23,"translate"),A("ngModelChange",function(n){g(e);let m=h();return x(m.dataModelforgetPasswordBySms.captchaText,n)||(m.dataModelforgetPasswordBySms.captchaText=n),_(n)}),o(),i(24,"label",30),d(25),s(26,"translate"),o(),u(27,"i",23)(28,"i",24),i(29,"em"),d(30),s(31,"translate"),o(),C(32,ri,6,6,"mat-error",25),o(),i(33,"button",31),d(34),s(35,"translate"),o(),i(36,"button",32),I("click",function(){g(e);let n=h();return _(n.changeforgetState("email"))}),d(37),s(38,"translate"),o()()}if(c&2){let e=T(1),r=T(5),n=T(22),m=h();p("ngStyle",ue(37,gt,m.errorState===m.errorStates.NoError?"none":"block")),t(4),p("placeholder",E(l(6,21,"AUTH.FORGOT.MOBILE"))),M("ngModel",m.dataModelforgetPasswordBySms.mobile),p("disabled",!m.formInfo.submitButtonEnabled),t(4),b(l(9,23,"AUTH.FORGOT.MOBILE")),t(5),f("(",l(14,25,"TITLE.Necessary"),")"),t(2),p("ngIf",r.errors==null?null:r.errors.required),t(),p("src",E(m.captchaModel.image),V),t(5),p("placeholder",E(l(23,27,"AUTH.INPUT.CAPTCHACODE"))),M("ngModel",m.dataModelforgetPasswordBySms.captchaText),p("disabled",!m.formInfo.submitButtonEnabled),t(4),b(l(26,29,"AUTH.INPUT.CAPTCHACODE")),t(5),f("(",l(31,31,"TITLE.Necessary"),")"),t(2),p("ngIf",n.errors==null?null:n.errors.required),t(),p("disabled",e.invalid||!m.formInfo.submitButtonEnabled),t(),f(" ",l(35,33,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(2),p("disabled",!m.formInfo.submitButtonEnabled),t(),f(" ",l(38,35,"MESSAGE.Reminders.by.email")," ")}}function oi(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.FORGOT.EMAIL")," "),t(3),b(l(5,4,"MESSAGE.required")))}function ai(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),b(l(5,4,"MESSAGE.required")))}function si(c,a){if(c&1){let e=w();i(0,"form",18,4),I("ngSubmit",function(){g(e);let n=h();return _(n.onActionSubmitOrderCodeByEmail())}),i(2,"div",19),u(3,"i",20),i(4,"input",33,5),s(6,"translate"),A("ngModelChange",function(n){g(e);let m=h();return x(m.dataModelforgetPasswordByEmail.email,n)||(m.dataModelforgetPasswordByEmail.email=n),_(n)}),o(),i(7,"label",34),d(8),s(9,"translate"),o(),u(10,"i",23)(11,"i",24),i(12,"em"),d(13),s(14,"translate"),o(),C(15,oi,6,6,"mat-error",25),o(),i(16,"img",26),I("click",function(){g(e);let n=h();return _(n.onCaptchaOrder())}),o(),i(17,"mat-icon",27),I("click",function(){g(e);let n=h();return _(n.onCaptchaOrder())}),d(18,"refresh"),o(),i(19,"div",19),u(20,"i",28),i(21,"input",35,3),s(23,"translate"),A("ngModelChange",function(n){g(e);let m=h();return x(m.dataModelforgetPasswordByEmail.captchaText,n)||(m.dataModelforgetPasswordByEmail.captchaText=n),_(n)}),o(),i(24,"label",36),d(25),s(26,"translate"),o(),u(27,"i",23)(28,"i",24),i(29,"em"),d(30),s(31,"translate"),o(),C(32,ai,6,6,"mat-error",25),o(),i(33,"button",31),d(34),s(35,"translate"),o(),i(36,"button",32),I("click",function(){g(e);let n=h();return _(n.changeforgetState("sms"))}),d(37),s(38,"translate"),o()()}if(c&2){let e=T(1),r=T(5),n=T(22),m=h();p("ngStyle",ue(37,gt,m.errorState===m.errorStates.NoError?"none":"block")),t(4),p("placeholder",E(l(6,21,"AUTH.FORGOT.EMAIL"))),M("ngModel",m.dataModelforgetPasswordByEmail.email),p("disabled",!m.formInfo.submitButtonEnabled),t(4),b(l(9,23,"AUTH.FORGOT.EMAIL")),t(5),f("(",l(14,25,"TITLE.Necessary"),")"),t(2),p("ngIf",r.errors==null?null:r.errors.required),t(),p("src",E(m.captchaModel.image),V),t(5),p("placeholder",E(l(23,27,"AUTH.INPUT.CAPTCHACODE"))),M("ngModel",m.dataModelforgetPasswordByEmail.captchaText),p("disabled",!m.formInfo.submitButtonEnabled),t(4),b(l(26,29,"AUTH.INPUT.CAPTCHACODE")),t(5),f("(",l(31,31,"TITLE.Necessary"),")"),t(2),p("ngIf",n.errors==null?null:n.errors.required),t(),p("disabled",e.invalid||!m.formInfo.submitButtonEnabled),t(),f(" ",l(35,33,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(2),p("disabled",!m.formInfo.submitButtonEnabled),t(),f(" ",l(38,35,"MESSAGE.Reminder.by.SMS")," ")}}function li(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(3),b(l(5,4,"MESSAGE.required")))}function ci(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.FORGOT.PASSWORD")," "),t(3),b(l(5,4,"MESSAGE.required")))}function pi(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.INPUT.CONFIRM_PASSWORD")," "),t(3),b(l(5,4,"MESSAGE.required")))}function di(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),o()),c&2&&(t(),f(" ",l(2,1,"MESSAGE.Password_and_password_confirmation_are_different")," "))}function mi(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),b(l(5,4,"MESSAGE.required")))}function ui(c,a){if(c&1){let e=w();i(0,"form",18,6),I("ngSubmit",function(){g(e);let n=h();return _(n.onActionSubmitEntryPinCode())}),i(2,"div",19),u(3,"i",20),i(4,"input",37,7),s(6,"translate"),A("ngModelChange",function(n){g(e);let m=h();return x(m.dataModelforgetPasswordEntryPinCode.activateCode,n)||(m.dataModelforgetPasswordEntryPinCode.activateCode=n),_(n)}),o(),i(7,"label",38),d(8),s(9,"translate"),o(),u(10,"i",23)(11,"i",24),i(12,"em"),d(13),s(14,"translate"),o(),C(15,li,6,6,"mat-error",25),o(),i(16,"div",19),u(17,"i",39),i(18,"input",40,8),s(20,"translate"),A("ngModelChange",function(n){g(e);let m=h();return x(m.dataModelforgetPasswordEntryPinCode.newPassword,n)||(m.dataModelforgetPasswordEntryPinCode.newPassword=n),_(n)}),o(),i(21,"label",41),d(22),s(23,"translate"),o(),u(24,"i",23)(25,"i",24),i(26,"em"),d(27),s(28,"translate"),o(),C(29,ci,6,6,"mat-error",25),o(),i(30,"app-password-strength",42),I("passwordStrength",function(n){g(e);let m=h();return _(m.passwordValid(n))}),o(),i(31,"div",19),u(32,"i",39),i(33,"input",43,9),s(35,"translate"),A("ngModelChange",function(n){g(e);let m=h();return x(m.RePasswordModel,n)||(m.RePasswordModel=n),_(n)}),o(),i(36,"label",44),d(37),s(38,"translate"),o(),u(39,"i",23)(40,"i",24),i(41,"em"),d(42),s(43,"translate"),o(),C(44,pi,6,6,"mat-error",25)(45,di,3,3,"mat-error",25),o(),i(46,"img",26),I("click",function(){g(e);let n=h();return _(n.onCaptchaOrder())}),o(),i(47,"mat-icon",27),I("click",function(){g(e);let n=h();return _(n.onCaptchaOrder())}),d(48,"refresh"),o(),i(49,"div",19),u(50,"i",28),i(51,"input",45,3),s(53,"translate"),A("ngModelChange",function(n){g(e);let m=h();return x(m.dataModelforgetPasswordEntryPinCode.captchaText,n)||(m.dataModelforgetPasswordEntryPinCode.captchaText=n),_(n)}),o(),i(54,"label",46),d(55),s(56,"translate"),o(),u(57,"i",23)(58,"i",24),i(59,"em"),d(60),s(61,"translate"),o(),C(62,mi,6,6,"mat-error",25),o(),i(63,"button",31),d(64),s(65,"translate"),o(),i(66,"button",32),I("click",function(){g(e);let n=h();return _(n.changeforgetState("sms"))}),d(67),s(68,"translate"),o(),i(69,"button",32),I("click",function(){g(e);let n=h();return _(n.changeforgetState("email"))}),d(70),s(71,"translate"),o()()}if(c&2){let e=T(1),r=T(5),n=T(19),m=T(34),v=T(52),y=h();p("ngStyle",ue(69,gt,y.errorState===y.errorStates.NoError?"none":"block")),t(4),p("placeholder",ct(" ",l(6,39,"AUTH.FORGOT.SEND_PIN_CODE"))),M("ngModel",y.dataModelforgetPasswordEntryPinCode.activateCode),p("disabled",!y.formInfo.submitButtonEnabled),t(4),f(" ",l(9,41,"AUTH.FORGOT.PIN_CODE")),t(5),f("(",l(14,43,"TITLE.Necessary"),")"),t(2),p("ngIf",r.errors==null?null:r.errors.required),t(3),p("placeholder",ct(" ",l(20,45,"AUTH.FORGOT.PASSWORD"))),M("ngModel",y.dataModelforgetPasswordEntryPinCode.newPassword),p("disabled",!y.formInfo.submitButtonEnabled),t(4),f(" ",l(23,47,"AUTH.FORGOT.PASSWORD")),t(5),f("(",l(28,49,"TITLE.Necessary"),")"),t(2),p("ngIf",n.errors==null?null:n.errors.required),t(),p("passwordToCheck",y.dataModelforgetPasswordEntryPinCode.newPassword),t(3),p("placeholder",E(l(35,51,"AUTH.INPUT.CONFIRM_PASSWORD"))),M("ngModel",y.RePasswordModel),p("disabled",!y.formInfo.submitButtonEnabled),t(4),b(l(38,53,"AUTH.INPUT.CONFIRM_PASSWORD")),t(5),f("(",l(43,55,"TITLE.Necessary"),")"),t(2),p("ngIf",m.errors==null?null:m.errors.required),t(),p("ngIf",(y.RePasswordModel==null?null:y.RePasswordModel.length)>0&&m.value!==n.value),t(),p("src",E(y.captchaModel.image),V),t(5),p("placeholder",E(l(53,57,"AUTH.INPUT.CAPTCHACODE"))),M("ngModel",y.dataModelforgetPasswordEntryPinCode.captchaText),p("disabled",!y.formInfo.submitButtonEnabled),t(4),b(l(56,59,"AUTH.INPUT.CAPTCHACODE")),t(5),f("(",l(61,61,"TITLE.Necessary"),")"),t(2),p("ngIf",v.errors==null?null:v.errors.required),t(),p("disabled",e.invalid||!y.formInfo.submitButtonEnabled),t(),f(" ",l(65,63,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(2),p("disabled",!y.formInfo.submitButtonEnabled),t(),f(" ",l(68,65,"MESSAGE.Reminder.by.SMS")," "),t(2),p("disabled",!y.formInfo.submitButtonEnabled),t(),f(" ",l(71,67,"MESSAGE.Resend_the_recovery_code")," ")}}function fi(c,a){if(c&1&&(K(0),i(1,"div",47)(2,"div",48),d(3),o()(),Y()),c&2){let e=h().message;t(3),f(" ",e," ")}}function hi(c,a){if(c&1&&C(0,fi,4,1,"ng-container",25),c&2){let e=a.control,r=a.validation;p("ngIf",e.hasError(r)&&(e.dirty||e.touched))}}var zt=(r=>(r[r.NotSubmitted=0]="NotSubmitted",r[r.HasError=1]="HasError",r[r.NoError=2]="NoError",r))(zt||{}),Ae=class Ae{constructor(a,e,r,n,m,v,y){this.coreAuthService=a;this.cmsToastrService=e;this.translate=r;this.router=n;this.cdr=m;this.publicHelper=v;this.pageInfo=y;this.constructorInfoAreaId=this.constructor.name;this.destroyRef=ve(Ie);this.errorState=0;this.errorStates=zt;this.dataModelforgetPasswordBySms=new pt;this.dataModelforgetPasswordByEmail=new pt;this.dataModelforgetPasswordEntryPinCode=new Bt;this.captchaModel=new X;this.forgetState="sms";this.countAutoCaptchaOrder=1;this.formInfo=new Z;this.passwordIsValid=!1;this.RePasswordModel="";this.onCaptchaOrderInProcess=!1;this.publicHelper.processService.cdr=this.cdr,this.RePasswordModel=""}ngOnInit(){this.onCaptchaOrder(),this.translate.get("AUTH.FORGOT.TITLE").subscribe(a=>{this.pageInfo.updateTitle(a)})}onActionSubmitOrderCodeBySms(){this.formInfo.submitButtonEnabled=!1,this.errorState=0,this.dataModelforgetPasswordBySms.captchaKey=this.captchaModel.key,this.dataModelforgetPasswordEntryPinCode.email="",this.dataModelforgetPasswordEntryPinCode.mobile=this.dataModelforgetPasswordBySms.mobile;let a=this.constructor.name+".ServiceForgetPassword";this.translate.get("AUTH.FORGOT.REQUEST_PASSWORD_REMINDER").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceForgetPassword(this.dataModelforgetPasswordBySms).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.The_activation_code_was_texted_with_you").subscribe(r=>{this.cmsToastrService.typeSuccessMessage(r)}),this.forgetState="entrycode"):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onActionSubmitOrderCodeByEmail(){this.formInfo.submitButtonEnabled=!1,this.errorState=0,this.dataModelforgetPasswordByEmail.captchaKey=this.captchaModel.key,this.dataModelforgetPasswordEntryPinCode.mobile="",this.dataModelforgetPasswordEntryPinCode.email=this.dataModelforgetPasswordByEmail.email;let a=this.constructor.name+".ServiceForgetPassword";this.translate.get("AUTH.FORGOT.REQUEST_PASSWORD_REMINDER").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceForgetPassword(this.dataModelforgetPasswordByEmail).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.The_activation_code_was_emailed_to_you").subscribe(r=>{this.cmsToastrService.typeSuccessMessage(r)}),this.forgetState="entrycode"):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onActionSubmitEntryPinCode(){this.formInfo.submitButtonEnabled=!1,this.errorState=0,this.dataModelforgetPasswordEntryPinCode.captchaKey=this.captchaModel.key;let a=this.constructor.name+".ServiceForgetPasswordEntryPinCode";this.translate.get("MESSAGE.Check_the_code_on_the_server").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceForgetPasswordEntryPinCode(this.dataModelforgetPasswordEntryPinCode).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.Your_password_was_changed_successfully").subscribe(r=>{this.cmsToastrService.typeSuccessMessage(r)}),setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate(["/"])},1e3)):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}passwordValid(a){this.passwordIsValid=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModelforgetPasswordBySms.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{this.captchaModel=e.item,this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}changeforgetState(a){this.forgetState=a}};Ae.\u0275fac=function(e){return new(e||Ae)(S(U),S(H),S(G),S(N),S(R),S(k),S(me))},Ae.\u0275cmp=P({type:Ae,selectors:[["app-auth-forgot-password"]],standalone:!1,decls:22,vars:20,consts:[["formError",""],["vformBySms","ngForm"],["Mobile",""],["captchaText",""],["vformByEmail","ngForm"],["email",""],["vformEntryCode","ngForm"],["ActivateCode",""],["newPassword",""],["RePassword",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"font-600","color-highlight","mb-0"],["class","form fv-plugins-bootstrap fv-plugins-framework","novalidate","novalidate","id","kt_login_forgot_form",3,"ngStyle","ngSubmit",4,"ngIf"],[1,"row","pt-3","mb-0"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"],["novalidate","novalidate","id","kt_login_forgot_form",1,"form","fv-plugins-bootstrap","fv-plugins-framework",3,"ngSubmit","ngStyle"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-at"],["type","text","name","dataModelforgetPasswordBySms.mobile","id","dataModelforgetPasswordBySms.mobile","autocomplete","off","minlength","5","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordBySms.mobile",1,"color-highlight","font-11","font-500"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],[4,"ngIf"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left"],["name","dataModelforgetPasswordBySms.captchaText","id","dataModelforgetPasswordBySms.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordBySms.captchaText",1,"color-highlight"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"click","disabled"],["type","email","name","dataModelforgetPasswordByEmail.email","id","dataModelforgetPasswordByEmail.email","autocomplete","off","minlength","5","maxlength","50","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordByEmail.email",1,"color-highlight","font-11","font-500"],["name","dataModelforgetPasswordByEmail.captchaText","id","dataModelforgetPasswordByEmail.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordByEmail.captchaText",1,"color-highlight"],["name","dataModelforgetPasswordEntryPinCode.activateCode","type","text","autocomplete","off","id","dataModelforgetPasswordEntryPinCode.activateCode","minlength","3","maxlength","5","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordEntryPinCode.activateCode",1,"color-highlight","font-11","font-500"],[1,"fa","fa-lock"],["name","dataModelforgetPasswordEntryPinCode.newPassword","id","dataModelforgetPasswordEntryPinCode.newPassword","type","password","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordEntryPinCode.newPassword",1,"color-highlight","font-11","font-500"],[3,"passwordStrength","passwordToCheck"],["type","password","id","RePassword","name","RePasswordModel","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",3,"ngModelChange","placeholder","ngModel","disabled"],["for","RePassword",1,"color-highlight"],["name","dataModelforgetPasswordEntryPinCode.captchaText","id","dataModelforgetPasswordEntryPinCode.captchaText","type","text","autocomplete","off","minlength","4","maxlength","10","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordEntryPinCode.captchaText",1,"color-highlight"],[1,"fv-plugins-message-container"],[1,"fv-help-block"]],template:function(e,r){e&1&&(i(0,"div",10),u(1,"app-progress-spinner",11),i(2,"p",12),d(3),s(4,"translate"),o(),i(5,"p"),d(6),s(7,"translate"),o(),C(8,ni,39,39,"form",13)(9,si,39,39,"form",13)(10,ui,72,71,"form",13)(11,hi,1,1,"ng-template",null,0,Ge),i(13,"div",14)(14,"div",15)(15,"a",16),d(16),s(17,"translate"),o()(),i(18,"div",17)(19,"a",16),d(20),s(21,"translate"),o()()()()),e&2&&(t(),p("optionsInfoAreaId",r.constructorInfoAreaId),t(2),f(" ",l(4,10,"AUTH.Account.Reset")," "),t(3),f(" ",l(7,12,"AUTH.FORGOT.DESCSMS")," "),t(2),p("ngIf",r.forgetState==="sms"),t(),p("ngIf",r.forgetState==="email"),t(),p("ngIf",r.forgetState==="entrycode"),t(5),p("routerLink",B(18,ei)),t(),b(l(17,14,"AUTH.REGISTER.RETURN_TO_LOGIN")),t(3),p("routerLink",B(19,ti)),t(),b(l(21,16,"AUTH.GENERAL.SIGNUP_BUTTON")))},dependencies:[J,We,$,oe,ee,te,ie,ae,se,le,ne,re,Ce,ce,pe,j,Kt,W],styles:["[_nghost-%COMP%]{width:100%}@media (min-width: 992px){[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%;max-width:450px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}}"]});var et=Ae;var Qt=c=>({display:c}),gi=()=>["/auth/signinbyusername"],_i=()=>["/auth/signup"];function bi(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.SIGNINBYSMS.MOBILE")," "),t(3),b(l(5,4,"MESSAGE.required")))}function vi(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),b(l(5,4,"MESSAGE.required")))}function Ii(c,a){if(c&1){let e=w();i(0,"form",11,1),I("ngSubmit",function(){g(e);let n=h();return _(n.onActionSubmitOrderCodeBySms())}),i(2,"div",12),u(3,"i",13),i(4,"input",14,2),s(6,"translate"),A("ngModelChange",function(n){g(e);let m=h();return x(m.dataModelAuthUserSignInBySms.mobile,n)||(m.dataModelAuthUserSignInBySms.mobile=n),_(n)}),o(),i(7,"label",15),d(8),s(9,"translate"),o(),u(10,"i",16)(11,"i",17),C(12,bi,6,6,"mat-error",18),o(),i(13,"img",19),I("click",function(){g(e);let n=h();return _(n.onCaptchaOrder())}),o(),i(14,"mat-icon",20),I("click",function(){g(e);let n=h();return _(n.onCaptchaOrder())}),d(15,"refresh"),o(),i(16,"div",12),u(17,"i",21),i(18,"input",22,3),s(20,"translate"),A("ngModelChange",function(n){g(e);let m=h();return x(m.dataModelAuthUserSignInBySms.captchaText,n)||(m.dataModelAuthUserSignInBySms.captchaText=n),_(n)}),o(),i(21,"label",23),d(22),s(23,"translate"),o(),u(24,"i",16)(25,"i",17),C(26,vi,6,6,"mat-error",18),o(),i(27,"button",24),d(28),s(29,"translate"),o(),u(30,"br"),o()}if(c&2){let e=T(1),r=T(5),n=T(19),m=h();p("ngStyle",ue(27,Qt,m.errorState===m.errorStates.NoError?"none":"block")),t(4),p("placeholder",E(l(6,17,"AUTH.SIGNINBYSMS.MOBILE"))),M("ngModel",m.dataModelAuthUserSignInBySms.mobile),p("disabled",!m.formInfo.submitButtonEnabled),t(4),b(l(9,19,"AUTH.SIGNINBYSMS.MOBILE")),t(4),p("ngIf",r.errors==null?null:r.errors.required),t(),p("src",E(m.captchaModel.image),V),t(5),p("placeholder",E(l(20,21,"AUTH.INPUT.CAPTCHACODE"))),M("ngModel",m.dataModelAuthUserSignInBySms.captchaText),p("disabled",!m.formInfo.submitButtonEnabled),t(4),b(l(23,23,"AUTH.INPUT.CAPTCHACODE")),t(4),p("ngIf",n.errors==null?null:n.errors.required),t(),p("disabled",e.invalid||!m.formInfo.submitButtonEnabled||!m.connectionStatus.internetConnection),t(),f(" ",l(29,25,"AUTH.SIGNINBYSMS.SEND_PIN_CODE")," ")}}function yi(c,a){if(c&1){let e=w();i(0,"img",19),I("click",function(){g(e);let n=h(2);return _(n.onCaptchaOrder())}),o()}if(c&2){let e=h(2);p("src",E(e.captchaModel.image),V)}}function Ci(c,a){if(c&1){let e=w();i(0,"mat-icon",20),I("click",function(){g(e);let n=h(2);return _(n.onCaptchaOrder())}),d(1,"refresh"),o()}}function Ei(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),b(l(5,4,"MESSAGE.required")))}function Ti(c,a){if(c&1){let e=w();i(0,"div",12),u(1,"i",21),i(2,"input",33,3),s(4,"translate"),A("ngModelChange",function(n){g(e);let m=h(2);return x(m.dataModelAuthUserSignInBySms.captchaText,n)||(m.dataModelAuthUserSignInBySms.captchaText=n),_(n)}),o(),i(5,"label",23),d(6),s(7,"translate"),o(),u(8,"i",16)(9,"i",17),C(10,Ei,6,6,"mat-error",18),o()}if(c&2){let e=T(3),r=h(2);t(2),p("placeholder",E(l(4,6,"AUTH.INPUT.CAPTCHACODE"))),M("ngModel",r.dataModelAuthUserSignInBySms.captchaText),p("disabled",!r.formInfo.submitButtonEnabled),t(4),b(l(7,8,"AUTH.INPUT.CAPTCHACODE")),t(4),p("ngIf",e.errors==null?null:e.errors.required)}}function Mi(c,a){if(c&1&&(i(0,"button",24),d(1),s(2,"translate"),o()),c&2){h();let e=T(1),r=h();p("disabled",e.invalid||!r.formInfo.submitButtonEnabled||!r.connectionStatus.internetConnection||!r.dataModelAuthUserSignInBySms.code||r.dataModelAuthUserSignInBySms.code.length<4),t(),f(" ",l(2,2,"AUTH.SIGNINBYSMS.LOGIN")," ")}}function xi(c,a){if(c&1){let e=w();i(0,"button",34),I("click",function(){g(e);let n=h(2);return _(n.onActionSubmitOrderCodeBySms())}),d(1),s(2,"translate"),o()}if(c&2){let e=h(2);p("disabled",e.buttonnResendSmsDisable||!e.connectionStatus.internetConnection),t(),Fe(" ",l(2,3,"AUTH.LOGIN.RESEND_SMS")," ",e.prorocess==null?null:e.prorocess.message," ")}}function Ai(c,a){if(c&1&&u(0,"progress",35),c&2){let e=h(2);p("max",E(e.prorocess.progressBarMaxValue))("value",e.prorocess.progressBarValue)}}function wi(c,a){if(c&1){let e=w();i(0,"form",11,4),I("ngSubmit",function(){g(e);let n=h();return _(n.onActionSubmitEntryPinCode())}),i(2,"p"),d(3),s(4,"translate"),o(),i(5,"div",25)(6,"ng-otp-input",26,5),I("onInputChange",function(n){g(e);let m=h();return _(m.onOtpChange(n))}),o()(),C(8,yi,1,2,"img",27)(9,Ci,2,0,"mat-icon",28)(10,Ti,11,10,"div",29)(11,Mi,3,4,"button",30)(12,xi,3,5,"button",31)(13,Ai,1,3,"progress",32),o()}if(c&2){let e=h();p("ngStyle",ue(11,Qt,e.errorState===e.errorStates.NoError?"none":"block")),t(3),f(" ",l(4,9,"AUTH.ENTER_RECEIVED_NUMBER")," "),t(3),p("config",e.otpConfig),t(2),p("ngIf",e.diffSeconds<0),t(),p("ngIf",e.diffSeconds<0),t(),p("ngIf",e.diffSeconds<0),t(),p("ngIf",!e.onNavigate),t(),p("ngIf",!e.onNavigate),t(),p("ngIf",(e.prorocess==null?null:e.prorocess.progressBarValue)>0&&e.buttonnResendSmsDisable)}}function Pi(c,a){if(c&1&&(K(0),i(1,"div",36)(2,"div",37),d(3),o()(),Y()),c&2){let e=h().message;t(3),f(" ",e," ")}}function Bi(c,a){if(c&1&&C(0,Pi,4,1,"ng-container",18),c&2){let e=a.control,r=a.validation;p("ngIf",e.hasError(r)&&(e.dirty||e.touched))}}function Ri(c,a){c&1&&(i(0,"div",38)(1,"div",39)(2,"a",40),d(3),s(4,"translate"),o()(),i(5,"div",41)(6,"a",40),d(7),s(8,"translate"),o()()()),c&2&&(t(2),p("routerLink",B(8,gi)),t(),b(l(4,4,"AUTH.REGISTER.RETURN_TO_LOGIN")),t(3),p("routerLink",B(9,_i)),t(),b(l(8,6,"AUTH.GENERAL.SIGNUP_BUTTON")))}var Jt=(r=>(r[r.NotSubmitted=0]="NotSubmitted",r[r.HasError=1]="HasError",r[r.NoError=2]="NoError",r))(Jt||{}),_t=class{},we=class we{constructor(a,e,r,n,m,v,y,_e,bt){this.coreAuthService=a;this.cmsToastrService=e;this.translate=r;this.router=n;this.cmsTranslationService=m;this.cmsStoreService=v;this.cdr=y;this.publicHelper=_e;this.pageInfo=bt;this.constructorInfoAreaId=this.constructor.name;this.destroyRef=ve(Ie);this.connectionStatus=new Ye;this.errorState=0;this.errorStates=Jt;this.dataModelAuthUserSignInBySms=new Ot;this.captchaModel=new X;this.forgetState="sms";this.countAutoCaptchaOrder=1;this.formInfo=new Z;this.passwordIsValid=!1;this.RePasswordModel="";this.onCaptchaOrderInProcess=!1;this.onNavigate=!1;this.unsubscribe=[];this.buttonnResendSmsDisable=!0;this.otpConfig={allowNumbersOnly:!0,length:4,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputStyles:{width:"50px",height:"50px",margin:"5px"}};this.publicHelper.processService.cdr=this.cdr,localStorage&&localStorage.setItem(Te,"signinbysms"),this.RePasswordModel="",this.unsubscribe.push(this.cmsStoreService.getState(D=>D.connectionStatusStore).subscribe(D=>F(this,null,function*(){this.connectionStatus=D}))),this.unsubscribe.push(this.cmsStoreService.getState(D=>D.tokenInfoStore).subscribe(D=>F(this,null,function*(){this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.siteId>0&&this.router.navigate(["/dashboard"],{}),this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.router.navigate([L],{})})))}ngOnInit(){this.onCaptchaOrder(),this.translate.get("AUTH.SIGNINBYSMS.TITLE").subscribe(a=>{this.pageInfo.updateTitle(a)})}onOtpChange(a){this.dataModelAuthUserSignInBySms.code=a}onActionSubmitOrderCodeBySms(){if(this.forgetState=="entrycode"){if(!this.dataModelAuthUserSignInBySms.captchaText||this.dataModelAuthUserSignInBySms.captchaText.length==0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSetCpatcha").subscribe(e=>{this.cmsToastrService.typeWarningMessage(e)});return}this.dataModelAuthUserSignInBySms.code=""}this.formInfo.submitButtonEnabled=!1,this.errorState=0,this.dataModelAuthUserSignInBySms.captchaKey=this.captchaModel.key,this.dataModelAuthUserSignInBySms.lang=this.cmsTranslationService.getSelectedLanguage;let a=this.constructor.name+".ServiceSigninUserBySMS";this.translate.get("MESSAGE.Send_login_request_with_one_time_password").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceSigninUserBySMS(this.dataModelAuthUserSignInBySms).subscribe({next:e=>{if(e.isSuccess){this.translate.get("MESSAGE.The_login_code_was_texted_with_you").subscribe(n=>{this.cmsToastrService.typeSuccessMessage(n)}),this.forgetState="entrycode",this.prorocess=new _t,this.prorocess.progressBarValue=0,this.prorocess.progressBarMaxValue=60,this.prorocess.message="",this.buttonnResendSmsDisable=!0;var r=this.prorocess.progressBarMaxValue;this.translate.get("MESSAGE.SECONDS").subscribe(n=>{this.downloadTimer=setInterval(()=>{this.prorocess.progressBarValue=this.prorocess.progressBarMaxValue-r,this.prorocess.message="("+r+" "+n+")",r-=1,r<=0&&(this.buttonnResendSmsDisable=!1,this.prorocess.message="",clearInterval(this.downloadTimer)),Promise.resolve().then(()=>this.cdr.detectChanges())},500)})}else this.cmsToastrService.typeErrorMessage(e.errorMessage);this.formInfo.submitButtonEnabled=!0,this.countAutoCaptchaOrder<10&&(!this.captchaModel||this.diffSeconds<2)&&this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}ngOnDestroy(){clearInterval(this.downloadTimer),this.diffSecondsSubscribe&&this.diffSecondsSubscribe.unsubscribe(),this.unsubscribe&&this.unsubscribe.forEach(a=>a.unsubscribe())}onActionSubmitEntryPinCode(){this.formInfo.submitButtonEnabled=!1,this.errorState=0,this.dataModelAuthUserSignInBySms.captchaKey=this.captchaModel.key,this.dataModelAuthUserSignInBySms.lang=this.cmsTranslationService.getSelectedLanguage;let a=this.constructor.name+".ServiceSigninUserBySMS";if(this.translate.get("MESSAGE.Send_login_request_with_one_time_password").subscribe(n=>{this.publicHelper.processService.processStart(a,n,this.constructorInfoAreaId)}),localStorage.getItem(z)){let n=localStorage.getItem(z).split(",");n&&n.length>0&&(this.dataModelAuthUserSignInBySms.siteId=+n[n.length-1])}let e=+localStorage.getItem(ze);e>0&&(this.dataModelAuthUserSignInBySms.resellerSiteId=e);let r=+localStorage.getItem(Qe);r>0&&(this.dataModelAuthUserSignInBySms.resellerUserId=r),this.coreAuthService.ServiceSigninUserBySMS(this.dataModelAuthUserSignInBySms).subscribe({next:n=>{n.isSuccess?(this.cmsToastrService.typeSuccessLogin(),this.formInfo.submitButtonEnabled=!1,this.coreAuthService.ServiceCurrentToken().subscribe({next:m=>{m.isSuccess&&(this.cmsStoreService.setState({type:Ee,payload:m.item}),m.item.access.siteId>0?(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate(["/dashboard"])},10)):(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate([L])},10)))}})):(this.onCaptchaOrder(),this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(a)},error:n=>{this.cmsToastrService.typeError(n),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}passwordValid(a){this.passwordIsValid=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.diffSecondsSubscribe&&this.diffSecondsSubscribe.unsubscribe(),this.dataModelAuthUserSignInBySms.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{this.captchaModel=e.item,this.onCaptchaOrderInProcess=!1,this.diffSecondsSubscribe=vt(500).subscribe(r=>{this.diffSeconds=new Date(this.captchaModel.expire).getTime()-new Date().getTime(),this.diffSeconds<0&&this.countAutoCaptchaOrder<10&&(this.diffSecondsSubscribe.unsubscribe(),this.onCaptchaOrder())}),this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}changeforgetState(a){this.forgetState=a}};we.\u0275fac=function(e){return new(e||we)(S(U),S(H),S(G),S(N),S(de),S(q),S(R),S(k),S(me))},we.\u0275cmp=P({type:we,selectors:[["app-auth-signin-bysms"]],standalone:!1,decls:13,vars:10,consts:[["formError",""],["vformBySms","ngForm"],["Mobile",""],["captchaText",""],["vformEntryCode","ngForm"],["ngOtpInput",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"font-600","color-highlight","mb-0"],["class","form fv-plugins-bootstrap fv-plugins-framework","novalidate","novalidate","id","kt_login_forgot_form",3,"ngStyle","ngSubmit",4,"ngIf"],["class","row pt-3 mb-0",4,"ngIf"],["novalidate","novalidate","id","kt_login_forgot_form",1,"form","fv-plugins-bootstrap","fv-plugins-framework",3,"ngSubmit","ngStyle"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-at"],["type","text","name","dataModelAuthUserSignInBySms.mobile","id","dataModelAuthUserSignInBySms.mobile","autocomplete","off","minlength","5","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelAuthUserSignInBySms.mobile",1,"color-highlight","font-11","font-500"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],[4,"ngIf"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left"],["name","dataModelAuthUserSignInBySms.captchaText","id","dataModelAuthUserSignInBySms.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelAuthUserSignInBySms.captchaText",1,"color-highlight"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],[2,"text-align","center"],[3,"onInputChange","config"],["class","mb-3","alt","",3,"src","click",4,"ngIf"],["matSuffix","",3,"click",4,"ngIf"],["class","input-style no-borders has-icon validate-field mb-4",4,"ngIf"],["type","submit","style","width: 100%","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled",4,"ngIf"],["type","button","style","width: 100%","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled","click",4,"ngIf"],["style","width: inherit",3,"value","max",4,"ngIf"],["name","dataModelAuthUserSignInBySms.captchaText","id","dataModelAuthUserSignInBySms.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"click","disabled"],[2,"width","inherit",3,"value","max"],[1,"fv-plugins-message-container"],[1,"fv-help-block"],[1,"row","pt-3","mb-0"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"]],template:function(e,r){e&1&&(i(0,"div",6),u(1,"app-progress-spinner",7),i(2,"p",8),d(3),s(4,"translate"),o(),i(5,"p"),d(6),s(7,"translate"),o(),C(8,Ii,31,29,"form",9)(9,wi,14,13,"form",9)(10,Bi,1,1,"ng-template",null,0,Ge)(12,Ri,9,10,"div",10),o()),e&2&&(t(),p("optionsInfoAreaId",r.constructorInfoAreaId),t(2),f(" ",l(4,6,"AUTH.LOGIN.BUTTON")," "),t(3),f(" ",l(7,8,"AUTH.SIGNINBYSMS.DESCSMS")," "),t(2),p("ngIf",r.forgetState==="sms"),t(),p("ngIf",r.forgetState==="entrycode"),t(3),p("ngIf",!r.onNavigate))},dependencies:[J,We,$,oe,ee,te,ie,ae,se,le,ne,re,Ce,ce,pe,j,Yt,W],encapsulation:2});var rt=we;var Ui=()=>["/auth/signinbysms"],Ni=()=>["/auth/forgot-password"],Hi=()=>["/auth/signup"];function ki(c,a){if(c&1){let e=w();K(0),i(1,"img",24),I("click",function(){g(e);let n=h();return _(n.onCaptchaOrder())}),o(),i(2,"mat-icon",25),I("click",function(){g(e);let n=h();return _(n.onCaptchaOrder())}),d(3,"refresh"),o(),i(4,"div",6),u(5,"i",26),i(6,"input",27),s(7,"translate"),A("ngModelChange",function(n){g(e);let m=h();return x(m.dataModel.captchaText,n)||(m.dataModel.captchaText=n),_(n)}),o(),i(8,"label",28),d(9),s(10,"translate"),o(),u(11,"i",10)(12,"i",11),o(),Y()}if(c&2){let e=h();t(),p("src",E(e.captchaModel.image),V),t(5),p("placeholder",E(l(7,7,"AUTH.INPUT.CAPTCHACODE"))),M("ngModel",e.dataModel.captchaText),p("disabled",!e.formInfo.submitButtonEnabled),t(3),b(l(10,9,"AUTH.INPUT.CAPTCHACODE"))}}function Vi(c,a){if(c&1&&(i(0,"button",29),d(1),s(2,"translate"),o()),c&2){let e=h(),r=T(3);p("disabled",r.invalid||!e.formInfo.submitButtonEnabled||!e.connectionStatus.internetConnection),t(),f(" ",l(2,2,"AUTH.LOGIN.BUTTON")," ")}}function Li(c,a){if(c&1&&(i(0,"button",30),d(1),s(2,"translate"),o()),c&2){let e=h();p("routerLink",B(5,Ui))("disabled",!e.formInfo.submitButtonEnabled||!e.connectionStatus.internetConnection),t(),f(" ",l(2,3,"AUTH.LOGIN.SMS")," ")}}function Di(c,a){c&1&&(i(0,"div",31)(1,"div",32)(2,"a",33),d(3),s(4,"translate"),o()(),i(5,"div",34)(6,"a",33),d(7),s(8,"translate"),o()()()),c&2&&(t(2),p("routerLink",B(8,Ni)),t(),b(l(4,4,"AUTH.FORGOT.TITLE")),t(3),p("routerLink",B(9,Hi)),t(),b(l(8,6,"AUTH.GENERAL.SIGNUP_BUTTON")))}function Fi(c,a){c&1&&(K(0),u(1,"div",35),i(2,"a",36),u(3,"i",37),d(4),s(5,"translate"),o(),i(6,"a",38),u(7,"i",39),d(8),s(9,"translate"),o(),i(10,"a",40),u(11,"i",41),d(12),s(13,"translate"),o(),Y()),c&2&&(t(4),b(l(5,3,"AUTH.LOGIN_WITH_FACEBOOK")),t(4),b(l(9,5,"AUTH.LOGIN_WITH_TWITTER")),t(4),b(l(13,7,"AUTH.LOGIN_WITH_APPLE")))}var Pe=class Pe{constructor(a,e,r,n,m,v,y,_e,bt,D,ir){this.cmsToastrService=a;this.cmsStoreService=e;this.route=r;this.router=n;this.coreAuthService=m;this.cmsTranslationService=v;this.translate=y;this.cdr=_e;this.publicHelper=bt;this.pageInfo=D;this.tokenHelper=ir;this.constructorInfoAreaId=this.constructor.name;this.destroyRef=ve(Ie);this.loadDemoTheme=ye.loadDemoTheme;this.connectionStatus=new Ye;this.firstRun=!0;this.hidePassword=!0;this.formInfo=new Z;this.dataModel=new je;this.captchaModel=new X;this.countAutoCaptchaOrder=1;this.loginType="email";this.onCaptchaOrderInProcess=!1;this.onNavigate=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,localStorage&&localStorage.setItem(Te,"signinbyusername"),this.firstRun=!0,this.unsubscribe.push(this.cmsStoreService.getState(be=>be.connectionStatusStore).subscribe(be=>F(this,null,function*(){this.connectionStatus=be}))),this.unsubscribe.push(this.cmsStoreService.getState(be=>be.tokenInfoStore).subscribe(be=>F(this,null,function*(){this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.siteId>0&&this.router.navigate(["/dashboard"],{}),this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.router.navigate([L],{})})))}ngOnInit(){this.onCaptchaOrder(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/",this.firstRun&&(this.dataModel.captchaText="0000"),this.translate.get("AUTH.SIGNINBYSMS.TITLE").subscribe(a=>{this.pageInfo.updateTitle(a)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(a=>a.unsubscribe())}onActionSubmit(){this.formInfo.submitButtonEnabled=!1,this.hasError=!1,this.dataModel.captchaKey=this.captchaModel.key,this.dataModel.lang=this.cmsTranslationService.getSelectedLanguage;let a=this.constructor.name+".ServiceSigninUser";if(this.translate.get("MESSAGE.login_to_user_account").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),localStorage.getItem(z)){let e=localStorage.getItem(z).split(",");e&&e.length>0&&(this.dataModel.siteId=+e[e.length-1])}this.coreAuthService.ServiceSigninUser(this.dataModel).subscribe({next:e=>{e.isSuccess?(this.cmsToastrService.typeSuccessLogin(),this.coreAuthService.ServiceCurrentToken().subscribe({next:r=>{r.isSuccess&&(this.cmsStoreService.setState({type:Ee,payload:r.item}),r.item.access.siteId>0?(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate(["/dashboard"])},10)):(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate([L])},10)))}})):(this.firstRun=!1,this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorLogin(e.errorMessage),this.onCaptchaOrder()),this.publicHelper.processService.processStop(a)},error:e=>{this.firstRun=!1,this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(e),this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onloginTypeChange(a){this.loginType=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModel.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{if(e.isSuccess){this.captchaModel=e.item,this.expireDate=e.item.expire;let r=new Date,m=new Date(e.item.expire).getTime()-r.getTime();this.countAutoCaptchaOrder<10&&setTimeout(()=>{this.firstRun||this.onCaptchaOrder()},m)}else this.cmsToastrService.typeErrorGetCpatcha(e.errorMessage);this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}};Pe.\u0275fac=function(e){return new(e||Pe)(S(H),S(q),S(Ut),S(N),S(U),S(de),S(G),S(R),S(k),S(me),S(Je))},Pe.\u0275cmp=P({type:Pe,selectors:[["app-auth-signin-byusername"]],standalone:!1,decls:43,vars:41,consts:[["vform","ngForm"],["Password",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],["novalidate","novalidate","id","kt_login_signin_form",1,"form",3,"ngSubmit"],[1,"font-600","color-highlight","mb-0"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-user"],["cmsKeyboardForce","en","name","dataModel.email","id","dataModel.email","type","text","autocomplete","off","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModel.email",1,"color-highlight"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],[1,"fa","fa-lock"],["cmsKeyboardForce","en","name","dataModel.password","id","dataModel.password","type","password","autocomplete","off","required","",1,"form-control","validate-password",2,"direction","ltr !important","text-align","center",3,"ngModelChange","type","ngModel","disabled","placeholder"],["for","dataModel.password",1,"color-highlight"],[4,"ngIf"],[1,"form-check","icon-check","text-start","float-start","opacity-50"],["type","checkbox","value","","id","isRemember","name","isRemember",1,"form-check-input",3,"ngModelChange","ngModel"],["for","isRemember",1,"form-check-label","font-13"],[1,"icon-check-1","far","fa-circle","color-gray-dark","font-14"],[1,"icon-check-2","fa","fa-check-circle","font-14","color-highlight"],["type","submit","style","width: 100%","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled",4,"ngIf"],["type","button","style","width: 100%","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"routerLink","disabled",4,"ngIf"],["class","row pt-3 mb-3",4,"ngIf"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left"],["name","dataModel.captchaText","id","dataModel.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModel.captchaText",1,"color-highlight"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"routerLink","disabled"],[1,"row","pt-3","mb-3"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"],[1,"divider"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-facebook","mt-4","rounded-s"],[1,"fab","fa-facebook-f","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-twitter","mt-2","rounded-s"],[1,"fab","fa-twitter","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-dark-dark","mt-2","rounded-s"],[1,"fab","fa-apple","text-center"]],template:function(e,r){if(e&1){let n=w();i(0,"div",2),u(1,"app-progress-spinner",3),i(2,"form",4,0),I("ngSubmit",function(){return g(n),_(r.onActionSubmit())}),i(4,"p",5),d(5),s(6,"translate"),o(),i(7,"p"),d(8),s(9,"translate"),o(),i(10,"div",6),u(11,"i",7),i(12,"input",8),s(13,"translate"),s(14,"translate"),A("ngModelChange",function(v){return g(n),x(r.dataModel.email,v)||(r.dataModel.email=v),_(v)}),o(),i(15,"label",9),d(16),s(17,"translate"),s(18,"translate"),o(),u(19,"i",10)(20,"i",11),o(),i(21,"div",6),u(22,"i",12),i(23,"input",13,1),s(25,"translate"),A("ngModelChange",function(v){return g(n),x(r.dataModel.password,v)||(r.dataModel.password=v),_(v)}),o(),i(26,"label",14),d(27),s(28,"translate"),o(),u(29,"i",10)(30,"i",11),o(),C(31,ki,13,11,"ng-container",15),i(32,"div",16)(33,"input",17),A("ngModelChange",function(v){return g(n),x(r.dataModel.isRemember,v)||(r.dataModel.isRemember=v),_(v)}),o(),i(34,"label",18),d(35),s(36,"translate"),o(),u(37,"i",19)(38,"i",20),o(),C(39,Vi,3,4,"button",21)(40,Li,3,6,"button",22)(41,Di,9,10,"div",23)(42,Fi,14,9,"ng-container",15),o()()}e&2&&(t(),p("optionsInfoAreaId",r.constructorInfoAreaId),t(4),f(" ",l(6,23,"TRANSLATOR.WELCOME")," "),t(3),f(" ",l(9,25,"TITLE.To_Login_To_your_Account_Enter_Your_Credentials_Below")," "),t(4),p("placeholder",Mt("",l(13,27,"AUTH.INPUT.MOBILE")," / ",l(14,29,"AUTH.INPUT.EMAIL"))),M("ngModel",r.dataModel.email),p("disabled",!r.formInfo.submitButtonEnabled),t(4),Fe("",l(17,31,"AUTH.INPUT.MOBILE")," / ",l(18,33,"AUTH.INPUT.EMAIL")),t(7),p("placeholder",E(l(25,35,"AUTH.INPUT.PASSWORD")))("type",r.hidePassword?"password":"text"),M("ngModel",r.dataModel.password),p("disabled",!r.formInfo.submitButtonEnabled),t(4),b(l(28,37,"AUTH.INPUT.PASSWORD")),t(4),p("ngIf",!r.firstRun),t(2),M("ngModel",r.dataModel.isRemember),t(2),b(l(36,39,"TITLE.remember_me")),t(4),p("ngIf",!r.onNavigate),t(),p("ngIf",!r.onNavigate),t(),p("ngIf",!r.onNavigate),t(),p("ngIf",r.loadDemoTheme))},dependencies:[J,$,oe,ee,Ke,te,ie,ae,se,le,ne,re,ce,pe,j,Xe,W],encapsulation:2});var nt=Pe;var Be=class Be{constructor(a,e){this.cmsToastrService=a;this.cmsAuthService=e;this.constructorInfoAreaId=this.constructor.name}ngOnInit(){this.cmsToastrService.typeOrderActionLogout(),this.cmsAuthService.logout()}};Be.\u0275fac=function(e){return new(e||Be)(S(H),S(qt))},Be.\u0275cmp=P({type:Be,selectors:[["app-auth-signout"]],standalone:!1,decls:3,vars:0,consts:[[1,"card","card-style"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"p"),d(2,"..."),o()())},encapsulation:2});var ot=Be;var Re=class Re{constructor(a,e,r,n,m){this.coreConfigurationService=a;this.cmsToastrService=e;this.cdr=r;this.publicHelper=n;this.translate=m;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new At;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){let a=this.constructor.name+"ServiceUserMembershipRule";this.translate.get("MESSAGE.get_the_rules").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreConfigurationService.ServiceUserMembershipRule().subscribe({next:e=>{e.isSuccess?this.dataModelResult=e:this.cmsToastrService.typeErrorGetOne(e.errorMessage),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeErrorGetOne(e),this.publicHelper.processService.processStop(a,!1)}})}};Re.\u0275fac=function(e){return new(e||Re)(S(qe),S(H),S(R),S(k),S(G))},Re.\u0275cmp=P({type:Re,selectors:[["app-auth-signup-rule"]],standalone:!1,decls:13,vars:12,consts:[["mat-dialog-title",""],[3,"optionsInfoAreaId"],[3,"innerHTML"],[1,"ntk-button-row",2,"text-align","left"],["type","button","mat-dialog-close","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red"],["type","button","cdkFocusInitial","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"mat-dialog-close"]],template:function(e,r){e&1&&(i(0,"h2",0),d(1),s(2,"translate"),o(),i(3,"mat-dialog-content"),u(4,"app-progress-spinner",1)(5,"div",2),o(),i(6,"mat-dialog-actions",3)(7,"button",4),d(8),s(9,"translate"),o(),i(10,"button",5),d(11),s(12,"translate"),o()()),e&2&&(t(),b(l(2,6,"TITLE.rules")),t(3),p("optionsInfoAreaId",r.constructorInfoAreaId),t(),p("innerHTML",r.dataModelResult.item,yt),t(3),f(" ",l(9,8,"ACTION.DENY")," "),t(2),p("mat-dialog-close",!0),t(),f(" ",l(12,10,"ACTION.ACCEPT")," "))},dependencies:[Lt,Dt,Gt,Ft,j,W],encapsulation:2});var at=Re;var Wi=["vform"],qi=()=>["/auth/signinbyusername"],ji=()=>["/auth/forgot-password"];function Ki(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.INPUT.FIRSTNAME")," "),t(3),b(l(5,4,"MESSAGE.required")))}function Yi(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.INPUT.LASTNAME")," "),t(3),b(l(5,4,"MESSAGE.required")))}function zi(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.INPUT.EMAIL")," "),t(3),b(l(5,4,"MESSAGE.required")))}function Qi(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.INPUT.PASSWORD")," "),t(3),b(l(5,4,"MESSAGE.required")))}function Ji(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),i(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),f(" ",l(2,2,"AUTH.INPUT.CONFIRM_PASSWORD")," "),t(3),b(l(5,4,"MESSAGE.required")))}function Xi(c,a){c&1&&(i(0,"mat-error"),d(1),s(2,"translate"),o()),c&2&&(t(),f(" ",l(2,1,"MESSAGE.Password_and_password_confirmation_are_different")," "))}function Zi(c,a){if(c&1&&(i(0,"button",40),d(1),s(2,"translate"),o()),c&2){let e=h(),r=T(3);p("disabled",!e.roulaccespt||r.invalid||!e.formInfo.submitButtonEnabled),t(),f(" ",l(2,2,"AUTH.REGISTER.CREATE_AN_ACCOUNT")," ")}}function $i(c,a){c&1&&(i(0,"div",41)(1,"div",42)(2,"a",43),d(3),s(4,"translate"),o()(),i(5,"div",44)(6,"a",43),d(7),s(8,"translate"),o()()()),c&2&&(t(2),p("routerLink",B(8,qi)),t(),b(l(4,4,"AUTH.REGISTER.RETURN_TO_LOGIN")),t(3),p("routerLink",B(9,ji)),t(),b(l(8,6,"AUTH.FORGOT.TITLE")))}function er(c,a){c&1&&(K(0),u(1,"div",39),i(2,"a",45),u(3,"i",46),d(4),s(5,"translate"),o(),i(6,"a",47),u(7,"i",48),d(8),s(9,"translate"),o(),i(10,"a",49),u(11,"i",50),d(12),s(13,"translate"),o(),Y()),c&2&&(t(4),b(l(5,3,"AUTH.LOGIN_WITH_FACEBOOK")),t(4),b(l(9,5,"AUTH.LOGIN_WITH_TWITTER")),t(4),b(l(13,7,"AUTH.LOGIN_WITH_APPLE")))}var Oe=class Oe{constructor(a,e,r,n,m,v,y,_e,bt){this.cmsToastrService=a;this.router=e;this.coreAuthService=r;this.dialog=n;this.cdr=m;this.publicHelper=v;this.translate=y;this.pageInfo=_e;this.cmsStoreService=bt;this.constructorInfoAreaId=this.constructor.name;this.unsubscribe=[];this.formInfo=new Z;this.roulaccespt="";this.captchaModel=new X;this.countAutoCaptchaOrder=1;this.passwordIsValid=!1;this.dataModel=new Rt;this.onCaptchaOrderInProcess=!1;this.RePasswordModel="";this.PasswordView=!1;this.loginAuto=!0;this.hidePassword=!0;this.loadDemoTheme=ye.loadDemoTheme;this.onNavigate=!1;this.publicHelper.processService.cdr=this.cdr,this.unsubscribe.push(this.cmsStoreService.getState(D=>D.tokenInfoStore).subscribe(D=>F(this,null,function*(){this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.siteId>0&&this.router.navigate(["/dashboard"],{}),this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.router.navigate([L],{})})))}ngOnInit(){this.onCaptchaOrder(),this.translate.get("AUTH.REGISTER.SIGNUP").subscribe(a=>{this.pageInfo.updateTitle(a)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(a=>a.unsubscribe())}onActionSubmit(){if(!this.dataModel.email||this.dataModel.email.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_your_email_address").subscribe(n=>{this.formInfo.submitResultMessage=n,this.formInfo.submitResultMessageType=O.Success,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}if(!this.dataModel.name||this.dataModel.name.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_your_name").subscribe(n=>{this.formInfo.submitResultMessage=n,this.formInfo.submitResultMessageType=O.Success,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}if(!this.dataModel.family||this.dataModel.family.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_your_last_name").subscribe(n=>{this.formInfo.submitResultMessage=n,this.formInfo.submitResultMessageType=O.Success,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}if(!this.dataModel.password||this.dataModel.password.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_the_password").subscribe(n=>{this.formInfo.submitResultMessage=n,this.formInfo.submitResultMessageType=O.Success,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}if(!this.RePasswordModel||this.RePasswordModel.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.re_enter_the_password").subscribe(n=>{this.formInfo.submitResultMessage=n,this.formInfo.submitResultMessageType=O.Success,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}if(!this.dataModel.captchaText||this.dataModel.captchaText.length===0){this.formInfo.submitResultMessageType=O.Success,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage);return}if(this.dataModel.password!==this.RePasswordModel){this.translate.get("ERRORMESSAGE.MESSAGE.password_and_re_password_are_different").subscribe(n=>{this.formInfo.submitResultMessage=n,this.dataModel.password="",this.RePasswordModel="",this.formInfo.submitResultMessageType=O.Success,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}this.formInfo.submitResultMessageType=O.Error,this.dataModel.captchaKey=this.captchaModel.key;let a=this.constructor.name+".ServiceSignupUser";if(this.translate.get("MESSAGE.Creating_new_account").subscribe(n=>{this.publicHelper.processService.processStart(a,n,this.constructorInfoAreaId)}),localStorage.getItem(z)){let n=localStorage.getItem(z).split(",");n&&n.length>0&&(this.dataModel.siteId=+n[n.length-1])}let e=+localStorage.getItem(ze);e>0&&(this.dataModel.resellerSiteId=e);let r=+localStorage.getItem(Qe);r>0&&(this.dataModel.resellerUserId=r),this.coreAuthService.ServiceSignupUser(this.dataModel).subscribe({next:n=>{if(n.isSuccess){if(this.cmsToastrService.typeSuccessRegistery(),this.formInfo.submitResultMessageType=O.Error,this.loginAuto||setTimeout(()=>this.router.navigate(["/"]),500),this.loginAuto){let m=new je;m.captchaKey=this.dataModel.captchaKey,m.captchaText=this.dataModel.captchaText,m.email=this.dataModel.email,m.password=this.dataModel.password,m.siteId=this.dataModel.siteId,m.mobile=this.dataModel.mobile;let v=this.constructor.name+"ServiceSigninUser";this.translate.get("MESSAGE.login_to_user_account").subscribe(y=>{this.publicHelper.processService.processStart(a,y,this.constructorInfoAreaId)}),this.coreAuthService.ServiceSigninUser(m).subscribe({next:y=>{y.isSuccess?(this.cmsToastrService.typeSuccessLogin(),this.cmsStoreService.setState({type:Ee,payload:n.item}),n.item.access.siteId>0?(this.onNavigate=!0,this.router.navigate(["/dashboard"])):(this.onNavigate=!0,this.router.navigate([L]))):(this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorLogin(y.errorMessage),setTimeout(()=>this.router.navigate(["/"]),500)),this.publicHelper.processService.processStop(v)},error:y=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(y),this.publicHelper.processService.processStop(v)}})}}else this.cmsToastrService.typeErrorRegistery(n.errorMessage),this.formInfo.submitButtonEnabled=!0,this.formInfo.submitResultMessageType=O.Success,this.onCaptchaOrder();this.publicHelper.processService.processStop(a)},error:n=>{this.cmsToastrService.typeError(n),this.formInfo.submitResultMessageType=O.Success,this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onRoulaccespt(){if(this.roulaccespt)return;this.dialog.open(at,{height:"90%",width:"90%"}).afterClosed().subscribe(e=>{this.roulaccespt=e})}passwordValid(a){this.passwordIsValid=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModel.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{if(e.isSuccess){this.captchaModel=e.item,this.expireDate=e.item.expire;let r=new Date,m=new Date(e.item.expire).getTime()-r.getTime();this.countAutoCaptchaOrder<10&&(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,setTimeout(()=>{this.onCaptchaOrder()},m))}else this.cmsToastrService.typeErrorGetCpatcha(e.errorMessage);this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}ActionPasswordGenerator(){let a="0123456789abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<=10;n++){let m=Math.floor(Math.random()*a.length);r+=a.substring(m,m+1)}this.dataModel.password=r,this.RePasswordModel=r,this.PasswordView=!0}};Oe.\u0275fac=function(e){return new(e||Oe)(S(H),S(N),S(U),S(Vt),S(R),S(k),S(G),S(me),S(q))},Oe.\u0275cmp=P({type:Oe,selectors:[["app-auth-signup"]],viewQuery:function(e,r){if(e&1&&Ct(Wi,5),e&2){let n;Et(n=Tt())&&(r.formGroup=n.first)}},standalone:!1,decls:107,vars:94,consts:[["vform","ngForm"],["Name",""],["family",""],["email",""],["password",""],["RePassword",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"form","form-horizontal",3,"ngSubmit"],[1,"font-600","color-highlight","mb-0"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-user"],["type","name","id","dataModel.name","name","dataModel.name","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.name",1,"color-highlight"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],[4,"ngIf"],["type","name","id","dataModel.family","name","dataModel.family","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.family",1,"color-highlight"],[1,"fa","fa-at"],["type","email","id","dataModel.email","cmsKeyboardForce","en","name","dataModel.email","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.email",1,"color-highlight"],[1,"fa","fa-lock"],["type","password","id","dataModel.password","cmsKeyboardForce","en","name","dataModel.password","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.password",1,"color-highlight"],["type","password","id","RePassword","name","RePasswordModel","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","RePassword",1,"color-highlight"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left"],["name","dataModel.captchaText","id","dataModel.captchaText","type","text","autocomplete","off","required","","minlength","5","maxlength","5",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModel.captchaText",1,"color-highlight"],[1,"form-check","icon-check","text-start","float-start","opacity-50"],["type","checkbox","id","roulaccespt","name","roulaccespt",1,"form-check-input",3,"ngModelChange","ngModel"],["for","roulaccespt",1,"form-check-label","font-13",3,"click"],[1,"icon-check-1","far","fa-circle","color-gray-dark","font-14"],[1,"icon-check-2","fa","fa-check-circle","font-14","color-highlight"],["type","submit","style","width: 100%","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled",4,"ngIf"],["class","row pt-3 mb-3",4,"ngIf"],[1,"divider"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],[1,"row","pt-3","mb-3"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-facebook","mt-4","rounded-s"],[1,"fab","fa-facebook-f","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-twitter","mt-2","rounded-s"],[1,"fab","fa-twitter","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-dark-dark","mt-2","rounded-s"],[1,"fab","fa-apple","text-center"]],template:function(e,r){if(e&1){let n=w();i(0,"div",6),u(1,"app-progress-spinner",7),i(2,"form",8,0),I("ngSubmit",function(){return g(n),_(r.onActionSubmit())}),i(4,"p",9),d(5),s(6,"translate"),o(),i(7,"p"),d(8),s(9,"translate"),o(),i(10,"div",10),u(11,"i",11),i(12,"input",12,1),s(14,"translate"),A("ngModelChange",function(v){return g(n),x(r.dataModel.name,v)||(r.dataModel.name=v),_(v)}),o(),i(15,"label",13),d(16),s(17,"translate"),o(),u(18,"i",14)(19,"i",15),i(20,"em"),d(21),s(22,"translate"),o(),C(23,Ki,6,6,"mat-error",16),o(),i(24,"div",10),u(25,"i",11),i(26,"input",17,2),s(28,"translate"),A("ngModelChange",function(v){return g(n),x(r.dataModel.family,v)||(r.dataModel.family=v),_(v)}),o(),i(29,"label",18),d(30),s(31,"translate"),o(),u(32,"i",14)(33,"i",15),i(34,"em"),d(35),s(36,"translate"),o(),C(37,Yi,6,6,"mat-error",16),o(),i(38,"div",10),u(39,"i",19),i(40,"input",20,3),s(42,"translate"),A("ngModelChange",function(v){return g(n),x(r.dataModel.email,v)||(r.dataModel.email=v),_(v)}),o(),i(43,"label",21),d(44),s(45,"translate"),o(),u(46,"i",14)(47,"i",15),i(48,"em"),d(49),s(50,"translate"),o(),C(51,zi,6,6,"mat-error",16),o(),i(52,"div",10),u(53,"i",22),i(54,"input",23,4),s(56,"translate"),A("ngModelChange",function(v){return g(n),x(r.dataModel.password,v)||(r.dataModel.password=v),_(v)}),o(),i(57,"label",24),d(58),s(59,"translate"),o(),u(60,"i",14)(61,"i",15),i(62,"em"),d(63),s(64,"translate"),o(),C(65,Qi,6,6,"mat-error",16),o(),i(66,"div",10),u(67,"i",22),i(68,"input",25,5),s(70,"translate"),A("ngModelChange",function(v){return g(n),x(r.RePasswordModel,v)||(r.RePasswordModel=v),_(v)}),o(),i(71,"label",26),d(72),s(73,"translate"),o(),u(74,"i",14)(75,"i",15),i(76,"em"),d(77),s(78,"translate"),o(),C(79,Ji,6,6,"mat-error",16)(80,Xi,3,3,"mat-error",16),o(),i(81,"img",27),I("click",function(){return g(n),_(r.onCaptchaOrder())}),o(),i(82,"mat-icon",28),I("click",function(){return g(n),_(r.onCaptchaOrder())}),d(83,"refresh"),o(),i(84,"div",10),u(85,"i",29),i(86,"input",30),s(87,"translate"),A("ngModelChange",function(v){return g(n),x(r.dataModel.captchaText,v)||(r.dataModel.captchaText=v),_(v)}),o(),i(88,"label",31),d(89),s(90,"translate"),o(),u(91,"i",14)(92,"i",15),i(93,"em"),d(94),s(95,"translate"),o()(),i(96,"div",32)(97,"input",33),A("ngModelChange",function(v){return g(n),x(r.roulaccespt,v)||(r.roulaccespt=v),_(v)}),o(),i(98,"label",34),I("click",function(){return g(n),_(r.onRoulaccespt())}),d(99),s(100,"translate"),o(),u(101,"i",35)(102,"i",36),o(),C(103,Zi,3,4,"button",37)(104,$i,9,10,"div",38),u(105,"div",39),C(106,er,14,9,"ng-container",16),o()()}if(e&2){let n=T(13),m=T(27),v=T(41),y=T(55),_e=T(69);t(),p("optionsInfoAreaId",r.constructorInfoAreaId),t(4),f(" ",l(6,52,"AUTH.Sign.Up")," "),t(3),f(" ",l(9,54,"AUTH.REGISTER.DESC")," "),t(4),p("placeholder",E(l(14,56,"AUTH.INPUT.FIRSTNAME"))),M("ngModel",r.dataModel.name),p("disabled",!r.formInfo.submitButtonEnabled),t(4),b(l(17,58,"AUTH.INPUT.FIRSTNAME")),t(5),f("(",l(22,60,"TITLE.Necessary"),")"),t(2),p("ngIf",n.errors==null?null:n.errors.required),t(3),p("placeholder",E(l(28,62,"AUTH.INPUT.LASTNAME"))),M("ngModel",r.dataModel.family),p("disabled",!r.formInfo.submitButtonEnabled),t(4),b(l(31,64,"AUTH.INPUT.LASTNAME")),t(5),f("(",l(36,66,"TITLE.Necessary"),")"),t(2),p("ngIf",m.errors==null?null:m.errors.required),t(3),p("placeholder",E(l(42,68,"AUTH.INPUT.EMAIL"))),M("ngModel",r.dataModel.email),p("disabled",!r.formInfo.submitButtonEnabled),t(4),b(l(45,70,"AUTH.INPUT.EMAIL")),t(5),f("(",l(50,72,"TITLE.Necessary"),")"),t(2),p("ngIf",v.errors==null?null:v.errors.required),t(3),p("placeholder",E(l(56,74,"AUTH.INPUT.PASSWORD"))),M("ngModel",r.dataModel.password),p("disabled",!r.formInfo.submitButtonEnabled),t(4),b(l(59,76,"AUTH.INPUT.PASSWORD")),t(5),f("(",l(64,78,"TITLE.Necessary"),")"),t(2),p("ngIf",y.errors==null?null:y.errors.required),t(3),p("placeholder",E(l(70,80,"AUTH.INPUT.CONFIRM_PASSWORD"))),M("ngModel",r.RePasswordModel),p("disabled",!r.formInfo.submitButtonEnabled),t(4),b(l(73,82,"AUTH.INPUT.CONFIRM_PASSWORD")),t(5),f("(",l(78,84,"TITLE.Necessary"),")"),t(2),p("ngIf",_e.errors==null?null:_e.errors.required),t(),p("ngIf",(r.RePasswordModel==null?null:r.RePasswordModel.length)>0&&_e.value!==y.value),t(),p("src",E(r.captchaModel.image),V),t(5),p("placeholder",E(l(87,86,"AUTH.INPUT.CAPTCHACODE"))),M("ngModel",r.dataModel.captchaText),p("disabled",!r.formInfo.submitButtonEnabled),t(3),b(l(90,88,"AUTH.INPUT.CAPTCHACODE")),t(5),f("(",l(95,90,"TITLE.Necessary"),")"),t(3),M("ngModel",r.roulaccespt),t(2),b(l(100,92,"TITLE.rules_accespt")),t(4),p("ngIf",!r.onNavigate),t(),p("ngIf",!r.onNavigate),t(2),p("ngIf",r.loadDemoTheme)}},dependencies:[J,$,oe,ee,Ke,te,ie,ae,se,le,ne,re,Ce,ce,pe,j,Xe,W],encapsulation:2});var st=Oe;function Xt(){let c=localStorage.getItem(Te);if(c){if(c==="signinbyusername")return"signinbyusername";if(c==="signinbysms")return"signinbysms"}return"signinbysms"}var tr=[{path:"",component:$e,data:{title:"ROUTE.REGISTER"},children:[{path:"signinbyusername",component:nt,canActivate:[he],data:{title:"ROUTE.REGISTER.SIGNINBYUSERNAME"}},{path:"signinbysms",component:rt,canActivate:[he],data:{title:"ROUTE.REGISTER.SIGNINBYSMS"}},{path:"signout",component:ot,data:{title:"ROUTE.REGISTER.SIGNOUT"}},{path:"signup",component:st,canActivate:[he],data:{title:"ROUTE.REGISTER.SIGNUP"}},{path:"forgot-password",component:et,canActivate:[he],data:{title:"ROUTE.REGISTER.FORGETPASSWORD"}},{path:"",redirectTo:Xt(),pathMatch:"full",data:{title:"ROUTE.REGISTER"}},{path:"**",redirectTo:Xt(),pathMatch:"full",data:{title:"ROUTE.REGISTER"}}]}],Se=class Se{};Se.\u0275fac=function(e){return new(e||Se)},Se.\u0275mod=De({type:Se}),Se.\u0275inj=Ve({imports:[dt.forChild(tr),dt]});var lt=Se;var ge=class ge{};ge.\u0275fac=function(e){return new(e||ge)},ge.\u0275mod=De({type:ge}),ge.\u0275inj=Ve({providers:[wt,qe,U,de],imports:[xt,jt,lt,Ht,kt,Wt]});var Zt=ge;export{Zt as AuthModule};
