import{a as Xt}from"./chunk-2JTWFKVB.js";import{a as Nn}from"./chunk-XP4NDQ24.js";import{a as fi}from"./chunk-JLELIEK5.js";import{a as Fo}from"./chunk-VHJ4XK7C.js";import{a as It}from"./chunk-5RL5EZDV.js";import{a as No}from"./chunk-6CL47M2V.js";import{a as bt}from"./chunk-QGXUCCQL.js";import{a as Pt}from"./chunk-ZK44JXFW.js";import{a as Ot}from"./chunk-NQ7GWIZY.js";import{a as Gt}from"./chunk-GGGJDHXV.js";import{a as Vn,b as Fn,c as ct,d as dt,e as mt,g as pt,h as ut}from"./chunk-2EX4NELS.js";import{a as Nt}from"./chunk-KDTV5CIJ.js";import{a as Yt}from"./chunk-SG43NEFY.js";import{a as vt}from"./chunk-C5NPUYFA.js";import{a as we}from"./chunk-W3P67HIE.js";import{a as Bn,b as Vo}from"./chunk-AOTJ5O3P.js";import"./chunk-QVSBUWHR.js";import"./chunk-ZYNNJIHW.js";import{a as Vt}from"./chunk-IXPEP4O3.js";import{a as ui}from"./chunk-D7CEBCJB.js";import{a as Ft}from"./chunk-XHM57VXZ.js";import{a as de}from"./chunk-5QDJNW4W.js";import{a as q,b as Bt,d as oe}from"./chunk-GGQ7GVZY.js";import{a as Bo,e as st,f as N}from"./chunk-UAJZPUTD.js";import{$ as Mn,$a as U,A as vn,Ab as $e,Ba as wn,Bb as et,Ca as En,Cb as tt,Da as yn,Db as it,Eb as nt,Fb as ot,Gb as rt,Hb as at,Ib as lt,J as Ie,K as be,Ka as le,Kb as ko,L as Me,La as he,Lc as se,Ma as ye,N as vo,O as Io,Ob as wo,Oc as ce,Pb as Eo,Q as In,Qb as yo,Qc as G,Rb as Ao,Sb as Do,Tb as Ro,Tc as Lo,W as Ee,Wb as F,Xb as O,Y as bo,Z as bn,Za as He,aa as kn,ba as Pe,c as To,db as Mo,eb as Qe,fb as Ke,hc as Ln,ib as ze,ic as xo,n as ie,nb as Je,pb as Ye,q as ne,qb as Xe,r as Ce,t as Te,u as Tn,ub as An,v as ge,vb as Dn,w as ve,wb as Rn,xb as xn,zb as Ze}from"./chunk-UQKNR4GM.js";import{$d as Ct,$e as go,Ab as m,Ba as gn,Bb as Sn,Ca as Et,Cb as _n,Cd as ro,Dd as Ue,Eb as $,F as dn,Fa as o,Fb as ee,Fd as uo,Gb as te,Gd as _t,Ha as ii,Hd as j,I as mn,Kb as R,Lc as Dt,Ld as z,Mb as Z,Md as J,Oa as g,P as pn,Pb as c,Pd as jt,Q as un,Qb as E,Qg as ho,Rb as p,Rc as je,Sa as B,Sb as co,Ta as hn,Tc as Ve,Ud as pi,Vb as y,Wa as W,Wb as A,Xb as D,Xl as Fe,Y as fn,Ya as L,Yb as x,Yd as H,Yl as So,Zb as Wt,_c as mo,ac as qe,bc as We,bm as yt,cm as ao,da as u,db as qt,dm as Ne,ea as f,em as Tt,fb as v,fc as S,fm as gt,gb as I,gc as _,hc as mi,ib as ni,im as _o,jb as oi,jm as Rt,kb as ri,kg as zt,km as Oe,lb as h,lm as Cn,lr as P,mb as r,mm as Co,nb as a,nm as xt,ob as T,om as Ge,p as sn,pm as Lt,q as cn,qm as Jt,re as Q,sb as k,tb as w,ub as Le,ud as _e,vb as M,vd as po,ve as fo,wd as ae,yb as b,yc as V}from"./chunk-CZ63DPC3.js";import{i as X}from"./chunk-SEDBTTTN.js";var qo=["*"];function Wo(n,l){if(n&1&&(r(0,"label",3),c(1),a()),n&2){let e=m();h("for",Wt("app-cms-site-selector-",e.id)),o(),E(e.optionLabel)}}function jo(n,l){if(n&1&&(T(0,"img",5),S(1,"cmsthumbnail")),n&2){let e=m();h("src",x(_(1,2,e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),Et)}}function Uo(n,l){if(n&1&&(T(0,"img",5),S(1,"cmsthumbnail")),n&2){let e=m().$implicit;h("src",x(_(1,2,e.linkMainImageIdSrc)),Et)}}function Qo(n,l){if(n&1&&(r(0,"mat-option",8),v(1,Uo,2,4,"img",5),r(2,"span"),c(3),a()()),n&2){let e=l.$implicit,i=m();h("value",e)("disabled",i.optionDisabled),o(),I(e.linkMainImageIdSrc?1:-1),o(2),E(i.displayOption(e))}}function Ko(n,l){n&1&&T(0,"i",9)}function zo(n,l){n&1&&T(0,"i",10)}function Jo(n,l){if(n&1){let e=M();r(0,"i",13),b("click",function(){u(e);let t=m();return f(t.onActionSelectClear())}),a()}}function Yo(n,l){n&1&&(r(0,"em"),c(1),S(2,"translate"),a()),n&2&&(o(),p("(",_(2,1,"TITLE.Necessary"),")"))}var Zt=class Zt{constructor(l,e,i,t,s){this.coreEnumService=l;this.cdr=e;this.publicHelper=i;this.translate=t;this.categoryService=s;this.id=++Zt.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new j;this.dataModelSelect=new Ne;this.formControl=new Tn;this.optionDisabled=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionRequired=!1;this.optionLabel="";this.optionChange=new ii;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(pn(""),dn(1500),mn(),un(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return X(this,null,function*(){let e=new J;e.rowPerPage=20,e.accessLoad=!0;let i=new z;i.propertyName="title",i.value=l,i.searchType=pi.Contains,i.clauseType=jt.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new z,i.propertyName="id",i.value=l,i.searchType=pi.Equal,i.clauseType=jt.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield sn(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe(cn(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="number"&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess&&(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item))}});return}if(typeof l==typeof Ne){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new Ne,this.loadOptions()}};Zt.nextId=0,Zt.\u0275fac=function(e){return new(e||Zt)(g(Q),g(V),g(N),g(F),g(Oe))},Zt.\u0275cmp=B({type:Zt,selectors:[["app-ticketing-departemen-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionRequired:"optionRequired",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:qo,decls:18,vars:24,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],[1,"color-highlight",3,"for"],["matPrefix",""],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=M();Sn(),r(0,"div",1),T(1,"app-progress-spinner",2),v(2,Wo,2,3,"label",3),r(3,"span",4),v(4,jo,2,4,"img",5),a(),T(5,"input",6),r(6,"mat-autocomplete",7,0),b("optionSelected",function(C){return u(t),f(i.onActionSelect(C.option.value))}),oi(8,Qo,4,4,"mat-option",8,ni),S(10,"async"),a(),v(11,Ko,1,0,"i",9),v(12,zo,1,0,"i",10),v(13,Jo,1,0,"i",11),r(14,"i",12),S(15,"translate"),b("click",function(){return u(t),f(i.onActionButtonReload())}),a(),v(16,Yo,3,3,"em"),_n(17),a()}if(e&2){let t=R(7);o(),h("optionsInfoAreaId",i.constructorInfoAreaId),o(),I((i.optionLabel==null?null:i.optionLabel.length)>0?2:-1),o(2),I(i.dataModelSelect&&(i.dataModelSelect!=null&&i.dataModelSelect.linkMainImageIdSrc)?4:-1),o(),h("placeholder",x(i.optionPlaceholder))("id",Wt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),qt("disabled",i.optionDisabled?!0:null),o(),h("displayWith",i.displayFn),o(2),ri(_(10,20,i.filteredOptions)),o(3),I(i.formControl.valid?-1:11),o(),I(i.optionRequired&&i.formControl.valid?12:-1),o(),I((i.dataModelSelect==null?null:i.dataModelSelect.id)>0?13:-1),o(),Z("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),h("title",x(_(15,22,"ACTION.RELOAD"))),o(2),I(i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0)?16:-1)}},dependencies:[ie,ne,Ie,vn,Mn,In,kn,bo,U,q,Ve,O,Yt],encapsulation:2});var Ae=Zt;var Xo=["vform"];function Zo(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",12),D("modelChange",function(t){u(e);let s=m();return A(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),a()}if(n&2){let e=m();y("model",e.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function $o(n,l){if(n&1){let e=M();r(0,"div",10)(1,"label",13),c(2),S(3,"translate"),a(),r(4,"textarea",14,1),S(6,"translate"),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),f(t)}),c(7,"          "),a(),r(8,"em"),c(9),a()()}if(n&2){let e=R(5),i=m();o(2),E(_(3,6,"TITLE.Answer_Text")),o(2),h("placeholder",x(_(6,8,"TITLE.Answer_Text"))),y("ngModel",i.dataModel.htmlBody),h("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)),o(5),p("",e.value.length," / 1000")}}function er(n,l){if(n&1){let e=M();r(0,"div",11)(1,"button",15),b("click",function(){u(e);let t=m();return f(t.onActionBackToParent())}),c(2),S(3,"translate"),a(),r(4,"button",16),c(5),S(6,"translate"),a()()}if(n&2){m();let e=R(10);o(2),p(" ",_(3,3,"ACTION.BACK")," "),o(2),h("disabled",!e.form.valid),o(),p(" ",_(6,5,"ACTION.SAVE")," ")}}var gi=class gi extends vt{constructor(e,i,t,s,C,d,K,Y,Re,xe){super(d,new yt,s,xe);this.data=e;this.dialogRef=i;this.activatedRoute=t;this.publicHelper=s;this.coreEnumService=C;this.ticketingAnswerService=d;this.cmsToastrService=K;this.router=Y;this.cdr=Re;this.translate=xe;this.requestLinkTaskId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new oe;this.fieldsInfo=new Map;this.dataModel=new yt;this.dataModelResult=new j;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new Vt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestLinkTaskId=+e.linkTaskId||0)}ngOnInit(){if(this.requestLinkTaskId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.dataModel.linkTaskId=this.requestLinkTaskId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingAnswerService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorAdd(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorAdd(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}};gi.\u0275fac=function(i){return new(i||gi)(g(he),g(le),g(_e),g(N),g(Q),g(Rt),g(G),g(ae),g(V),g(F))},gi.\u0275cmp=B({type:gi,selectors:[["app-ticketing-answer-add"]],viewQuery:function(i,t){if(i&1&&$(Xo,5),i&2){let s;ee(s=te())&&(t.formGroup=s.first)}},standalone:!1,features:[W],decls:16,vars:14,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=M();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),c(4),a(),r(5,"p"),c(6),S(7,"translate"),a(),T(8,"app-cms-form-result-message",6),r(9,"form",7,0),b("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),v(11,Zo,1,5,"app-cms-enum-record-status-selector",8),r(12,"app-ticketing-departemen-selector",9),S(13,"translate"),b("optionChange",function(d){return u(s),f(t.onActionSelectSource(d))}),a(),v(14,$o,10,10,"div",10),v(15,er,7,7,"div",11),a()()()}i&2&&(o(),h("optionsInfoAreaId",t.constructorInfoAreaId),o(3),p(" ",t.formInfo.formTitle," "),o(2),p(" ",_(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),h("formInfo",t.formInfo),o(3),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),o(),h("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(13,12,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessAddField)),o(2),I(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessWatchField?14:-1),o(),I(t.formInfo.submitButtonEnabled?15:-1))},dependencies:[ve,ie,ne,Ce,be,Me,ge,Te,U,we,q,de,Ae,O],encapsulation:2});var On=gi;var tr=["vform"];function ir(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",12),D("modelChange",function(t){u(e);let s=m();return A(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),a()}if(n&2){let e=m();y("model",e.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function nr(n,l){if(n&1){let e=M();r(0,"div",10)(1,"label",13),c(2),S(3,"translate"),a(),r(4,"textarea",14,1),S(6,"translate"),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),f(t)}),c(7,"          "),a(),r(8,"em"),c(9),a()()}if(n&2){let e=R(5),i=m();o(2),E(_(3,6,"TITLE.Answer_Text")),o(2),h("placeholder",x(_(6,8,"TITLE.Answer_Text"))),y("ngModel",i.dataModel.htmlBody),h("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessEditField)),o(5),p("",e.value.length," / 1000")}}function or(n,l){if(n&1){let e=M();r(0,"div",11)(1,"button",15),b("click",function(){u(e);let t=m();return f(t.onActionBackToParent())}),c(2),S(3,"translate"),a(),r(4,"button",16),c(5),S(6,"translate"),a()()}if(n&2){m();let e=R(10);o(2),p(" ",_(3,3,"ACTION.BACK")," "),o(2),h("disabled",!e.form.valid),o(),p(" ",_(6,5,"ACTION.SAVE")," ")}}var hi=class hi extends Nt{constructor(e,i,t,s,C,d,K,Y,Re,xe){super(d,new yt,s,xe);this.data=e;this.dialogRef=i;this.activatedRoute=t;this.publicHelper=s;this.coreEnumService=C;this.ticketingAnswerService=d;this.cmsToastrService=K;this.router=Y;this.cdr=Re;this.translate=xe;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new oe;this.dataModel=new yt;this.dataModelResult=new _t;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new Vt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestId=+e.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(e){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.setAccessDataType(Ct.Editor),this.ticketingAnswerService.ServiceGetOneById(e).subscribe({next:t=>{this.dataAccessModel=t.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.publicHelper.processService.processStop(i),this.dataModelResult=t,this.formInfo.submitButtonEnabled=!0,t.isSuccess?this.dataModel=t.item:this.cmsToastrService.typeErrorGetOne(t.errorMessage)},error:t=>{this.publicHelper.processService.processStop(i),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorGetOne(t)}})}DataEditContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingAnswerService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!1})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}}};hi.\u0275fac=function(i){return new(i||hi)(g(he),g(le),g(_e),g(N),g(Q),g(Rt),g(G),g(ae),g(V),g(F))},hi.\u0275cmp=B({type:hi,selectors:[["app-ticketing-answer-edit"]],viewQuery:function(i,t){if(i&1&&$(tr,5),i&2){let s;ee(s=te())&&(t.formGroup=s.first)}},standalone:!1,features:[W],decls:16,vars:14,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=M();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),c(4),a(),r(5,"p"),c(6),S(7,"translate"),a(),T(8,"app-cms-form-result-message",6),r(9,"form",7,0),b("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),v(11,ir,1,5,"app-cms-enum-record-status-selector",8),r(12,"app-ticketing-departemen-selector",9),S(13,"translate"),b("optionChange",function(d){return u(s),f(t.onActionSelectSource(d))}),a(),v(14,nr,10,10,"div",10),v(15,or,7,7,"div",11),a()()()}i&2&&(o(),h("optionsInfoAreaId",t.constructorInfoAreaId),o(3),p(" ",t.formInfo.formTitle," "),o(2),p(" ",_(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),h("formInfo",t.formInfo),o(3),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),o(),h("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(13,12,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessEditField)),o(2),I(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessWatchField?14:-1),o(),I(t.formInfo.submitButtonEnabled?15:-1))},dependencies:[ve,ie,ne,Ce,be,Me,ge,Te,U,we,q,de,Ae,O],encapsulation:2});var Gn=hi;var rr=["vform"];function ar(n,l){if(n&1){let e=M();r(0,"div",7)(1,"button",8),b("click",function(){u(e);let t=m();return f(t.onFormCancel())}),T(2,"i",9),c(3),S(4,"translate"),a()()}n&2&&(o(3),p(" ",_(4,1,"ACTION.CANCEL")," "))}var Si=class Si{constructor(l,e,i,t,s,C,d,K,Y,Re){this.data=l;this.dialogRef=e;this.coreEnumService=i;this.ticketingAnswerService=t;this.cmsToastrService=s;this.tokenHelper=C;this.cmsStoreService=d;this.cdr=K;this.publicHelper=Y;this.translate=Re;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new zt;this.dataModelResult=new j;this.dataModel=new yt;this.formInfo=new oe;this.dataModelEnumSendSmsStatusTypeResult=new j;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(l=>{this.formInfo.formTitle=l}),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>X(this,null,function*(){this.tokenInfo=l}))),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:l=>{this.dataModelEnumSendSmsStatusTypeResult=l}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage="";let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,console.log(this.dataModel),e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Si.\u0275fac=function(e){return new(e||Si)(g(he),g(le),g(Q),g(Rt),g(G),g(ce),g(se),g(V),g(N),g(F))},Si.\u0275cmp=B({type:Si,selectors:[["app-ticketing-answer-view"]],viewQuery:function(e,i){if(e&1&&$(rr,5),e&2){let t;ee(t=te())&&(i.formGroup=t.first)}},standalone:!1,decls:9,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[3,"formInfo"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(r(0,"div",0),c(1),a(),r(2,"div",1),T(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),a(),r(5,"div",4),T(6,"app-cms-form-result-message",5),a(),r(7,"div",6),v(8,ar,5,3,"div",7),a()),e&2&&(o(),p(" ",i.formInfo.formTitle," "),o(2),h("optionsInfoAreaId",i.constructorInfoAreaId),o(),h("dataModel",i.dataModel)("optionMethod",1),o(2),h("formInfo",i.formInfo),o(2),I(i.formInfo.submitButtonEnabled?8:-1))},dependencies:[q,Fo,de,O],encapsulation:2});var Pn=Si;function lr(n,l){n&1&&T(0,"div",8)}function sr(n,l){if(n&1&&(r(0,"div",4)(1,"div",5)(2,"b"),c(3),S(4,"translate"),a(),c(5,": "),a(),T(6,"div",13)(7,"div",11)(8,"div",10),a()),n&2){let e=m();o(3),p("",_(4,2,"TITLE.Description")," "),o(3),h("innerText",e.dataModelResult.item.htmlBody)}}var _i=class _i{constructor(l,e,i,t,s,C,d,K){this.headerService=l;this.publicHelper=e;this.cdr=i;this.cmsToastrService=t;this.dialog=s;this.translate=C;this.cmsStoreService=d;this.tokenHelper=K;this.constructorInfoAreaId=this.constructor.name;this.optionId=0;this.dataModelResult=new j;this.fieldsInfo=new Map;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.optionId>0&&this.DataGetOneContent(),this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>X(this,null,function*(){this.DataGetOneContent()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetOneContent(){let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.headerService.setAccessLoad(),this.headerService.ServiceGetOneById(this.optionId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess?this.dataModelResult=e:this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l)}})}};_i.\u0275fac=function(e){return new(e||_i)(g(Ge),g(N),g(V),g(G),g(ye),g(F),g(se),g(ce))},_i.\u0275cmp=B({type:_i,selectors:[["app-ticketing-task-header"]],inputs:{optionId:"optionId"},standalone:!1,decls:33,vars:11,consts:[[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content"],[1,"table"],[1,"tr"],[1,"td","small-width"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"],[1,"td","large-width",2,"color","darkblue"],[1,"td"],[1,"td","large-width"],[2,"clear","both"],[1,"td",2,"text-align","left"],[1,"divider","divider-margins"],[1,"td","large-width",3,"innerText"]],template:function(e,i){e&1&&(r(0,"div",0),T(1,"app-progress-spinner",1),r(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),T(6,"span",6),a(),r(7,"div",7)(8,"h5")(9,"b"),c(10),S(11,"translate"),a()()(),v(12,lr,1,0,"div",8),a(),r(13,"div",4)(14,"div",5)(15,"b"),c(16),a(),c(17,": "),a(),r(18,"div",9),c(19),a(),T(20,"div",8)(21,"div",10),a(),r(22,"div",4)(23,"div",5)(24,"b"),c(25),a(),c(26,": "),a(),r(27,"div",9),c(28),a(),T(29,"div",11)(30,"div",10),a(),v(31,sr,9,4,"div",4),a()()(),T(32,"div",12)),e&2&&(o(),h("optionsInfoAreaId",i.constructorInfoAreaId),o(5),h("inlineSVG","./assets/media/svg/icons/Communication/Flag.svg"),o(4),p(" ",_(11,9,"TITLE.Selected_Ticket")," "),o(2),I(!(i.dataModelResult==null||i.dataModelResult.item==null)&&i.dataModelResult.item.id?12:-1),o(4),p("",i.fieldsInfo.id==null?null:i.fieldsInfo.id.fieldTitle," "),o(3),E(i.dataModelResult==null||i.dataModelResult.item==null?null:i.dataModelResult.item.id),o(6),p("",i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle," "),o(3),E(i.dataModelResult==null||i.dataModelResult.item==null?null:i.dataModelResult.item.title),o(3),I((i.dataModelResult==null||i.dataModelResult.item==null||i.dataModelResult.item.htmlBody==null?null:i.dataModelResult.item.htmlBody.length)>0?31:-1))},dependencies:[q,Bo,O],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40a1f5;padding:2px;background:#fff;border-radius:5px}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f577;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40a1f5;color:#3d7c7a}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.small-width[_ngcontent-%COMP%]{width:90px}.large-width[_ngcontent-%COMP%]{width:400px}.clear[_ngcontent-%COMP%]{clear:both}"]});var Hn=_i;var dr=()=>[5,10,20,100],mr=n=>({background:n});function pr(n,l){if(n&1&&T(0,"app-ticketing-task-header",3),n&2){let e=m();h("optionId",e.requestLinkTaskId)}}function ur(n,l){if(n&1){let e=M();r(0,"a",39),b("click",function(){u(e);let t=m();return f(t.onActionBackToParent())}),T(1,"i",40),a()}}function fr(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",41),b("click",function(){u(e);let t=m();return f(t.onActionButtonNewRow())}),T(2,"i",42)(3,"br"),a(),r(4,"p",43),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.ADD")," "))}function gr(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",44),b("click",function(){u(e);let t=m();return f(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",45)(3,"br"),a(),r(4,"p",43),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.EDIT")," "))}function hr(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",46),b("click",function(){u(e);let t=m();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",47)(3,"br"),a(),r(4,"p",43),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.DELETE")," "))}function Sr(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",48),b("click",function(){u(e);let t=m();return f(t.onActionButtonViewRow(t.tableRowSelected))}),T(2,"i",49)(3,"br"),a(),r(4,"p",43),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.VIEW")," "))}function _r(n,l){if(n&1&&(r(0,"mat-header-cell",50),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Cr(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.id," ")}}function Tr(n,l){if(n&1&&(r(0,"mat-header-cell",50),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.linkTaskId==null?null:e.fieldsInfo.linkTaskId.fieldTitle," ")}}function vr(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.linkTaskId," ")}}function Ir(n,l){if(n&1&&(r(0,"mat-header-cell",50),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function br(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.linkMemberId," ")}}function Mr(n,l){if(n&1&&(r(0,"mat-header-cell",50),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function kr(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),p(" ",_(2,1,e.createdDate)," ")}}function wr(n,l){if(n&1&&(r(0,"mat-header-cell",50),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Er(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),p(" ",_(2,1,e.updatedDate)," ")}}function yr(n,l){if(n&1&&(r(0,"mat-header-cell",50),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.answerStatus==null?null:e.fieldsInfo.answerStatus.fieldTitle," ")}}function Ar(n,l){if(n&1&&(r(0,"mat-cell",51),c(1),S(2,"enums"),a()),n&2){let e=l.$implicit,i=m();h("ngStyle",We(5,mr,i.publicHelper.RowStyleAnswerStatus(e.ticketStatus))),o(),p(" ",mi(2,2,e.answerStatus,i.dataModelEnumAnswerStatusResult.listItems)," ")}}function Dr(n,l){n&1&&(r(0,"mat-header-cell"),c(1),S(2,"translate"),a()),n&2&&(o(),p(" ",_(2,1,"TITLE.OPTION")," "))}function Rr(n,l){if(n&1&&(r(0,"mat-cell",52)(1,"button",53)(2,"mat-icon"),c(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=R(5),i=m();o(),h("matMenuTriggerFor",e)("disabled",!i.dataModelResult.access.accessEditRow&&!i.dataModelResult.access.accessDeleteRow)}}function xr(n,l){n&1&&T(0,"mat-header-row")}function Lr(n,l){if(n&1){let e=M();r(0,"mat-row",54),b("click",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Z("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Ci=class Ci extends ct{constructor(e,i,t,s,C,d,K,Y,Re,xe,At,ft,$i){super(e,new yt,ft,d,Re);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=C;this.tokenHelper=d;this.cdr=K;this.cmsStoreService=Y;this.translate=Re;this.ticketingEnumService=xe;this.pageInfo=At;this.publicHelper=ft;this.dialog=$i;this.requestLinkTaskId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new J;this.filterDataModelQueryBuilder=[];this.dataModelEnumAnswerStatusResult=new j;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","LinkTaskId","linkMemberId","createdDate","updatedDate","AnswerStatus"];this.tabledisplayedColumnsMobileSource=["id","LinkTaskId","linkMemberId","createdDate","updatedDate","AnswerStatus"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:oo=>this.onSubmitOptionsSearch(oo)},this.filteModelContent.sortColumn="id",this.filteModelContent.sortType=H.Ascending}ngOnInit(){this.requestLinkTaskId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkTaskId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>X(this,null,function*(){this.getEnumAnswerStatus(),this.tokenInfo=e,this.DataGetAll()}))),this.getEnumAnswerStatus()}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}getEnumAnswerStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:e=>{this.dataModelEnumAnswerStatusResult=e}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new yt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestLinkTaskId>0&&(t.propertyName="LinkTaskId",t.value=this.requestLinkTaskId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTaskId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=H.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestLinkTaskId==null||this.requestLinkTaskId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(On,{height:"90%",panelClass:e,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{linkTaskId:this.requestLinkTaskId>0?this.requestLinkTaskId:this.categoryModelSelected.id}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Pn,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new J,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Gn,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(C,d,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:d=>{d.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(C)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(t,d,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),C=new z;C.propertyName="recordStatus",C.value=Ue.Available,s.filters.push(C),this.contentService.ServiceGetCount(s).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/task/"])}};Ci.\u0275fac=function(i){return new(i||Ci)(g(Rt),g(_e),g(G),g(Ft),g(ae),g(ce),g(V),g(se),g(F),g(Jt),g(st),g(N),g(ye))},Ci.\u0275cmp=B({type:Ci,selectors:[["app-ticketing-answer-list"]],standalone:!1,features:[W],decls:59,vars:33,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionId"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],[1,"col-4"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkTaskId"],["matColumnDef","linkMemberId"],["matColumnDef","createdDate"],["matColumnDef","updatedDate"],["matColumnDef","AnswerStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","box-shadow-button","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor","disabled"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=M();v(0,pr,1,1,"app-ticketing-task-header",3),r(1,"app-cms-html-list",4),D("optionActionGuideNoticeDisplayChange",function(d){return u(s),A(t.viewGuideNotice,d)||(t.viewGuideNotice=d),f(d)}),b("optionOnActionButtonMemoRow",function(){return u(s),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),f(t.onActionButtonPrintRow())}),k(2,5),c(3," -------------------------------------- "),w(),Le(4,6)(5,7),k(6,8),v(7,ur,2,0,"a",9),r(8,"a",10),b("click",function(){return u(s),f(t.viewGuideNotice=!t.viewGuideNotice)}),T(9,"i",11),a(),r(10,"a",10),b("click",function(){return u(s),f(t.onActionButtonReload())}),T(11,"i",12),a(),w(),k(12,13),r(13,"a",14),b("click",function(){return u(s),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(14,"mat-slide-toggle",15),c(15),S(16,"translate"),a(),r(17,"a",14),b("click",function(){return u(s),f(t.onActionButtonStatist())}),T(18,"mat-slide-toggle",15),c(19),S(20,"translate"),a(),w(),k(21,16),v(22,fr,7,3,"div",17),w(),k(23,18),v(24,gr,7,3,"div",17),v(25,hr,7,3,"div",17),v(26,Sr,7,3,"div",17),w(),k(27,19),r(28,"app-cms-search-list",20),D("optionsChange",function(d){return u(s),A(t.optionsSearch,d)||(t.optionsSearch=d),f(d)}),a(),r(29,"app-cms-statist-list",20),D("optionsChange",function(d){return u(s),A(t.optionsStatist,d)||(t.optionsStatist=d),f(d)}),a(),w(),k(30,21),r(31,"mat-table",22,0),b("matSortChange",function(){u(s);let d=R(32);return f(t.onTableSortData(d))}),k(33,23),L(34,_r,2,1,"mat-header-cell",24)(35,Cr,2,1,"mat-cell",25),w(),k(36,26),L(37,Tr,2,1,"mat-header-cell",24)(38,vr,2,1,"mat-cell",25),w(),k(39,27),L(40,Ir,2,1,"mat-header-cell",24)(41,br,2,1,"mat-cell",25),w(),k(42,28),L(43,Mr,2,1,"mat-header-cell",24)(44,kr,3,3,"mat-cell",25),w(),k(45,29),L(46,wr,2,1,"mat-header-cell",24)(47,Er,3,3,"mat-cell",25),w(),k(48,30),L(49,yr,2,1,"mat-header-cell",24)(50,Ar,3,7,"mat-cell",31),w(),k(51,32),L(52,Dr,3,3,"mat-header-cell",33)(53,Rr,6,2,"mat-cell",34),w(),L(54,xr,1,0,"mat-header-row",35)(55,Lr,1,2,"mat-row",36),a(),w(),k(56,37),r(57,"mat-paginator",38,1),b("page",function(d){return u(s),f(t.onTablePageingData(d))}),a(),w(),a()}i&2&&(I(t.requestLinkTaskId>0?0:-1),o(),h("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),y("optionActionGuideNoticeDisplay",t.viewGuideNotice),h("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),I(t.requestLinkTaskId>0?7:-1),o(4),Z("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),o(3),h("checked",t.optionsSearch.data.show),o(),p("",_(16,28,"ACTION.SEARCH")," "),o(3),h("checked",t.optionsStatist.data.show),o(),p("",_(20,30,"ACTION.STATIST")," "),o(3),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?22:-1),o(2),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?24:-1),o(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?25:-1),o(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0?26:-1),o(2),y("options",t.optionsSearch),o(),y("options",t.optionsStatist),o(2),h("dataSource",t.tableSource),o(23),h("matHeaderRowDef",t.tabledisplayedColumns),o(),h("matRowDefColumns",t.tabledisplayedColumns),o(2),h("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",qe(32,dr)))},dependencies:[je,Pe,He,Qe,Ke,ze,Je,Ye,Xe,Ze,et,ot,tt,$e,rt,it,nt,at,lt,dt,mt,pt,ut,Hn,O,fi,bt],encapsulation:2});var en=Ci;var Vr=["vform"];function Fr(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",15),D("modelChange",function(t){u(e);let s=m();return A(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),a()}if(n&2){let e=m();y("model",e.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Nr(n,l){n&1&&T(0,"i",18)}function Or(n,l){n&1&&T(0,"i",19)}function Gr(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function Pr(n,l){if(n&1){let e=M();r(0,"div",10)(1,"label",16),c(2),a(),r(3,"input",17,1),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.title,t)||(s.dataModel.title=t),f(t)}),a(),v(5,Nr,1,0,"i",18),v(6,Or,1,0,"i",19),r(7,"em"),c(8),a(),v(9,Gr,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),y("ngModel",i.dataModel.title),h("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function Hr(n,l){if(n&1&&(T(0,"img",13),S(1,"cmsthumbnail")),n&2){let e=m();h("src",x(_(1,2,e.dataModel.linkMainImageIdSrc)),Et)}}function qr(n,l){if(n&1){let e=M();r(0,"div",10)(1,"label",20),b("click",function(){u(e);let t=m();return f(t.fileManagerOpenForm=!0)}),c(2),S(3,"translate"),a(),r(4,"input",21,2),S(6,"translate"),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),f(t)}),b("click",function(){u(e);let t=m();return f(t.fileManagerOpenForm=!0)}),a(),r(7,"cms-file-manager",22),b("itemSelected",function(t){u(e);let s=m();return f(s.onActionFileSelected(t))}),D("openFormChange",function(t){u(e);let s=m();return A(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),f(t)}),a()()}if(n&2){let e=m();o(2),E(_(3,12,"TITLE.Icon_File")),o(2),h("placeholder",x(_(6,14,"TITLE.Original_File_ID"))),y("ngModel",e.dataModel.linkMainImageId),o(3),h("language",e.appLanguage)("isPopup",!0),y("openForm",e.fileManagerOpenForm),h("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Wr(n,l){if(n&1){let e=M();r(0,"div",14)(1,"button",23),b("click",function(){u(e);let t=m();return f(t.onFormCancel())}),T(2,"i",24),c(3),S(4,"translate"),a(),r(5,"button",25),T(6,"i",26),c(7),S(8,"translate"),a()()}if(n&2){m();let e=R(10);o(3),p(" ",_(4,3,"ACTION.CANCEL")," "),o(2),h("disabled",!e.form.valid),o(2),p(" ",_(8,5,"ACTION.SAVE")," ")}}var Di=class Di extends Nt{constructor(e,i,t,s,C,d,K,Y){super(s,new Ne,d,Y);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingDepartemenService=s;this.cmsToastrService=C;this.publicHelper=d;this.cdr=K;this.translate=Y;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new _t;this.dataModel=new Ne;this.formInfo=new oe;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(Ct.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=1}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Di.\u0275fac=function(i){return new(i||Di)(g(he),g(le),g(Q),g(Oe),g(G),g(N),g(V),g(F))},Di.\u0275cmp=B({type:Di,selectors:[["app-ticketing-departemen-edit"]],viewQuery:function(i,t){if(i&1&&$(Vr,5),i&2){let s;ee(s=te())&&(t.formGroup=s.first)}},standalone:!1,features:[W],decls:19,vars:15,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[1,"mb-3"],["target","_blank",3,"href"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),c(4),a(),r(5,"p"),c(6),S(7,"translate"),a(),T(8,"app-cms-form-result-message",7),r(9,"form",8,0),b("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),v(11,Fr,1,5,"app-cms-enum-record-status-selector",9),v(12,Pr,10,9,"div",10),r(13,"div",11)(14,"a",12),S(15,"cmsthumbnail"),v(16,Hr,2,4,"img",13),a()(),v(17,qr,8,16,"div",10),v(18,Wr,9,7,"div",14),a()()()}i&2&&(o(),h("optionsInfoAreaId",t.constructorInfoAreaId),o(3),p(" ",t.formInfo.formTitle," "),o(2),p(" ",_(7,11,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),h("formInfo",t.formInfo),o(3),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),o(),I(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessWatchField?12:-1),o(2),h("href",x(_(15,13,t.dataModel.linkMainImageIdSrc)),Et),o(2),I((t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0?16:-1),o(),I(t.fieldsInfo.linkMainImageId!=null&&t.fieldsInfo.linkMainImageId.accessWatchField?17:-1),o(),I(t.formInfo.submitButtonEnabled?18:-1))},dependencies:[ve,ie,ne,Ce,Ie,be,Me,ge,Te,Ee,U,we,q,de,Ln,O,Yt],encapsulation:2});var Kt=Di;var jr=["vform"];function Ur(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",15),D("modelChange",function(t){u(e);let s=m();return A(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),a()}if(n&2){let e=m();y("model",e.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Qr(n,l){n&1&&T(0,"i",18)}function Kr(n,l){n&1&&T(0,"i",19)}function zr(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function Jr(n,l){if(n&1){let e=M();r(0,"div",10)(1,"label",16),c(2),a(),r(3,"input",17,1),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.title,t)||(s.dataModel.title=t),f(t)}),a(),v(5,Qr,1,0,"i",18),v(6,Kr,1,0,"i",19),r(7,"em"),c(8),a(),v(9,zr,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),y("ngModel",i.dataModel.title),h("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function Yr(n,l){if(n&1&&(T(0,"img",13),S(1,"cmsthumbnail")),n&2){let e=m();h("src",x(_(1,2,e.dataModel.linkMainImageIdSrc)),Et)}}function Xr(n,l){if(n&1){let e=M();r(0,"div",10)(1,"label",20),b("click",function(){u(e);let t=m();return f(t.fileManagerOpenForm=!0)}),c(2),S(3,"translate"),a(),r(4,"input",21,2),S(6,"translate"),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),f(t)}),b("click",function(){u(e);let t=m();return f(t.fileManagerOpenForm=!0)}),a(),r(7,"cms-file-manager",22),b("itemSelected",function(t){u(e);let s=m();return f(s.onActionFileSelected(t))}),D("openFormChange",function(t){u(e);let s=m();return A(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),f(t)}),a()()}if(n&2){let e=m();o(2),E(_(3,12,"TITLE.Icon_File")),o(2),h("placeholder",x(_(6,14,"TITLE.Original_File_ID"))),y("ngModel",e.dataModel.linkMainImageId),o(3),h("language",e.appLanguage)("isPopup",!0),y("openForm",e.fileManagerOpenForm),h("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Zr(n,l){if(n&1){let e=M();r(0,"div",14)(1,"button",23),b("click",function(){u(e);let t=m();return f(t.onFormCancel())}),T(2,"i",24),c(3),S(4,"translate"),a(),r(5,"button",25),T(6,"i",26),c(7),S(8,"translate"),a()()}if(n&2){m();let e=R(10);o(3),p(" ",_(4,3,"ACTION.CANCEL")," "),o(2),h("disabled",!e.form.valid),o(2),p(" ",_(8,5,"ACTION.SAVE")," ")}}var Ri=class Ri extends vt{constructor(e,i,t,s,C,d,K,Y){super(s,new Ne,d,Y);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingDepartemenService=s;this.cmsToastrService=C;this.publicHelper=d;this.cdr=K;this.translate=Y;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new j;this.dataModel=new Ne;this.formInfo=new oe;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ri.\u0275fac=function(i){return new(i||Ri)(g(he),g(le),g(Q),g(Oe),g(G),g(N),g(V),g(F))},Ri.\u0275cmp=B({type:Ri,selectors:[["app-ticketing-departemen-add"]],viewQuery:function(i,t){if(i&1&&$(jr,5),i&2){let s;ee(s=te())&&(t.formGroup=s.first)}},standalone:!1,features:[W],decls:19,vars:15,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[1,"mb-3"],["target","_blank",3,"href"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),c(4),a(),r(5,"p"),c(6),S(7,"translate"),a(),T(8,"app-cms-form-result-message",7),r(9,"form",8,0),b("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),v(11,Ur,1,5,"app-cms-enum-record-status-selector",9),v(12,Jr,10,9,"div",10),r(13,"div",11)(14,"a",12),S(15,"cmsthumbnail"),v(16,Yr,2,4,"img",13),a()(),v(17,Xr,8,16,"div",10),v(18,Zr,9,7,"div",14),a()()()}i&2&&(o(),h("optionsInfoAreaId",t.constructorInfoAreaId),o(3),p(" ",t.formInfo.formTitle," "),o(2),p(" ",_(7,11,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),h("formInfo",t.formInfo),o(3),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),o(),I(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessWatchField?12:-1),o(2),h("href",x(_(15,13,t.dataModel.linkMainImageIdSrc)),Et),o(2),I((t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0?16:-1),o(),I(t.fieldsInfo.linkMainImageId!=null&&t.fieldsInfo.linkMainImageId.accessWatchField?17:-1),o(),I(t.formInfo.submitButtonEnabled?18:-1))},dependencies:[ve,ie,ne,Ce,Ie,be,Me,ge,Te,Ee,U,we,q,de,Ln,O,Yt],encapsulation:2});var xi=Ri;var $r=["vform"];function ea(n,l){if(n&1){let e=M();r(0,"div",5)(1,"label",7),c(2),a(),r(3,"input",8,0),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModelResultCategory.item.title,t)||(s.dataModelResultCategory.item.title=t),f(t)}),a()()}if(n&2){let e=m();o(2),E(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),o(),h("placeholder",x(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)),y("ngModel",e.dataModelResultCategory.item.title)}}function ta(n,l){if(n&1){let e=M();r(0,"div",6)(1,"button",9),b("click",function(){u(e);let t=m();return f(t.onFormCancel())}),T(2,"i",10),c(3),S(4,"translate"),a(),r(5,"button",11),b("click",function(){u(e);let t=m();return f(t.onFormDelete())}),T(6,"i",12),c(7),S(8,"translate"),a()()}if(n&2){let e=m();o(3),p(" ",_(4,3,"ACTION.CANCEL")," "),o(2),h("disabled",!e.formInfo.submitButtonEnabled),o(2),p(" ",_(8,5,"ACTION.DELETE")," ")}}var Li=class Li{constructor(l,e,i,t,s,C,d){this.data=l;this.dialogRef=e;this.publicHelper=i;this.ticketingDepartemenService=t;this.cdr=s;this.translate=C;this.cmsToastrService=d;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResultCategory=new j;this.dataModelResultCategoryAllData=new j;this.dataModel={};this.formInfo=new oe;this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.requestId<=0){this.cmsToastrService.typeErrorDeleteRowIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(),this.DataGetAll()}DataGetOne(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.translate.get("TITLE.Loading_Information").subscribe(e=>{this.formInfo.submitResultMessage=e});let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(Ct.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResultCategory=e,e.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorGetOne()),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l)}})}DataGetAll(){this.translate.get("TITLE.Loading_Information").subscribe(i=>{this.formInfo.submitResultMessage=i});let l=new J;l.rowPerPage=100;let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceGetAll(l).subscribe({next:i=>{this.dataModelResultCategoryAllData=i,i.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeErrorGetAll()),this.publicHelper.processService.processStop(e)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormDelete(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.formInfo.submitButtonEnabled=!1,this.formInfo.submitButtonEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceDelete(this.requestId).subscribe({next:e=>{this.formInfo.submitButtonEnabled=!e.isSuccess,e.isSuccess?(this.translate.get("MESSAGE.Deletion_Was_Successful").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormChangeNewCatId(l){if(this.formInfo.submitResultMessage="",this.requestId===0||!l||l.id<=0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.dataModel.newCatId=l.id,this.dataModel.newCatId===this.requestId?(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitButtonEnabled=!1):(this.formInfo.submitButtonEnabled=!0,this.formInfo.submitResultMessage="")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Li.\u0275fac=function(e){return new(e||Li)(g(he),g(le),g(N),g(Oe),g(V),g(F),g(G))},Li.\u0275cmp=B({type:Li,selectors:[["app-ticketing-departemen-delete"]],viewQuery:function(e,i){if(e&1&&$($r,5),e&2){let t;ee(t=te())&&(i.formGroup=t.first)}},standalone:!1,decls:10,vars:7,consts:[["Title",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[1,"form-actions"],["for","dataModelResultCategory.item.title",1,"color-highlight"],["matInput","","type","text","name","dataModelResultCategory.item.title","id","dataModelResultCategory.item.title","minlength","3","maxlength","50","readonly","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click","disabled"],[1,"fa","fa-check-square-o"]],template:function(e,i){e&1&&(r(0,"div",1),T(1,"app-progress-spinner",2),r(2,"div",3)(3,"p",4),c(4),a(),r(5,"p"),c(6),S(7,"translate"),a(),v(8,ea,5,4,"div",5),v(9,ta,9,7,"div",6),a()()),e&2&&(o(),h("optionsInfoAreaId",i.constructorInfoAreaId),o(3),p(" ",i.formInfo.formTitle," "),o(2),p(" ",_(7,5,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),I(i.dataModelResultCategory!=null&&i.dataModelResultCategory.item?8:-1),o(),I(i.formInfo.submitButtonEnabled?9:-1))},dependencies:[ie,ne,be,Me,ge,U,q,O],encapsulation:2});var Bi=Li;var ia=()=>[5,10,20,100],na=n=>({display:n});function oa(n,l){if(n&1){let e=M();r(0,"div",15)(1,"a",43),b("click",function(){u(e);let t=m();return f(t.onActionButtonNewRow())}),T(2,"i",44)(3,"br"),a(),r(4,"p",19),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.ADD")," "))}function ra(n,l){if(n&1){let e=M();r(0,"div",15)(1,"a",45),b("click",function(){u(e);let t=m();return f(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",46)(3,"br"),a(),r(4,"p",19),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.EDIT")," "))}function aa(n,l){if(n&1){let e=M();r(0,"div",15)(1,"a",47),b("click",function(){u(e);let t=m();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",48)(3,"br"),a(),r(4,"p",19),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.DELETE")," "))}function la(n,l){n&1&&(r(0,"mat-header-cell",49),c(1),S(2,"translate"),a()),n&2&&(o(),p(" ",_(2,1,"TITLE.PICTURE")," "))}function sa(n,l){if(n&1&&(T(0,"img",50),S(1,"cmsthumbnail")),n&2){let e=m().$implicit;h("src",x(_(1,2,e.linkMainImageIdSrc)),Et)}}function ca(n,l){if(n&1&&(r(0,"mat-cell"),v(1,sa,2,4,"img",50),a()),n&2){let e=l.$implicit;o(),I((e==null||e.linkMainImageIdSrc==null?null:e.linkMainImageIdSrc.length)>0?1:-1)}}function da(n,l){if(n&1&&(r(0,"mat-header-cell",49),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function ma(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.id," ")}}function pa(n,l){if(n&1&&(r(0,"mat-header-cell",49),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function ua(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),p(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function fa(n,l){if(n&1&&(r(0,"mat-header-cell",49),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function ga(n,l){if(n&1&&T(0,"select",52),n&2){let e=m().$implicit,i=m();h("contentService",i.contentService)("row",e)("ngStyle",We(3,na,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function ha(n,l){if(n&1&&(r(0,"mat-cell",51),S(1,"statusCellClass"),T(2,"i",51),S(3,"statusIconClass"),v(4,ga,1,5,"select",52),a()),n&2){let e=l.$implicit,i=m();h("ngClass",_(1,3,e.recordStatus)),o(2),h("ngClass",_(3,5,e.recordStatus)),o(2),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow?4:-1)}}function Sa(n,l){if(n&1&&(r(0,"mat-header-cell",49),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function _a(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.title," ")}}function Ca(n,l){if(n&1&&(r(0,"mat-header-cell",49),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Ta(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),p(" ",_(2,1,e.createdDate)," ")}}function va(n,l){if(n&1&&(r(0,"mat-header-cell",49),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Ia(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),p(" ",_(2,1,e.updatedDate)," ")}}function ba(n,l){n&1&&(r(0,"mat-header-cell"),c(1),S(2,"translate"),a()),n&2&&(o(),p(" ",_(2,1,"TITLE.OPTION")," "))}function Ma(n,l){if(n&1&&(r(0,"mat-cell",53)(1,"button",54)(2,"mat-icon"),c(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=R(5);o(),h("matMenuTriggerFor",e)}}function ka(n,l){n&1&&T(0,"mat-header-row")}function wa(n,l){if(n&1){let e=M();r(0,"mat-row",55),b("click",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Z("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Vi=class Vi extends ct{constructor(e,i,t,s,C,d,K,Y,Re,xe){super(e,new Ne,Re,s,d);this.contentService=e;this.cmsToastrService=i;this.router=t;this.tokenHelper=s;this.cdr=C;this.translate=d;this.cmsStoreService=K;this.pageInfo=Y;this.publicHelper=Re;this.dialog=xe;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new J;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["linkMainImageIdSrc","id","recordStatus"];this.tabledisplayedColumnsMobileSource=["linkMainImageIdSrc","id","recordStatus"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:At=>this.onSubmitOptionsSearch(At)},this.filteModelContent.sortColumn="id",this.filteModelContent.sortType=H.Descending}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>X(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ne);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess&&(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=H.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(xi,{height:"90%",panelClass:e,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Kt,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Bi,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonFaqList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/faq/",this.tableRowSelected.id])}onActionButtonTemplateList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/template/",this.tableRowSelected.id])}onActionButtonLogList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/departemenlog/DepartemenId/",this.tableRowSelected.id])}onActionButtonTaskList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/task/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(t,d,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),C=new z;C.propertyName="recordStatus",C.value=Ue.Available,s.filters.push(C),this.contentService.ServiceGetCount(s).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}};Vi.\u0275fac=function(i){return new(i||Vi)(g(Oe),g(G),g(ae),g(ce),g(V),g(F),g(se),g(st),g(N),g(ye))},Vi.\u0275cmp=B({type:Vi,selectors:[["app-ticketing-departemen-list"]],standalone:!1,features:[W],decls:87,vars:42,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],[1,"col-4"],["cms-action-row",""],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-ticket","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-question","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-memo","font-18",2,"color","#ffffff"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","linkMainImageIdSrc"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","id"],["matColumnDef","linkSiteId"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","createdDate"],["matColumnDef","updatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),D("optionActionGuideNoticeDisplayChange",function(d){return u(s),A(t.viewGuideNotice,d)||(t.viewGuideNotice=d),f(d)}),b("optionOnActionButtonMemoRow",function(){return u(s),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),f(t.onActionButtonPrintRow())}),k(1,4),c(2," -------------------------------------- "),w(),Le(3,5)(4,6),k(5,7),r(6,"a",8),b("click",function(){return u(s),f(t.viewGuideNotice=!t.viewGuideNotice)}),T(7,"i",9),a(),r(8,"a",8),b("click",function(){return u(s),f(t.onActionButtonReload())}),T(9,"i",10),a(),w(),k(10,11),r(11,"a",12),b("click",function(){return u(s),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(12,"mat-slide-toggle",13),c(13),S(14,"translate"),a(),r(15,"a",12),b("click",function(){return u(s),f(t.onActionButtonStatist())}),T(16,"mat-slide-toggle",13),c(17),S(18,"translate"),a(),w(),k(19,14),v(20,oa,7,3,"div",15),w(),k(21,16),v(22,ra,7,3,"div",15),v(23,aa,7,3,"div",15),r(24,"div",15)(25,"a",17),b("click",function(){return u(s),f(t.onActionButtonTaskList(t.tableRowSelected))}),T(26,"i",18)(27,"br"),a(),r(28,"p",19),c(29),S(30,"translate"),a()(),r(31,"div",15)(32,"a",17),b("click",function(){return u(s),f(t.onActionButtonFaqList(t.tableRowSelected))}),T(33,"i",20)(34,"br"),a(),r(35,"p",19),c(36),S(37,"translate"),a()(),r(38,"div",15)(39,"a",17),b("click",function(){return u(s),f(t.onActionButtonTemplateList(t.tableRowSelected))}),T(40,"i",21)(41,"br"),a(),r(42,"p",19),c(43),S(44,"translate"),a()(),r(45,"div",15)(46,"a",17),b("click",function(){return u(s),f(t.onActionButtonLogList(t.tableRowSelected))}),T(47,"i",21)(48,"br"),a(),r(49,"p",19),c(50),S(51,"translate"),a()(),w(),k(52,22),r(53,"app-cms-search-list",23),D("optionsChange",function(d){return u(s),A(t.optionsSearch,d)||(t.optionsSearch=d),f(d)}),a(),r(54,"app-cms-statist-list",23),D("optionsChange",function(d){return u(s),A(t.optionsStatist,d)||(t.optionsStatist=d),f(d)}),a(),w(),k(55,24),r(56,"mat-table",25,0),b("matSortChange",function(){u(s);let d=R(57);return f(t.onTableSortData(d))}),k(58,26),L(59,la,3,3,"mat-header-cell",27)(60,ca,2,1,"mat-cell",28),w(),k(61,29),L(62,da,2,1,"mat-header-cell",27)(63,ma,2,1,"mat-cell",28),w(),k(64,30),L(65,pa,2,1,"mat-header-cell",27)(66,ua,4,5,"mat-cell",28),w(),k(67,31),L(68,fa,2,1,"mat-header-cell",27)(69,ha,5,7,"mat-cell",32),w(),k(70,33),L(71,Sa,2,1,"mat-header-cell",27)(72,_a,2,1,"mat-cell",28),w(),k(73,34),L(74,Ca,2,1,"mat-header-cell",27)(75,Ta,3,3,"mat-cell",28),w(),k(76,35),L(77,va,2,1,"mat-header-cell",27)(78,Ia,3,3,"mat-cell",28),w(),k(79,36),L(80,ba,3,3,"mat-header-cell",37)(81,Ma,6,1,"mat-cell",38),w(),L(82,ka,1,0,"mat-header-row",39)(83,wa,1,2,"mat-row",40),a(),w(),k(84,41),r(85,"mat-paginator",42,1),b("page",function(d){return u(s),f(t.onTablePageingData(d))}),a(),w(),a()}i&2&&(h("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.departemen.list"),y("optionActionGuideNoticeDisplay",t.viewGuideNotice),h("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(9),Z("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),o(3),h("checked",t.optionsSearch.data.show),o(),p("",_(14,29,"ACTION.SEARCH")," "),o(3),h("checked",t.optionsStatist.data.show),o(),p("",_(18,31,"ACTION.STATIST")," "),o(3),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?20:-1),o(2),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?22:-1),o(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?23:-1),o(6),p(" ",_(30,33,"ACTION.TICKETS")," "),o(7),p(" ",_(37,35,"ACTION.QUESTIONS")," "),o(7),p(" ",_(44,37,"ACTION.TEMPLATES")," "),o(7),p(" ",_(51,39,"ACTION.LOGS")," "),o(3),y("options",t.optionsSearch),o(),y("options",t.optionsStatist),o(2),h("dataSource",t.tableSource),o(26),h("matHeaderRowDef",t.tabledisplayedColumns),o(),h("matRowDefColumns",t.tabledisplayedColumns),o(2),h("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",qe(41,ia)))},dependencies:[Dt,je,Pe,He,U,Qe,Ke,ze,Je,Ye,Xe,Ze,et,ot,tt,$e,rt,it,nt,at,lt,dt,mt,pt,ut,Ot,Ve,O,It,Yt,bt,Gt,Pt],encapsulation:2});var qn=Vi;function Ea(n,l){if(n&1){let e=M();r(0,"button",14),b("click",function(){u(e);let t=m();return f(t.onActionAdd())}),c(1),S(2,"translate"),a()}n&2&&(o(),p(" ",_(2,1,"ACTION.ADD")," "))}function ya(n,l){if(n&1){let e=M();r(0,"button",15),b("click",function(){u(e);let t=m();return f(t.onActionEdit())}),c(1),S(2,"translate"),a()}n&2&&(o(),p(" ",_(2,1,"ACTION.EDIT")," "))}function Aa(n,l){if(n&1){let e=M();r(0,"button",16),b("click",function(){u(e);let t=m();return f(t.onActionDelete())}),c(1),S(2,"translate"),a()}n&2&&(o(),p(" ",_(2,1,"ACTION.DELETE")," "))}function Da(n,l){if(n&1){let e=M();r(0,"button",17),b("click",function(){u(e);let t=m();return f(t.onActionButtonReload())}),r(1,"mat-icon",18),S(2,"translate"),c(3,"refresh"),a()()}if(n&2){let e=m();o(),Z("rotation360",e.publicHelper.processService.process.inRunArea[e.constructorInfoAreaId]),h("title",x(_(2,4,"ACTION.RELOAD")))}}function Ra(n,l){if(n&1){let e=M();r(0,"mat-tree-node",19),T(1,"button",20),r(2,"span",21),b("click",function(){let t=u(e).$implicit,s=m();return f(s.onActionSelect(t))}),c(3),a()()}if(n&2){let e=l.$implicit,i=m();Z("ntk-tree-selected",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0&&(i.dataModelSelect==null?null:i.dataModelSelect.id)===e.id),o(3),E(e.title)}}function xa(n,l){if(n&1){let e=M();r(0,"mat-tree-node",22)(1,"button",23)(2,"mat-icon",24),c(3),a()(),r(4,"span",21),b("click",function(){let t=u(e).$implicit,s=m();return f(s.onActionSelect(t))}),c(5),a()()}if(n&2){let e=l.$implicit,i=m(),t=R(12);Z("ntk-tree-selected",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0&&(i.dataModelSelect==null?null:i.dataModelSelect.id)===e.id),h("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),o(),qt("type","button")("aria-label","Toggle "+e.title),o(2),p(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),o(2),E(e.title)}}var Fi=class Fi{constructor(l,e,i,t,s,C,d,K,Y){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.dialog=t;this.cdr=s;this.publicHelper=C;this.tokenHelper=d;this.cmsStoreService=K;this.translate=Y;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new Ne;this.dataModelResult=new j;this.filterModel=new J;this.dataSource=new Ro;this.optionChange=new ii;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(l,e)=>!1;this.childrenAccessor=l=>[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(()=>X(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess&&(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onActionSelect(l){l&&this.dataModelSelect&&l.id==this.dataModelSelect.id?(this.dataModelSelect=null,this.optionChange.emit(null)):(this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect))}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new Ne,this.DataGetAll()}onActionSelectForce(l){}onActionAdd(){var l="";this.publicHelper.isMobile?l="dialog-fullscreen":l="dialog-min",this.dialog.open(xi,{height:"90%",panelClass:l,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(i=>{i&&i.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let l=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(l=this.dataModelSelect.id),l===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Kt,{height:"90%",panelClass:e,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let l=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(l=this.dataModelSelect.id),l===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Bi,{height:"90%",panelClass:e,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}};Fi.\u0275fac=function(e){return new(e||Fi)(g(G),g(Q),g(Oe),g(ye),g(V),g(N),g(ce),g(se),g(F))},Fi.\u0275cmp=B({type:Fi,selectors:[["app-ticketing-departemen-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:16,vars:14,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,i){e&1&&(r(0,"app-cms-html-tree",1),k(1,2),c(2),S(3,"translate"),w(),k(4,3),v(5,Ea,3,3,"button",4),v(6,ya,3,3,"button",5),v(7,Aa,3,3,"button",6),v(8,Da,4,6,"button",7),w(),k(9,8),T(10,"app-progress-spinner",9),r(11,"mat-tree",10,0),L(13,Ra,4,3,"mat-tree-node",11)(14,xa,6,8,"mat-tree-node",12),a(),w(),Le(15,13),a()),e&2&&(h("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),o(2),p(" ",_(3,12,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),o(3),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessAddRow?5:-1),o(),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow&&(i.dataModelSelect==null?null:i.dataModelSelect.id)>0?6:-1),o(),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessDeleteRow&&(i.dataModelSelect==null?null:i.dataModelSelect.id)>0?7:-1),o(),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessWatchRow?8:-1),o(2),h("optionsInfoAreaId",i.constructorInfoAreaId),o(),h("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),o(3),h("matTreeNodeDefWhen",i.hasChild))},dependencies:[Pe,He,Eo,yo,Do,Ao,wo,q,No,O],encapsulation:2});var Ht=Fi;var La=()=>[5,10,20,100],Ba=n=>({display:n});function Va(n,l){if(n&1){let e=M();r(0,"a",40),b("click",function(){u(e);let t=m();return f(t.onActionBackToParent())}),T(1,"i",41),a()}}function Fa(n,l){if(n&1){let e=M();r(0,"div",18)(1,"a",42),b("click",function(){u(e);let t=m();return f(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",43)(3,"br"),a(),r(4,"p",44),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.EDIT")," "))}function Na(n,l){if(n&1&&(r(0,"mat-header-cell",45),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Oa(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.id," ")}}function Ga(n,l){if(n&1&&(r(0,"mat-header-cell",45),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Pa(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),p(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function Ha(n,l){if(n&1&&(r(0,"mat-header-cell",45),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.linkSourceId==null?null:e.fieldsInfo.linkSourceId.fieldTitle," ")}}function qa(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.linkSourceId," ")}}function Wa(n,l){if(n&1&&(r(0,"mat-header-cell",45),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function ja(n,l){if(n&1&&T(0,"select",47),n&2){let e=m().$implicit,i=m();h("contentService",i.contentService)("row",e)("ngStyle",We(3,Ba,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Ua(n,l){if(n&1&&(r(0,"mat-cell",46),S(1,"statusCellClass"),T(2,"i",46),S(3,"statusIconClass"),v(4,ja,1,5,"select",47),a()),n&2){let e=l.$implicit,i=m();h("ngClass",_(1,3,e.recordStatus)),o(2),h("ngClass",_(3,5,e.recordStatus)),o(2),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow?4:-1)}}function Qa(n,l){if(n&1&&(r(0,"mat-header-cell",45),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function Ka(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.title," ")}}function za(n,l){if(n&1&&(r(0,"mat-header-cell",45),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Ja(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),p(" ",_(2,1,e.createdDate)," ")}}function Ya(n,l){if(n&1&&(r(0,"mat-header-cell",45),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Xa(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),p(" ",_(2,1,e.updatedDate)," ")}}function Za(n,l){n&1&&(r(0,"mat-header-cell"),c(1),S(2,"translate"),a()),n&2&&(o(),p(" ",_(2,1,"TITLE.OPTION")," "))}function $a(n,l){if(n&1&&(r(0,"mat-cell",48)(1,"button",49)(2,"mat-icon"),c(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=R(5);o(),h("matMenuTriggerFor",e)}}function el(n,l){n&1&&T(0,"mat-header-row")}function tl(n,l){if(n&1){let e=M();r(0,"mat-row",50),b("click",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Z("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Ni=class Ni extends ct{constructor(e,i,t,s,C,d,K,Y,Re,xe,At){super(e,new ao,xe,C,Y);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.router=s;this.tokenHelper=C;this.cmsStoreService=d;this.cdr=K;this.translate=Y;this.pageInfo=Re;this.publicHelper=xe;this.dialog=At;this.requestDepartemenId=0;this.requestOperatorId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new J;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","recordStatus","LinkSourceId","createdDate","updatedDate"];this.tabledisplayedColumnsMobileSource=["id","recordStatus","LinkSourceId","createdDate","updatedDate"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestOperatorId=+Number(this.activatedRoute.snapshot.paramMap.get("OperatorId")),this.optionsSearch.parentMethods={onSubmit:ft=>this.onSubmitOptionsSearch(ft)},this.filteModelContent.sortColumn="createdDate",this.filteModelContent.sortType=H.Descending}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(i=>i.tokenInfoStore).subscribe(i=>X(this,null,function*(){this.tokenInfo=i,this.DataGetAll()})));let e=new z;this.requestOperatorId>0&&(e.propertyName="LinkFromOperatorId",e.value=this.requestOperatorId,this.filteModelContent.filters.push(e)),this.requestDepartemenId>0&&(e=new z,e.propertyName="LinkFromTicketingDepartemenId",e.value=this.requestDepartemenId,e.clauseType=jt.Or,this.filteModelContent.filters.push(e),e=new z,e.propertyName="LinkToTicketingDepartemenId",e.value=this.requestDepartemenId,e.clauseType=jt.Or,this.filteModelContent.filters.push(e))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new ao);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.categoryModelSelected&&this.categoryModelSelected.id>0){let t=new z;t.propertyName="LinkFromTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)}this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorGetAll(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=H.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new J,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}this.router.navigate(["/application/app/edit/",this.tableRowSelected.id])}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}this.router.navigate(["/application/app/delete/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(t,d,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),C=new z;C.propertyName="recordStatus",C.value=Ue.Available,s.filters.push(C),this.contentService.ServiceGetCount(s).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.requestOperatorId>0&&this.router.navigate(["/application/app/"]),this.requestDepartemenId>0&&this.router.navigate(["/ticketing/departemen/"])}};Ni.\u0275fac=function(i){return new(i||Ni)(g(Cn),g(_e),g(G),g(ae),g(ce),g(se),g(V),g(F),g(st),g(N),g(ye))},Ni.\u0275cmp=B({type:Ni,selectors:[["app-application-app-list"]],standalone:!1,features:[W],decls:58,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],[1,"col-4"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","LinkSourceId"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","createdDate"],["matColumnDef","updatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),D("optionActionGuideNoticeDisplayChange",function(d){return u(s),A(t.viewGuideNotice,d)||(t.viewGuideNotice=d),f(d)}),b("optionOnActionButtonMemoRow",function(){return u(s),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),f(t.onActionButtonPrintRow())}),k(1,4),r(2,"app-ticketing-departemen-tree",5),b("optionChange",function(d){return u(s),f(t.onActionSelectorSelect(d))}),a(),w(),Le(3,6)(4,7),k(5,8),v(6,Va,2,0,"a",9),r(7,"a",10),b("click",function(){return u(s),f(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),b("click",function(){return u(s),f(t.onActionButtonReload())}),T(10,"i",12),a(),w(),k(11,13),r(12,"a",14),b("click",function(){return u(s),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),c(14),S(15,"translate"),a(),r(16,"a",14),b("click",function(){return u(s),f(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),c(18),S(19,"translate"),a(),w(),Le(20,16),k(21,17),v(22,Fa,7,3,"div",18),w(),k(23,19),r(24,"app-cms-search-list",20),D("optionsChange",function(d){return u(s),A(t.optionsSearch,d)||(t.optionsSearch=d),f(d)}),a(),r(25,"app-cms-statist-list",20),D("optionsChange",function(d){return u(s),A(t.optionsStatist,d)||(t.optionsStatist=d),f(d)}),a(),w(),k(26,21),r(27,"mat-table",22,0),b("matSortChange",function(){u(s);let d=R(28);return f(t.onTableSortData(d))}),k(29,23),L(30,Na,2,1,"mat-header-cell",24)(31,Oa,2,1,"mat-cell",25),w(),k(32,26),L(33,Ga,2,1,"mat-header-cell",24)(34,Pa,4,5,"mat-cell",25),w(),k(35,27),L(36,Ha,2,1,"mat-header-cell",24)(37,qa,2,1,"mat-cell",25),w(),k(38,28),L(39,Wa,2,1,"mat-header-cell",24)(40,Ua,5,7,"mat-cell",29),w(),k(41,30),L(42,Qa,2,1,"mat-header-cell",24)(43,Ka,2,1,"mat-cell",25),w(),k(44,31),L(45,za,2,1,"mat-header-cell",24)(46,Ja,3,3,"mat-cell",25),w(),k(47,32),L(48,Ya,2,1,"mat-header-cell",24)(49,Xa,3,3,"mat-cell",25),w(),k(50,33),L(51,Za,3,3,"mat-header-cell",34)(52,$a,6,1,"mat-cell",35),w(),L(53,el,1,0,"mat-header-row",36)(54,tl,1,2,"mat-row",37),a(),w(),k(55,38),r(56,"mat-paginator",39,1),b("page",function(d){return u(s),f(t.onTablePageingData(d))}),a(),w(),a()}i&2&&(h("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),y("optionActionGuideNoticeDisplay",t.viewGuideNotice),h("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),I(t.requestDepartemenId>0?6:-1),o(4),Z("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),o(3),h("checked",t.optionsSearch.data.show),o(),p("",_(15,24,"ACTION.SEARCH")," "),o(3),h("checked",t.optionsStatist.data.show),o(),p("",_(19,26,"ACTION.STATIST")," "),o(4),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?22:-1),o(2),y("options",t.optionsSearch),o(),y("options",t.optionsStatist),o(2),h("dataSource",t.tableSource),o(26),h("matHeaderRowDef",t.tabledisplayedColumns),o(),h("matRowDefColumns",t.tabledisplayedColumns),o(2),h("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",qe(28,La)))},dependencies:[Dt,je,Pe,He,U,Qe,Ke,ze,Je,Ye,Xe,Ze,et,ot,tt,$e,rt,it,nt,at,lt,dt,mt,pt,ut,Ot,Ht,Ve,O,It,bt,Gt,Pt],encapsulation:2});var on=Ni;var ol=["vform"];function rl(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",18),D("modelChange",function(t){u(e);let s=m();return A(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),a()}if(n&2){let e=m();y("model",e.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function al(n,l){n&1&&T(0,"i",13)}function ll(n,l){n&1&&T(0,"i",14)}function sl(n,l){n&1&&(r(0,"mat-error"),c(1," Question is "),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2&&(o(3),E(_(4,1,"MESSAGE.required")))}function cl(n,l){if(n&1){let e=M();r(0,"div",17)(1,"button",19),b("click",function(){u(e);let t=m();return f(t.onFormCancel())}),T(2,"i",20),c(3),S(4,"translate"),a(),r(5,"button",21),T(6,"i",22),c(7),S(8,"translate"),a()()}if(n&2){m();let e=R(10);o(3),p(" ",_(4,3,"ACTION.CANCEL")," "),o(2),h("disabled",!e.form.valid),o(2),p(" ",_(8,5,"ACTION.SAVE")," ")}}var Oi=class Oi extends vt{constructor(e,i,t,s,C,d,K,Y){super(s,new Tt,d,Y);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingFaqService=s;this.cmsToastrService=C;this.publicHelper=d;this.cdr=K;this.translate=Y;this.requestParentId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new Xt;this.dataModelResult=new j;this.dataModel=new Tt;this.dataFileModel=new Map;this.formInfo=new oe;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=+e.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.Submit_New_Content").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";if(this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Oi.\u0275fac=function(i){return new(i||Oi)(g(he),g(le),g(Q),g(xt),g(G),g(N),g(V),g(F))},Oi.\u0275cmp=B({type:Oi,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,t){if(i&1&&$(ol,5),i&2){let s;ee(s=te())&&(t.formGroup=s.first)}},standalone:!1,features:[W],decls:34,vars:34,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),c(4),a(),r(5,"p"),c(6),S(7,"translate"),a(),T(8,"app-cms-form-result-message",6),r(9,"form",7,0),b("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),v(11,rl,1,5,"app-cms-enum-record-status-selector",8),r(12,"app-ticketing-departemen-selector",9),S(13,"translate"),b("optionChange",function(d){return u(s),f(t.onActionSelectorSelect(d))}),a(),r(14,"div",10)(15,"label",11),c(16),S(17,"translate"),a(),r(18,"input",12,1),S(20,"translate"),D("ngModelChange",function(d){return u(s),A(t.dataModel.question,d)||(t.dataModel.question=d),f(d)}),a(),v(21,al,1,0,"i",13),v(22,ll,1,0,"i",14),r(23,"em"),c(24),a(),v(25,sl,5,3,"mat-error"),a(),r(26,"p"),c(27),S(28,"translate"),a(),r(29,"angular-editor",15),S(30,"translate"),D("ngModelChange",function(d){return u(s),A(t.dataModel.answer,d)||(t.dataModel.answer=d),f(d)}),a(),T(31,"br"),r(32,"app-cms-files-selector",16),D("dataFileModelChange",function(d){return u(s),A(t.dataFileModel,d)||(t.dataFileModel=d),f(d)}),a(),v(33,cl,9,7,"div",17),a()()()}if(i&2){let s=R(19);o(),h("optionsInfoAreaId",t.constructorInfoAreaId),o(3),p(" ",t.formInfo.formTitle," "),o(2),p(" ",_(7,22,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),h("formInfo",t.formInfo),o(3),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),o(),h("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(13,24,"TITLE.Department")),o(4),E(_(17,26,"TITLE.Question")),o(2),h("placeholder",x(_(20,28,"TITLE.Question"))),y("ngModel",t.dataModel.question),o(3),I(s.value?-1:21),o(),I(s.value?22:-1),o(2),p("",s.value.length," / 100"),o(),I(s.errors!=null&&s.errors.required?25:-1),o(2),E(_(28,30,"TITLE.Answer")),o(2),h("placeholder",_(30,32,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),y("ngModel",t.dataModel.answer),o(3),y("dataFileModel",t.dataFileModel),h("openDirectUploadView",!0),o(),I(t.formInfo.submitButtonEnabled?33:-1)}},dependencies:[ve,ie,ne,Ce,Ie,be,Me,ge,Te,Ee,U,we,q,de,Nn,Bn,Ae,O],encapsulation:2});var Kn=Oi;var dl=["vform"];function ml(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",18),D("modelChange",function(t){u(e);let s=m();return A(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),a()}if(n&2){let e=m();y("model",e.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function pl(n,l){n&1&&T(0,"i",13)}function ul(n,l){n&1&&T(0,"i",14)}function fl(n,l){n&1&&(r(0,"mat-error"),c(1," Question is "),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2&&(o(3),E(_(4,1,"MESSAGE.required")))}function gl(n,l){if(n&1){let e=M();r(0,"div",17)(1,"button",19),b("click",function(){u(e);let t=m();return f(t.onFormCancel())}),T(2,"i",20),c(3),S(4,"translate"),a(),r(5,"button",21),T(6,"i",22),c(7),S(8,"translate"),a()()}if(n&2){m();let e=R(10);o(3),p(" ",_(4,3,"ACTION.CANCEL")," "),o(2),h("disabled",!e.form.valid),o(2),p(" ",_(8,5,"ACTION.SAVE")," ")}}var Gi=class Gi extends Nt{constructor(e,i,t,s,C,d,K,Y){super(s,new Tt,d,Y);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingFaqService=s;this.cmsToastrService=C;this.publicHelper=d;this.cdr=K;this.translate=Y;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new Xt;this.dataModelResult=new _t;this.dataModel=new Tt;this.dataFileModel=new Map;this.formInfo=new oe;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingFaqService.setAccessLoad(),this.ticketingFaqService.setAccessDataType(Ct.Editor),this.ticketingFaqService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.question,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.dataModel.linkFileIds&&this.dataModel.linkFileIds.length>0&&this.dataModel.linkFileIds.split(",").forEach((t,s)=>{let C="";this.dataModel.linkFileIdsSrc.length>=this.dataModel.linkFileIdsSrc.length&&(C=this.dataModel.linkFileIdsSrc[s]),this.dataFileModel.set(+t,C)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";if(this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Gi.\u0275fac=function(i){return new(i||Gi)(g(he),g(le),g(Q),g(xt),g(G),g(N),g(V),g(F))},Gi.\u0275cmp=B({type:Gi,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,t){if(i&1&&$(dl,5),i&2){let s;ee(s=te())&&(t.formGroup=s.first)}},standalone:!1,features:[W],decls:34,vars:34,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),c(4),a(),r(5,"p"),c(6),S(7,"translate"),a(),T(8,"app-cms-form-result-message",6),r(9,"form",7,0),b("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),v(11,ml,1,5,"app-cms-enum-record-status-selector",8),r(12,"app-ticketing-departemen-selector",9),S(13,"translate"),b("optionChange",function(d){return u(s),f(t.onActionSelectorSelect(d))}),a(),r(14,"div",10)(15,"label",11),c(16),S(17,"translate"),a(),r(18,"input",12,1),S(20,"translate"),D("ngModelChange",function(d){return u(s),A(t.dataModel.question,d)||(t.dataModel.question=d),f(d)}),a(),v(21,pl,1,0,"i",13),v(22,ul,1,0,"i",14),r(23,"em"),c(24),a(),v(25,fl,5,3,"mat-error"),a(),r(26,"p"),c(27),S(28,"translate"),a(),r(29,"angular-editor",15),S(30,"translate"),D("ngModelChange",function(d){return u(s),A(t.dataModel.answer,d)||(t.dataModel.answer=d),f(d)}),a(),T(31,"br"),r(32,"app-cms-files-selector",16),D("dataFileModelChange",function(d){return u(s),A(t.dataFileModel,d)||(t.dataFileModel=d),f(d)}),a(),v(33,gl,9,7,"div",17),a()()()}if(i&2){let s=R(19);o(),h("optionsInfoAreaId",t.constructorInfoAreaId),o(3),p(" ",t.formInfo.formTitle," "),o(2),p(" ",_(7,22,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),h("formInfo",t.formInfo),o(3),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),o(),h("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(13,24,"TITLE.Department")),o(4),E(_(17,26,"TITLE.Question")),o(2),h("placeholder",x(_(20,28,"TITLE.Question"))),y("ngModel",t.dataModel.question),o(3),I(s.value?-1:21),o(),I(s.value?22:-1),o(2),p("",s.value.length," / 100"),o(),I(s.errors!=null&&s.errors.required?25:-1),o(2),E(_(28,30,"TITLE.Answer")),o(2),h("placeholder",_(30,32,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),y("ngModel",t.dataModel.answer),o(3),y("dataFileModel",t.dataFileModel),h("openDirectUploadView",!0),o(),I(t.formInfo.submitButtonEnabled?33:-1)}},dependencies:[ve,ie,ne,Ce,Ie,be,Me,ge,Te,Ee,U,we,q,de,Nn,Bn,Ae,O],encapsulation:2});var zn=Gi;var hl=()=>[5,10,20,100],Sl=n=>({display:n});function _l(n,l){if(n&1){let e=M();r(0,"a",37),b("click",function(){u(e);let t=m();return f(t.onActionBackToParent())}),T(1,"i",38),a()}}function Cl(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",39),b("click",function(){u(e);let t=m();return f(t.onActionButtonNewRow())}),T(2,"i",40)(3,"br"),a(),r(4,"p",41),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.ADD")," "))}function Tl(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",42),b("click",function(){u(e);let t=m();return f(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",43)(3,"br"),a(),r(4,"p",41),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.EDIT")," "))}function vl(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",44),b("click",function(){u(e);let t=m();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",45)(3,"br"),a(),r(4,"p",41),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.DELETE")," "))}function Il(n,l){if(n&1&&(r(0,"mat-header-cell",46),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function bl(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.id," ")}}function Ml(n,l){if(n&1&&(r(0,"mat-header-cell",46),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function kl(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),p(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function wl(n,l){if(n&1&&(r(0,"mat-header-cell",46),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function El(n,l){if(n&1&&T(0,"select",48),n&2){let e=m().$implicit,i=m();h("contentService",i.contentService)("row",e)("ngStyle",We(3,Sl,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function yl(n,l){if(n&1&&(r(0,"mat-cell",47),S(1,"statusCellClass"),T(2,"i",47),S(3,"statusIconClass"),v(4,El,1,5,"select",48),a()),n&2){let e=l.$implicit,i=m();h("ngClass",_(1,3,e.recordStatus)),o(2),h("ngClass",_(3,5,e.recordStatus)),o(2),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow?4:-1)}}function Al(n,l){if(n&1&&(r(0,"mat-header-cell",46),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.question==null?null:e.fieldsInfo.question.fieldTitle," ")}}function Dl(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.question," ")}}function Rl(n,l){n&1&&(r(0,"mat-header-cell"),c(1),S(2,"translate"),a()),n&2&&(o(),p(" ",_(2,1,"TITLE.OPTION")," "))}function xl(n,l){if(n&1&&(r(0,"mat-cell",49)(1,"button",50)(2,"mat-icon"),c(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=R(5);o(),h("matMenuTriggerFor",e)}}function Ll(n,l){n&1&&T(0,"mat-header-row")}function Bl(n,l){if(n&1){let e=M();r(0,"mat-row",51),b("click",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Z("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Pi=class Pi extends ct{constructor(e,i,t,s,C,d,K,Y,Re,xe,At,ft){super(e,new Tt,At,d,Y);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=C;this.tokenHelper=d;this.cdr=K;this.translate=Y;this.pageInfo=Re;this.cmsStoreService=xe;this.publicHelper=At;this.dialog=ft;this.requestDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new J;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","recordStatus","Question"];this.tabledisplayedColumnsMobileSource=["id","recordStatus","Question"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:$i=>this.onSubmitOptionsSearch($i)},this.filteModelContent.sortColumn="id",this.filteModelContent.sortType=H.Ascending}ngOnInit(){if(this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestDepartemenId>0){let e=new z;e.propertyName="LinkTicketingDepartemenId",e.value=this.requestDepartemenId,this.filteModelContent.filters.push(e)}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>X(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Tt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.categoryModelSelected&&this.categoryModelSelected.id>0){let t=new z;t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)}this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorGetAll(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=H.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Kn,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{parentId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new J,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(zn,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.question+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(C,d,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:d=>{d.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(C)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(t,d,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),C=new z;C.propertyName="recordStatus",C.value=Ue.Available,s.filters.push(C),this.contentService.ServiceGetCount(s).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};Pi.\u0275fac=function(i){return new(i||Pi)(g(xt),g(_e),g(G),g(Ft),g(ae),g(ce),g(V),g(F),g(st),g(se),g(N),g(ye))},Pi.\u0275cmp=B({type:Pi,selectors:[["app-application-app-list"]],standalone:!1,features:[W],decls:51,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],[1,"col-4"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Question"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),D("optionActionGuideNoticeDisplayChange",function(d){return u(s),A(t.viewGuideNotice,d)||(t.viewGuideNotice=d),f(d)}),b("optionOnActionButtonMemoRow",function(){return u(s),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),f(t.onActionButtonPrintRow())}),k(1,4),r(2,"app-ticketing-departemen-tree",5),b("optionChange",function(d){return u(s),f(t.onActionSelectorSelect(d))}),a(),w(),Le(3,6)(4,7),k(5,8),v(6,_l,2,0,"a",9),r(7,"a",10),b("click",function(){return u(s),f(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),b("click",function(){return u(s),f(t.onActionButtonReload())}),T(10,"i",12),a(),w(),k(11,13),r(12,"a",14),b("click",function(){return u(s),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),c(14),S(15,"translate"),a(),r(16,"a",14),b("click",function(){return u(s),f(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),c(18),S(19,"translate"),a(),w(),k(20,16),v(21,Cl,7,3,"div",17),w(),k(22,18),v(23,Tl,7,3,"div",17),v(24,vl,7,3,"div",17),w(),k(25,19),r(26,"app-cms-search-list",20),D("optionsChange",function(d){return u(s),A(t.optionsSearch,d)||(t.optionsSearch=d),f(d)}),a(),r(27,"app-cms-statist-list",20),D("optionsChange",function(d){return u(s),A(t.optionsStatist,d)||(t.optionsStatist=d),f(d)}),a(),w(),k(28,21),r(29,"mat-table",22,0),b("matSortChange",function(){u(s);let d=R(30);return f(t.onTableSortData(d))}),k(31,23),L(32,Il,2,1,"mat-header-cell",24)(33,bl,2,1,"mat-cell",25),w(),k(34,26),L(35,Ml,2,1,"mat-header-cell",24)(36,kl,4,5,"mat-cell",25),w(),k(37,27),L(38,wl,2,1,"mat-header-cell",24)(39,yl,5,7,"mat-cell",28),w(),k(40,29),L(41,Al,2,1,"mat-header-cell",24)(42,Dl,2,1,"mat-cell",25),w(),k(43,30),L(44,Rl,3,3,"mat-header-cell",31)(45,xl,6,1,"mat-cell",32),w(),L(46,Ll,1,0,"mat-header-row",33)(47,Bl,1,2,"mat-row",34),a(),w(),k(48,35),r(49,"mat-paginator",36,1),b("page",function(d){return u(s),f(t.onTablePageingData(d))}),a(),w(),a()}i&2&&(h("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.faq.list"),y("optionActionGuideNoticeDisplay",t.viewGuideNotice),h("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),I(t.requestDepartemenId>0?6:-1),o(4),Z("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),o(3),h("checked",t.optionsSearch.data.show),o(),p("",_(15,26,"ACTION.SEARCH")," "),o(3),h("checked",t.optionsStatist.data.show),o(),p("",_(19,28,"ACTION.STATIST")," "),o(3),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?21:-1),o(2),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?23:-1),o(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?24:-1),o(2),y("options",t.optionsSearch),o(),y("options",t.optionsStatist),o(2),h("dataSource",t.tableSource),o(17),h("matHeaderRowDef",t.tabledisplayedColumns),o(),h("matRowDefColumns",t.tabledisplayedColumns),o(2),h("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",qe(30,hl)))},dependencies:[Dt,je,Pe,He,U,Qe,Ke,ze,Je,Ye,Xe,Ze,et,ot,tt,$e,rt,it,nt,at,lt,dt,mt,pt,ut,Ot,Ht,Ve,O,It,Gt,Pt],encapsulation:2});var rn=Pi;function Vl(n,l){if(n&1&&(r(0,"div",4)(1,"button",5),T(2,"i",6),c(3),T(4,"i",7),a(),r(5,"div",8)(6,"div",9),T(7,"p",10),a()()()),n&2){let e=m().$implicit,i=m().$implicit;o(),qt("data-bs-target","#collapse"+e.id),o(2),p(" ",e.question," "),o(2),h("id",Wt("collapse",e.id)),qt("data-bs-parent","#accordion-"+i.id),o(2),h("innerHTML",e.answer,gn)}}function Fl(n,l){if(n&1&&v(0,Vl,8,6,"div",4),n&2){let e=l.$implicit,i=m().$implicit;I(e.linkTicketingDepartemenId===i.id?0:-1)}}function Nl(n,l){if(n&1&&(r(0,"div",1)(1,"div",2)(2,"h4"),c(3),a()(),r(4,"div",3),oi(5,Fl,1,1,null,null,ni),a()()),n&2){let e=l.$implicit,i=m();o(3),E(e.title),o(),h("id",Wt("accordion-",e.id)),o(),ri(i.dataModelResult.listItems)}}var Hi=class Hi{constructor(l,e,i,t,s,C,d,K,Y){this.ticketingFaqService=l;this.ticketingDepartemenService=e;this.publicHelper=i;this.cmsToastrService=t;this.cmsStoreService=s;this.router=C;this.cdr=d;this.translate=K;this.tokenHelper=Y;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new J;this.filterDataModelQueryBuilder=[];this.dataModelResult=new j;this.dataDepartemenModelResult=new j;this.optionsSearch=new Vn;this.optionsStatist=new Fn;this.tokenInfo=new zt;this.tableRowsSelected=[];this.tableRowSelected=new Tt;this.tableSource=new ko;this.unsubscribe=[];this.DataDepartemanLinkSelect=0;this.DataFaqLinkSelect=0;this.publicHelper.processService.cdr=this.cdr,this.filteModelContent.sortColumn="id",this.filteModelContent.sortType=H.Ascending}ngOnInit(){this.DataDepartemenGetAll(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>X(this,null,function*(){this.DataDepartemenGetAll(),this.tokenInfo=l,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetAll(){this.tableRowsSelected=[],this.onActionTableRowSelect(new Tt);let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(l,i,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let e=JSON.parse(JSON.stringify(this.filteModelContent));if(this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(e.filters=[...this.filterDataModelQueryBuilder]),this.categoryModelSelected&&this.categoryModelSelected.id>0){let i=new z;i.propertyName="LinkTicketingDepartemenId",i.value=this.categoryModelSelected.id,e.filters.push(i)}this.ticketingFaqService.ServiceGetAllOrigin(e).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),i.isSuccess?(this.dataModelResult=i,this.tableSource.data=i.listItems):this.cmsToastrService.typeErrorGetAll(i.errorMessage),this.publicHelper.processService.processStop(l)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(l)}})}DataDepartemenGetAll(){this.ticketingDepartemenService.ServiceGetAllOrigin(null).subscribe({next:l=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(l.access),l.isSuccess?this.dataDepartemenModelResult=l:this.cmsToastrService.typeErrorGetAll(l.errorMessage),Promise.resolve().then(()=>this.cdr.detectChanges())},error:l=>{this.cmsToastrService.typeError(l)}})}onTableSortData(l){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===l.active?this.tableSource.sort.start==="asc"?(l.start="desc",this.filteModelContent.sortColumn=l.active,this.filteModelContent.sortType=H.Descending):this.tableSource.sort.start==="desc"?(l.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=H.Ascending):l.start="desc":(this.filteModelContent.sortColumn=l.active,this.filteModelContent.sortType=H.Descending),this.tableSource.sort=l,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(l){this.filteModelContent.currentPageNumber=l.pageIndex+1,this.filteModelContent.rowPerPage=l.pageSize,this.DataGetAll()}onActionSelectorSelect(l){var e=this.filteModelContent.sortColumn,i=this.filteModelContent.sortType;this.filteModelContent=new J,this.filteModelContent.sortColumn=e,this.filteModelContent.sortType=i,this.categoryModelSelected=l,this.DataGetAll()}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(l){l&&l.length>0?this.filterDataModelQueryBuilder=[...l]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionTableRowSelect(l){this.tableRowSelected=l,l.expanded||(l.expanded=!1),l.expanded=!l.expanded}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}onActionButtonDeparteman(l){this.DataDepartemanLinkSelect=l,this.DataFaqLinkSelect=0}onActionButtonFaqTitle(l){this.DataFaqLinkSelect=l}};Hi.\u0275fac=function(e){return new(e||Hi)(g(xt),g(Oe),g(N),g(G),g(se),g(ae),g(V),g(F),g(ce))},Hi.\u0275cmp=B({type:Hi,selectors:[["app-ticketing-faq-originlist"]],standalone:!1,decls:3,vars:1,consts:[[3,"optionsInfoAreaId"],[1,"card","card-style"],[1,"content"],[1,"accordion",3,"id"],[1,"mb-0"],["type","button","data-bs-toggle","collapse",1,"btn","accordion-btn","no-effect","color-theme"],[1,"fa","fa-cloud","color-yellow-dark","me-2"],[1,"fa","fa-chevron-down","font-10","accordion-icon"],[1,"collapse",3,"id"],[1,"pt-1","pb-2","ps-3","pe-3"],[3,"innerHTML"]],template:function(e,i){e&1&&(T(0,"app-progress-spinner",0),oi(1,Nl,7,3,"div",1,ni)),e&2&&(h("optionsInfoAreaId",i.constructorInfoAreaId),o(),ri(i.dataDepartemenModelResult.listItems))},dependencies:[q],encapsulation:2});var Jn=Hi;var Ol=["*"];function Gl(n,l){if(n&1&&(r(0,"label",3),c(1),a()),n&2){let e=m();h("for",Wt("app-cms-site-selector-",e.id)),o(),E(e.optionLabel)}}function Pl(n,l){if(n&1&&(r(0,"mat-option",6)(1,"span"),c(2),a()()),n&2){let e=l.$implicit,i=m();h("value",e)("disabled",i.optionDisabled),o(2),E(i.displayOption(e))}}function Hl(n,l){n&1&&T(0,"i",7)}function ql(n,l){n&1&&T(0,"i",8)}function Wl(n,l){if(n&1){let e=M();r(0,"i",11),b("click",function(){u(e);let t=m();return f(t.onActionSelectClear())}),a()}}function jl(n,l){n&1&&(r(0,"em"),c(1),S(2,"translate"),a()),n&2&&(o(),p("(",_(2,1,"TITLE.Necessary"),")"))}var ti=class ti{constructor(l,e,i,t,s){this.coreEnumService=l;this.cdr=e;this.publicHelper=i;this.translate=t;this.categoryService=s;this.id=++ti.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new j;this.dataModelSelect=new gt;this.formControl=new Tn;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new ii;this.optionReload=()=>this.onActionButtonReload();this.optionItemCount=new ii;this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(pn(""),dn(1500),mn(),un(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return X(this,null,function*(){let e=new J;e.rowPerPage=20,e.accessLoad=!0;let i=new z;i.propertyName="title",i.value=l,i.searchType=pi.Contains,i.clauseType=jt.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new z,i.propertyName="id",i.value=l,i.searchType=pi.Equal,i.clauseType=jt.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield sn(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems?.length>0?this.optionItemCount.emit(s.listItems?.length):this.optionItemCount.emit(0),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe(cn(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="number"&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess&&(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item))}});return}if(typeof l==typeof gt){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new gt,this.loadOptions()}};ti.nextId=0,ti.\u0275fac=function(e){return new(e||ti)(g(Q),g(V),g(N),g(F),g(Lt))},ti.\u0275cmp=B({type:ti,selectors:[["app-ticketing-template-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionItemCount:"optionItemCount"},standalone:!1,ngContentSelectors:Ol,decls:16,vars:23,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],[1,"color-highlight",3,"for"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=M();Sn(),r(0,"div",1),T(1,"app-progress-spinner",2),v(2,Gl,2,3,"label",3),T(3,"input",4),r(4,"mat-autocomplete",5,0),b("optionSelected",function(C){return u(t),f(i.onActionSelect(C.option.value))}),oi(6,Pl,3,3,"mat-option",6,ni),S(8,"async"),a(),v(9,Hl,1,0,"i",7),v(10,ql,1,0,"i",8),v(11,Wl,1,0,"i",9),r(12,"i",10),S(13,"translate"),b("click",function(){return u(t),f(i.onActionButtonReload())}),a(),v(14,jl,3,3,"em"),_n(15),a()}if(e&2){let t=R(5);o(),h("optionsInfoAreaId",i.constructorInfoAreaId),o(),I((i.optionLabel==null?null:i.optionLabel.length)>0?2:-1),o(),h("placeholder",x(i.optionPlaceholder))("id",Wt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),qt("disabled",i.optionDisabled?!0:null),o(),h("displayWith",i.displayFn),o(2),ri(_(8,19,i.filteredOptions)),o(3),I(i.formControl.valid?-1:9),o(),I(i.optionRequired&&i.formControl.valid?10:-1),o(),I((i.dataModelSelect==null?null:i.dataModelSelect.id)>0?11:-1),o(),Z("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),h("title",x(_(13,21,"ACTION.RELOAD"))),o(2),I(i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0)?14:-1)}},dependencies:[ie,ne,Ie,vn,Mn,In,kn,U,q,Ve,O],encapsulation:2});var Yn=ti;var Ql=["vform"];function Kl(n,l){n&1&&(r(0,"mat-error"),c(1),S(2,"translate"),r(3,"strong"),c(4),S(5,"translate"),a()()),n&2&&(o(),p(" ",_(2,2,"AUTH.INPUT.FULLNAME")," "),o(3),E(_(5,4,"MESSAGE.required")))}function zl(n,l){n&1&&(r(0,"mat-error"),c(1),S(2,"translate"),r(3,"strong"),c(4),S(5,"translate"),a()()),n&2&&(o(),p(" ",_(2,2,"AUTH.INPUT.MOBILE")," "),o(3),E(_(5,4,"MESSAGE.required")))}function Jl(n,l){n&1&&(r(0,"mat-error"),c(1),S(2,"translate"),r(3,"strong"),c(4),S(5,"translate"),a()()),n&2&&(o(),p(" ",_(2,2,"AUTH.INPUT.EMAIL")," "),o(3),E(_(5,4,"MESSAGE.required")))}function Yl(n,l){if(n&1){let e=M();r(0,"div",35)(1,"label"),c(2),S(3,"translate"),a(),r(4,"app-ticketing-template-selector",43),b("optionItemCount",function(){u(e);let t=m(2);return f(t.templateItemCount)})("optionChange",function(t){u(e);let s=m(2);return f(s.onActionSelectorSelect(t))}),a()()}n&2&&(o(2),E(_(3,1,"TITLE.Categories")))}function Xl(n,l){n&1&&(r(0,"mat-error"),c(1),S(2,"translate"),r(3,"strong"),c(4),S(5,"translate"),a()()),n&2&&(o(),p(" ",_(2,2,"AUTH.INPUT.YOURMEESAGE")," "),o(3),E(_(5,4,"MESSAGE.required")))}function Zl(n,l){if(n&1){let e=M();r(0,"div",8),T(1,"app-cms-form-result-message",28),r(2,"form",29,0),b("ngSubmit",function(){u(e);let t=m();return f(t.onFormSubmit())}),r(4,"fieldset")(5,"div",30)(6,"label",31),c(7),S(8,"translate"),r(9,"span"),c(10),S(11,"translate"),a()(),r(12,"input",32,1),S(14,"translate"),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.fullName,t)||(s.dataModel.fullName=t),f(t)}),a(),v(15,Kl,6,6,"mat-error"),a(),r(16,"div",30)(17,"label",33),c(18),S(19,"translate"),r(20,"span"),c(21),S(22,"translate"),a()(),r(23,"input",34,2),S(25,"translate"),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),f(t)}),a(),v(26,zl,6,6,"mat-error"),a(),r(27,"div",35)(28,"label",36),c(29),S(30,"translate"),r(31,"span"),c(32),S(33,"translate"),a()(),r(34,"input",37,3),S(36,"translate"),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.email,t)||(s.dataModel.email=t),f(t)}),a(),v(37,Jl,6,6,"mat-error"),a(),v(38,Yl,5,3,"div",35),r(39,"div",38)(40,"label",39),c(41),S(42,"translate"),r(43,"span"),c(44),S(45,"translate"),a()(),r(46,"textarea",40,4),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),f(t)}),a(),v(48,Xl,6,6,"mat-error"),a(),r(49,"div",41),T(50,"input",42),S(51,"translate"),a()()()()}if(n&2){let e=R(13),i=R(24),t=R(35),s=R(47),C=m();o(),h("formInfo",C.formInfo),o(6),p("",_(8,26,"AUTH.INPUT.FULLNAME"),":"),o(3),p("( ",_(11,28,"TITLE.Necessary")," )"),o(2),h("placeholder",x(_(14,30,"TITLE.Enter_your_first_and_last_name"))),y("ngModel",C.dataModel.fullName),o(3),I(e.errors!=null&&e.errors.required?15:-1),o(3),p("",_(19,32,"AUTH.INPUT.MOBILE"),":"),o(3),p("( ",_(22,34,"TITLE.Necessary")," )"),o(2),h("placeholder",x(_(25,36,"TITLE.Enter_your_first_and_last_name"))),y("ngModel",C.dataModel.phoneNo),o(3),I(i.errors!=null&&i.errors.required?26:-1),o(3),p("",_(30,38,"AUTH.INPUT.EMAIL"),":"),o(3),p("( ",_(33,40,"TITLE.Necessary")," )"),o(2),h("placeholder",x(_(36,42,"TITLE.Enter_email"))),y("ngModel",C.dataModel.email),o(3),I(t.errors!=null&&t.errors.required?37:-1),o(),I(C.templateItemCount>0?38:-1),o(3),p("",_(42,44,"AUTH.INPUT.YOURMEESAGE"),":"),o(3),p("( ",_(45,46,"TITLE.Necessary")," )"),o(2),y("ngModel",C.dataModel.htmlBody),o(2),I(s.errors!=null&&s.errors.required?48:-1),o(2),h("value",x(_(51,48,"ACTION.SEND")))}}function $l(n,l){if(n&1&&(r(0,"div",27)(1,"div",11)(2,"div",12)(3,"h1",13),T(4,"i",14),a(),r(5,"h2",15),c(6),S(7,"translate"),a(),r(8,"p",16),c(9),S(10,"translate"),a(),r(11,"p",15),c(12),S(13,"translate"),a(),T(14,"div",44),a()()()),n&2){let e=m();o(6),p(" ",_(7,5,"TITLE.Your_message_has_been_registered_in_the_system")," "),o(3),p(" ",_(10,7,"TITLE.Note_the_tracking_code_for_further_tracking")," "),o(3),co(" ",_(13,9,"TITLE.Tracking_Code")," : ",e.dataModelResult.item.id," "),o(2),h("innerHTML",e.dataModelResult.item==null||e.dataModelResult.item.virtual_Departemen==null?null:e.dataModelResult.item.virtual_Departemen.DefaultAnswerBody,gn)}}var qi=class qi extends vt{constructor(e,i,t,s,C,d,K,Y,Re,xe,At){super(K,new Fe,C,xe);this.tokenHelper=e;this.cmsStoreService=i;this.activatedRoute=t;this.coreAuthService=s;this.publicHelper=C;this.coreEnumService=d;this.ticketingTaskService=K;this.cmsToastrService=Y;this.router=Re;this.translate=xe;this.cdr=At;this.requestLinkDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.unsubscribe=[];this.fieldsInfo=new Map;this.formInfo=new oe;this.dataModel=new So;this.dataModelResult=new j;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.templateItemCount=0;this.mapOptonCenter=new Vt;this.captchaModel=new uo;this.countAutoCaptchaOrder=1;this.enumFormSubmitedStatus=Bt;this.onCaptchaOrderInProcess=!1;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&(this.dataModel.fullName=this.tokenInfo.user.lastName,this.dataModel.email=this.tokenInfo.user.email,this.dataModel.phoneNo=this.tokenInfo.user.mobile),this.unsubscribe.push(this.cmsStoreService.getState(ft=>ft.tokenInfoStore).subscribe(ft=>X(this,null,function*(){this.tokenInfo=ft,this.dataModel.fullName=this.tokenInfo.user.lastName,this.dataModel.email=this.tokenInfo.user.email,this.dataModel.phoneNo=this.tokenInfo.user.mobile})))}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.onCaptchaOrder(),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataAddContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.captchaKey=this.captchaModel.key,this.ticketingTaskService.ServiceContactUS(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.formInfo.submitResultMessageType=1,this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd()):(this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorAdd(i.errorMessage)),this.publicHelper.processService.processStop(e),this.cdr.markForCheck()},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorAdd(i),this.cdr.markForCheck()}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_template_is_not_clear").subscribe(i=>{this.cmsToastrService.typeWarningSelected(i)});return}this.dataModel.htmlBody=e.htmlBody}onActionBackToParent(){this.router.navigate(["/application/app/"])}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}onCaptchaOrder(){this.onCaptchaOrderInProcess||(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModel.captchaText="",this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{if(e.isSuccess){this.captchaModel=e.item,this.expireDate=e.item.expire;let i=new Date,s=new Date(e.item.expire).getTime()-i.getTime();this.countAutoCaptchaOrder<10&&(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,setTimeout(()=>{this.onCaptchaOrder()},s))}else this.cmsToastrService.typeErrorGetCpatcha(e.errorMessage);this.onCaptchaOrderInProcess=!1},error:e=>{this.onCaptchaOrderInProcess=!1}}))}};qi.\u0275fac=function(i){return new(i||qi)(g(ce),g(se),g(_e),g(go),g(N),g(Q),g(Ge),g(G),g(ae),g(F),g(V))},qi.\u0275cmp=B({type:qi,selectors:[["app-ticketing-task-contactus"]],viewQuery:function(i,t){if(i&1&&$(Ql,5),i&2){let s;ee(s=te())&&(t.formGroup=s.first)}},standalone:!1,features:[W],decls:39,vars:21,consts:[["vform","ngForm"],["FullName",""],["phoneNo",""],["Email",""],["HtmlBody",""],[1,"page-content","pb-3"],[1,"card","card-full","rounded-m","pb-4"],[1,"drag-line"],[1,"content"],[1,"font-600","mb-0","color-highlight"],[1,"form-sent","disabled"],[1,"card","card-style"],[1,"shadow-l","rounded-m","gradient-green","ms-n1","mb-0"],[1,"color-white","text-center","pt-4"],[1,"fa","fa-check-circle","fa-3x","shadow-s","scale-box","rounded-circle"],[1,"color-white","bold","text-center","pt-3"],[1,"color-white","pb-4","text-center","mt-n2","mb-0"],[1,"content","text-center"],[1,"boxed-text-xl"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-facebook"],[1,"fab","fa-facebook-f"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-instagram","ms-3","me-3"],[1,"fab","fa-instagram"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-twitter"],[1,"fab","fa-twitter"],[3,"optionsInfoAreaId"],[1,"card","contact-form"],[1,"form-sent"],[3,"formInfo"],[3,"ngSubmit"],[1,"form-field","form-name"],["for","contactNameField",1,"contactNameField","color-theme"],["type","text","name","dataModel.fullName","id","contactNameField","required","",1,"round-small",2,"text-align","center !important",3,"ngModelChange","ngModel","placeholder"],["for","contactPhoneField",1,"contactNameField","color-theme"],["type","text","name","dataModel.phoneNo","id","contactPhoneField","required","",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],[1,"form-field","form-email"],["for","contactEmailField",1,"contactEmailField","color-theme"],["type","email","cmsKeyboardForce","en","name","dataModel.email","id","contactEmailField",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],[1,"form-field","form-text"],["for","contactMessageTextarea",1,"contactMessageTextarea","color-theme"],["name","dataModel.htmlBody","id","contactMessageTextarea","rows","3","required","",1,"round-small",3,"ngModelChange","ngModel"],[1,"form-button"],["type","submit","data-formId","contactForm",1,"btn","bg-highlight","font-700","btn-m","btn-full","rounded-sm","shadow-xl","contactSubmitButton",3,"value"],[3,"optionItemCount","optionChange"],[3,"innerHTML"]],template:function(i,t){i&1&&(r(0,"div",5)(1,"div",6),T(2,"div",7),r(3,"div",8)(4,"p",9),c(5),S(6,"translate"),a(),r(7,"p"),c(8),S(9,"translate"),a()(),r(10,"div",10)(11,"div",11)(12,"div",12)(13,"h1",13),T(14,"i",14),a(),r(15,"h2",15),c(16),S(17,"translate"),a(),r(18,"p",16),c(19),S(20,"translate"),a()()(),r(21,"div",11)(22,"div",17)(23,"h2"),c(24),S(25,"translate"),a(),r(26,"p",18),c(27),S(28,"translate"),a(),r(29,"a",19),T(30,"i",20),a(),r(31,"a",21),T(32,"i",22),a(),r(33,"a",23),T(34,"i",24),a()()()(),T(35,"app-progress-spinner",25),r(36,"div",26),v(37,Zl,52,50,"div",8),a(),v(38,$l,15,11,"div",27),a()()),i&2&&(o(5),p(" ",_(6,9,"TITLE.Send_us_your_questions")," "),o(3),p(" ",_(9,11,"TITLE.GetInTouchWithUs")," "),o(8),p(" ",_(17,13,"TITLE.MESSAGE_SENT")," "),o(3),p(" ",_(20,15,"TITLE.WE_WILL_CONTACT_YOU_SOON")," "),o(5),E(_(25,17,"TITLE.LETS_BE_SOCIAL")),o(3),p(" ",_(28,19,"TITLE.SOCIAL_MEDIA_PLATFORMS")," "),o(8),h("optionsInfoAreaId",t.constructorInfoAreaId),o(2),I((t.formInfo==null?null:t.formInfo.submitResultMessageType)!==t.enumFormSubmitedStatus.Success?37:-1),o(),I((t.formInfo==null?null:t.formInfo.submitResultMessageType)===t.enumFormSubmitedStatus.Success?38:-1))},dependencies:[ve,ie,ne,Ce,Ie,ge,Te,Ee,q,de,ui,Yn,O],encapsulation:2});var Xn=qi;var es=["vform"];function ts(n,l){if(n&1){let e=M();r(0,"div",15)(1,"button",16),b("click",function(){u(e);let t=m(2);return f(t.onFormCancel())}),T(2,"i",17),c(3),S(4,"translate"),a()()}n&2&&(o(3),p(" ",_(4,1,"ACTION.CANCEL")," "))}function is(n,l){if(n&1&&(r(0,"div",8)(1,"table",9)(2,"thead",10)(3,"tr"),T(4,"th")(5,"th"),a()(),r(6,"tbody")(7,"tr")(8,"td"),c(9),a(),r(10,"td"),c(11),a()(),r(12,"tr")(13,"td"),c(14),a(),r(15,"td"),c(16),a()(),r(17,"tr")(18,"td"),c(19),a(),r(20,"td"),c(21),S(22,"enums"),a()(),r(23,"tr")(24,"td"),c(25),a(),r(26,"td"),c(27),a()(),r(28,"tr")(29,"td"),c(30),S(31,"translate"),a(),r(32,"td"),c(33),a()(),r(34,"tr")(35,"td"),c(36),a(),r(37,"td"),c(38),a()(),r(39,"tr")(40,"td"),c(41),a(),r(42,"td"),c(43),a()(),r(44,"tr")(45,"td"),c(46),a(),r(47,"td"),c(48),S(49,"localeDate"),a()(),r(50,"tr")(51,"td"),c(52),a(),r(53,"td"),c(54),S(55,"localeDate"),a()(),r(56,"tr")(57,"td"),c(58),a(),r(59,"td"),c(60),a()(),r(61,"tr")(62,"td"),c(63),a(),r(64,"td"),c(65),a()(),r(66,"tr")(67,"td"),c(68),a(),r(69,"td"),c(70),a()(),r(71,"tr")(72,"td"),c(73),a(),r(74,"td"),c(75),a()(),r(76,"tr")(77,"td"),c(78),a(),r(79,"td"),c(80),a()()()(),T(81,"hr"),a(),T(82,"div",11),r(83,"div",12),T(84,"app-cms-form-result-message",13),a(),r(85,"div",14),v(86,ts,5,3,"div",15),a()),n&2){let e=m();o(9),E(e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle),o(2),E(e.dataModel.id),o(3),E(e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle),o(2),E(e.dataModel.linkSiteId),o(3),E(e.fieldsInfo.ticketStatus==null?null:e.fieldsInfo.ticketStatus.fieldTitle),o(2),p(" ",mi(22,30,e.dataModel.ticketStatus,e.dataModelEnumTicketStatusResult.listItems)," "),o(4),E(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),o(2),E(e.dataModel.title),o(3),E(_(31,33,"TITLE.Message_Text")),o(3),E(e.dataModel.htmlBody),o(3),E(e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle),o(2),E(e.dataModel.fullName),o(3),E(e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle),o(2),E(e.dataModel.phoneNo),o(3),E(e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle),o(2),E(_(49,35,e.dataModel.createdDate)),o(4),E(e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle),o(2),E(_(55,37,e.dataModel.updatedDate)),o(4),E(e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle),o(2),E(e.dataModel.email),o(3),E(e.fieldsInfo.linkCmsUserId==null?null:e.fieldsInfo.linkCmsUserId.fieldTitle),o(2),E(e.dataModel.linkCmsUserId),o(3),E(e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle),o(2),E(e.dataModel.linkMemberId),o(3),p(" ",e.fieldsInfo.linkTicketingDepartemenId==null?null:e.fieldsInfo.linkTicketingDepartemenId.fieldTitle," "),o(2),E(e.dataModel.linkTicketingDepartemenId),o(3),p(" ",e.fieldsInfo.ticketingDepartemenDefaultAnswerBody==null?null:e.fieldsInfo.ticketingDepartemenDefaultAnswerBody.fieldTitle," "),o(2),E(e.dataModel.ticketingDepartemenDefaultAnswerBody),o(4),h("formInfo",e.formInfo),o(2),I(e.formInfo.submitButtonEnabled&&!e.publicHelper.processService.process.inRunAll?86:-1)}}var Wi=class Wi{constructor(l,e,i,t,s,C,d,K,Y,Re,xe){this.data=l;this.dialogRef=e;this.coreEnumService=i;this.ticketingTaskService=t;this.cmsToastrService=s;this.tokenHelper=C;this.cmsStoreService=d;this.cdr=K;this.ticketingEnumService=Y;this.publicHelper=Re;this.translate=xe;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new zt;this.dataModelResult=new j;this.dataModel=new Fe;this.formInfo=new oe;this.dataModelEnumTicketStatusResult=new j;this.fieldsInfo=new Map;this.dataTaskReadedResult=new _t;this.fileManagerOpenForm=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(l=>{this.formInfo.formTitle=l}),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>X(this,null,function*(){this.tokenInfo=l}))),this.getEnumTicketStatus()}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:l=>{this.dataModelEnumTicketStatusResult=l}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage="";let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.title+" ( "+e.item.id+" ) ",this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.dataTaskReaded(this.requestId)):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}dataTaskReaded(l){this.ticketingTaskService.ServiceTaskReaded(l).subscribe({next:e=>{e.isSuccess&&(this.dataTaskReadedResult=e)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Wi.\u0275fac=function(e){return new(e||Wi)(g(he),g(le),g(Q),g(Ge),g(G),g(ce),g(se),g(V),g(Jt),g(N),g(F))},Wi.\u0275cmp=B({type:Wi,selectors:[["app-ticketing-task-view"]],viewQuery:function(e,i){if(e&1&&$(es,5),e&2){let t;ee(t=te())&&(i.formGroup=t.first)}},standalone:!1,decls:12,vars:4,consts:[[1,"card","card-style","loader-container",2,"height","100vh","overflow-y","auto"],[3,"optionsInfoAreaId"],[1,"menu-title"],[1,"color-highlight"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[1,"ntk-cms-html-card-header"],[1,"table","table-striped","center"],[2,"background-color","#81d4fa"],["dir","rtl",1,"ntk-cms-html-card-body","ntk-allow-text-selection"],[1,"ntk-cms-html-card-message"],[3,"formInfo"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(r(0,"div",0),T(1,"app-progress-spinner",1),r(2,"div",2)(3,"p",3),c(4),a(),r(5,"a",4),b("click",function(){return i.onFormCancel()}),T(6,"i",5),a(),T(7,"hr"),a(),r(8,"div",6)(9,"p",7),c(10),a(),v(11,is,87,39),a()()),e&2&&(o(),h("optionsInfoAreaId",i.constructorInfoAreaId),o(3),E(i.formInfo.formTitle),o(6),p(" ",i.formInfo.formDescription," "),o(),I(i.publicHelper.processService.process.inRunAll?-1:11))},dependencies:[To,q,de,O,fi,bt],encapsulation:2});var ji=Wi;var ns=()=>[5,10,20,100],os=n=>({display:n});function rs(n,l){if(n&1){let e=M();r(0,"a",38),b("click",function(){u(e);let t=m();return f(t.onActionBackToParent())}),T(1,"i",39),a()}}function as(n,l){if(n&1){let e=M();r(0,"div",16)(1,"a",40),b("click",function(){u(e);let t=m();return f(t.onActionButtonNewRow())}),T(2,"i",41)(3,"br"),a(),r(4,"p",42),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.ADD")," "))}function ls(n,l){if(n&1){let e=M();r(0,"div",16)(1,"a",9),b("click",function(){u(e);let t=m();return f(t.onActionButtonAnswerList())}),T(2,"i",43)(3,"br"),a(),r(4,"p",42),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.ANSWERS")," "))}function ss(n,l){if(n&1){let e=M();r(0,"div",16)(1,"a",44),b("click",function(){u(e);let t=m();return f(t.onActionButtonAnswerList(t.tableRowSelected))}),T(2,"i",43),a(),r(3,"p",42),c(4),S(5,"translate"),a()()}n&2&&(o(4),p(" ",_(5,1,"ACTION.ANSWERS")," "))}function cs(n,l){if(n&1){let e=M();r(0,"div",16)(1,"a",45),b("click",function(){u(e);let t=m();return f(t.onActionButtonViewRow(t.tableRowSelected))}),T(2,"i",46),a(),r(3,"p",42),c(4),S(5,"translate"),a()()}n&2&&(o(4),p(" ",_(5,1,"ACTION.VIEW")," "))}function ds(n,l){if(n&1&&(r(0,"mat-header-cell",47),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function ms(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.id," ")}}function ps(n,l){if(n&1&&(r(0,"mat-header-cell",47),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function us(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),p(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function fs(n,l){if(n&1&&(r(0,"mat-header-cell",47),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function gs(n,l){if(n&1&&T(0,"select",49),n&2){let e=m().$implicit,i=m();h("contentService",i.contentService)("row",e)("ngStyle",We(3,os,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function hs(n,l){if(n&1&&(r(0,"mat-cell",48),S(1,"statusCellClass"),T(2,"i",48),S(3,"statusIconClass"),v(4,gs,1,5,"select",49),a()),n&2){let e=l.$implicit,i=m();h("ngClass",_(1,3,e.recordStatus)),o(2),h("ngClass",_(3,5,e.recordStatus)),o(2),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow?4:-1)}}function Ss(n,l){if(n&1&&(r(0,"mat-header-cell",47),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function _s(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.title," ")}}function Cs(n,l){if(n&1&&(r(0,"mat-header-cell",47),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Ts(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),p(" ",_(2,1,e.createdDate)," ")}}function vs(n,l){if(n&1&&(r(0,"mat-header-cell",47),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Is(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),p(" ",_(2,1,e.updatedDate)," ")}}function bs(n,l){n&1&&(r(0,"mat-header-cell"),c(1),S(2,"translate"),a()),n&2&&(o(),p(" ",_(2,1,"TITLE.OPTION")," "))}function Ms(n,l){if(n&1&&(r(0,"mat-cell",50)(1,"button",51)(2,"mat-icon"),c(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=R(5);o(),h("matMenuTriggerFor",e)}}function ks(n,l){n&1&&T(0,"mat-header-row")}function ws(n,l){if(n&1){let e=M();r(0,"mat-row",52),b("click",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Z("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Ui=class Ui extends ct{constructor(e,i,t,s,C,d,K,Y,Re,xe,At){super(e,new Fe,xe,C,K);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.router=s;this.tokenHelper=C;this.cdr=d;this.translate=K;this.pageInfo=Y;this.cmsStoreService=Re;this.publicHelper=xe;this.dialog=At;this.requestDepartemenId=0;this.requestLinkCmsUserId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new J;this.filterDataModelQueryBuilder=[];this.optionsSearch=new Vn;this.optionsStatist=new Fn;this.tokenInfo=new zt;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","recordStatus","createdDate","updatedDate"];this.tabledisplayedColumnsMobileSource=["id","recordStatus","createdDate","updatedDate"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:ft=>this.onSubmitOptionsSearch(ft)},this.filteModelContent.sortColumn="id",this.filteModelContent.sortType=H.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>X(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Fe);let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.requestLinkCmsUserId>0&&(t.propertyName="LinkCmsUserId",t.value=this.requestLinkCmsUserId,i.filters.push(t)),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=H.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){this.router.navigate(["/ticketing/contactus/"])}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new J,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(ji,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionButtonAnswerList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(t,d,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),C=new z;C.propertyName="recordStatus",C.value=Ue.Available,s.filters.push(C),this.contentService.ServiceGetCount(s).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};Ui.\u0275fac=function(i){return new(i||Ui)(g(Ge),g(_e),g(G),g(ae),g(ce),g(V),g(F),g(st),g(se),g(N),g(ye))},Ui.\u0275cmp=B({type:Ui,selectors:[["app-ticketing-task-contact-us-list"]],standalone:!1,features:[W],decls:57,vars:32,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],[1,"col-4"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","createdDate"],["matColumnDef","updatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["mat-menu-item","","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-m","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),D("optionActionGuideNoticeDisplayChange",function(d){return u(s),A(t.viewGuideNotice,d)||(t.viewGuideNotice=d),f(d)}),b("optionOnActionButtonMemoRow",function(){return u(s),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),f(t.onActionButtonPrintRow())}),Le(1,4)(2,5)(3,6),k(4,7),v(5,rs,2,0,"a",8),r(6,"a",9),b("click",function(){return u(s),f(t.viewGuideNotice=!t.viewGuideNotice)}),T(7,"i",10),a(),r(8,"a",9),b("click",function(){return u(s),f(t.onActionButtonReload())}),T(9,"i",11),a(),w(),k(10,12),r(11,"a",13),b("click",function(){return u(s),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(12,"mat-slide-toggle",14),c(13),S(14,"translate"),a(),r(15,"a",13),b("click",function(){return u(s),f(t.onActionButtonStatist())}),T(16,"mat-slide-toggle",14),c(17),S(18,"translate"),a(),w(),k(19,15),v(20,as,7,3,"div",16),v(21,ls,7,3,"div",16),w(),k(22,17),v(23,ss,6,3,"div",16),v(24,cs,6,3,"div",16),w(),k(25,18),r(26,"app-cms-search-list",19),D("optionsChange",function(d){return u(s),A(t.optionsSearch,d)||(t.optionsSearch=d),f(d)}),a(),r(27,"app-cms-statist-list",19),D("optionsChange",function(d){return u(s),A(t.optionsStatist,d)||(t.optionsStatist=d),f(d)}),a(),w(),k(28,20),r(29,"mat-table",21,0),b("matSortChange",function(){u(s);let d=R(30);return f(t.onTableSortData(d))}),k(31,22),L(32,ds,2,1,"mat-header-cell",23)(33,ms,2,1,"mat-cell",24),w(),k(34,25),L(35,ps,2,1,"mat-header-cell",23)(36,us,4,5,"mat-cell",24),w(),k(37,26),L(38,fs,2,1,"mat-header-cell",23)(39,hs,5,7,"mat-cell",27),w(),k(40,28),L(41,Ss,2,1,"mat-header-cell",23)(42,_s,2,1,"mat-cell",24),w(),k(43,29),L(44,Cs,2,1,"mat-header-cell",23)(45,Ts,3,3,"mat-cell",24),w(),k(46,30),L(47,vs,2,1,"mat-header-cell",23)(48,Is,3,3,"mat-cell",24),w(),k(49,31),L(50,bs,3,3,"mat-header-cell",32)(51,Ms,6,1,"mat-cell",33),w(),L(52,ks,1,0,"mat-header-row",34)(53,ws,1,2,"mat-row",35),a(),w(),k(54,36),r(55,"mat-paginator",37,1),b("page",function(d){return u(s),f(t.onTablePageingData(d))}),a(),w(),a()}i&2&&(h("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.task.contactus-list"),y("optionActionGuideNoticeDisplay",t.viewGuideNotice),h("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(5),I(t.requestDepartemenId>0?5:-1),o(4),Z("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),o(3),h("checked",t.optionsSearch.data.show),o(),p("",_(14,27,"ACTION.SEARCH")," "),o(3),h("checked",t.optionsStatist.data.show),o(),p("",_(18,29,"ACTION.STATIST")," "),o(3),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?20:-1),o(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0?21:-1),o(2),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow?23:-1),o(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0?24:-1),o(2),y("options",t.optionsSearch),o(),y("options",t.optionsStatist),o(2),h("dataSource",t.tableSource),o(23),h("matHeaderRowDef",t.tabledisplayedColumns),o(),h("matRowDefColumns",t.tabledisplayedColumns),o(2),h("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",qe(31,ns)))},dependencies:[Dt,je,Pe,He,U,Qe,Mo,Ke,ze,Je,Ye,Xe,Ze,et,ot,tt,$e,rt,it,nt,at,lt,dt,mt,pt,ut,Ot,Ve,O,It,bt,Gt,Pt],encapsulation:2});var an=Ui;var As=["vform"];function Ds(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",24),D("modelChange",function(t){u(e);let s=m();return A(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),a()}if(n&2){let e=m();y("model",e.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Rs(n,l){n&1&&T(0,"i",27)}function xs(n,l){n&1&&T(0,"i",28)}function Ls(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function Bs(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",25),c(2),a(),r(3,"input",26,2),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.fullName,t)||(s.dataModel.fullName=t),f(t)}),a(),v(5,Rs,1,0,"i",27),v(6,xs,1,0,"i",28),r(7,"em"),c(8),a(),v(9,Ls,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle)),y("ngModel",i.dataModel.fullName),h("disabled",!(i.fieldsInfo.fullName!=null&&i.fieldsInfo.fullName.accessAddField)),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function Vs(n,l){n&1&&T(0,"i",27)}function Fs(n,l){n&1&&T(0,"i",28)}function Ns(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function Os(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",29),c(2),a(),r(3,"input",30,3),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.title,t)||(s.dataModel.title=t),f(t)}),a(),v(5,Vs,1,0,"i",27),v(6,Fs,1,0,"i",28),r(7,"em"),c(8),a(),v(9,Ns,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),y("ngModel",i.dataModel.title),h("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function Gs(n,l){n&1&&T(0,"i",27)}function Ps(n,l){n&1&&T(0,"i",28)}function Hs(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function qs(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",31),c(2),a(),r(3,"input",32,4),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),f(t)}),a(),v(5,Gs,1,0,"i",27),v(6,Ps,1,0,"i",28),r(7,"em"),c(8),a(),v(9,Hs,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle)),y("ngModel",i.dataModel.phoneNo),h("disabled",!(i.fieldsInfo.phoneNo!=null&&i.fieldsInfo.phoneNo.accessAddField)),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function Ws(n,l){n&1&&T(0,"i",27)}function js(n,l){n&1&&T(0,"i",28)}function Us(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function Qs(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",33),c(2),a(),r(3,"input",34,5),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.email,t)||(s.dataModel.email=t),f(t)}),a(),v(5,Ws,1,0,"i",27),v(6,js,1,0,"i",28),r(7,"em"),c(8),a(),v(9,Us,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle)),y("ngModel",i.dataModel.email),h("disabled",!(i.fieldsInfo.email!=null&&i.fieldsInfo.email.accessAddField)),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function Ks(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",35),c(2),S(3,"translate"),a(),r(4,"textarea",36,6),S(6,"translate"),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),f(t)}),c(7,"                      "),a(),r(8,"em"),c(9),a()()}if(n&2){let e=R(5),i=m();o(2),E(_(3,6,"TITLE.Description")),o(2),h("placeholder",x(_(6,8,"TITLE.Answer_Text"))),y("ngModel",i.dataModel.htmlBody),h("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)),o(5),p("",e.value.length," / 1000")}}function zs(n,l){if(n&1){let e=M();r(0,"div",21)(1,"label",37),c(2),a(),r(3,"input",38),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),f(t)}),a(),T(4,"mat-datepicker-toggle",39)(5,"mat-datepicker",40,7),a()}if(n&2){let e=R(6),i=m();o(2),E(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),o(),h("matDatepicker",e),y("ngModel",i.dataModel.expireDate),o(),h("for",e)}}function Js(n,l){if(n&1){let e=M();r(0,"div",22)(1,"button",41),b("click",function(){u(e);let t=m();return f(t.onActionBackToParent())}),c(2),S(3,"translate"),a(),r(4,"button",42),c(5),S(6,"translate"),a()()}if(n&2){m();let e=R(10);o(2),p(" ",_(3,3,"ACTION.BACK")," "),o(2),h("disabled",!e.form.valid),o(),p(" ",_(6,5,"ACTION.NEXT")," ")}}function Ys(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",43),c(2),a(),r(3,"input",44,8),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.userIpAddress,t)||(s.dataModel.userIpAddress=t),f(t)}),a(),r(5,"em"),c(6),a()()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle)),y("ngModel",i.dataModel.userIpAddress),h("disabled",!(i.fieldsInfo.userIpAddress!=null&&i.fieldsInfo.userIpAddress.accessAddField)),o(3),p("",e.value.length," / 100")}}function Xs(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",45),c(2),a(),r(3,"input",46,9),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.deviceInformation,t)||(s.dataModel.deviceInformation=t),f(t)}),a(),r(5,"em"),c(6),a()()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.deviceInformation==null?null:i.fieldsInfo.deviceInformation.fieldTitle)),y("ngModel",i.dataModel.deviceInformation),h("disabled",!(i.fieldsInfo.deviceInformation!=null&&i.fieldsInfo.deviceInformation.accessAddField)),o(3),p("",e.value.length," / 100")}}function Zs(n,l){if(n&1&&(r(0,"div",22)(1,"button",47),c(2),S(3,"translate"),a(),r(4,"button",48),c(5),S(6,"translate"),a()()),n&2){m();let e=R(10);o(2),p(" ",_(3,3,"ACTION.BEFOR")," "),o(2),h("disabled",!e.form.valid),o(),p(" ",_(6,5,"ACTION.SAVE")," ")}}var Qi=class Qi extends vt{constructor(e,i,t,s,C,d,K,Y,Re){super(s,new Fe,i,Re);this.activatedRoute=e;this.publicHelper=i;this.coreEnumService=t;this.ticketingTaskService=s;this.cmsToastrService=C;this.dialogRef=d;this.router=K;this.cdr=Y;this.translate=Re;this.requestLinkDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.formInfo=new oe;this.dataModel=new Fe;this.dataModelResult=new j;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new Vt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTaskService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>this.router.navigate(["/ticketing/task/"]),1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}};Qi.\u0275fac=function(i){return new(i||Qi)(g(_e),g(N),g(Q),g(Ge),g(G),g(le),g(ae),g(V),g(F))},Qi.\u0275cmp=B({type:Qi,selectors:[["app-ticketing-task-add"]],viewQuery:function(i,t){if(i&1&&$(As,5),i&2){let s;ee(s=te())&&(t.formGroup=s.first)}},standalone:!1,features:[W],decls:33,vars:33,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],[1,"form-actions"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","cmsKeyboardForce","en","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=M();r(0,"div",10),T(1,"app-progress-spinner",11),r(2,"div",12)(3,"p",13),c(4),a(),r(5,"p"),c(6),S(7,"translate"),a(),T(8,"app-cms-form-result-message",14),r(9,"form",15,0),b("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),r(11,"mat-horizontal-stepper",16,1),b("selectionChange",function(d){u(s);let K=R(12);return f(t.onStepClick(d,K))}),r(13,"mat-step",17),S(14,"translate"),v(15,Ds,1,5,"app-cms-enum-record-status-selector",18),r(16,"app-ticketing-departemen-selector",19),S(17,"translate"),b("optionChange",function(d){return u(s),f(t.onActionSelectSource(d))}),a(),v(18,Bs,10,9,"div",20),v(19,Os,10,9,"div",20),v(20,qs,10,9,"div",20),v(21,Qs,10,9,"div",20),v(22,Ks,10,10,"div",20),v(23,zs,7,4,"div",21),v(24,Js,7,7,"div",22),a(),r(25,"mat-step",23),S(26,"translate"),r(27,"p"),c(28),S(29,"translate"),a(),v(30,Ys,7,6,"div",20),v(31,Xs,7,6,"div",20),v(32,Zs,7,7,"div",22),a()()()()()}i&2&&(o(),h("optionsInfoAreaId",t.constructorInfoAreaId),o(3),p(" ",t.formInfo.formTitle," "),o(2),p(" ",_(7,23,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),h("formInfo",t.formInfo),o(5),h("label",x(_(14,25,"TITLE.REQUIRED_INFORMATION"))),o(2),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?15:-1),o(),h("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(17,27,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessAddField)),o(2),I(t.fieldsInfo.fullName!=null&&t.fieldsInfo.fullName.accessWatchField?18:-1),o(),I(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessWatchField?19:-1),o(),I(t.fieldsInfo.phoneNo!=null&&t.fieldsInfo.phoneNo.accessWatchField?20:-1),o(),I(t.fieldsInfo.email!=null&&t.fieldsInfo.email.accessWatchField?21:-1),o(),I(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessWatchField?22:-1),o(),I(t.fieldsInfo.expireDate!=null&&t.fieldsInfo.expireDate.accessWatchField?23:-1),o(),I(t.formInfo.submitButtonEnabled?24:-1),o(),h("label",x(_(26,29,"TITLE.REST_OF_THE_INFORMATION"))),o(3),E(_(29,31,"TITLE.Rest_of_Information")),o(2),I(t.fieldsInfo.userIpAddress!=null&&t.fieldsInfo.userIpAddress.accessWatchField?30:-1),o(),I(t.fieldsInfo.deviceInformation!=null&&t.fieldsInfo.deviceInformation.accessWatchField?31:-1),o(),I(t.formInfo.submitButtonEnabled?32:-1))},dependencies:[ve,ie,ne,Ce,Ie,be,Me,ge,Te,wn,En,yn,Ee,bn,U,An,Dn,Rn,xn,we,q,de,ui,Ae,O],encapsulation:2});var Zn=Qi;var $s=["vform"];function ec(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",24),D("modelChange",function(t){u(e);let s=m();return A(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),a()}if(n&2){let e=m();y("model",e.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function tc(n,l){n&1&&T(0,"i",27)}function ic(n,l){n&1&&T(0,"i",28)}function nc(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function oc(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",25),c(2),a(),r(3,"input",26,2),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.fullName,t)||(s.dataModel.fullName=t),f(t)}),a(),v(5,tc,1,0,"i",27),v(6,ic,1,0,"i",28),r(7,"em"),c(8),a(),v(9,nc,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle)),y("ngModel",i.dataModel.fullName),h("disabled",!(i.fieldsInfo.fullName!=null&&i.fieldsInfo.fullName.accessEditField)),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function rc(n,l){n&1&&T(0,"i",27)}function ac(n,l){n&1&&T(0,"i",28)}function lc(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function sc(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",29),c(2),a(),r(3,"input",30,3),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.title,t)||(s.dataModel.title=t),f(t)}),a(),v(5,rc,1,0,"i",27),v(6,ac,1,0,"i",28),r(7,"em"),c(8),a(),v(9,lc,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),y("ngModel",i.dataModel.title),h("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessEditField)),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function cc(n,l){n&1&&T(0,"i",27)}function dc(n,l){n&1&&T(0,"i",28)}function mc(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function pc(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",31),c(2),a(),r(3,"input",32,4),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),f(t)}),a(),v(5,cc,1,0,"i",27),v(6,dc,1,0,"i",28),r(7,"em"),c(8),a(),v(9,mc,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle)),y("ngModel",i.dataModel.phoneNo),h("disabled",!(i.fieldsInfo.phoneNo!=null&&i.fieldsInfo.phoneNo.accessEditField)),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function uc(n,l){n&1&&T(0,"i",27)}function fc(n,l){n&1&&T(0,"i",28)}function gc(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function hc(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",33),c(2),a(),r(3,"input",34,5),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.email,t)||(s.dataModel.email=t),f(t)}),a(),v(5,uc,1,0,"i",27),v(6,fc,1,0,"i",28),r(7,"em"),c(8),a(),v(9,gc,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle)),y("ngModel",i.dataModel.email),h("disabled",!(i.fieldsInfo.email!=null&&i.fieldsInfo.email.accessEditField)),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function Sc(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",35),c(2),S(3,"translate"),a(),r(4,"textarea",36,6),S(6,"translate"),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),f(t)}),c(7,"                      "),a(),r(8,"em"),c(9),a()()}if(n&2){let e=R(5),i=m();o(2),E(_(3,6,"TITLE.Description")),o(2),h("placeholder",x(_(6,8,"TITLE.Description"))),y("ngModel",i.dataModel.htmlBody),h("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessEditField)),o(5),p("",e.value.length," / 1000")}}function _c(n,l){if(n&1){let e=M();r(0,"div",21)(1,"label",37),c(2),a(),r(3,"input",38),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),f(t)}),a(),T(4,"mat-datepicker-toggle",39)(5,"mat-datepicker",40,7),a()}if(n&2){let e=R(6),i=m();o(2),E(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),o(),h("matDatepicker",e),y("ngModel",i.dataModel.expireDate),o(),h("for",e)}}function Cc(n,l){if(n&1){let e=M();r(0,"div",22)(1,"button",41),b("click",function(){u(e);let t=m();return f(t.onActionBackToParent())}),c(2),S(3,"translate"),a(),r(4,"button",42),c(5),S(6,"translate"),a()()}if(n&2){m();let e=R(10);o(2),p(" ",_(3,3,"ACTION.BACK")," "),o(2),h("disabled",!e.form.valid),o(),p(" ",_(6,5,"ACTION.NEXT")," ")}}function Tc(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",43),c(2),a(),r(3,"input",44,8),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.userIpAddress,t)||(s.dataModel.userIpAddress=t),f(t)}),a(),r(5,"em"),c(6),a()()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle)),y("ngModel",i.dataModel.userIpAddress),h("disabled",!(i.fieldsInfo.userIpAddress!=null&&i.fieldsInfo.userIpAddress.accessEditField)),o(3),p("",e.value.length," / 100")}}function vc(n,l){if(n&1){let e=M();r(0,"div",20)(1,"label",45),c(2),a(),r(3,"input",46,9),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.deviceInformation,t)||(s.dataModel.deviceInformation=t),f(t)}),a(),r(5,"em"),c(6),a()()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.deviceInformation==null?null:i.fieldsInfo.deviceInformation.fieldTitle)),y("ngModel",i.dataModel.deviceInformation),h("disabled",!(i.fieldsInfo.deviceInformation!=null&&i.fieldsInfo.deviceInformation.accessEditField)),o(3),p("",e.value.length," / 100")}}function Ic(n,l){if(n&1&&(r(0,"div",22)(1,"button",47),c(2),S(3,"translate"),a(),r(4,"button",48),c(5),S(6,"translate"),a()()),n&2){m();let e=R(10);o(2),p(" ",_(3,3,"ACTION.BEFOR")," "),o(2),h("disabled",!e.form.valid),o(),p(" ",_(6,5,"ACTION.SAVE")," ")}}var Ki=class Ki extends Nt{constructor(e,i,t,s,C,d,K,Y,Re,xe){super(d,new Fe,s,xe);this.data=e;this.activatedRoute=i;this.dialogRef=t;this.publicHelper=s;this.coreEnumService=C;this.ticketingTaskService=d;this.cmsToastrService=K;this.router=Y;this.cdr=Re;this.translate=xe;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new oe;this.dataModel=new Fe;this.dataModelResult=new _t;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new Vt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestId=+e.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(e){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.setAccessDataType(Ct.Editor),this.ticketingTaskService.ServiceGetOneById(e).subscribe({next:t=>{this.dataAccessModel=t.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.publicHelper.processService.processStop(i),this.dataModelResult=t,this.formInfo.submitButtonEnabled=!0,t.isSuccess?(this.dataModel=t.item,this.ticketingTaskService.ServiceTaskReaded(e).subscribe({next:s=>{},error:s=>{this.cmsToastrService.typeErrorGetOne(s)}})):this.cmsToastrService.typeErrorGetOne(t.errorMessage)},error:t=>{this.publicHelper.processService.processStop(i),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorGetOne(t)}})}DataEditContent(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTaskService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}}};Ki.\u0275fac=function(i){return new(i||Ki)(g(he),g(_e),g(le),g(N),g(Q),g(Ge),g(G),g(ae),g(V),g(F))},Ki.\u0275cmp=B({type:Ki,selectors:[["app-ticketing-task-edit"]],viewQuery:function(i,t){if(i&1&&$($s,5),i&2){let s;ee(s=te())&&(t.formGroup=s.first)}},standalone:!1,features:[W],decls:33,vars:33,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],[1,"form-actions"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","cmsKeyboardForce","en","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=M();r(0,"div",10),T(1,"app-progress-spinner",11),r(2,"div",12)(3,"p",13),c(4),a(),r(5,"p"),c(6),S(7,"translate"),a(),T(8,"app-cms-form-result-message",14),r(9,"form",15,0),b("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),r(11,"mat-horizontal-stepper",16,1),b("selectionChange",function(d){u(s);let K=R(12);return f(t.onStepClick(d,K))}),r(13,"mat-step",17),S(14,"translate"),v(15,ec,1,5,"app-cms-enum-record-status-selector",18),r(16,"app-ticketing-departemen-selector",19),S(17,"translate"),b("optionChange",function(d){return u(s),f(t.onActionSelectSource(d))}),a(),v(18,oc,10,9,"div",20),v(19,sc,10,9,"div",20),v(20,pc,10,9,"div",20),v(21,hc,10,9,"div",20),v(22,Sc,10,10,"div",20),v(23,_c,7,4,"div",21),v(24,Cc,7,7,"div",22),a(),r(25,"mat-step",23),S(26,"translate"),r(27,"p"),c(28),S(29,"translate"),a(),v(30,Tc,7,6,"div",20),v(31,vc,7,6,"div",20),v(32,Ic,7,7,"div",22),a()()()()()}i&2&&(o(),h("optionsInfoAreaId",t.constructorInfoAreaId),o(3),p(" ",t.formInfo.formTitle," "),o(2),p(" ",_(7,23,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),h("formInfo",t.formInfo),o(5),h("label",x(_(14,25,"TITLE.REQUIRED_INFORMATION"))),o(2),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?15:-1),o(),h("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(17,27,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessEditField)),o(2),I(t.fieldsInfo.fullName!=null&&t.fieldsInfo.fullName.accessWatchField?18:-1),o(),I(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessWatchField?19:-1),o(),I(t.fieldsInfo.phoneNo!=null&&t.fieldsInfo.phoneNo.accessWatchField?20:-1),o(),I(t.fieldsInfo.email!=null&&t.fieldsInfo.email.accessWatchField?21:-1),o(),I(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessWatchField?22:-1),o(),I(t.fieldsInfo.expireDate!=null&&t.fieldsInfo.expireDate.accessWatchField?23:-1),o(),I(t.formInfo.submitButtonEnabled?24:-1),o(),h("label",x(_(26,29,"TITLE.REST_OF_THE_INFORMATION"))),o(3),E(_(29,31,"TITLE.Rest_of_Information")),o(2),I(t.fieldsInfo.userIpAddress!=null&&t.fieldsInfo.userIpAddress.accessWatchField?30:-1),o(),I(t.fieldsInfo.deviceInformation!=null&&t.fieldsInfo.deviceInformation.accessWatchField?31:-1),o(),I(t.formInfo.submitButtonEnabled?32:-1))},dependencies:[ve,ie,ne,Ce,Ie,be,Me,ge,Te,wn,En,yn,Ee,bn,U,An,Dn,Rn,xn,we,q,de,ui,Ae,O],encapsulation:2});var $n=Ki;var bc=()=>[5,10,20,100],Mc=n=>({background:n});function kc(n,l){if(n&1){let e=M();r(0,"a",40),b("click",function(){u(e);let t=m();return f(t.onActionBackToParent())}),T(1,"i",41),a()}}function wc(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",42),b("click",function(){u(e);let t=m();return f(t.onActionButtonNewRow())}),T(2,"i",43)(3,"br"),a(),r(4,"p",44),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.ADD")," "))}function Ec(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",10),b("click",function(){u(e);let t=m();return f(t.onActionButtonAnswerList())}),T(2,"i",45)(3,"br"),a(),r(4,"p",44),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.ANSWERS")," "))}function yc(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",46),b("click",function(){u(e);let t=m();return f(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",47)(3,"br"),a(),r(4,"p",44),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.EDIT")," "))}function Ac(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",48),b("click",function(){u(e);let t=m();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",49)(3,"br"),a(),r(4,"p",44),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.DELETE")," "))}function Dc(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",50),b("click",function(){u(e);let t=m();return f(t.onActionButtonAnswerList(t.tableRowSelected))}),T(2,"i",45)(3,"br"),a(),r(4,"p",44),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.ANSWERS")," "))}function Rc(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",51),b("click",function(){u(e);let t=m();return f(t.onActionButtonViewRow(t.tableRowSelected))}),T(2,"i",52)(3,"br"),a(),r(4,"p",44),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.VIEW")," "))}function xc(n,l){if(n&1&&(r(0,"mat-header-cell",53),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Lc(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.id," ")}}function Bc(n,l){if(n&1&&(r(0,"mat-header-cell",53),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Vc(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),p(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function Fc(n,l){if(n&1&&(r(0,"mat-header-cell",53),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function Nc(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.linkMemberId," ")}}function Oc(n,l){if(n&1&&(r(0,"mat-header-cell",53),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function Gc(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.title," ")}}function Pc(n,l){if(n&1&&(r(0,"mat-header-cell",53),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Hc(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),p(" ",_(2,1,e.createdDate)," ")}}function qc(n,l){if(n&1&&(r(0,"mat-header-cell",53),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Wc(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),p(" ",_(2,1,e.updatedDate)," ")}}function jc(n,l){if(n&1&&(r(0,"mat-header-cell",53),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.ticketStatus==null?null:e.fieldsInfo.ticketStatus.fieldTitle," ")}}function Uc(n,l){if(n&1&&(r(0,"mat-cell",54),c(1),S(2,"enums"),a()),n&2){let e=l.$implicit,i=m();h("ngStyle",We(5,Mc,i.publicHelper.RowStyleTicketStatus(e.ticketStatus))),o(),p(" ",mi(2,2,e.ticketStatus,i.dataModelEnumTicketStatusResult.listItems)," ")}}function Qc(n,l){n&1&&(r(0,"mat-header-cell"),c(1),S(2,"translate"),a()),n&2&&(o(),p(" ",_(2,1,"TITLE.OPTION")," "))}function Kc(n,l){if(n&1&&(r(0,"mat-cell",55)(1,"button",56)(2,"mat-icon"),c(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=R(5);o(),h("matMenuTriggerFor",e)}}function zc(n,l){n&1&&T(0,"mat-header-row")}function Jc(n,l){if(n&1){let e=M();r(0,"mat-row",57),b("click",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Z("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var zi=class zi extends ct{constructor(e,i,t,s,C,d,K,Y,Re,xe,At,ft,$i){super(e,new Fe,ft,d,Re);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=C;this.tokenHelper=d;this.cmsStoreService=K;this.cdr=Y;this.translate=Re;this.ticketingEnumService=xe;this.pageInfo=At;this.publicHelper=ft;this.dialog=$i;this.requestDepartemenId=0;this.requestLinkCmsUserId=0;this.requestTicketStatus=-1;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new J;this.filterDataModelQueryBuilder=[];this.dataModelEnumTicketStatusResult=new j;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["title","linkMemberId","createdDate","updatedDate","TicketStatus"];this.tabledisplayedColumnsMobileSource=["title","linkMemberId","createdDate","updatedDate","TicketStatus"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:oo=>this.onSubmitOptionsSearch(oo)},this.filteModelContent.sortColumn="id",this.filteModelContent.sortType=H.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.activatedRoute.snapshot.paramMap.get("TicketStatus")&&(this.requestTicketStatus=+Number(this.activatedRoute.snapshot.paramMap.get("TicketStatus"))),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>X(this,null,function*(){this.getEnumTicketStatus(),this.tokenInfo=e,this.DataGetAll()}))),this.getEnumTicketStatus()}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:e=>{this.dataModelEnumTicketStatusResult=e}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Fe);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.requestLinkCmsUserId>0&&(t.propertyName="LinkCmsUserId",t.value=this.requestLinkCmsUserId,i.filters.push(t)),this.requestTicketStatus>=0&&(t.propertyName="TicketStatus",t.value=this.requestTicketStatus,i.filters.push(t)),this.contentService.ServiceGetAll(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=H.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Zn,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{linkDepartemenId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(ji,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new J,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open($n,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonAnswerList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(C,d,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:d=>{d.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(t,d,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(this.translate.get("MESSAGE.All").subscribe(K=>{i.set(K,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t,!1)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),C=new z;C.propertyName="recordStatus",C.value=Ue.Available,s.filters.push(C),this.contentService.ServiceGetCount(s).subscribe({next:d=>{d.isSuccess&&(this.translate.get("MESSAGE.Active").subscribe(K=>{i.set(K,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.requestTicketStatus=-1,this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};zi.\u0275fac=function(i){return new(i||zi)(g(Ge),g(_e),g(G),g(Ft),g(ae),g(ce),g(se),g(V),g(F),g(Jt),g(st),g(N),g(ye))},zi.\u0275cmp=B({type:zi,selectors:[["app-ticketing-task-list"]],standalone:!1,features:[W],decls:63,vars:34,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],[1,"col-4"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","linkMemberId"],["matColumnDef","title"],["matColumnDef","createdDate"],["matColumnDef","updatedDate"],["matColumnDef","TicketStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),D("optionActionGuideNoticeDisplayChange",function(d){return u(s),A(t.viewGuideNotice,d)||(t.viewGuideNotice=d),f(d)}),b("optionOnActionButtonMemoRow",function(){return u(s),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),f(t.onActionButtonPrintRow())}),k(1,4),r(2,"app-ticketing-departemen-tree",5),b("optionChange",function(d){return u(s),f(t.onActionSelectorSelect(d))}),a(),w(),Le(3,6)(4,7),k(5,8),v(6,kc,2,0,"a",9),r(7,"a",10),b("click",function(){return u(s),f(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),b("click",function(){return u(s),f(t.onActionButtonReload())}),T(10,"i",12),a(),w(),k(11,13),r(12,"a",14),b("click",function(){return u(s),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),c(14),S(15,"translate"),a(),r(16,"a",14),b("click",function(){return u(s),f(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),c(18),S(19,"translate"),a(),w(),k(20,16),v(21,wc,7,3,"div",17),v(22,Ec,7,3,"div",17),w(),k(23,18),v(24,yc,7,3,"div",17),v(25,Ac,7,3,"div",17),v(26,Dc,7,3,"div",17),v(27,Rc,7,3,"div",17),w(),k(28,19),r(29,"app-cms-search-list",20),D("optionsChange",function(d){return u(s),A(t.optionsSearch,d)||(t.optionsSearch=d),f(d)}),a(),r(30,"app-cms-statist-list",20),D("optionsChange",function(d){return u(s),A(t.optionsStatist,d)||(t.optionsStatist=d),f(d)}),a(),w(),k(31,21),r(32,"mat-table",22,0),b("matSortChange",function(){u(s);let d=R(33);return f(t.onTableSortData(d))}),k(34,23),L(35,xc,2,1,"mat-header-cell",24)(36,Lc,2,1,"mat-cell",25),w(),k(37,26),L(38,Bc,2,1,"mat-header-cell",24)(39,Vc,4,5,"mat-cell",25),w(),k(40,27),L(41,Fc,2,1,"mat-header-cell",24)(42,Nc,2,1,"mat-cell",25),w(),k(43,28),L(44,Oc,2,1,"mat-header-cell",24)(45,Gc,2,1,"mat-cell",25),w(),k(46,29),L(47,Pc,2,1,"mat-header-cell",24)(48,Hc,3,3,"mat-cell",25),w(),k(49,30),L(50,qc,2,1,"mat-header-cell",24)(51,Wc,3,3,"mat-cell",25),w(),k(52,31),L(53,jc,2,1,"mat-header-cell",24)(54,Uc,3,7,"mat-cell",32),w(),k(55,33),L(56,Qc,3,3,"mat-header-cell",34)(57,Kc,6,1,"mat-cell",35),w(),L(58,zc,1,0,"mat-header-row",36)(59,Jc,1,2,"mat-row",37),a(),w(),k(60,38),r(61,"mat-paginator",39,1),b("page",function(d){return u(s),f(t.onTablePageingData(d))}),a(),w(),a()}i&2&&(h("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.task.list"),y("optionActionGuideNoticeDisplay",t.viewGuideNotice),h("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),I(t.requestDepartemenId>0?6:-1),o(4),Z("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),o(3),h("checked",t.optionsSearch.data.show),o(),p("",_(15,29,"ACTION.SEARCH")," "),o(3),h("checked",t.optionsStatist.data.show),o(),p("",_(19,31,"ACTION.STATIST")," "),o(3),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?21:-1),o(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0?22:-1),o(2),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?24:-1),o(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?25:-1),o(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow?26:-1),o(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0?27:-1),o(2),y("options",t.optionsSearch),o(),y("options",t.optionsStatist),o(2),h("dataSource",t.tableSource),o(26),h("matHeaderRowDef",t.tabledisplayedColumns),o(),h("matRowDefColumns",t.tabledisplayedColumns),o(2),h("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",qe(33,bc)))},dependencies:[je,Pe,He,Qe,Ke,ze,Je,Ye,Xe,Ze,et,ot,tt,$e,rt,it,nt,at,lt,dt,mt,pt,ut,Ht,Ve,O,fi,It,bt],encapsulation:2});var si=zi;var Yc=["vform"];function Xc(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",13),D("modelChange",function(t){u(e);let s=m();return A(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),a()}if(n&2){let e=m();y("model",e.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Zc(n,l){n&1&&T(0,"i",16)}function $c(n,l){n&1&&T(0,"i",17)}function ed(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function td(n,l){if(n&1){let e=M();r(0,"div",11)(1,"label",14),c(2),a(),r(3,"input",15,1),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.title,t)||(s.dataModel.title=t),f(t)}),a(),v(5,Zc,1,0,"i",16),v(6,$c,1,0,"i",17),r(7,"em"),c(8),a(),v(9,ed,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),y("ngModel",i.dataModel.title),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function id(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.fieldTitle," "),o(2),E(_(4,2,"MESSAGE.required"))}}function nd(n,l){if(n&1){let e=M();r(0,"div",11)(1,"label",18),c(2),S(3,"translate"),a(),r(4,"textarea",19,2),S(6,"translate"),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),f(t)}),c(7,"            "),a(),r(8,"em"),c(9),a(),v(10,id,5,4,"mat-error"),a()}if(n&2){let e=R(5),i=m();o(2),E(_(3,8,"TITLE.Description")),o(2),h("disabled",x(!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)))("placeholder",x(_(6,10,"TITLE.Answer_Text"))),y("ngModel",i.dataModel.htmlBody),o(5),p("",e.value.length," / 2000"),o(),I(e.errors!=null&&e.errors.required?10:-1)}}function od(n,l){if(n&1){let e=M();r(0,"div",12)(1,"button",20),b("click",function(){u(e);let t=m();return f(t.onFormCancel())}),T(2,"i",21),c(3),S(4,"translate"),a(),r(5,"button",22),T(6,"i",23),c(7),S(8,"translate"),a()()}if(n&2){m();let e=R(10);o(3),p(" ",_(4,3,"ACTION.CANCEL")," "),o(2),h("disabled",!e.form.valid),o(2),p(" ",_(8,5,"ACTION.SAVE")," ")}}var Ji=class Ji extends vt{constructor(e,i,t,s,C,d,K,Y){super(s,new gt,d,Y);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingTemplateService=s;this.cmsToastrService=C;this.publicHelper=d;this.cdr=K;this.translate=Y;this.requestParentId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.formMatcher=new Xt;this.dataModelResult=new j;this.dataModel=new gt;this.formInfo=new oe;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=+e.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId)}ngOnInit(){this.translate.get("TITLE.Submit_New_Content").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ji.\u0275fac=function(i){return new(i||Ji)(g(he),g(le),g(Q),g(Lt),g(G),g(N),g(V),g(F))},Ji.\u0275cmp=B({type:Ji,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,t){if(i&1&&$(Yc,5),i&2){let s;ee(s=te())&&(t.formGroup=s.first)}},standalone:!1,features:[W],decls:17,vars:14,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),c(4),a(),r(5,"p"),c(6),S(7,"translate"),a(),T(8,"app-cms-form-result-message",7),r(9,"form",8,0),b("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),v(11,Xc,1,5,"app-cms-enum-record-status-selector",9),r(12,"app-ticketing-departemen-selector",10),S(13,"translate"),b("optionChange",function(d){return u(s),f(t.onActionSelectorSelect(d))}),a(),v(14,td,10,8,"div",11),v(15,nd,11,12,"div",11),v(16,od,9,7,"div",12),a()()()}i&2&&(o(),h("optionsInfoAreaId",t.constructorInfoAreaId),o(3),p(" ",t.formInfo.formTitle," "),o(2),p(" ",_(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),h("formInfo",t.formInfo),o(3),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),o(),h("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(13,12,"TITLE.Department")),o(2),I(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessWatchField?14:-1),o(),I(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessWatchField?15:-1),o(),I(t.formInfo.submitButtonEnabled?16:-1))},dependencies:[ve,ie,ne,Ce,Ie,be,Me,ge,Te,Ee,U,we,q,de,Ae,O],encapsulation:2});var eo=Ji;var rd=["vform"];function ad(n,l){if(n&1){let e=M();r(0,"app-cms-enum-record-status-selector",13),D("modelChange",function(t){u(e);let s=m();return A(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),f(t)}),a()}if(n&2){let e=m();y("model",e.dataModel.recordStatus),h("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ld(n,l){n&1&&T(0,"i",16)}function sd(n,l){n&1&&T(0,"i",17)}function cd(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),E(_(4,2,"MESSAGE.required"))}}function dd(n,l){if(n&1){let e=M();r(0,"div",11)(1,"label",14),c(2),a(),r(3,"input",15,1),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.title,t)||(s.dataModel.title=t),f(t)}),a(),v(5,ld,1,0,"i",16),v(6,sd,1,0,"i",17),r(7,"em"),c(8),a(),v(9,cd,5,4,"mat-error"),a()}if(n&2){let e=R(4),i=m();o(2),E(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),h("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),y("ngModel",i.dataModel.title),o(2),I(e.value?-1:5),o(),I(e.value?6:-1),o(2),p("",e.value.length," / 100"),o(),I(e.errors!=null&&e.errors.required?9:-1)}}function md(n,l){if(n&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),S(4,"translate"),a()()),n&2){let e=m(2);o(),p(" ",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.fieldTitle," "),o(2),E(_(4,2,"MESSAGE.required"))}}function pd(n,l){if(n&1){let e=M();r(0,"div",11)(1,"label",18),c(2),S(3,"translate"),a(),r(4,"textarea",19,2),S(6,"translate"),D("ngModelChange",function(t){u(e);let s=m();return A(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),f(t)}),c(7,"            "),a(),r(8,"em"),c(9),a(),v(10,md,5,4,"mat-error"),a()}if(n&2){let e=R(5),i=m();o(2),E(_(3,8,"TITLE.Description")),o(2),h("disabled",x(!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)))("placeholder",x(_(6,10,"TITLE.Answer_Text"))),y("ngModel",i.dataModel.htmlBody),o(5),p("",e.value.length," / 2000"),o(),I(e.errors!=null&&e.errors.required?10:-1)}}function ud(n,l){if(n&1){let e=M();r(0,"div",12)(1,"button",20),b("click",function(){u(e);let t=m();return f(t.onFormCancel())}),T(2,"i",21),c(3),S(4,"translate"),a(),r(5,"button",22),T(6,"i",23),c(7),S(8,"translate"),a()()}if(n&2){m();let e=R(10);o(3),p(" ",_(4,3,"ACTION.CANCEL")," "),o(2),h("disabled",!e.form.valid),o(2),p(" ",_(8,5,"ACTION.SAVE")," ")}}var Yi=class Yi extends Nt{constructor(e,i,t,s,C,d,K,Y){super(s,new gt,d,Y);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingTemplateService=s;this.cmsToastrService=C;this.publicHelper=d;this.cdr=K;this.translate=Y;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new Xt;this.dataModelResult=new _t;this.dataModel=new gt;this.dataFileModel=new Map;this.formInfo=new oe;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.setAccessLoad(),this.ticketingTemplateService.setAccessDataType(Ct.Editor),this.ticketingTemplateService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=1}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Yi.\u0275fac=function(i){return new(i||Yi)(g(he),g(le),g(Q),g(Lt),g(G),g(N),g(V),g(F))},Yi.\u0275cmp=B({type:Yi,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,t){if(i&1&&$(rd,5),i&2){let s;ee(s=te())&&(t.formGroup=s.first)}},standalone:!1,features:[W],decls:17,vars:14,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=M();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),c(4),a(),r(5,"p"),c(6),S(7,"translate"),a(),T(8,"app-cms-form-result-message",7),r(9,"form",8,0),b("ngSubmit",function(){return u(s),f(t.onFormSubmit())}),v(11,ad,1,5,"app-cms-enum-record-status-selector",9),r(12,"app-ticketing-departemen-selector",10),S(13,"translate"),b("optionChange",function(d){return u(s),f(t.onActionSelectorSelect(d))}),a(),v(14,dd,10,8,"div",11),v(15,pd,11,12,"div",11),v(16,ud,9,7,"div",12),a()()()}i&2&&(o(),h("optionsInfoAreaId",t.constructorInfoAreaId),o(3),p(" ",t.formInfo.formTitle," "),o(2),p(" ",_(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),h("formInfo",t.formInfo),o(3),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),o(),h("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(13,12,"TITLE.Department")),o(2),I(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessWatchField?14:-1),o(),I(t.fieldsInfo.htmlBody!=null&&t.fieldsInfo.htmlBody.accessWatchField?15:-1),o(),I(t.formInfo.submitButtonEnabled?16:-1))},dependencies:[ve,ie,ne,Ce,Ie,be,Me,ge,Te,Ee,U,we,q,de,Ae,O],encapsulation:2});var to=Yi;var fd=()=>[5,10,20,100],gd=n=>({display:n});function hd(n,l){if(n&1){let e=M();r(0,"a",37),b("click",function(){u(e);let t=m();return f(t.onActionBackToParent())}),T(1,"i",38),a()}}function Sd(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",39),b("click",function(){u(e);let t=m();return f(t.onActionButtonNewRow())}),T(2,"i",40)(3,"br"),a(),r(4,"p",41),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.ADD")," "))}function _d(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",42),b("click",function(){u(e);let t=m();return f(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",43)(3,"br"),a(),r(4,"p",41),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.EDIT")," "))}function Cd(n,l){if(n&1){let e=M();r(0,"div",17)(1,"a",44),b("click",function(){u(e);let t=m();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",45)(3,"br"),a(),r(4,"p",41),c(5),S(6,"translate"),a()()}n&2&&(o(5),p(" ",_(6,1,"ACTION.DELETE")," "))}function Td(n,l){if(n&1&&(r(0,"mat-header-cell",46),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function vd(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.id," ")}}function Id(n,l){if(n&1&&(r(0,"mat-header-cell",46),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function bd(n,l){if(n&1&&(r(0,"mat-cell"),c(1),S(2,"cmssiteinfo"),S(3,"async"),a()),n&2){let e=l.$implicit;o(),p(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function Md(n,l){if(n&1&&(r(0,"mat-header-cell",46),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function kd(n,l){if(n&1&&T(0,"select",48),n&2){let e=m().$implicit,i=m();h("contentService",i.contentService)("row",e)("ngStyle",We(3,gd,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function wd(n,l){if(n&1&&(r(0,"mat-cell",47),S(1,"statusCellClass"),T(2,"i",47),S(3,"statusIconClass"),v(4,kd,1,5,"select",48),a()),n&2){let e=l.$implicit,i=m();h("ngClass",_(1,3,e.recordStatus)),o(2),h("ngClass",_(3,5,e.recordStatus)),o(2),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow?4:-1)}}function Ed(n,l){if(n&1&&(r(0,"mat-header-cell",46),c(1),a()),n&2){let e=m();o(),p(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function yd(n,l){if(n&1&&(r(0,"mat-cell"),c(1),a()),n&2){let e=l.$implicit;o(),p(" ",e.title," ")}}function Ad(n,l){n&1&&(r(0,"mat-header-cell"),c(1),S(2,"translate"),a()),n&2&&(o(),p(" ",_(2,1,"TITLE.OPTION")," "))}function Dd(n,l){if(n&1&&(r(0,"mat-cell",49)(1,"button",50)(2,"mat-icon"),c(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=R(5);o(),h("matMenuTriggerFor",e)}}function Rd(n,l){n&1&&T(0,"mat-header-row")}function xd(n,l){if(n&1){let e=M();r(0,"mat-row",51),b("click",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=u(e).$implicit,C=m();return f(C.onActionTableRowSelect(s,t))}),a()}if(n&2){let e=l.$implicit,i=m();Z("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Xi=class Xi extends ct{constructor(e,i,t,s,C,d,K,Y,Re,xe,At,ft){super(e,new gt,At,d,Y);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=C;this.tokenHelper=d;this.cdr=K;this.translate=Y;this.cmsStoreService=Re;this.pageInfo=xe;this.publicHelper=At;this.dialog=ft;this.requestDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new J;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","recordStatus"];this.tabledisplayedColumnsMobileSource=["id","recordStatus"];this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:$i=>this.onSubmitOptionsSearch($i)},this.filteModelContent.sortColumn="id",this.filteModelContent.sortType=H.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>X(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new gt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=H.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=H.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(eo,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{parentId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new J,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(to,{height:"90%",panelClass:i,enterAnimationDuration:P.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:P.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.No_row_selected_for_editing").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(C,d,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:d=>{d.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(C)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(t,d,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess&&(i.set("All",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),C=new z;C.propertyName="recordStatus",C.value=Ue.Available,s.filters.push(C),this.contentService.ServiceGetCount(s).subscribe({next:d=>{d.isSuccess&&(i.set("Active",d.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};Xi.\u0275fac=function(i){return new(i||Xi)(g(Lt),g(_e),g(G),g(Ft),g(ae),g(ce),g(V),g(F),g(se),g(st),g(N),g(ye))},Xi.\u0275cmp=B({type:Xi,selectors:[["app-application-app-list"]],standalone:!1,features:[W],decls:51,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],[1,"col-4"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","recordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=M();r(0,"app-cms-html-list",3),D("optionActionGuideNoticeDisplayChange",function(d){return u(s),A(t.viewGuideNotice,d)||(t.viewGuideNotice=d),f(d)}),b("optionOnActionButtonMemoRow",function(){return u(s),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(s),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(s),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(s),f(t.onActionButtonPrintRow())}),k(1,4),r(2,"app-ticketing-departemen-tree",5),b("optionChange",function(d){return u(s),f(t.onActionSelectorSelect(d))}),a(),w(),Le(3,6)(4,7),k(5,8),v(6,hd,2,0,"a",9),r(7,"a",10),b("click",function(){return u(s),f(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),b("click",function(){return u(s),f(t.onActionButtonReload())}),T(10,"i",12),a(),w(),k(11,13),r(12,"a",14),b("click",function(){return u(s),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),c(14),S(15,"translate"),a(),r(16,"a",14),b("click",function(){return u(s),f(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),c(18),S(19,"translate"),a(),w(),k(20,16),v(21,Sd,7,3,"div",17),w(),k(22,18),v(23,_d,7,3,"div",17),v(24,Cd,7,3,"div",17),w(),k(25,19),r(26,"app-cms-search-list",20),D("optionsChange",function(d){return u(s),A(t.optionsSearch,d)||(t.optionsSearch=d),f(d)}),a(),r(27,"app-cms-statist-list",20),D("optionsChange",function(d){return u(s),A(t.optionsStatist,d)||(t.optionsStatist=d),f(d)}),a(),w(),k(28,21),r(29,"mat-table",22,0),b("matSortChange",function(){u(s);let d=R(30);return f(t.onTableSortData(d))}),k(31,23),L(32,Td,2,1,"mat-header-cell",24)(33,vd,2,1,"mat-cell",25),w(),k(34,26),L(35,Id,2,1,"mat-header-cell",24)(36,bd,4,5,"mat-cell",25),w(),k(37,27),L(38,Md,2,1,"mat-header-cell",24)(39,wd,5,7,"mat-cell",28),w(),k(40,29),L(41,Ed,2,1,"mat-header-cell",24)(42,yd,2,1,"mat-cell",25),w(),k(43,30),L(44,Ad,3,3,"mat-header-cell",31)(45,Dd,6,1,"mat-cell",32),w(),L(46,Rd,1,0,"mat-header-row",33)(47,xd,1,2,"mat-row",34),a(),w(),k(48,35),r(49,"mat-paginator",36,1),b("page",function(d){return u(s),f(t.onTablePageingData(d))}),a(),w(),a()}i&2&&(h("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),y("optionActionGuideNoticeDisplay",t.viewGuideNotice),h("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),I(t.requestDepartemenId>0?6:-1),o(4),Z("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),o(3),h("checked",t.optionsSearch.data.show),o(),p("",_(15,26,"ACTION.SEARCH")," "),o(3),h("checked",t.optionsStatist.data.show),o(),p("",_(19,28,"ACTION.STATIST")," "),o(3),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?21:-1),o(2),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?23:-1),o(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?24:-1),o(2),y("options",t.optionsSearch),o(),y("options",t.optionsStatist),o(2),h("dataSource",t.tableSource),o(17),h("matHeaderRowDef",t.tabledisplayedColumns),o(),h("matRowDefColumns",t.tabledisplayedColumns),o(2),h("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",qe(30,fd)))},dependencies:[Dt,je,Pe,He,U,Qe,Ke,ze,Je,Ye,Xe,Ze,et,ot,tt,$e,rt,it,nt,at,lt,dt,mt,pt,ut,Ot,Ht,Ve,O,It,Gt,Pt],encapsulation:2});var ln=Xi;var Zi=class Zi{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};Zi.\u0275fac=function(e){return new(e||Zi)},Zi.\u0275cmp=B({type:Zi,selectors:[["app-ticketing"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&T(0,"router-outlet")},dependencies:[po],encapsulation:2});var io=Zi;var Ld=[{path:"",component:io,data:{title:"ROUTE.TICKETING"},children:[{path:"config",loadChildren:()=>import("./chunk-OEIVFJYU.js").then(n=>n.TicketingConfigModule),data:{title:"ROUTE.TICKETING"}},{path:"departemen",component:qn,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/add/",component:Kt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/edit/:id",component:Kt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemenlog/DepartemenId/:DepartemenId",component:on,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"departemenlog/OperatorId/:OperatorId",component:on,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"faq",component:Jn,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/:DepartemenId",component:rn,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/list",component:rn,data:{title:"ROUTE.TICKETING.LIST"}},{path:"template",component:ln,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"template/:DepartemenId",component:ln,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"contactus",component:Xn,data:{title:"ROUTE.TICKETING.CONTACTUS"}},{path:"task",component:si,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/listTicketStatus/:TicketStatus",component:si,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list",component:an,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list/LinkCmsUserId/:LinkCmsUserId",component:an,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/:DepartemenId",component:si,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/LinkCmsUserId/:LinkCmsUserId",component:si,data:{title:"ROUTE.TICKETING.TASK"}},{path:"answer",component:en,data:{title:"ROUTE.TICKETING.ANSWER"}},{path:"answer/LinkTaskId/:LinkTaskId",component:en,data:{title:"ROUTE.TICKETING.ANSWER"}}]}],ci=class ci{};ci.\u0275fac=function(e){return new(e||ci)},ci.\u0275mod=hn({type:ci}),ci.\u0275inj=fn({imports:[ro.forChild(Ld),ro]});var no=ci;var di=class di{};di.\u0275fac=function(e){return new(e||di)},di.\u0275mod=hn({type:di}),di.\u0275inj=fn({providers:[fo,Q,_o,ho,Jt,Oe,Cn,Co,Ge,xt,Rt,Lt,Ft],imports:[mo,no,vo,Io.withConfig({warnOnNgModelWithFormControl:"never"}),Lo,Vo,xo]});var Po=di;export{Po as TicketingModule};
