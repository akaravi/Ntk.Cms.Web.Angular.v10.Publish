import{a as Le}from"./chunk-XSO7DJFU.js";import{a as Pe}from"./chunk-JI72DBZ7.js";import{f as Re}from"./chunk-HXH5Z4PQ.js";import{$a as we,Fc as ke,Ic as Be,K as me,Kc as Ve,L as ue,N as fe,Nc as Oe,O as ge,Qb as ye,Rb as Ae,Sa as _e,Ta as Ce,Ua as Se,Va as he,W as Me,Wa as ve,Xa as xe,Ya as be,Za as Te,_a as Ie,m as ae,n as re,q as se,r as le,t as pe,tb as Ee,tc as Ne,v as de,w as ce}from"./chunk-OXCCWIF2.js";import{Bq as Q,Cb as D,Db as F,Eb as H,Fa as n,Gd as Y,Ib as j,Kc as z,Md as Z,Nb as o,Ne as ee,Oa as _,Ob as G,Pb as s,Sa as A,Se as te,Ta as N,Tb as k,Te as R,Ub as B,Ud as O,Uf as ne,Vb as V,Wc as J,Y as y,Ya as w,Yd as $,bk as ie,cc as l,da as c,dc as p,ea as m,jb as M,jk as W,kb as t,kk as q,lb as a,mb as C,tb as E,uq as oe,vc as X,wb as f,yb as h}from"./chunk-SG3IEC2T.js";import{i as K}from"./chunk-SEDBTTTN.js";var b=class b{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};b.\u0275fac=function(r){return new(r||b)},b.\u0275cmp=A({type:b,selectors:[["app-core-main-action"]],standalone:!1,decls:1,vars:0,template:function(r,e){r&1&&C(0,"router-outlet")},dependencies:[oe],encapsulation:2});var P=b;var He=["vform"],je=["Message"];function Ge(g,d){if(g&1){let r=E();t(0,"textarea",30),V("ngModelChange",function(i){c(r);let u=h();return B(u.dataMessageContentModel.messageBody,i)||(u.dataMessageContentModel.messageBody=i),m(i)}),o(1,"                "),a()}if(g&2){let r=h();k("ngModel",r.dataMessageContentModel.messageBody)}}function We(g,d){if(g&1){let r=E();t(0,"button",31),f("click",function(){c(r);let i=h();return m(i.onActionMessageContentAdd())}),C(1,"i",32),o(2),l(3,"translate"),a()}g&2&&(n(2),s(" ",p(3,1,"TITLE.Added_to_the_text")," "))}function qe(g,d){if(g&1){let r=E();t(0,"button",31),f("click",function(){c(r);let i=h();return m(i.onActionMessageContentNew())}),C(1,"i",32),o(2),l(3,"translate"),a()}g&2&&(n(2),s(" ",p(3,1,"TITLE.Message_Text")," "))}function Qe(g,d){g&1&&(t(0,"mat-error"),o(1),l(2,"translate"),t(3,"strong"),o(4),l(5,"translate"),a()()),g&2&&(n(),s(" ",p(2,2,"TITLE.Message_Text")," "),n(3),G(p(5,4,"content.required")))}function Ue(g,d){if(g&1&&(t(0,"button",35),C(1,"i",36),o(2),l(3,"translate"),a()),g&2){h(2);let r=j(10);M("disabled",!r.valid),n(2),s(" ",p(3,2,"ACTION.Send_Message")," ")}}function Ke(g,d){if(g&1&&(t(0,"div",33),w(1,Ue,4,4,"button",34),a()),g&2){let r=h();n(),M("ngIf",!r.publicHelper.processService.process.inRunAll)}}var T=class T{constructor(d,r,e,i,u,S,ze,Je){this.coreEnumService=d;this.coreTokenConnectionService=r;this.cmsStoreService=e;this.cmsToastrService=i;this.cdr=u;this.publicHelper=S;this.translate=ze;this.tokenHelper=Je;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new ne;this.dataModelParentSelected=new ie;this.dataModel=new te;this.dataModelResult=new Y;this.formInfo=new Z;this.clipboardText="";this.dataMessageCategoryModel=new W;this.dataMessageContentModel=new q;this.step=0;this.publicHelper.processService.cdr=this.cdr,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore}ngOnInit(){}readClipboardFromDevTools(){return new Promise((d,r)=>{let e=()=>K(null,null,function*(){try{let i=yield navigator.clipboard.readText();d(i)}catch(i){r(i)}window.removeEventListener("focus",e)});window.addEventListener("focus",e),console.log("Hit <Tab> to give focus back to document (or we will face a DOMException);")})}onActionMessageLTR(){this.message.nativeElement.style.direction="ltr",this.message.nativeElement.style.textAlign="left"}onActionMessageRTL(){this.message.nativeElement.style.direction="rtl",this.message.nativeElement.style.textAlign="right"}onActionSelectMessageCategory(d){d&&d.id?.length>0?this.dataMessageCategoryModel=d:this.dataMessageCategoryModel=new W}onActionSelectMessageContent(d){d&&d.id?.length>0?this.dataMessageContentModel=d:this.dataMessageContentModel=new q}onActionMessageContentAdd(){this.dataMessageContentModel?.messageBody?.length>0?this.dataModel.content.length>0&&(this.dataModel.content=this.dataModel.content+" "+this.dataMessageContentModel.messageBody):this.dataModel.content=this.dataMessageContentModel.messageBody}onActionMessageContentNew(){this.dataMessageContentModel?.messageBody?.length>0&&(this.dataModel.content=this.dataMessageContentModel.messageBody)}onFormSubmit(){if(!this.formGroup.valid)return;this.formInfo.submitButtonEnabled=!1;let d=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(r=>{this.publicHelper.processService.processStart(d,r,this.constructorInfoAreaId)}),this.formInfo.submitResultMessage="",this.formInfo.submitResultMessage="",this.coreTokenConnectionService.ServiceSendNotification(this.dataModel).subscribe({next:r=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=r,r.isSuccess?(this.translate.get("MESSAGE.Submit_request_was_successfully_registered").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.translate.get("MESSAGE.Send_request_was_successfully_registered").subscribe(e=>{this.cmsToastrService.typeSuccessMessage(e)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitResultMessage=r.errorMessage,this.cmsToastrService.typeErrorMessage(r.errorMessage)),this.publicHelper.processService.processStop(d)},error:r=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(r),this.publicHelper.processService.processStop(d,!1)}})}setStep(d){this.step=d}nextStep(){this.step++}prevStep(){this.step--}};T.\u0275fac=function(r){return new(r||T)(_(O),_(R),_(ke),_(Ve),_(X),_(Re),_(ye),_(Be))},T.\u0275cmp=A({type:T,selectors:[["app-core-main-action-send-notification"]],viewQuery:function(r,e){if(r&1&&(D(He,5),D(je,5)),r&2){let i;F(i=H())&&(e.formGroup=i.first),F(i=H())&&(e.message=i.first)}},standalone:!1,decls:142,vars:97,consts:[["vform","ngForm"],["content",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection"],[1,"row"],[1,"col-6"],[1,"example-headers-align"],["hideToggle","",3,"opened","expanded"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"click"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModel","ngModelChange",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray",3,"click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.sendToAll",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.sendToAll","name","dataModel.sendToAll",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.sendToAll",1,"custom-control-label"],[1,"message-box"],[1,"row",2,"height","300px"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.content",1,"color-highlight"],["matInput","","name","dataModel.content","type","text","placeholder","...","minlength","1","maxlength","500","rows","9","id","dataModel.content",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[4,"ngIf"],["class","row","style","height: 140px; bottom: 4vh; justify-content: center",4,"ngIf"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModelChange","ngModel"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],[1,"row",2,"height","140px","bottom","4vh","justify-content","center"],["type","submit","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled",4,"ngIf"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(r,e){if(r&1){let i=E();t(0,"div",2),C(1,"app-progress-spinner",3),t(2,"div",4)(3,"p",5),o(4),l(5,"translate"),a(),t(6,"p"),o(7),l(8,"translate"),a(),t(9,"form",6,0),f("ngSubmit",function(){return c(i),m(e.onFormSubmit())}),o(11),t(12,"div",7)(13,"div",8)(14,"div",9)(15,"mat-accordion",10)(16,"mat-expansion-panel",11),f("opened",function(){return c(i),m(e.setStep(0))}),t(17,"mat-expansion-panel-header")(18,"mat-panel-title"),o(19),l(20,"translate"),a(),t(21,"mat-panel-description"),o(22),l(23,"translate"),t(24,"mat-icon"),o(25,"account_circle"),a()()(),t(26,"mat-action-row")(27,"button",12),f("click",function(){return c(i),m(e.nextStep())}),o(28),l(29,"translate"),a()()(),t(30,"mat-expansion-panel",11),f("opened",function(){return c(i),m(e.setStep(1))}),t(31,"mat-expansion-panel-header")(32,"mat-panel-title"),o(33),l(34,"translate"),a(),t(35,"mat-panel-description"),o(36),l(37,"translate"),t(38,"mat-icon"),o(39,"map"),a()()(),w(40,Ge,2,1,"textarea",13)(41,We,4,3,"button",14)(42,qe,4,3,"button",14),t(43,"mat-action-row")(44,"button",15),f("click",function(){return c(i),m(e.prevStep())}),o(45),l(46,"translate"),a(),t(47,"button",12),f("click",function(){return c(i),m(e.nextStep())}),o(48),l(49,"translate"),a()()(),t(50,"mat-expansion-panel",11),f("opened",function(){return c(i),m(e.setStep(2))}),t(51,"mat-expansion-panel-header")(52,"mat-panel-title"),o(53),l(54,"translate"),a(),t(55,"mat-panel-description"),o(56),l(57,"translate"),t(58,"mat-icon"),o(59,"date_range"),a()()(),t(60,"mat-action-row")(61,"button",15),f("click",function(){return c(i),m(e.prevStep())}),o(62),l(63,"translate"),a(),t(64,"button",12),f("click",function(){return c(i),m(e.nextStep())}),o(65),l(66,"translate"),a()()(),t(67,"mat-expansion-panel",11),f("opened",function(){return c(i),m(e.setStep(3))}),t(68,"mat-expansion-panel-header")(69,"mat-panel-title"),o(70),l(71,"translate"),a(),t(72,"mat-panel-description"),o(73),l(74,"translate"),t(75,"mat-icon"),o(76,"date_range"),a()()(),C(77,"div",8)(78,"hr"),t(79,"mat-action-row")(80,"button",15),f("click",function(){return c(i),m(e.prevStep())}),o(81),l(82,"translate"),a(),t(83,"button",12),f("click",function(){return c(i),m(e.nextStep())}),o(84),l(85,"translate"),a()()(),t(86,"mat-expansion-panel",11),f("opened",function(){return c(i),m(e.setStep(4))}),t(87,"mat-expansion-panel-header")(88,"mat-panel-title"),o(89),l(90,"translate"),a(),t(91,"mat-panel-description"),o(92),l(93,"translate"),t(94,"mat-icon"),o(95,"date_range"),a()()(),t(96,"mat-action-row")(97,"button",15),f("click",function(){return c(i),m(e.prevStep())}),o(98),l(99,"translate"),a(),t(100,"button",12),f("click",function(){return c(i),m(e.nextStep())}),o(101),l(102,"translate"),a()()(),t(103,"mat-expansion-panel",11),f("opened",function(){return c(i),m(e.setStep(5))}),t(104,"mat-expansion-panel-header")(105,"mat-panel-title"),o(106),l(107,"translate"),a(),t(108,"mat-panel-description"),o(109),l(110,"translate"),t(111,"mat-icon"),o(112,"date_range"),a()()(),t(113,"div",16)(114,"div",17)(115,"h5",18),o(116),l(117,"translate"),a()(),t(118,"div",19)(119,"div",20)(120,"input",21),V("ngModelChange",function(S){return c(i),B(e.dataModel.sendToAll,S)||(e.dataModel.sendToAll=S),m(S)}),a(),C(121,"label",22),a()()(),t(122,"mat-action-row")(123,"button",15),f("click",function(){return c(i),m(e.prevStep())}),o(124),l(125,"translate"),a(),t(126,"button",12),f("click",function(){return c(i),m(e.nextStep())}),o(127),l(128,"translate"),a()()()()(),t(129,"div",9)(130,"div",23)(131,"div",24)(132,"div",25)(133,"label",26),o(134),l(135,"translate"),a(),t(136,"textarea",27,1),V("ngModelChange",function(S){return c(i),B(e.dataModel.content,S)||(e.dataModel.content=S),m(S)}),a(),t(138,"em"),o(139),a(),w(140,Qe,6,6,"mat-error",28),a()(),w(141,Ke,2,1,"div",29),a()()()()()()()}if(r&2){let i=j(137);n(),M("optionsInfoAreaId",e.constructorInfoAreaId),n(3),s(" ",p(5,43,"TITLE.EDIT_USER_ACCOUNT")," "),n(3),s(" ",p(8,45,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),s(" ",e.formInfo.formTitle," "),n(5),M("expanded",e.step===0),n(3),s(" ",p(20,47,"TITLE.Direction")," "),n(3),s(" ",p(23,49,"TITLE.Select_the_path_to_send_the_message")," "),n(6),s(" ",p(29,51,"ACTION.NEXT")," "),n(2),M("expanded",e.step===1),n(3),s(" ",p(34,53,"TITLE.Message_Text")," "),n(3),s(" ",p(37,55,"TITLE.Select_the_text_of_the_default_messages")," "),n(4),M("ngIf",(e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0),n(),M("ngIf",(e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0&&(e.dataModel.content==null?null:e.dataModel.content.length)>0),n(),M("ngIf",(e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0),n(3),s(" ",p(46,57,"ACTION.BACK")," "),n(3),s(" ",p(49,59,"ACTION.NEXT")," "),n(2),M("expanded",e.step===2),n(3),s(" ",p(54,61,"TITLE.Phonebook")," "),n(3),s(" ",p(57,63,"TITLE.Audience_selection")," "),n(6),s(" ",p(63,65,"ACTION.BACK")," "),n(3),s(" ",p(66,67,"ACTION.NEXT")," "),n(2),M("expanded",e.step===3),n(3),s(" ",p(71,69,"TITLE.Shipping_time")," "),n(3),s(" ",p(74,71,"TITLE.Time_to_start_sending_and_finish")," "),n(8),s(" ",p(82,73,"ACTION.BACK")," "),n(3),s(" ",p(85,75,"ACTION.NEXT")," "),n(2),M("expanded",e.step===4),n(3),s(" ",p(90,77,"TITLE.Timing")," "),n(3),s(" ",p(93,79,"TITLE.Retry_schedule")," "),n(6),s(" ",p(99,81,"ACTION.BACK")," "),n(3),s(" ",p(102,83,"ACTION.NEXT")," "),n(2),M("expanded",e.step===5),n(3),s(" ",p(107,85,"TITLE.Settings")," "),n(3),s(" ",p(110,87,"TITLE.Send_settings")," "),n(7),s(" ",p(117,89,"TITLE.Send_To_All")," "),n(4),k("ngModel",e.dataModel.sendToAll),n(4),s(" ",p(125,91,"ACTION.BACK")," "),n(3),s(" ",p(128,93,"ACTION.END")," "),n(7),G(p(135,95,"TITLE.Message_Text")),n(2),k("ngModel",e.dataModel.content),n(3),s("",i.value.length," / 500"),n(),M("ngIf",i.errors==null?null:i.errors.required),n(),M("ngIf",e.formInfo.submitButtonEnabled)}},dependencies:[z,ce,re,ae,se,le,me,ue,de,pe,xe,_e,Ce,Se,ve,he,Me,Te,we,Pe,Ae],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}.mat-tab-group[_ngcontent-%COMP%]{height:95%}.message-box[_ngcontent-%COMP%]{background-image:url(/assets/media/bg/iphone.png);height:600px;width:300px;background-position:center;background-repeat:no-repeat;background-size:cover;padding-right:33px;padding-left:33px}.message-box-button[_ngcontent-%COMP%]{color:#00f;border-color:transparent;background-color:transparent}.message-box-button[_ngcontent-%COMP%]:hover{color:red;font-size:initial}.message-box-button[_ngcontent-%COMP%]:active{color:#a200ff}"]});var I=T;var Xe=[{path:"",component:P,data:{title:"ROUTE.CORE.ACTION"},children:[{path:"send-notification",component:I,data:{title:"ROUTE.CORE.ACTION"}},{path:"send-notification/inbox-extras",component:I,data:{title:"ROUTE.CORE.ACTION"}},{path:"send-notification/outbox-extras",component:I,data:{title:"ROUTE.CORE.ACTION"}}]}],v=class v{};v.\u0275fac=function(r){return new(r||v)},v.\u0275mod=N({type:v}),v.\u0275inj=y({imports:[Q.forChild(Xe),Q]});var L=v;var x=class x{};x.\u0275fac=function(r){return new(r||x)},x.\u0275mod=N({type:x}),x.\u0275inj=y({providers:[$,O,ee,Le,R],imports:[J,L,fe,ge.withConfig({warnOnNgModelWithFormControl:"never"}),Oe,Ne,Ie,be,Ee]});var De=x;export{De as CoreMainActionModule};
