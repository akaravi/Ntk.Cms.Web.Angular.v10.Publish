import{a as me}from"./chunk-5CUEEOJ3.js";import{f as de}from"./chunk-NSI52VTG.js";import{Cb as ce,Da as se,Db as pe,m as ne,x as le,y as ae}from"./chunk-WIVKQDM4.js";import{A as re,c as ee,h as te,l as ie,r as oe}from"./chunk-QRBNL5ZA.js";import{D as h,R as Z,ba as x,cb as I,q as X,u as p,v as Y,y as f}from"./chunk-2ZWWK4AL.js";import{Ab as u,Cb as H,Db as j,Dc as y,Eb as G,Ec as _,Fb as c,Gb as l,Hb as a,Ib as C,K as F,O as V,Pb as A,Sb as S,Ub as g,Va as n,Vb as W,Wb as U,Xa as N,Xc as K,Z as P,_ as k,cb as d,cc as $,ec as z,hc as v,ib as q,ic as T,jc as J,pa as b,qa as M,s as E,t as D,tc as L,td as Q,uc as O,xb as B,zb as m}from"./chunk-2AL2II5Z.js";import{i as w}from"./chunk-SEDBTTTN.js";var he=["*"];function Ce(r,e){if(r&1&&(l(0,"label",3),v(1),a()),r&2){let i=g();c("for",O("app-cms-site-selector-",i.id)),n(),T(i.optionLabel)}}function be(r,e){if(r&1&&(l(0,"mat-option",6)(1,"span"),v(2),a()()),r&2){let i=e.$implicit,o=g();c("value",i)("disabled",o.optionDisabled),n(2),T(o.displayOption(i))}}function Me(r,e){r&1&&C(0,"i",7)}function Se(r,e){r&1&&C(0,"i",8)}function ge(r,e){if(r&1){let i=A();l(0,"i",11),S("click",function(){b(i);let t=g();return M(t.onActionSelectClear())}),a()}}function ve(r,e){r&1&&(l(0,"em"),v(1),y(2,"translate"),a()),r&2&&(n(),J("(",_(2,1,"TITLE.Necessary"),")"))}var s=class s{constructor(e,i,o,t,R){this.coreEnumService=e;this.translate=i;this.cdr=o;this.publicHelper=t;this.categoryService=R;this.id=++s.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new X;this.dataModelSelect=new I;this.formControl=new ie;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new N;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(P(""),F(1500),V(),k(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){return e?e.id:void 0}displayOption(e){return e?e.id:void 0}DataGetAll(e){return w(this,null,function*(){let i=new Y;if(i.rowPerPage=20,i.accessLoad=!0,e&&e.length>0){let t=new p;t=new p,t.propertyName="username",t.value=e,t.searchType=h.Contains,t.clauseType=f.Or,i.filters.push(t),t=new p,t.propertyName="name",t.value=e,t.searchType=h.Contains,t.clauseType=f.Or,i.filters.push(t),t=new p,t.propertyName="email",t.value=e,t.searchType=h.Contains,t.clauseType=f.Or,i.filters.push(t),t=new p,t.propertyName="lastname",t.value=e,t.searchType=h.Contains,t.clauseType=f.Or,i.filters.push(t),e&&typeof+e=="number"&&+e>0&&(t=new p,t.propertyName="id",t.value=e,t.searchType=h.Equal,t.clauseType=f.Or,i.filters.push(t))}let o=this.constructor.name+"categoryService.ServiceGetAll";return this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(o,t,this.constructorInfoAreaId)}),yield E(this.categoryService.ServiceGetAll(i)).then(t=>(this.dataModelResult=t,this.publicHelper.processService.processStop(o),t.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe(D(i=>(i.find(o=>o.id===e.id)||i.push(e),i)))}onActionSelectForce(e){if(typeof e=="string"&&e.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===e)){let i=this.dataModelResult.listItems.find(o=>o.id===e);this.dataModelSelect=i,this.formControl.setValue(i);return}this.categoryService.ServiceGetOneById(e).subscribe({next:i=>{i.isSuccess&&(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item))}});return}if(typeof e==typeof I){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new I,this.loadOptions()}};s.nextId=0,s.\u0275fac=function(i){return new(i||s)(d(x),d(ce),d(K),d(de),d(Z))},s.\u0275cmp=q({type:s,selectors:[["app-cms-member-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:he,decls:16,vars:23,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],[1,"color-highlight",3,"for"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled"],[1,"fa-solid","fa-info","invalid","color-red-dark"],[1,"fa-solid","fa-check","valid","color-green-dark"],[1,"fa-solid","fa-times","action","color-red-dark"],[1,"fa-solid","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[1,"fa-solid","fa-times","action","color-red-dark",3,"click"]],template:function(i,o){if(i&1){let t=A();W(),l(0,"div",1),C(1,"app-progress-spinner",2),m(2,Ce,2,3,"label",3),C(3,"input",4),l(4,"mat-autocomplete",5,0),S("optionSelected",function(fe){return b(t),M(o.onActionSelect(fe.option.value))}),j(6,be,3,3,"mat-option",6,H),y(8,"async"),a(),m(9,Me,1,0,"i",7),m(10,Se,1,0,"i",8),m(11,ge,1,0,"i",9),l(12,"i",10),y(13,"translate"),S("click",function(){return b(t),M(o.onActionButtonReload())}),a(),m(14,ve,3,3,"em"),U(15),a()}if(i&2){let t=$(5);n(),c("optionsInfoAreaId",o.constructorInfoAreaId),n(),u((o.optionLabel==null?null:o.optionLabel.length)>0?2:-1),n(),c("placeholder",L(o.optionPlaceholder))("id",O("app-cms-site-selector-",o.id))("formControl",o.formControl)("matAutocomplete",t)("required",o.optionRequired),B("disabled",o.optionDisabled?!0:null),n(),c("displayWith",o.displayFn),n(2),G(_(8,19,o.filteredOptions)),n(3),u(o.formControl.valid?-1:9),n(),u(o.optionRequired&&o.formControl.valid?10:-1),n(),u((o.dataModelSelect==null||o.dataModelSelect.id==null?null:o.dataModelSelect.id.length)>0?11:-1),n(),z("rotation360",o.publicHelper.processService.process.inRunArea[o.constructorInfoAreaId]),c("title",L(_(13,21,"ACTION.RELOAD"))),n(2),u(o.optionRequired&&(!o.dataModelSelect||!o.dataModelSelect.id||(o.dataModelSelect.id==null?null:o.dataModelSelect.id.length)===0)?14:-1)}},dependencies:[ee,te,re,oe,le,ne,ae,se,me,Q,pe],encapsulation:2});var ue=s;export{ue as a};
