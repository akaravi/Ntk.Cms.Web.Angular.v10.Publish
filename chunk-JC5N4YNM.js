import{B as g,C as h,D as ae,E as pe,F as me,H as se,P as fe,n as ie,o as j,q as ne,r as c,s as C,t as re,v as $,z as le}from"./chunk-QFK6R63V.js";import{Ca as L,E as K,Fa as r,Ic as u,Jb as B,Jc as x,Kc as ee,Lc as oe,Mb as d,Nb as Y,Ob as v,Pa as f,Qa as Q,Va as s,Vc as te,X as Z,Xa as W,ca as P,cb as E,da as M,ib as i,jb as l,kb as a,lb as m,sb as X,vb as H,xb as p}from"./chunk-MDNBQXON.js";var y=class y{};y.\u0275fac=function(e){return new(e||y)},y.\u0275mod=Q({type:y}),y.\u0275inj=Z({imports:[te,fe]});var de=y;function ue(t,o){if(t&1&&m(0,"input",2),t&2){let e=p();i("id",e.field.name)("name",e.field.name)("formControl",e.optionFormControl),E("type",e.field.type)}}function Ce(t,o){if(t&1&&m(0,"textarea",3),t&2){let e=p();B("is-invalid",e.isDirty&&!e.isValid),i("formControl",e.optionFormControl)("id",e.field.name)("placeholder",e.field.placeholder)}}var b=class b{constructor(){this.field={}}get isValid(){return this.optionFormControl.valid}get isDirty(){return this.optionFormControl.dirty}};b.\u0275fac=function(e){return new(e||b)},b.\u0275cmp=f({type:b,selectors:[["textbox"]],inputs:{field:"field",optionFormControl:"optionFormControl"},standalone:!1,decls:2,vars:2,consts:[["class","form-control input-ltr",3,"id","name","formControl",4,"ngIf"],["rows","9","class","form-control input-ltr",3,"is-invalid","formControl","id","placeholder",4,"ngIf"],[1,"form-control","input-ltr",3,"id","name","formControl"],["rows","9",1,"form-control","input-ltr",3,"formControl","id","placeholder"]],template:function(e,n){e&1&&s(0,ue,1,4,"input",0)(1,Ce,1,5,"textarea",1),e&2&&(i("ngIf",!n.field.multiline),r(),i("ngIf",n.field.multiline))},dependencies:[x,j,c,g],encapsulation:2});var A=b;function he(t,o){if(t&1&&(l(0,"option",2),d(1),a()),t&2){let e=o.$implicit;i("value",e.key),r(),Y(e.label)}}var G=class G{constructor(){this.field={}}};G.\u0275fac=function(e){return new(e||G)},G.\u0275cmp=f({type:G,selectors:[["dropdown"]],inputs:{field:"field",optionFormControl:"optionFormControl"},standalone:!1,decls:2,vars:3,consts:[[1,"form-control",3,"id","formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){e&1&&(l(0,"select",0),s(1,he,2,2,"option",1),a()),e&2&&(i("id",n.field.name)("formControl",n.optionFormControl),r(),i("ngForOf",n.field.options))},dependencies:[u,me,se,pe,c,g],encapsulation:2});var R=G;function ye(t,o){if(t&1&&(l(0,"div",2)(1,"label",3),m(2,"input",4),d(3),a()()),t&2){let e=o.$implicit;r(2),i("formControlName",e.key),r(),v(" ",e.label)}}var w=class w{constructor(){this.field={}}get isValid(){return this.optionFormGroup.controls[this.field.name].valid}get isDirty(){return this.optionFormGroup.controls[this.field.name].dirty}};w.\u0275fac=function(e){return new(e||w)},w.\u0275cmp=f({type:w,selectors:[["checkbox"]],inputs:{field:"field",optionFormGroup:"optionFormGroup"},standalone:!1,decls:2,vars:2,consts:[[3,"formGroup"],["class","form-check form-check ",4,"ngFor","ngForOf"],[1,"form-check","form-check"],[1,"form-check-label"],["type","checkbox","id","inlineCheckbox1","value","option1",1,"form-check-input","input-ltr",3,"formControlName"]],template:function(e,n){e&1&&(l(0,"div",0),s(1,ye,4,2,"div",1),a()),e&2&&(i("formGroup",n.optionFormGroup),r(),i("ngForOf",n.field.options))},dependencies:[u,ie,c,C,h,ae],encapsulation:2});var q=w;function xe(t,o){if(t&1){let e=X();l(0,"div",3),H("hovered",function(k){P(e);let O=p();return M(O.toggleHover(k))})("dropped",function(k){P(e);let O=p();return M(O.field.onUpload(k))}),l(1,"p",4),d(2," Drag a file here or "),l(3,"label",5)(4,"input",6),H("change",function(k){P(e);let O=p();return M(O.field.onUpload(k.target.files))}),a(),d(5," browse "),a(),d(6," to upload. "),a()()}if(t&2){let e=p();B("hovering",e.isHovering)}}function be(t,o){if(t&1&&(l(0,"div")(1,"div",7),m(2,"img",8),a()()),t&2){let e=p();r(2),i("src",e.field.value,L)}}var V=class V{constructor(){this.field={};this.isHovering=!1}get isValid(){return this.optionFormControl.controls[this.field.name].valid}get isDirty(){return this.optionFormControl.controls[this.field.name].dirty}ngOnChange(){}toggleHover(o){this.isHovering=!0}};V.\u0275fac=function(e){return new(e||V)},V.\u0275cmp=f({type:V,selectors:[["file"]],inputs:{field:"field",optionFormControl:"optionFormControl"},standalone:!1,decls:3,vars:3,consts:[[3,"formGroup"],["class","drop-container dropzone","dropZone","",3,"hovering","hovered","dropped",4,"ngIf"],[4,"ngIf"],["dropZone","",1,"drop-container","dropzone",3,"hovered","dropped"],[1,"m-0"],[1,"upload-button"],["type","file","multiple","",3,"change"],[1,"card"],[1,"card-img-top",3,"src"]],template:function(e,n){e&1&&(l(0,"div",0),s(1,xe,7,2,"div",1)(2,be,3,1,"div",2),a()),e&2&&(i("formGroup",n.optionFormControl),r(),i("ngIf",!n.field.value),r(),i("ngIf",n.field.value))},dependencies:[x,C,h],styles:[".drop-container[_ngcontent-%COMP%]{background:#fff;border-radius:6px;height:150px;width:100%;box-shadow:1px 2px 20px #0a0a0a1a;display:flex;align-items:center;justify-content:center;border:2px dashed #c0c4c7}p[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#c0c4c7}.upload-button[_ngcontent-%COMP%]{display:inline-block;border:none;outline:none;cursor:pointer;color:#5754a3}.upload-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.dropzone[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:5px;background:#fff;margin:10px 0}.dropzone.hovering[_ngcontent-%COMP%]{border:2px solid #f16624;color:#dadada!important}progress[_ngcontent-%COMP%]::-webkit-progress-value{transition:width .1s ease}"]});var J=V;function Ie(t,o){if(t&1&&(l(0,"div",1),m(1,"input",2),l(2,"label",3),d(3),a()()),t&2){let e=o.$implicit,n=p();r(),i("formControl",n.optionFormControl)("value",e.key),r(2),v(" ",e.label," ")}}var D=class D{constructor(){this.field={}}};D.\u0275fac=function(e){return new(e||D)},D.\u0275cmp=f({type:D,selectors:[["radio"]],inputs:{field:"field",optionFormControl:"optionFormControl"},standalone:!1,decls:1,vars:1,consts:[["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input","input-ltr",3,"formControl","value"],[1,"form-check-label"]],template:function(e,n){e&1&&s(0,Ie,4,3,"div",0),e&2&&i("ngForOf",n.field.options)},dependencies:[u,j,le,c,g],encapsulation:2});var U=D;function Ge(t,o){t&1&&(l(0,"strong",8),d(1,"*"),a())}function we(t,o){if(t&1&&m(0,"textbox",9),t&2){let e=p();i("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function Ve(t,o){if(t&1&&m(0,"textbox",9),t&2){let e=p();i("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function De(t,o){if(t&1&&m(0,"dropdown",9),t&2){let e=p();i("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function Se(t,o){if(t&1&&m(0,"checkbox",10),t&2){let e=p();i("field",e.field)("optionFormGroup",e.convertToFormGroup(e.formGroup.get(e.field.name)))}}function Te(t,o){if(t&1&&m(0,"radio",9),t&2){let e=p();i("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function ke(t,o){if(t&1&&m(0,"file",11),t&2){let e=p();i("field",e.field)("formControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function Oe(t,o){if(t&1&&(l(0,"div",12),d(1),a()),t&2){let e=p();r(),v("",e.field.label," is required")}}var S=class S{get isValid(){return this.formGroup.controls[this.field.name].valid}get isDirty(){return this.formGroup.controls[this.field.name].dirty}constructor(){}ngOnInit(){}convertToFormControl(o){return o}convertToFormGroup(o){return o}};S.\u0275fac=function(e){return new(e||S)},S.\u0275cmp=f({type:S,selectors:[["field-builder"]],inputs:{field:"field",formGroup:"formGroup"},standalone:!1,decls:12,vars:12,consts:[[1,"form-group","row",3,"formGroup"],[1,"col-md-3","form-control-label"],["class","text-danger",4,"ngIf"],[1,"col-md-9",3,"ngSwitch"],[3,"field","optionFormControl",4,"ngSwitchCase"],[3,"field","optionFormGroup",4,"ngSwitchCase"],[3,"field","formControl",4,"ngSwitchCase"],["class","alert alert-danger my-1 p-2 fadeInDown animated",4,"ngIf"],[1,"text-danger"],[3,"field","optionFormControl"],[3,"field","optionFormGroup"],[3,"field","formControl"],[1,"alert","alert-danger","my-1","p-2","fadeInDown","animated"]],template:function(e,n){e&1&&(l(0,"div",0)(1,"label",1),d(2),s(3,Ge,2,0,"strong",2),a(),l(4,"div",3),s(5,we,1,2,"textbox",4)(6,Ve,1,2,"textbox",4)(7,De,1,2,"dropdown",4)(8,Se,1,2,"checkbox",5)(9,Te,1,2,"radio",4)(10,ke,1,2,"file",6)(11,Oe,2,1,"div",7),a()()),e&2&&(i("formGroup",n.formGroup),r(),E("for",n.field.label),r(),v(" ",n.field.label," "),r(),i("ngIf",n.field.required&&n.formGroup.get(n.field.name).invalid),r(),i("ngSwitch",n.field.type),r(),i("ngSwitchCase","text"),r(),i("ngSwitchCase","date"),r(),i("ngSwitchCase","dropdown"),r(),i("ngSwitchCase","checkbox"),r(),i("ngSwitchCase","radio"),r(),i("ngSwitchCase","file"),r(),i("ngIf",!n.isValid&&n.isDirty))},dependencies:[x,ee,oe,c,C,g,h,A,R,q,J,U],encapsulation:2});var z=S;function Me(t,o){if(t&1&&(l(0,"div"),m(1,"field-builder",1),a()),t&2){let e=o.$implicit,n=p();r(),i("field",e)("formGroup",n.formGroup)}}var T=class T{constructor(){this.jsonValueChange=new W;this.privatePropertiesInfos=[];this.formValues={};this.fields=[];this.DEBOUNCE_TIME_FORM_INPUT=250}set jsonValue(o){o&&o.length>0&&(this.privateJsonValue=JSON.parse(o),this.theKeys=Object.getOwnPropertyNames(this.privateJsonValue).toString(),this.actionSetValue())}set propertiesInfos(o){this.privatePropertiesInfos=o,this.actionFormMake(),this.actionSetValue()}ngOnInit(){}ngAfterViewInit(){this.unsubcribe=this.formGroup.valueChanges.pipe(K(this.DEBOUNCE_TIME_FORM_INPUT)).subscribe(o=>{this.formValues||(this.formValues={}),this.privatePropertiesInfos&&this.privatePropertiesInfos.length>0&&this.privatePropertiesInfos.forEach(e=>{(o[e.fieldName]||o[e.fieldName]==="")&&(this.formValues[e.fieldName]=o[e.fieldName]),this.jsonValueChange.emit(JSON.stringify(this.formValues))})})}actionFormMake(){this.privatePropertiesInfos&&(this.fields=[],this.privatePropertiesInfos.forEach(o=>{let e="";switch(this.formValues&&this.formValues[o.fieldName]&&(e=this.formValues[o.fieldName]),o.fieldTypeString){case"System.String":this.fields.push({type:"text",name:o.fieldName,label:o.fieldTitle,value:e,required:!1});break;case"System.Int64":this.fields.push({type:"text",name:o.fieldName,label:o.fieldTitle,value:e,required:!1});break;case"System.Int32":this.fields.push({type:"text",name:o.fieldName,label:o.fieldTitle,value:e,required:!1});break;default:this.fields.push({type:"text",name:o.fieldName,label:o.fieldTitle,value:e,required:!1});break}})),this.fields.forEach(o=>{o.type==="checkbox"?(this.formGroup.addControl(o.name,new re({})),o.options.forEach(e=>{this.formGroup.get(o.name).addControl(e.key,new $(!1))})):this.formGroup.addControl(o.name,new $(o.value||"",o.required?ne.required:null))})}actionSetValue(){this.privateJsonValue&&this.privatePropertiesInfos&&this.privatePropertiesInfos.length>0&&this.privatePropertiesInfos.forEach(o=>{if(this.formValues||(this.formValues={}),this.getPropValue(o.fieldName)?this.formValues[o.fieldName]=this.getPropValue(o.fieldName):this.formValues[o.fieldName]="",this.formValues[o.fieldName]&&this.fields.findIndex(e=>e.name===o.fieldName)>=0){let e=this.formValues[o.fieldName];this.fields.find(n=>n.name===o.fieldName).value=e,this.formGroup.get(o.fieldName).setValue(e,{emitEvent:!1})}})}getPropValue(o){var e=new RegExp(o,"i").exec(this.theKeys);return e&&e.length>0?this.privateJsonValue[e[0]]:""}ngDistroy(){this.unsubcribe()}};T.\u0275fac=function(e){return new(e||T)},T.\u0275cmp=f({type:T,selectors:[["dynamic-form-builder-cms"]],inputs:{jsonValue:"jsonValue",propertiesInfos:"propertiesInfos",formGroup:"formGroup"},outputs:{jsonValueChange:"jsonValueChange"},standalone:!1,decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"field","formGroup"]],template:function(e,n){e&1&&s(0,Me,2,2,"div",0),e&2&&i("ngForOf",n.fields)},dependencies:[u,C,h,z],encapsulation:2});var ce=T;export{ce as a,de as b};
