import{A as g,B as y,C as re,D as le,E as ae,G as pe,m as te,n as A,p as oe,q as f,r as v,s as ie,u as K,y as ne}from"./chunk-OTF4BMY2.js";import{Ab as p,Ca as L,F as Z,Fa as r,Ha as Q,Mb as B,Mc as X,Nc as Y,Oc as ee,Pb as d,Rb as c,Sa as m,Ya as H,da as E,db as O,ea as M,fb as F,gb as x,ib as u,jb as C,kb as h,lb as n,mb as l,nb as a,ob as s,vb as W,yb as $}from"./chunk-AWISVKDS.js";function me(o,t){if(o&1&&s(0,"input",0),o&2){let e=p();n("id",e.field.name)("name",e.field.name)("formControl",e.optionFormControl),O("type",e.field.type)}}function de(o,t){if(o&1&&s(0,"textarea",2),o&2){let e=p();B("is-invalid",e.isDirty&&!e.isValid),n("formControl",e.optionFormControl)("id",e.field.name)("placeholder",e.field.placeholder)}}var b=class b{constructor(){this.field={}}get isValid(){return this.optionFormControl.valid}get isDirty(){return this.optionFormControl.dirty}};b.\u0275fac=function(e){return new(e||b)},b.\u0275cmp=m({type:b,selectors:[["textbox"]],inputs:{field:"field",optionFormControl:"optionFormControl"},standalone:!1,decls:2,vars:2,consts:[[1,"form-control","input-ltr",3,"id","name","formControl"],["rows","9",1,"form-control","input-ltr",3,"is-invalid","formControl","id","placeholder"],["rows","9",1,"form-control","input-ltr",3,"formControl","id","placeholder"]],template:function(e,i){e&1&&(F(0,me,1,4,"input",0),F(1,de,1,5,"textarea",1)),e&2&&(x(i.field.multiline?-1:0),r(),x(i.field.multiline?1:-1))},dependencies:[A,f,g],encapsulation:2});var j=b;function ce(o,t){if(o&1&&(l(0,"option",1),d(1),a()),o&2){let e=t.$implicit;n("value",e.key),r(),c(" ",e.label," ")}}var w=class w{constructor(){this.field={}}};w.\u0275fac=function(e){return new(e||w)},w.\u0275cmp=m({type:w,selectors:[["dropdown"]],inputs:{field:"field",optionFormControl:"optionFormControl"},standalone:!1,decls:3,vars:2,consts:[[1,"form-control",3,"id","formControl"],[3,"value"]],template:function(e,i){e&1&&(l(0,"select",0),C(1,ce,2,2,"option",1,u),a()),e&2&&(n("id",i.field.name)("formControl",i.optionFormControl),r(),h(i.field.options))},dependencies:[ae,pe,le,f,g],encapsulation:2});var q=w;function Ce(o,t){if(o&1&&(l(0,"div",1)(1,"label",2),s(2,"input",3),d(3),a()()),o&2){let e=t.$implicit;r(2),n("formControlName",e.key),r(),c(" ",e.label)}}var N=class N{constructor(){this.field={}}get isValid(){return this.optionFormGroup.controls[this.field.name].valid}get isDirty(){return this.optionFormGroup.controls[this.field.name].dirty}};N.\u0275fac=function(e){return new(e||N)},N.\u0275cmp=m({type:N,selectors:[["checkbox"]],inputs:{field:"field",optionFormGroup:"optionFormGroup"},standalone:!1,decls:3,vars:1,consts:[[3,"formGroup"],[1,"form-check","form-check"],[1,"form-check-label"],["type","checkbox","id","inlineCheckbox1","value","option1",1,"form-check-input","input-ltr",3,"formControlName"]],template:function(e,i){e&1&&(l(0,"div",0),C(1,Ce,4,2,"div",1,u),a()),e&2&&(n("formGroup",i.optionFormGroup),r(),h(i.field.options))},dependencies:[te,f,v,y,re],encapsulation:2});var J=N;function ve(o,t){if(o&1){let e=W();l(0,"div",2),$("hovered",function(k){E(e);let P=p();return M(P.toggleHover(k))})("dropped",function(k){E(e);let P=p();return M(P.field.onUpload(k))}),l(1,"p",3),d(2," Drag a file here or "),l(3,"label",4)(4,"input",5),$("change",function(k){E(e);let P=p();return M(P.field.onUpload(k.target.files))}),a(),d(5," browse "),a(),d(6," to upload. "),a()()}if(o&2){let e=p();B("hovering",e.isHovering)}}function ge(o,t){if(o&1&&(l(0,"div")(1,"div",6),s(2,"img",7),a()()),o&2){let e=p();r(2),n("src",e.field.value,L)}}var V=class V{constructor(){this.field={};this.isHovering=!1}get isValid(){return this.optionFormControl.controls[this.field.name].valid}get isDirty(){return this.optionFormControl.controls[this.field.name].dirty}ngOnChange(){}toggleHover(t){this.isHovering=!0}};V.\u0275fac=function(e){return new(e||V)},V.\u0275cmp=m({type:V,selectors:[["file"]],inputs:{field:"field",optionFormControl:"optionFormControl"},standalone:!1,decls:3,vars:3,consts:[[3,"formGroup"],["dropZone","",1,"drop-container","dropzone",3,"hovering"],["dropZone","",1,"drop-container","dropzone",3,"hovered","dropped"],[1,"m-0"],[1,"upload-button"],["type","file","multiple","",3,"change"],[1,"card"],[1,"card-img-top",3,"src"]],template:function(e,i){e&1&&(l(0,"div",0),F(1,ve,7,2,"div",1),F(2,ge,3,1,"div"),a()),e&2&&(n("formGroup",i.optionFormControl),r(),x(i.field.value?-1:1),r(),x(i.field.value?2:-1))},dependencies:[v,y],styles:[".drop-container[_ngcontent-%COMP%]{background:#fff;border-radius:6px;height:150px;width:100%;box-shadow:1px 2px 20px #0a0a0a1a;display:flex;align-items:center;justify-content:center;border:2px dashed #c0c4c7}p[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#c0c4c7}.upload-button[_ngcontent-%COMP%]{display:inline-block;border:none;outline:none;cursor:pointer;color:#5754a3}.upload-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.dropzone[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:5px;background:#fff;margin:10px 0}.dropzone.hovering[_ngcontent-%COMP%]{border:2px solid #f16624;color:#dadada!important}progress[_ngcontent-%COMP%]::-webkit-progress-value{transition:width .1s ease}"]});var R=V;function Fe(o,t){if(o&1&&(l(0,"div",0),s(1,"input",1),l(2,"label",2),d(3),a()()),o&2){let e=t.$implicit,i=p();r(),n("formControl",i.optionFormControl)("value",e.key),r(2),c(" ",e.label," ")}}var S=class S{constructor(){this.field={}}};S.\u0275fac=function(e){return new(e||S)},S.\u0275cmp=m({type:S,selectors:[["radio"]],inputs:{field:"field",optionFormControl:"optionFormControl"},standalone:!1,decls:2,vars:0,consts:[[1,"form-check"],["type","radio",1,"form-check-input","input-ltr",3,"formControl","value"],[1,"form-check-label"]],template:function(e,i){e&1&&C(0,Fe,4,3,"div",0,u),e&2&&h(i.field.options)},dependencies:[A,ne,f,g],encapsulation:2});var U=S;function be(o,t){o&1&&(l(0,"strong",8),d(1,"*"),a())}function _e(o,t){if(o&1&&s(0,"textbox",9),o&2){let e=p();n("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function Ge(o,t){if(o&1&&s(0,"textbox",9),o&2){let e=p();n("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function Ie(o,t){if(o&1&&s(0,"dropdown",9),o&2){let e=p();n("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function we(o,t){if(o&1&&s(0,"checkbox",10),o&2){let e=p();n("field",e.field)("optionFormGroup",e.convertToFormGroup(e.formGroup.get(e.field.name)))}}function Ne(o,t){if(o&1&&s(0,"radio",9),o&2){let e=p();n("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function Ve(o,t){if(o&1&&s(0,"file",11),o&2){let e=p();n("field",e.field)("formControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function Se(o,t){if(o&1&&(l(0,"div",12),d(1),a()),o&2){let e=p();r(),c(" ",e.field.label," is required ")}}var T=class T{get isValid(){return this.formGroup.controls[this.field.name].valid}get isDirty(){return this.formGroup.controls[this.field.name].dirty}constructor(){}ngOnInit(){}convertToFormControl(t){return t}convertToFormGroup(t){return t}};T.\u0275fac=function(e){return new(e||T)},T.\u0275cmp=m({type:T,selectors:[["field-builder"]],inputs:{field:"field",formGroup:"formGroup"},standalone:!1,decls:12,vars:12,consts:[[1,"form-group","row",3,"formGroup"],[1,"col-md-3","form-control-label"],["class","text-danger",4,"ngIf"],[1,"col-md-9",3,"ngSwitch"],[3,"field","optionFormControl",4,"ngSwitchCase"],[3,"field","optionFormGroup",4,"ngSwitchCase"],[3,"field","formControl",4,"ngSwitchCase"],["class","alert alert-danger my-1 p-2 fadeInDown animated",4,"ngIf"],[1,"text-danger"],[3,"field","optionFormControl"],[3,"field","optionFormGroup"],[3,"field","formControl"],[1,"alert","alert-danger","my-1","p-2","fadeInDown","animated"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"label",1),d(2),H(3,be,2,0,"strong",2),a(),l(4,"div",3),H(5,_e,1,2,"textbox",4)(6,Ge,1,2,"textbox",4)(7,Ie,1,2,"dropdown",4)(8,we,1,2,"checkbox",5)(9,Ne,1,2,"radio",4)(10,Ve,1,2,"file",6)(11,Se,2,1,"div",7),a()()),e&2&&(n("formGroup",i.formGroup),r(),O("for",i.field.label),r(),c(" ",i.field.label," "),r(),n("ngIf",i.field.required&&i.formGroup.get(i.field.name).invalid),r(),n("ngSwitch",i.field.type),r(),n("ngSwitchCase","text"),r(),n("ngSwitchCase","date"),r(),n("ngSwitchCase","dropdown"),r(),n("ngSwitchCase","checkbox"),r(),n("ngSwitchCase","radio"),r(),n("ngSwitchCase","file"),r(),n("ngIf",!i.isValid&&i.isDirty))},dependencies:[X,Y,ee,f,v,g,y,j,q,J,R,U],encapsulation:2});var z=T;function De(o,t){if(o&1&&(l(0,"div"),s(1,"field-builder",0),a()),o&2){let e=t.$implicit,i=p();r(),n("field",e)("formGroup",i.formGroup)}}var D=class D{constructor(){this.jsonValueChange=new Q;this.privatePropertiesInfos=[];this.formValues={};this.fields=[];this.DEBOUNCE_TIME_FORM_INPUT=250}set jsonValue(t){t&&t.length>0&&(this.privateJsonValue=JSON.parse(t),this.theKeys=Object.getOwnPropertyNames(this.privateJsonValue).toString(),this.actionSetValue())}set propertiesInfos(t){this.privatePropertiesInfos=t,this.actionFormMake(),this.actionSetValue()}ngOnInit(){}ngAfterViewInit(){this.unsubcribe=this.formGroup.valueChanges.pipe(Z(this.DEBOUNCE_TIME_FORM_INPUT)).subscribe(t=>{this.formValues||(this.formValues={}),this.privatePropertiesInfos&&this.privatePropertiesInfos.length>0&&this.privatePropertiesInfos.forEach(e=>{(t[e.fieldName]||t[e.fieldName]==="")&&(this.formValues[e.fieldName]=t[e.fieldName]),this.jsonValueChange.emit(JSON.stringify(this.formValues))})})}actionFormMake(){this.privatePropertiesInfos&&(this.fields=[],this.privatePropertiesInfos.forEach(t=>{let e="";switch(this.formValues&&this.formValues[t.fieldName]&&(e=this.formValues[t.fieldName]),t.fieldTypeString){case"System.String":this.fields.push({type:"text",name:t.fieldName,label:t.fieldTitle,value:e,required:!1});break;case"System.Int64":this.fields.push({type:"text",name:t.fieldName,label:t.fieldTitle,value:e,required:!1});break;case"System.Int32":this.fields.push({type:"text",name:t.fieldName,label:t.fieldTitle,value:e,required:!1});break;default:this.fields.push({type:"text",name:t.fieldName,label:t.fieldTitle,value:e,required:!1});break}})),this.fields.forEach(t=>{t.type==="checkbox"?(this.formGroup.addControl(t.name,new ie({})),t.options.forEach(e=>{this.formGroup.get(t.name).addControl(e.key,new K(!1))})):this.formGroup.addControl(t.name,new K(t.value||"",t.required?oe.required:null))})}actionSetValue(){this.privateJsonValue&&this.privatePropertiesInfos&&this.privatePropertiesInfos.length>0&&this.privatePropertiesInfos.forEach(t=>{if(this.formValues||(this.formValues={}),this.getPropValue(t.fieldName)?this.formValues[t.fieldName]=this.getPropValue(t.fieldName):this.formValues[t.fieldName]="",this.formValues[t.fieldName]&&this.fields.findIndex(e=>e.name===t.fieldName)>=0){let e=this.formValues[t.fieldName];this.fields.find(i=>i.name===t.fieldName).value=e,this.formGroup.get(t.fieldName).setValue(e,{emitEvent:!1})}})}getPropValue(t){var e=new RegExp(t,"i").exec(this.theKeys);return e&&e.length>0?this.privateJsonValue[e[0]]:""}ngDistroy(){this.unsubcribe()}};D.\u0275fac=function(e){return new(e||D)},D.\u0275cmp=m({type:D,selectors:[["dynamic-form-builder-cms"]],inputs:{jsonValue:"jsonValue",propertiesInfos:"propertiesInfos",formGroup:"formGroup"},outputs:{jsonValueChange:"jsonValueChange"},standalone:!1,decls:2,vars:0,consts:[[3,"field","formGroup"]],template:function(e,i){e&1&&C(0,De,2,2,"div",null,u),e&2&&h(i.fields)},dependencies:[v,y,z],encapsulation:2});var se=D;export{se as a};
