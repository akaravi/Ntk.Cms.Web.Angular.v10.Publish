import{Dc as f,vc as m}from"./chunk-QGGCLMQI.js";import{Ja as c,Ka as s,Kd as h,Ra as d,ha as n,ua as o,uc as u,vb as l}from"./chunk-MDNBQXON.js";import{i as a}from"./chunk-SEDBTTTN.js";var S="https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",g="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png",E="https://replit.com/public/images/loading_dots.gif",i=class i{constructor(t,e,r,v,R,b){this.elRef=t;this.renderer=e;this.publicHelper=r;this.cmsToastrService=v;this.cdr=R;this.document=b;this.DataEnumRecordStatus()}DataEnumRecordStatus(){return a(this,null,function*(){(yield this.publicHelper.getEnumRecordStatus()).listItems.forEach(e=>{let r=document.createElement("option");r.innerHTML=" "+e.title+' <i Class="'+this.iconStatus(e.value)+'"></i>',r.value=e.value.toString(),this.elRef.nativeElement.add(r)}),this.elRef.nativeElement.options.length>0&&this.row&&this.row.recordStatus&&this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus)})}onChange(){let t=this.elRef.nativeElement,e=t.value;this.addLoader(t),this.contentService.setAccessDataType(h.Editor),this.contentService.ServiceSetStatus(this.row.id,e).subscribe({next:r=>{r.isSuccess?(this.handleSuccessCase(t),this.cmsToastrService.typeSuccessSetStatus(r.errorMessage),this.row.recordStatus=e|0,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(r.errorMessage),this.handleErrorCase(t))},error:r=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(r),this.handleErrorCase(t)}})}handleSuccessCase(t){this.removeBackground(t),this.addSuccess(t),setTimeout(()=>{this.removeBackground(t)},1e3)}handleErrorCase(t){this.removeBackground(t);let e=this.document.createElement("img");e.style.width="20px",e.src=g;let r=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(r,e),setTimeout(()=>{this.renderer.removeChild(r,e)},1e3)}addLoader(t){this.addBackground(t,E,20)}addSuccess(t){this.addBackground(t,S,20)}addBackground(t,e,r){t.style.background=`#fff url("${e}") no-repeat right 20px center`,t.style.backgroundSize=`${r}px`}removeBackground(t){t.style.background="none"}iconStatus(t){let e="";switch(t){case 1:e="fa fa-check";break;case 2:e="fa fa-eye-slash";break;case 3:e="fa fa-times";break;case 4:e="fa fa-hourglass-half";break;case 5:e="far fa-thumbs-down";break;case 6:e="fa fa-archive";break;default:e="fa fa-check"}return e}};i.\u0275fac=function(e){return new(e||i)(s(o),s(c),s(f),s(m),s(u),s(n))},i.\u0275dir=d({type:i,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(e,r){e&1&&l("change",function(){return r.onChange()})},inputs:{row:"row",contentService:"contentService"},standalone:!1});var p=i;export{p as a};
