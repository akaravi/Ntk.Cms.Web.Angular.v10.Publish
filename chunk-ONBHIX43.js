import{a as he}from"./chunk-ZF5WNLZZ.js";import{a as fe}from"./chunk-WNSH5NW4.js";import{f as me}from"./chunk-ALWDDZYF.js";import{A as oe,J as re,R as ae,Z as le,aa as se,ba as ce,cc as ue,dc as de,gb as pe,n as te,q as ie,u as ne}from"./chunk-5WYASXHL.js";import{Ab as f,Bb as z,Ca as y,Cb as U,F,Fa as r,Ff as I,Gd as X,Ha as N,I as k,Kb as W,Kd as _,Ld as Y,Mb as $,Oa as m,Od as S,P as V,Pb as b,Q as q,Qb as A,Rb as J,Sa as B,Sc as Q,Td as M,Yb as C,Zb as R,da as P,db as H,ea as g,fb as c,fc as h,gb as p,gc as v,ib as j,jb as x,kb as G,lb as l,mb as a,nb as s,ob as d,p as w,pe as Z,q as D,se as ee,vb as T,xc as K,yb as L}from"./chunk-QKIEHXIF.js";import{i as E}from"./chunk-SEDBTTTN.js";var Ce=["*"];function Se(o,e){if(o&1&&(a(0,"label",3),b(1),s()),o&2){let t=f();l("for",R("app-cms-site-selector-",t.id)),r(),A(t.optionLabel)}}function Me(o,e){if(o&1&&(d(0,"img",5),h(1,"cmsthumbnail")),o&2){let t=f();l("src",C(v(1,2,t.dataModelSelect==null?null:t.dataModelSelect.linkImageIdSrc)),y)}}function Pe(o,e){if(o&1&&(d(0,"img",5),h(1,"cmsthumbnail")),o&2){let t=f().$implicit;l("src",C(v(1,2,t.linkImageIdSrc)),y)}}function ge(o,e){if(o&1&&(a(0,"mat-option",8),c(1,Pe,2,4,"img",5),a(2,"span"),b(3),s()()),o&2){let t=e.$implicit,i=f();l("value",t)("disabled",i.optionDisabled),r(),p(t.linkImageIdSrc?1:-1),r(2),A(i.displayOption(t))}}function Le(o,e){o&1&&d(0,"i",9)}function be(o,e){o&1&&d(0,"i",10)}function Ie(o,e){if(o&1){let t=T();a(0,"i",13),L("click",function(){P(t);let n=f();return g(n.onActionSelectClear())}),s()}}function ye(o,e){o&1&&(a(0,"em"),b(1),h(2,"translate"),s()),o&2&&(r(),J("(",v(2,1,"TITLE.Necessary"),")"))}var u=class u{constructor(e,t,i,n,O){this.coreEnumService=e;this.translate=t;this.publicHelper=i;this.cdr=n;this.categoryService=O;this.id=++u.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new X;this.dataModelSelect=new I;this.formControl=new ne;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new N;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(V(""),F(1500),k(),q(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}displayOption(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}DataGetAll(e){return E(this,null,function*(){let t=new Y;if(t.rowPerPage=20,t.accessLoad=!0,e&&e.length>0){let n=new _;n=new _,n.propertyName="Symbol",n.value=e,n.searchType=M.Contains,n.clauseType=S.Or,t.filters.push(n),n=new _,n.propertyName="title",n.value=e,n.searchType=M.Contains,n.clauseType=S.Or,t.filters.push(n),n=new _,n.propertyName="TitleResourceLanguage",n.value=e,n.searchType=M.Contains,n.clauseType=S.Or,t.filters.push(n),n=new _,n.propertyName="id",n.value=e,n.searchType=M.Equal,n.clauseType=S.Or,t.filters.push(n)}let i=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(n=>{this.publicHelper.processService.processStart(i,n,this.constructorInfoAreaId)}),yield w(this.categoryService.ServiceGetAll(t)).then(n=>(this.dataModelResult=n,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(i),n.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe(D(t=>(t.find(i=>i.id===e.id)||t.push(e),t)))}onActionSelectForce(e){if(typeof e=="number"&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(t=>t.id===e)){let t=this.dataModelResult.listItems.find(i=>i.id===e);this.dataModelSelect=t,this.formControl.setValue(t);return}this.categoryService.ServiceGetOneIncludeParent(e).subscribe({next:t=>{t.isSuccess&&(this.filteredOptions=this.push(t.item),this.dataModelSelect=t.item,this.formControl.setValue(t.item),this.optionChange.emit(t.item))}});return}if(typeof e==typeof I){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new I,this.loadOptions()}};u.nextId=0,u.\u0275fac=function(t){return new(t||u)(m(Z),m(ue),m(me),m(K),m(ee))},u.\u0275cmp=B({type:u,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:Ce,decls:18,vars:24,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],[1,"color-highlight",3,"for"],["matPrefix",""],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(t,i){if(t&1){let n=T();z(),a(0,"div",1),d(1,"app-progress-spinner",2),c(2,Se,2,3,"label",3),a(3,"span",4),c(4,Me,2,4,"img",5),s(),d(5,"input",6),a(6,"mat-autocomplete",7,0),L("optionSelected",function(_e){return P(n),g(i.onActionSelect(_e.option.value))}),x(8,ge,4,4,"mat-option",8,j),h(10,"async"),s(),c(11,Le,1,0,"i",9),c(12,be,1,0,"i",10),c(13,Ie,1,0,"i",11),a(14,"i",12),h(15,"translate"),L("click",function(){return P(n),g(i.onActionButtonReload())}),s(),c(16,ye,3,3,"em"),U(17),s()}if(t&2){let n=W(7);r(),l("optionsInfoAreaId",i.constructorInfoAreaId),r(),p((i.optionLabel==null?null:i.optionLabel.length)>0?2:-1),r(2),p(i.dataModelSelect&&(i.dataModelSelect!=null&&i.dataModelSelect.linkImageIdSrc)?4:-1),r(),l("placeholder",C(i.optionPlaceholder))("id",R("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",n)("required",i.optionRequired),H("disabled",i.optionDisabled?!0:null),r(),l("displayWith",i.displayFn),r(2),G(v(10,20,i.filteredOptions)),r(3),p(i.formControl.valid?-1:11),r(),p(i.optionRequired&&i.formControl.valid?12:-1),r(),p((i.dataModelSelect==null?null:i.dataModelSelect.id)>0?13:-1),r(),$("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),l("title",C(v(15,22,"ACTION.RELOAD"))),r(2),p(i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0)?16:-1)}},dependencies:[te,ie,re,oe,se,ae,ce,le,pe,fe,Q,de,he],encapsulation:2});var ve=u;export{ve as a};
