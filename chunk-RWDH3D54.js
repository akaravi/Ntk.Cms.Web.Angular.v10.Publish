import{b as Hi}from"./chunk-CU3OLILU.js";import{a as Vi}from"./chunk-GHOZ2SNL.js";import{Bb as vi,Dc as ki,Jb as xi,K as ci,Kb as wi,L as di,Lb as yi,M as mi,Mb as Mi,Nb as bi,Ob as Ti,Pa as pi,Pb as Ei,Q as qi,Qb as Ii,Rb as Si,Sb as Li,Tb as Ut,U as ui,Wa as _i,fc as Di,gc as Pi,ma as Xi,nc as Ai,o as oi,r as ri,vc as Ri,w as li,wb as gi,xb as Ci,y as si}from"./chunk-QFK6R63V.js";import{Bb as ei,Ca as Ct,Cb as ti,Db as ii,Ef as hi,Fa as m,Ff as Se,Gf as $i,Hf as $t,Ic as zi,If as Oi,Jb as Nt,Jc as ai,Ka as Et,Mb as w,Nb as ye,Ob as ce,Pa as Jt,Pb as ni,Sb as fe,Tb as he,Ub as _e,Ud as fi,Va as I,Vb as Ue,Xa as Qt,bc as ie,ca as F,cc as ne,da as B,ib as C,jb as u,kb as p,lb as ge,pb as A,qb as R,sb as J,vb as te,xb as f}from"./chunk-MDNBQXON.js";import{a as Ot}from"./chunk-SEDBTTTN.js";window.libpannellum=function(i,n,e){"use strict";function l(de,Ze){var K;de&&(K=n.createElement("canvas"),K.style.width=K.style.height="100%",de.appendChild(K));var g,o,Ge,Xe,W,k,Te,me,We,Gt,at,y,le,Y,dt,Fe,Lt,mt,Je=["f","b","u","d","l","r"],ut=["f","r","b","l","u","d"];Ze&&(o=Ze),this.init=function(c,x,h,E,D,O,T){if(x===e&&(x="equirectangular"),x!="equirectangular"&&x!="cubemap"&&x!="multires")throw console.log("Error: invalid image type specified!"),{type:"config error"};if(le=x,y=c,mt=T||{},g){if(Ge&&(o.detachShader(g,Ge),o.deleteShader(Ge)),Xe&&(o.detachShader(g,Xe),o.deleteShader(Xe)),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null),g.texture&&o.deleteTexture(g.texture),g.nodeCache)for(var G=0;G<g.nodeCache.length;G++)o.deleteTexture(g.nodeCache[G].texture);if(g.textureLoads)for(ae=[];g.textureLoads.length>0;)g.textureLoads.shift()(!1);o.deleteProgram(g),g=e}W&&(k&&(o.detachShader(W,k),o.deleteShader(k)),Te&&(o.detachShader(W,Te),o.deleteShader(Te)),o.deleteProgram(W),W=e),at=e;var H,Q=!1,ee;if(le=="cubemap")for(H=0;H<6;H++)y[H].width>0?(ee===e&&(ee=y[H].width),ee!=y[H].width&&console.log("Cube faces have inconsistent widths: "+ee+" vs. "+y[H].width)):Q=!0;function $(P){if(Q){var we=P*P*4,be=new Uint8ClampedArray(we),z=T.backgroundColor?T.backgroundColor:[0,0,0];z[0]*=255,z[1]*=255,z[2]*=255;for(var q=0;q<we;q++)be[q++]=z[0],be[q++]=z[1],be[q++]=z[2];var V=new ImageData(be,P,P);for(H=0;H<6;H++)y[H].width==0&&(y[H]=V)}}if(le=="cubemap"&&(ee&ee-1)!==0&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(o||(o=K.getContext("experimental-webgl",{alpha:!1,depth:!1})),o&&o.getError()==1286&&zt()),!o&&(le=="multires"&&y.hasOwnProperty("fallbackPath")||le=="cubemap")&&("WebkitAppearance"in n.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||navigator.appVersion.indexOf("MSIE 10")!==-1)){We&&de.removeChild(We),We=n.createElement("div"),We.className="pnlm-world";var Ce;y.basePath?Ce=y.basePath+y.fallbackPath:Ce=y.fallbackPath;var _t=0,gt=function(){var P=n.createElement("canvas");P.className="pnlm-face pnlm-"+ut[this.side]+"face",We.appendChild(P);var we=P.getContext("2d");P.style.width=this.width+4+"px",P.style.height=this.height+4+"px",P.width=this.width+4,P.height=this.height+4,we.drawImage(this,2,2);var be=we.getImageData(0,0,P.width,P.height),z=be.data,q,V;for(q=2;q<P.width-2;q++)for(V=0;V<4;V++)z[(q+P.width)*4+V]=z[(q+P.width*2)*4+V],z[(q+P.width*(P.height-2))*4+V]=z[(q+P.width*(P.height-3))*4+V];for(q=2;q<P.height-2;q++)for(V=0;V<4;V++)z[(q*P.width+1)*4+V]=z[(q*P.width+2)*4+V],z[((q+1)*P.width-2)*4+V]=z[((q+1)*P.width-3)*4+V];for(V=0;V<4;V++)z[(P.width+1)*4+V]=z[(P.width*2+2)*4+V],z[(P.width*2-2)*4+V]=z[(P.width*3-3)*4+V],z[(P.width*(P.height-2)+1)*4+V]=z[(P.width*(P.height-3)+2)*4+V],z[(P.width*(P.height-1)-2)*4+V]=z[(P.width*(P.height-2)-3)*4+V];for(q=1;q<P.width-1;q++)for(V=0;V<4;V++)z[q*4+V]=z[(q+P.width)*4+V],z[(q+P.width*(P.height-1))*4+V]=z[(q+P.width*(P.height-2))*4+V];for(q=1;q<P.height-1;q++)for(V=0;V<4;V++)z[q*P.width*4+V]=z[(q*P.width+1)*4+V],z[((q+1)*P.width-1)*4+V]=z[((q+1)*P.width-2)*4+V];for(V=0;V<4;V++)z[V]=z[(P.width+1)*4+V],z[(P.width-1)*4+V]=z[(P.width*2-2)*4+V],z[P.width*(P.height-1)*4+V]=z[(P.width*(P.height-2)+1)*4+V],z[(P.width*P.height-1)*4+V]=z[(P.width*(P.height-1)-2)*4+V];we.putImageData(be,0,0),ve.call(this)},ve=function(){this.width>0?(me===e&&(me=this.width),me!=this.width&&console.log("Fallback faces have inconsistent widths: "+me+" vs. "+this.width)):Q=!0,_t++,_t==6&&(me=this.width,de.appendChild(We),O())};for(Q=!1,H=0;H<6;H++){var ue=new Image;ue.crossOrigin=mt.crossOrigin?mt.crossOrigin:"anonymous",ue.side=H,ue.onload=gt,ue.onerror=ve,le=="multires"?ue.src=Ce.replace("%s",ut[H])+(y.extension?"."+y.extension:""):ue.src=y[H].src}$(me);return}else if(!o)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};le=="cubemap"&&$(ee),y.basePath?y.fullpath=y.basePath+y.path:y.fullpath=y.path,y.invTileResolution=1/y.tileResolution;var Ee=Pt();for(Gt=[],H=0;H<6;H++)Gt[H]=Ee.slice(H*12,H*12+12),Ee=Pt();var Re=0;if(le=="equirectangular"){if(Re=o.getParameter(o.MAX_TEXTURE_SIZE),Math.max(y.width/2,y.height)>Re)throw console.log("Error: The image is too big; it's "+y.width+"px wide, but this device's maximum supported size is "+Re*2+"px."),{type:"webgl size error",width:y.width,maxWidth:Re*2}}else if(le=="cubemap"&&ee>o.getParameter(o.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+ee+"px wide, but this device's maximum supported size is "+Re+"px."),{type:"webgl size error",width:ee,maxWidth:Re};if(T!==e){var ke=isNaN(T.horizonPitch)?0:Number(T.horizonPitch),it=isNaN(T.horizonRoll)?0:Number(T.horizonRoll);(ke!=0||it!=0)&&(at=[ke,it])}var oe=o.TEXTURE_2D;if(o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.getShaderPrecisionFormat){var v=o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT);v&&v.precision<1&&(Me=Me.replace("highp","mediump"))}Ge=o.createShader(o.VERTEX_SHADER);var Oe=s;le=="multires"&&(Oe=_),o.shaderSource(Ge,Oe),o.compileShader(Ge),Xe=o.createShader(o.FRAGMENT_SHADER);var Qe=se;if(le=="cubemap"?(oe=o.TEXTURE_CUBE_MAP,Qe=t):le=="multires"&&(Qe=vt),o.shaderSource(Xe,Qe),o.compileShader(Xe),g=o.createProgram(),o.attachShader(g,Ge),o.attachShader(g,Xe),o.linkProgram(g),o.getShaderParameter(Ge,o.COMPILE_STATUS)||console.log(o.getShaderInfoLog(Ge)),o.getShaderParameter(Xe,o.COMPILE_STATUS)||console.log(o.getShaderInfoLog(Xe)),o.getProgramParameter(g,o.LINK_STATUS)||console.log(o.getProgramInfoLog(g)),o.useProgram(g),g.drawInProgress=!1,T.backgroundColor!==null){var De=T.backgroundColor?T.backgroundColor:[0,0,0];o.clearColor(De[0],De[1],De[2],1),o.clear(o.COLOR_BUFFER_BIT)}if(g.texCoordLocation=o.getAttribLocation(g,"a_texCoord"),o.enableVertexAttribArray(g.texCoordLocation),le!="multires"){if(Y||(Y=o.createBuffer()),o.bindBuffer(o.ARRAY_BUFFER,Y),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),o.STATIC_DRAW),o.vertexAttribPointer(g.texCoordLocation,2,o.FLOAT,!1,0,0),g.aspectRatio=o.getUniformLocation(g,"u_aspectRatio"),o.uniform1f(g.aspectRatio,o.drawingBufferWidth/o.drawingBufferHeight),g.psi=o.getUniformLocation(g,"u_psi"),g.theta=o.getUniformLocation(g,"u_theta"),g.f=o.getUniformLocation(g,"u_f"),g.h=o.getUniformLocation(g,"u_h"),g.v=o.getUniformLocation(g,"u_v"),g.vo=o.getUniformLocation(g,"u_vo"),g.rot=o.getUniformLocation(g,"u_rot"),o.uniform1f(g.h,h/(Math.PI*2)),o.uniform1f(g.v,E/Math.PI),o.uniform1f(g.vo,D/Math.PI*2),le=="equirectangular"&&(g.backgroundColor=o.getUniformLocation(g,"u_backgroundColor"),o.uniform4fv(g.backgroundColor,De.concat([1]))),g.texture=o.createTexture(),o.bindTexture(oe,g.texture),le=="cubemap")o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,y[1]),o.texImage2D(o.TEXTURE_CUBE_MAP_NEGATIVE_X,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,y[3]),o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_Y,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,y[4]),o.texImage2D(o.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,y[5]),o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_Z,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,y[0]),o.texImage2D(o.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,y[2]);else if(y.width<=Re)o.uniform1i(o.getUniformLocation(g,"u_splitImage"),0),o.texImage2D(oe,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,y);else{o.uniform1i(o.getUniformLocation(g,"u_splitImage"),1);var lt=n.createElement("canvas");lt.width=y.width/2,lt.height=y.height;var nt=lt.getContext("2d");nt.drawImage(y,0,0);var st=nt.getImageData(0,0,y.width/2,y.height);o.texImage2D(oe,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,st),g.texture2=o.createTexture(),o.activeTexture(o.TEXTURE1),o.bindTexture(oe,g.texture2),o.uniform1i(o.getUniformLocation(g,"u_image1"),1),nt.drawImage(y,-y.width/2,0),st=nt.getImageData(0,0,y.width/2,y.height),o.texImage2D(oe,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,st),o.texParameteri(oe,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(oe,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(oe,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(oe,o.TEXTURE_MAG_FILTER,o.LINEAR),o.activeTexture(o.TEXTURE0)}le!="cubemap"&&y.width&&y.width<=Re&&h==2*Math.PI&&(y.width&y.width-1)==0?o.texParameteri(oe,o.TEXTURE_WRAP_S,o.REPEAT):o.texParameteri(oe,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(oe,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(oe,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(oe,o.TEXTURE_MAG_FILTER,o.LINEAR)}else if(g.vertPosLocation=o.getAttribLocation(g,"a_vertCoord"),o.enableVertexAttribArray(g.vertPosLocation),dt||(dt=o.createBuffer()),Fe||(Fe=o.createBuffer()),Lt||(Lt=o.createBuffer()),o.bindBuffer(o.ARRAY_BUFFER,Fe),o.bufferData(o.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),o.STATIC_DRAW),o.vertexAttribPointer(g.texCoordLocation,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,Lt),o.bufferData(o.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,dt),o.vertexAttribPointer(g.vertPosLocation,3,o.FLOAT,!1,0,0),g.perspUniform=o.getUniformLocation(g,"u_perspMatrix"),g.cubeUniform=o.getUniformLocation(g,"u_cubeMatrix"),g.currentNodes=[],g.nodeCache=[],g.nodeCacheTimestamp=0,g.textureLoads=[],y.shtHash||y.equirectangularThumbnail){k=o.createShader(o.VERTEX_SHADER),o.shaderSource(k,s),o.compileShader(k),Te=o.createShader(o.FRAGMENT_SHADER),o.shaderSource(Te,se),o.compileShader(Te),W=o.createProgram(),o.attachShader(W,k),o.attachShader(W,Te),o.linkProgram(W),o.getShaderParameter(k,o.COMPILE_STATUS)||console.log(o.getShaderInfoLog(k)),o.getShaderParameter(Te,o.COMPILE_STATUS)||console.log(o.getShaderInfoLog(Te)),o.getProgramParameter(W,o.LINK_STATUS)||console.log(o.getProgramInfoLog(W)),o.useProgram(W),W.texCoordLocation=o.getAttribLocation(W,"a_texCoord"),o.enableVertexAttribArray(W.texCoordLocation),Y||(Y=o.createBuffer()),o.bindBuffer(o.ARRAY_BUFFER,Y),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),o.STATIC_DRAW),o.vertexAttribPointer(W.texCoordLocation,2,o.FLOAT,!1,0,0),W.aspectRatio=o.getUniformLocation(W,"u_aspectRatio"),o.uniform1f(W.aspectRatio,o.drawingBufferWidth/o.drawingBufferHeight),W.psi=o.getUniformLocation(W,"u_psi"),W.theta=o.getUniformLocation(W,"u_theta"),W.f=o.getUniformLocation(W,"u_f"),W.h=o.getUniformLocation(W,"u_h"),W.v=o.getUniformLocation(W,"u_v"),W.vo=o.getUniformLocation(W,"u_vo"),W.rot=o.getUniformLocation(W,"u_rot"),o.uniform1f(W.h,1),W.texture=o.createTexture(),o.bindTexture(oe,W.texture);var pe,ct,Ne,xe=function(){o.useProgram(W),o.uniform1i(o.getUniformLocation(W,"u_splitImage"),0),o.texImage2D(oe,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,pe),o.texParameteri(oe,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(oe,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(oe,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(oe,o.TEXTURE_MAG_FILTER,o.LINEAR),o.uniform1f(W.v,ct),o.uniform1f(W.vo,Ne),o.useProgram(g)};if(y.shtHash&&(pe=ht(y.shtHash),ct=(2+1/31)/2,Ne=1-(2+1/31)/2,xe()),y.equirectangularThumbnail)if(typeof y.equirectangularThumbnail=="string")if(y.equirectangularThumbnail.slice(0,5)=="data:")pe=new Image,pe.onload=function(){ct=1,Ne=0,xe()},pe.src=y.equirectangularThumbnail;else throw console.log("Error: thumbnail string is not a data URI!"),{type:"config error"};else pe=y.equirectangularThumbnail,ct=1,Ne=0,xe();o.bindBuffer(o.ARRAY_BUFFER,dt),o.vertexAttribPointer(g.vertPosLocation,3,o.FLOAT,!1,0,0),o.useProgram(g)}var qe=o.getError();if(qe!==0)throw console.log("Error: Something went wrong with WebGL!",qe),{type:"webgl error"};O()},this.destroy=function(){if(de!==e&&(K!==e&&de.contains(K)&&de.removeChild(K),We!==e&&de.contains(We)&&de.removeChild(We)),o){var c=o.getExtension("WEBGL_lose_context");c&&c.loseContext()}},this.resize=function(){var c=i.devicePixelRatio||1;K.width=K.clientWidth*c,K.height=K.clientHeight*c,o&&(o.getError()==1286&&zt(),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),le!="multires"?o.uniform1f(g.aspectRatio,K.clientWidth/K.clientHeight):y.shtHash&&(o.useProgram(W),o.uniform1f(W.aspectRatio,K.clientWidth/K.clientHeight),o.useProgram(g)))},K&&this.resize(),this.setPose=function(c,x){c=isNaN(c)?0:Number(c),x=isNaN(x)?0:Number(x),c==0&&x==0?at=e:at=[c,x]},this.render=function(c,x,h,E){var D,O,T,G=0;if(E===e&&(E={}),E.roll&&(G=E.roll),E.dynamic)var H=E.dynamic;if(at!==e){var Q=at[0],ee=at[1],$=c,Ce=x,_t=Math.cos(ee)*Math.sin(c)*Math.sin(Q)+Math.cos(c)*(Math.cos(Q)*Math.cos(x)+Math.sin(ee)*Math.sin(Q)*Math.sin(x)),gt=-Math.sin(c)*Math.sin(ee)+Math.cos(c)*Math.cos(ee)*Math.sin(x),ve=Math.cos(ee)*Math.cos(Q)*Math.sin(c)+Math.cos(c)*(-Math.cos(x)*Math.sin(Q)+Math.cos(Q)*Math.sin(ee)*Math.sin(x));c=Math.asin(Math.max(Math.min(ve,1),-1)),x=Math.atan2(gt,_t);var ue=[Math.cos($)*(Math.sin(ee)*Math.sin(Q)*Math.cos(Ce)-Math.cos(Q)*Math.sin(Ce)),Math.cos($)*Math.cos(ee)*Math.cos(Ce),Math.cos($)*(Math.cos(Q)*Math.sin(ee)*Math.cos(Ce)+Math.sin(Ce)*Math.sin(Q))],Ee=[-Math.cos(c)*Math.sin(x),Math.cos(c)*Math.cos(x)],Re=Math.acos(Math.max(Math.min((ue[0]*Ee[0]+ue[1]*Ee[1])/(Math.sqrt(ue[0]*ue[0]+ue[1]*ue[1]+ue[2]*ue[2])*Math.sqrt(Ee[0]*Ee[0]+Ee[1]*Ee[1])),1),-1));ue[2]<0&&(Re=2*Math.PI-Re),G+=Re}if(E.hook&&E.hook({gl:o,program:g,previewProgram:W,imageType:le,texCoordBuffer:Y,cubeVertBuf:dt,cubeVertTexCoordBuf:Fe,cubeVertIndBuf:Lt}),!o&&(le=="multires"||le=="cubemap")){T=me/2;var ke={f:"translate3d(-"+(T+2)+"px, -"+(T+2)+"px, -"+T+"px)",b:"translate3d("+(T+2)+"px, -"+(T+2)+"px, "+T+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(T+2)+"px, -"+T+"px, "+(T+2)+"px) rotateX(270deg)",d:"translate3d(-"+(T+2)+"px, "+T+"px, -"+(T+2)+"px) rotateX(90deg)",l:"translate3d(-"+T+"px, -"+(T+2)+"px, "+(T+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+T+"px, -"+(T+2)+"px, -"+(T+2)+"px) rotateY(270deg)"};D=1/Math.tan(h/2);var it=D*K.clientWidth/2+"px",oe="perspective("+it+") translateZ("+it+") rotateX("+c+"rad) rotateY("+x+"rad) ",v=Object.keys(ke);for(O=0;O<6;O++){var Oe=We.querySelector(".pnlm-"+v[O]+"face");Oe&&(Oe.style.webkitTransform=oe+ke[v[O]],Oe.style.transform=oe+ke[v[O]])}return}if(le!="multires"){var Qe=2*Math.atan(Math.tan(h*.5)/(o.drawingBufferWidth/o.drawingBufferHeight));D=1/Math.tan(Qe*.5),o.uniform1f(g.psi,x),o.uniform1f(g.theta,c),o.uniform1f(g.rot,G),o.uniform1f(g.f,D),H===!0&&le=="equirectangular"&&(o.bindTexture(o.TEXTURE_2D,g.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,y)),o.drawArrays(o.TRIANGLES,0,6)}else{var De=typeof y.shtHash<"u"||typeof y.equirectangularThumbnail<"u",lt=De;if(De&&g.currentNodes.length>=6){lt=!1;for(var O=0;O<6;O++)if(!g.currentNodes[O].textureLoaded){lt=!0;break}}if(lt){o.useProgram(W),o.bindBuffer(o.ARRAY_BUFFER,Y),o.vertexAttribPointer(W.texCoordLocation,2,o.FLOAT,!1,0,0),o.bindTexture(o.TEXTURE_2D,W.texture);var Qe=2*Math.atan(Math.tan(h*.5)/(o.drawingBufferWidth/o.drawingBufferHeight));D=1/Math.tan(Qe*.5),o.uniform1f(W.psi,x),o.uniform1f(W.theta,c),o.uniform1f(W.rot,G),o.uniform1f(W.f,D),o.drawArrays(o.TRIANGLES,0,6),o.bindBuffer(o.ARRAY_BUFFER,dt),o.vertexAttribPointer(g.vertPosLocation,3,o.FLOAT,!1,0,0),o.useProgram(g)}var nt=Yt(h,o.drawingBufferWidth/o.drawingBufferHeight,.1,100),st=Yt(h,o.drawingBufferWidth/o.drawingBufferHeight,-100,100),pe=wt();pe=yt(pe,-G,"z"),pe=yt(pe,-c,"x"),pe=yt(pe,x,"y"),pe=Wt(pe),o.uniformMatrix4fv(g.perspUniform,!1,ze(nt)),o.uniformMatrix4fv(g.cubeUniform,!1,ze(pe));var ct=kt(nt,pe),Ne=kt(st,pe);if(g.nodeCache.sort(Dt),g.nodeCache.length>200&&g.nodeCache.length>g.currentNodes.length+50)for(var xe=g.nodeCache.splice(200,g.nodeCache.length-200),qe=0;qe<xe.length;qe++)o.deleteTexture(xe[qe].texture);for(g.currentNodes=[],T=0;T<6;T++){var P=new Le(Gt[T],Je[T],1,0,0,y.fullpath,null);ot(ct,Ne,P,c,x,h)}for(g.currentNodes.sort(Ae),O=ae.length-1;O>=0;O--)g.currentNodes.indexOf(ae[O].node)===-1&&(ae[O].node.textureLoad=!1,ae.splice(O,1));if(ae.length===0)for(O=0;O<g.currentNodes.length;O++){var we=g.currentNodes[O];if(!we.texture&&!we.textureLoad){we.textureLoad=!0,setTimeout(je,0,we);break}}g.textureLoads.length>0&&g.textureLoads.shift()(!0),Ye(!De)}if(E.returnImage!==e)return i.createImageBitmap&&E.returnImage=="ImageBitmap"?createImageBitmap(K):E.returnImage.toString().indexOf("image/")==0?K.toDataURL(E.returnImage):K.toDataURL("image/png")},this.isLoading=function(){if(o&&le=="multires"){for(var c=0;c<g.currentNodes.length;c++)if(!g.currentNodes[c].textureLoaded)return!0}return!1},this.isBaseLoaded=function(){if(g.currentNodes.length>=6){for(var c=0;c<6;c++)if(!g.currentNodes[c].textureLoaded)return!1;return!0}return!1},this.getCanvas=function(){return K};function Dt(c,x){return c.level==1&&x.level!=1?-1:x.level==1&&c.level!=1?1:x.timestamp-c.timestamp}function Ae(c,x){return c.level!=x.level?c.level-x.level:c.diff-x.diff}function Ye(c){if(!g.drawInProgress){g.drawInProgress=!0,c&&o.clear(o.COLOR_BUFFER_BIT);for(var x={},h=0;h<g.currentNodes.length;h++)x[g.currentNodes[h].parentPath]===e&&(x[g.currentNodes[h].parentPath]=0),x[g.currentNodes[h].parentPath]+=!(g.currentNodes[h].textureLoaded>1);for(var h=0;h<g.currentNodes.length;h++)g.currentNodes[h].textureLoaded>1&&x[g.currentNodes[h].path]!=4&&(o.bufferData(o.ARRAY_BUFFER,g.currentNodes[h].vertices,o.STATIC_DRAW),o.bindTexture(o.TEXTURE_2D,g.currentNodes[h].texture),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0));g.drawInProgress=!1}}function Le(c,x,h,E,D,O,T){this.vertices=c,this.side=x,this.level=h,this.x=E,this.y=D;var G=typeof O=="object"?O.tileKey:O;G=G.replace("%s",x).replace("%l0",h-1).replace("%l",h).replace("%x",E).replace("%y",D),this.path=typeof O=="object"?O[G]:G,this.parentPath=T}function ot(c,x,h,E,D,O){if(bt(c,h.vertices)){for(var T=[],G=[],H=2,Q=[],ee=0,$=0;$<4;$++){var Ce=X(x,h.vertices.slice($*3,($+1)*3));T.push(Ce[0]*Ce[3]),G.push(Ce[1]*Ce[3]);var _t=Ce[2]*Ce[3];H=Math.min(H,_t),Q.push(Math.abs(T[$])<=1&&Math.abs(G[$])<=1&&_t>0),ee+=Q[$]}var gt=y.cubeResolution*Math.pow(2,h.level-y.maxLevel),ve=Math.ceil(gt*y.invTileResolution)-1,ue=gt%y.tileResolution*2,Ee=gt*2%y.tileResolution;if(Ee===0&&(Ee=y.tileResolution),ue===0&&(ue=y.tileResolution*2),h.level>1&&H>0&&ee>0){for(var Re=0,$=0;$<4;$++){var ke=($+1)%4;if(Q[$]||Q[ke]){var it=(T[ke]-T[$])*o.drawingBufferWidth/2,oe=(G[ke]-G[$])*o.drawingBufferHeight/2;Ee<y.tileResolution&&(h.x==ve?it*=y.tileResolution/Ee:h.y==ve&&(oe*=y.tileResolution/Ee)),ue<=y.tileResolution&&(h.x==ve&&(it*=2),h.y==ve&&(oe*=2)),Re=Math.max(Re,Math.sqrt(it*it+oe*oe))}}if(Re<=y.tileResolution/2)return}var v=h.vertices,Oe=v[0]+v[3]+v[6]+v[9],Qe=v[1]+v[4]+v[7]+v[10],De=v[2]+v[5]+v[8]+v[11],lt=Math.sqrt(Oe*Oe+Qe*Qe+De*De),nt=Math.asin(De/lt),st=Math.atan2(Qe,Oe),pe=st-D;pe+=pe>Math.PI?-2*Math.PI:pe<-Math.PI?2*Math.PI:0,pe=Math.abs(pe),h.diff=Math.acos(Math.sin(E)*Math.sin(nt)+Math.cos(E)*Math.cos(nt)*Math.cos(pe));for(var ct=!1,Ne=0;Ne<g.nodeCache.length;Ne++)if(g.nodeCache[Ne].path==h.path){ct=!0,g.nodeCache[Ne].timestamp=g.nodeCacheTimestamp++,g.nodeCache[Ne].diff=h.diff,g.currentNodes.push(g.nodeCache[Ne]);break}if(ct||(h.timestamp=g.nodeCacheTimestamp++,g.currentNodes.push(h),g.nodeCache.push(h)),h.level<y.maxLevel){var xe=.5;(h.x==ve||h.y==ve)&&(xe=1-y.tileResolution/(y.tileResolution+Ee));var $=1-xe,qe=[],P,we,be=xe,z=xe,q=xe,V=$,Ie=$,Ve=$;Ee<y.tileResolution&&(h.x==ve&&h.y!=ve?(z=.5,Ie=.5,(h.side=="d"||h.side=="u")&&(q=.5,Ve=.5)):h.x!=ve&&h.y==ve&&(be=.5,V=.5,(h.side=="l"||h.side=="r")&&(q=.5,Ve=.5))),ue<=y.tileResolution&&(h.x==ve&&(be=0,V=1,(h.side=="l"||h.side=="r")&&(q=0,Ve=1)),h.y==ve&&(z=0,Ie=1,(h.side=="d"||h.side=="u")&&(q=0,Ve=1))),P=new Float32Array([v[0],v[1],v[2],v[0]*be+v[3]*V,v[1]*xe+v[4]*$,v[2]*q+v[5]*Ve,v[0]*be+v[6]*V,v[1]*z+v[7]*Ie,v[2]*q+v[8]*Ve,v[0]*xe+v[9]*$,v[1]*z+v[10]*Ie,v[2]*q+v[11]*Ve]),we=new Le(P,h.side,h.level+1,h.x*2,h.y*2,y.fullpath,h.path),qe.push(we),h.x==ve&&ue<=y.tileResolution||(P=new Float32Array([v[0]*be+v[3]*V,v[1]*xe+v[4]*$,v[2]*q+v[5]*Ve,v[3],v[4],v[5],v[3]*xe+v[6]*$,v[4]*z+v[7]*Ie,v[5]*q+v[8]*Ve,v[0]*be+v[6]*V,v[1]*z+v[7]*Ie,v[2]*q+v[8]*Ve]),we=new Le(P,h.side,h.level+1,h.x*2+1,h.y*2,y.fullpath,h.path),qe.push(we)),!(h.x==ve&&ue<=y.tileResolution)&&!(h.y==ve&&ue<=y.tileResolution)&&(P=new Float32Array([v[0]*be+v[6]*V,v[1]*z+v[7]*Ie,v[2]*q+v[8]*Ve,v[3]*xe+v[6]*$,v[4]*z+v[7]*Ie,v[5]*q+v[8]*Ve,v[6],v[7],v[8],v[9]*be+v[6]*V,v[10]*xe+v[7]*$,v[11]*q+v[8]*Ve]),we=new Le(P,h.side,h.level+1,h.x*2+1,h.y*2+1,y.fullpath,h.path),qe.push(we)),h.y==ve&&ue<=y.tileResolution||(P=new Float32Array([v[0]*xe+v[9]*$,v[1]*z+v[10]*Ie,v[2]*q+v[11]*Ve,v[0]*be+v[6]*V,v[1]*z+v[7]*Ie,v[2]*q+v[8]*Ve,v[9]*be+v[6]*V,v[10]*xe+v[7]*$,v[11]*q+v[8]*Ve,v[9],v[10],v[11]]),we=new Le(P,h.side,h.level+1,h.x*2,h.y*2+1,y.fullpath,h.path),qe.push(we));for(var ke=0;ke<qe.length;ke++)ot(c,x,qe[ke],E,D,O)}}}function Pt(){return new Float32Array([-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1])}function wt(){return new Float32Array([1,0,0,0,1,0,0,0,1])}function yt(c,x,h){var E=Math.sin(x),D=Math.cos(x);if(h=="x")return new Float32Array([c[0],D*c[1]+E*c[2],D*c[2]-E*c[1],c[3],D*c[4]+E*c[5],D*c[5]-E*c[4],c[6],D*c[7]+E*c[8],D*c[8]-E*c[7]]);if(h=="y")return new Float32Array([D*c[0]-E*c[2],c[1],D*c[2]+E*c[0],D*c[3]-E*c[5],c[4],D*c[5]+E*c[3],D*c[6]-E*c[8],c[7],D*c[8]+E*c[6]]);if(h=="z")return new Float32Array([D*c[0]+E*c[1],D*c[1]-E*c[0],c[2],D*c[3]+E*c[4],D*c[4]-E*c[3],c[5],D*c[6]+E*c[7],D*c[7]-E*c[6],c[8]])}function Wt(c){return new Float32Array([c[0],c[1],c[2],0,c[3],c[4],c[5],0,c[6],c[7],c[8],0,0,0,0,1])}function ze(c){return new Float32Array([c[0],c[4],c[8],c[12],c[1],c[5],c[9],c[13],c[2],c[6],c[10],c[14],c[3],c[7],c[11],c[15]])}function Yt(c,x,h,E){var D=2*Math.atan(Math.tan(c/2)*o.drawingBufferHeight/o.drawingBufferWidth),O=1/Math.tan(D/2);return new Float32Array([O/x,0,0,0,0,O,0,0,0,0,(E+h)/(h-E),2*E*h/(h-E),0,0,-1,0])}function At(c,x){o.bindTexture(o.TEXTURE_2D,x),o.texImage2D(o.TEXTURE_2D,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,c),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.bindTexture(o.TEXTURE_2D,null)}var ae=[],rt=function(){var c=4,x={},h;function E(){var G=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=h||"anonymous";var H=function(){g.textureLoads.push(function(Q){Q&&(G.image.width>0&&G.image.height>0?(At(G.image,G.texture),G.callback(G.texture,!0)):G.callback(G.texture,!1)),O(G)})};this.image.addEventListener("load",H),this.image.addEventListener("error",H)}E.prototype.loadTexture=function(G,H,Q){this.texture=H,this.callback=Q,this.image.src=G};function D(G,H,Q,ee){this.node=G,this.src=H,this.texture=Q,this.callback=ee}function O(G){if(ae.length){var H=ae.shift();G.loadTexture(H.src,H.texture,H.callback)}else x[c++]=G}for(var T=0;T<c;T++)x[T]=new E;return function(G,H,Q,ee){h=ee;var $=o.createTexture();return c?x[--c].loadTexture(H,$,Q):ae.push(new D(G,H,$,Q)),$}}();function $e(c){rt(c,c.path+(y.extension?"."+y.extension:""),function(x,h){c.texture=x,c.textureLoaded=h?2:1},mt.crossOrigin)}var je;if(i.Worker&&i.createImageBitmap){let c=function(){self.onmessage=function(x){var h=x.data[0],E=x.data[1];fetch(h,{mode:"cors",credentials:E=="use-credentials"?"include":"same-origin"}).then(function(D){return D.blob()}).then(function(D){return createImageBitmap(D)}).then(function(D){postMessage([h,!0,D],[D])}).catch(function(){postMessage([h,!1])})}};var Rt=new Blob(["("+c.toString()+")()"],{type:"application/javascript"}),jt=new Worker(URL.createObjectURL(Rt)),L={};jt.onmessage=function(x){var h=x.data[0],E=x.data[1],D=x.data[2];g.textureLoads.push(function(O){var T,G=!1;E&&O&&(T=o.createTexture(),At(D,T),G=!0);var H=L[h];delete L[h],H!==e&&(H.texture=T,H.textureLoaded=G?2:1)})},je=function(x){var h=new URL(x.path+(y.extension?"."+y.extension:""),i.location).href;L[h]=x,jt.postMessage([h,mt.crossOrigin])}}else je=$e;function kt(c,x){return new Float32Array([c[0]*x[0],c[0]*x[1],c[0]*x[2],0,c[5]*x[4],c[5]*x[5],c[5]*x[6],0,c[10]*x[8],c[10]*x[9],c[10]*x[10],c[11],-x[8],-x[9],-x[10],0])}function X(c,x){return new Float32Array([c[0]*x[0]+c[1]*x[1]+c[2]*x[2],c[4]*x[0]+c[5]*x[1]+c[6]*x[2],c[11]+c[8]*x[0]+c[9]*x[1]+c[10]*x[2],1/(c[12]*x[0]+c[13]*x[1]+c[14]*x[2])])}function Mt(c,x){var h=X(c,x),E=h[0]*h[3],D=h[1]*h[3],O=h[2]*h[3],T=[0,0,0];return E<-1&&(T[0]=-1),E>1&&(T[0]=1),D<-1&&(T[1]=-1),D>1&&(T[1]=1),(O<-1||O>1)&&(T[2]=1),T}function bt(c,x){var h=Mt(c,x.slice(0,3)),E=Mt(c,x.slice(3,6)),D=Mt(c,x.slice(6,9)),O=Mt(c,x.slice(9,12)),T=h[0]+E[0]+D[0]+O[0];if(T==-4||T==4)return!1;var G=h[1]+E[1]+D[1]+O[1];if(G==-4||G==4)return!1;var H=h[2]+E[2]+D[2]+O[2];return H!=4}function zt(){console.log("Reducing canvas size due to error 1286!"),K.width=Math.round(K.width/2),K.height=Math.round(K.height/2)}var Vt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~",pt="Bf[ff4fff|ffff0fffffBo@Ri5xag{Jmdf2+WiefCs@Ll7+Vi]Btag6[NmdgCv=Ho9;Qk;7zWiF_GsahDy:ErE?Mn$5+SkS_AyWiD#-CuJ[Iqp6;Nnx?7*SlE$*BxR@FtPA?Jq+%7:NnF*zAzn?CwIG@Ft-Y9?IrG+vA%w:AzGR?Cx*IF@EuI,nA+$*9%Gu:A#xCR?ByJ-VB-*wA+J**9*ZBv:9%L.QD.*aB.O.v9-MF+$8,O:MG:*OD;a:UB:IO:n9:Q:KJ;#IG=u-KE=Hs:MC?T:IO=wEL?#%FJ@K**FI@Y;HV=pDU?*sCS@S.uCR[m;Hp=VDq?*SCs@s.QCt[r:Iw=OEz?#IF$@#*HF%@u:K$;KI+=uEK-=*sCM:?w:M+:HO.;aCU;:%OCn?:z.Q..Ha;.ODv?-yFG$@,$-V;-Hw=+JH*?*lBP:?%%,n=+J*?%GQ:=#NCt?;y++v=%O:=zGt?:xHI,@-u,*z=zX?:wI+@,tEY??%r-$*;xt@,tP=?$qG%[:xn.#-:u$[%qp];xnN?[*sl.y:-r-?yn$^+sks_=yoi:v=*o?;uk;[zoi,_+skh:s@zl[+pi];tkg][xmhg;o@ti^xkg{$mhf|+oigf;f[ff_fff|ffff~fffff",Fi=3.317,Be=[];function Ht(c,x){return Math.pow((Math.abs(c)-x)/x,2)*(c-x>0?1:-1)}function Ft(c,x){var h=Math.floor(c/361),E=Math.floor(c/19)%19,D=c%19,O=Ht(h,9)*x,T=Ht(E,9)*x,G=Ht(D,9)*x;return[O,T,G]}function ft(c,x){for(var h=Math.floor(c.length/x),E=[],D=0;D<h;D++){for(var O=0,T=0;T<x;T++)O=O*83+Vt.indexOf(c[D*x+T]);E.push(O)}return E}function xt(c,x,h){var E=Math.floor(Math.sqrt(c.length))-1,D=Array(E+1),O=Array(E+1);O[0]=0,D[0]=1,O[1]=Math.sin(h),D[1]=Math.cos(h);for(var T=2;T<=E;T++)O[T]=2*O[T-1]*D[1]-O[T-2],D[T]=2*D[T-1]*D[1]-D[T-2];for(var G=0,H=0,Q=1;Q<=E+1;Q++)H+=Q;for(var ee=E;ee>=0;ee--){var $=Math.floor((ee+1)*ee/2);G+=$!=0?c[$]*x[$-1]:c[$];for(var T=1;T<=ee;T++)G+=(c[++$]*D[T]+c[$+H-ee-1]*O[T])*x[$-1]}return Math.round(G)}function ht(c){if(Be.length<1)for(var x=pt.length/32,h=0;h<32;h++){Be.push([]);for(var E=0;E<x;E++)Be[h].push(Ht(ft(pt[h*x+E],1),41)*Fi)}for(var D=ft(c[0],1)[0],O=(Ht(ft(c[1],1),41)+1)*255/2,T=ft(c.slice(2),2),G=[],H=[],Q=[],h=0;h<T.length;h++){var ee=Ft(T[h],O);G.push(ee[0]),H.push(ee[1]),Q.push(ee[2])}for(var $=.03125*Math.PI,Ce=[],h=31;h>=0;h--)for(var E=0;E<64;E++)Ce.push(xt(G,Be[h],(E+.5)*$)),Ce.push(xt(H,Be[h],(E+.5)*$)),Ce.push(xt(Q,Be[h],(E+.5)*$)),Ce.push(255);return new ImageData(new Uint8ClampedArray(Ce),64,32)}}var s=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),_=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),Me=["precision highp float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image0;","uniform sampler2D u_image1;","uniform bool u_splitImage;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join(`
`),t=Me+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join(`
`),se=Me+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else {","if(u_splitImage) {","if(coord.x < 0.0)","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","else","gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","} else {","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}","}","}"].join(`
`),vt=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function(de,Ze,K){return new l(de,Ze,K)}}}(window,document);window.pannellum=function(i,n,e){"use strict";function l(s,_){var Me=this,t,se,vt,de,Ze=!1,K=Date.now(),g=0,o=0,Ge=-1,Xe=0,W=0,k=new Array(10),Te=!1,me,We=!1,Gt=!1,at=!1,y,le,Y={yaw:0,pitch:0,hfov:0},dt=!1,Fe=!1,Lt=0,mt,Je=0,ut,Dt,Ae={},Ye={},Le=[],ot=!1,Pt=!1,wt=1e-6,yt,Wt=!1,ze,Yt=!1,At={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:e,maxPitch:e,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:e,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:it,draggable:!0,dragConfirm:!1,disableKeyboardCtrl:!1,crossOrigin:"anonymous",targetBlank:!1,touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15};At.strings={loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console.",twoTouchActivate:"Use two fingers together to pan the panorama.",twoTouchXActivate:"Use two fingers together to pan the panorama horizontally.",twoTouchYActivate:"Use two fingers together to pan the panorama vertically.",ctrlZoomActivate:"Use %s + scroll to zoom the panorama."},s=typeof s=="string"?n.getElementById(s):s,s.classList.add("pnlm-container"),s.tabIndex=0;var ae=n.createElement("div");ae.className="pnlm-ui",s.appendChild(ae);var rt=n.createElement("div");rt.className="pnlm-render-container",s.appendChild(rt);var $e=n.createElement("div");$e.className="pnlm-dragfix",ae.appendChild($e);var je=n.createElement("span");je.className="pnlm-about-msg";var Rt=n.createElement("a");Rt.href="https://pannellum.org/",Rt.textContent="Pannellum",je.appendChild(Rt);var jt=n.createElement("span");je.appendChild(jt),ae.appendChild(je),$e.addEventListener("contextmenu",xt);var L={},kt=n.createElement("div");kt.className="pnlm-sprite pnlm-hot-spot-debug-indicator",ae.appendChild(kt),L.container=n.createElement("div"),L.container.className="pnlm-panorama-info",L.title=n.createElement("div"),L.title.className="pnlm-title-box",L.container.appendChild(L.title),L.author=n.createElement("div"),L.author.className="pnlm-author-box",L.container.appendChild(L.author),ae.appendChild(L.container),L.load={},L.load.box=n.createElement("div"),L.load.box.className="pnlm-load-box",L.load.boxp=n.createElement("p"),L.load.box.appendChild(L.load.boxp),L.load.lbox=n.createElement("div"),L.load.lbox.className="pnlm-lbox",L.load.lbox.innerHTML='<div class="pnlm-loading"></div>',L.load.box.appendChild(L.load.lbox),L.load.lbar=n.createElement("div"),L.load.lbar.className="pnlm-lbar",L.load.lbarFill=n.createElement("div"),L.load.lbarFill.className="pnlm-lbar-fill",L.load.lbar.appendChild(L.load.lbarFill),L.load.box.appendChild(L.load.lbar),L.load.msg=n.createElement("p"),L.load.msg.className="pnlm-lmsg",L.load.box.appendChild(L.load.msg),ae.appendChild(L.load.box),L.errorMsg=n.createElement("div"),L.errorMsg.className="pnlm-error-msg pnlm-info-box",ae.appendChild(L.errorMsg),L.interactionMsg=n.createElement("div"),L.interactionMsg.className="pnlm-interaction-msg pnlm-info-box",ae.appendChild(L.interactionMsg);var X={};X.container=n.createElement("div"),X.container.className="pnlm-controls-container",ae.appendChild(X.container),X.load=n.createElement("button"),X.load.className="pnlm-load-button",X.load.addEventListener("click",function(){q(),Wi()}),ae.appendChild(X.load),X.zoom=n.createElement("div"),X.zoom.className="pnlm-zoom-controls pnlm-controls",X.zoomIn=n.createElement("div"),X.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",X.zoomIn.addEventListener("click",Ve),X.zoom.appendChild(X.zoomIn),X.zoomOut=n.createElement("div"),X.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",X.zoomOut.addEventListener("click",Zi),X.zoom.appendChild(X.zoomOut),X.container.appendChild(X.zoom),X.fullscreen=n.createElement("div"),X.fullscreen.addEventListener("click",V),X.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(n.fullscreenEnabled||n.mozFullScreenEnabled||n.webkitFullscreenEnabled||n.msFullscreenEnabled)&&X.container.appendChild(X.fullscreen),X.orientation=n.createElement("div"),X.orientation.addEventListener("click",function(a){Fe?Xt():Bi()}),X.orientation.addEventListener("mousedown",function(a){a.stopPropagation()}),X.orientation.addEventListener("touchstart",function(a){a.stopPropagation()}),X.orientation.addEventListener("pointerdown",function(a){a.stopPropagation()}),X.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var Mt=!1;i.DeviceOrientationEvent&&location.protocol=="https:"&&(navigator.userAgent.toLowerCase().indexOf("mobi")>=0||navigator.userAgent.indexOf("Mac")>=0&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0)&&(X.container.appendChild(X.orientation),Mt=!0);var bt=n.createElement("div");bt.className="pnlm-compass pnlm-controls pnlm-control",ae.appendChild(bt),_.firstScene?z(_.firstScene):_.default&&_.default.firstScene?z(_.default.firstScene):z(null),q(!0);function zt(){var a=n.createElement("div");if(a.innerHTML="<!--[if lte IE 9]><i></i><![endif]-->",a.getElementsByTagName("i").length==1){Be();return}ut=t.hfov,Dt=t.pitch;var r,d;if(t.type=="cubemap"){for(y=[],r=0;r<6;r++)y.push(new Image),y[r].crossOrigin=t.crossOrigin;L.load.lbox.style.display="block",L.load.lbar.style.display="none"}else if(t.type=="multires"){var M=JSON.parse(JSON.stringify(t.multiRes));t.basePath&&t.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(t.multiRes.basePath)?M.basePath=t.basePath+t.multiRes.basePath:t.multiRes.basePath?M.basePath=t.multiRes.basePath:t.basePath&&(M.basePath=t.basePath),y=M}else if(t.dynamic===!0)y=t.panorama;else{if(t.panorama===e){Be(t.strings.noPanoramaError);return}y=new Image}if(t.type=="cubemap"){var b=6,S=function(){b--,b===0&&pt()},Z=function(N){var U=n.createElement("a");U.href=N.target.src,U.textContent=U.href,Be(t.strings.fileAccessError.replace("%s",U.outerHTML))};for(r=0;r<y.length;r++)d=t.cubeMap[r],d=="null"?(console.log("Will use background instead of missing cubemap face "+r),S()):(t.basePath&&!Vt(d)&&(d=t.basePath+d),y[r].onload=S,y[r].onerror=Z,y[r].src=Bt(d))}else if(t.type=="multires")pt();else if(d="",t.basePath&&(d=t.basePath),t.dynamic!==!0){if(t.panorama instanceof Image||t.panorama instanceof ImageData||i.ImageBitmap&&t.panorama instanceof ImageBitmap){y=t.panorama,pt();return}d=Vt(t.panorama)?t.panorama:d+t.panorama,y.onload=function(){i.URL.revokeObjectURL(this.src),pt()},ze=new XMLHttpRequest,ze.onloadend=function(){if(ze.status!=200){var N=n.createElement("a");N.href=d,N.textContent=N.href,Be(t.strings.fileAccessError.replace("%s",N.outerHTML));return}var U=this.response;Fi(U,d),L.load.msg.innerHTML=""},ze.onprogress=function(N){if(N.lengthComputable){var U=N.loaded/N.total*100;L.load.lbarFill.style.width=U+"%";var j,re,He;N.total>1e6?(j="MB",re=(N.loaded/1e6).toFixed(2),He=(N.total/1e6).toFixed(2)):N.total>1e3?(j="kB",re=(N.loaded/1e3).toFixed(1),He=(N.total/1e3).toFixed(1)):(j="B",re=N.loaded,He=N.total),L.load.msg.innerHTML=re+" / "+He+" "+j}else L.load.lbox.style.display="block",L.load.lbar.style.display="none"};try{ze.open("GET",d,!0)}catch{Be(t.strings.malformedURLError)}ze.responseType="blob",ze.setRequestHeader("Accept","image/*,*/*;q=0.9"),ze.setRequestHeader("cache-control","no-cache"),ze.withCredentials=t.crossOrigin==="use-credentials",ze.send()}t.draggable&&ae.classList.add("pnlm-grab"),ae.classList.remove("pnlm-grabbing"),ot=t.dynamicUpdate===!0,t.dynamic&&ot&&(y=t.panorama,pt())}function Vt(a){return new RegExp("^(?:[a-z]+:)?//","i").test(a)||a[0]=="/"||a.slice(0,5)=="blob:"}function pt(){se||(se=new libpannellum.renderer(rt)),at||(at=!0,$e.addEventListener("mousedown",c,!1),n.addEventListener("mousemove",E,!1),n.addEventListener("mouseup",D,!1),t.mouseZoom&&(ae.addEventListener("mousewheel",_t,!1),ae.addEventListener("DOMMouseScroll",_t,!1)),t.doubleClickZoom&&$e.addEventListener("dblclick",x,!1),s.addEventListener("mozfullscreenchange",Ie,!1),s.addEventListener("webkitfullscreenchange",Ie,!1),s.addEventListener("msfullscreenchange",Ie,!1),s.addEventListener("fullscreenchange",Ie,!1),typeof ResizeObserver=="function"?(yt=new ResizeObserver(oe),yt.observe(s)):(i.addEventListener("resize",oe,!1),i.addEventListener("orientationchange",oe,!1)),t.disableKeyboardCtrl||(s.addEventListener("keydown",gt,!1),s.addEventListener("keyup",ue,!1),s.addEventListener("blur",ve,!1)),n.addEventListener("mouseleave",D,!1),n.documentElement.style.pointerAction===""&&n.documentElement.style.touchAction===""?($e.addEventListener("pointerdown",ee,!1),$e.addEventListener("pointermove",$,!1),$e.addEventListener("pointerup",Ce,!1),$e.addEventListener("pointerleave",Ce,!1)):($e.addEventListener("touchstart",O,!1),$e.addEventListener("touchmove",T,!1),$e.addEventListener("touchend",G,!1)),i.navigator.pointerEnabled&&(s.style.touchAction="none")),pe(),et(t.hfov),setTimeout(function(){Gt=!0},500)}function Fi(a,r){var d=new FileReader;d.addEventListener("loadend",function(){var M=d.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var b=M.indexOf("\xFF\xC2");(b<0||b>65536)&&Be(t.strings.iOS8WebGLError)}var S=M.indexOf("<x:xmpmeta");if(S>-1&&t.ignoreGPanoXMP!==!0){var Z=M.substring(S,M.indexOf("</x:xmpmeta>")+12),N=function(j){var re;return Z.indexOf(j+'="')>=0?(re=Z.substring(Z.indexOf(j+'="')+j.length+2),re=re.substring(0,re.indexOf('"'))):Z.indexOf(j+">")>=0&&(re=Z.substring(Z.indexOf(j+">")+j.length+1),re=re.substring(0,re.indexOf("<"))),re!==e?Number(re):null},U={fullWidth:N("GPano:FullPanoWidthPixels"),croppedWidth:N("GPano:CroppedAreaImageWidthPixels"),fullHeight:N("GPano:FullPanoHeightPixels"),croppedHeight:N("GPano:CroppedAreaImageHeightPixels"),topPixels:N("GPano:CroppedAreaTopPixels"),heading:N("GPano:PoseHeadingDegrees"),horizonPitch:N("GPano:PosePitchDegrees"),horizonRoll:N("GPano:PoseRollDegrees"),pitch:N("GPano:InitialViewPitchDegrees"),yaw:N("GPano:InitialViewHeadingDegrees"),hfov:N("GPano:InitialHorizontalFOVDegrees")};U.fullWidth!==null&&U.croppedWidth!==null&&U.fullHeight!==null&&U.croppedHeight!==null&&U.topPixels!==null&&(Le.indexOf("haov")<0&&(t.haov=U.croppedWidth/U.fullWidth*360),Le.indexOf("vaov")<0&&(t.vaov=U.croppedHeight/U.fullHeight*180),Le.indexOf("vOffset")<0&&(t.vOffset=((U.topPixels+U.croppedHeight/2)/U.fullHeight-.5)*-180),U.heading!==null&&Le.indexOf("northOffset")<0&&(t.northOffset=U.heading,t.compass!==!1&&(t.compass=!0)),U.horizonPitch!==null&&U.horizonRoll!==null&&(Le.indexOf("horizonPitch")<0&&(t.horizonPitch=U.horizonPitch),Le.indexOf("horizonRoll")<0&&(t.horizonRoll=U.horizonRoll)),U.pitch!=null&&Le.indexOf("pitch")<0&&(t.pitch=U.pitch),U.yaw!=null&&Le.indexOf("yaw")<0&&(t.yaw=U.yaw),U.hfov!=null&&Le.indexOf("hfov")<0&&(t.hfov=U.hfov))}y.src=i.URL.createObjectURL(a),y.onerror=function(){function j(){return i.fetch?i.fetch(n.location.href).then(function(re){return re.headers.get("Content-Security-Policy")}):null}j().then(function(re){if(re){var He=re.split(";").find(function(Pe){var tt=Pe.match(/img-src(.*)/);if(tt)return!tt[1].includes("blob")});He&&(console.log("CSP blocks blobs; reverting to URL."),y.crossOrigin=t.crossOrigin,y.src=r)}})}}),d.readAsBinaryString!==e?d.readAsBinaryString(a):d.readAsText(a)}function Be(a){a===e&&(a=t.strings.genericWebGLError),L.errorMsg.innerHTML="<p>"+a+"</p>",X.load.style.display="none",L.load.box.style.display="none",L.errorMsg.style.display="table",We=!0,me=e,rt.style.display="none",Ke("error",a)}function Ht(){We&&(L.load.box.style.display="none",L.errorMsg.style.display="none",We=!1,rt.style.display="block",Ke("errorcleared"))}function Ft(a){L.interactionMsg.style.opacity=1,L.interactionMsg.innerHTML="<p>"+a+"</p>",L.interactionMsg.style.display="table",Ke("messageshown"),clearTimeout(L.interactionMsg.timeout),L.interactionMsg.removeEventListener("transitionend",ft),L.interactionMsg.timeout=setTimeout(function(){L.interactionMsg.style.opacity=0,L.interactionMsg.addEventListener("transitionend",ft)},2e3)}function ft(){L.interactionMsg.style.opacity=0,L.interactionMsg.style.display="none",Ke("messagecleared")}function xt(a){var r=ht(a);je.style.left=r.x+"px",je.style.top=r.y+"px",clearTimeout(xt.t1),clearTimeout(xt.t2),je.style.display="block",je.style.opacity=1,xt.t1=setTimeout(function(){je.style.opacity=0},2e3),xt.t2=setTimeout(function(){je.style.display="none"},2500),a.preventDefault()}function ht(a){var r=s.getBoundingClientRect(),d={};return d.x=(a.clientX||a.pageX)-r.left,d.y=(a.clientY||a.pageY)-r.top,d}function c(a){if(a.preventDefault(),s.focus(),!(!me||!t.draggable||t.draggingHotSpot)){var r=ht(a);if(t.hotSpotDebug){var d=h(a);console.log("Pitch: "+d[0]+", Yaw: "+d[1]+", Center Pitch: "+t.pitch+", Center Yaw: "+t.yaw+", HFOV: "+t.hfov)}qt(),Xt(),t.roll=0,Y.hfov=0,Ze=!0,K=Date.now(),g=r.x,o=r.y,Xe=t.yaw,W=t.pitch,ae.classList.add("pnlm-grabbing"),ae.classList.remove("pnlm-grab"),Ke("mousedown",a),v()}}function x(a){if(t.minHfov===t.hfov)Me.setHfov(ut,1e3);else{var r=h(a);Me.lookAt(r[0],r[1],t.minHfov,1e3)}}function h(a){var r=ht(a),d=se.getCanvas(),M=d.clientWidth,b=d.clientHeight,S=r.x/M*2-1,Z=(1-r.y/b*2)*b/M,N=1/Math.tan(t.hfov*Math.PI/360),U=Math.sin(t.pitch*Math.PI/180),j=Math.cos(t.pitch*Math.PI/180),re=N*j-Z*U,He=Math.sqrt(S*S+re*re),Pe=Math.atan((Z*j+N*U)/He)*180/Math.PI,tt=Math.atan2(S/He,re/He)*180/Math.PI+t.yaw;return tt<-180&&(tt+=360),tt>180&&(tt-=360),[Pe,tt]}function E(a){if(de)xe(de,a);else if(Ze&&me){K=Date.now();var r=se.getCanvas(),d=r.clientWidth,M=r.clientHeight,b=ht(a),S=(Math.atan(g/d*2-1)-Math.atan(b.x/d*2-1))*180/Math.PI*t.hfov/90+Xe;Y.yaw=(S-t.yaw)%360*.2,t.yaw=S;var Z=2*Math.atan(Math.tan(t.hfov/360*Math.PI)*M/d)*180/Math.PI,N=(Math.atan(b.y/M*2-1)-Math.atan(o/M*2-1))*180/Math.PI*Z/90+W;Y.pitch=(N-t.pitch)*.2,t.pitch=N}}function D(a){de&&de.dragHandlerFunc&&de.dragHandlerFunc(a,de.dragHandlerArgs),de=null,Ze&&(Ze=!1,Date.now()-K>15&&(Y.pitch=Y.yaw=0),ae.classList.add("pnlm-grab"),ae.classList.remove("pnlm-grabbing"),K=Date.now(),Ke("mouseup",a))}function O(a){if(!(!me||!t.draggable||de)){qt(),Xt(),t.roll=0,Y.hfov=0;var r=ht(a.targetTouches[0]);if(g=r.x,o=r.y,a.targetTouches.length==2){var d=ht(a.targetTouches[1]);g+=(d.x-r.x)*.5,o+=(d.y-r.y)*.5,Ge=Math.sqrt((r.x-d.x)*(r.x-d.x)+(r.y-d.y)*(r.y-d.y))}Ze=!0,K=Date.now(),Xe=t.yaw,W=t.pitch,Ke("touchstart",a),v()}}function T(a){if(t.draggable&&(t.dragConfirm||a.preventDefault(),me&&(K=Date.now()),Ze&&me)){var r=ht(a.targetTouches[0]),d=r.x,M=r.y;if(a.targetTouches.length==2&&Ge!=-1){var b=ht(a.targetTouches[1]);d+=(b.x-r.x)*.5,M+=(b.y-r.y)*.5;var S=Math.sqrt((r.x-b.x)*(r.x-b.x)+(r.y-b.y)*(r.y-b.y));et(t.hfov+(Ge-S)*.1),Ge=S}var Z=t.hfov/360*t.touchPanSpeedCoeffFactor;if(!Te&&(t.dragConfirm=="both"||t.dragConfirm=="yaw")&&a.targetTouches.length!=2)g!=d&&(t.dragConfirm=="yaw"?Ft(t.strings.twoTouchXActivate):Ft(t.strings.twoTouchActivate));else{var N=(g-d)*Z+Xe;Y.yaw=(N-t.yaw)%360*.2,t.yaw=N}if(!Te&&(t.dragConfirm=="both"||t.dragConfirm=="pitch")&&a.targetTouches.length!=2)o!=M&&(t.dragConfirm=="pitch"?Ft(t.strings.twoTouchYActivate):Ft(t.strings.twoTouchActivate));else{var U=(M-o)*Z+W;Y.pitch=(U-t.pitch)*.2,t.pitch=U}(t.dragConfirm=="yaw"||t.dragConfirm=="pitch"||t.dragConfirm=="both")&&a.targetTouches.length==2&&(ft(),a.preventDefault())}}function G(){de=null,Ze=!1,Date.now()-K>150&&(Y.pitch=Y.yaw=0),Ge=-1,K=Date.now(),Ke("touchend",event)}var H=[],Q=[];function ee(a){if(a.pointerType=="touch"){if(!me||!t.draggable)return;H.push(a.pointerId),Q.push({clientX:a.clientX,clientY:a.clientY}),a.targetTouches=Q,O(a),a.preventDefault()}}function $(a){if(a.pointerType=="touch"){if(de){xe(de,a);return}if(!t.draggable)return;for(var r=0;r<H.length;r++)if(a.pointerId==H[r]){Q[r].clientX=a.clientX,Q[r].clientY=a.clientY,a.targetTouches=Q,T(a),a.preventDefault();return}}}function Ce(a){if(de&&de.dragHandlerFunc&&de.dragHandlerFunc(a,de.dragHandlerArgs),de=null,a.pointerType=="touch"){for(var r=!1,d=0;d<H.length;d++)a.pointerId==H[d]&&(H[d]=e),H[d]&&(r=!0);r||(H=[],Q=[],G()),a.preventDefault()}}function _t(a){if(!(!me||t.mouseZoom=="fullscreenonly"&&!Te)){if(!Te&&t.mouseZoom=="ctrl"&&!a.ctrlKey){var r=navigator.platform.indexOf("Mac")!=-1?"control":"ctrl";Ft(t.strings.ctrlZoomActivate.replace("%s",'<kbd class="pnlm-outline">'+r+"</kbd>"));return}ft(),a.preventDefault(),qt(),K=Date.now(),a.wheelDeltaY?(et(t.hfov-a.wheelDeltaY*.05),Y.hfov=a.wheelDelta<0?1:-1):a.wheelDelta?(et(t.hfov-a.wheelDelta*.05),Y.hfov=a.wheelDelta<0?1:-1):a.detail&&(et(t.hfov+a.detail*1.5),Y.hfov=a.detail>0?1:-1),v()}}function gt(a){qt(),K=Date.now(),Xt(),t.roll=0;var r=a.which||a.keycode;t.capturedKeyNumbers.indexOf(r)<0||!Te&&(r==16||r==17)&&t.mouseZoom=="ctrl"||(a.preventDefault(),r==27?Te&&V():Ee(r,!0))}function ve(){for(var a=0;a<10;a++)k[a]=!1}function ue(a){var r=a.which||a.keycode;t.capturedKeyNumbers.indexOf(r)<0||(a.preventDefault(),Ee(r,!1))}function Ee(a,r){var d=!1;switch(a){case 109:case 189:case 17:case 173:k[0]!=r&&(d=!0),k[0]=r;break;case 107:case 187:case 16:case 61:k[1]!=r&&(d=!0),k[1]=r;break;case 38:k[2]!=r&&(d=!0),k[2]=r;break;case 87:k[6]!=r&&(d=!0),k[6]=r;break;case 40:k[3]!=r&&(d=!0),k[3]=r;break;case 83:k[7]!=r&&(d=!0),k[7]=r;break;case 37:k[4]!=r&&(d=!0),k[4]=r;break;case 65:k[8]!=r&&(d=!0),k[8]=r;break;case 39:k[5]!=r&&(d=!0),k[5]=r;break;case 68:k[9]!=r&&(d=!0),k[9]=r}d&&r&&(typeof performance<"u"&&performance.now()?le=performance.now():le=Date.now(),v())}function Re(){if(me){var a=!1,r=t.pitch,d=t.yaw,M=t.hfov,b;typeof performance<"u"&&performance.now()?b=performance.now():b=Date.now(),le===e&&(le=b);var S=(b-le)*t.hfov/1200;if(S=Math.min(S,10),k[0]&&t.keyboardZoom===!0&&(et(t.hfov+(Y.hfov*.8+.4)*S),a=!0),k[1]&&t.keyboardZoom===!0&&(et(t.hfov+(Y.hfov*.8-.2)*S),a=!0),(k[2]||k[6])&&(t.pitch+=(Y.pitch*.8+.2)*S,a=!0),(k[3]||k[7])&&(t.pitch+=(Y.pitch*.8-.2)*S,a=!0),(k[4]||k[8])&&(t.yaw+=(Y.yaw*.8-.2)*S,a=!0),(k[5]||k[9])&&(t.yaw+=(Y.yaw*.8+.2)*S,a=!0),a&&(K=Date.now()),t.autoRotate){if(b-le>.001){var Z=(b-le)/1e3,N=(Y.yaw/Z*S-t.autoRotate*.2)*Z;N=(-t.autoRotate>0?1:-1)*Math.min(Math.abs(t.autoRotate*Z),Math.abs(N)),t.yaw+=N}t.autoRotateStopDelay&&(t.autoRotateStopDelay-=b-le,t.autoRotateStopDelay<=0&&(t.autoRotateStopDelay=!1,Je=t.autoRotate,t.autoRotate=0))}if(Ae.pitch&&(ke("pitch"),r=t.pitch),Ae.yaw&&(ke("yaw"),d=t.yaw),Ae.hfov&&(ke("hfov"),M=t.hfov),S>0&&!t.autoRotate){var U=1-t.friction;!k[4]&&!k[5]&&!k[8]&&!k[9]&&!Ae.yaw&&(t.yaw+=Y.yaw*S*U),!k[2]&&!k[3]&&!k[6]&&!k[7]&&!Ae.pitch&&(t.pitch+=Y.pitch*S*U),!k[0]&&!k[1]&&!Ae.hfov&&(t.hfov>90&&(U*=1-(t.hfov-90)/90),et(t.hfov+Y.hfov*S*U))}if(le=b,S>0){Y.yaw=Y.yaw*.8+(t.yaw-d)/S*.2,Y.pitch=Y.pitch*.8+(t.pitch-r)/S*.2,Y.hfov=Y.hfov*.8+(t.hfov-M)/S*.2;var j=t.autoRotate?Math.abs(t.autoRotate):5;Y.yaw=Math.min(j,Math.max(Y.yaw,-j)),Y.pitch=Math.min(j,Math.max(Y.pitch,-j)),Y.hfov=Math.min(j,Math.max(Y.hfov,-j))}k[0]&&k[1]&&(Y.hfov=0),(k[2]||k[6])&&(k[3]||k[7])&&(Y.pitch=0),(k[4]||k[8])&&(k[5]||k[9])&&(Y.yaw=0)}}function ke(a){var r=Ae[a],d=Math.min(1,Math.max((Date.now()-r.startTime)/1e3/(r.duration/1e3),0)),M=r.startPosition+t.animationTimingFunction(d)*(r.endPosition-r.startPosition);(r.endPosition>r.startPosition&&M>=r.endPosition||r.endPosition<r.startPosition&&M<=r.endPosition||r.endPosition===r.startPosition)&&(M=r.endPosition,Y[a]=0,delete Ae[a]),t[a]=M}function it(a){return a<.5?2*a*a:-1+(4-2*a)*a}function oe(){Ie("resize")}function v(){dt||(dt=!0,Oe())}function Oe(){if(!Yt)if(Qe(),mt&&clearTimeout(mt),Ze||Fe===!0)requestAnimationFrame(Oe);else if(k[0]||k[1]||k[2]||k[3]||k[4]||k[5]||k[6]||k[7]||k[8]||k[9]||t.autoRotate||Ae.pitch||Ae.yaw||Ae.hfov||Math.abs(Y.yaw)>.01||Math.abs(Y.pitch)>.01||Math.abs(Y.hfov)>.01)Re(),t.autoRotateInactivityDelay>=0&&Je&&Date.now()-K>t.autoRotateInactivityDelay&&!t.autoRotate&&(t.autoRotate=Je,Me.lookAt(Dt,e,ut,3e3)),requestAnimationFrame(Oe);else if(se&&(se.isLoading()||t.dynamic===!0&&ot))requestAnimationFrame(Oe);else{Me.getPitch&&Me.getYaw&&Me.getHfov&&Ke("animatefinished",{pitch:Me.getPitch(),yaw:Me.getYaw(),hfov:Me.getHfov()}),dt=!1,le=e;var a=t.autoRotateInactivityDelay-(Date.now()-K);a>0?mt=setTimeout(function(){t.autoRotate=Je,Me.lookAt(Dt,e,ut,3e3),v()},a):t.autoRotateInactivityDelay>=0&&Je&&(t.autoRotate=Je,Me.lookAt(Dt,e,ut,3e3),v())}}function Qe(){var a;if(me){var r=se.getCanvas();t.autoRotate!==!1&&(t.yaw>360?t.yaw-=360:t.yaw<-360&&(t.yaw+=360)),a=t.yaw;var d=0,M=0;if(t.avoidShowingBackground){var b=t.hfov/2,S=Math.atan2(Math.tan(b/180*Math.PI),r.width/r.height)*180/Math.PI,Z=t.vaov>t.haov;Z?M=S*(1-Math.min(Math.cos((t.pitch-b)/180*Math.PI),Math.cos((t.pitch+b)/180*Math.PI))):d=b*(1-Math.min(Math.cos((t.pitch-S)/180*Math.PI),Math.cos((t.pitch+S)/180*Math.PI)))}var N=t.maxYaw-t.minYaw,U=-180,j=180;N<360&&(U=t.minYaw+t.hfov/2+d,j=t.maxYaw-t.hfov/2-d,N<t.hfov&&(U=j=(U+j)/2),t.yaw=Math.max(U,Math.min(j,t.yaw))),t.autoRotate===!1&&(t.yaw>360?t.yaw-=360:t.yaw<-360&&(t.yaw+=360)),t.autoRotate!==!1&&a!=t.yaw&&le!==e&&(t.autoRotate*=-1);var re=2*Math.atan(Math.tan(t.hfov/180*Math.PI*.5)/(r.width/r.height))/Math.PI*180,He=t.minPitch+re/2,Pe=t.maxPitch-re/2,tt=t.maxPitch-t.minPitch;tt<re&&(He=Pe=(He+Pe)/2),isNaN(He)&&(He=-90),isNaN(Pe)&&(Pe=90),t.pitch=Math.max(He,Math.min(Pe,t.pitch)),se.render(t.pitch*Math.PI/180,t.yaw*Math.PI/180,t.hfov*Math.PI/180,{roll:t.roll*Math.PI/180,dynamic:ot}),Pt&&(Pt=ot=!1),be(),t.compass&&(bt.style.transform="rotate("+(-t.yaw-t.northOffset)+"deg)",bt.style.webkitTransform="rotate("+(-t.yaw-t.northOffset)+"deg)")}}function De(a,r,d,M){this.w=a,this.x=r,this.y=d,this.z=M}De.prototype.multiply=function(a){return new De(this.w*a.w-this.x*a.x-this.y*a.y-this.z*a.z,this.x*a.w+this.w*a.x+this.y*a.z-this.z*a.y,this.y*a.w+this.w*a.y+this.z*a.x-this.x*a.z,this.z*a.w+this.w*a.z+this.x*a.y-this.y*a.x)},De.prototype.toEulerAngles=function(){var a=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),r=Math.asin(2*(this.w*this.y-this.z*this.x)),d=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[a,r,d]};function lt(a,r,d){var M=[r?r*Math.PI/180/2:0,d?d*Math.PI/180/2:0,a?a*Math.PI/180/2:0],b=[Math.cos(M[0]),Math.cos(M[1]),Math.cos(M[2])],S=[Math.sin(M[0]),Math.sin(M[1]),Math.sin(M[2])];return new De(b[0]*b[1]*b[2]-S[0]*S[1]*S[2],S[0]*b[1]*b[2]-b[0]*S[1]*S[2],b[0]*S[1]*b[2]+S[0]*b[1]*S[2],b[0]*b[1]*S[2]+S[0]*S[1]*b[2])}function nt(a,r,d){var M=lt(a,r,d);M=M.multiply(new De(Math.sqrt(.5),-Math.sqrt(.5),0,0));var b=i.orientation?-i.orientation*Math.PI/180/2:0;return M.multiply(new De(Math.cos(b),0,-Math.sin(b),0))}function st(a){var r=nt(a.alpha,a.beta,a.gamma).toEulerAngles();typeof Fe=="number"&&Fe<10?Fe+=1:Fe===10?(Lt=r[2]/Math.PI*180+t.yaw,Fe=!0,requestAnimationFrame(Oe)):(t.pitch=r[0]/Math.PI*180,t.roll=-r[1]/Math.PI*180,t.yaw=-r[2]/Math.PI*180+Lt)}function pe(){try{var a={};t.horizonPitch!==e&&(a.horizonPitch=t.horizonPitch*Math.PI/180),t.horizonRoll!==e&&(a.horizonRoll=t.horizonRoll*Math.PI/180),t.backgroundColor!==e&&(a.backgroundColor=t.backgroundColor),se.init(y,t.type,t.haov*Math.PI/180,t.vaov*Math.PI/180,t.vOffset*Math.PI/180,ct,a)}catch(r){if(t.dynamic!==!0&&(y=e),r.type=="webgl error"||r.type=="no webgl")Be();else if(r.type=="webgl size error")Be(t.strings.textureSizeError.replace("%s",r.width).replace("%s",r.maxWidth));else throw Be(t.strings.unknownError),r}}function ct(){if(t.sceneFadeDuration&&se.fadeImg!==e){se.fadeImg.style.opacity=0;var a=se.fadeImg;delete se.fadeImg,setTimeout(function(){rt.removeChild(a),Ke("scenechangefadedone")},t.sceneFadeDuration)}t.compass?bt.style.display="inline":bt.style.display="none",qe(),L.load.box.style.display="none",vt!==e&&(rt.removeChild(vt),vt=e),me=!0,t.dynamic!==!0&&(y=e),v(),Ke("load")}function Ne(a){a.pitch=Number(a.pitch)||0,a.yaw=Number(a.yaw)||0;var r=n.createElement("div");r.tabIndex=-1,r.className="pnlm-hotspot-base",a.cssClass?r.className+=" "+a.cssClass:r.className+=" pnlm-hotspot pnlm-sprite pnlm-"+Tt(a.type);var d=n.createElement("span");a.text&&(d.innerHTML=Tt(a.text));var M;if(a.video){var b=n.createElement("video"),S=a.video;t.basePath&&!Vt(S)&&(S=t.basePath+S),b.src=Bt(S),b.controls=!0,b.style.width=a.width+"px",ae.appendChild(r),d.appendChild(b)}else if(a.image){var Z=a.image;t.basePath&&!Vt(Z)&&(Z=t.basePath+Z),M=n.createElement("a"),M.href=Bt(a.URL?a.URL:Z,!0),t.targetBlank&&(M.target="_blank",M.rel="noopener"),d.appendChild(M);var N=n.createElement("img");N.src=Bt(Z),N.style.width=a.width+"px",N.style.paddingTop="5px",ae.appendChild(r),M.appendChild(N),d.style.maxWidth="initial"}else if(a.URL){if(M=n.createElement("a"),M.href=Bt(a.URL,!0),a.attributes)for(var U in a.attributes)M.setAttribute(U,a.attributes[U]);else t.targetBlank&&(M.target="_blank",M.rel="noopener");ae.appendChild(M),r.className+=" pnlm-pointer",d.className+=" pnlm-pointer",M.appendChild(r)}else a.sceneId&&(r.onclick=r.ontouchend=function(){return r.clicked||(r.clicked=!0,Kt(a.sceneId,a.targetPitch,a.targetYaw,a.targetHfov)),!1},r.className+=" pnlm-pointer",d.className+=" pnlm-pointer"),ae.appendChild(r);a.createTooltipFunc?a.createTooltipFunc(r,a.createTooltipArgs):(a.text||a.video||a.image)&&(r.classList.add("pnlm-tooltip"),r.appendChild(d),d.style.width=d.scrollWidth-20+"px",d.style.marginLeft=-(d.scrollWidth-r.offsetWidth)/2+"px",d.style.marginTop=-d.scrollHeight-12+"px"),a.clickHandlerFunc&&(r.addEventListener("click",function(j){a.clickHandlerFunc(j,a.clickHandlerArgs)},"false"),n.documentElement.style.pointerAction===""&&n.documentElement.style.touchAction===""?r.addEventListener("pointerup",function(j){a.clickHandlerFunc(j,a.clickHandlerArgs)},!1):r.addEventListener("touchend",function(j){a.clickHandlerFunc(j,a.clickHandlerArgs)},!1),r.className+=" pnlm-pointer",d.className+=" pnlm-pointer"),a.draggable&&(r.addEventListener("mousedown",function(j){a.dragHandlerFunc&&a.dragHandlerFunc(j,a.dragHandlerArgs),de=a}),n.documentElement.style.pointerAction===""&&n.documentElement.style.touchAction===""&&r.addEventListener("pointerdown",function(j){a.dragHandlerFunc&&a.dragHandlerFunc(j,a.dragHandlerArgs),de=a}),r.addEventListener("touchmove",function(j){xe(a,j.targetTouches[0])}),r.addEventListener("touchend",function(j){a.dragHandlerFunc&&a.dragHandlerFunc(j,a.dragHandlerArgs),de=null})),a.div=r}function xe(a,r){var d=h(r);a.pitch=d[0],a.yaw=d[1],we(a)}function qe(){Wt||(t.hotSpots?(t.hotSpots=t.hotSpots.sort(function(a,r){return a.pitch<r.pitch}),t.hotSpots.forEach(Ne)):t.hotSpots=[],Wt=!0,be())}function P(){var a=t.hotSpots;if(Wt=!1,delete t.hotSpots,a)for(var r=0;r<a.length;r++){var d=a[r].div;if(d){for(;d.parentNode&&d.parentNode!=ae;)d=d.parentNode;ae.removeChild(d)}delete a[r].div}}function we(a){var r=Math.sin(a.pitch*Math.PI/180),d=Math.cos(a.pitch*Math.PI/180),M=Math.sin(t.pitch*Math.PI/180),b=Math.cos(t.pitch*Math.PI/180),S=Math.cos((-a.yaw+t.yaw)*Math.PI/180),Z=r*M+d*S*b;if(a.yaw<=90&&a.yaw>-90&&Z<=0||(a.yaw>90||a.yaw<=-90)&&Z<=0)a.div.style.visibility="hidden";else{var N=Math.sin((-a.yaw+t.yaw)*Math.PI/180),U=Math.tan(t.hfov*Math.PI/360);a.div.style.visibility="visible";var j=se.getCanvas(),re=j.clientWidth,He=j.clientHeight,Pe=[-re/U*N*d/Z/2,-re/U*(r*b-d*S*M)/Z/2],tt=Math.sin(t.roll*Math.PI/180),Yi=Math.cos(t.roll*Math.PI/180);Pe=[Pe[0]*Yi-Pe[1]*tt,Pe[0]*tt+Pe[1]*Yi],Pe[0]+=(re-a.div.offsetWidth)/2,Pe[1]+=(He-a.div.offsetHeight)/2;var Zt="translate("+Pe[0]+"px, "+Pe[1]+"px) translateZ(9999px) rotate("+t.roll+"deg)";a.scale&&(Zt+=" scale("+ut/t.hfov/Z+")"),a.div.style.webkitTransform=Zt,a.div.style.MozTransform=Zt,a.div.style.transform=Zt}}function be(){t.hotSpots.forEach(we)}function z(a){t={};var r,d,M=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];Le=[];for(r in At)At.hasOwnProperty(r)&&(t[r]=At[r]);for(r in _.default)if(_.default.hasOwnProperty(r))if(r=="strings")for(d in _.default.strings)_.default.strings.hasOwnProperty(d)&&(t.strings[d]=Tt(_.default.strings[d]));else t[r]=_.default[r],M.indexOf(r)>=0&&Le.push(r);if(a!==null&&a!==""&&_.scenes&&_.scenes[a]){var b=_.scenes[a];for(r in b)if(b.hasOwnProperty(r))if(r=="strings")for(d in b.strings)b.strings.hasOwnProperty(d)&&(t.strings[d]=Tt(b.strings[d]));else t[r]=b[r],M.indexOf(r)>=0&&Le.push(r);t.scene=a}for(r in _)if(_.hasOwnProperty(r))if(r=="strings")for(d in _.strings)_.strings.hasOwnProperty(d)&&(t.strings[d]=Tt(_.strings[d]));else t[r]=_[r],M.indexOf(r)>=0&&Le.push(r)}function q(a){if(a=a||!1,a&&"preview"in t){var r=t.preview;t.basePath&&!Vt(r)&&(r=t.basePath+r),vt=n.createElement("div"),vt.className="pnlm-preview-img",vt.style.backgroundImage="url('"+Qi(r)+"')",rt.appendChild(vt)}var d=t.title,M=t.author;a&&("previewTitle"in t&&(t.title=t.previewTitle),"previewAuthor"in t&&(t.author=t.previewAuthor)),t.hasOwnProperty("title")||(L.title.innerHTML=""),t.hasOwnProperty("author")||(L.author.innerHTML=""),!t.hasOwnProperty("title")&&!t.hasOwnProperty("author")&&(L.container.style.display="none"),t.targetBlank&&(Rt.rel="noopener",Rt.target="_blank"),X.load.innerHTML="<div><p>"+t.strings.loadButtonLabel+"</p></div>",L.load.boxp.innerHTML=t.strings.loadingLabel;for(var b in t)if(t.hasOwnProperty(b))switch(b){case"title":L.title.innerHTML=Tt(t[b]),L.container.style.display="inline";break;case"author":var S=Tt(t[b]);if(t.authorURL){var Z=n.createElement("a");Z.href=Bt(t.authorURL,!0),t.targetBlank&&(Z.target="_blank",Z.rel="noopener"),Z.innerHTML=Tt(t[b]),S=Z.outerHTML}L.author.innerHTML=t.strings.bylineLabel.replace("%s",S),L.container.style.display="inline";break;case"hfov":et(Number(t[b]));break;case"autoLoad":t[b]===!0&&se===e&&(L.load.box.style.display="inline",X.load.style.display="none",zt());break;case"showZoomCtrl":t[b]&&t.showControls!=!1?X.zoom.style.display="block":X.zoom.style.display="none";break;case"showFullscreenCtrl":t[b]&&t.showControls!=!1&&("fullscreen"in n||"mozFullScreen"in n||"webkitIsFullScreen"in n||"msFullscreenElement"in n)?X.fullscreen.style.display="block":X.fullscreen.style.display="none";break;case"hotSpotDebug":t[b]?kt.style.display="block":kt.style.display="none";break;case"showControls":t[b]||(X.orientation.style.display="none",X.zoom.style.display="none",X.fullscreen.style.display="none");break;case"orientationOnByDefault":t[b]&&Bi();break}a&&(d?t.title=d:delete t.title,M?t.author=M:delete t.author)}function V(){if(me&&!We)if(Te)n.exitFullscreen?n.exitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitCancelFullScreen?n.webkitCancelFullScreen():n.msExitFullscreen&&n.msExitFullscreen();else try{s.requestFullscreen?s.requestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.msRequestFullscreen?s.msRequestFullscreen():s.webkitRequestFullScreen()}catch{}}function Ie(a){n.fullscreenElement||n.fullscreen||n.mozFullScreen||n.webkitIsFullScreen||n.msFullscreenElement?(X.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),Te=!0):(X.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),Te=!1),a!=="resize"&&Ke("fullscreenchange",Te),se.resize(),et(t.hfov),v()}function Ve(){me&&(et(t.hfov-5),v())}function Zi(){me&&(et(t.hfov+5),v())}function Gi(a){var r=t.minHfov;if(t.type=="multires"&&se&&!t.multiResMinHfov&&(r=Math.min(r,se.getCanvas().width/(t.multiRes.cubeResolution/90*.9))),r>t.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),t.hfov;var d=t.hfov;if(a<r?d=r:a>t.maxHfov?d=t.maxHfov:d=a,t.avoidShowingBackground&&se&&!isNaN(t.maxPitch-t.minPitch)){var M=se.getCanvas();d=Math.min(d,Math.atan(Math.tan((t.maxPitch-t.minPitch)/360*Math.PI)/M.height*M.width)*360/Math.PI)}return d}function et(a){t.hfov=Gi(a),Ke("zoomchange",t.hfov)}function qt(){Ae={},Je=t.autoRotate?t.autoRotate:Je,t.autoRotate=!1}function Wi(){Ht(),me=!1,ft(),X.load.style.display="none",L.load.box.style.display="inline",zt()}function Kt(a,r,d,M,b){me||(b=!0),me=!1,Ae={};var S,Z,N,U;if(t.sceneFadeDuration&&!b){var j=se.render(t.pitch*Math.PI/180,t.yaw*Math.PI/180,t.hfov*Math.PI/180,{returnImage:"ImageBitmap"});if(j!==e){j.then?S=n.createElement("canvas"):S=new Image,S.className="pnlm-fade-img",S.style.transition="opacity "+t.sceneFadeDuration/1e3+"s",S.style.width="100%",S.style.height="100%",j.then?j.then(function(re){S.width=re.width,S.height=re.height,S.getContext("2d").drawImage(re,0,0),Kt(a,r,d,M,!0)}):(S.onload=function(){Kt(a,r,d,M,!0)},S.src=j),rt.appendChild(S),se.fadeImg=S;return}}r==="same"?Z=t.pitch:Z=r,d==="same"?N=t.yaw:d==="sameAzimuth"?N=t.yaw+(t.northOffset||0)-(_.scenes[a].northOffset||0):N=d,M==="same"?U=t.hfov:U=M,P(),z(a),Y.yaw=Y.pitch=Y.hfov=0,q(),Z!==e&&(t.pitch=Z),N!==e&&(t.yaw=N),U!==e&&(t.hfov=U),Ke("scenechange",a),Wi()}function Xt(){i.removeEventListener("deviceorientation",st),X.orientation.classList.remove("pnlm-orientation-button-active"),Fe=!1}function Bi(){Mt&&(typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(function(a){a=="granted"&&(Fe=1,i.addEventListener("deviceorientation",st),X.orientation.classList.add("pnlm-orientation-button-active"))}):(Fe=1,i.addEventListener("deviceorientation",st),X.orientation.classList.add("pnlm-orientation-button-active")))}function Tt(a){return _.escapeHTML?String(a).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split(`
`).join("<br>"):String(a).split(`
`).join("<br>")}function Bt(a,r){try{var d=decodeURIComponent(Ji(a)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return d.indexOf("javascript:")===0||d.indexOf("vbscript:")===0?(console.log("Script URL removed."),"about:blank"):r&&d.indexOf("data:")===0?(console.log("Data URI removed from link."),"about:blank"):a}function Ji(a){return a.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,function(r,d){return d=d.toLowerCase(),d==="colon"?":":d.charAt(0)==="#"?d.charAt(1)==="x"?String.fromCharCode(parseInt(d.substring(2),16)):String.fromCharCode(+d.substring(1)):""})}function Qi(a){return Bt(a).replace(/"/g,"%22").replace(/'/g,"%27")}this.isLoaded=function(){return!!me},this.getPitch=function(){return t.pitch},this.setPitch=function(a,r,d,M){return K=Date.now(),Math.abs(a-t.pitch)<=wt?(typeof d=="function"&&d(M),this):(r=r==e?1e3:Number(r),r?(Ae.pitch={startTime:Date.now(),startPosition:t.pitch,endPosition:a,duration:r},typeof d=="function"&&setTimeout(function(){d(M)},r)):t.pitch=a,v(),this)},this.getPitchBounds=function(){return[t.minPitch,t.maxPitch]},this.setPitchBounds=function(a){return t.minPitch=Math.max(-90,Math.min(a[0],90)),t.maxPitch=Math.max(-90,Math.min(a[1],90)),this},this.getYaw=function(){return(t.yaw+540)%360-180},this.setYaw=function(a,r,d,M){return K=Date.now(),Math.abs(a-t.yaw)<=wt?(typeof d=="function"&&d(M),this):(r=r==e?1e3:Number(r),a=(a+180)%360-180,r?(t.yaw-a>180?a+=360:a-t.yaw>180&&(a-=360),Ae.yaw={startTime:Date.now(),startPosition:t.yaw,endPosition:a,duration:r},typeof d=="function"&&setTimeout(function(){d(M)},r)):t.yaw=a,v(),this)},this.getYawBounds=function(){return[t.minYaw,t.maxYaw]},this.setYawBounds=function(a){return t.minYaw=Math.max(-360,Math.min(a[0],360)),t.maxYaw=Math.max(-360,Math.min(a[1],360)),this},this.getHfov=function(){return t.hfov},this.setHfov=function(a,r,d,M){return K=Date.now(),Math.abs(a-t.hfov)<=wt?(typeof d=="function"&&d(M),this):(r=r==e?1e3:Number(r),r?(Ae.hfov={startTime:Date.now(),startPosition:t.hfov,endPosition:Gi(a),duration:r},typeof d=="function"&&setTimeout(function(){d(M)},r)):et(a),v(),this)},this.getHfovBounds=function(){return[t.minHfov,t.maxHfov]},this.setHfovBounds=function(a){return t.minHfov=Math.max(0,a[0]),t.maxHfov=Math.max(0,a[1]),this},this.lookAt=function(a,r,d,M,b,S){return M=M==e?1e3:Number(M),a!==e&&Math.abs(a-t.pitch)>wt&&(this.setPitch(a,M,b,S),b=e),r!==e&&Math.abs(r-t.yaw)>wt&&(this.setYaw(r,M,b,S),b=e),d!==e&&Math.abs(d-t.hfov)>wt&&(this.setHfov(d,M,b,S),b=e),typeof b=="function"&&b(S),this},this.getNorthOffset=function(){return t.northOffset},this.setNorthOffset=function(a){return t.northOffset=Math.min(360,Math.max(0,a)),v(),this},this.getHorizonRoll=function(){return t.horizonRoll},this.setHorizonRoll=function(a){return t.horizonRoll=Math.min(90,Math.max(-90,a)),se.setPose(t.horizonPitch*Math.PI/180,t.horizonRoll*Math.PI/180),v(),this},this.getHorizonPitch=function(){return t.horizonPitch},this.setHorizonPitch=function(a){return t.horizonPitch=Math.min(90,Math.max(-90,a)),se.setPose(t.horizonPitch*Math.PI/180,t.horizonRoll*Math.PI/180),v(),this},this.startAutoRotate=function(a,r,d,M){return a=a||Je||1,r=r===e?Dt:r,d=d===e?ut:d,t.autoRotate=a,M!==e&&(t.autoRotateInactivityDelay=M),Me.lookAt(r,e,d,3e3),v(),this},this.stopAutoRotate=function(){return Je=t.autoRotate?t.autoRotate:Je,t.autoRotate=!1,t.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){qt(),Y={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return se},this.setUpdate=function(a){return ot=a===!0,ot&&(Pt=!1,se===e?pt():v()),this},this.updateOnce=function(){return ot=Pt=!0,se===e?pt():v(),this},this.mouseEventToCoords=function(a){return h(a)},this.loadScene=function(a,r,d,M){return me!==!1&&Kt(a,r,d,M),this},this.getScene=function(){return t.scene},this.addScene=function(a,r){return _.scenes[a]=r,this},this.removeScene=function(a){return t.scene==a||!_.scenes.hasOwnProperty(a)?!1:(delete _.scenes[a],!0)},this.toggleFullscreen=function(){return V(),this},this.getConfig=function(){return t},this.getContainer=function(){return s},this.addHotSpot=function(a,r){if(r===e&&t.scene===e)t.hotSpots.push(a);else{var d=r!==e?r:t.scene;if(_.scenes.hasOwnProperty(d))_.scenes[d].hasOwnProperty("hotSpots")||(_.scenes[d].hotSpots=[],d==t.scene&&(t.hotSpots=_.scenes[d].hotSpots)),_.scenes[d].hotSpots.push(a);else throw"Invalid scene ID!"}return(r===e||t.scene==r)&&(Ne(a),me&&we(a)),this},this.removeHotSpot=function(a,r){if(r===e||t.scene==r){if(!t.hotSpots)return!1;for(var d=0;d<t.hotSpots.length;d++)if(t.hotSpots[d].hasOwnProperty("id")&&t.hotSpots[d].id==a){for(var M=t.hotSpots[d].div;M.parentNode!=ae;)M=M.parentNode;return ae.removeChild(M),delete t.hotSpots[d].div,t.hotSpots.splice(d,1),!0}}else if(_.scenes.hasOwnProperty(r)){if(!_.scenes[r].hasOwnProperty("hotSpots"))return!1;for(var b=0;b<_.scenes[r].hotSpots.length;b++)if(_.scenes[r].hotSpots[b].hasOwnProperty("id")&&_.scenes[r].hotSpots[b].id==a)return _.scenes[r].hotSpots.splice(b,1),!0}else return!1},this.resize=function(){se&&oe()},this.isOrientationSupported=function(){return Mt||!1},this.stopOrientation=function(){Xt()},this.startOrientation=function(){Bi()},this.isOrientationActive=function(){return!!Fe},this.on=function(a,r){return Ye[a]=Ye[a]||[],Ye[a].push(r),this},this.off=function(a,r){if(!a)return Ye={},this;if(r){var d=Ye[a].indexOf(r);d>=0&&Ye[a].splice(d,1),Ye[a].length==0&&delete Ye[a]}else delete Ye[a];return this};function Ke(a){if(a in Ye)for(var r=Ye[a].length;r>0;r--)Ye[a][Ye[a].length-r].apply(null,[].slice.call(arguments,1))}this.destroy=function(){if(Yt=!0,clearTimeout(mt),ze&&ze.abort(),Array.isArray(y))for(var a=0;a<6;a++)y[a].src="";se&&se.destroy(),at&&(n.removeEventListener("mousemove",E,!1),n.removeEventListener("mouseup",D,!1),s.removeEventListener("mozfullscreenchange",Ie,!1),s.removeEventListener("webkitfullscreenchange",Ie,!1),s.removeEventListener("msfullscreenchange",Ie,!1),s.removeEventListener("fullscreenchange",Ie,!1),yt?yt.disconnect():(i.removeEventListener("resize",oe,!1),i.removeEventListener("orientationchange",oe,!1)),s.removeEventListener("keydown",gt,!1),s.removeEventListener("keyup",ue,!1),s.removeEventListener("blur",ve,!1),n.removeEventListener("mouseleave",D,!1)),s.innerHTML="",s.classList.remove("pnlm-container")}}return{viewer:function(s,_){return new l(s,_)}}}(window,document);var Cn=["container"];function vn(i,n){if(i&1){let e=J();u(0,"button",9),te("click",function(){F(e);let s=f();return B(s.onActionShowView360Add())}),w(1),ie(2,"translate"),p()}i&2&&(m(),ce(" ",ne(2,1,"ACTION.Add_To_List"),`
`))}function xn(i,n){if(i&1){let e=J();u(0,"mat-icon",50),te("click",function(){F(e);let s=f(2);return B(s.dataDetailModel.title="")}),w(1,"close"),p()}}function wn(i,n){if(i&1){let e=J();u(0,"mat-icon",50),te("click",function(){F(e);let s=f(2);return B(s.dataDetailModel.description="")}),w(1,"close"),p()}}function yn(i,n){if(i&1){let e=J();u(0,"mat-icon",51),te("click",function(){F(e);let s=f(2);return B(s.dataDetailModel.linkFileId=null)}),w(1,"close"),p()}}function Mn(i,n){if(i&1&&(ge(0,"img",52),ie(1,"cmsthumbnail")),i&2){let e=f(2);C("src",Ue(ne(1,2,e.dataDetailModel.panorama)),Ct)}}function bn(i,n){if(i&1&&(u(0,"table",53)(1,"tr")(2,"td"),w(3,"viewer Yaw"),p(),u(4,"td"),w(5,"viewer Pitch"),p(),u(6,"td"),w(7,"click Yaw"),p(),u(8,"td"),w(9,"click Pitch"),p()(),u(10,"tr")(11,"td"),w(12),p(),u(13,"td"),w(14),p(),u(15,"td"),w(16),p(),u(17,"td"),w(18),p()()()),i&2){let e=f(2);m(12),ye(e.postionView.viewerGetYaw),m(2),ye(e.postionView.viewerGetPitch),m(2),ye(e.postionView.clickGetYaw),m(2),ye(e.postionView.clickGetPitch)}}function Tn(i,n){if(i&1){let e=J();u(0,"button",54),te("click",function(){F(e);let s=f(2);return B(s.onActionShowHotspotAdd())}),w(1),ie(2,"translate"),p()}i&2&&(m(),ce(" ",ne(2,1,"ACTION.ADD")," "))}function En(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062D\u0646\u0647"),p())}function In(i,n){if(i&1&&(A(0),u(1,"p",56),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.sceneId||"N/A"," ")}}function Sn(i,n){if(i&1){let e=J();A(0),u(1,"div",12)(2,"input",57),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.sceneId,s)||(_.sceneId=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.sceneId)}}function Ln(i,n){if(i&1&&(u(0,"mat-cell"),I(1,In,3,1,"ng-container",55)(2,Sn,3,2,"ng-container",55),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function Dn(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"pitch"),p())}function Pn(i,n){if(i&1&&(A(0),u(1,"p",56),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.pitch||"N/A"," ")}}function An(i,n){if(i&1){let e=J();A(0),u(1,"div",12)(2,"input",58),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.pitch,s)||(_.pitch=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.pitch)}}function Rn(i,n){if(i&1&&(u(0,"mat-cell"),I(1,Pn,3,1,"ng-container",55)(2,An,3,2,"ng-container",55),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function kn(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"yaw"),p())}function Vn(i,n){if(i&1&&(A(0),u(1,"p",59),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.yaw||"N/A"," ")}}function Hn(i,n){if(i&1){let e=J();A(0),u(1,"div",12)(2,"input",60),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.yaw,s)||(_.yaw=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.yaw)}}function Fn(i,n){if(i&1&&(u(0,"mat-cell"),I(1,Vn,3,1,"ng-container",55)(2,Hn,3,2,"ng-container",55),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function Bn(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"\u0646\u0648\u0639"),p())}function On(i,n){if(i&1&&(A(0),u(1,"p",59),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ye(e.type)}}function Nn(i,n){if(i&1){let e=J();A(0),u(1,"div",12)(2,"mat-select",61),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.type,s)||(_.type=s),B(s)}),u(3,"mat-option",62),w(4,"\u0627\u0637\u0644\u0627\u0639\u0627\u062A"),p()()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.type),m(),C("value","info")}}function Un(i,n){if(i&1&&(u(0,"mat-cell"),I(1,On,3,1,"ng-container",55)(2,Nn,5,3,"ng-container",55),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function Gn(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"targetYaw"),p())}function Wn(i,n){if(i&1&&(A(0),u(1,"p",59),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.targetYaw||"N/A"," ")}}function Yn(i,n){if(i&1){let e=J();A(0),u(1,"div",12)(2,"input",63),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.targetYaw,s)||(_.targetYaw=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.targetYaw)}}function zn(i,n){if(i&1&&(u(0,"mat-cell"),I(1,Wn,3,1,"ng-container",55)(2,Yn,3,2,"ng-container",55),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function qn(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"targetPitch"),p())}function Xn(i,n){if(i&1&&(A(0),u(1,"p",59),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.targetPitch||"N/A"," ")}}function $n(i,n){if(i&1){let e=J();A(0),u(1,"div",12)(2,"input",64),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.targetPitch,s)||(_.targetPitch=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.targetPitch)}}function jn(i,n){if(i&1&&(u(0,"mat-cell"),I(1,Xn,3,1,"ng-container",55)(2,$n,3,2,"ng-container",55),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function Kn(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"\u062A\u0648\u0636\u06CC\u062D\u0627\u062A"),p())}function Zn(i,n){if(i&1&&(A(0),u(1,"p",56),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.text||"N/A"," ")}}function Jn(i,n){if(i&1){let e=J();A(0),u(1,"div",12)(2,"input",65),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.text,s)||(_.text=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.text)}}function Qn(i,n){if(i&1&&(u(0,"mat-cell"),I(1,Zn,3,1,"ng-container",55)(2,Jn,3,2,"ng-container",55),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function ea(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"\u0622\u062F\u0631\u0633 \u0648\u0628 \u0633\u0627\u06CC\u062A"),p())}function ta(i,n){if(i&1&&(A(0),u(1,"p",66),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.url||"N/A"," ")}}function ia(i,n){if(i&1){let e=J();A(0),u(1,"div",12)(2,"input",67),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.url,s)||(_.url=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.url)}}function na(i,n){if(i&1&&(u(0,"mat-cell"),I(1,ta,3,1,"ng-container",55)(2,ia,3,2,"ng-container",55),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function aa(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"Action"),p())}function oa(i,n){if(i&1){let e=J();A(0),u(1,"mat-icon",69),te("click",function(){F(e);let s=f().$implicit,_=f(2);return B(_.editROw(s))}),w(2,"edit"),p(),u(3,"mat-icon",69),te("click",function(){F(e);let s=f().$implicit,_=f(2);return B(_.removeROw(s))}),w(4,"delete"),p(),R()}}function ra(i,n){if(i&1){let e=J();u(0,"button",73),te("click",function(){F(e);let s=f(4);return B(s.updateEdit())}),w(1),ie(2,"translate"),p()}if(i&2){let e=f(4);C("disabled",e.editdisabled||!e.editHotspot.text||e.editHotspot.text.length===0),m(),ye(ne(2,2,"ACTION.Update"))}}function la(i,n){if(i&1){let e=J();u(0,"button",74),te("click",function(){F(e);let s=f(4);return B(s.onActionPannellumClickLastPoint())}),w(1,"\u0646\u0642\u0637\u0647"),p()}if(i&2){let e=f(4);C("disabled",e.editdisabled)}}function sa(i,n){if(i&1){let e=J();A(0),I(1,ra,3,4,"button",70),u(2,"button",71),te("click",function(){F(e);let s=f(3);return B(s.cancelEdit())}),w(3),ie(4,"translate"),p(),I(5,la,2,1,"button",72),R()}if(i&2){let e=f(3);m(),C("ngIf",e.postionView),m(),C("disabled",e.editdisabled),m(),ye(ne(4,4,"ACTION.CANCEL")),m(2),C("ngIf",e.editHotspot.pitch!==(e.postionView==null?null:e.postionView.clickGetPitch)&&e.editHotspot.yaw!==(e.postionView==null?null:e.postionView.clickGetYaw))}}function ca(i,n){if(i&1&&(u(0,"mat-cell")(1,"span",68),I(2,oa,5,0,"ng-container",55)(3,sa,6,6,"ng-container",55),p()()),i&2){let e=n.$implicit,l=f(2);m(2),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function da(i,n){i&1&&ge(0,"mat-header-row")}function ma(i,n){if(i&1&&ge(0,"mat-row"),i&2){let e=n.dataIndex;Nt("ntk-row-odd",e%2)("ntk-row-even",!(e%2))}}function ua(i,n){if(i&1){let e=J();u(0,"mat-icon",50),te("click",function(){F(e);let s=f(2);return B(s.dataDetailModel.configDataJson="")}),w(1,"close"),p()}}function pa(i,n){if(i&1){let e=J();u(0,"div",10)(1,"div",11)(2,"div",12)(3,"label",13),w(4),ie(5,"translate"),p(),u(6,"input",14,1),ie(8,"translate"),_e("ngModelChange",function(s){F(e);let _=f();return he(_.dataDetailModel.title,s)||(_.dataDetailModel.title=s),B(s)}),p(),I(9,xn,2,0,"mat-icon",15),u(10,"mat-icon",16),w(11,"mode_edit"),p()(),u(12,"div",12)(13,"label",17),w(14),ie(15,"translate"),p(),u(16,"input",18,2),ie(18,"translate"),_e("ngModelChange",function(s){F(e);let _=f();return he(_.dataDetailModel.description,s)||(_.dataDetailModel.description=s),B(s)}),p(),I(19,wn,2,0,"mat-icon",15),u(20,"mat-icon",16),w(21,"mode_edit"),p()(),u(22,"div",12)(23,"label",19),w(24),ie(25,"translate"),p(),u(26,"input",20,3),ie(28,"translate"),_e("ngModelChange",function(s){F(e);let _=f();return he(_.dataDetailModel.linkFileId,s)||(_.dataDetailModel.linkFileId=s),B(s)}),te("click",function(){F(e);let s=f();return B(s.fileManagerOpenFormReport=!0)}),p(),I(29,yn,2,0,"mat-icon",21),u(30,"mat-icon",22),te("click",function(){F(e);let s=f();return B(s.fileManagerOpenFormReport=!0)}),w(31,"mode_edit"),p()(),u(32,"cms-file-manager",23),te("itemSelected",function(s){F(e);let _=f();return B(_.onActionFileSelect(s))}),_e("openFormChange",function(s){F(e);let _=f();return he(_.fileManagerOpenFormReport,s)||(_.fileManagerOpenFormReport=s),B(s)}),p(),u(33,"a",24),ie(34,"cmsthumbnail"),I(35,Mn,2,4,"img",25),p(),ge(36,"hr"),I(37,bn,19,4,"table",26),ge(38,"hr"),u(39,"h5"),w(40,"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A "),p(),u(41,"p"),w(42,"\u062F\u0631 \u0648\u0631\u0648\u062F \u0627\u06CC\u0646 \u062A\u0646\u0638\u06CC\u0645\u0627\u062A \u0628\u0627 \u0645\u062F\u06CC\u0631\u06CC\u062A \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06AF \u0628\u0627\u0634\u06CC\u062F"),p(),u(43,"div",27)(44,"div",28),I(45,Tn,3,3,"button",29),p(),u(46,"mat-table",30,4),A(48,31),I(49,En,2,0,"mat-header-cell",32)(50,Ln,3,2,"mat-cell",33),R(),A(51,34),I(52,Dn,2,0,"mat-header-cell",32)(53,Rn,3,2,"mat-cell",33),R(),A(54,35),I(55,kn,2,0,"mat-header-cell",32)(56,Fn,3,2,"mat-cell",33),R(),A(57,36),I(58,Bn,2,0,"mat-header-cell",32)(59,Un,3,2,"mat-cell",33),R(),A(60,37),I(61,Gn,2,0,"mat-header-cell",32)(62,zn,3,2,"mat-cell",33),R(),A(63,38),I(64,qn,2,0,"mat-header-cell",32)(65,jn,3,2,"mat-cell",33),R(),A(66,39),I(67,Kn,2,0,"mat-header-cell",32)(68,Qn,3,2,"mat-cell",33),R(),A(69,40),I(70,ea,2,0,"mat-header-cell",32)(71,na,3,2,"mat-cell",33),R(),A(72,41),I(73,aa,2,0,"mat-header-cell",32)(74,ca,4,2,"mat-cell",33),R(),I(75,da,1,0,"mat-header-row",42)(76,ma,1,4,"mat-row",43),p()(),u(77,"div",44)(78,"label",45),w(79),ie(80,"translate"),p(),u(81,"input",46,2),ie(83,"translate"),_e("ngModelChange",function(s){F(e);let _=f();return he(_.dataDetailModel.configDataJson,s)||(_.dataDetailModel.configDataJson=s),B(s)}),p(),I(84,ua,2,0,"mat-icon",15),u(85,"mat-icon",16),w(86,"mode_edit"),p()(),u(87,"div",28)(88,"button",9),te("click",function(){F(e);let s=f();return B(s.onActionSubmitView360())}),ge(89,"i",47),w(90),ie(91,"translate"),p(),u(92,"button",48),te("click",function(){F(e);let s=f();return B(s.onActionCancellView360())}),ge(93,"i",49),w(94),ie(95,"translate"),p()(),ge(96,"br"),p()()}if(i&2){let e=f();m(4),ye(ne(5,39,"TITLE.Photography_Place")),m(2),C("placeholder",Ue(ne(8,41,"TITLE.Photography_Place"))),fe("ngModel",e.dataDetailModel.title),m(3),C("ngIf",e.dataDetailModel.title),m(5),ye(ne(15,43,"TITLE.DESCRIPTION")),m(2),C("placeholder",Ue(ne(18,45,"TITLE.DESCRIPTION"))),fe("ngModel",e.dataDetailModel.description),m(3),C("ngIf",e.dataDetailModel.description),m(5),ye(ne(25,47,"TITLE.View_360_File_ID")),m(2),C("placeholder",Ue(ne(28,49,"TITLE.View_360_File_ID"))),fe("ngModel",e.dataDetailModel.linkFileId),m(3),C("ngIf",e.dataDetailModel.linkFileId),m(3),C("language",e.appLanguage)("isPopup",!0),fe("openForm",e.fileManagerOpenFormReport),C("tree",e.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeReport)("openFilemanagerButtonView",!1),m(),C("href",Ue(ne(34,51,e.dataDetailModel.panorama)),Ct),m(2),C("ngIf",(e.dataDetailModel==null||e.dataDetailModel.panorama==null?null:e.dataDetailModel.panorama.length)>0),m(2),C("ngIf",e.postionView),m(8),C("ngIf",e.postionView),m(),C("dataSource",e.tableHotSpotdataSource),m(29),C("matHeaderRowDef",e.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),m(),C("matRowDefColumns",e.tableHotspotDisplayedColumns),m(3),ye(ne(80,53,"TITLE.configDataJson")),m(2),C("placeholder",Ue(ne(83,55,"TITLE.configDataJson"))),fe("ngModel",e.dataDetailModel.configDataJson),m(3),C("ngIf",e.dataDetailModel.configDataJson),m(6),ce(" ",ne(91,57,"ACTION.SUBMIT_BUTTON")," "),m(4),ce(" ",ne(95,59,"ACTION.CANCEL")," ")}}function fa(i,n){i&1&&(u(0,"mat-header-cell"),w(1),ie(2,"translate"),p()),i&2&&(m(),ce(" ",ne(2,1,"TITLE.PHOTO")," "))}function ha(i,n){if(i&1&&ge(0,"img",52),i&2){let e=f(2).$implicit;C("src",Ue(e.panorama),Ct)}}function _a(i,n){if(i&1&&(A(0),u(1,"a",24),I(2,ha,1,2,"img",25),p(),R()),i&2){let e=f().$implicit;m(),C("href",Ue(e.panorama),Ct),m(),C("ngIf",(e==null||e.panorama==null?null:e.panorama.length)>0)}}function ga(i,n){if(i&1&&(u(0,"mat-cell"),I(1,_a,3,3,"ng-container",55),p()),i&2){let e=n.$implicit;m(),C("ngIf",e.panorama)}}function Ca(i,n){i&1&&(u(0,"mat-header-cell"),w(1),ie(2,"translate"),p()),i&2&&(m(),ce(" ",ne(2,1,"TITLE.Photography_Place")," "))}function va(i,n){if(i&1&&(A(0),w(1),R()),i&2){let e=f().$implicit;m(),ce(" ",e.title," ")}}function xa(i,n){if(i&1&&(u(0,"mat-cell"),I(1,va,2,1,"ng-container",55),p()),i&2){let e=n.$implicit;m(),C("ngIf",e.title)}}function wa(i,n){i&1&&(u(0,"mat-header-cell"),w(1),ie(2,"translate"),p()),i&2&&(m(),ce(" ",ne(2,1,"TITLE.DESCRIPTION")," "))}function ya(i,n){if(i&1&&(A(0),w(1),R()),i&2){let e=f().$implicit;m(),ce(" ",e.description," ")}}function Ma(i,n){if(i&1&&(u(0,"mat-cell"),I(1,ya,2,1,"ng-container",55),p()),i&2){let e=n.$implicit;m(),C("ngIf",e.description)}}function ba(i,n){i&1&&(u(0,"mat-header-cell"),w(1),ie(2,"translate"),ie(3,"translate"),p()),i&2&&(m(),ni(" ",ne(2,2,"TITLE.Edit")," | ",ne(3,4,"TITLE.Delete")," "))}function Ta(i,n){if(i&1){let e=J();u(0,"mat-cell",81)(1,"small")(2,"mat-icon",82),te("click",function(){let s=F(e).renderIndex,_=f(2);return B(_.onActionOptionEditView360(s))}),w(3,"edit"),p()(),w(4,"| "),u(5,"small")(6,"mat-icon",83),te("click",function(){let s=F(e).renderIndex,_=f(2);return B(_.onActionOptionRemoveView360(s))}),w(7,"delete"),p()()()}}function Ea(i,n){i&1&&ge(0,"mat-header-row")}function Ia(i,n){if(i&1&&ge(0,"mat-row"),i&2){let e=n.dataIndex;Nt("ntk-row-odd",e%2)("ntk-row-even",!(e%2))}}function Sa(i,n){if(i&1&&(u(0,"div",10)(1,"mat-table",75),A(2,76),I(3,fa,3,3,"mat-header-cell",32)(4,ga,2,1,"mat-cell",33),R(),A(5,77),I(6,Ca,3,3,"mat-header-cell",32)(7,xa,2,1,"mat-cell",33),R(),A(8,78),I(9,wa,3,3,"mat-header-cell",32)(10,Ma,2,1,"mat-cell",33),R(),A(11,41),I(12,ba,4,6,"mat-header-cell",32)(13,Ta,8,0,"mat-cell",79),R(),I(14,Ea,1,0,"mat-header-row",80)(15,Ia,1,4,"mat-row",43),p()()),i&2){let e=f();m(),C("dataSource",e.tabledataSource),m(13),C("matHeaderRowDef",e.tabledisplayedColumns),m(),C("matRowDefColumns",e.tabledisplayedColumns)}}var Ni=class{},It=class It{constructor(n,e,l){this.cmsToastrService=n;this.publicHelper=e;this.translate=l;this.id=++It.nextId;this.privateDataModel=[];this.dataDetailModel=new hi;this.dataModelChange=new Qt;this.formInfo=new fi;this.tabledataSource=new Ut;this.tableHotSpotdataSource=new Ut;this.tabledisplayedColumns=["panorama","Title","Description","Action"];this.tableHotspotDisplayedColumns=["type","text","url","pitch","yaw","Action"];this.selectFileTypeReport=["jpeg","jpg"];this.appLanguage="fa";this.showAddView360=!1;this.fileManagerOpenFormReport=!1;this.inAddhotspotGuid="";this.selectIndex=-1;this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}set dataModel(n){n||(n=[]),this.privateDataModel=n,this.privateDataModel.forEach(e=>{e.hotSpots||(e.hotSpots=[]),e.hotSpots=this.uniqByReduce(e.hotSpots),e.hotSpots.forEach(l=>{l.guid=this.getGuid()})}),this.tabledataSource.data=this.privateDataModel,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}uniqByReduce(n){let e=[];return n.forEach(l=>{!e.includes(l)&&e.filter(s=>s.pitch==l.pitch&&s.yaw==l.yaw).length==0&&e.push(l)}),e}ngOnInit(){this.translate.get("TITLE.Edit").subscribe(n=>{this.formInfo.formTitle=n})}ngAfterViewInit(){this.container.nativeElement.style.display="none"}getGuid(){return Math.floor(Math.random()*new Date().getTime()).toString()}actionPannellumImageLoad(n,e){let l={type:"equirectangular",panorama:n,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};e&&e.length>0&&(l.hotSpots=e);let s=Object.assign({},l,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,s),this.container.nativeElement.style.display="block"}actionPrivateDataModelOptimaze(){let n=[];this.privateDataModel||(this.privateDataModel=[]),this.privateDataModel.forEach(e=>{e.hotSpots||(e.hotSpots=[]),e.hotSpots.forEach(l=>{l.type&&l.type.length>0&&n.push(l)}),e.hotSpots=this.uniqByReduce(n)})}onActionPannellumClick(n){if(!this.viewer)return;this.postionView=new Ni,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();let e=this.viewer.mouseEventToCoords(n);!e||e.length==0||(this.postionView.clickGetYaw=e[1],this.postionView.clickGetPitch=e[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(this.postionView.clickGetYaw!=0||this.postionView.clickGetPitch!=0)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(n){if(!n||!n.id||n.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.dataDetailModel.linkFileId=n.id,this.dataDetailModel.panorama=n.downloadLinksrc,this.dataDetailModel.preview=n.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06CC\u0644 \u0627\u0646\u062A\u062E\u0627\u0628 \u0646\u0634\u062F\u0647"),this.privateDataModel||(this.privateDataModel=[]),this.selectIndex>=0?this.privateDataModel[this.selectIndex]=this.dataDetailModel:this.privateDataModel.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new hi,this.showAddView360=!this.showAddView360}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new hi),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new Se;let n=new Se;n.type="info",n.guid=this.getGuid(),this.inAddhotspotGuid=n.guid,this.dataDetailModel.hotSpots.push(n),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(n),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(n){n<0||!this.privateDataModel||this.privateDataModel.length===0||(this.privateDataModel.splice(n,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(n){n<0||!this.privateDataModel||this.privateDataModel.length===0||(this.dataDetailModel=this.privateDataModel[n],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new Se,this.editHotspot=new Se,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=n,this.showAddView360=!this.showAddView360)}newROw(n){this.editHotspot=n&&n.guid?n:new Se,this.oldHotspot=Ot({},this.editHotspot)}editROw(n){this.editHotspot=n&&n.guid?n:new Se,this.oldHotspot=Ot({},this.editHotspot),this.inAddhotspotGuid=""}removeROw(n){let e=this.dataDetailModel.hotSpots.findIndex(l=>l.guid==n.guid);e>=0&&(this.dataDetailModel.hotSpots.splice(e,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;let n=this.dataDetailModel.hotSpots.findIndex(e=>e.guid==this.oldHotspot.guid);n>=0&&(this.dataDetailModel.hotSpots[n]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new Se,this.editHotspot=new Se}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(n=>n.guid!=this.inAddhotspotGuid)),this.editHotspot=new Se,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}};It.nextId=0,It.\u0275fac=function(e){return new(e||It)(Et(Ri),Et(ki),Et(Di))},It.\u0275cmp=Jt({type:It,selectors:[["app-cms-360-image-list"]],viewQuery:function(e,l){if(e&1&&ei(Cn,5),e&2){let s;ti(s=ii())&&(l.container=s.first)}},inputs:{dataModel:"dataModel"},outputs:{dataModelChange:"dataModelChange"},standalone:!1,decls:6,vars:5,consts:[["container",""],["Title",""],["Description",""],["LinkFileId",""],["table",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"click","id"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"optionsInfoAreaId"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataDetailModel.title",1,"color-highlight"],["type","text","name","dataDetailModel.title","id","dataDetailModel.title","minlength","3","maxlength","100","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["for","dataDetailModel.description",1,"color-highlight"],["type","text","name","dataDetailModel.description","id","dataDetailModel.description","minlength","3","maxlength","100",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataDetailModel.linkFileId",1,"color-highlight"],["type","text","name","dataDetailModel.linkFileId","id","dataDetailModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["matColumnDef","sceneId"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","type"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ntk-row-odd","ntk-row-even",4,"matRowDef","matRowDefColumns"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4",2,"visibility","hidden"],["for","dataDetailModel.configDataJson",1,"color-highlight"],["type","text","name","dataDetailModel.configDataJson","id","dataDetailModel.configDataJson","minlength","0","maxlength","10000","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[4,"ngIf"],[1,"text-truncate"],["matInput","","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0635\u062D\u0646\u0647","name","sceneId",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["matInput","","type","number","placeholder","pitch","name","pitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"text-truncate","grid-row-ltr-center"],["matInput","","type","number","placeholder","yaw","name","yaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["placeholder","Select","name","type",1,"form-control","validate-name",3,"ngModelChange","disabled","ngModel"],[3,"value"],["matInput","","placeholder","targetYaw","name","targetYaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["matInput","","placeholder","targetPitch","name","targetPitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["matInput","","placeholder","text","name","text",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click","disabled"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green","matTooltip","\u062B\u0628\u062A \u0622\u062E\u0631\u06CC\u0646 \u0646\u0642\u0637\u0647 \u06A9\u0644\u06CC\u06A9 \u0634\u062F\u0647",3,"disabled","click",4,"ngIf"],["type","button",1,"mb-2",3,"click","disabled"],["type","button","matTooltip","\u062B\u0628\u062A \u0622\u062E\u0631\u06CC\u0646 \u0646\u0642\u0637\u0647 \u06A9\u0644\u06CC\u06A9 \u0634\u062F\u0647",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"click","disabled"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","Description"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(e,l){if(e&1){let s=J();I(0,vn,3,3,"button",5),u(1,"div",6,0),te("click",function(Me){return F(s),B(l.onActionPannellumClick(Me))}),p(),I(3,pa,97,61,"div",7),ge(4,"app-progress-spinner",8),I(5,Sa,16,3,"div",7)}e&2&&(C("ngIf",!l.showAddView360),m(),C("id",l.id),m(2),C("ngIf",l.showAddView360),m(),C("optionsInfoAreaId",l.constructor.name),m(),C("ngIf",!l.showAddView360))},dependencies:[ai,oi,si,ri,ci,di,mi,li,_i,ui,pi,Xi,gi,vi,xi,yi,Ei,Mi,wi,Ii,bi,Ti,Si,Li,Ci,Ai,Vi,Pi,Hi],encapsulation:2});var ji=It;var La=["container"];function Da(i,n){if(i&1){let e=J();u(0,"button",9),te("click",function(){F(e);let s=f();return B(s.onActionShowView360Add())}),w(1),ie(2,"translate"),p()}i&2&&(m(),ce(" ",ne(2,1,"ACTION.Add_To_List"),`
`))}function Pa(i,n){if(i&1){let e=J();u(0,"button",10),te("click",function(){F(e);let s=f();return B(s.onActionImportFile360View())}),w(1,` \u0648\u0631\u0648\u062F \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0639\u06A9\u0633 \u0647\u0627\u06CC 360
`),p()}}function Aa(i,n){if(i&1){let e=J();u(0,"button",10),te("click",function(){F(e);let s=f();return B(s.actionPannellumTourLoad())}),w(1,` \u0646\u0645\u0627\u06CC\u0634 \u062A\u0648\u0631
`),p()}}function Ra(i,n){if(i&1){let e=J();u(0,"mat-icon",46),te("click",function(){F(e);let s=f(2);return B(s.dataDetailModel.title="")}),w(1,"close"),p()}}function ka(i,n){if(i&1){let e=J();u(0,"mat-icon",47),te("click",function(){F(e);let s=f(2);return B(s.dataDetailModel.linkFileId=null)}),w(1,"close"),p()}}function Va(i,n){if(i&1&&(ge(0,"img",48),ie(1,"cmsthumbnail")),i&2){let e=f(2);C("src",Ue(ne(1,2,e.dataDetailModel.panorama)),Ct)}}function Ha(i,n){if(i&1&&(u(0,"table",49)(1,"tr")(2,"td"),w(3,"viewer Yaw"),p(),u(4,"td"),w(5,"viewer Pitch"),p(),u(6,"td"),w(7,"click Yaw"),p(),u(8,"td"),w(9,"click Pitch"),p()(),u(10,"tr")(11,"td"),w(12),p(),u(13,"td"),w(14),p(),u(15,"td"),w(16),p(),u(17,"td"),w(18),p()()()),i&2){let e=f(2);m(12),ye(e.postionView.viewerGetYaw),m(2),ye(e.postionView.viewerGetPitch),m(2),ye(e.postionView.clickGetYaw),m(2),ye(e.postionView.clickGetPitch)}}function Fa(i,n){if(i&1){let e=J();u(0,"button",50),te("click",function(){F(e);let s=f(2);return B(s.onActionShowHotspotAdd())}),w(1),ie(2,"translate"),p()}i&2&&(m(),ce(" ",ne(2,1,"ACTION.ADD")," "))}function Ba(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"\u0646\u0648\u0639"),p())}function Oa(i,n){if(i&1&&(A(0),u(1,"p",52),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ye(e.type)}}function Na(i,n){if(i&1){let e=J();A(0),u(1,"div",13)(2,"mat-select",53),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.type,s)||(_.type=s),B(s)}),u(3,"mat-option",54),w(4,"\u0635\u062D\u0646\u0647"),p(),u(5,"mat-option",54),w(6,"\u0627\u0637\u0644\u0627\u0639\u0627\u062A"),p()()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.type),m(),C("value","scene"),m(2),C("value","info")}}function Ua(i,n){if(i&1&&(u(0,"mat-cell"),I(1,Oa,3,1,"ng-container",51)(2,Na,7,4,"ng-container",51),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function Ga(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062D\u0646\u0647"),p())}function Wa(i,n){if(i&1&&(A(0),u(1,"p",55),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.sceneId||"N/A"," ")}}function Ya(i,n){if(i&1){let e=J();A(0),u(1,"div",13)(2,"input",56),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.sceneId,s)||(_.sceneId=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.sceneId)}}function za(i,n){if(i&1&&(u(0,"mat-cell"),I(1,Wa,3,1,"ng-container",51)(2,Ya,3,2,"ng-container",51),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid&&e.type==="scene")}}function qa(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062D\u0646\u0647"),p())}function Xa(i,n){if(i&1&&(A(0),u(1,"p",52),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ye(e.sceneId)}}function $a(i,n){if(i&1&&(u(0,"mat-option",54),w(1),p()),i&2){let e=n.$implicit;C("value",e.linkFileId),m(),ye(e.title)}}function ja(i,n){if(i&1){let e=J();A(0),u(1,"div",13)(2,"mat-select",57),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.sceneId,s)||(_.sceneId=s),B(s)}),I(3,$a,2,2,"mat-option",58),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.sceneId),m(),C("ngForOf",l.scenesList)}}function Ka(i,n){if(i&1&&(u(0,"mat-cell"),I(1,Xa,3,1,"ng-container",51)(2,ja,4,3,"ng-container",51),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid&&e.type==="scene")}}function Za(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"pitch"),p())}function Ja(i,n){if(i&1&&(A(0),u(1,"p",55),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.pitch||"N/A"," ")}}function Qa(i,n){if(i&1){let e=J();A(0),u(1,"div",13)(2,"input",59),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.pitch,s)||(_.pitch=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.pitch)}}function eo(i,n){if(i&1&&(u(0,"mat-cell"),I(1,Ja,3,1,"ng-container",51)(2,Qa,3,2,"ng-container",51),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function to(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"yaw"),p())}function io(i,n){if(i&1&&(A(0),u(1,"p",52),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.yaw||"N/A"," ")}}function no(i,n){if(i&1){let e=J();A(0),u(1,"div",13)(2,"input",60),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.yaw,s)||(_.yaw=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.yaw)}}function ao(i,n){if(i&1&&(u(0,"mat-cell"),I(1,io,3,1,"ng-container",51)(2,no,3,2,"ng-container",51),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function oo(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"targetYaw"),p())}function ro(i,n){if(i&1&&(A(0),u(1,"p",52),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.targetYaw||"N/A"," ")}}function lo(i,n){if(i&1){let e=J();A(0),u(1,"div",13)(2,"input",61),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.targetYaw,s)||(_.targetYaw=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.targetYaw)}}function so(i,n){if(i&1&&(u(0,"mat-cell"),I(1,ro,3,1,"ng-container",51)(2,lo,3,2,"ng-container",51),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function co(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"targetPitch"),p())}function mo(i,n){if(i&1&&(A(0),u(1,"p",52),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.targetPitch||"N/A"," ")}}function uo(i,n){if(i&1){let e=J();A(0),u(1,"div",13)(2,"input",62),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.targetPitch,s)||(_.targetPitch=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.targetPitch)}}function po(i,n){if(i&1&&(u(0,"mat-cell"),I(1,mo,3,1,"ng-container",51)(2,uo,3,2,"ng-container",51),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function fo(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"\u062A\u0648\u0636\u06CC\u062D\u0627\u062A"),p())}function ho(i,n){if(i&1&&(A(0),u(1,"p",55),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.text||"N/A"," ")}}function _o(i,n){if(i&1){let e=J();A(0),u(1,"div",13)(2,"input",63),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.text,s)||(_.text=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.text)}}function go(i,n){if(i&1&&(u(0,"mat-cell"),I(1,ho,3,1,"ng-container",51)(2,_o,3,2,"ng-container",51),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function Co(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"\u0622\u062F\u0631\u0633 \u0648\u0628 \u0633\u0627\u06CC\u062A"),p())}function vo(i,n){if(i&1&&(A(0),u(1,"p",64),w(2),p(),R()),i&2){let e=f().$implicit;m(2),ce("",e.url||"N/A"," ")}}function xo(i,n){if(i&1){let e=J();A(0),u(1,"div",13)(2,"input",65),_e("ngModelChange",function(s){F(e);let _=f().$implicit;return he(_.url,s)||(_.url=s),B(s)}),p()(),R()}if(i&2){let e=f().$implicit,l=f(2);m(2),C("disabled",l.editdisabled),fe("ngModel",e.url)}}function wo(i,n){if(i&1&&(u(0,"mat-cell"),I(1,vo,3,1,"ng-container",51)(2,xo,3,2,"ng-container",51),p()),i&2){let e=n.$implicit,l=f(2);m(),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function yo(i,n){i&1&&(u(0,"mat-header-cell"),w(1,"Action"),p())}function Mo(i,n){if(i&1){let e=J();A(0),u(1,"mat-icon",67),te("click",function(){F(e);let s=f().$implicit,_=f(2);return B(_.editROw(s))}),w(2,"edit"),p(),u(3,"mat-icon",67),te("click",function(){F(e);let s=f().$implicit,_=f(2);return B(_.removeROw(s))}),w(4,"delete"),p(),R()}}function bo(i,n){if(i&1){let e=J();u(0,"button",71),te("click",function(){F(e);let s=f(4);return B(s.updateEdit())}),w(1),ie(2,"translate"),p()}if(i&2){let e=f(4);C("disabled",e.editdisabled||!e.editHotspot.text||e.editHotspot.text.length===0),m(),ye(ne(2,2,"ACTION.Update"))}}function To(i,n){if(i&1){let e=J();u(0,"button",72),te("click",function(){F(e);let s=f(4);return B(s.onActionPannellumClickLastPoint())}),w(1,"\u0646\u0642\u0637\u0647"),p()}if(i&2){let e=f(4);C("disabled",e.editdisabled)}}function Eo(i,n){if(i&1){let e=J();A(0),I(1,bo,3,4,"button",68),u(2,"button",69),te("click",function(){F(e);let s=f(3);return B(s.cancelEdit())}),w(3),ie(4,"translate"),p(),I(5,To,2,1,"button",70),R()}if(i&2){let e=f(3);m(),C("ngIf",e.postionView),m(),C("disabled",e.editdisabled),m(),ye(ne(4,4,"ACTION.CANCEL")),m(2),C("ngIf",e.editHotspot.pitch!==(e.postionView==null?null:e.postionView.clickGetPitch)&&e.editHotspot.yaw!==(e.postionView==null?null:e.postionView.clickGetYaw))}}function Io(i,n){if(i&1&&(u(0,"mat-cell")(1,"span",66),I(2,Mo,5,0,"ng-container",51)(3,Eo,6,6,"ng-container",51),p()()),i&2){let e=n.$implicit,l=f(2);m(2),C("ngIf",!l.editHotspot.guid||!e.guid||e.guid!==l.editHotspot.guid),m(),C("ngIf",l.editHotspot.guid&&e.guid&&e.guid===l.editHotspot.guid)}}function So(i,n){i&1&&ge(0,"mat-header-row")}function Lo(i,n){if(i&1&&ge(0,"mat-row"),i&2){let e=n.dataIndex;Nt("ntk-row-odd",e%2)("ntk-row-even",!(e%2))}}function Do(i,n){if(i&1){let e=J();u(0,"div",11)(1,"div",12)(2,"div",13)(3,"mat-label"),w(4),ie(5,"translate"),p(),u(6,"label",14),w(7),ie(8,"translate"),p(),u(9,"input",15,1),ie(11,"translate"),_e("ngModelChange",function(s){F(e);let _=f();return he(_.dataDetailModel.title,s)||(_.dataDetailModel.title=s),B(s)}),p(),I(12,Ra,2,0,"mat-icon",16),u(13,"mat-icon",17),w(14,"mode_edit"),p()(),u(15,"div",13)(16,"input",18,2),ie(18,"translate"),_e("ngModelChange",function(s){F(e);let _=f();return he(_.dataDetailModel.linkFileId,s)||(_.dataDetailModel.linkFileId=s),B(s)}),te("click",function(){F(e);let s=f();return B(s.fileManagerOpenFormReport=!0)}),p(),I(19,ka,2,0,"mat-icon",19),u(20,"mat-icon",20),te("click",function(){F(e);let s=f();return B(s.fileManagerOpenFormReport=!0)}),w(21,"mode_edit"),p()(),u(22,"cms-file-manager",21),te("itemSelected",function(s){F(e);let _=f();return B(_.onActionFileSelect(s))}),_e("openFormChange",function(s){F(e);let _=f();return he(_.fileManagerOpenFormReport,s)||(_.fileManagerOpenFormReport=s),B(s)}),p(),u(23,"a",22),ie(24,"cmsthumbnail"),I(25,Va,2,4,"img",23),p(),ge(26,"hr"),I(27,Ha,19,4,"table",24),ge(28,"hr"),u(29,"h5"),w(30,"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A \u062A\u0648\u0631"),p(),u(31,"p"),w(32,"\u062F\u0631 \u0648\u0631\u0648\u062F \u0627\u06CC\u0646 \u062A\u0646\u0638\u06CC\u0645\u0627\u062A \u0628\u0627 \u0645\u062F\u06CC\u0631\u06CC\u062A \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06AF \u0628\u0627\u0634\u06CC\u062F"),p(),u(33,"div",25)(34,"div",26),I(35,Fa,3,3,"button",27),p(),u(36,"mat-table",28,3),A(38,29),I(39,Ba,2,0,"mat-header-cell",30)(40,Ua,3,2,"mat-cell",31),R(),A(41,32),I(42,Ga,2,0,"mat-header-cell",30)(43,za,3,2,"mat-cell",31),R(),A(44,33),I(45,qa,2,0,"mat-header-cell",30)(46,Ka,3,2,"mat-cell",31),R(),A(47,34),I(48,Za,2,0,"mat-header-cell",30)(49,eo,3,2,"mat-cell",31),R(),A(50,35),I(51,to,2,0,"mat-header-cell",30)(52,ao,3,2,"mat-cell",31),R(),A(53,36),I(54,oo,2,0,"mat-header-cell",30)(55,so,3,2,"mat-cell",31),R(),A(56,37),I(57,co,2,0,"mat-header-cell",30)(58,po,3,2,"mat-cell",31),R(),A(59,38),I(60,fo,2,0,"mat-header-cell",30)(61,go,3,2,"mat-cell",31),R(),A(62,39),I(63,Co,2,0,"mat-header-cell",30)(64,wo,3,2,"mat-cell",31),R(),A(65,40),I(66,yo,2,0,"mat-header-cell",30)(67,Io,4,2,"mat-cell",31),R(),I(68,So,1,0,"mat-header-row",41)(69,Lo,1,4,"mat-row",42),p()(),u(70,"div",26)(71,"button",9),te("click",function(){F(e);let s=f();return B(s.onActionSubmitView360())}),ge(72,"i",43),w(73),ie(74,"translate"),p(),u(75,"button",44),te("click",function(){F(e);let s=f();return B(s.onActionCancellView360())}),ge(76,"i",45),w(77),ie(78,"translate"),p()(),ge(79,"br"),p()()}if(i&2){let e=f();m(4),ye(ne(5,29,"TITLE.Photography_Place")),m(3),ye(ne(8,31,"TITLE.title")),m(2),C("placeholder",Ue(ne(11,33,"TITLE.Photography_Place"))),fe("ngModel",e.dataDetailModel.title),m(3),C("ngIf",e.dataDetailModel.title),m(4),C("placeholder",Ue(ne(18,35,"TITLE.View_360_File_ID"))),fe("ngModel",e.dataDetailModel.linkFileId),m(3),C("ngIf",e.dataDetailModel.linkFileId),m(3),C("language",e.appLanguage)("isPopup",!0),fe("openForm",e.fileManagerOpenFormReport),C("tree",e.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeReport)("openFilemanagerButtonView",!1),m(),C("href",Ue(ne(24,37,e.dataDetailModel.panorama)),Ct),m(2),C("ngIf",(e.dataDetailModel==null||e.dataDetailModel.panorama==null?null:e.dataDetailModel.panorama.length)>0),m(2),C("ngIf",e.postionView),m(8),C("ngIf",e.postionView),m(),C("dataSource",e.tableHotSpotdataSource),m(32),C("matHeaderRowDef",e.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),m(),C("matRowDefColumns",e.tableHotspotDisplayedColumns),m(4),ce(" ",ne(74,39,"ACTION.SUBMIT_BUTTON")," "),m(4),ce(" ",ne(78,41,"ACTION.CANCEL")," ")}}function Po(i,n){i&1&&(u(0,"mat-header-cell"),w(1),ie(2,"translate"),p()),i&2&&(m(),ce(" ",ne(2,1,"TITLE.PHOTO")," "))}function Ao(i,n){if(i&1&&ge(0,"img",48),i&2){let e=f(2).$implicit;C("src",Ue(e.panorama),Ct)}}function Ro(i,n){if(i&1&&(A(0),u(1,"a",22),I(2,Ao,1,2,"img",23),p(),R()),i&2){let e=f().$implicit;m(),C("href",Ue(e.panorama),Ct),m(),C("ngIf",(e==null||e.panorama==null?null:e.panorama.length)>0)}}function ko(i,n){if(i&1&&(u(0,"mat-cell"),I(1,Ro,3,3,"ng-container",51),p()),i&2){let e=n.$implicit;m(),C("ngIf",e.panorama)}}function Vo(i,n){i&1&&(u(0,"mat-header-cell"),w(1),ie(2,"translate"),p()),i&2&&(m(),ce(" ",ne(2,1,"TITLE.Photography_Place")," "))}function Ho(i,n){if(i&1&&(A(0),w(1),R()),i&2){let e=f().$implicit;m(),ce(" ",e.title," ")}}function Fo(i,n){if(i&1&&(u(0,"mat-cell"),I(1,Ho,2,1,"ng-container",51),p()),i&2){let e=n.$implicit;m(),C("ngIf",e.title)}}function Bo(i,n){i&1&&(u(0,"mat-header-cell"),w(1," \u0634\u0646\u0627\u0633\u0647 \u0635\u062D\u0646\u0647 "),p())}function Oo(i,n){if(i&1&&(u(0,"mat-cell"),A(1),w(2),R(),p()),i&2){let e=n.$implicit;m(2),ce(" ",e.linkFileId," ")}}function No(i,n){i&1&&(u(0,"mat-header-cell"),w(1),ie(2,"translate"),ie(3,"translate"),p()),i&2&&(m(),ni(" ",ne(2,2,"TITLE.Edit")," | ",ne(3,4,"TITLE.Delete")," "))}function Uo(i,n){if(i&1){let e=J();u(0,"mat-cell",79)(1,"small")(2,"mat-icon",80),te("click",function(){let s=F(e).renderIndex,_=f(2);return B(_.onActionOptionEditView360(s))}),w(3,"edit"),p()(),w(4,"| "),u(5,"small")(6,"mat-icon",81),te("click",function(){let s=F(e).renderIndex,_=f(2);return B(_.onActionOptionRemoveView360(s))}),w(7,"delete"),p()()()}}function Go(i,n){i&1&&ge(0,"mat-header-row")}function Wo(i,n){if(i&1&&ge(0,"mat-row"),i&2){let e=n.dataIndex;Nt("ntk-row-odd",e%2)("ntk-row-even",!(e%2))}}function Yo(i,n){if(i&1&&(u(0,"div",11)(1,"mat-table",73),A(2,74),I(3,Po,3,3,"mat-header-cell",30)(4,ko,2,1,"mat-cell",31),R(),A(5,75),I(6,Vo,3,3,"mat-header-cell",30)(7,Fo,2,1,"mat-cell",31),R(),A(8,76),I(9,Bo,2,0,"mat-header-cell",30)(10,Oo,3,1,"mat-cell",31),R(),A(11,40),I(12,No,4,6,"mat-header-cell",30)(13,Uo,8,0,"mat-cell",77),R(),I(14,Go,1,0,"mat-header-row",78)(15,Wo,1,4,"mat-row",42),p()()),i&2){let e=f();m(),C("dataSource",e.tabledataSource),m(13),C("matHeaderRowDef",e.tabledisplayedColumns),m(),C("matRowDefColumns",e.tabledisplayedColumns)}}var Ui=class{},St=class St{constructor(n,e,l){this.cmsToastrService=n;this.publicHelper=e;this.translate=l;this.id=++St.nextId;this.scenesList=[];this.dataDetailModel=new $t;this.dataModelChange=new Qt;this.formInfo=new fi;this.tabledataSource=new Ut;this.tableHotSpotdataSource=new Ut;this.tabledisplayedColumns=["linkFileId","panorama","Title","Action"];this.tableHotspotDisplayedColumns=["type","sceneIdSelector","text","url","pitch","yaw","Action"];this.selectFileTypeReport=["jpeg","jpg"];this.appLanguage="fa";this.showAddView360=!1;this.fileManagerOpenFormReport=!1;this.actionPannellumTourLoadClick=!1;this.inAddhotspotGuid="";this.selectIndex=-1;this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}getGuid(){return Math.floor(Math.random()*1e3)+""}set dataModel(n){n||(n=new $i),n.defaultValue||(n.defaultValue=new Oi),n.scenes||(n.scenes=new Map),this.scenesList=[],Object.keys(n.scenes).map(e=>{n.scenes[e].guid=this.getGuid(),this.scenesList.push(n.scenes[e])}),this.scenesList.forEach(e=>{e.hotSpots||(e.hotSpots=[]),e.hotSpots.forEach(l=>{l.guid=this.getGuid()})}),this.privateDataModel=n,this.tabledataSource.data=this.scenesList,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}set dataImageModel(n){n||(n=[]),this.privateDataImageModel=n}ngOnInit(){this.translate.get("TITLE.Edit").subscribe(n=>{this.formInfo.formTitle=n})}ngAfterViewInit(){this.container.nativeElement.style.display="none"}uniqByReduce(n){let e=[];return n.forEach(l=>{!e.includes(l)&&e.filter(s=>s.pitch==l.pitch&&s.yaw==l.yaw).length==0&&e.push(l)}),e}actionPannellumImageLoad(n,e){let l={type:"equirectangular",panorama:n,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};e&&e.length>0&&(l.hotSpots=this.uniqByReduce(e));let s=Object.assign({},l,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,s),this.container.nativeElement.style.display="block"}actionPannellumTourLoad(){this.actionPannellumTourLoadClick=!0,this.actionPrivateDataModelOptimaze();let n={};n.default=this.privateDataModel.defaultValue,this.privateDataModel&&this.privateDataModel.scenes&&(n.scenes=this.privateDataModel.scenes);let e=Object.assign({},n,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,e),this.container.nativeElement.style.display="block"}onActionPannellumClick(n){if(!this.viewer)return;if(this.actionPannellumTourLoadClick){this.actionPannellumTourLoadClick=!1;return}this.postionView=new Ui,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();let e=this.viewer.mouseEventToCoords(n);!e||e.length==0||(this.postionView.clickGetYaw=e[1],this.postionView.clickGetPitch=e[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(this.postionView.clickGetYaw!=0||this.postionView.clickGetPitch!=0)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(n){if(!n||!n.id||n.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.dataDetailModel.linkFileId=n.id,this.dataDetailModel.panorama=n.downloadLinksrc,this.dataDetailModel.preview=n.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06CC\u0644 \u0627\u0646\u062A\u062E\u0627\u0628 \u0646\u0634\u062F\u0647"),this.scenesList||(this.scenesList=[]),this.selectIndex>=0?this.scenesList[this.selectIndex]=this.dataDetailModel:this.scenesList.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}actionPrivateDataModelOptimaze(){this.privateDataModel.defaultValue||(this.privateDataModel.defaultValue=new Oi),this.privateDataModel.scenes=new Map,this.scenesList||(this.scenesList=[]),this.scenesList.forEach(n=>{if(n.title&&n.title.length>0){let e=[];n.hotSpots||(n.hotSpots=[]),n.hotSpots.forEach(l=>{l.type&&l.type.length>0&&e.push(l)}),n.hotSpots=this.uniqByReduce(e),this.privateDataModel.scenes[n.linkFileId]=n,this.privateDataModel.scenes[n.linkFileId].hfov=110}}),(!this.privateDataModel.defaultValue.firstScene||this.privateDataModel.defaultValue.firstScene.length==0)&&(this.privateDataModel.scenes&&this.scenesList&&this.scenesList.length>0&&(this.privateDataModel.defaultValue.firstScene=this.scenesList[0].linkFileId+""),this.privateDataModel.defaultValue.sceneFadeDuration=1e3)}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new $t,this.showAddView360=!this.showAddView360,this.tableHotSpotdataSource.data=[]}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new $t),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new Se;let n=new Se;n.guid=this.getGuid(),this.inAddhotspotGuid=n.guid,this.dataDetailModel.hotSpots.push(n),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(n),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(n){n<0||!this.scenesList||this.scenesList.length===0||(this.scenesList.splice(n,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(n){n<0||!this.scenesList||this.scenesList.length===0||(this.dataDetailModel=this.scenesList[n],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new Se,this.editHotspot=new Se,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=n,this.showAddView360=!this.showAddView360)}newROw(n){this.editHotspot=n&&n.guid?n:new Se,this.oldHotspot=Ot({},this.editHotspot)}editROw(n){this.editHotspot=n&&n.guid?n:new Se,this.oldHotspot=Ot({},this.editHotspot),this.inAddhotspotGuid=""}removeROw(n){let e=this.dataDetailModel.hotSpots.findIndex(l=>l.guid==n.guid);e>=0&&(this.dataDetailModel.hotSpots.splice(e,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;let n=this.dataDetailModel.hotSpots.findIndex(e=>e.guid==this.oldHotspot.guid);n>=0&&(this.dataDetailModel.hotSpots[n]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new Se,this.editHotspot=new Se}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(n=>n.guid!=this.inAddhotspotGuid)),this.editHotspot=new Se,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}onActionImportFile360View(){this.privateDataImageModel&&this.privateDataImageModel.length>0&&(this.actionPrivateDataModelOptimaze(),this.privateDataImageModel.forEach(n=>{if(!this.privateDataModel.scenes[n.linkFileId]&&n.linkFileId>0){let e=new $t;e.guid=this.getGuid(),e.linkFileId=n.linkFileId,e.title=n.title,e.hotSpots=this.uniqByReduce(n.hotSpots),e.panorama=n.panorama,e.preview=n.preview,e.hfov=110,this.privateDataModel.scenes[n.linkFileId]=e}}),this.dataModel=this.privateDataModel)}};St.nextId=0,St.\u0275fac=function(e){return new(e||St)(Et(Ri),Et(ki),Et(Di))},St.\u0275cmp=Jt({type:St,selectors:[["app-cms-360-tour-list"]],viewQuery:function(e,l){if(e&1&&ei(La,5),e&2){let s;ti(s=ii())&&(l.container=s.first)}},inputs:{dataModel:"dataModel",dataImageModel:"dataImageModel"},outputs:{dataModelChange:"dataModelChange"},standalone:!1,decls:8,vars:7,consts:[["container",""],["Title",""],["LinkFileId",""],["table",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight","style","margin: 10px ",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"click","id"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"optionsInfoAreaId"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"margin","10px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataDetailModel.title",1,"color-highlight"],["type","text","name","dataDetailModel.title","id","dataDetailModel.title","minlength","3","maxlength","100","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["type","text","name","dataDetailModel.linkFileId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sceneId"],["matColumnDef","sceneIdSelector"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ntk-row-odd","ntk-row-even",4,"matRowDef","matRowDefColumns"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[4,"ngIf"],[1,"text-truncate","grid-row-ltr-center"],["placeholder","Select","name","type",1,"form-control","validate-name",3,"ngModelChange","disabled","ngModel"],[3,"value"],[1,"text-truncate"],["type","text","placeholder","sceneId","name","sceneId",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["placeholder","Select","name","sceneId",1,"form-control","validate-name",3,"ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","number","placeholder","pitch","name","pitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","number","placeholder","yaw","name","yaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","text","placeholder","targetYaw","name","targetYaw",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","text","placeholder","targetPitch","name","targetPitch",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],["type","text","placeholder","text","name","text",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"text-truncate","grid-row-ltr"],["type","text","placeholder","url","name","url",1,"form-control","validate-name",2,"direction","ltr","text-align","left",3,"ngModelChange","disabled","ngModel"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click","disabled"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-green","matTooltip","\u062B\u0628\u062A \u0622\u062E\u0631\u06CC\u0646 \u0646\u0642\u0637\u0647 \u06A9\u0644\u06CC\u06A9 \u0634\u062F\u0647",3,"disabled","click",4,"ngIf"],["type","button",1,"mb-2",3,"click","disabled"],["type","button","matTooltip","\u062B\u0628\u062A \u0622\u062E\u0631\u06CC\u0646 \u0646\u0642\u0637\u0647 \u06A9\u0644\u06CC\u06A9 \u0634\u062F\u0647",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"click","disabled"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","linkFileId"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(e,l){if(e&1){let s=J();I(0,Da,3,3,"button",4)(1,Pa,2,0,"button",5)(2,Aa,2,0,"button",5),u(3,"div",6,0),te("click",function(Me){return F(s),B(l.onActionPannellumClick(Me))}),p(),I(5,Do,80,43,"div",7),ge(6,"app-progress-spinner",8),I(7,Yo,16,3,"div",7)}e&2&&(C("ngIf",!l.showAddView360),m(),C("ngIf",l.privateDataImageModel&&l.privateDataImageModel.length>0),m(),C("ngIf",l.privateDataModel&&l.privateDataModel&&l.privateDataModel.scenes&&l.scenesList&&l.scenesList.length>0),m(),C("id",l.id),m(2),C("ngIf",l.showAddView360),m(),C("optionsInfoAreaId",l.constructor.name),m(),C("ngIf",!l.showAddView360))},dependencies:[zi,ai,oi,si,ri,ci,di,mi,li,_i,qi,ui,pi,gi,vi,xi,yi,Ei,Mi,wi,Ii,bi,Ti,Si,Li,Ci,Ai,Vi,Pi,Hi],encapsulation:2});var Ki=St;export{ji as a,Ki as b};
