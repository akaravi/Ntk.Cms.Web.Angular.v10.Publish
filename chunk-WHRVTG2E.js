import{a as wn}from"./chunk-E5BH276Y.js";import{a as En}from"./chunk-CX4ABWPF.js";import{a as Xt}from"./chunk-BO6LOMMS.js";import{a as Jt}from"./chunk-4E6U4HE6.js";import{a as yn}from"./chunk-YYSRF5EW.js";import{a as Yt}from"./chunk-JEF4OJ24.js";import{a as zt}from"./chunk-7DEHQSB7.js";import{d as Ut,e as Qt,f as Kt,i as In}from"./chunk-FMZK63QH.js";import{a as Tn}from"./chunk-4WAMJFSW.js";import"./chunk-QXNCAA7F.js";import{a as Ze}from"./chunk-BNK7WLOJ.js";import"./chunk-NQXRH7AD.js";import{a as Xe}from"./chunk-XZCPJE47.js";import{a as jt}from"./chunk-XPUQI67V.js";import{a as qt}from"./chunk-LSZD76DU.js";import{b as vn}from"./chunk-3RHHJRHJ.js";import"./chunk-7DUNEHBM.js";import"./chunk-T2SWGMVG.js";import"./chunk-5DHIOXLL.js";import{a as ke}from"./chunk-PH5IBDIY.js";import"./chunk-HGNWVODT.js";import{a as z,d as bn}from"./chunk-5CUEEOJ3.js";import{e as Wt,f as H}from"./chunk-NSI52VTG.js";import{A as Ke,B as qi,Ba as Ae,Cb as F,Da as J,Db as L,E as zi,H as Ui,I as Qi,J as Ki,K as Yi,Ka as en,La as tn,M as Ji,Na as nn,Oa as Ot,P as Xi,Pb as Ht,Qa as on,Qb as Sn,R as kt,Ra as rn,Ua as Pt,V as Zi,W as $i,Wa as an,Xa as ln,a as Pi,eb as sn,fb as cn,gb as dn,hb as pn,ib as mn,jb as un,kb as fn,la as Mt,lb as Cn,m as Dt,ma as he,mb as gn,na as _e,nb as hn,oa as Ye,r as Fi,rc as Je,s as Re,sb as _n,tb as Nt,u as Gi,ub as Lt,uc as De,vb as Bt,w as Hi,wb as Vt,wc as G,x as Wi,xb as Ft,y as ji,zb as Gt,zc as Mn}from"./chunk-WIVKQDM4.js";import{A as At,B as Ce,C as ge,F as Bi,G as Vi,b as Rt,c as re,h as Y,i as Te,k as we,l as Ni,m as ae,n as xe,r as Li}from"./chunk-QRBNL5ZA.js";import{Ah as ki,Bh as Ue,Cc as Ai,D as ri,Gh as W,H as _t,Hh as de,Ih as St,Jh as Oi,K as ze,Kh as K,Lh as fe,Ln as bt,Mh as Qe,ba as q,d as Ei,e as Ti,f as wi,fa as Ri,l as oi,m as xi,p as xt,q as X,u as ue,v as Z,y as ht,zh as Di}from"./chunk-2ZWWK4AL.js";import{Ab as b,Ad as yi,Cb as gt,Db as ee,Dc as C,Eb as te,Ec as g,Fb as _,Ga as hi,Gb as r,Hb as a,Ib as I,K as ui,Mb as k,Nb as O,O as fi,Ob as be,Pb as E,Ra as Me,Sb as v,Ub as p,Va as n,Vb as _i,Wb as Si,Xa as Ee,Xc as V,Yb as ie,Z as Ci,Zb as ne,_ as gi,_b as oe,cb as S,cc as D,dc as Mi,ec as Q,ga as yt,hc as c,ib as P,ic as y,jb as Et,jc as f,kc as me,ld as vi,mb as U,mc as bi,nc as w,ob as j,oc as x,pa as m,pc as R,qa as u,s as It,t as mi,tc as A,td as wt,uc as ni,xb as ce,xc as Tt,xd as Ii,yb as qe,zb as M}from"./chunk-2AL2II5Z.js";import{i as se}from"./chunk-SEDBTTTN.js";var $e=class $e{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};$e.\u0275fac=function(e){return new(e||$e)},$e.\u0275cmp=P({type:$e,selectors:[["app-contact"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&I(0,"router-outlet")},dependencies:[Ti],encapsulation:2});var et=$e;function Fn(o,l){if(o&1){let e=E();r(0,"mat-tree-node",9),I(1,"button",10),r(2,"mat-checkbox",11),v("change",function(){let t=m(e).$implicit,s=p();return u(s.todoItemSelectionToggle(t))}),c(3),a()()}if(o&2){let e=l.$implicit,i=p();n(2),_("checked",i.checklistSelection.isSelected(e))("indeterminate",i.descendantsPartiallySelected(e)),n(),y(e.title)}}function Gn(o,l){if(o&1){let e=E();r(0,"mat-tree-node",12)(1,"button",13)(2,"mat-icon",14),c(3),a()(),r(4,"mat-checkbox",15),v("change",function(){let t=m(e).$implicit,s=p();return u(s.checklistSelection.toggle(t))}),c(5),a()()}if(o&2){let e=l.$implicit,i=p(),t=D(6);_("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),n(),ce("type","button")("aria-label","Toggle "+e.title)("type","button"),n(2),f(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),n(),_("checked",i.checklistSelection.isSelected(e)),n(),y(e.title)}}var tt=class tt{constructor(l,e,i,t,s,h,d,T,N){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.cdr=t;this.publicHelper=s;this.dialog=h;this.translate=d;this.tokenHelper=T;this.cmsStoreService=N;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=[];this.dataModelResult=new X;this.filterModel=new Z;this.dataSource=new Gt;this.optionSelectChecked=new Ee;this.optionSelectDisChecked=new Ee;this.optionModelChange=new Ee;this.unsubscribe=[];this.checklistSelection=new zi(!0);this.hasChild=(l,e)=>!!e.children&&e.children.length>0;this.childrenAccessor=l=>l.children??[];this.hasNoContent=(l,e)=>e.children;this.runComplate=!1;this.treeControl=new _n(l=>l.children);this.publicHelper.processService.cdr=this.cdr,this.checklistSelection.changed.subscribe(B=>{if(!this.runComplate)return;let le=[];this.checklistSelection.selected.forEach(Be=>{le.push(Be.id)}),this.optionModelChange.emit(le),B.added&&B.added.length>0&&B.added.forEach(Be=>{this.optionSelectChecked.emit(Be.id)}),B.removed&&B.removed.length>0&&B.removed.forEach(Be=>{this.optionSelectDisChecked.emit(Be.id)})})}set optionModel(l){this.dataModelSelect=l,this.loadCheked()}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>se(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}loadCheked(){this.runComplate=!1,this.CompileDataByCheked(this.dataModelResult.listItems,this.dataModelSelect),this.runComplate=!0}CompileDataByCheked(l,e){if(!(l?.length>0))return!1;let i=!1;for(let t of l){let s=!1;e?.includes(t.id)?(this.checklistSelection.select(t),i=!0):this.checklistSelection.deselect(t),t.children?.length>0&&(s=this.CompileDataByCheked(t.children,e),s&&(i=!0,t.isExpanded=!0))}return i}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems,this.loadCheked()):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.publicHelper.processService.processStop(l),this.cmsToastrService.typeError(e)}})}descendantsAllSelected(l){return this.treeControl.getDescendants(l).every(i=>this.checklistSelection.isSelected(i))}descendantsPartiallySelected(l){return this.treeControl.getDescendants(l).some(t=>this.checklistSelection.isSelected(t))&&!this.descendantsAllSelected(l)}todoItemSelectionToggle(l){this.checklistSelection.toggle(l);let e=this.treeControl.getDescendants(l);this.checklistSelection.isSelected(l)?this.checklistSelection.select(...e):this.checklistSelection.deselect(...e)}};tt.\u0275fac=function(e){return new(e||tt)(S(G),S(q),S(K),S(V),S(H),S(Ye),S(F),S(De),S(Je))},tt.\u0275cmp=P({type:tt,selectors:[["app-contact-category-treeselector"]],inputs:{optionModel:"optionModel"},outputs:{optionSelectChecked:"optionSelectChecked",optionSelectDisChecked:"optionSelectDisChecked",optionModelChange:"optionModelChange"},standalone:!1,decls:10,vars:10,consts:[["treeTagControl",""],[3,"optionListTitle","optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-action",""],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"change","checked","indeterminate"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[1,"checklist-leaf-node",3,"change","checked"]],template:function(e,i){e&1&&(r(0,"app-cms-html-tree",1),C(1,"translate"),be(2,2),k(3,3),I(4,"app-progress-spinner",4),r(5,"mat-tree",5,0),j(7,Fn,4,3,"mat-tree-node",6)(8,Gn,6,8,"mat-tree-node",7),a(),O(),be(9,8),a()),e&2&&(_("optionListTitle",g(1,8,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName)))("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),n(4),_("optionsInfoAreaId",i.constructorInfoAreaId),n(),_("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),n(3),_("matTreeNodeDefWhen",i.hasChild))},dependencies:[Ke,kt,Ae,Lt,Bt,Ft,Vt,Nt,z,Xt,L],encapsulation:2});var it=tt;var Hn=["vform"];function Wn(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function jn(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.firstName==null?null:e.fieldsInfo.firstName.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function qn(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.lastName==null?null:e.fieldsInfo.lastName.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function zn(o,l){o&1&&(r(0,"mat-error"),c(1," Numbers is "),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2&&(n(3),y(g(4,1,"MESSAGE.required")))}function Un(o,l){if(o&1){let e=E();r(0,"div",24)(1,"div",30)(2,"h5",31),c(3),a()(),r(4,"div",32)(5,"div",33)(6,"input",34),R("ngModelChange",function(t){m(e);let s=p();return x(s.dataModel.numberHidden,t)||(s.dataModel.numberHidden=t),u(t)}),a(),I(7,"label",35),a()()()}if(o&2){let e=p();n(3),f(" ",e.fieldsInfo.numberHidden==null?null:e.fieldsInfo.numberHidden.fieldTitle," "),n(3),w("ngModel",e.dataModel.numberHidden)}}function Qn(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function Kn(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.organization==null?null:e.fieldsInfo.organization.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function Yn(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.jobTitle==null?null:e.fieldsInfo.jobTitle.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function Jn(o,l){if(o&1){let e=E();r(0,"div",29)(1,"button",36),v("click",function(){m(e);let t=p();return u(t.onFormCancel())}),I(2,"i",37),c(3),C(4,"translate"),a(),r(5,"button",38),I(6,"i",39),c(7),C(8,"translate"),a()()}if(o&2){p();let e=D(10);n(3),f(" ",g(4,3,"ACTION.CANCEL")," "),n(2),_("disabled",!e.form.valid),n(2),f(" ",g(8,5,"ACTION.SAVE")," ")}}var nt=class nt extends jt{constructor(e,i,t,s,h,d,T,N,B){super(s,new de,T,B);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ContactContentService=s;this.contentCategoryService=h;this.cmsToastrService=d;this.publicHelper=T;this.cdr=N;this.translate=B;this.linkCategoryId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new X;this.dataModel=new de;this.fileManagerOpenForm=!1;this.dataContentCategoryModel=[];this.publicHelper.processService.cdr=this.cdr,this.dataContentCategoryModel=[],e&&(this.linkCategoryId=e.linkCategoryId,this.dataContentCategoryModel.push(this.linkCategoryId)),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){}ngOnInit(){this.translate.get("TITLE.Register_New_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ContactContentService.ServiceAdd(this.dataModel).subscribe({next:i=>{if(this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess){this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessAdd();for(let t=0;t<this.dataContentCategoryModel.length;t++){let s=new St;s.linkCategoryId=this.dataContentCategoryModel[t],s.linkContentId=i.item.id,this.contentCategoryService.ServiceAdd(s).subscribe({next:h=>{h.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(d=>{this.formInfo.submitResultMessage=d,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(d=>{this.formInfo.submitResultMessage=d}),this.formInfo.submitResultMessage=h.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(h.errorMessage))},error:h=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(h)}})}this.dialogRef.close({dialogChangedDate:!0})}else this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage);this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionCategorySelectChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}onActionCategorySelectDisChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionSelectCategory(e){if(!e||e.id?.length==0){this.translate.get("MESSAGE.Category_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}};nt.\u0275fac=function(i){return new(i||nt)(S(_e),S(he),S(q),S(fe),S(Qe),S(G),S(H),S(V),S(F))},nt.\u0275cmp=P({type:nt,selectors:[["app-contact-content-add"]],viewQuery:function(i,t){if(i&1&&ie(Hn,5),i&2){let s;ne(s=oe())&&(t.formGroup=s.first)}},standalone:!1,features:[U],decls:71,vars:51,consts:[["vform","ngForm"],["Title",""],["FirstName",""],["LastName",""],["Numbers",""],["Email",""],["Organization",""],["JobTitle",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"optionModelChange","optionSelectChecked","optionSelectDisChecked","optionModel"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.firstName",1,"color-highlight"],["matInput","","type","text","name","dataModel.firstName","minlength","3","maxlength","100","id","dataModel.firstName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.lastName",1,"color-highlight"],["matInput","","type","text","name","dataModel.lastName","minlength","3","maxlength","100","id","dataModel.lastName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.numbers",1,"color-highlight"],["matInput","","name","dataModel.numbers","minlength","1","maxlength","5000","rows","5","id","dataModel.numbers",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"d-flex","mb-3"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","minlength","3","maxlength","100","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.organization","minlength","3","maxlength","100","id","dataModel.organization",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.jobTitle","minlength","3","maxlength","100","id","dataModel.jobTitle",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],[1,"pt-1"],["data-trigger-switch","dataModel.numberHidden",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.numberHidden","name","dataModel.numberHidden",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.numberHidden",1,"custom-control-label"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=E();r(0,"div",8),I(1,"app-progress-spinner",9),r(2,"div",10)(3,"p",11),c(4),a(),r(5,"p"),c(6),C(7,"translate"),a(),I(8,"app-cms-form-result-message",12),r(9,"form",13,0),v("ngSubmit",function(){return m(s),u(t.onFormSubmit())}),r(11,"app-contact-category-treeselector",14),R("optionModelChange",function(d){return m(s),x(t.dataContentCategoryModel,d)||(t.dataContentCategoryModel=d),u(d)}),v("optionSelectChecked",function(d){return m(s),u(t.onActionCategorySelectChecked(d))})("optionSelectDisChecked",function(d){return m(s),u(t.onActionCategorySelectDisChecked(d))}),a(),r(12,"div",15)(13,"label",16),c(14),a(),r(15,"input",17,1),R("ngModelChange",function(d){return m(s),x(t.dataModel.title,d)||(t.dataModel.title=d),u(d)}),a(),r(17,"em"),c(18),a(),M(19,Wn,5,4,"mat-error"),a(),r(20,"div",15)(21,"label",18),c(22),a(),r(23,"input",19,2),R("ngModelChange",function(d){return m(s),x(t.dataModel.firstName,d)||(t.dataModel.firstName=d),u(d)}),a(),r(25,"em"),c(26),a(),M(27,jn,5,4,"mat-error"),a(),r(28,"div",15)(29,"label",20),c(30),a(),r(31,"input",21,3),R("ngModelChange",function(d){return m(s),x(t.dataModel.lastName,d)||(t.dataModel.lastName=d),u(d)}),a(),r(33,"em"),c(34),a(),M(35,qn,5,4,"mat-error"),a(),r(36,"div",15)(37,"label",22),c(38),a(),r(39,"textarea",23,4),R("ngModelChange",function(d){return m(s),x(t.dataModel.numbers,d)||(t.dataModel.numbers=d),u(d)}),c(41,"              "),a(),r(42,"em"),c(43),a(),M(44,zn,5,3,"mat-error"),a(),M(45,Un,8,2,"div",24),r(46,"div",15)(47,"label",25),c(48),a(),r(49,"input",26,5),R("ngModelChange",function(d){return m(s),x(t.dataModel.email,d)||(t.dataModel.email=d),u(d)}),a(),r(51,"em"),c(52),a(),M(53,Qn,5,4,"mat-error"),a(),r(54,"div",15)(55,"label",25),c(56),a(),r(57,"input",27,6),R("ngModelChange",function(d){return m(s),x(t.dataModel.organization,d)||(t.dataModel.organization=d),u(d)}),a(),r(59,"em"),c(60),a(),M(61,Kn,5,4,"mat-error"),a(),r(62,"div",15)(63,"label",25),c(64),a(),r(65,"input",28,7),R("ngModelChange",function(d){return m(s),x(t.dataModel.jobTitle,d)||(t.dataModel.jobTitle=d),u(d)}),a(),r(67,"em"),c(68),a(),M(69,Yn,5,4,"mat-error"),a(),M(70,Jn,9,7,"div",29),a()()()}if(i&2){let s=D(16),h=D(24),d=D(32),T=D(40),N=D(50),B=D(58),le=D(66);n(),_("optionsInfoAreaId",t.constructorInfoAreaId),n(3),f(" ",t.formInfo.formTitle," "),n(2),f(" ",g(7,49,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),_("formInfo",t.formInfo),n(3),w("optionModel",t.dataContentCategoryModel),n(3),y(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),w("ngModel",t.dataModel.title),n(3),f("",s.value.length," / 100"),n(),b(s.errors!=null&&s.errors.required?19:-1),n(3),y(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle)),w("ngModel",t.dataModel.firstName),n(3),f("",h.value.length," / 100"),n(),b(h.errors!=null&&h.errors.required?27:-1),n(3),y(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle)),w("ngModel",t.dataModel.lastName),n(3),f("",d.value.length," / 100"),n(),b(d.errors!=null&&d.errors.required?35:-1),n(3),y(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle)),w("ngModel",t.dataModel.numbers),n(4),f("",T.value.length," / 5000"),n(),b(T.errors!=null&&T.errors.required?44:-1),n(),b(t.fieldsInfo.numberHidden!=null&&t.fieldsInfo.numberHidden.accessWatchField?45:-1),n(3),y(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle)),w("ngModel",t.dataModel.email),n(3),f("",N.value.length," / 100"),n(),b(N.errors!=null&&N.errors.required?53:-1),n(3),y(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle)),w("ngModel",t.dataModel.organization),n(3),f("",B.value.length," / 100"),n(),b(B.errors!=null&&B.errors.required?61:-1),n(3),y(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle)),w("ngModel",t.dataModel.jobTitle),n(3),f("",le.value.length," / 100"),n(),b(le.errors!=null&&le.errors.required?69:-1),n(),b(t.formInfo.submitButtonEnabled?70:-1)}},dependencies:[xe,re,Rt,Y,Te,Ce,ge,ae,we,Re,J,z,ke,it,L],encapsulation:2});var Oe=nt;var Xn=["vform"];function Zn(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function $n(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.firstName==null?null:e.fieldsInfo.firstName.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function eo(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.lastName==null?null:e.fieldsInfo.lastName.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function to(o,l){o&1&&(r(0,"mat-error"),c(1," Numbers is "),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2&&(n(3),y(g(4,1,"MESSAGE.required")))}function io(o,l){if(o&1){let e=E();r(0,"div",24)(1,"div",30)(2,"h5",31),c(3),a()(),r(4,"div",32)(5,"div",33)(6,"input",34),R("ngModelChange",function(t){m(e);let s=p();return x(s.dataModel.numberHidden,t)||(s.dataModel.numberHidden=t),u(t)}),a(),I(7,"label",35),a()()()}if(o&2){let e=p();n(3),f(" ",e.fieldsInfo.numberHidden==null?null:e.fieldsInfo.numberHidden.fieldTitle," "),n(3),w("ngModel",e.dataModel.numberHidden)}}function no(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function oo(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.organization==null?null:e.fieldsInfo.organization.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function ro(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.jobTitle==null?null:e.fieldsInfo.jobTitle.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function ao(o,l){if(o&1){let e=E();r(0,"div",29)(1,"button",36),v("click",function(){m(e);let t=p();return u(t.onFormCancel())}),I(2,"i",37),c(3),C(4,"translate"),a(),r(5,"button",38),I(6,"i",39),c(7),C(8,"translate"),a()()}if(o&2){p();let e=D(10);n(3),f(" ",g(4,3,"ACTION.CANCEL")," "),n(2),_("disabled",!e.form.valid),n(2),f(" ",g(8,5,"ACTION.SAVE")," ")}}var at=class at extends zt{constructor(e,i,t,s,h,d,T,N,B){super(s,new de,T,B);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ContactContentService=s;this.contentCategoryService=h;this.cmsToastrService=d;this.publicHelper=T;this.cdr=N;this.translate=B;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new xt;this.dataModel=new de;this.fileManagerOpenForm=!1;this.dataContentCategoryModel=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){}ngOnInit(){this.DataGetOneContent(),this.DataCategoryGetAll()}DataGetOneContent(){if(this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ContactContentService.setAccessLoad(),this.ContactContentService.setAccessDataType(ze.Editor),this.ContactContentService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataCategoryGetAll(){this.formInfo.submitButtonEnabled=!1,this.translate.get("MESSAGE.get_category_information_from_the_server").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_category_information_from_the_server").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)});let i=new Z,t=new ue;t.propertyName="LinkContentId",t.value=this.requestId,t.clauseType=ht.And,i.filters.push(t),this.contentCategoryService.ServiceGetAll(i).subscribe({next:s=>{let h=[];s.listItems.forEach(d=>{h.push(d.linkCategoryId)}),this.dataContentCategoryModel=h,this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(e)},error:s=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorGetAll(s),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ContactContentService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionCategorySelectChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}let i=new St;i.linkCategoryId=e,i.linkContentId=this.dataModel.id,this.contentCategoryService.ServiceAdd(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.formInfo.submitResultMessage=t.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(t)}})}onActionCategorySelectDisChecked(e){if(!e||e.length==0){this.translate.get("MESSAGE.category_of_information_is_not_clear").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}let i=new St;i.linkCategoryId=e,i.linkContentId=this.dataModel.id,this.contentCategoryService.ServiceDeleteEntity(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(s=>{this.formInfo.submitResultMessage=s}),this.formInfo.submitResultMessage=t.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(t)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionSelectCategory(e){if(!e||e.id?.length==0){this.translate.get("MESSAGE.Category_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}}};at.\u0275fac=function(i){return new(i||at)(S(_e),S(he),S(q),S(fe),S(Qe),S(G),S(H),S(V),S(F))},at.\u0275cmp=P({type:at,selectors:[["app-contact-content-edit"]],viewQuery:function(i,t){if(i&1&&ie(Xn,5),i&2){let s;ne(s=oe())&&(t.formGroup=s.first)}},standalone:!1,features:[U],decls:71,vars:51,consts:[["vform","ngForm"],["Title",""],["FirstName",""],["LastName",""],["Numbers",""],["Email",""],["Organization",""],["JobTitle",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"optionModelChange","optionSelectChecked","optionSelectDisChecked","optionModel"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.firstName",1,"color-highlight"],["matInput","","type","text","name","dataModel.firstName","minlength","3","maxlength","100","id","dataModel.firstName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.lastName",1,"color-highlight"],["matInput","","type","text","name","dataModel.lastName","minlength","3","maxlength","100","id","dataModel.lastName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.numbers",1,"color-highlight"],["matInput","","name","dataModel.numbers","minlength","1","maxlength","5000","rows","5","id","dataModel.numbers",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"d-flex","mb-3"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","minlength","3","maxlength","100","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.organization","minlength","3","maxlength","100","id","dataModel.organization",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["matInput","","type","text","name","dataModel.jobTitle","minlength","3","maxlength","100","id","dataModel.jobTitle",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],[1,"pt-1"],["data-trigger-switch","dataModel.numberHidden",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.numberHidden","name","dataModel.numberHidden",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.numberHidden",1,"custom-control-label"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=E();r(0,"div",8),I(1,"app-progress-spinner",9),r(2,"div",10)(3,"p",11),c(4),a(),r(5,"p"),c(6),C(7,"translate"),a(),I(8,"app-cms-form-result-message",12),r(9,"form",13,0),v("ngSubmit",function(){return m(s),u(t.onFormSubmit())}),r(11,"app-contact-category-treeselector",14),R("optionModelChange",function(d){return m(s),x(t.dataContentCategoryModel,d)||(t.dataContentCategoryModel=d),u(d)}),v("optionSelectChecked",function(d){return m(s),u(t.onActionCategorySelectChecked(d))})("optionSelectDisChecked",function(d){return m(s),u(t.onActionCategorySelectDisChecked(d))}),a(),r(12,"div",15)(13,"label",16),c(14),a(),r(15,"input",17,1),R("ngModelChange",function(d){return m(s),x(t.dataModel.title,d)||(t.dataModel.title=d),u(d)}),a(),r(17,"em"),c(18),a(),M(19,Zn,5,4,"mat-error"),a(),r(20,"div",15)(21,"label",18),c(22),a(),r(23,"input",19,2),R("ngModelChange",function(d){return m(s),x(t.dataModel.firstName,d)||(t.dataModel.firstName=d),u(d)}),a(),r(25,"em"),c(26),a(),M(27,$n,5,4,"mat-error"),a(),r(28,"div",15)(29,"label",20),c(30),a(),r(31,"input",21,3),R("ngModelChange",function(d){return m(s),x(t.dataModel.lastName,d)||(t.dataModel.lastName=d),u(d)}),a(),r(33,"em"),c(34),a(),M(35,eo,5,4,"mat-error"),a(),r(36,"div",15)(37,"label",22),c(38),a(),r(39,"textarea",23,4),R("ngModelChange",function(d){return m(s),x(t.dataModel.numbers,d)||(t.dataModel.numbers=d),u(d)}),c(41,"              "),a(),r(42,"em"),c(43),a(),M(44,to,5,3,"mat-error"),a(),M(45,io,8,2,"div",24),r(46,"div",15)(47,"label",25),c(48),a(),r(49,"input",26,5),R("ngModelChange",function(d){return m(s),x(t.dataModel.email,d)||(t.dataModel.email=d),u(d)}),a(),r(51,"em"),c(52),a(),M(53,no,5,4,"mat-error"),a(),r(54,"div",15)(55,"label",25),c(56),a(),r(57,"input",27,6),R("ngModelChange",function(d){return m(s),x(t.dataModel.organization,d)||(t.dataModel.organization=d),u(d)}),a(),r(59,"em"),c(60),a(),M(61,oo,5,4,"mat-error"),a(),r(62,"div",15)(63,"label",25),c(64),a(),r(65,"input",28,7),R("ngModelChange",function(d){return m(s),x(t.dataModel.jobTitle,d)||(t.dataModel.jobTitle=d),u(d)}),a(),r(67,"em"),c(68),a(),M(69,ro,5,4,"mat-error"),a(),M(70,ao,9,7,"div",29),a()()()}if(i&2){let s=D(16),h=D(24),d=D(32),T=D(40),N=D(50),B=D(58),le=D(66);n(),_("optionsInfoAreaId",t.constructorInfoAreaId),n(3),f(" ",t.formInfo.formTitle," "),n(2),f(" ",g(7,49,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),_("formInfo",t.formInfo),n(3),w("optionModel",t.dataContentCategoryModel),n(3),y(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),w("ngModel",t.dataModel.title),n(3),f("",s.value.length," / 100"),n(),b(s.errors!=null&&s.errors.required?19:-1),n(3),y(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.firstName==null?null:t.fieldsInfo.firstName.fieldTitle)),w("ngModel",t.dataModel.firstName),n(3),f("",h.value.length," / 100"),n(),b(h.errors!=null&&h.errors.required?27:-1),n(3),y(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.lastName==null?null:t.fieldsInfo.lastName.fieldTitle)),w("ngModel",t.dataModel.lastName),n(3),f("",d.value.length," / 100"),n(),b(d.errors!=null&&d.errors.required?35:-1),n(3),y(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.numbers==null?null:t.fieldsInfo.numbers.fieldTitle)),w("ngModel",t.dataModel.numbers),n(4),f("",T.value.length," / 5000"),n(),b(T.errors!=null&&T.errors.required?44:-1),n(),b(t.fieldsInfo.numberHidden!=null&&t.fieldsInfo.numberHidden.accessWatchField?45:-1),n(3),y(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.email==null?null:t.fieldsInfo.email.fieldTitle)),w("ngModel",t.dataModel.email),n(3),f("",N.value.length," / 100"),n(),b(N.errors!=null&&N.errors.required?53:-1),n(3),y(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.organization==null?null:t.fieldsInfo.organization.fieldTitle)),w("ngModel",t.dataModel.organization),n(3),f("",B.value.length," / 100"),n(),b(B.errors!=null&&B.errors.required?61:-1),n(3),y(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.jobTitle==null?null:t.fieldsInfo.jobTitle.fieldTitle)),w("ngModel",t.dataModel.jobTitle),n(3),f("",le.value.length," / 100"),n(),b(le.errors!=null&&le.errors.required?69:-1),n(),b(t.formInfo.submitButtonEnabled?70:-1)}},dependencies:[xe,re,Rt,Y,Te,Ce,ge,ae,we,Re,J,z,ke,it,L],encapsulation:2});var Pe=at;var so=["*"];function co(o,l){if(o&1&&(r(0,"label",3),c(1),a()),o&2){let e=p();_("for",ni("app-cms-site-selector-",e.id)),n(),y(e.optionLabel)}}function po(o,l){if(o&1&&(I(0,"img",5),C(1,"cmsthumbnail")),o&2){let e=p();_("src",A(g(1,2,e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),Me)}}function mo(o,l){if(o&1&&(I(0,"img",5),C(1,"cmsthumbnail")),o&2){let e=p().$implicit;_("src",A(g(1,2,e.linkMainImageIdSrc)),Me)}}function uo(o,l){if(o&1&&(r(0,"mat-option",8),M(1,mo,2,4,"img",5),r(2,"span"),c(3),a()()),o&2){let e=l.$implicit,i=p();_("value",e)("disabled",i.optionDisabled),n(),b(e.linkMainImageIdSrc?1:-1),n(2),y(i.displayOption(e))}}function fo(o,l){o&1&&I(0,"i",9)}function Co(o,l){o&1&&I(0,"i",10)}function go(o,l){if(o&1){let e=E();r(0,"i",13),v("click",function(){m(e);let t=p();return u(t.onActionSelectClear())}),a()}}function ho(o,l){o&1&&(r(0,"em"),c(1),C(2,"translate"),a()),o&2&&(n(),f("(",g(2,1,"TITLE.Necessary"),")"))}var Ne=class Ne{constructor(l,e,i,t,s,h){this.coreEnumService=l;this.cmsToastrService=e;this.cdr=i;this.publicHelper=t;this.translate=s;this.categoryService=h;this.id=++Ne.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new X;this.dataModelSelect=new W;this.formControl=new Ni;this.optionPlaceholder="";this.optionSelectFirstItem=!1;this.optionDisabled=!1;this.optionRequired=!1;this.optionLabel="";this.optionChange=new Ee;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(Ci(""),ui(1500),fi(),gi(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return se(this,null,function*(){let e=new Z;e.rowPerPage=20,e.accessLoad=!0;let i=new ue;i.propertyName="title",i.value=l,i.searchType=ri.Contains,i.clauseType=ht.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new ue,i.propertyName="id",i.value=l,i.searchType=ri.Equal,i.clauseType=ht.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield It(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id.length==0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe(mi(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="string"&&l.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof l==typeof W){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new W,this.loadOptions()}};Ne.nextId=0,Ne.\u0275fac=function(e){return new(e||Ne)(S(q),S(G),S(V),S(H),S(F),S(K))},Ne.\u0275cmp=P({type:Ne,selectors:[["app-contact-category-selector"]],inputs:{optionPlaceholder:"optionPlaceholder",optionSelectFirstItem:"optionSelectFirstItem",optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:so,decls:18,vars:24,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],[1,"color-highlight",3,"for"],["matPrefix",""],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=E();_i(),r(0,"div",1),I(1,"app-progress-spinner",2),M(2,co,2,3,"label",3),r(3,"span",4),M(4,po,2,4,"img",5),a(),I(5,"input",6),r(6,"mat-autocomplete",7,0),v("optionSelected",function(h){return m(t),u(i.onActionSelect(h.option.value))}),ee(8,uo,4,4,"mat-option",8,gt),C(10,"async"),a(),M(11,fo,1,0,"i",9),M(12,Co,1,0,"i",10),M(13,go,1,0,"i",11),r(14,"i",12),C(15,"translate"),v("click",function(){return m(t),u(i.onActionButtonReload())}),a(),M(16,ho,3,3,"em"),Si(17),a()}if(e&2){let t=D(7);n(),_("optionsInfoAreaId",i.constructorInfoAreaId),n(),b((i.optionLabel==null?null:i.optionLabel.length)>0?2:-1),n(2),b(i.dataModelSelect&&(i.dataModelSelect!=null&&i.dataModelSelect.linkMainImageIdSrc)?4:-1),n(),_("placeholder",A(i.optionPlaceholder))("id",ni("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),ce("disabled",i.optionDisabled?!0:null),n(),_("displayWith",i.displayFn),n(2),te(g(10,20,i.filteredOptions)),n(3),b(i.formControl.valid?-1:11),n(),b(i.optionRequired&&i.formControl.valid?12:-1),n(),b((i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0?13:-1),n(),Q("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),_("title",A(g(15,22,"ACTION.RELOAD"))),n(2),b(i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id.length<=0)?16:-1)}},dependencies:[re,Y,At,Li,Wi,Dt,ji,Gi,J,z,wt,L,Xe],encapsulation:2});var Le=Ne;var Mo=["fileInput"];function bo(o,l){if(o&1){let e=E();r(0,"div",9)(1,"div")(2,"p",13),c(3),a(),r(4,"span",14),c(5),C(6,"translate"),a()(),r(7,"button",15),v("click",function(){m(e);let t=p();return u(t.onRemoveFile())}),c(8),C(9,"translate"),a()()}if(o&2){let e=p();n(3),y(e.selectedFile.name),n(2),me(" ",g(6,5,"CONTACT.IMPORT.FILE_SIZE"),": ",e.formatFileSize(e.selectedFile)," "),n(2),_("disabled",e.isPreviewLoading),n(),f(" ",g(9,7,"CONTACT.IMPORT.CLEAR_BUTTON")," ")}}function vo(o,l){o&1&&I(0,"mat-progress-bar",11)}function Io(o,l){if(o&1&&(r(0,"p",12),c(1),a()),o&2){let e=p();n(),f(" ",e.lastPreviewError," ")}}function yo(o,l){if(o&1&&(r(0,"mat-chip",31),c(1),a()),o&2){let e=l.$implicit;n(),f(" ",e," ")}}function Eo(o,l){if(o&1&&(r(0,"div",19)(1,"label"),c(2),C(3,"translate"),a(),r(4,"mat-chip-set"),ee(5,yo,2,1,"mat-chip",31,qe().trackByHeader,!0),a()()),o&2){let e=p(2);n(2),y(g(3,1,"CONTACT.IMPORT.SOURCE_HEADERS_TITLE")),n(3),te(e.sourceHeaders)}}function To(o,l){o&1&&(r(0,"span",33),c(1),C(2,"translate"),a()),o&2&&(n(),f(" ",g(2,1,"CONTACT.IMPORT.REQUIRED_BADGE")," "))}function wo(o,l){if(o&1&&(r(0,"mat-option",37),c(1),a()),o&2){let e=l.$implicit;_("value",e),n(),f(" ",e," ")}}function xo(o,l){if(o&1){let e=E();r(0,"div",23)(1,"div",32)(2,"div")(3,"p"),c(4),a(),r(5,"small"),c(6),a()(),M(7,To,3,3,"span",33),a(),r(8,"mat-form-field",34)(9,"mat-label"),c(10),C(11,"translate"),a(),r(12,"mat-select",35),R("ngModelChange",function(t){let s=m(e).$implicit,h=p(2);return x(h.mappingSelections[s.key],t)||(h.mappingSelections[s.key]=t),u(t)}),v("selectionChange",function(){m(e);let t=p(2);return u(t.onMappingChange())}),r(13,"mat-option",36),c(14),C(15,"translate"),a(),ee(16,wo,2,2,"mat-option",37,qe().trackByHeader,!0),a()()()}if(o&2){let e=l.$implicit,i=p(2);n(4),y(e.title||e.key),n(2),y(e.key),n(),b(e.required?7:-1),n(3),f(" ",g(11,6,"CONTACT.IMPORT.SELECT_SOURCE_HEADER_LABEL")," "),n(2),w("ngModel",i.mappingSelections[e.key]),n(2),f(" ",g(15,8,"CONTACT.IMPORT.OPTION_SKIP")," "),n(2),te(i.sourceHeaders)}}function Ro(o,l){o&1&&(r(0,"p",12),c(1),C(2,"translate"),a()),o&2&&(n(),f(" ",g(2,1,"CONTACT.IMPORT.MISSING_REQUIRED")," "))}function Ao(o,l){o&1&&I(0,"mat-progress-spinner",27),o&2&&_("diameter",18)("strokeWidth",3)}function Do(o,l){if(o&1&&(r(0,"p",12),c(1),a()),o&2){let e=p(2);n(),f(" ",e.lastApplyError," ")}}function ko(o,l){o&1&&(r(0,"span",47),c(1," * "),a())}function Oo(o,l){if(o&1&&(r(0,"mat-option",46),c(1),M(2,ko,2,0,"span",47),a()),o&2){let e=l.$implicit,i=p().$implicit,t=p(3);_("value",e.key)("disabled",t.isDestinationUsed(e.key,i)),n(),f(" ",e.title||e.key," "),n(),b(e.required?2:-1)}}function Po(o,l){if(o&1){let e=E();r(0,"div",40)(1,"div",42)(2,"span",43),c(3),a(),r(4,"mat-form-field",44)(5,"mat-label"),c(6),C(7,"translate"),a(),r(8,"mat-select",45),v("selectionChange",function(t){let s=m(e).$implicit,h=p(3);return u(h.onSourceHeaderMappingChange(s,t.value))}),r(9,"mat-option",36),c(10),C(11,"translate"),a(),ee(12,Oo,3,4,"mat-option",46,qe().trackByDestination,!0),a()()()()}if(o&2){let e=l.$implicit,i=p(3);n(3),y(e),n(3),f(" ",g(7,4,"CONTACT.IMPORT.SELECT_DESTINATION_LABEL")," "),n(2),_("value",i.getDestinationForSource(e)),n(2),f(" ",g(11,6,"CONTACT.IMPORT.OPTION_SKIP")," "),n(2),te(i.destinationHeaders)}}function No(o,l){if(o&1&&(r(0,"div",48),c(1),a()),o&2){let e=l.$implicit,i=p().$implicit;n(),f(" ",i[e]||"-"," ")}}function Lo(o,l){if(o&1&&(r(0,"div",41),ee(1,No,2,1,"div",48,qe().trackByHeader,!0),a()),o&2){let e=p(3);n(),te(e.sourceHeaders)}}function Bo(o,l){if(o&1&&(r(0,"div")(1,"div",38)(2,"div",39),ee(3,Po,14,8,"div",40,qe().trackByHeader,!0),a(),ee(5,Lo,3,0,"div",41,gt),a()()),o&2){let e=p(2);n(),Mi("--columns-count",e.sourceHeaders.length),n(2),te(e.sourceHeaders),n(2),te(e.sampleRows)}}function Vo(o,l){o&1&&(r(0,"p",29),c(1),C(2,"translate"),a()),o&2&&(n(),f(" ",g(2,1,"CONTACT.IMPORT.NO_SAMPLE_ROWS")," "))}function Fo(o,l){if(o&1&&(r(0,"mat-card",30)(1,"mat-card-header")(2,"mat-card-title"),c(3),C(4,"translate"),a()(),r(5,"mat-card-content")(6,"div",49)(7,"div")(8,"span"),c(9),C(10,"translate"),a(),r(11,"strong"),c(12),a()(),r(13,"div")(14,"span"),c(15),C(16,"translate"),a(),r(17,"strong"),c(18),a()()(),r(19,"p",29),c(20),C(21,"translate"),a()()()),o&2){let e=p(2);n(3),f(" ",g(4,6,"CONTACT.IMPORT.RESULT_TITLE")," "),n(6),y(g(10,8,"CONTACT.IMPORT.RESULT_IMPORTED")),n(3),y(e.applyResult==null?null:e.applyResult.importedCount),n(3),y(g(16,10,"CONTACT.IMPORT.RESULT_SKIPPED")),n(3),y(e.applyResult==null?null:e.applyResult.skippedCount),n(2),f(" ",g(21,12,"CONTACT.IMPORT.RESULT_NO_ERRORS")," ")}}function Go(o,l){if(o&1){let e=E();r(0,"mat-card",16)(1,"mat-card-header")(2,"mat-card-title"),c(3),C(4,"translate"),a(),r(5,"mat-card-subtitle"),c(6),C(7,"translate"),a()(),r(8,"mat-card-content")(9,"div",17)(10,"div",18)(11,"span"),c(12),C(13,"translate"),a(),r(14,"strong"),c(15),a()(),r(16,"div",18)(17,"span"),c(18),C(19,"translate"),a(),r(20,"strong"),c(21),C(22,"translate"),a()(),r(23,"div",18)(24,"span"),c(25),C(26,"translate"),a(),r(27,"strong"),c(28),C(29,"number"),a()(),r(30,"div",18)(31,"span"),c(32),C(33,"translate"),a(),r(34,"strong"),c(35),a()()(),M(36,Eo,7,3,"div",19),a()(),r(37,"mat-card",20)(38,"mat-card-header")(39,"mat-card-title"),c(40),C(41,"translate"),a(),r(42,"mat-card-subtitle"),c(43),C(44,"translate"),a()(),r(45,"mat-card-content"),I(46,"br"),r(47,"app-contact-category-selector",21),C(48,"translate"),v("optionChange",function(t){m(e);let s=p();return u(s.modelCategory=t)}),a(),I(49,"br"),r(50,"div",22),ee(51,xo,18,10,"div",23,gt),a(),M(53,Ro,3,3,"p",12),r(54,"div",24)(55,"button",25),v("click",function(){m(e);let t=p();return u(t.onResetImport())}),c(56),C(57,"translate"),a(),r(58,"button",26),v("click",function(){m(e);let t=p();return u(t.onApplyImport())}),M(59,Ao,1,2,"mat-progress-spinner",27),r(60,"span"),c(61),C(62,"translate"),a()()(),M(63,Do,2,1,"p",12),a()(),r(64,"mat-card",28)(65,"mat-card-header")(66,"mat-card-title"),c(67),C(68,"translate"),a()(),r(69,"mat-card-content"),M(70,Bo,7,2,"div")(71,Vo,3,3,"p",29),a()(),M(72,Fo,22,14,"mat-card",30)}if(o&2){let e=p();n(3),f(" ",g(4,26,"CONTACT.IMPORT.PREVIEW_SUMMARY_TITLE")," "),n(3),f(" ",g(7,28,"CONTACT.IMPORT.PREVIEW_SUMMARY_SUBTITLE")," "),n(6),y(g(13,30,"CONTACT.IMPORT.SESSION_LABEL")),n(3),y(e.previewResponse==null?null:e.previewResponse.sessionId),n(3),y(g(19,32,"CONTACT.IMPORT.FILE_TYPE_LABEL")),n(3),y(g(22,34,e.fileTypeTranslationMap[(e.previewResponse==null?null:e.previewResponse.fileType)||0])),n(4),y(g(26,36,"CONTACT.IMPORT.ROW_COUNT")),n(3),y(g(29,38,e.previewResponse==null?null:e.previewResponse.rowCount)),n(4),y(g(33,40,"CONTACT.IMPORT.HEADERS_FOUND")),n(3),y(e.sourceHeaders.length),n(),b(e.sourceHeaders.length?36:-1),n(4),f(" ",g(41,42,"CONTACT.IMPORT.MAPPING_TITLE")," "),n(3),f(" ",g(44,44,"CONTACT.IMPORT.MAPPING_SUBTITLE")," "),n(4),_("optionSelectFirstItem",!0)("optionRequired",!0)("optionLabel",g(48,46,"TITLE.Category")),n(4),te(e.destinationHeaders),n(2),b(e.missingRequiredHeaders.length?53:-1),n(2),_("disabled",e.isPreviewLoading||!e.selectedFile),n(),f(" ",g(57,48,"CONTACT.IMPORT.RESET_BUTTON")," "),n(2),_("disabled",e.isApplyDisabled),n(),b(e.isApplyLoading?59:-1),n(2),y(g(62,50,"CONTACT.IMPORT.APPLY_BUTTON")),n(2),b(e.lastApplyError?63:-1),n(4),f(" ",g(68,52,"CONTACT.IMPORT.SAMPLE_ROWS_TITLE")," "),n(3),b(e.sampleRows!=null&&e.sampleRows.length?70:71),n(2),b(e.applyResult?72:-1)}}var lt=class lt extends Ut{constructor(e,i,t,s,h,d,T,N){super(e,new de,N,s,d);this.contentService=e;this.cmsToastrService=i;this.cmsConfirmationDialogService=t;this.tokenHelper=s;this.cdr=h;this.translate=d;this.pageInfo=T;this.publicHelper=N;this.constructorInfoAreaId=this.constructor.name;this.fileAccept=".csv,.xls,.xlsx,.vcf";this.allowedExtensions=[".csv",".xls",".xlsx",".vcf"];this.previewProcessKey=`${this.constructor.name}_preview`;this.applyProcessKey=`${this.constructor.name}_apply`;this.sourceHeaders=[];this.destinationHeaders=[];this.sampleRows=[];this.mappingSelections={};this.sourceToDestinationMapping={};this.isPreviewLoading=!1;this.isApplyLoading=!1;this.lastPreviewError="";this.lastApplyError="";this.fileTypeTranslationMap={[Ue.Unknown]:"CONTACT.IMPORT.FILE_TYPE.UNKNOWN",[Ue.GoogleCsv]:"CONTACT.IMPORT.FILE_TYPE.GOOGLE",[Ue.OutlookCsv]:"CONTACT.IMPORT.FILE_TYPE.OUTLOOK",[Ue.VCard]:"CONTACT.IMPORT.FILE_TYPE.VCARD",[Ue.Excel]:"CONTACT.IMPORT.FILE_TYPE.EXCEL"};this.modelCategory=new W;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.translate.get(["CONTACT.IMPORT.PAGE_TITLE","CONTACT.IMPORT.PAGE_DESCRIPTION"]).subscribe(e=>{this.pageInfo.updateTitle(e["CONTACT.IMPORT.PAGE_TITLE"]),this.pageInfo.updateDescription(e["CONTACT.IMPORT.PAGE_DESCRIPTION"])})}ngOnDestroy(){this.publicHelper.processService.processStop(this.previewProcessKey),this.publicHelper.processService.processStop(this.applyProcessKey)}get missingRequiredHeaders(){return this.destinationHeaders?.length?this.destinationHeaders.filter(e=>e.required&&!this.mappingSelections[e.key]):[]}get isApplyDisabled(){return!this.previewResponse||!this.selectedFile||this.isApplyLoading||this.missingRequiredHeaders.length>0}onFileSelected(e){let t=e.target?.files?.[0];if(t){if(!this.isExtensionAllowed(t)){this.translate.get("CONTACT.IMPORT.ERROR_UNSUPPORTED_FILE").subscribe(s=>{this.cmsToastrService.typeErrorMessage(s),this.lastPreviewError=s}),this.clearFileSelection();return}this.selectedFile=t,this.lastPreviewError="",this.lastApplyError="",this.applyResult=void 0,this.requestPreview(t)}}onRemoveFile(){this.clearFileSelection()}onResetImport(){!this.selectedFile||this.isPreviewLoading||(this.applyResult=void 0,this.lastApplyError="",this.requestPreview(this.selectedFile))}onMappingChange(){this.lastApplyError="",this.updateSourceToDestinationMapping(),this.cdr.detectChanges()}onSourceHeaderMappingChange(e,i){let t=this.sourceToDestinationMapping[e];t&&t!==i&&(this.mappingSelections[t]="");let s=Object.keys(this.sourceToDestinationMapping).find(h=>this.sourceToDestinationMapping[h]===i);s&&s!==e&&delete this.sourceToDestinationMapping[s],i&&i.trim()!==""?(this.sourceToDestinationMapping[e]=i,this.mappingSelections[i]=e):(delete this.sourceToDestinationMapping[e],t&&(this.mappingSelections[t]="")),this.onMappingChange()}updateSourceToDestinationMapping(){this.sourceToDestinationMapping={},Object.entries(this.mappingSelections).forEach(([e,i])=>{i&&i.trim()!==""&&(this.sourceToDestinationMapping[i]=e)})}isDestinationUsed(e,i){return!e||e.trim()===""?!1:Object.entries(this.sourceToDestinationMapping).some(([t,s])=>t!==i&&s===e)}getDestinationForSource(e){return this.sourceToDestinationMapping[e]||""}get mappedColumns(){return Object.entries(this.sourceToDestinationMapping).map(([e,i])=>{let t=this.destinationHeaders.find(s=>s.key===i);return t?{sourceHeader:e,destination:t}:null}).filter(e=>e!==null)}onApplyImport(){return se(this,null,function*(){if(this.isApplyDisabled)return;if(!this.modelCategory?.id){this.translate.get("MESSAGE.Category_is_not_clear").subscribe(t=>{this.cmsToastrService.typeErrorMessage(t)});return}if(!(yield this.askForConfirmation()))return;this.lastApplyError="",this.applyResult=void 0,this.isApplyLoading=!0;let i=this.buildApplyModel();i.linkCategoryId=this.modelCategory.id,this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(this.applyProcessKey,t,this.constructorInfoAreaId)}),Array.isArray(i.mappings)&&(i.mappings=i.mappings.filter(t=>!!t.sourceHeader&&t.sourceHeader.trim()!=="")),this.contentService.ServiceImportApply(i).subscribe({next:t=>{this.isApplyLoading=!1,this.publicHelper.processService.processStop(this.applyProcessKey),t.isSuccess?(this.applyResult=t.item,this.translate.get("CONTACT.IMPORT.APPLY_SUCCESS").subscribe(s=>{this.cmsToastrService.typeSuccessMessage(s)})):(this.lastApplyError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.cdr.detectChanges()},error:t=>{this.isApplyLoading=!1,this.publicHelper.processService.processStop(this.applyProcessKey,!1),this.lastApplyError=t,this.cmsToastrService.typeError(t)}})})}formatFileSize(e){if(!e)return"";let i=e.size;if(i<1024)return`${i} B`;let t=i/1024;if(t<1024)return`${t.toFixed(1)} KB`;let s=t/1024;return s<1024?`${s.toFixed(1)} MB`:`${(s/1024).toFixed(1)} GB`}trackByHeader(e,i){return i}trackByMappedColumn(e,i){return i.sourceHeader}trackByDestination(e,i){return i.key}requestPreview(e){this.isPreviewLoading=!0,this.previewResponse=void 0,this.sourceHeaders=[],this.destinationHeaders=[],this.sampleRows=[],this.mappingSelections={},this.applyResult=void 0,this.lastPreviewError="",this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(this.previewProcessKey,i,this.constructorInfoAreaId)}),this.contentService.ServiceImportPreview(e).subscribe({next:i=>{this.isPreviewLoading=!1,this.publicHelper.processService.processStop(this.previewProcessKey),i.isSuccess?(this.previewResponse=i.item,this.sourceHeaders=i.item?.sourceHeaders??[],this.destinationHeaders=i.item?.destinationHeaders??[],this.sampleRows=i.item?.sampleRows??[],this.initializeMappings(),this.translate.get("CONTACT.IMPORT.PREVIEW_READY").subscribe(t=>{this.cmsToastrService.typeSuccessMessage(t)})):(this.lastPreviewError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.cdr.detectChanges()},error:i=>{this.isPreviewLoading=!1,this.publicHelper.processService.processStop(this.previewProcessKey,!1),this.lastPreviewError=i,this.cmsToastrService.typeError(i)}})}initializeMappings(){this.mappingSelections={},this.sourceToDestinationMapping={},this.destinationHeaders?.length&&this.destinationHeaders.forEach(e=>{let i=this.findAutoMatch(e);i?(this.mappingSelections[e.key]=i,this.sourceToDestinationMapping[i]=e.key):this.mappingSelections[e.key]=""})}findAutoMatch(e){if(!e||!this.sourceHeaders?.length)return;let i=[e.title,e.key].filter(t=>!!t).map(t=>t.toLowerCase());return this.sourceHeaders.find(t=>i.includes(t.toLowerCase()))}buildApplyModel(){let e=new Di;return e.sessionId=this.previewResponse?.sessionId??"",e.mappings=this.destinationHeaders.map(i=>{let t=new ki;return t.destinationKey=i.key,t.sourceHeader=this.mappingSelections[i.key]??"",t}),e}clearFileSelection(){this.selectedFile=void 0,this.previewResponse=void 0,this.sourceHeaders=[],this.destinationHeaders=[],this.sampleRows=[],this.mappingSelections={},this.sourceToDestinationMapping={},this.applyResult=void 0,this.lastPreviewError="",this.lastApplyError="",this.fileInput?.nativeElement&&(this.fileInput.nativeElement.value=""),this.cdr.detectChanges()}isExtensionAllowed(e){let i=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();return this.allowedExtensions.includes(i)}askForConfirmation(){return se(this,null,function*(){let e=yield It(this.translate.get(["CONTACT.IMPORT.CONFIRM_APPLY_TITLE","CONTACT.IMPORT.CONFIRM_APPLY_MESSAGE"]));return this.cmsConfirmationDialogService.confirm(e["CONTACT.IMPORT.CONFIRM_APPLY_TITLE"],e["CONTACT.IMPORT.CONFIRM_APPLY_MESSAGE"]+`<br><br><b>\u062F\u0631 \u062F\u0633\u062A\u0647 \u0628\u0646\u062F\u06CC  ${this.modelCategory?.title}</b>`)})}};lt.\u0275fac=function(i){return new(i||lt)(S(fe),S(G),S(Ze),S(De),S(V),S(F),S(Wt),S(H))},lt.\u0275cmp=P({type:lt,selectors:[["app-contact-content-import"]],viewQuery:function(i,t){if(i&1&&ie(Mo,5),i&2){let s;ne(s=oe())&&(t.fileInput=s.first)}},standalone:!1,features:[U],decls:45,vars:43,consts:[["fileInput",""],[1,"contact-import"],[1,"import-card"],["mat-card-avatar","",1,"import-card__icon"],[1,"section-label"],[1,"section-hint"],[1,"upload-area"],["type","file",1,"upload-input",3,"change","accept","disabled"],[1,"upload-copy"],[1,"selected-file"],[1,"supported-list"],["mode","indeterminate"],[1,"error-panel"],[1,"selected-file__name"],[1,"selected-file__meta"],["mat-stroked-button","","color","warn","type","button",3,"click","disabled"],[1,"preview-card"],[1,"preview-grid"],[1,"preview-grid__item"],[1,"chip-groups"],[1,"mapping-card"],[3,"optionChange","optionSelectFirstItem","optionRequired","optionLabel"],[1,"mapping-grid"],[1,"mapping-row"],[1,"action-bar"],["mat-stroked-button","","type","button","color","primary",3,"click","disabled"],["mat-flat-button","","type","button","color","accent",1,"apply-button",3,"click","disabled"],["mode","indeterminate",3,"diameter","strokeWidth"],[1,"sample-card"],[1,"muted"],[1,"result-card"],["color","primary","selected",""],[1,"mapping-row__header"],[1,"required-badge"],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value"],[1,"sample-table"],[1,"sample-table__row","sample-table__row--head"],[1,"sample-table__header-cell"],[1,"sample-table__row"],[1,"header-cell-content"],[1,"header-name"],["appearance","outline",1,"header-mapping-dropdown"],[3,"selectionChange","value"],[3,"value","disabled"],[1,"required-indicator"],[1,"sample-table__cell"],[1,"result-stats"]],template:function(i,t){if(i&1){let s=E();r(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"div",3)(4,"mat-icon"),c(5,"import_contacts"),a()(),r(6,"mat-card-title"),c(7),C(8,"translate"),a(),r(9,"mat-card-subtitle"),c(10),C(11,"translate"),a()(),r(12,"mat-card-content")(13,"h3",4),c(14),C(15,"translate"),a(),r(16,"p",5),c(17),C(18,"translate"),a(),r(19,"div",6)(20,"input",7,0),v("change",function(d){return m(s),u(t.onFileSelected(d))}),a(),r(22,"div",8)(23,"mat-icon"),c(24,"cloud_upload"),a(),r(25,"p"),c(26),C(27,"translate"),a(),r(28,"small"),c(29),C(30,"translate"),a()()(),M(31,bo,10,9,"div",9),r(32,"div",10)(33,"strong"),c(34),C(35,"translate"),a(),r(36,"span"),c(37),C(38,"translate"),C(39,"translate"),C(40,"translate"),C(41,"translate"),a()(),M(42,vo,1,0,"mat-progress-bar",11),M(43,Io,2,1,"p",12),a()(),M(44,Go,73,54),a()}i&2&&(n(7),y(g(8,21,"CONTACT.IMPORT.PAGE_TITLE")),n(3),f(" ",g(11,23,"CONTACT.IMPORT.PAGE_DESCRIPTION")," "),n(4),f(" ",g(15,25,"CONTACT.IMPORT.UPLOAD_TITLE")," "),n(3),f(" ",g(18,27,"CONTACT.IMPORT.UPLOAD_DESCRIPTION")," "),n(2),Q("upload-area--active",!!t.selectedFile)("upload-area--loading",t.isPreviewLoading),n(),_("accept",t.fileAccept)("disabled",t.isPreviewLoading),n(6),y(g(27,29,"CONTACT.IMPORT.UPLOAD_PLACEHOLDER")),n(3),y(g(30,31,"CONTACT.IMPORT.SUPPORTED_FORMATS_HINT")),n(2),b(t.selectedFile?31:-1),n(3),f("",g(35,33,"CONTACT.IMPORT.SUPPORTED_FORMATS"),":"),n(3),bi(" ",g(38,35,"CONTACT.IMPORT.FILE_TYPE.GOOGLE")," \xB7 ",g(39,37,"CONTACT.IMPORT.FILE_TYPE.OUTLOOK")," \xB7 ",g(40,39,"CONTACT.IMPORT.FILE_TYPE.VCARD")," \xB7 ",g(41,41,"CONTACT.IMPORT.FILE_TYPE.EXCEL")," "),n(5),b(t.isPreviewLoading?42:-1),n(),b(t.lastPreviewError?43:-1),n(),b(t.previewResponse?44:-1))},dependencies:[Y,ae,Dt,qi,Ui,Xi,Ki,Ji,Yi,Qi,Zi,$i,Hi,Fi,Ae,on,rn,nn,Le,Ii,L],styles:["[_nghost-%COMP%]{display:block;width:100%}.contact-import[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;padding:24px 12px 48px}@media (min-width: 992px){.contact-import[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:32px 0 64px}}.import-card__icon[_ngcontent-%COMP%]{background:#e5f2ff;color:#0057c2;display:flex;align-items:center;justify-content:center}.section-label[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#1a1a27}.section-hint[_ngcontent-%COMP%]{margin:4px 0 16px;color:#5e6278}.upload-area[_ngcontent-%COMP%]{border:1px dashed #c3c8d4;border-radius:16px;padding:32px 16px;text-align:center;background:#f8f9fb;position:relative;transition:border-color .2s ease,background .2s ease}.upload-area--active[_ngcontent-%COMP%]{border-color:#009ef7;background:#f0f9ff}.upload-area--loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.upload-input[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;opacity:0;cursor:pointer}.upload-copy[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;color:#3f4254}.upload-copy[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;color:#009ef7}.selected-file[_ngcontent-%COMP%]{margin-top:16px;padding:16px 20px;border-radius:12px;background:#f5f8fa;display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap}.selected-file__name[_ngcontent-%COMP%]{margin:0;font-weight:600}.selected-file__meta[_ngcontent-%COMP%]{font-size:.9rem;color:#5e6278}.supported-list[_ngcontent-%COMP%]{margin-top:12px;font-size:.9rem;color:#5e6278;display:flex;flex-direction:column;gap:4px}.preview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:16px}.preview-grid__item[_ngcontent-%COMP%]{border:1px solid #eff2f5;border-radius:14px;padding:16px;background:#fcfcff;display:flex;flex-direction:column;gap:4px}.preview-grid__item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;color:#5e6278}.preview-grid__item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.1rem;color:#1a1a27}.chip-groups[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.chip-groups[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#3f4254}.mapping-grid[_ngcontent-%COMP%]{display:grid;gap:16px}.mapping-row[_ngcontent-%COMP%]{border:1px solid #eef0f4;border-radius:18px;padding:16px;background:#fff;box-shadow:0 8px 24px #0f172a0f}.mapping-row__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;margin-bottom:12px}.mapping-row__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:600}.mapping-row__header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#7e8299}.required-badge[_ngcontent-%COMP%]{align-self:flex-start;border-radius:999px;padding:2px 10px;background:#fff0f1;color:#c62828;font-size:.75rem;font-weight:600}.error-panel[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;border-radius:12px;background:#fff4f4;color:#c62828;font-size:.9rem}.action-bar[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:flex-end;gap:12px;flex-wrap:wrap}.apply-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px}.apply-button[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{width:18px;height:18px}.sample-table[_ngcontent-%COMP%]{border:1px solid #eef0f4;border-radius:12px;overflow-x:auto;overflow-y:visible;width:100%;display:block;position:relative;-webkit-overflow-scrolling:touch;scrollbar-width:auto;scrollbar-color:#009ef7 #f5f8fa}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar{height:12px}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f5f8fa;border-radius:6px;border:1px solid #eef0f4}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#009ef7;border-radius:6px;border:2px solid #f5f8fa}.sample-table[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0085d1}.sample-table__row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(var(--columns-count, 1),250px);width:max-content}.sample-table__row--head[_ngcontent-%COMP%]{background:#f5f8fa;font-weight:600}.sample-table__row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #eef0f4;border-right:1px solid #eef0f4;width:250px;box-sizing:border-box;word-break:break-word;overflow:hidden;text-overflow:ellipsis}.sample-table__row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:0}.sample-table__header-cell[_ngcontent-%COMP%]{padding:16px!important;background:#f8f9fb;display:flex;flex-direction:column;gap:8px;width:250px;box-sizing:border-box}.header-cell-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.header-name[_ngcontent-%COMP%]{font-weight:600;color:#1a1a27;font-size:.9rem}.header-mapping-dropdown[_ngcontent-%COMP%]{width:100%;margin:0}.header-mapping-dropdown[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.header-mapping-dropdown[_ngcontent-%COMP%]     .mat-mdc-form-field{font-size:.85rem}.sample-table__cell[_ngcontent-%COMP%]{min-width:0;word-break:break-word}.required-indicator[_ngcontent-%COMP%]{color:#c62828;font-weight:600;margin-left:4px}.result-stats[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:16px}.result-stats[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1 1 160px;border:1px solid #eef0f4;border-radius:12px;padding:16px;background:#f5f8ff}.result-stats[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.85rem;color:#5e6278}.result-stats[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:1.3rem;color:#1a1a27;margin-top:4px}.muted[_ngcontent-%COMP%]{color:#7e8299;font-size:.9rem}"]});var st=lt;var Ho=["vform"];function Wo(o,l){if(o&1){let e=E();r(0,"div",7)(1,"label",8),c(2),a(),r(3,"input",9,0),R("ngModelChange",function(t){m(e);let s=p();return x(s.dataModelResultCategory.item.title,t)||(s.dataModelResultCategory.item.title=t),u(t)}),a()(),r(5,"div",7)(6,"label",10),c(7),a(),r(8,"textarea",11,1),R("ngModelChange",function(t){m(e);let s=p();return x(s.dataModelResultCategory.item.description,t)||(s.dataModelResultCategory.item.description=t),u(t)}),a()()}if(o&2){let e=p();n(2),y(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),n(),_("placeholder",A(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)),w("ngModel",e.dataModelResultCategory.item.title),n(4),y(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle),n(),_("placeholder",A(e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldTitle)),w("ngModel",e.dataModelResultCategory.item.description)}}function jo(o,l){if(o&1){let e=E();r(0,"div",6)(1,"button",12),v("click",function(){m(e);let t=p();return u(t.onFormMove())}),I(2,"i",13),c(3),C(4,"translate"),a(),r(5,"button",14),v("click",function(){m(e);let t=p();return u(t.onFormDelete())}),I(6,"i",15),c(7),C(8,"translate"),a(),r(9,"button",16),v("click",function(){m(e);let t=p();return u(t.onFormCancel())}),I(10,"i",13),c(11),C(12,"translate"),a()()}if(o&2){let e=p();n(),_("disabled",!e.formInfo.submitButtonEnabled),n(2),f(" ",g(4,5,"TITLE.MOVE_DATA")," "),n(2),_("disabled",!e.formInfo.submitButtonEnabled),n(2),f(" ",g(8,7,"ACTION.DELETE")," "),n(4),f(" ",g(12,9,"ACTION.CANCEL")," ")}}var ct=class ct{constructor(l,e,i,t,s,h,d){this.data=l;this.dialogRef=e;this.publicHelper=i;this.contactCategoryService=t;this.cdr=s;this.translate=h;this.cmsToastrService=d;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResultCategory=new X;this.dataModelResultCategoryAllData=new X;this.dataModel={};this.formInfo=new bn;this.publicHelper.processService.cdr=this.cdr,l&&l.id&&l.id.length>0&&(this.requestId=l.id)}ngOnInit(){if(this.requestId.length==0){this.cmsToastrService.typeErrorDeleteRowIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(),this.DataGetAll()}DataGetOne(){if(this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.translate.get("TITLE.Loading_Information").subscribe(e=>{this.formInfo.submitResultMessage=e});let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.contactCategoryService.setAccessLoad(),this.contactCategoryService.setAccessDataType(ze.Editor),this.contactCategoryService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResultCategory=e,e.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeErrorGetOne()),this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}DataGetAll(){this.translate.get("TITLE.Loading_Information").subscribe(i=>{this.formInfo.submitResultMessage=i});let l=new Z;l.rowPerPage=100;let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceGetAll(l).subscribe({next:i=>{this.dataModelResultCategoryAllData=i,i.isSuccess?this.formInfo.submitResultMessage="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeErrorGetAll()),this.publicHelper.processService.processStop(e)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessageType=FormSubmitedStatusEnum.Success,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormMove(){if(this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(!this.formGroup.valid)return;this.formInfo.submitButtonEnabled=!0,this.dataModel.newCatId===this.requestId&&(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitButtonEnabled=!0),this.formInfo.submitButtonEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceMove(this.requestId,this.dataModel.newCatId).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.The_Transfer_Was_Successful").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeSuccessMove()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorMove()),this.formInfo.submitButtonEnabled=!0,this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormDelete(){if(this.requestId.length===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.formInfo.submitButtonEnabled=!1,this.formInfo.submitButtonEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceDelete(this.requestId).subscribe({next:e=>{this.formInfo.submitButtonEnabled=!e.isSuccess,e.isSuccess?(this.translate.get("MESSAGE.Deletion_Was_Successful").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage=e.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormChangeNewCatId(l){if(this.formInfo.submitResultMessage="",this.requestId.length===0||!l||l.id.length<=0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.dataModel.newCatId=l.id,this.dataModel.newCatId===this.requestId?(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.submitResultMessage=e}),this.formInfo.submitButtonEnabled=!1):(this.formInfo.submitButtonEnabled=!0,this.formInfo.submitResultMessage="")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};ct.\u0275fac=function(e){return new(e||ct)(S(_e),S(he),S(H),S(K),S(V),S(F),S(G))},ct.\u0275cmp=P({type:ct,selectors:[["app-contact-category-delete"]],viewQuery:function(e,i){if(e&1&&ie(Ho,5),e&2){let t;ne(t=oe())&&(i.formGroup=t.first)}},standalone:!1,decls:10,vars:7,consts:[["Title",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[1,"form-actions"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModelResultCategory.item.title",1,"color-highlight"],["matInput","","name","dataModelResultCategory.item.title","type","text","minlength","3","maxlength","50","required","","readonly","","id","dataModelResultCategory.item.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModelResultCategory.item.description",1,"color-highlight"],["matInput","","name","dataModelResultCategory.item.description","type","text","minlength","1","maxlength","100","readonly","","required","","rows","5","id","dataModelResultCategory.item.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click","disabled"],[1,"ft-x"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click","disabled"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"]],template:function(e,i){e&1&&(r(0,"div",2),I(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),c(4),a(),r(5,"p"),c(6),C(7,"translate"),a(),M(8,Wo,10,8),M(9,jo,13,11,"div",6),a()()),e&2&&(n(),_("optionsInfoAreaId",i.constructorInfoAreaId),n(3),f(" ",i.formInfo.formTitle," "),n(2),f(" ",g(7,5,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),b(i.dataModelResultCategory!=null&&i.dataModelResultCategory.item?8:-1),n(),b(i.formInfo.submitButtonEnabled?9:-1))},dependencies:[re,Y,At,Ce,ge,ae,J,z,L],encapsulation:2});var Zt=ct;var Uo=["vform"];function Qo(o,l){if(o&1){let e=E();r(0,"app-cms-enum-record-status-selector",21),R("modelChange",function(t){m(e);let s=p();return x(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),u(t)}),a()}if(o&2){let e=p();w("model",e.dataModel.recordStatus),_("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Ko(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function Yo(o,l){o&1&&(r(0,"mat-error"),c(1," Description is "),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2&&(n(3),y(g(4,1,"MESSAGE.required")))}function Jo(o,l){if(o&1&&(I(0,"img",19),C(1,"cmsthumbnail")),o&2){let e=p();_("src",A(g(1,2,e.dataModel.linkMainImageIdSrc)),Me)}}function Xo(o,l){if(o&1){let e=E();r(0,"div",12)(1,"label",22),v("click",function(){m(e);let t=p();return u(t.fileManagerOpenForm=!0)}),c(2),C(3,"translate"),a(),r(4,"input",23,3),C(6,"translate"),R("ngModelChange",function(t){m(e);let s=p();return x(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),u(t)}),v("click",function(){m(e);let t=p();return u(t.fileManagerOpenForm=!0)}),a(),r(7,"cms-file-manager",24),v("itemSelected",function(t){m(e);let s=p();return u(s.onActionFileSelected(t))}),R("openFormChange",function(t){m(e);let s=p();return x(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),u(t)}),a()()}if(o&2){let e=p();n(2),y(g(3,12,"TITLE.Icon_File")),n(2),_("placeholder",A(g(6,14,"TITLE.Original_File_ID"))),w("ngModel",e.dataModel.linkMainImageId),n(3),_("language",e.appLanguage)("isPopup",!0)("openDirectUploadView",!0),w("openForm",e.fileManagerOpenForm),_("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Zo(o,l){if(o&1){let e=E();r(0,"div",20)(1,"button",25),v("click",function(){m(e);let t=p();return u(t.onFormCancel())}),I(2,"i",26),c(3),C(4,"translate"),a(),r(5,"button",27),I(6,"i",28),c(7),C(8,"translate"),a()()}if(o&2){p();let e=D(10);n(3),f(" ",g(4,3,"ACTION.CANCEL")," "),n(2),_("disabled",!e.form.valid),n(2),f(" ",g(8,5,"ACTION.SAVE")," ")}}var dt=class dt extends zt{constructor(e,i,t,s,h,d,T,N){super(s,new W,d,N);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.contactCategoryService=s;this.cmsToastrService=h;this.publicHelper=d;this.cdr=T;this.translate=N;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new xt;this.dataModel=new W;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&e.id&&e.id.length>0&&(this.requestId=e.id),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}ngOnInit(){if(this.requestId.length>0)this.translate.get("TITLE.Edit_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}}DataGetOneContent(){if(this.requestId.length==0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.setAccessLoad(),this.contactCategoryService.setAccessDataType(ze.Editor),this.contactCategoryService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionParentSelect(e){this.dataModel?.id!=e?.id&&(e&&e.id?.length>0?this.dataModel.linkParentId=e.id:this.dataModel.linkParentId=null)}};dt.\u0275fac=function(i){return new(i||dt)(S(_e),S(he),S(q),S(K),S(G),S(H),S(V),S(F))},dt.\u0275cmp=P({type:dt,selectors:[["app-contact-category-edit"]],viewQuery:function(i,t){if(i&1&&ie(Uo,5),i&2){let s;ne(s=oe())&&(t.formGroup=s.first)}},standalone:!1,features:[U],decls:37,vars:31,consts:[["vform","ngForm"],["Title",""],["Description",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["target","_blank",3,"href"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openDirectUploadView","openForm","tree","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=E();r(0,"div",4),I(1,"app-progress-spinner",5),r(2,"div",6)(3,"p",7),c(4),a(),r(5,"p"),c(6),C(7,"translate"),a(),I(8,"app-cms-form-result-message",8),r(9,"form",9,0),v("ngSubmit",function(){return m(s),u(t.onFormSubmit())}),M(11,Qo,1,5,"app-cms-enum-record-status-selector",10),r(12,"app-contact-category-selector",11),C(13,"translate"),v("optionChange",function(d){return m(s),u(t.onActionParentSelect(d))}),a(),r(14,"div",12)(15,"label",13),c(16),a(),r(17,"input",14,1),R("ngModelChange",function(d){return m(s),x(t.dataModel.title,d)||(t.dataModel.title=d),u(d)}),a(),r(19,"em"),c(20),a(),M(21,Ko,5,4,"mat-error"),a(),r(22,"div",12)(23,"label",15),c(24),a(),r(25,"textarea",16,2),R("ngModelChange",function(d){return m(s),x(t.dataModel.description,d)||(t.dataModel.description=d),u(d)}),c(27,"          "),a(),r(28,"em"),c(29),a(),M(30,Yo,5,3,"mat-error"),a(),r(31,"div",17)(32,"a",18),C(33,"cmsthumbnail"),M(34,Jo,2,4,"img",19),a()(),M(35,Xo,8,16,"div",12),M(36,Zo,9,7,"div",20),a()()()}if(i&2){let s=D(18),h=D(26);n(),_("optionsInfoAreaId",t.constructorInfoAreaId),n(3),f(" ",t.formInfo.formTitle," "),n(2),f(" ",g(7,25,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),_("formInfo",t.formInfo),n(3),b(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),n(),_("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",g(13,27,"TITLE.Parent_Area")),n(4),y(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),w("ngModel",t.dataModel.title),n(3),f("",s.value.length," / 100"),n(),b(s.errors!=null&&s.errors.required?21:-1),n(3),y(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),w("ngModel",t.dataModel.description),n(4),f("",h.value.length," / 500"),n(),b(h.errors!=null&&h.errors.required?30:-1),n(2),_("href",A(g(33,29,t.dataModel.linkMainImageIdSrc)),Me),n(2),b((t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0?34:-1),n(),b(t.fieldsInfo.linkMainImageId!=null&&t.fieldsInfo.linkMainImageId.accessWatchField?35:-1),n(),b(t.formInfo.submitButtonEnabled?36:-1)}},dependencies:[xe,re,Y,Te,Ce,ge,ae,we,Re,J,qt,z,ke,Ht,Le,L,Xe],encapsulation:2});var $t=dt;var $o=["vform"];function er(o,l){if(o&1){let e=E();r(0,"app-cms-enum-record-status-selector",21),R("modelChange",function(t){m(e);let s=p();return x(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),u(t)}),a()}if(o&2){let e=p();w("model",e.dataModel.recordStatus),_("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function tr(o,l){if(o&1&&(r(0,"mat-error"),c(1),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2){let e=p();n(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),n(2),y(g(4,2,"MESSAGE.required"))}}function ir(o,l){o&1&&(r(0,"mat-error"),c(1," Description is "),r(2,"strong"),c(3),C(4,"translate"),a()()),o&2&&(n(3),y(g(4,1,"MESSAGE.required")))}function nr(o,l){if(o&1&&(I(0,"img",19),C(1,"cmsthumbnail")),o&2){let e=p();_("src",A(g(1,2,e.dataModel.linkMainImageIdSrc)),Me)}}function or(o,l){if(o&1){let e=E();r(0,"div",11)(1,"label",22),v("click",function(){m(e);let t=p();return u(t.fileManagerOpenForm=!0)}),c(2),C(3,"translate"),a(),r(4,"input",23,3),C(6,"translate"),R("ngModelChange",function(t){m(e);let s=p();return x(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),u(t)}),v("click",function(){m(e);let t=p();return u(t.fileManagerOpenForm=!0)}),a(),r(7,"cms-file-manager",24),v("itemSelected",function(t){m(e);let s=p();return u(s.onActionFileSelected(t))}),R("openFormChange",function(t){m(e);let s=p();return x(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),u(t)}),a()()}if(o&2){let e=p();n(2),y(g(3,12,"TITLE.Icon_File")),n(2),_("placeholder",A(g(6,14,"TITLE.Original_File_ID"))),w("ngModel",e.dataModel.linkMainImageId),n(3),_("language",e.appLanguage)("isPopup",!0)("openDirectUploadView",!0),w("openForm",e.fileManagerOpenForm),_("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function rr(o,l){if(o&1){let e=E();r(0,"div",20)(1,"button",25),v("click",function(){m(e);let t=p();return u(t.onFormCancel())}),I(2,"i",26),c(3),C(4,"translate"),a(),r(5,"button",27),I(6,"i",28),c(7),C(8,"translate"),a()()}if(o&2){p();let e=D(10);n(3),f(" ",g(4,3,"ACTION.CANCEL")," "),n(2),_("disabled",!e.form.valid),n(2),f(" ",g(8,5,"ACTION.SAVE")," ")}}var pt=class pt extends jt{constructor(e,i,t,s,h,d,T,N){super(s,new W,d,N);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.contactCategoryService=s;this.cmsToastrService=h;this.publicHelper=d;this.cdr=T;this.translate=N;this.requestParentId="";this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new X;this.dataModel=new W;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&e.parentId&&e.parentId.length>0&&(this.requestParentId=e.parentId),this.requestParentId.length>0&&(this.dataModel.linkParentId=this.requestParentId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}ngOnInit(){this.translate.get("TITLE.Register_New_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.contactCategoryService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onActionParentSelect(e){this.dataModel?.id!=e?.id&&(e&&e.id?.length>0?this.dataModel.linkParentId=e.id:this.dataModel.linkParentId=null)}};pt.\u0275fac=function(i){return new(i||pt)(S(_e),S(he),S(q),S(K),S(G),S(H),S(V),S(F))},pt.\u0275cmp=P({type:pt,selectors:[["app-contact-category-add"]],viewQuery:function(i,t){if(i&1&&ie($o,5),i&2){let s;ne(s=oe())&&(t.formGroup=s.first)}},standalone:!1,features:[U],decls:37,vars:31,consts:[["vform","ngForm"],["Title",""],["Description",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"mb-3"],["target","_blank",3,"href"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openDirectUploadView","openForm","tree","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=E();r(0,"div",4),I(1,"app-progress-spinner",5),r(2,"div",6)(3,"p",7),c(4),a(),r(5,"p"),c(6),C(7,"translate"),a(),I(8,"app-cms-form-result-message",8),r(9,"form",9,0),v("ngSubmit",function(){return m(s),u(t.onFormSubmit())}),M(11,er,1,5,"app-cms-enum-record-status-selector",10),r(12,"div",11)(13,"label",12),c(14),a(),r(15,"input",13,1),R("ngModelChange",function(d){return m(s),x(t.dataModel.title,d)||(t.dataModel.title=d),u(d)}),a(),r(17,"em"),c(18),a(),M(19,tr,5,4,"mat-error"),a(),r(20,"app-contact-category-selector",14),C(21,"translate"),v("optionChange",function(d){return m(s),u(t.onActionParentSelect(d))}),a(),r(22,"div",11)(23,"label",15),c(24),a(),r(25,"textarea",16,2),R("ngModelChange",function(d){return m(s),x(t.dataModel.description,d)||(t.dataModel.description=d),u(d)}),c(27,"          "),a(),r(28,"em"),c(29),a(),M(30,ir,5,3,"mat-error"),a(),r(31,"div",17)(32,"a",18),C(33,"cmsthumbnail"),M(34,nr,2,4,"img",19),a()(),M(35,or,8,16,"div",11),M(36,rr,9,7,"div",20),a()()()}if(i&2){let s=D(16),h=D(26);n(),_("optionsInfoAreaId",t.constructorInfoAreaId),n(3),f(" ",t.formInfo.formTitle," "),n(2),f(" ",g(7,25,"TITLE.Be_Careful_When_Entering_Information")," "),n(2),_("formInfo",t.formInfo),n(3),b(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),n(3),y(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),w("ngModel",t.dataModel.title),n(3),f("",s.value.length," / 100"),n(),b(s.errors!=null&&s.errors.required?19:-1),n(),_("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",g(21,27,"TITLE.Parent_Area")),n(4),y(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),n(),_("placeholder",A(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),w("ngModel",t.dataModel.description),n(4),f("",h.value.length," / 500"),n(),b(h.errors!=null&&h.errors.required?30:-1),n(2),_("href",A(g(33,29,t.dataModel.linkMainImageIdSrc)),Me),n(2),b((t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0?34:-1),n(),b(t.fieldsInfo.linkMainImageId!=null&&t.fieldsInfo.linkMainImageId.accessWatchField?35:-1),n(),b(t.formInfo.submitButtonEnabled?36:-1)}},dependencies:[xe,re,Y,Te,Ce,ge,ae,we,Re,J,qt,z,ke,Ht,Le,L,Xe],encapsulation:2});var ei=pt;function ar(o,l){if(o&1){let e=E();r(0,"button",13),v("click",function(){m(e);let t=p();return u(t.onActionAdd())}),c(1),C(2,"translate"),a()}o&2&&(n(),f(" ",g(2,1,"ACTION.ADD")," "))}function lr(o,l){if(o&1){let e=E();r(0,"button",14),v("click",function(){m(e);let t=p();return u(t.onActionEdit())}),c(1),C(2,"translate"),a()}o&2&&(n(),f(" ",g(2,1,"ACTION.EDIT")," "))}function sr(o,l){if(o&1){let e=E();r(0,"button",15),v("click",function(){m(e);let t=p();return u(t.onActionDelete())}),c(1),C(2,"translate"),a()}o&2&&(n(),f(" ",g(2,1,"ACTION.DELETE")," "))}function cr(o,l){if(o&1){let e=E();r(0,"button",16),v("click",function(){m(e);let t=p();return u(t.onActionButtonReload())}),r(1,"mat-icon",17),C(2,"translate"),c(3,"refresh"),a()()}if(o&2){let e=p();n(),Q("rotation360",e.publicHelper.processService.process.inRunArea[e.constructorInfoAreaId]),_("title",A(g(2,4,"ACTION.RELOAD")))}}function dr(o,l){if(o&1){let e=E();r(0,"mat-tree-node",18),I(1,"button",19),r(2,"span",20),v("click",function(){let t=m(e).$implicit,s=p();return u(s.onActionSelect(t))}),c(3),a()()}if(o&2){let e=l.$implicit,i=p();Q("ntk-tree-selected",(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0&&(i.dataModelSelect==null?null:i.dataModelSelect.id)===e.id),n(3),y(e.title)}}function pr(o,l){if(o&1){let e=E();r(0,"mat-tree-node",21)(1,"button",22)(2,"mat-icon",23),c(3),a()(),r(4,"span",20),v("click",function(){let t=m(e).$implicit,s=p();return u(s.onActionSelect(t))}),c(5),a()()}if(o&2){let e=l.$implicit,i=p(),t=D(10);Q("ntk-tree-selected",(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0&&(i.dataModelSelect==null?null:i.dataModelSelect.id)===e.id),_("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),n(),ce("type","button")("aria-label","Toggle "+e.title),n(2),f(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),n(2),y(e.title)}}var mt=class mt{constructor(l,e,i,t,s,h,d,T,N){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.dialog=t;this.cdr=s;this.publicHelper=h;this.tokenHelper=d;this.cmsStoreService=T;this.translate=N;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new W;this.dataModelResult=new X;this.filterModel=new Z;this.dataSource=new Gt;this.optionChange=new Ee;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(l,e)=>!!e.children&&e.children.length>0;this.childrenAccessor=l=>l.children??[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>se(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(l=>l.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onActionSelect(l){l&&this.dataModelSelect&&l.id==this.dataModelSelect.id?(this.dataModelSelect=null,this.optionChange.emit(null)):(this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect))}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new W,this.DataGetAll()}onActionSelectForce(l){}onActionAdd(){let l="";this.dataModelSelect&&this.dataModelSelect.id?.length>0&&(l=this.dataModelSelect.id);let e=new Mt;e.disableClose=!0,e.autoFocus=!0,e.data={parentId:l},this.dialog.open(ei,e).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let l="";if(this.dataModelSelect&&this.dataModelSelect.id?.length>0&&(l=this.dataModelSelect.id),l.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open($t,{height:"90%",panelClass:e,enterAnimationDuration:bt.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:bt.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let l="";if(this.dataModelSelect&&this.dataModelSelect.id?.length>0&&(l=this.dataModelSelect.id),l.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Zt,{height:"90%",panelClass:e,enterAnimationDuration:bt.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:bt.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}};mt.\u0275fac=function(e){return new(e||mt)(S(G),S(q),S(K),S(Ye),S(V),S(H),S(De),S(Je),S(F))},mt.\u0275cmp=P({type:mt,selectors:[["app-contact-category-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:14,vars:14,consts:[["treeTagControl",""],[3,"optionListTitle","optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-action",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,i){e&1&&(r(0,"app-cms-html-tree",1),C(1,"translate"),k(2,2),M(3,ar,3,3,"button",3),M(4,lr,3,3,"button",4),M(5,sr,3,3,"button",5),M(6,cr,4,6,"button",6),O(),k(7,7),I(8,"app-progress-spinner",8),r(9,"mat-tree",9,0),j(11,dr,4,3,"mat-tree-node",10)(12,pr,6,8,"mat-tree-node",11),a(),O(),be(13,12),a()),e&2&&(_("optionListTitle",g(1,12,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName)))("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),n(3),b(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessAddRow?3:-1),n(),b(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow&&(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0?4:-1),n(),b(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessDeleteRow&&(i.dataModelSelect==null||i.dataModelSelect.id==null?null:i.dataModelSelect.id.length)>0?5:-1),n(),b(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessWatchRow?6:-1),n(2),_("optionsInfoAreaId",i.constructorInfoAreaId),n(),_("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),n(3),_("matTreeNodeDefWhen",i.hasChild))},dependencies:[Ke,Ae,Lt,Bt,Ft,Vt,Nt,z,Xt,L],encapsulation:2});var ut=mt;var _r=()=>[5,10,20,100];function Sr(o,l){if(o&1){let e=E();r(0,"a",10),v("click",function(){m(e);let t=p();return u(t.onActionButtonBulkDelete())}),I(1,"i",42),c(2),C(3,"translate"),a()}if(o&2){let e=p();n(2),me(" ",g(3,2,"ACTION.DELETE_SELECTED")," (",e.getSelectedCount(),") ")}}function Mr(o,l){if(o&1){let e=E();r(0,"div",18)(1,"a",43),v("click",function(){m(e);let t=p();return u(t.onActionButtonNewRow())}),I(2,"i",44)(3,"br"),a(),r(4,"p",45),c(5),C(6,"translate"),a()()}o&2&&(n(5),f(" ",g(6,1,"ACTION.ADD")," "))}function br(o,l){if(o&1){let e=E();r(0,"div",18)(1,"a",46),v("click",function(){m(e);let t=p();return u(t.onActionButtonImport())}),I(2,"i",16)(3,"br"),a(),r(4,"p",45),c(5),C(6,"translate"),a()()}o&2&&(n(5),f(" ",g(6,1,"ACTION.IMPORT")," "))}function vr(o,l){if(o&1){let e=E();r(0,"div",18)(1,"a",47),v("click",function(){m(e);let t=p();return u(t.onActionButtonBulkDelete())}),I(2,"i",48)(3,"br"),a(),r(4,"p",45),c(5),C(6,"translate"),a()()}if(o&2){let e=p();n(5),me(" ",g(6,2,"ACTION.DELETE_SELECTED")," (",e.getSelectedCount(),") ")}}function Ir(o,l){if(o&1){let e=E();r(0,"div",18)(1,"a",49),v("click",function(){m(e);let t=p();return u(t.onActionButtonEditRow(t.tableRowSelected))}),I(2,"i",50)(3,"br"),a(),r(4,"p",45),c(5),C(6,"translate"),a()()}o&2&&(n(5),f(" ",g(6,1,"ACTION.EDIT")," "))}function yr(o,l){if(o&1){let e=E();r(0,"div",18)(1,"a",47),v("click",function(){m(e);let t=p();return u(t.onActionButtonDeleteRow(t.tableRowSelected))}),I(2,"i",51)(3,"br"),a(),r(4,"p",45),c(5),C(6,"translate"),a()()}o&2&&(n(5),f(" ",g(6,1,"ACTION.DELETE")," "))}function Er(o,l){if(o&1&&(r(0,"mat-header-cell",52),c(1),a()),o&2){let e=p();n(),f(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Tr(o,l){if(o&1&&(r(0,"mat-cell"),c(1),a()),o&2){let e=l.$implicit;n(),f(" ",e.id," ")}}function wr(o,l){if(o&1&&(r(0,"mat-header-cell",52),c(1),a()),o&2){let e=p();n(),f(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function xr(o,l){if(o&1&&(r(0,"mat-cell"),c(1),C(2,"cmssiteinfo"),C(3,"async"),a()),o&2){let e=l.$implicit;n(),f(" ",g(3,3,g(2,1,e.linkSiteId))," ")}}function Rr(o,l){if(o&1&&(r(0,"mat-header-cell",52),c(1),a()),o&2){let e=p();n(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function Ar(o,l){if(o&1&&(r(0,"mat-cell"),c(1),a()),o&2){let e=l.$implicit;n(),f(" ",e.title," ")}}function Dr(o,l){if(o&1&&(r(0,"mat-header-cell",52),c(1),a()),o&2){let e=p();n(),f(" ",e.fieldsInfo.firstName==null?null:e.fieldsInfo.firstName.fieldTitle," ")}}function kr(o,l){if(o&1&&(r(0,"mat-cell"),c(1),a()),o&2){let e=l.$implicit;n(),f(" ",e.firstName," ")}}function Or(o,l){if(o&1&&(r(0,"mat-header-cell",52),c(1),a()),o&2){let e=p();n(),f(" ",e.fieldsInfo.lastName==null?null:e.fieldsInfo.lastName.fieldTitle," ")}}function Pr(o,l){if(o&1&&(r(0,"mat-cell"),c(1),a()),o&2){let e=l.$implicit;n(),f(" ",e.lastName," ")}}function Nr(o,l){if(o&1&&(r(0,"mat-header-cell",52),c(1),a()),o&2){let e=p();n(),f(" ",e.fieldsInfo.countNumber==null?null:e.fieldsInfo.countNumber.fieldTitle," ")}}function Lr(o,l){if(o&1&&(r(0,"mat-cell"),c(1),a()),o&2){let e=l.$implicit;n(),f(" ",e.countNumber," ")}}function Br(o,l){if(o&1&&(r(0,"mat-header-cell",52),c(1),a()),o&2){let e=p();n(),f(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Vr(o,l){if(o&1&&(r(0,"mat-cell"),c(1),C(2,"localeDate"),a()),o&2){let e=l.$implicit;n(),f(" ",g(2,1,e.createdDate)," ")}}function Fr(o,l){if(o&1&&(r(0,"mat-header-cell",52),c(1),a()),o&2){let e=p();n(),f(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Gr(o,l){if(o&1&&(r(0,"mat-cell"),c(1),C(2,"localeDate"),a()),o&2){let e=l.$implicit;n(),f(" ",g(2,1,e.updatedDate)," ")}}function Hr(o,l){o&1&&(r(0,"mat-header-cell"),c(1),C(2,"translate"),a()),o&2&&(n(),f(" ",g(2,1,"TITLE.OPTION")," "))}function Wr(o,l){if(o&1&&(r(0,"mat-cell",53)(1,"button",54)(2,"mat-icon"),c(3,"more_vert"),a()(),I(4,"mat-menu",null,2),a()),o&2){let e=D(5);n(),_("matMenuTriggerFor",e)}}function jr(o,l){if(o&1){let e=E();r(0,"mat-header-cell")(1,"mat-checkbox",55),C(2,"translate"),v("change",function(t){m(e);let s=p();return u(s.onSelectAllChange(t))}),a()()}if(o&2){let e=p();n(),_("checked",e.isAllSelected)("indeterminate",e.selectedRowsForBulkDelete.size>0&&e.selectedRowsForBulkDelete.size<e.tableSource.data.length),ce("aria-label",g(2,3,"ACTION.SELECT"))}}function qr(o,l){if(o&1){let e=E();r(0,"mat-cell")(1,"mat-checkbox",56),C(2,"translate"),v("change",function(t){let s=m(e).$implicit,h=p();return u(h.onCheckboxChange(s,t))})("click",function(t){return m(e),u(t.stopPropagation())}),a()()}if(o&2){let e=l.$implicit,i=p();n(),_("checked",i.isRowSelected(e.id)),ce("aria-label",g(2,2,"ACTION.SELECT"))}}function zr(o,l){o&1&&I(0,"mat-header-row")}function Ur(o,l){if(o&1){let e=E();r(0,"mat-row",57),v("click",function(t){let s=m(e).$implicit,h=p();return u(h.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=m(e).$implicit,h=p();return u(h.onActionTableRowSelect(s,t))}),a()}if(o&2){let e=l.$implicit,i=p();Q("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var ft=class ft extends Ut{constructor(e,i,t,s,h,d,T,N,B,le,Be,ca){super(e,new de,Be,d,B);this.contentService=e;this.cmsToastrService=i;this.cmsConfirmationDialogService=t;this.router=s;this.activatedRoute=h;this.tokenHelper=d;this.cdr=T;this.cmsStoreService=N;this.translate=B;this.pageInfo=le;this.publicHelper=Be;this.dialog=ca;this.requestLinkCategoryId="";this.constructorInfoAreaId=this.constructor.name;this.filteModelContent=new Z;this.filterDataModelQueryBuilder=[];this.categoryModelSelected=new W;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["id","title","firstName","lastName","countNumber"];this.tabledisplayedColumnsMobileSource=["id","title","firstName","lastName"];this.selectedRowsForBulkDelete=new Set;this.isAllSelected=!1;this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkCategoryId=this.activatedRoute.snapshot.paramMap.get("LinkCategoryId"),this.optionsSearch.parentMethods={onSubmit:je=>this.onSubmitOptionsSearch(je)},this.filteModelContent.sortColumn="id",this.filteModelContent.sortType=_t.Descending,this.requestLinkCategoryId&&this.requestLinkCategoryId.length>0){let je=new ue;je.propertyName="ContentCategores",je.propertyAnyName="LinkCategoryId",je.value=this.requestLinkCategoryId,this.filteModelContent.filters.push(je)}}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>se(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}filterModelCompiler(e){let i=JSON.parse(JSON.stringify(e));return this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),i}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tabledisplayedColumns.indexOf("select")===-1&&this.tabledisplayedColumns.push("select"),this.tableRowsSelected=[],this.selectedRowsForBulkDelete.clear(),this.isAllSelected=!1,this.onActionTableRowSelect(new de);let i=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(i,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let t=this.filterModelCompiler(this.filteModelContent);this.categoryModelSelected&&this.categoryModelSelected.id?.length>0?(this.contentService.setAccessLoad(),this.contentService.ServiceGetAllWithHierarchyCategoryId(this.categoryModelSelected.id,t).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.applyDataGetAllResult(s),this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorMessage(s.errorMessage),this.publicHelper.processService.processStop(i)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(i,!1)}})):(this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(t).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.applyDataGetAllResult(s),this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorMessage(s.errorMessage),this.publicHelper.processService.processStop(i)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(i,!1)}}))}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=_t.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=_t.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=_t.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){let e=new Mt;e.disableClose=!0,e.autoFocus=!0,e.height="90%",e.data={linkCategoryId:this.categoryModelSelected?.id},this.dialog.open(Oe,e).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonImport(){this.router.navigate(["/contact/content/import"])}onActionButtonEditRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}let i=new Mt;i.disableClose=!0,i.autoFocus=!0,i.height="90%",i.data={id:this.tableRowSelected.id},this.dialog.open(Pe,i).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!(e?.id?.length>0)){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let h=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(h,d,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:d=>{d.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(h)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(h,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(T=>{i.set(T,0)}),this.translate.get("MESSAGE.All").subscribe(T=>{i.set(T,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(T=>{this.publicHelper.processService.processStart(t,T,this.constructorInfoAreaId)});var s=this.filterModelCompiler(this.filteModelContent);if(this.categoryModelSelected&&this.categoryModelSelected.id?.length>0){let T=new ue;T.propertyName="ContentCategores",T.propertyAnyName="LinkCategoryId",T.value=this.categoryModelSelected.id,s.filters.push(T)}this.contentService.ServiceGetCount(s).subscribe({next:T=>{T.isSuccess?(this.translate.get("MESSAGE.All").subscribe(N=>{i.set(N,T.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(T.errorMessage),this.publicHelper.processService.processStop(t)},error:T=>{this.cmsToastrService.typeError(T),this.publicHelper.processService.processStop(t,!1)}});let h=this.filterModelCompiler(this.filteModelContent),d=new ue;if(d.propertyName="recordStatus",d.value=xi.Available,h.filters.push(d),this.categoryModelSelected&&this.categoryModelSelected.id?.length>0){let T=new ue;T.propertyName="ContentCategores",T.propertyAnyName="LinkCategoryId",T.value=this.categoryModelSelected.id,h.filters.push(T)}this.contentService.ServiceGetCount(h).subscribe({next:T=>{T.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(N=>{i.set(N,T.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(T.errorMessage),this.publicHelper.processService.processStop(t)},error:T=>{this.cmsToastrService.typeError(T),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new Z,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onCheckboxChange(e,i){i.checked?this.selectedRowsForBulkDelete.add(e.id):this.selectedRowsForBulkDelete.delete(e.id),this.updateSelectAllState()}isRowSelected(e){return this.selectedRowsForBulkDelete.has(e)}onSelectAllChange(e){this.isAllSelected=e.checked,this.isAllSelected?this.tableSource.data.forEach(i=>{i.id&&this.selectedRowsForBulkDelete.add(i.id)}):this.selectedRowsForBulkDelete.clear()}updateSelectAllState(){if(this.tableSource.data.length===0){this.isAllSelected=!1;return}let e=this.tableSource.data.every(i=>this.selectedRowsForBulkDelete.has(i.id));this.isAllSelected=e}getSelectedCount(){return this.selectedRowsForBulkDelete.size}onActionButtonBulkDelete(){if(this.selectedRowsForBulkDelete.size===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var e="",i="";let t=this.selectedRowsForBulkDelete.size;this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{e=s["MESSAGE.Please_Confirm"],i=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+t+" \u0622\u06CC\u062A\u0645 \u0627\u0646\u062A\u062E\u0627\u0628 \u0634\u062F\u0647 ) "}),this.cmsConfirmationDialogService.confirm(e,i).then(s=>{if(s){let h=this.constructor.name+"BulkDelete";this.translate.get("MESSAGE.Receiving_information").subscribe(T=>{this.publicHelper.processService.processStart(h,T,this.constructorInfoAreaId)});let d=Array.from(this.selectedRowsForBulkDelete);this.contentService.ServiceDeleteList(d).subscribe({next:T=>{T.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.selectedRowsForBulkDelete.clear(),this.isAllSelected=!1,this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(h)},error:T=>{this.cmsToastrService.typeError(T),this.publicHelper.processService.processStop(h,!1)}})}}).catch(()=>{})}};ft.\u0275fac=function(i){return new(i||ft)(S(fe),S(G),S(Ze),S(wi),S(Ei),S(De),S(V),S(Je),S(F),S(Wt),S(H),S(Ye))},ft.\u0275cmp=P({type:ft,selectors:[["app-contact-content-list"]],standalone:!1,features:[U],decls:72,vars:36,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],[1,"fa-solid","fa-file-import","font-18",2,"color","#ffffff"],["cms-action-main",""],[1,"col-4"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","linkSiteId"],["matColumnDef","title"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","countNumber"],["matColumnDef","createdDate"],["matColumnDef","updatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],["matColumnDef","select"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[1,"fa-solid","fa-trash-can","font-18",2,"color","#ff0000"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"click"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash-can","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"change","checked","indeterminate"],[3,"change","click","checked"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(i,t){if(i&1){let s=E();r(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(d){return m(s),x(t.viewGuideNotice,d)||(t.viewGuideNotice=d),u(d)}),v("optionOnActionButtonMemoRow",function(){return m(s),u(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return m(s),u(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return m(s),u(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return m(s),u(t.onActionButtonPrintRow())}),k(1,4),r(2,"app-contact-category-tree",5),v("optionChange",function(d){return m(s),u(t.onActionSelectorSelect(d))}),a(),O(),be(3,6)(4,7),k(5,8),M(6,Sr,4,4,"a",9),r(7,"a",10),v("click",function(){return m(s),u(t.viewGuideNotice=!t.viewGuideNotice)}),I(8,"i",11),a(),r(9,"a",10),v("click",function(){return m(s),u(t.onActionButtonReload())}),I(10,"i",12),a(),O(),k(11,13),r(12,"a",14),v("click",function(){return m(s),u(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),I(13,"mat-slide-toggle",15),c(14),C(15,"translate"),a(),r(16,"a",14),v("click",function(){return m(s),u(t.onActionButtonStatist())}),I(17,"mat-slide-toggle",15),c(18),C(19,"translate"),a(),r(20,"a",14),v("click",function(){return m(s),u(t.onActionButtonImport())}),I(21,"i",16),c(22),C(23,"translate"),a(),O(),k(24,17),M(25,Mr,7,3,"div",18),M(26,br,7,3,"div",18),M(27,vr,7,4,"div",18),O(),k(28,19),M(29,Ir,7,3,"div",18),M(30,yr,7,3,"div",18),O(),k(31,20),r(32,"app-cms-search-list",21),R("optionsChange",function(d){return m(s),x(t.optionsSearch,d)||(t.optionsSearch=d),u(d)}),a(),r(33,"app-cms-statist-list",21),R("optionsChange",function(d){return m(s),x(t.optionsStatist,d)||(t.optionsStatist=d),u(d)}),a(),O(),k(34,22),r(35,"mat-table",23,0),v("matSortChange",function(){m(s);let d=D(36);return u(t.onTableSortData(d))}),k(37,24),j(38,Er,2,1,"mat-header-cell",25)(39,Tr,2,1,"mat-cell",26),O(),k(40,27),j(41,wr,2,1,"mat-header-cell",25)(42,xr,4,5,"mat-cell",26),O(),k(43,28),j(44,Rr,2,1,"mat-header-cell",25)(45,Ar,2,1,"mat-cell",26),O(),k(46,29),j(47,Dr,2,1,"mat-header-cell",25)(48,kr,2,1,"mat-cell",26),O(),k(49,30),j(50,Or,2,1,"mat-header-cell",25)(51,Pr,2,1,"mat-cell",26),O(),k(52,31),j(53,Nr,2,1,"mat-header-cell",25)(54,Lr,2,1,"mat-cell",26),O(),k(55,32),j(56,Br,2,1,"mat-header-cell",25)(57,Vr,3,3,"mat-cell",26),O(),k(58,33),j(59,Fr,2,1,"mat-header-cell",25)(60,Gr,3,3,"mat-cell",26),O(),k(61,34),j(62,Hr,3,3,"mat-header-cell",35)(63,Wr,6,1,"mat-cell",36),O(),k(64,37),j(65,jr,3,5,"mat-header-cell",35)(66,qr,3,4,"mat-cell",26),O(),j(67,zr,1,0,"mat-header-row",38)(68,Ur,1,2,"mat-row",39),a(),O(),k(69,40),r(70,"mat-paginator",41,1),v("page",function(d){return m(s),u(t.onTablePageingData(d))}),a(),O(),a()}i&2&&(_("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","contact.content.list"),w("optionActionGuideNoticeDisplay",t.viewGuideNotice),_("optionTreeDisplay",!t.requestLinkCategoryId||t.requestLinkCategoryId.length===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),n(6),b(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow&&t.selectedRowsForBulkDelete.size>0?6:-1),n(4),Q("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),n(3),_("checked",t.optionsSearch.data.show),n(),f("",g(15,29,"ACTION.SEARCH")," "),n(3),_("checked",t.optionsStatist.data.show),n(),f("",g(19,31,"ACTION.STATIST")," "),n(4),f(" ",g(23,33,"ACTION.IMPORT")," "),n(3),b(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?25:-1),n(),b(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?26:-1),n(),b(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow&&t.selectedRowsForBulkDelete.size>0?27:-1),n(2),b(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?29:-1),n(),b(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?30:-1),n(2),w("options",t.optionsSearch),n(),w("options",t.optionsStatist),n(2),_("dataSource",t.tableSource),n(32),_("matHeaderRowDef",t.tabledisplayedColumns),n(),_("matRowDefColumns",t.tabledisplayedColumns),n(2),_("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Tt(35,_r)))},dependencies:[Ke,kt,Ae,en,tn,Ot,Pt,an,ln,sn,dn,fn,pn,cn,Cn,mn,un,gn,hn,Qt,Kt,In,Yt,ut,wt,L,En,Jt],encapsulation:2});var Ct=ft;var Qr=()=>[5,10,20,100],Kr=(o,l)=>l.id;function Yr(o,l){if(o&1){let e=E();r(0,"div",17)(1,"a",26),v("click",function(){m(e);let t=p();return u(t.onActionButtonNewRow())}),I(2,"i",27)(3,"br"),a(),r(4,"p",28),c(5),C(6,"translate"),a()()}o&2&&(n(5),f(" ",g(6,1,"ACTION.ADD")," "))}function Jr(o,l){if(o&1){let e=E();r(0,"div",17)(1,"a",29),v("click",function(){m(e);let t=p();return u(t.onActionButtonEditRow(t.tableRowSelected))}),I(2,"i",30)(3,"br"),a(),r(4,"p",28),c(5),C(6,"translate"),a()()}o&2&&(n(5),f(" ",g(6,1,"ACTION.EDIT")," "))}function Xr(o,l){if(o&1){let e=E();r(0,"div",17)(1,"a",31),v("click",function(){m(e);let t=p();return u(t.onActionButtonDeleteRow(t.tableRowSelected))}),I(2,"i",32)(3,"br"),a(),r(4,"p",28),c(5),C(6,"translate"),a()()}o&2&&(n(5),f(" ",g(6,1,"ACTION.DELETE")," "))}function Zr(o,l){if(o&1&&(r(0,"div",39),I(1,"i",41),c(2),a()),o&2){let e=p().$implicit,i=p(2);n(2),me(" ",i.fieldsInfo.id==null?null:i.fieldsInfo.id.fieldTitle,": ",e.id," ")}}function $r(o,l){if(o&1&&(r(0,"div",39),I(1,"i",42),c(2),a()),o&2){let e=p().$implicit,i=p(2);n(2),me(" ",i.fieldsInfo.firstName==null?null:i.fieldsInfo.firstName.fieldTitle,": ",e.firstName," ")}}function ea(o,l){if(o&1&&(r(0,"div",39),c(1),a()),o&2){let e=p().$implicit,i=p(2);n(),me(" ",i.fieldsInfo.lastName==null?null:i.fieldsInfo.lastName.fieldTitle,": ",e.lastName," ")}}function ta(o,l){if(o&1&&(r(0,"div",39),I(1,"i",43),c(2),C(3,"localeDate"),a()),o&2){let e=p().$implicit;n(2),f(" ",g(3,1,e.createdDate)," ")}}function ia(o,l){if(o&1&&I(0,"select",45),o&2){let e=p(2).$implicit,i=p(2);_("contentService",i.contentService)("row",e)}}function na(o,l){if(o&1&&(r(0,"div",39),I(1,"i",44),C(2,"statusIconClass"),M(3,ia,1,2,"select",45),a()),o&2){let e=p().$implicit,i=p(2);n(),_("ngClass",g(2,2,e.recordStatus)),n(2),b(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow&&e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?3:-1)}}function oa(o,l){if(o&1&&(r(0,"div",39),I(1,"i",48),c(2),C(3,"localeDate"),a()),o&2){let e=p(2).$implicit,i=p(2);n(2),me(" ",i.fieldsInfo.updatedDate==null?null:i.fieldsInfo.updatedDate.fieldTitle,": ",g(3,2,e.updatedDate)," ")}}function ra(o,l){if(o&1){let e=E();r(0,"div",40),M(1,oa,4,4,"div",39),r(2,"div",39)(3,"span",46),v("click",function(t){return m(e),p(3).onActionCopied(),u(t.stopPropagation())}),I(4,"i",47),a(),c(5),a()()}if(o&2){let e=p().$implicit;n(),b(e.updatedDate?1:-1),n(2),_("cdkCopyToClipboard",e.id.toString()),n(2),f(" ID: ",e.id," ")}}function aa(o,l){if(o&1){let e=E();r(0,"div",34),v("click",function(t){let s=m(e).$implicit,h=p(2);return u(h.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=m(e).$implicit,h=p(2);return u(h.onActionTableRowSelect(s,t))})("mouseenter",function(){let t=m(e).$implicit,s=p(2);return u(s.onActionTableRowMouseEnter(t))})("mouseleave",function(){let t=m(e).$implicit,s=p(2);return u(s.onActionTableRowMouseLeave(t))}),r(1,"div",35),I(2,"i",36),C(3,"statusIconClass"),a(),r(4,"div",37)(5,"div",38),c(6),a(),M(7,Zr,3,2,"div",39),M(8,$r,3,2,"div",39),M(9,ea,2,2,"div",39),M(10,ta,4,3,"div",39),M(11,na,4,4,"div",39),M(12,ra,6,3,"div",40),a()()}if(o&2){let e=l.$implicit,i=p(2);Q("selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))("bg-fade-highlight-light",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)),ce("aria-label",e.title||e.id),n(2),_("ngClass",g(3,13,e.recordStatus)),n(4),f(" ",e.title||"ID: "+e.id," "),n(),b(e.id?7:-1),n(),b(e.firstName?8:-1),n(),b(e.lastName?9:-1),n(),b(e.createdDate?10:-1),n(),b(e.recordStatus!==void 0?11:-1),n(),b(i.getRowExpanded(e)?12:-1)}}function la(o,l){if(o&1&&(r(0,"div",22),ee(1,aa,13,15,"div",33,Kr),a()),o&2){let e=p();n(),te(e.dataModelResult.listItems)}}function sa(o,l){o&1&&(r(0,"div",23),c(1),C(2,"translate"),a()),o&2&&(n(),f(" ",g(2,1,"MESSAGE.NoRecord")," "))}var Ge=class Ge extends Ct{};Ge.\u0275fac=(()=>{let l;return function(i){return(l||(l=hi(Ge)))(i||Ge)}})(),Ge.\u0275cmp=P({type:Ge,selectors:[["app-contact-content-list-mobile"]],standalone:!1,features:[U],decls:37,vars:31,consts:[["paginator",""],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionOnScrollNearBottom","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplay","optionActionRowDisplayMenu","optionActionRowDisplayMenuAct","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange","optionSelectForce"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-maximize","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-minimize","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],[1,"col-4"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],[1,"cms-m-list"],[1,"cms-m-empty"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["role","button","tabindex","0",1,"cms-m-list-item","border-highlight",3,"selected","bg-fade-highlight-light"],["role","button","tabindex","0",1,"cms-m-list-item","border-highlight",3,"click","rtclick","mouseenter","mouseleave"],[1,"cms-m-list-item-image-placeholder"],["aria-hidden","true",3,"ngClass"],[1,"cms-m-list-item-content"],[1,"cms-m-list-item-title"],[1,"cms-m-list-item-subtitle"],[1,"cms-m-list-item-expanded"],["aria-hidden","true",1,"fa-solid","fa-hashtag"],["aria-hidden","true",1,"fa-solid","fa-user"],["aria-hidden","true",1,"fa-solid","fa-calendar"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none","margin-left","8px",3,"contentService","row"],[1,"navi-icon","pointer",3,"click","cdkCopyToClipboard"],[1,"flaticon2-copy"],["aria-hidden","true",1,"fa-solid","fa-calendar-check"]],template:function(e,i){if(e&1){let t=E();r(0,"app-cms-html-list-mobile",1),R("optionActionGuideNoticeDisplayChange",function(h){return m(t),x(i.viewGuideNotice,h)||(i.viewGuideNotice=h),u(h)}),v("optionOnActionButtonMemoRow",function(){return m(t),u(i.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return m(t),u(i.onActionButtonMemo())})("optionOnActionButtonExport",function(){return m(t),u(i.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return m(t),u(i.onActionButtonPrintRow())})("optionOnScrollNearBottom",function(){return m(t),u(i.onActionLoadNextPage())}),k(1,2),r(2,"app-contact-category-tree",3),v("optionChange",function(h){return m(t),u(i.onActionSelectorSelect(h))}),a(),O(),be(3,4)(4,5),k(5,6),r(6,"a",7),v("click",function(){return m(t),u(i.viewGuideNotice=!i.viewGuideNotice)}),I(7,"i",8),a(),r(8,"a",7),v("click",function(){return m(t),u(i.onActionButtonReload())}),I(9,"i",9),a(),r(10,"a",10),v("click",function(){return m(t),u(i.onActionGridExpandRows(!0))}),I(11,"i",11),a(),r(12,"a",10),v("click",function(){return m(t),u(i.onActionGridExpandRows(!1))}),I(13,"i",12),a(),O(),k(14,13),r(15,"a",14),v("click",function(){return m(t),u(i.optionsSearch.data.show=!i.optionsSearch.data.show)}),I(16,"mat-slide-toggle",15),c(17),C(18,"translate"),a(),r(19,"a",14),v("click",function(){return m(t),u(i.onActionButtonStatist())}),I(20,"mat-slide-toggle",15),c(21),C(22,"translate"),a(),O(),k(23,16),M(24,Yr,7,3,"div",17),O(),k(25,18),M(26,Jr,7,3,"div",17),M(27,Xr,7,3,"div",17),O(),k(28,19),r(29,"app-cms-search-list",20),R("optionsChange",function(h){return m(t),x(i.optionsSearch,h)||(i.optionsSearch=h),u(h)}),a(),r(30,"app-cms-statist-list",20),R("optionsChange",function(h){return m(t),x(i.optionsStatist,h)||(i.optionsStatist=h),u(h)}),a(),O(),k(31,21),M(32,la,3,0,"div",22)(33,sa,3,3,"div",23),O(),k(34,24),r(35,"mat-paginator",25,0),v("page",function(h){return m(t),u(i.onTablePageingData(h))}),a(),O(),a()}e&2&&(_("optionsListInfoAreaId",i.constructorInfoAreaId)("optionGuideNoticeKey","contact.content.list"),w("optionActionGuideNoticeDisplay",i.viewGuideNotice),_("optionTreeDisplay",!0)("optionActionRowId",i.tableRowSelected==null?null:i.tableRowSelected.id)("optionActionRowDisplay",(i.tableRowSelected==null||i.tableRowSelected.id==null?null:i.tableRowSelected.id.length)>0)("optionActionRowDisplayMenu",i.tableRowSelect2Click)("optionActionRowDisplayMenuAct",i.tableRowSelectActionMenuClick)("optionSelectRowItemTitle",(i.tableRowSelected==null||i.tableRowSelected.title==null?null:i.tableRowSelected.title.length)>0?i.tableRowSelected==null?null:i.tableRowSelected.title:i.tableRowSelected==null?null:i.tableRowSelected.id),n(2),_("optionSelectForce",i.requestLinkCategoryId),n(7),Q("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),n(7),_("checked",i.optionsSearch.data.show),n(),f("",g(18,26,"ACTION.SEARCH")," "),n(3),_("checked",i.optionsStatist.data.show),n(),f("",g(22,28,"ACTION.STATIST")," "),n(3),b(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessAddRow?24:-1),n(2),b(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow&&(i.tableRowSelected==null||i.tableRowSelected.id==null?null:i.tableRowSelected.id.length)>0?26:-1),n(),b(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessDeleteRow&&(i.tableRowSelected==null||i.tableRowSelected.id==null?null:i.tableRowSelected.id.length)>0?27:-1),n(2),w("options",i.optionsSearch),n(),w("options",i.optionsStatist),n(2),b(!(i.dataModelResult==null||i.dataModelResult.listItems==null)&&i.dataModelResult.listItems.length?32:33),n(3),_("length",i.dataModelResult.totalRowCount)("pageIndex",i.dataModelResult.currentPageNumber-1)("pageSize",i.dataModelResult.rowPerPage)("pageSizeOptions",Tt(30,Qr)))},dependencies:[vi,J,Ot,Pt,Pi,Qt,Kt,wn,Yt,yn,ut,L,Jt,Tn],encapsulation:2});var ti=Ge;var kn=[{path:"",component:et,data:{title:"ROUTE.CONTACT"},children:[{path:"content",component:ti,data:{title:"ROUTE.CONTACT"}},{path:"content/add/:CategoryId",component:Oe,data:{title:"ROUTE.CONTACT"}},{path:"content/edit/:id",component:Pe,data:{title:"ROUTE.CONTACT"}},{path:"content/import",component:st,data:{title:"ROUTE.CONTACT"}},{path:"config",loadChildren:()=>import("./chunk-FGTGCRXV.js").then(o=>o.ContactConfigModule),data:{title:"ROUTE.CONTACT"}}]}];var On=[{path:"",component:et,data:{title:"ROUTE.CONTACT"},children:[{path:"config",loadChildren:()=>import("./chunk-FGTGCRXV.js").then(o=>o.ContactConfigModule),data:{title:"ROUTE.CONTACT"}},{path:"content",component:Ct,data:{title:"ROUTE.CONTACT"}},{path:"content/add/:CategoryId",component:Oe,data:{title:"ROUTE.CONTACT"}},{path:"content/edit/:id",component:Pe,data:{title:"ROUTE.CONTACT"}},{path:"content/import",component:st,data:{title:"ROUTE.CONTACT"}}]}];var He=class He{};He.\u0275fac=function(e){return new(e||He)},He.\u0275mod=Et({type:He}),He.\u0275inj=yt({imports:[oi.forChild(window.innerWidth<1e3?kn:On),oi]});var ii=He;var We=class We{};We.\u0275fac=function(e){return new(e||We)},We.\u0275mod=Et({type:We}),We.\u0275inj=yt({providers:[Ri,q,Oi,Ai,Ze,K,fe,Qe],imports:[yi,ii,Bi,Vi.withConfig({warnOnNgModelWithFormControl:"never"}),Mn,vn,Sn]});var Pn=We;export{Pn as ContactModule};
