import{B,M as R,N as z,o as A,pc as _,r as D,t as M,v as T}from"./chunk-MZT2GAV3.js";import{Fa as b,Ic as P,Ja as I,Jc as v,Ka as p,Lb as C,Nc as E,Pa as x,Ra as O,Va as y,Wb as u,Xa as N,Xb as K,bc as S,ca as m,cc as V,da as f,ib as a,jb as g,kb as h,sb as F,ua as w,vb as k,xb as l}from"./chunk-Y22UWZ2R.js";var o=class o{constructor(e,t){this._elRef=e;this._renderer=t}ngOnInit(){this.disabledNumberOnly||this._renderer.setAttribute(this._elRef.nativeElement,"onkeypress","return (event.charCode >= 48 && event.charCode <= 57) || event.charCode == 0")}};o.\u0275fac=function(t){return new(t||o)(p(w),p(I))},o.\u0275dir=O({type:o,selectors:[["","numberOnly",""]],inputs:{disabledNumberOnly:"disabledNumberOnly"},standalone:!1});var d=o;function U(s,e){if(s&1){let t=F();g(0,"input",3),k("keydown",function(n){m(t);let c=l(2);return f(c.onKeyDown(n))})("keyup",function(n){let c=m(t).index,j=l(2);return f(j.onKeyUp(n,c))}),h()}if(s&2){let t=e.$implicit,i=e.index,n=l(2);C(u("otp-input ",n.config.inputClass)),a("id",K("otp_",i,"_",n.componentKey))("pattern",n.config.allowNumbersOnly?"\\d*":"")("type",n.inputType)("placeholder",n.config.placeholder||"")("disabledNumberOnly",!n.config.allowNumbersOnly)("ngStyle",n.config.inputStyles)("formControl",n.otpForm.controls[t])}}function Z(s,e){if(s&1&&(g(0,"div",1),y(1,U,1,12,"input",2),S(2,"keys"),h()),s&2){let t=l();C(u("wrapper ",t.config.containerClass)),a("id",u("c_",t.componentKey))("ngStyle",t.config.containerStyles),b(),a("ngForOf",V(2,7,t.otpForm==null?null:t.otpForm.controls))}}var r=class r{constructor(e){this.keysPipe=e;this.config={length:4};this.onInputChange=new N;this.inputControls=new Array(this.config.length);this.componentKey=Math.random().toString(36).substring(2)+new Date().getTime().toString(36)}ngOnInit(){this.otpForm=new M({});for(let e=0;e<this.config.length;e++)this.otpForm.addControl(this.getControlName(e),new T);this.inputType=this.getInputType()}ngAfterViewInit(){if(!this.config.disableAutoFocus){let e=document.getElementById(`c_${this.componentKey}`);if(e){e.addEventListener("paste",i=>this.handlePaste(i));let t=e.getElementsByClassName("otp-input")[0];t&&t.focus&&t.focus()}}}getControlName(e){return`ctrl_${e}`}ifLeftArrow(e){return this.ifKeyCode(e,37)}ifRightArrow(e){return this.ifKeyCode(e,39)}ifBackspaceOrDelete(e){return e.key==="Backspace"||e.key==="Delete"||this.ifKeyCode(e,8)||this.ifKeyCode(e,46)}ifKeyCode(e,t){return(e.keyCode||e.charCode)==t}onKeyDown(e){var t=this.ifKeyCode(e,32);return!t}onKeyUp(e,t){let i=this.appendKey(`otp_${t+1}`),n=this.appendKey(`otp_${t-1}`);if(this.ifRightArrow(e)){this.setSelected(i);return}if(this.ifLeftArrow(e)){this.setSelected(n);return}if(this.ifBackspaceOrDelete(e)&&!e.target.value){this.setSelected(n),this.rebuildValue();return}e.target.value&&(this.ifValidEntry(e)&&this.setSelected(i),this.rebuildValue())}appendKey(e){return`${e}_${this.componentKey}`}setSelected(e){this.focusTo(e);let t=document.getElementById(e);t&&t.setSelectionRange&&setTimeout(()=>{t.setSelectionRange(0,1)},0)}ifValidEntry(e){let t=String.fromCharCode(e.keyCode);return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(t)||this.config.allowKeyCodes&&this.config.allowKeyCodes.includes(e.keyCode)||e.keyCode>=96&&e.keyCode<=105}focusTo(e){let t=document.getElementById(e);t&&t.focus()}setValue(e){if(!(this.config.allowNumbersOnly&&isNaN(e))){if(this.otpForm.reset(),!e){this.rebuildValue();return}if(e=e.toString().replace(/\s/g,""),Array.from(e).forEach((i,n)=>{this.otpForm.get(this.getControlName(n))&&this.otpForm.get(this.getControlName(n)).setValue(i)}),!this.config.disableAutoFocus){let i=document.getElementById(`c_${this.componentKey}`);var t=e.length<this.config.length?e.length:this.config.length-1;let n=i.getElementsByClassName("otp-input")[t];n&&n.focus&&n.focus()}this.rebuildValue()}}rebuildValue(){let e="";this.keysPipe.transform(this.otpForm.controls).forEach(t=>{this.otpForm.controls[t].value&&(e+=this.otpForm.controls[t].value)}),this.onInputChange.emit(e)}getInputType(){return this.config.isPasswordInput?"password":this.config.allowNumbersOnly?"tel":"text"}handlePaste(e){let t=e.clipboardData||window.clipboardData;if(t)var i=t.getData("Text");e.stopPropagation(),e.preventDefault(),i&&this.setValue(i)}};r.\u0275fac=function(t){return new(t||r)(p(_))},r.\u0275cmp=x({type:r,selectors:[["ng-otp-input"]],inputs:{config:"config"},outputs:{onInputChange:"onInputChange"},standalone:!1,decls:1,vars:1,consts:[["style","direction: ltr;",3,"class","id","ngStyle",4,"ngIf"],[2,"direction","ltr",3,"id","ngStyle"],["numberOnly","","maxlength","1","autocomplete","off",3,"pattern","type","placeholder","disabledNumberOnly","ngStyle","class","formControl","id","keydown","keyup",4,"ngFor","ngForOf"],["numberOnly","","maxlength","1","autocomplete","off",3,"keydown","keyup","pattern","type","placeholder","disabledNumberOnly","ngStyle","formControl","id"]],template:function(t,i){t&1&&y(0,Z,3,9,"div",0),t&2&&a("ngIf",i.otpForm==null?null:i.otpForm.controls)},dependencies:[P,v,E,A,D,R,z,B,d,_],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]});var L=r;export{L as a};
