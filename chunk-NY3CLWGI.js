import{a as ne}from"./chunk-BO6LOMMS.js";import{a as oe}from"./chunk-V4KO3F4A.js";import{f as ie}from"./chunk-KOTZODZQ.js";import{A as G,Ab as X,Ba as $,Bb as Y,oa as z,pc as Z,rb as W,sb as U,sc as ee,tb as q,ub as J,uc as te,vb as K,xb as Q}from"./chunk-BLRVWL3E.js";import{$ as V,Dg as L,fg as x,q as F,v as O}from"./chunk-JMYGXPBM.js";import{Ab as w,Dc as I,Ec as P,Fb as r,Gb as a,Hb as c,Ib as m,Mb as A,Nb as C,Ob as H,Pb as f,Ra as _,Sb as v,Ub as d,Va as o,Xa as E,Xc as B,cb as n,cc as j,ec as g,hc as u,ib as D,jc as b,ob as N,pa as h,qa as M,tc as T,xb as R,zb as k}from"./chunk-2AL2II5Z.js";import{i as y}from"./chunk-SEDBTTTN.js";function ae(l,i){if(l&1){let e=f();a(0,"button",10),v("click",function(){h(e);let s=d();return M(s.onActionButtonReload())}),a(1,"mat-icon",11),I(2,"translate"),u(3,"refresh"),c()()}if(l&2){let e=d();o(),g("rotation360",e.publicHelper.processService.process.inRunArea[e.constructorInfoAreaId]),r("title",T(P(2,4,"ACTION.RELOAD")))}}function le(l,i){if(l&1){let e=f();a(0,"mat-tree-node",12),m(1,"button",13),a(2,"span",14),v("click",function(){let s=h(e).$implicit,S=d();return M(S.onActionSelect(s))}),m(3,"img",15),u(4),c()()}if(l&2){let e=i.$implicit,t=d();g("ntk-tree-selected",(t.dataModelSelect==null||t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)>0&&(t.dataModelSelect==null?null:t.dataModelSelect.id)===e.id),o(3),r("src",T(e.linkMainImageIdSrc),_),o(),b("\xA0",e.title)}}function se(l,i){if(l&1){let e=f();a(0,"mat-tree-node",16)(1,"button",17)(2,"mat-icon",18),u(3),c()(),a(4,"span",14),v("click",function(){let s=h(e).$implicit,S=d();return M(S.onActionSelect(s))}),m(5,"img",15),u(6),c()()}if(l&2){let e=i.$implicit,t=d(),s=j(7);g("ntk-tree-selected",(t.dataModelSelect==null||t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)>0&&(t.dataModelSelect==null?null:t.dataModelSelect.id)===e.id),r("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),o(),R("type","button")("aria-label","Toggle "+e.title),o(2),b(" ",s.isExpanded(e)?"expand_more":"chevron_right"," "),o(2),r("src",T(e.linkMainImageIdSrc),_),o(),b("\xA0",e.title)}}var p=class p{constructor(i,e,t,s,S,ce,de,pe,me){this.cmsToastrService=i;this.coreEnumService=e;this.categoryService=t;this.cdr=s;this.publicHelper=S;this.tokenHelper=ce;this.cmsStoreService=de;this.translate=pe;this.dialog=me;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new x;this.dataModelResult=new F;this.filterModel=new O;this.dataSource=new Q;this.optionChange=new E;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(i,e)=>!1;this.childrenAccessor=i=>[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(i){this.onActionSelectForce(i)}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(i=>i.tokenInfoStore).subscribe(()=>y(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(i=>i.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess&&(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems),this.publicHelper.processService.processStop(i)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i,!1)}})}onActionSelect(i){i&&this.dataModelSelect&&i.id==this.dataModelSelect.id?(this.dataModelSelect=null,this.optionChange.emit(null)):(this.dataModelSelect=i,this.optionChange.emit(this.dataModelSelect))}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new x,this.DataGetAll()}onActionSelectForce(i){}};p.\u0275fac=function(e){return new(e||p)(n(te),n(V),n(L),n(B),n(ie),n(ee),n(Z),n(X),n(z))},p.\u0275cmp=D({type:p,selectors:[["app-sms-apipath-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:11,vars:11,consts:[["treeTagControl",""],[3,"optionListTitle","optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-action",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,t){e&1&&(a(0,"app-cms-html-tree",1),I(1,"translate"),A(2,2),k(3,ae,4,6,"button",3),C(),A(4,4),m(5,"app-progress-spinner",5),a(6,"mat-tree",6,0),N(8,le,5,5,"mat-tree-node",7)(9,se,7,10,"mat-tree-node",8),c(),C(),H(10,9),c()),e&2&&(r("optionListTitle",P(1,9,"TABLE."+(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.moduleEntityName)))("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),o(3),w(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow?3:-1),o(2),r("optionsInfoAreaId",t.constructorInfoAreaId),o(),r("dataSource",t.dataSource)("childrenAccessor",t.childrenAccessor),o(3),r("matTreeNodeDefWhen",t.hasChild))},dependencies:[G,$,U,q,K,J,W,oe,ne,Y],encapsulation:2});var re=p;export{re as a};
