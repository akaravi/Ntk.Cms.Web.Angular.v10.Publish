import{a as ue}from"./chunk-OWDIM4AP.js";import{a as me}from"./chunk-JI72DBZ7.js";import{f as de}from"./chunk-HXH5Z4PQ.js";import{$ as le,$a as se,A as ie,J as oe,Q as re,Qb as ce,Rb as pe,Y as ne,aa as ae,n as Z,q as ee,u as te}from"./chunk-OXCCWIF2.js";import{Ab as H,Ca as A,Cd as J,F as D,Fa as n,Gd as K,Ha as L,I as k,Ib as j,Jc as z,Kb as G,Kc as W,Kd as y,Ld as Q,Nb as C,Oa as d,Ob as T,P,Pb as U,Q as V,Qc as $,Sa as N,Ud as X,Wb as S,Wd as Y,Ya as m,cc as u,da as g,db as q,dc as f,ea as M,jb as l,kb as a,lb as s,mb as p,nd as I,p as E,q as F,sd as b,tb as R,uf as _,vc as x,wb as v,yb as h,zb as B}from"./chunk-SG3IEC2T.js";import{i as w}from"./chunk-SEDBTTTN.js";var Ce=["*"];function Se(r,e){if(r&1&&(p(0,"img",14),u(1,"cmsthumbnail")),r&2){let t=h();l("src",S(f(1,2,t.dataModelSelect==null?null:t.dataModelSelect.linkMainImageIdSrc)),A)}}function ye(r,e){if(r&1&&(p(0,"img",14),u(1,"cmsthumbnail")),r&2){let t=h().$implicit;l("src",S(f(1,2,t.linkMainImageIdSrc)),A)}}function ge(r,e){if(r&1&&(a(0,"mat-option",15),m(1,ye,2,4,"img",4),a(2,"span"),C(3),s()()),r&2){let t=e.$implicit,i=h();l("value",t)("disabled",i.optionDisabled),n(),l("ngIf",t.linkMainImageIdSrc),n(2),T(i.displayOption(t))}}function Me(r,e){r&1&&p(0,"i",16)}function ve(r,e){r&1&&p(0,"i",17)}function Ie(r,e){if(r&1){let t=R();a(0,"i",18),v("click",function(){g(t);let o=h();return M(o.onActionSelectClear())}),s()}}function be(r,e){r&1&&(a(0,"em"),C(1),u(2,"translate"),s()),r&2&&(n(),U("(",f(2,1,"TITLE.Necessary"),")"))}var c=class c{constructor(e,t,i,o,O){this.coreEnumService=e;this.translate=t;this.cdr=i;this.publicHelper=o;this.categoryService=O;this.id=++c.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new K;this.dataModelSelect=new _;this.formControl=new te;this.optionDisabled=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionRequired=!1;this.optionChange=new L;this.optionReload=()=>this.onActionButtonReload();this.dateUseStore=!0;this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(P(""),D(1500),k(),V(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){return e?e.titleML:void 0}displayOption(e){return e?e.titleML:void 0}DataGetAll(e){return w(this,null,function*(){if(this.dateUseStore&&(this.dataModelResult=yield this.publicHelper.getCurrency(),this.dataModelResult.isSuccess))return this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.dataModelResult.listItems;let t=new Q;if(t.rowPerPage=20,t.accessLoad=!0,e&&e.length>0){let o=new y;o=new y,o.propertyName="Symbol",o.value=e,o.searchType=b.Contains,o.clauseType=I.Or,t.filters.push(o),o=new y,o.propertyName="title",o.value=e,o.searchType=b.Contains,o.clauseType=I.Or,t.filters.push(o),e&&typeof+e=="number"&&+e>0&&(o=new y,o.propertyName="id",o.value=e,o.searchType=b.Equal,o.clauseType=I.Or,t.filters.push(o))}let i=this.constructor.name+"ServiceGetAll";return this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(i,o,this.constructorInfoAreaId)}),this.categoryService.setAccessDataType(J.Viewer),yield E(this.categoryService.ServiceGetAll(t)).then(o=>(this.dataModelResult=o,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(i),o.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe(F(t=>(t.find(i=>i.id===e.id)||t.push(e),t)))}onActionSelectForce(e){if(typeof e=="number"&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(t=>t.id===e)){let t=this.dataModelResult.listItems.find(i=>i.id===e);this.dataModelSelect=t,this.formControl.setValue(t);return}this.categoryService.ServiceGetOneById(e).subscribe({next:t=>{t.isSuccess&&(this.filteredOptions=this.push(t.item),this.dataModelSelect=t.item,this.formControl.setValue(t.item),this.optionChange.emit(t.item))}});return}if(typeof e==typeof _){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new _,this.loadOptions()}};c.nextId=0,c.\u0275fac=function(t){return new(t||c)(d(X),d(ce),d(x),d(de),d(Y))},c.\u0275cmp=N({type:c,selectors:[["app-cms-currency-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionRequired:"optionRequired",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:Ce,decls:19,vars:23,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["matPrefix",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required"],["for","forminput",1,"color-highlight"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(t,i){if(t&1){let o=R();B(),a(0,"div",1),p(1,"app-progress-spinner",2),a(2,"span",3),m(3,Se,2,4,"img",4),C(4," \xA0"),s(),p(5,"input",5),a(6,"label",6),C(7),s(),a(8,"mat-autocomplete",7,0),v("optionSelected",function(he){return g(o),M(i.onActionSelect(he.option.value))}),m(10,ge,4,4,"mat-option",8),u(11,"async"),s(),m(12,Me,1,0,"i",9)(13,ve,1,0,"i",10)(14,Ie,1,0,"i",11),a(15,"i",12),u(16,"translate"),v("click",function(){return g(o),M(i.onActionButtonReload())}),s(),m(17,be,3,3,"em",13),H(18),s()}if(t&2){let o=j(9);n(),l("optionsInfoAreaId",i.constructor.name),n(2),l("ngIf",i.dataModelSelect&&(i.dataModelSelect==null?null:i.dataModelSelect.linkMainImageIdSrc)),n(2),l("placeholder",S(i.optionPlaceholder))("formControl",i.formControl)("matAutocomplete",o)("required",i.optionRequired),q("disabled",i.optionDisabled?!0:null),n(2),T(i.optionLabel),n(),l("displayWith",i.displayFn),n(2),l("ngForOf",f(11,19,i.filteredOptions)),n(2),l("ngIf",!i.formControl.valid),n(),l("ngIf",i.optionRequired&&i.formControl.valid),n(),l("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),n(),G("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),l("title",S(f(16,21,"ACTION.RELOAD"))),n(2),l("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[z,W,Z,ee,oe,ie,le,re,ae,ne,se,me,$,pe,ue],encapsulation:2});var fe=c;export{fe as a};
