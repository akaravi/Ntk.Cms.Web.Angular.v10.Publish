import{a as Ae}from"./chunk-SQSNRAQO.js";import{a as Ut}from"./chunk-RB4HHXMX.js";import"./chunk-M6VMB2VP.js";import"./chunk-FNI7GNBM.js";import"./chunk-HYCJ4UQO.js";import"./chunk-VNSNQBSP.js";import"./chunk-C5ZBHCDB.js";import{a as Re}from"./chunk-IUA4WVGX.js";import{a as bt}from"./chunk-JCUWFHRI.js";import"./chunk-S32XVBWW.js";import"./chunk-ULRZIL6D.js";import{a as Tt}from"./chunk-Z7LLDNBU.js";import{a as At}from"./chunk-YVXHHNGT.js";import{a as xt}from"./chunk-3OXB4ASU.js";import{c as vt,d as Et,e as yt,g as Rt}from"./chunk-QM2ZNJ2D.js";import{a as It}from"./chunk-NBLOFTCW.js";import{a as Ee}from"./chunk-TFQRKJMQ.js";import{c as Mt}from"./chunk-WSRBIPMR.js";import{a as wt}from"./chunk-R5M5JHUG.js";import{a as ye}from"./chunk-N2KKMXOT.js";import"./chunk-ACTYMGGL.js";import{a as ve}from"./chunk-AM4TJVH7.js";import{a as Ie}from"./chunk-BTN5MJ5N.js";import{Ab as ot,Bb as nt,Bc as gt,Cb as rt,Dc as z,Ha as Se,Ia as _e,Ja as ze,Jb as at,Kb as st,L as fe,Lb as lt,M as he,Mb as ct,Nb as dt,O as Ge,Ob as pt,P as qe,Pa as Je,Pb as mt,Qb as ut,R as Ce,Rb as ft,Sb as ht,fc as H,gc as j,ma as q,n as se,o as le,oa as Qe,r as ce,s as de,u as pe,ub as et,uc as Ct,vb as tt,vc as Q,w as me,x as ue,xc as St,yb as it,zc as _t}from"./chunk-QGGCLMQI.js";import{m as $e}from"./chunk-WNRZ34IP.js";import{a as ee}from"./chunk-OP2H2BS3.js";import{$d as Me,Bb as ne,Cb as re,Cf as W,Db as ae,Ed as Ke,Fa as o,Gd as Z,Hb as T,Hc as ke,Jb as De,Jc as G,Ka as E,Kd as Xe,Mb as p,Nb as x,Nc as Le,Nd as Ye,Ob as m,Od as $,Pa as L,Pc as Fe,Qa as oe,Sb as w,Sd as O,Ta as F,Tb as M,Td as ge,Ub as I,Ud as we,Va as y,Vb as U,Vc as Pe,X as ie,Zb as Be,_b as Ve,bc as _,ca as u,cc as g,da as f,de as Ze,ib as d,jb as s,kb as r,lb as h,pb as A,pd as He,qb as b,qe as D,rb as We,rd as je,sb as S,uc as P,vb as R,vd as Ne,xb as l}from"./chunk-MDNBQXON.js";import{i as Oe}from"./chunk-SEDBTTTN.js";var Kt=["vform"];function Xt(i,c){if(i&1){let e=S();s(0,"app-cms-enum-record-status-selector",14),I("modelChange",function(t){u(e);let n=l();return M(n.dataModel.recordStatus,t)||(n.dataModel.recordStatus=t),f(t)}),r()}if(i&2){let e=l();w("model",e.dataModel.recordStatus),d("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Yt(i,c){if(i&1&&(s(0,"mat-error"),p(1),s(2,"strong"),p(3),_(4,"translate"),r()()),i&2){let e=l(2);o(),m(" ",e.fieldsInfo.moduleName==null?null:e.fieldsInfo.moduleName.fieldTitle," "),o(2),x(g(4,2,"MESSAGE.required"))}}function Zt(i,c){if(i&1){let e=S();s(0,"div",15)(1,"label",16),p(2),r(),s(3,"input",17,1),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.moduleName,t)||(n.dataModel.moduleName=t),f(t)}),r(),s(5,"em"),p(6),r(),y(7,Yt,5,4,"mat-error",18),r()}if(i&2){let e=T(4),a=l();o(2),x(a.fieldsInfo.moduleName==null?null:a.fieldsInfo.moduleName.fieldTitle),o(),d("disabled",U(!(a.fieldsInfo.moduleName!=null&&a.fieldsInfo.moduleName.accessAddField)))("placeholder",U(a.fieldsInfo.moduleName==null?null:a.fieldsInfo.moduleName.fieldTitle)),w("ngModel",a.dataModel.moduleName),o(3),m("",e.value.length," / 100"),o(),d("ngIf",e.errors==null?null:e.errors.required)}}function $t(i,c){if(i&1&&(s(0,"mat-error"),p(1),s(2,"strong"),p(3),_(4,"translate"),r()()),i&2){let e=l(2);o(),m(" ",e.fieldsInfo.moduleEntityName==null?null:e.fieldsInfo.moduleEntityName.fieldTitle," "),o(2),x(g(4,2,"MESSAGE.required"))}}function ei(i,c){if(i&1){let e=S();s(0,"div",15)(1,"label",19),p(2),r(),s(3,"input",20,2),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.moduleEntityName,t)||(n.dataModel.moduleEntityName=t),f(t)}),r(),s(5,"em"),p(6),r(),y(7,$t,5,4,"mat-error",18),r()}if(i&2){let e=T(4),a=l();o(2),x(a.fieldsInfo.moduleEntityName==null?null:a.fieldsInfo.moduleEntityName.fieldTitle),o(),d("disabled",U(!(a.fieldsInfo.moduleEntityName!=null&&a.fieldsInfo.moduleEntityName.accessAddField)))("placeholder",U(a.fieldsInfo.moduleEntityName==null?null:a.fieldsInfo.moduleEntityName.fieldTitle)),w("ngModel",a.dataModel.moduleEntityName),o(3),m("",e.value.length," / 100"),o(),d("ngIf",e.errors==null?null:e.errors.required)}}function ti(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",23),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",26),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessDeleteRow,t)||(n.dataModel.accessDeleteRow=t),f(t)}),r(),h(7,"label",27),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessDeleteRow==null?null:e.fieldsInfo.accessDeleteRow.fieldTitle),o(3),w("ngModel",e.dataModel.accessDeleteRow)}}function ii(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",28),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",29),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessWatchRow,t)||(n.dataModel.accessWatchRow=t),f(t)}),r(),h(7,"label",30),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessWatchRow==null?null:e.fieldsInfo.accessWatchRow.fieldTitle),o(3),w("ngModel",e.dataModel.accessWatchRow)}}function oi(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",31),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",32),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessCountRow,t)||(n.dataModel.accessCountRow=t),f(t)}),r(),h(7,"label",33),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessCountRow==null?null:e.fieldsInfo.accessCountRow.fieldTitle),o(3),w("ngModel",e.dataModel.accessCountRow)}}function ni(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",34),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",35),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessEditRow,t)||(n.dataModel.accessEditRow=t),f(t)}),r(),h(7,"label",36),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessEditRow==null?null:e.fieldsInfo.accessEditRow.fieldTitle),o(3),w("ngModel",e.dataModel.accessEditRow)}}function ri(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",37),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",38),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessAddRow,t)||(n.dataModel.accessAddRow=t),f(t)}),r(),h(7,"label",39),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessAddRow==null?null:e.fieldsInfo.accessAddRow.fieldTitle),o(3),w("ngModel",e.dataModel.accessAddRow)}}function ai(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",40),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",41),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessExportFile,t)||(n.dataModel.accessExportFile=t),f(t)}),r(),h(7,"label",42),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessExportFile==null?null:e.fieldsInfo.accessExportFile.fieldTitle),o(3),w("ngModel",e.dataModel.accessExportFile)}}function si(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",43),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",44),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessWatchRowOtherSiteId,t)||(n.dataModel.accessWatchRowOtherSiteId=t),f(t)}),r(),h(7,"label",45),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessWatchRowOtherSiteId==null?null:e.fieldsInfo.accessWatchRowOtherSiteId.fieldTitle),o(3),w("ngModel",e.dataModel.accessWatchRowOtherSiteId)}}function li(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",46),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",47),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessWatchRowOtherCreatedBy,t)||(n.dataModel.accessWatchRowOtherCreatedBy=t),f(t)}),r(),h(7,"label",48),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessWatchRowOtherCreatedBy==null?null:e.fieldsInfo.accessWatchRowOtherCreatedBy.fieldTitle),o(3),w("ngModel",e.dataModel.accessWatchRowOtherCreatedBy)}}function ci(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",49),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",50),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessCountRowOtherSiteId,t)||(n.dataModel.accessCountRowOtherSiteId=t),f(t)}),r(),h(7,"label",51),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessCountRowOtherSiteId==null?null:e.fieldsInfo.accessCountRowOtherSiteId.fieldTitle),o(3),w("ngModel",e.dataModel.accessCountRowOtherSiteId)}}function di(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",52),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",53),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessCountRowOtherCreatedBy,t)||(n.dataModel.accessCountRowOtherCreatedBy=t),f(t)}),r(),h(7,"label",54),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessCountRowOtherCreatedBy==null?null:e.fieldsInfo.accessCountRowOtherCreatedBy.fieldTitle),o(3),w("ngModel",e.dataModel.accessCountRowOtherCreatedBy)}}function pi(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",55),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",56),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessEditRowOtherSiteId,t)||(n.dataModel.accessEditRowOtherSiteId=t),f(t)}),r(),h(7,"label",57),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessEditRowOtherSiteId==null?null:e.fieldsInfo.accessEditRowOtherSiteId.fieldTitle),o(3),w("ngModel",e.dataModel.accessEditRowOtherSiteId)}}function mi(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",58),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",59),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessEditRowOtherCreatedBy,t)||(n.dataModel.accessEditRowOtherCreatedBy=t),f(t)}),r(),h(7,"label",60),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessEditRowOtherCreatedBy==null?null:e.fieldsInfo.accessEditRowOtherCreatedBy.fieldTitle),o(3),w("ngModel",e.dataModel.accessEditRowOtherCreatedBy)}}function ui(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",61),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",62),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessDeleteRowOtherCreatedBy,t)||(n.dataModel.accessDeleteRowOtherCreatedBy=t),f(t)}),r(),h(7,"label",63),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessDeleteRowOtherCreatedBy==null?null:e.fieldsInfo.accessDeleteRowOtherCreatedBy.fieldTitle),o(3),w("ngModel",e.dataModel.accessDeleteRowOtherCreatedBy)}}function fi(i,c){if(i&1){let e=S();s(0,"div",64)(1,"button",65),R("click",function(){u(e);let t=l();return f(t.onFormCancel())}),h(2,"i",66),p(3),_(4,"translate"),r(),s(5,"button",67),h(6,"i",68),p(7),_(8,"translate"),r()()}if(i&2){l();let e=T(9);o(3),m(" ",g(4,3,"ACTION.CANCEL")," "),o(2),d("disabled",!e.form.valid),o(2),m(" ",g(8,5,"ACTION.SAVE")," ")}}var J=class J extends wt{constructor(e,a,t,n,v,C,k,Y){super(n,new W,C,Y);this.data=e;this.dialogRef=a;this.coreEnumService=t;this.coreUserSupportAccessService=n;this.cmsToastrService=v;this.publicHelper=C;this.cdr=k;this.translate=Y;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.appLanguage="fa";this.dataModelResult=new $;this.dataModel=new W;this.formInfo=new we;this.dataModelEnumManageUserAccessUserTypesResult=new $;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.dataModel.linkSiteId=+e.linkSiteId||0,this.dataModel.linkUserId=+e.linkUserId||0,this.dataModel.moduleName=e.moduleName,this.dataModel.moduleEntityName=e.moduleEntityName)}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(e=>{this.formInfo.formTitle=e}),this.getEnumManageUserAccessUserTypes(),this.DataGetAccess()}getEnumManageUserAccessUserTypes(){this.coreEnumService.ServiceManageUserAccessUserTypesEnum().subscribe({next:e=>{this.dataModelEnumManageUserAccessUserTypesResult=e}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(a=>{this.formInfo.formAlert=a}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(a=>{this.publicHelper.processService.processStart(e,a,this.constructorInfoAreaId)}),this.coreUserSupportAccessService.ServiceAdd(this.dataModel).subscribe({next:a=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=a,a.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=a.errorMessage,this.cmsToastrService.typeErrorMessage(a.errorMessage)),this.publicHelper.processService.processStop(e)},error:a=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(a),this.publicHelper.processService.processStop(e,!1)}})}onActionSelectorModuleEntitySelect(e){this.dataModel.moduleName="",this.dataModel.moduleEntityName="",e&&e.id>0&&(this.dataModel.moduleName=e.moduleName,this.dataModel.moduleEntityName=e.moduleEntityName)}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};J.\u0275fac=function(a){return new(a||J)(E(_e),E(Se),E(Me),E(D),E(Q),E(z),E(P),E(H))},J.\u0275cmp=L({type:J,selectors:[["app-core-user-support-access-add"]],viewQuery:function(a,t){if(a&1&&ne(Kt,5),a&2){let n;re(n=ae())&&(t.formGroup=n.first)}},standalone:!1,features:[F],decls:34,vars:36,consts:[["vform","ngForm"],["ModuleName",""],["ModuleEntityName",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[3,"optionChange","optionDisabled","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","d-flex mb-3",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleName","minlength","3","maxlength","100","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[4,"ngIf"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityName","minlength","3","maxlength","100","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.accessDeleteRow",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.accessDeleteRow","name","dataModel.accessDeleteRow",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessDeleteRow",1,"custom-control-label"],["data-trigger-switch","dataModel.accessWatchRow",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessWatchRow","name","dataModel.accessWatchRow",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessWatchRow",1,"custom-control-label"],["data-trigger-switch","dataModel.accessCountRow",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessCountRow","name","dataModel.accessCountRow",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessCountRow",1,"custom-control-label"],["data-trigger-switch","dataModel.accessEditRow",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessEditRow","name","dataModel.accessEditRow",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessEditRow",1,"custom-control-label"],["data-trigger-switch","dataModel.accessAddRow",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessAddRow","name","dataModel.accessAddRow",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessAddRow",1,"custom-control-label"],["data-trigger-switch","dataModel.accessExportFile",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessExportFile","name","dataModel.accessExportFile",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessExportFile",1,"custom-control-label"],["data-trigger-switch","dataModel.accessWatchRowOtherSiteId",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessWatchRowOtherSiteId","name","dataModel.accessWatchRowOtherSiteId",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessWatchRowOtherSiteId",1,"custom-control-label"],["data-trigger-switch","dataModel.accessWatchRowOtherCreatedBy",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessWatchRowOtherCreatedBy","name","dataModel.accessWatchRowOtherCreatedBy",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessWatchRowOtherCreatedBy",1,"custom-control-label"],["data-trigger-switch","dataModel.accessCountRowOtherSiteId",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessCountRowOtherSiteId","name","dataModel.accessCountRowOtherSiteId",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessCountRowOtherSiteId",1,"custom-control-label"],["data-trigger-switch","dataModel.accessCountRowOtherCreatedBy",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessCountRowOtherCreatedBy","name","dataModel.accessCountRowOtherCreatedBy",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessCountRowOtherCreatedBy",1,"custom-control-label"],["data-trigger-switch","dataModel.accessEditRowOtherSiteId",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessEditRowOtherSiteId","name","dataModel.accessEditRowOtherSiteId",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessEditRowOtherSiteId",1,"custom-control-label"],["data-trigger-switch","dataModel.accessEditRowOtherCreatedBy",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessEditRowOtherCreatedBy","name","dataModel.accessEditRowOtherCreatedBy",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessEditRowOtherCreatedBy",1,"custom-control-label"],["data-trigger-switch","dataModel.accessDeleteRowOtherCreatedBy",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessDeleteRowOtherCreatedBy","name","dataModel.accessDeleteRowOtherCreatedBy",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessDeleteRowOtherCreatedBy",1,"custom-control-label"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(a,t){if(a&1){let n=S();s(0,"div",3),h(1,"app-progress-spinner",4),s(2,"div",5)(3,"p",6),p(4),r(),s(5,"p"),p(6),_(7,"translate"),r(),s(8,"form",7,0),R("ngSubmit",function(){return u(n),f(t.onFormSubmit())}),y(10,Xt,1,5,"app-cms-enum-record-status-selector",8),h(11,"app-cms-site-selector",9),_(12,"translate"),h(13,"app-cms-user-selector",9),_(14,"translate"),s(15,"app-core-module-entity-selector",10),_(16,"translate"),R("optionChange",function(C){return u(n),f(t.onActionSelectorModuleEntitySelect(C))}),r(),y(17,Zt,8,8,"div",11)(18,ei,8,8,"div",11),h(19,"hr"),y(20,ti,8,2,"div",12)(21,ii,8,2,"div",12)(22,oi,8,2,"div",12)(23,ni,8,2,"div",12)(24,ri,8,2,"div",12)(25,ai,8,2,"div",12)(26,si,8,2,"div",12)(27,li,8,2,"div",12)(28,ci,8,2,"div",12)(29,di,8,2,"div",12)(30,pi,8,2,"div",12)(31,mi,8,2,"div",12)(32,ui,8,2,"div",12)(33,fi,9,7,"div",13),r()()()}a&2&&(o(),d("optionsInfoAreaId",t.constructorInfoAreaId),o(3),m(" ",t.formInfo.formTitle," "),o(2),m(" ",g(7,28,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),d("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),d("optionDisabled",!(t.fieldsInfo.moduleName!=null&&t.fieldsInfo.moduleName.accessAddField))("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",g(12,30,"TITLE.WEBSITE")),o(2),d("optionDisabled",!(t.fieldsInfo.moduleName!=null&&t.fieldsInfo.moduleName.accessAddField))("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",g(14,32,"TITLE.USER")),o(2),d("optionDisabled",!(t.fieldsInfo.moduleName!=null&&t.fieldsInfo.moduleName.accessAddField))("optionPlaceholder",g(16,34,"TITLE.MODULE")),o(2),d("ngIf",t.fieldsInfo.moduleName==null?null:t.fieldsInfo.moduleName.accessWatchField),o(),d("ngIf",t.fieldsInfo.moduleEntityName==null?null:t.fieldsInfo.moduleEntityName.accessWatchField),o(2),d("ngIf",t.fieldsInfo.accessDeleteRow==null?null:t.fieldsInfo.accessDeleteRow.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessWatchRow==null?null:t.fieldsInfo.accessWatchRow.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessCountRow==null?null:t.fieldsInfo.accessCountRow.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessEditRow==null?null:t.fieldsInfo.accessEditRow.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessAddRow==null?null:t.fieldsInfo.accessAddRow.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessExportFile==null?null:t.fieldsInfo.accessExportFile.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessWatchRowOtherSiteId==null?null:t.fieldsInfo.accessWatchRowOtherSiteId.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessWatchRowOtherCreatedBy==null?null:t.fieldsInfo.accessWatchRowOtherCreatedBy.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessCountRowOtherSiteId==null?null:t.fieldsInfo.accessCountRowOtherSiteId.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessCountRowOtherCreatedBy==null?null:t.fieldsInfo.accessCountRowOtherCreatedBy.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessEditRowOtherSiteId==null?null:t.fieldsInfo.accessEditRowOtherSiteId.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessEditRowOtherCreatedBy==null?null:t.fieldsInfo.accessEditRowOtherCreatedBy.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessDeleteRowOtherCreatedBy==null?null:t.fieldsInfo.accessDeleteRowOtherCreatedBy.accessWatchField),o(),d("ngIf",t.formInfo.formSubmitAllow))},dependencies:[G,ue,le,se,ce,de,fe,he,me,pe,Ce,q,Ee,ye,Re,Ie,Ae,j],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var be=J;var hi=["vform"];function Ci(i,c){if(i&1){let e=S();s(0,"app-cms-enum-record-status-selector",14),I("modelChange",function(t){u(e);let n=l();return M(n.dataModel.recordStatus,t)||(n.dataModel.recordStatus=t),f(t)}),r()}if(i&2){let e=l();w("model",e.dataModel.recordStatus),d("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Si(i,c){if(i&1&&(s(0,"mat-error"),p(1),s(2,"strong"),p(3),_(4,"translate"),r()()),i&2){let e=l(2);o(),m(" ",e.fieldsInfo.moduleName==null?null:e.fieldsInfo.moduleName.fieldTitle," "),o(2),x(g(4,2,"MESSAGE.required"))}}function _i(i,c){if(i&1){let e=S();s(0,"div",15)(1,"label",16),p(2),r(),s(3,"input",17,1),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.moduleName,t)||(n.dataModel.moduleName=t),f(t)}),r(),s(5,"em"),p(6),r(),y(7,Si,5,4,"mat-error",18),r()}if(i&2){let e=T(4),a=l();o(2),x(a.fieldsInfo.moduleName==null?null:a.fieldsInfo.moduleName.fieldTitle),o(),d("disabled",U(!(a.fieldsInfo.moduleName!=null&&a.fieldsInfo.moduleName.accessEditField)))("placeholder",U(a.fieldsInfo.moduleName==null?null:a.fieldsInfo.moduleName.fieldTitle)),w("ngModel",a.dataModel.moduleName),o(3),m("",e.value.length," / 100"),o(),d("ngIf",e.errors==null?null:e.errors.required)}}function gi(i,c){if(i&1&&(s(0,"mat-error"),p(1),s(2,"strong"),p(3),_(4,"translate"),r()()),i&2){let e=l(2);o(),m(" ",e.fieldsInfo.moduleEntityName==null?null:e.fieldsInfo.moduleEntityName.fieldTitle," "),o(2),x(g(4,2,"MESSAGE.required"))}}function wi(i,c){if(i&1){let e=S();s(0,"div",15)(1,"label",19),p(2),r(),s(3,"input",20,2),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.moduleEntityName,t)||(n.dataModel.moduleEntityName=t),f(t)}),r(),s(5,"em"),p(6),r(),y(7,gi,5,4,"mat-error",18),r()}if(i&2){let e=T(4),a=l();o(2),x(a.fieldsInfo.moduleEntityName==null?null:a.fieldsInfo.moduleEntityName.fieldTitle),o(),d("disabled",U(!(a.fieldsInfo.moduleEntityName!=null&&a.fieldsInfo.moduleEntityName.accessEditField)))("placeholder",U(a.fieldsInfo.moduleEntityName==null?null:a.fieldsInfo.moduleEntityName.fieldTitle)),w("ngModel",a.dataModel.moduleEntityName),o(3),m("",e.value.length," / 100"),o(),d("ngIf",e.errors==null?null:e.errors.required)}}function Mi(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",23),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",26),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessDeleteRow,t)||(n.dataModel.accessDeleteRow=t),f(t)}),r(),h(7,"label",27),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessDeleteRow==null?null:e.fieldsInfo.accessDeleteRow.fieldTitle),o(3),w("ngModel",e.dataModel.accessDeleteRow)}}function Ii(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",28),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",29),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessWatchRow,t)||(n.dataModel.accessWatchRow=t),f(t)}),r(),h(7,"label",30),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessWatchRow==null?null:e.fieldsInfo.accessWatchRow.fieldTitle),o(3),w("ngModel",e.dataModel.accessWatchRow)}}function vi(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",31),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",32),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessCountRow,t)||(n.dataModel.accessCountRow=t),f(t)}),r(),h(7,"label",33),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessCountRow==null?null:e.fieldsInfo.accessCountRow.fieldTitle),o(3),w("ngModel",e.dataModel.accessCountRow)}}function Ei(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",34),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",35),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessEditRow,t)||(n.dataModel.accessEditRow=t),f(t)}),r(),h(7,"label",36),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessEditRow==null?null:e.fieldsInfo.accessEditRow.fieldTitle),o(3),w("ngModel",e.dataModel.accessEditRow)}}function yi(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",37),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",38),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessAddRow,t)||(n.dataModel.accessAddRow=t),f(t)}),r(),h(7,"label",39),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessAddRow==null?null:e.fieldsInfo.accessAddRow.fieldTitle),o(3),w("ngModel",e.dataModel.accessAddRow)}}function Ri(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",40),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",41),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessExportFile,t)||(n.dataModel.accessExportFile=t),f(t)}),r(),h(7,"label",42),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessExportFile==null?null:e.fieldsInfo.accessExportFile.fieldTitle),o(3),w("ngModel",e.dataModel.accessExportFile)}}function Ai(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",43),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",44),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessWatchRowOtherSiteId,t)||(n.dataModel.accessWatchRowOtherSiteId=t),f(t)}),r(),h(7,"label",45),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessWatchRowOtherSiteId==null?null:e.fieldsInfo.accessWatchRowOtherSiteId.fieldTitle),o(3),w("ngModel",e.dataModel.accessWatchRowOtherSiteId)}}function bi(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",46),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",47),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessWatchRowOtherCreatedBy,t)||(n.dataModel.accessWatchRowOtherCreatedBy=t),f(t)}),r(),h(7,"label",48),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessWatchRowOtherCreatedBy==null?null:e.fieldsInfo.accessWatchRowOtherCreatedBy.fieldTitle),o(3),w("ngModel",e.dataModel.accessWatchRowOtherCreatedBy)}}function xi(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",49),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",50),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessCountRowOtherSiteId,t)||(n.dataModel.accessCountRowOtherSiteId=t),f(t)}),r(),h(7,"label",51),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessCountRowOtherSiteId==null?null:e.fieldsInfo.accessCountRowOtherSiteId.fieldTitle),o(3),w("ngModel",e.dataModel.accessCountRowOtherSiteId)}}function Ti(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",52),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",53),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessCountRowOtherCreatedBy,t)||(n.dataModel.accessCountRowOtherCreatedBy=t),f(t)}),r(),h(7,"label",54),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessCountRowOtherCreatedBy==null?null:e.fieldsInfo.accessCountRowOtherCreatedBy.fieldTitle),o(3),w("ngModel",e.dataModel.accessCountRowOtherCreatedBy)}}function Ui(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",55),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",56),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessEditRowOtherSiteId,t)||(n.dataModel.accessEditRowOtherSiteId=t),f(t)}),r(),h(7,"label",57),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessEditRowOtherSiteId==null?null:e.fieldsInfo.accessEditRowOtherSiteId.fieldTitle),o(3),w("ngModel",e.dataModel.accessEditRowOtherSiteId)}}function Ni(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",58),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",59),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessEditRowOtherCreatedBy,t)||(n.dataModel.accessEditRowOtherCreatedBy=t),f(t)}),r(),h(7,"label",60),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessEditRowOtherCreatedBy==null?null:e.fieldsInfo.accessEditRowOtherCreatedBy.fieldTitle),o(3),w("ngModel",e.dataModel.accessEditRowOtherCreatedBy)}}function Oi(i,c){if(i&1){let e=S();s(0,"div",21)(1,"div",22)(2,"h5",61),p(3),r()(),s(4,"div",24)(5,"div",25)(6,"input",62),I("ngModelChange",function(t){u(e);let n=l();return M(n.dataModel.accessDeleteRowOtherCreatedBy,t)||(n.dataModel.accessDeleteRowOtherCreatedBy=t),f(t)}),r(),h(7,"label",63),r()()()}if(i&2){let e=l();o(3),m(" ",e.fieldsInfo.accessDeleteRowOtherCreatedBy==null?null:e.fieldsInfo.accessDeleteRowOtherCreatedBy.fieldTitle),o(3),w("ngModel",e.dataModel.accessDeleteRowOtherCreatedBy)}}function Wi(i,c){if(i&1){let e=S();s(0,"div",64)(1,"button",65),R("click",function(){u(e);let t=l();return f(t.onFormCancel())}),h(2,"i",66),p(3),_(4,"translate"),r(),s(5,"button",67),h(6,"i",68),p(7),_(8,"translate"),r()()}if(i&2){l();let e=T(9);o(3),m(" ",g(4,3,"ACTION.CANCEL")," "),o(2),d("disabled",!e.form.valid),o(2),m(" ",g(8,5,"ACTION.SAVE")," ")}}var K=class K extends It{constructor(e,a,t,n,v,C,k,Y){super(n,new W,C,Y);this.data=e;this.dialogRef=a;this.coreEnumService=t;this.coreUserSupportAccessService=n;this.cmsToastrService=v;this.publicHelper=C;this.cdr=k;this.translate=Y;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestModuleName="";this.requestModuleEntityName="";this.constructorInfoAreaId=this.constructor.name;this.appLanguage="fa";this.dataModelResult=new Ye;this.dataModel=new W;this.formInfo=new we;this.dataModelEnumManageUserAccessUserTypesResult=new $;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestLinkSiteId=+e.linkSiteId||0,this.requestLinkUserId=+e.linkUserId||0,this.requestModuleName=e.moduleName,this.requestModuleEntityName=e.moduleEntityName),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestLinkSiteId>0&&this.requestLinkUserId>0&&this.requestModuleName&&this.requestModuleName.length>0&&this.requestModuleEntityName&&this.requestModuleEntityName.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.getEnumManageUserAccessUserTypes()}getEnumManageUserAccessUserTypes(){this.coreEnumService.ServiceManageUserAccessUserTypesEnum().subscribe({next:e=>{this.dataModelEnumManageUserAccessUserTypesResult=e}})}DataGetOneContent(){if(this.requestLinkSiteId<=0||this.requestLinkUserId<=0||!this.requestModuleName||this.requestModuleName.length==0||!this.requestModuleEntityName||this.requestModuleEntityName.length<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(n=>{this.formInfo.formAlert=n}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(n=>{this.publicHelper.processService.processStart(e,n,this.constructorInfoAreaId)});let a=new ge,t=new O;t.propertyName="LinkSiteId",t.value=this.requestLinkSiteId,a.filters.push(t),t=new O,t.propertyName="LinkUserId",t.value=this.requestLinkUserId,a.filters.push(t),t=new O,t.propertyName="ModuleName",t.value=this.requestModuleName,a.filters.push(t),t=new O,t.propertyName="ModuleEntityName",t.value=this.requestModuleEntityName,a.filters.push(t),this.coreUserSupportAccessService.setAccessLoad(),this.coreUserSupportAccessService.setAccessDataType(Xe.Editor),this.coreUserSupportAccessService.ServiceGetAll(a).subscribe({next:n=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(n.access),n.isSuccess?n.listItems&&n.listItems.length>0?(this.dataModel=n.listItems[0],this.formInfo.formAlert=""):this.translate.get("MESSAGE.Module_not_found_for_editing").subscribe(v=>{this.cmsToastrService.typeError(v)}):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(v=>{this.formInfo.formAlert=v}),this.formInfo.formError=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.publicHelper.processService.processStop(e)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(a=>{this.formInfo.formAlert=a}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(a=>{this.publicHelper.processService.processStart(e,a,this.constructorInfoAreaId)}),this.coreUserSupportAccessService.ServiceEdit(this.dataModel).subscribe({next:a=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=a,a.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=a.errorMessage,this.cmsToastrService.typeErrorMessage(a.errorMessage)),this.publicHelper.processService.processStop(e)},error:a=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(a),this.publicHelper.processService.processStop(e,!1)}})}onActionSelectorModuleEntitySelect(e){this.dataModel.moduleName="",this.dataModel.moduleEntityName="",e&&e.id>0&&(this.dataModel.moduleName=e.moduleName,this.dataModel.moduleEntityName=e.moduleEntityName)}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};K.\u0275fac=function(a){return new(a||K)(E(_e),E(Se),E(Me),E(D),E(Q),E(z),E(P),E(H))},K.\u0275cmp=L({type:K,selectors:[["app-core-user-support-access-edit"]],viewQuery:function(a,t){if(a&1&&ne(hi,5),a&2){let n;re(n=ae())&&(t.formGroup=n.first)}},standalone:!1,features:[F],decls:33,vars:36,consts:[["vform","ngForm"],["ModuleName",""],["ModuleEntityName",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[3,"optionChange","optionDisabled","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","d-flex mb-3",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleName","minlength","3","maxlength","100","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[4,"ngIf"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityName","minlength","3","maxlength","100","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.accessDeleteRow",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.accessDeleteRow","name","dataModel.accessDeleteRow",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessDeleteRow",1,"custom-control-label"],["data-trigger-switch","dataModel.accessWatchRow",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessWatchRow","name","dataModel.accessWatchRow",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessWatchRow",1,"custom-control-label"],["data-trigger-switch","dataModel.accessCountRow",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessCountRow","name","dataModel.accessCountRow",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessCountRow",1,"custom-control-label"],["data-trigger-switch","dataModel.accessEditRow",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessEditRow","name","dataModel.accessEditRow",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessEditRow",1,"custom-control-label"],["data-trigger-switch","dataModel.accessAddRow",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessAddRow","name","dataModel.accessAddRow",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessAddRow",1,"custom-control-label"],["data-trigger-switch","dataModel.accessExportFile",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessExportFile","name","dataModel.accessExportFile",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessExportFile",1,"custom-control-label"],["data-trigger-switch","dataModel.accessWatchRowOtherSiteId",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessWatchRowOtherSiteId","name","dataModel.accessWatchRowOtherSiteId",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessWatchRowOtherSiteId",1,"custom-control-label"],["data-trigger-switch","dataModel.accessWatchRowOtherCreatedBy",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessWatchRowOtherCreatedBy","name","dataModel.accessWatchRowOtherCreatedBy",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessWatchRowOtherCreatedBy",1,"custom-control-label"],["data-trigger-switch","dataModel.accessCountRowOtherSiteId",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessCountRowOtherSiteId","name","dataModel.accessCountRowOtherSiteId",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessCountRowOtherSiteId",1,"custom-control-label"],["data-trigger-switch","dataModel.accessCountRowOtherCreatedBy",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessCountRowOtherCreatedBy","name","dataModel.accessCountRowOtherCreatedBy",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessCountRowOtherCreatedBy",1,"custom-control-label"],["data-trigger-switch","dataModel.accessEditRowOtherSiteId",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessEditRowOtherSiteId","name","dataModel.accessEditRowOtherSiteId",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessEditRowOtherSiteId",1,"custom-control-label"],["data-trigger-switch","dataModel.accessEditRowOtherCreatedBy",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessEditRowOtherCreatedBy","name","dataModel.accessEditRowOtherCreatedBy",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessEditRowOtherCreatedBy",1,"custom-control-label"],["data-trigger-switch","dataModel.accessDeleteRowOtherCreatedBy",1,"font-600","font-14"],["type","checkbox","id","dataModel.accessDeleteRowOtherCreatedBy","name","dataModel.accessDeleteRowOtherCreatedBy",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.accessDeleteRowOtherCreatedBy",1,"custom-control-label"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(a,t){if(a&1){let n=S();s(0,"div",3),h(1,"app-progress-spinner",4),s(2,"div",5)(3,"p",6),p(4),r(),s(5,"p"),p(6),_(7,"translate"),r(),s(8,"form",7,0),R("ngSubmit",function(){return u(n),f(t.onFormSubmit())}),y(10,Ci,1,5,"app-cms-enum-record-status-selector",8),h(11,"app-cms-site-selector",9),_(12,"translate"),h(13,"app-cms-user-selector",9),_(14,"translate"),s(15,"app-core-module-entity-selector",10),_(16,"translate"),R("optionChange",function(C){return u(n),f(t.onActionSelectorModuleEntitySelect(C))}),r(),y(17,_i,8,8,"div",11)(18,wi,8,8,"div",11)(19,Mi,8,2,"div",12)(20,Ii,8,2,"div",12)(21,vi,8,2,"div",12)(22,Ei,8,2,"div",12)(23,yi,8,2,"div",12)(24,Ri,8,2,"div",12)(25,Ai,8,2,"div",12)(26,bi,8,2,"div",12)(27,xi,8,2,"div",12)(28,Ti,8,2,"div",12)(29,Ui,8,2,"div",12)(30,Ni,8,2,"div",12)(31,Oi,8,2,"div",12)(32,Wi,9,7,"div",13),r()()()}a&2&&(o(),d("optionsInfoAreaId",t.constructorInfoAreaId),o(3),m(" ",t.formInfo.formTitle," "),o(2),m(" ",g(7,28,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),d("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),d("optionDisabled",!(t.fieldsInfo.moduleName!=null&&t.fieldsInfo.moduleName.accessEditField))("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",g(12,30,"TITLE.WEBSITE")),o(2),d("optionDisabled",!(t.fieldsInfo.moduleName!=null&&t.fieldsInfo.moduleName.accessEditField))("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",g(14,32,"TITLE.USER")),o(2),d("optionDisabled",!(t.fieldsInfo.moduleName!=null&&t.fieldsInfo.moduleName.accessEditField))("optionPlaceholder",g(16,34,"TITLE.MODULE")),o(2),d("ngIf",t.fieldsInfo.moduleName==null?null:t.fieldsInfo.moduleName.accessWatchField),o(),d("ngIf",t.fieldsInfo.moduleEntityName==null?null:t.fieldsInfo.moduleEntityName.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessDeleteRow==null?null:t.fieldsInfo.accessDeleteRow.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessWatchRow==null?null:t.fieldsInfo.accessWatchRow.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessCountRow==null?null:t.fieldsInfo.accessCountRow.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessEditRow==null?null:t.fieldsInfo.accessEditRow.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessAddRow==null?null:t.fieldsInfo.accessAddRow.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessExportFile==null?null:t.fieldsInfo.accessExportFile.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessWatchRowOtherSiteId==null?null:t.fieldsInfo.accessWatchRowOtherSiteId.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessWatchRowOtherCreatedBy==null?null:t.fieldsInfo.accessWatchRowOtherCreatedBy.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessCountRowOtherSiteId==null?null:t.fieldsInfo.accessCountRowOtherSiteId.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessCountRowOtherCreatedBy==null?null:t.fieldsInfo.accessCountRowOtherCreatedBy.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessEditRowOtherSiteId==null?null:t.fieldsInfo.accessEditRowOtherSiteId.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessEditRowOtherCreatedBy==null?null:t.fieldsInfo.accessEditRowOtherCreatedBy.accessWatchField),o(),d("ngIf",t.fieldsInfo.accessDeleteRowOtherCreatedBy==null?null:t.fieldsInfo.accessDeleteRowOtherCreatedBy.accessWatchField),o(),d("ngIf",t.formInfo.formSubmitAllow))},dependencies:[G,ue,le,se,ce,de,fe,he,me,pe,Ce,q,Ee,ye,Re,Ie,Ae,j],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var Te=K;var Di=()=>[5,10,20,100],Bi=i=>({display:i});function Vi(i,c){if(i&1){let e=S();s(0,"div",17)(1,"a",45),R("click",function(){u(e);let t=l();return f(t.onActionButtonNewRow())}),h(2,"i",46)(3,"br"),r(),s(4,"p",20),p(5),_(6,"translate"),r()()}i&2&&(o(5),x(g(6,1,"ACTION.ADD")))}function ki(i,c){if(i&1){let e=S();s(0,"div",17)(1,"a",47),R("click",function(){u(e);let t=l();return f(t.onActionButtonEditRow(t.tableRowSelected))}),h(2,"i",48)(3,"br"),r(),s(4,"p",20),p(5),_(6,"translate"),r()()}i&2&&(o(5),x(g(6,1,"ACTION.EDIT")))}function Li(i,c){if(i&1){let e=S();s(0,"div",17)(1,"a",49),R("click",function(){u(e);let t=l();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),h(2,"i",50)(3,"br"),r(),s(4,"p",20),p(5),_(6,"translate"),r()()}i&2&&(o(5),x(g(6,1,"ACTION.DELETE")))}function Fi(i,c){if(i&1&&(s(0,"mat-header-cell",51),p(1),r()),i&2){let e=l();o(),m(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Pi(i,c){if(i&1&&h(0,"select",54),i&2){let e=l().$implicit,a=l();d("contentService",a.contentService)("row",e)("ngStyle",Ve(3,Bi,e.linkSiteId===(a.tableRowSelected==null?null:a.tableRowSelected.linkSiteId)&&e.linkUserId===(a.tableRowSelected==null?null:a.tableRowSelected.linkUserId)?"":"none"))}}function Gi(i,c){if(i&1&&(s(0,"mat-cell",52),_(1,"statusCellClass"),h(2,"i",52),_(3,"statusIconClass"),y(4,Pi,1,5,"select",53),r()),i&2){let e=c.$implicit,a=l();d("ngClass",g(1,3,e.recordStatus)),o(2),d("ngClass",g(3,5,e.recordStatus)),o(2),d("ngIf",a.dataModelResult==null||a.dataModelResult.access==null?null:a.dataModelResult.access.accessEditRow)}}function qi(i,c){if(i&1&&(s(0,"mat-header-cell",51),p(1),r()),i&2){let e=l();o(),m(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Hi(i,c){if(i&1&&(s(0,"mat-cell"),p(1),_(2,"cmssiteinfo"),_(3,"async"),r()),i&2){let e=c.$implicit;o(),m(" ",g(3,3,g(2,1,e.linkSiteId))," ")}}function ji(i,c){if(i&1&&(s(0,"mat-header-cell",51),p(1),r()),i&2){let e=l();o(),m(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function Qi(i,c){if(i&1&&(s(0,"mat-cell"),p(1),_(2,"cmsuserinfo"),_(3,"async"),r()),i&2){let e=c.$implicit;o(),m(" ",g(3,3,g(2,1,e.linkUserId))," ")}}function zi(i,c){if(i&1&&(s(0,"mat-header-cell",51),p(1),r()),i&2){let e=l();o(),m(" ",e.fieldsInfo.moduleName==null?null:e.fieldsInfo.moduleName.fieldTitle," ")}}function Ji(i,c){if(i&1&&(s(0,"mat-cell"),p(1),r()),i&2){let e=c.$implicit;o(),m(" ",e.moduleName," ")}}function Ki(i,c){if(i&1&&(s(0,"mat-header-cell",51),p(1),r()),i&2){let e=l();o(),m(" ",e.fieldsInfo.moduleEntityName==null?null:e.fieldsInfo.moduleEntityName.fieldTitle," ")}}function Xi(i,c){if(i&1&&(s(0,"mat-cell"),p(1),r()),i&2){let e=c.$implicit;o(),m(" ",e.moduleEntityName," ")}}function Yi(i,c){i&1&&(s(0,"mat-header-cell",51),p(1),_(2,"translate"),r()),i&2&&(o(),m(" ",g(2,1,"TITLE.Access_Add_Row")," "))}function Zi(i,c){if(i&1&&(s(0,"mat-cell"),h(1,"i",52),_(2,"boolclass"),r()),i&2){let e=c.$implicit;o(),d("ngClass",g(2,1,e.accessAddRow))}}function $i(i,c){if(i&1&&(s(0,"mat-header-cell",51),p(1),r()),i&2){let e=l();o(),m(" ",e.fieldsInfo.accessWatchRow==null?null:e.fieldsInfo.accessWatchRow.fieldTitle," ")}}function eo(i,c){if(i&1&&(s(0,"mat-cell"),h(1,"i",52),_(2,"boolclass"),r()),i&2){let e=c.$implicit;o(),d("ngClass",g(2,1,e.accessWatchRow))}}function to(i,c){i&1&&(s(0,"mat-header-cell",51),p(1),_(2,"translate"),r()),i&2&&(o(),m(" ",g(2,1,"TITLE.Access_Edit_Row")," "))}function io(i,c){if(i&1&&(s(0,"mat-cell"),h(1,"i",52),_(2,"boolclass"),r()),i&2){let e=c.$implicit;o(),d("ngClass",g(2,1,e.accessEditRow))}}function oo(i,c){i&1&&(s(0,"mat-header-cell",51),p(1),_(2,"translate"),r()),i&2&&(o(),m(" ",g(2,1,"TITLE.Access_Delete_Row")," "))}function no(i,c){if(i&1&&(s(0,"mat-cell"),h(1,"i",52),_(2,"boolclass"),r()),i&2){let e=c.$implicit;o(),d("ngClass",g(2,1,e.accessDeleteRow))}}function ro(i,c){i&1&&(s(0,"mat-header-cell",51),p(1),_(2,"translate"),r()),i&2&&(o(),m(" ",g(2,1,"TITLE.Access_Count_Row")," "))}function ao(i,c){if(i&1&&(s(0,"mat-cell"),h(1,"i",52),_(2,"boolclass"),r()),i&2){let e=c.$implicit;o(),d("ngClass",g(2,1,e.accessCountRow))}}function so(i,c){i&1&&(s(0,"mat-header-cell"),p(1),_(2,"translate"),r()),i&2&&(o(),m(" ",g(2,1,"TITLE.OPTION")," "))}function lo(i,c){if(i&1&&(s(0,"mat-cell",55)(1,"button",56)(2,"mat-icon"),p(3,"more_vert"),r()(),h(4,"mat-menu",null,2),r()),i&2){let e=T(5);o(),d("matMenuTriggerFor",e)}}function co(i,c){i&1&&h(0,"mat-header-row")}function po(i,c){if(i&1){let e=S();s(0,"mat-row",57),R("click",function(){let t=u(e).$implicit,n=l();return f(n.onActionTableRowSelect(t))}),r()}if(i&2){let e=c.$implicit,a=c.dataIndex,t=l();De("ntk-row-odd",a%2)("ntk-row-even",!(a%2))("ntk-row-selected",e.linkSiteId===(t.tableRowSelected==null?null:t.tableRowSelected.linkSiteId)&&e.linkUserId===(t.tableRowSelected==null?null:t.tableRowSelected.linkUserId))}}var X=class X extends vt{constructor(e,a,t,n,v,C,k,Y,uo,fo,Pt,ho){super(e,new W,Pt,v,Y);this.contentService=e;this.cmsToastrService=a;this.cmsConfirmationDialogService=t;this.router=n;this.tokenHelper=v;this.activatedRoute=C;this.cdr=k;this.translate=Y;this.cmsStoreService=uo;this.pageInfo=fo;this.publicHelper=Pt;this.dialog=ho;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestModuleName="";this.requestModuleEntityName="";this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new ge;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["RecordStatus","LinkUserId","LinkSiteId","ModuleName","ModuleEntityName","AccessAddRow","AccessWatchRow","AccessEditRow","AccessDeleteRow","AccessCountRow"];this.tabledisplayedColumnsMobileSource=["RecordStatus","LinkUserId","LinkSiteId","ModuleName","ModuleEntityName","AccessAddRow","AccessWatchRow","AccessEditRow","AccessDeleteRow","AccessCountRow"];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestModuleName=this.activatedRoute.snapshot.paramMap.get("ModuleName"),this.requestModuleEntityName=this.activatedRoute.snapshot.paramMap.get("ModuleEntityName"),this.optionsSearch.parentMethods={onSubmit:N=>this.onSubmitOptionsSearch(N)},this.filteModelContent.sortColumn="LinkSiteId",this.filteModelContent.sortType=Z.Descending,this.requestLinkSiteId>0){let N=new O;N.propertyName="LinkSiteId",N.value=this.requestLinkSiteId,this.filteModelContent.filters.push(N)}if(this.requestLinkUserId>0){let N=new O;N.propertyName="LinkUserId",N.value=this.requestLinkUserId,this.filteModelContent.filters.push(N)}}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Oe(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new W);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let a=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(a).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=Z.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=Z.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=Z.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(be,{height:"90%",panelClass:e,enterAnimationDuration:ee.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:ee.cmsViewConfig.exitAnimationDuration,data:{linkSiteId:this.requestLinkSiteId,linkUserId:this.requestLinkUserId,moduleName:this.requestModuleName,moduleEntityName:this.requestModuleEntityName}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.linkSiteId||e.linkSiteId===0||!e.linkUserId||e.linkUserId===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var a="";this.publicHelper.isMobile?a="dialog-fullscreen":a="dialog-min",this.dialog.open(Te,{height:"90%",panelClass:a,enterAnimationDuration:ee.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:ee.cmsViewConfig.exitAnimationDuration,data:{linkSiteId:this.tableRowSelected.linkSiteId,linkUserId:this.tableRowSelected.linkUserId,moduleName:this.tableRowSelected.moduleName,moduleEntityName:this.tableRowSelected.moduleEntityName}}).afterClosed().subscribe(n=>{n&&n.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.linkSiteId||e.linkSiteId===0||!e.linkUserId||e.linkUserId===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(n=>{this.cmsToastrService.typeErrorSelected(n)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var a="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(n=>{a=n["MESSAGE.Please_Confirm"],t=n["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.linkSiteId+" ) "}),this.cmsConfirmationDialogService.confirm(a,t).then(n=>{if(n){let v=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(C=>{this.publicHelper.processService.processStart(v,C,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:C=>{C.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(v)},error:C=>{this.cmsToastrService.typeError(C),this.publicHelper.processService.processStop(v,!1)}})}}).catch(()=>{})}onActionButtonUserList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(a=>{this.cmsToastrService.typeErrorSelected(a)});return}this.onActionTableRowSelect(e),this.router.navigate(["/core/site/userlist/LinkUserSupportAccessId/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let a=new Map;this.translate.get("MESSAGE.Active").subscribe(C=>{a.set(C,0)}),this.translate.get("MESSAGE.All").subscribe(C=>{a.set(C,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(C=>{this.publicHelper.processService.processStart(t,C,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:C=>{C.isSuccess?(this.translate.get("MESSAGE.All").subscribe(k=>{a.set(k,C.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(a)):this.cmsToastrService.typeErrorMessage(C.errorMessage),this.publicHelper.processService.processStop(t)},error:C=>{this.cmsToastrService.typeError(C),this.publicHelper.processService.processStop(t,!1)}});let n=JSON.parse(JSON.stringify(this.filteModelContent)),v=new O;v.propertyName="RecordStatus",v.value=Ke.Available,n.filters.push(v),this.contentService.ServiceGetCount(n).subscribe({next:C=>{C.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(k=>{a.set(k,C.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(a)):this.cmsToastrService.typeErrorMessage(C.errorMessage),this.publicHelper.processService.processStop(t)},error:C=>{this.cmsToastrService.typeError(C),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}};X.\u0275fac=function(a){return new(a||X)(E(D),E(Q),E(ve),E(je),E(Ct),E(He),E(P),E(H),E($e),E(_t),E(z),E(ze))},X.\u0275cmp=L({type:X,selectors:[["app-core-user-support-access-list"]],standalone:!1,features:[F],decls:74,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-users","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","RecordStatus"],["mat-sort-header","",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkSiteId"],[4,"matCellDef"],["matColumnDef","LinkUserId"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","AccessAddRow"],["matColumnDef","AccessWatchRow"],["matColumnDef","AccessEditRow"],["matColumnDef","AccessDeleteRow"],["matColumnDef","AccessCountRow"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(a,t){if(a&1){let n=S();s(0,"app-cms-html-list",3),I("optionActionGuideNoticeDisplayChange",function(C){return u(n),M(t.viewGuideNotice,C)||(t.viewGuideNotice=C),f(C)}),R("optionOnActionButtonMemoRow",function(){return u(n),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(n),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(n),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(n),f(t.onActionButtonPrintRow())}),A(1,4),p(2," -------------------------------------- "),b(),We(3,5)(4,6),A(5,7),s(6,"a",8),R("click",function(){return u(n),f(t.viewGuideNotice=!t.viewGuideNotice)}),h(7,"i",9),r(),s(8,"a",8),R("click",function(){return u(n),f(t.onActionButtonReload())}),h(9,"i",10),r(),b(),A(10,11),s(11,"a",12),R("click",function(){return u(n),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),h(12,"mat-slide-toggle",13),p(13),_(14,"translate"),r(),s(15,"a",12),R("click",function(){return u(n),f(t.onActionButtonStatist())}),h(16,"mat-slide-toggle",13),p(17),_(18,"translate"),r(),b(),A(19,14),y(20,Vi,7,3,"div",15),b(),A(21,16),y(22,ki,7,3,"div",15)(23,Li,7,3,"div",15),s(24,"div",17)(25,"a",18),R("click",function(){return u(n),f(t.onActionButtonUserList(t.tableRowSelected))}),h(26,"i",19),r(),s(27,"p",20),p(28),_(29,"translate"),r()(),b(),A(30,21),s(31,"app-cms-search-list",22),I("optionsChange",function(C){return u(n),M(t.optionsSearch,C)||(t.optionsSearch=C),f(C)}),r(),s(32,"app-cms-statist-list",22),I("optionsChange",function(C){return u(n),M(t.optionsStatist,C)||(t.optionsStatist=C),f(C)}),r(),b(),A(33,23),s(34,"mat-table",24,0),R("matSortChange",function(){u(n);let C=T(35);return f(t.onTableSortData(C))}),A(36,25),y(37,Fi,2,1,"mat-header-cell",26)(38,Gi,5,7,"mat-cell",27),b(),A(39,28),y(40,qi,2,1,"mat-header-cell",26)(41,Hi,4,5,"mat-cell",29),b(),A(42,30),y(43,ji,2,1,"mat-header-cell",26)(44,Qi,4,5,"mat-cell",29),b(),A(45,31),y(46,zi,2,1,"mat-header-cell",26)(47,Ji,2,1,"mat-cell",29),b(),A(48,32),y(49,Ki,2,1,"mat-header-cell",26)(50,Xi,2,1,"mat-cell",29),b(),A(51,33),y(52,Yi,3,3,"mat-header-cell",26)(53,Zi,3,3,"mat-cell",29),b(),A(54,34),y(55,$i,2,1,"mat-header-cell",26)(56,eo,3,3,"mat-cell",29),b(),A(57,35),y(58,to,3,3,"mat-header-cell",26)(59,io,3,3,"mat-cell",29),b(),A(60,36),y(61,oo,3,3,"mat-header-cell",26)(62,no,3,3,"mat-cell",29),b(),A(63,37),y(64,ro,3,3,"mat-header-cell",26)(65,ao,3,3,"mat-cell",29),b(),A(66,38),y(67,so,3,3,"mat-header-cell",39)(68,lo,6,1,"mat-cell",40),b(),y(69,co,1,0,"mat-header-row",41)(70,po,1,6,"mat-row",42),r(),b(),A(71,43),s(72,"mat-paginator",44,1),R("page",function(C){return u(n),f(t.onTablePageingData(C))}),r(),b(),r()}a&2&&(d("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),w("optionActionGuideNoticeDisplay",t.viewGuideNotice),d("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(12),d("checked",t.optionsSearch.data.show),o(),m("",g(14,24,"ACTION.SEARCH")," "),o(3),d("checked",t.optionsStatist.data.show),o(),m("",g(18,26,"ACTION.STATIST")," "),o(3),d("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),d("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),d("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(5),x(g(29,28,"ACTION.USERS")),o(3),w("options",t.optionsSearch),o(),w("options",t.optionsStatist),o(2),d("dataSource",t.tableSource),o(35),d("matHeaderRowDef",t.tabledisplayedColumns),o(),d("matRowDefColumns",t.tabledisplayedColumns),o(2),d("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Be(30,Di)))},dependencies:[ke,G,Le,Qe,Je,q,et,tt,it,ot,nt,rt,at,lt,mt,ct,st,ut,dt,pt,ft,ht,Et,yt,Rt,At,Fe,j,Mt,bt,xt,Tt,gt],encapsulation:2});var te=X;var mo=[{path:"",children:[{path:"",component:te},{path:"list/LinkSiteId/:LinkSiteId/LinkUserId/:LinkUserId",component:te}]}],B=class B{};B.\u0275fac=function(e){return new(e||B)},B.\u0275mod=oe({type:B}),B.\u0275inj=ie({imports:[Ne.forChild(mo),Ne]});var Ue=B;var V=class V{};V.\u0275fac=function(e){return new(e||V)},V.\u0275mod=oe({type:V}),V.\u0275inj=ie({providers:[D,ve,Ze],imports:[Pe,Ge,Ue,qe.withConfig({warnOnNgModelWithFormControl:"never"}),St,Ut]});var Ft=V;export{Ft as CoreUserSupportAccessCmsModule};
