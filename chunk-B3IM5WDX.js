import{f as $e}from"./chunk-QOHG4LNO.js";import{a as Je}from"./chunk-EBD2HYEX.js";import{a as Ze}from"./chunk-SXMQKVZT.js";import{a as q,d as Xe}from"./chunk-MGJ6TAQ4.js";import{f as j}from"./chunk-BJ5DOVCF.js";import{$ as be,$a as D,A as he,Fb as ze,Fc as Ke,Gb as Ue,Ic as Ye,J as ge,K as Qe,Ka as Ge,Kc as H,L as He,La as We,Q as Se,Qb as B,Rb as Q,W as je,Y as qe,a as Oe,aa as Ce,n as N,q as F,r as Ne,t as Fe,u as fe,v as De,w as Be}from"./chunk-RTG5NDN7.js";import{Ab as te,Ad as W,Ak as xe,Bb as ie,Bq as Le,Ca as y,Db as _e,Eb as Ie,F as Y,Fa as o,Fb as ye,Fd as L,Ha as $,I as J,Ik as Re,Jb as P,Kc as se,Kk as Ve,Lb as oe,Lc as V,Oa as m,Ob as h,P as X,Pb as M,Pc as Te,Q as Z,Qb as A,Rc as pe,Sa as R,Td as ce,Ub as ne,Vb as re,Wb as ae,Xb as v,Xd as O,Ya as g,Yb as T,Yd as me,Zb as G,ac as Ae,da as S,db as ee,dc as d,de,dg as Ee,ea as b,ec as u,gd as we,kb as r,kk as z,lb as a,mb as s,mk as ue,nb as p,p as U,q as K,td as ke,ub as I,wc as le,xb as C,xk as Pe,zb as f}from"./chunk-TARMMII3.js";import{i as x}from"./chunk-SEDBTTTN.js";var ut=["*"];function ft(n,i){if(n&1&&(a(0,"label",14),h(1),s()),n&2){let e=f();r("for",T("app-cms-site-selector-",e.id)),o(),M(e.optionLabel)}}function ht(n,i){if(n&1&&(p(0,"img",15),d(1,"cmsthumbnail")),n&2){let e=f();r("src",v(u(1,2,e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),y)}}function gt(n,i){if(n&1&&(p(0,"img",15),d(1,"cmsthumbnail")),n&2){let e=f().$implicit;r("src",v(u(1,2,e.linkMainImageIdSrc)),y)}}function St(n,i){if(n&1&&(a(0,"mat-option",16),g(1,gt,2,4,"img",5),a(2,"span"),h(3),s()()),n&2){let e=i.$implicit,t=f();r("value",e)("disabled",t.optionDisabled),o(),r("ngIf",e.linkMainImageIdSrc),o(2),M(t.displayOption(e))}}function bt(n,i){n&1&&p(0,"i",17)}function Ct(n,i){n&1&&p(0,"i",18)}function Mt(n,i){if(n&1){let e=I();a(0,"i",19),C("click",function(){S(e);let l=f();return b(l.onActionSelectClear())}),s()}}function vt(n,i){n&1&&(a(0,"em"),h(1),d(2,"translate"),s()),n&2&&(o(),A("(",u(2,1,"TITLE.Necessary"),")"))}var w=class w{constructor(i,e,t,l,c,_){this.coreEnumService=i;this.cmsToastrService=e;this.cdr=t;this.publicHelper=l;this.translate=c;this.categoryService=_;this.id=++w.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ce;this.dataModelSelect=new ue;this.formControl=new fe;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new $;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(i){this.onActionSelectForce(i)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(X(""),Y(1500),J(),Z(i=>typeof i=="string"||typeof i=="number"?this.DataGetAll(i||""):[]))}displayFn(i){return i?i.title:void 0}displayOption(i){return i?i.title:void 0}DataGetAll(i){return x(this,null,function*(){let e=new me;e.rowPerPage=20,e.accessLoad=!0;let t=new O;t.propertyName="title",t.value=i,t.searchType=L.Contains,t.clauseType=W.Or,e.filters.push(t),i&&typeof+i=="number"&&+i>0&&(t=new O,t.propertyName="id",t.value=i,t.searchType=L.Equal,t.clauseType=W.Or,e.filters.push(t));let l=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(l,c,this.constructorInfoAreaId)}),yield U(this.categoryService.ServiceGetAll(e)).then(c=>(this.dataModelResult=c,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id.length<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(l),c.listItems))})}onActionSelect(i){this.optionDisabled||(this.dataModelSelect=i,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(i){return this.filteredOptions.pipe(K(e=>(e.find(t=>t.id===i.id)||e.push(i),e)))}onActionSelectForce(i){if(typeof i=="string"&&i.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===i)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===i)){let e=this.dataModelResult.listItems.find(t=>t.id===i);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(i).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof i==typeof ue){this.filteredOptions=this.push(i),this.dataModelSelect=i,this.formControl.setValue(i);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new ue,this.loadOptions()}};w.nextId=0,w.\u0275fac=function(e){return new(e||w)(m(de),m(H),m(le),m(j),m(B),m(Ve))},w.\u0275cmp=R({type:w,selectors:[["app-cms-sms-apipath-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:ut,decls:18,vars:25,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,t){if(e&1){let l=I();te(),a(0,"div",1),p(1,"app-progress-spinner",2),g(2,ft,2,3,"label",3),a(3,"span",4),g(4,ht,2,4,"img",5),h(5," \xA0"),s(),p(6,"input",6),a(7,"mat-autocomplete",7,0),C("optionSelected",function(_){return S(l),b(t.onActionSelect(_.option.value))}),g(9,St,4,4,"mat-option",8),d(10,"async"),s(),g(11,bt,1,0,"i",9)(12,Ct,1,0,"i",10)(13,Mt,1,0,"i",11),a(14,"i",12),d(15,"translate"),C("click",function(){return S(l),b(t.onActionButtonReload())}),s(),g(16,vt,3,3,"em",13),ie(17),s()}if(e&2){let l=P(8);o(),r("optionsInfoAreaId",t.constructorInfoAreaId),o(),r("ngIf",(t.optionLabel==null?null:t.optionLabel.length)>0),o(2),r("ngIf",t.dataModelSelect&&(t.dataModelSelect==null?null:t.dataModelSelect.linkMainImageIdSrc)),o(2),r("placeholder",v(t.optionPlaceholder))("id",T("app-cms-site-selector-",t.id))("formControl",t.formControl)("matAutocomplete",l)("required",t.optionRequired),ee("disabled",t.optionDisabled?!0:null),o(),r("displayWith",t.displayFn),o(2),r("ngForOf",u(10,21,t.filteredOptions)),o(2),r("ngIf",!t.formControl.valid),o(),r("ngIf",t.optionRequired&&t.formControl.valid),o(),r("ngIf",(t.dataModelSelect==null||t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)>0),o(),oe("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),r("title",v(u(15,23,"ACTION.RELOAD"))),o(2),r("ngIf",t.optionRequired&&(!t.dataModelSelect||!t.dataModelSelect.id||(t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)===0))}},dependencies:[se,V,N,F,ge,he,be,Se,Ce,qe,D,q,pe,Q,Je],encapsulation:2});var Me=w;var It=["*"];function yt(n,i){if(n&1&&(a(0,"label",12),h(1),s()),n&2){let e=f();r("for",T("app-cms-site-selector-",e.id)),o(),M(e.optionLabel)}}function At(n,i){if(n&1&&(a(0,"mat-option",13)(1,"span"),h(2),s()()),n&2){let e=i.$implicit,t=f();r("value",e)("disabled",t.optionDisabled),o(2),M(t.displayOption(e))}}function Tt(n,i){n&1&&p(0,"i",14)}function wt(n,i){n&1&&p(0,"i",15)}function kt(n,i){if(n&1){let e=I();a(0,"i",16),C("click",function(){S(e);let l=f();return b(l.onActionSelectClear())}),s()}}function Et(n,i){n&1&&(a(0,"em"),h(1),d(2,"translate"),s()),n&2&&(o(),A("(",u(2,1,"TITLE.Necessary"),")"))}var k=class k{constructor(i,e,t,l,c,_){this.coreEnumService=i;this.cmsToastrService=e;this.translate=t;this.cdr=l;this.publicHelper=c;this.categoryService=_;this.id=++k.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ce;this.dataModelSelect=new z;this.formControl=new fe;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionSelectFirstItemOnChangeApi=!1;this.optionLabel="";this.optionPlaceholder="";this.optionChange=new $;this.optionReload=()=>this.onActionButtonReload();this.privateLinkApiPathId="";this.privateLinkApiPathIdLast="";this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(i){this.onActionSelectForce(i)}set optionLinkApiPathId(i){i!=this.privateLinkApiPathId&&(this.privateLinkApiPathId!=""&&this.onActionSelectClear(),this.privateLinkApiPathId=i,this.privateLinkApiPathId!=this.privateLinkApiPathIdLast&&(this.optionSelectFirstItem=this.optionSelectFirstItemOnChangeApi),this.privateLinkApiPathIdLast=i,this.loadOptions())}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(X(""),Y(1500),J(),Z(i=>typeof i=="string"||typeof i=="number"?this.DataGetAll(i||""):[]))}displayFn(i){return i?i.numberChar:void 0}displayOption(i){return i?i.numberChar:void 0}DataGetAll(i){return x(this,null,function*(){let e=new me;e.rowPerPage=20,e.accessLoad=!0;let t=new O;t.propertyName="NumberChar",t.value=i,t.searchType=L.Contains,t.clauseType=W.Or,e.filters.push(t),this.privateLinkApiPathId?.length>0&&(t=new O,t.propertyName="ApiPathAndApiNumbers",t.propertyAnyName="LinkApiPathId",t.value=this.privateLinkApiPathId,t.searchType=L.Equal,e.filters.push(t));let l=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(l,c,this.constructorInfoAreaId)}),yield U(this.categoryService.ServiceGetAll(e)).then(c=>(this.dataModelResult=c,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id.length<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0]),this.onActionSelect(this.dataModelResult.listItems[0])},1e3)),this.publicHelper.processService.processStop(l),c.listItems))})}onActionSelect(i){this.optionDisabled||(this.dataModelSelect=i,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=new z,this.formControl.setValue(null),this.optionChange.emit(null))}push(i){return this.filteredOptions.pipe(K(e=>(e.find(t=>t.id===i.id)||e.push(i),e)))}onActionSelectForce(i){if(typeof i=="string"&&i.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===i)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===i)){let e=this.dataModelResult.listItems.find(t=>t.id===i);this.dataModelSelect=e,this.formControl.setValue(e);return}if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.numberChar===i)){let e=this.dataModelResult.listItems.find(t=>t.numberChar===i);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(i).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):(!this.dataModelResult.listItems||this.dataModelResult.listItems.length===0)&&this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof i==typeof z){this.filteredOptions=this.push(i),this.dataModelSelect=i,this.formControl.setValue(i);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new z,this.loadOptions()}};k.nextId=0,k.\u0275fac=function(e){return new(e||k)(m(de),m(H),m(B),m(le),m(j),m(Re))},k.\u0275cmp=R({type:k,selectors:[["app-cms-sms-api-number-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionSelectFirstItemOnChangeApi:"optionSelectFirstItemOnChangeApi",optionLabel:"optionLabel",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLinkApiPathId:"optionLinkApiPathId"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:It,decls:15,vars:24,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,t){if(e&1){let l=I();te(),a(0,"div",1),p(1,"app-progress-spinner",2),g(2,yt,2,3,"label",3),p(3,"input",4),a(4,"mat-autocomplete",5,0),C("optionSelected",function(_){return S(l),b(t.onActionSelect(_.option.value))}),g(6,At,3,3,"mat-option",6),d(7,"async"),s(),g(8,Tt,1,0,"i",7)(9,wt,1,0,"i",8)(10,kt,1,0,"i",9),a(11,"i",10),d(12,"translate"),C("click",function(){return S(l),b(t.onActionButtonReload())}),s(),g(13,Et,3,3,"em",11),ie(14),s()}if(e&2){let l=P(5);o(),r("optionsInfoAreaId",t.constructorInfoAreaId),o(),r("ngIf",(t.optionLabel==null?null:t.optionLabel.length)>0),o(),r("placeholder",v(t.optionPlaceholder))("id",T("app-cms-site-selector-",t.id))("formControl",t.formControl)("matAutocomplete",l)("required",t.optionRequired),ee("disabled",t.optionDisabled?!0:null),o(),r("displayWith",t.displayFn),o(2),r("ngForOf",u(7,20,t.filteredOptions)),o(2),r("ngIf",!t.formControl.valid),o(),r("ngIf",t.optionRequired&&t.formControl.valid),o(),r("ngIf",(t.dataModelSelect==null||t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)>0),o(),oe("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),r("title",v(u(12,22,"ACTION.RELOAD"))),o(2),r("ngIf",t.optionRequired&&(!t.dataModelSelect||!t.dataModelSelect.id||(t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)===0))}},dependencies:[se,V,N,F,ge,he,be,Se,Ce,D,q,pe,Q],encapsulation:2});var ve=k;var xt=["Message"],Rt=["vform"],Vt=n=>({direction:n});function Lt(n,i){if(n&1){let e=I();a(0,"button",52),C("click",function(){S(e);let l=f(2);return b(l.onActionSendUrlToQDoc())}),p(1,"i",53),h(2),d(3,"translate"),s()}n&2&&(o(2),A(" ",u(3,1,"ACTION.VIEW")," "))}function Ot(n,i){if(n&1&&(a(0,"div")(1,"a",54),p(2,"img",55),d(3,"translate"),s()()),n&2){let e=f(2);o(),r("href",v(e.optionurlViewContent),y),o(),r("alt",v(u(3,5,"TITLE.Scan_the_barcode")))("src",e.optionurlViewContentQRCodeBase64,y)}}function Nt(n,i){if(n&1){let e=I();a(0,"div")(1,"div",18)(2,"div",32)(3,"p"),h(4),s()()(),a(5,"div",18)(6,"div",33)(7,"div",26)(8,"label",34),h(9),d(10,"translate"),s(),a(11,"input",35,2),ae("ngModelChange",function(l){S(e);let c=f();return re(c.QDocModel.username,l)||(c.QDocModel.username=l),b(l)}),s()(),g(13,Lt,4,3,"button",36),p(14,"br")(15,"br"),a(16,"button",37),C("click",function(){S(e);let l=f();return b(l.onActionOpenLink())}),h(17),d(18,"translate"),s()(),a(19,"div",38),g(20,Ot,4,7,"div",17),a(21,"div",39)(22,"a",40),p(23,"i",41),s(),a(24,"a",42),p(25,"i",43),s(),a(26,"a",44),p(27,"i",45),s(),a(28,"a",46),p(29,"i",47),s(),a(30,"a",48),p(31,"i",49),s(),a(32,"span",50),C("click",function(){S(e);let l=f();return b(l.onActionCopied())}),p(33,"i",51),s()()()()()}if(n&2){let e=f();o(4),M(e.optionLabel),o(5),M(u(10,21,"ACTION.ID_Code")),o(2),ne("ngModel",e.QDocModel.username),o(2),r("ngIf",e.optionurlViewContent&&e.optionurlViewContent.length>0&&e.QDocModel.username),o(4),A(" ",u(18,23,"ACTION.VIEW_PAGE")," "),o(3),r("ngIf",(e.optionurlViewContentQRCodeBase64==null?null:e.optionurlViewContentQRCodeBase64.length)>0&&(e.optionurlViewContent==null?null:e.optionurlViewContent.length)>0),o(2),r("href",G("whatsapp://send?text=",e.optionLabel,"- ",e.optionurlViewContent),y),o(2),r("href",G("https://telegram.me/share/url?url=",e.optionurlViewContent,"&text=",e.optionLabel),y),o(2),r("href",G("https://www.linkedin.com/shareArticle?url=",e.optionurlViewContent,"&title=",e.optionLabel),y),o(2),r("href",T("http://www.facebook.com/share.php?u=",e.optionurlViewContent),y),o(2),r("href",G("http://twitter.com/share?text=",e.optionLabel,"&url=",e.optionurlViewContent),y),o(2),r("cdkCopyToClipboard",e.optionurlViewContent)}}function Ft(n,i){if(n&1){let e=I();a(0,"app-cms-sms-api-number-selector",56),d(1,"translate"),C("optionChange",function(l){S(e);let c=f();return b(c.onActionSelectApiNumber(l))}),s()}if(n&2){let e=f();r("optionLinkApiPathId",e.dataModel==null?null:e.dataModel.linkApiPathId)("optionPlaceholder",u(1,4,"TITLE.sender_number"))("optionSelectFirstItem",!0)("optionSelectFirstItemOnChangeApi",!0)}}function Dt(n,i){n&1&&(a(0,"mat-error"),h(1),d(2,"translate"),a(3,"strong"),h(4),d(5,"translate"),s()()),n&2&&(o(),A(" ",u(2,2,"TITLE.Message_Text")," "),o(3),M(u(5,4,"MESSAGE.required")))}function Bt(n,i){if(n&1){let e=I();a(0,"div",26)(1,"label",57),h(2),d(3,"translate"),s(),a(4,"textarea",58,3),ae("ngModelChange",function(l){S(e);let c=f();return re(c.dataModel.toNumbers,l)||(c.dataModel.toNumbers=l),b(l)}),s(),a(6,"em")(7,"strong",59),h(8),d(9,"translate"),s()()()}if(n&2){let e=f();o(2),M(u(3,3,"TITLE.Receiver_number")),o(2),ne("ngModel",e.dataModel.toNumbers),o(4),M(u(9,5,"TITLE.You_can_separate_the_number_of_the_recipient_of_the_message_with_an_inter"))}}function Qt(n,i){if(n&1&&(a(0,"button",62),p(1,"i",53),h(2),d(3,"translate"),s()),n&2){f(2);let e=P(14);r("disabled",!e.valid),o(2),A(" ",u(3,2,"ACTION.Send_Message")," ")}}function Ht(n,i){if(n&1&&(a(0,"div",60),g(1,Qt,4,4,"button",61),s()),n&2){let e=f();o(),r("ngIf",!e.publicHelper.processService.process.inRunAll)}}var E=class E{constructor(i,e,t,l,c,_,jt,qt,Gt,Wt){this.cmsToastrService=i;this.data=e;this.dialogRef=t;this.smsActionService=l;this.http=c;this.router=_;this.translate=jt;this.tokenHelper=qt;this.cmsStoreService=Gt;this.publicHelper=Wt;this.id=++E.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModel=new Pe;this.formInfo=new Xe;this.tokenInfo=new Ee;this.optionLabel="";this.optionurlViewContentQRCodeBase64="";this.optionurlViewContent="";this.QDocModel={};this.unsubscribe=[];this.sendByShow=!1;e&&(this.optionLabel=e.title,this.optionurlViewContentQRCodeBase64=e.urlViewContentQRCodeBase64,this.optionurlViewContent=e.urlViewContent,this.formInfo.formTitle=e.title),this.formInfo.formDescription="\u0645\u062D\u062A\u0648\u0627 \u0631\u0627 \u0627\u0634\u062A\u0631\u0627\u06A9 \u0628\u06AF\u0630\u0627\u0631\u06CC\u062F"}ngOnInit(){this.dataModel.message=`${this.optionLabel}
    ${this.optionurlViewContent}`,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.unsubscribe.push(this.cmsStoreService.getState(i=>i.tokenInfoStore).subscribe(i=>x(this,null,function*(){this.tokenInfo=i})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(i=>i.unsubscribe())}onActionSelectApiNumber(i){i&&i.id?.length>0?this.dataModel.linkFromNumber=i.id:i&&i.numberChar?.length>0&&(this.dataModel.linkFromNumber=i.numberChar)}onActionMessageLTR(){this.message.nativeElement.style.direction="ltr",this.message.nativeElement.style.textAlign="left"}onActionMessageRTL(){this.message.nativeElement.style.direction="rtl",this.message.nativeElement.style.textAlign="right"}onActionSelectPrivateSiteConfig(i){this.dataModelParentSelected=i,i&&i.id?.length>0&&(this.dataModel.linkApiPathId=i.id,this.sendByShow=!1,i.apiAbilitySendByDirect&&(this.dataModel.optionSendByQueue=!1),i.apiAbilitySendByQueue&&(this.dataModel.optionSendByQueue=!0),i.apiAbilitySendByQueue&&i.apiAbilitySendByDirect&&(this.sendByShow=!0))}onActionSendUrlToQDoc(){if(this.QDocModel.message=this.optionurlViewContent,!this.QDocModel.username&&this.QDocModel.username.length<=0){this.cmsToastrService.typeWarningSelected("\u06A9\u062F \u0634\u0646\u0627\u0633\u0647 \u0631\u0627 \u0627\u0632 \u0648\u0628\u0633\u0627\u06CC\u062A https://Qdoc.ir \u062F\u0631\u06CC\u0627\u0641\u062A \u0646\u0645\u0627\u06CC\u06CC\u062F");return}this.http.post(Le.cmsServerConfig.configQDocServerPath,this.QDocModel,{headers:{}}).subscribe({next:i=>{this.translate.get("MESSAGE.The_order_was_sent_to_the_website").subscribe(e=>{this.cmsToastrService.typeSuccessMessage(e)})},error:i=>{this.cmsToastrService.typeErrorMessage("\u0628\u0631\u0631\u0648\u0632 \u062E\u0637\u0627 \u062F\u0631 \u0627\u0631\u0633\u0627\u0644 \u062F\u0633\u062A\u0648\u0631",i)}})}onFormSubmit(){if(!this.formGroup.valid)return;(!this.dataModel.linkApiPathId||this.dataModel.linkApiPathId.length<=0)&&this.cmsToastrService.typeErrorFormInvalid(),this.formInfo.submitButtonEnabled=!1;let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.formInfo.submitResultMessage="",this.formInfo.submitResultMessage="",this.smsActionService.ServiceSendMessage(this.dataModel).subscribe({next:e=>{this.formInfo.submitButtonEnabled=!0,e.isSuccess?(this.translate.get("MESSAGE.Submit_request_was_successfully_registered").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=1}),this.formInfo.submitResultMessageType=1,this.translate.get("MESSAGE.Send_request_was_successfully_registered").subscribe(t=>{this.cmsToastrService.typeSuccessMessage(t)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=e.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(i)},error:e=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i,!1)}})}onActionCopied(){this.cmsToastrService.typeSuccessCopedToClipboard()}onActionOpenLink(){let i=this.router.serializeUrl(this.router.createUrlTree([this.optionurlViewContent]));window.open(this.optionurlViewContent,"_blank")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};E.nextId=0,E.\u0275fac=function(e){return new(e||E)(m(H),m(We),m(Ge),m(xe),m(we),m(ke),m(B),m(Ye),m(Ke),m(j))},E.\u0275cmp=R({type:E,selectors:[["app-cms-link-to"]],viewQuery:function(e,t){if(e&1&&(_e(xt,5),_e(Rt,5)),e&2){let l;Ie(l=ye())&&(t.message=l.first),Ie(l=ye())&&(t.formGroup=l.first)}},inputs:{optionLabel:"optionLabel",optionurlViewContentQRCodeBase64:"optionurlViewContentQRCodeBase64",optionurlViewContent:"optionurlViewContent"},standalone:!1,decls:43,vars:31,consts:[["vform","ngForm"],["Message",""],["QDocCode",""],["ToNumbers",""],[3,"Key"],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"menu-title"],[1,"color-highlight"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit","ngStyle"],[3,"label"],[1,"row",2,"padding","5px"],[4,"ngIf"],[1,"row"],[1,"col-md-6","col-sm-6","col-xs-9",2,"padding-top","40px"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionSelectFirstItem"],[3,"optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionSelectFirstItemOnChangeApi","optionChange",4,"ngIf"],[1,"col-sm-12","col-md-6"],[1,"message-box"],[1,"row",2,"margin-bottom","0px !important","height","90px"],[1,"row",2,"margin-bottom","0px !important","height","283px"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.message",1,"color-highlight"],["matInput","","name","dataModel.message","type","text","placeholder","...","id","dataModel.message","minlength","1","maxlength","500","rows","9",1,"form-control","validate-name",2,"height","276px",3,"ngModelChange","ngModel"],[1,"row",2,"margin-bottom","0px !important","height","140px","margin-top","11px"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","row","style",`
                    margin-bottom: 0px !important;
                    height: 40px;
                    bottom: 4vh;
                    justify-content: center;
                  `,4,"ngIf"],[1,"col-md-12","col-sm-12","col-xs-18"],[1,"col-md-6","col-sm-6","col-xs-9"],["for","QDocModel.username",1,"color-highlight"],["matInput","","type","text","name","QDocModel.username","id","QDocModel.username","placeholder","12345",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["type","button","type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"col-md-6","col-sm-6","col-xs-9",2,"text-align","center"],[1,"mt-4"],["target","_blank",1,"style","whatsapp",3,"href"],[1,"flaticon-whatsapp","text-dark"],["target","_blank",1,"style","telegram",3,"href"],[1,"flaticon2-telegram-logo","text-dark"],["target","_blank",1,"style","linkedin",3,"href"],[1,"flaticon-linkedin-logo","text-dark"],["target","_blank",1,"style","facebook",3,"href"],[1,"flaticon-facebook-letter-logo","text-dark"],["target","_blank",1,"style","twitter",3,"href"],[1,"flaticon-twitter-logo","text-dark"],[1,"navi-icon","style","cursor",3,"click","cdkCopyToClipboard"],[1,"flaticon2-copy","text-dark"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa","fa-check-square-o"],["target","_blank",3,"href"],["height","200px","width","200px",3,"src","alt"],[3,"optionChange","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionSelectFirstItemOnChangeApi"],["for","dataModel.toNumbers",1,"color-highlight"],["matInput","","name","dataModel.toNumbers","id","dataModel.toNumbers","type","text","placeholder","0912","rows","2",2,"height","138px",3,"ngModelChange","ngModel"],[1,"info-field-text"],[1,"row",2,"margin-bottom","0px !important","height","40px","bottom","4vh","justify-content","center"],["type","submit","class","message-box-button",3,"disabled",4,"ngIf"],["type","submit",1,"message-box-button",3,"disabled"]],template:function(e,t){if(e&1){let l=I();p(0,"app-cms-guide-notice",4),a(1,"div",5),p(2,"app-progress-spinner",6),a(3,"div",7)(4,"p",8),h(5),s(),a(6,"a",9),C("click",function(){return S(l),b(t.onFormCancel())}),p(7,"i",10),s(),p(8,"hr"),s(),a(9,"div",11)(10,"p",12),h(11),s(),p(12,"app-cms-form-result-message",13),a(13,"form",14,0),C("ngSubmit",function(){return S(l),b(t.onFormSubmit())}),a(15,"mat-tab-group")(16,"mat-tab",15),d(17,"translate"),a(18,"div",16),g(19,Nt,34,25,"div",17),s()(),a(20,"mat-tab",15),d(21,"translate"),a(22,"div",18)(23,"div",19)(24,"app-cms-sms-apipath-selector",20),d(25,"translate"),C("optionChange",function(_){return S(l),b(t.onActionSelectPrivateSiteConfig(_))}),s(),g(26,Ft,2,6,"app-cms-sms-api-number-selector",21),s(),a(27,"div",22)(28,"div",23),p(29,"div",24),a(30,"div",25)(31,"div",26)(32,"label",27),h(33),d(34,"translate"),s(),a(35,"textarea",28,1),ae("ngModelChange",function(_){return S(l),re(t.dataModel.message,_)||(t.dataModel.message=_),b(_)}),s(),a(37,"em"),h(38),s(),g(39,Dt,6,6,"mat-error",17),s()(),a(40,"div",29),g(41,Bt,10,7,"div",30),s(),g(42,Ht,2,1,"div",31),s()()()()()()()()}if(e&2){let l=P(36);r("Key","linkto.content"),o(2),r("optionsInfoAreaId",t.constructorInfoAreaId),o(3),M(t.formInfo.formTitle),o(6),A(" ",t.formInfo.formDescription," "),o(),r("formInfo",t.formInfo),o(),r("ngStyle",Ae(29,Vt,t.tokenInfo==null||t.tokenInfo.access==null?null:t.tokenInfo.access.direction)),o(3),r("label",v(u(17,21,"TITLE.LINKTO"))),o(3),r("ngIf",t.optionurlViewContent&&t.optionurlViewContent.length>0),o(),r("label",v(u(21,23,"TITLE.Send_Message"))),o(4),r("optionSelectForce",t.dataModel==null?null:t.dataModel.linkApiPathId)("optionPlaceholder",u(25,25,"TITLE.Direction"))("optionSelectFirstItem",!0),o(2),r("ngIf",(t.dataModel.linkApiPathId==null?null:t.dataModel.linkApiPathId.length)>0),o(7),M(u(34,27,"TITLE.Message_Text")),o(2),ne("ngModel",t.dataModel.message),o(3),A("",l.value.length," / 500"),o(),r("ngIf",l.errors==null?null:l.errors.required),o(2),r("ngIf",(!t.dataModel.toContactCategories||(t.dataModel.toContactCategories==null?null:t.dataModel.toContactCategories.length)===0)&&(!t.dataModel.toContactContents||(t.dataModel.toContactContents==null?null:t.dataModel.toContactContents.length)===0)),o(),r("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[V,Te,Be,N,F,Ne,Qe,He,De,Fe,je,D,ze,Ue,Oe,q,$e,Ze,Me,ve,Q],styles:[".style[_ngcontent-%COMP%]{padding:6px;margin:2px;font-size:20px;text-align:center;text-decoration:none;border:black solid 2px;border-radius:50%}.style-copy[_ngcontent-%COMP%]{color:#000;border-radius:20%}.whatsapp[_ngcontent-%COMP%]:hover{background-color:#adff2f}.facebook[_ngcontent-%COMP%]:hover{background:#3b5998}.twitter[_ngcontent-%COMP%]:hover{background:#55acee}.linkedin[_ngcontent-%COMP%]:hover{background:#007bb5}.telegram[_ngcontent-%COMP%]:hover{background:#125688}.cursor[_ngcontent-%COMP%]{cursor:pointer}.message-box[_ngcontent-%COMP%]{background-image:url(/assets/media/bg/iphone.png);height:600px;width:300px;background-position:center;background-repeat:no-repeat;background-size:cover;padding-right:33px;padding-left:33px}.message-box-button[_ngcontent-%COMP%]{color:#00f;border-color:transparent;background-color:transparent}.message-box-button[_ngcontent-%COMP%]:hover{color:red;font-size:initial}.message-box-button[_ngcontent-%COMP%]:active{color:#a200ff}"]});var ct=E;export{ct as a};
