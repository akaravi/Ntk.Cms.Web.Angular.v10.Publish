import{a as An}from"./chunk-3US7J5T3.js";import{a as zt}from"./chunk-2JTWFKVB.js";import{a as ai}from"./chunk-C3KOCAWN.js";import{a as Ao}from"./chunk-L63BYIPX.js";import{a as xt}from"./chunk-IXPEP4O3.js";import{a as yo}from"./chunk-LVLBPVBW.js";import{a as vt}from"./chunk-ITERST6X.js";import{a as Ct}from"./chunk-KGBITLML.js";import{a as Ft}from"./chunk-ZQ5XAX7G.js";import{a as Vt}from"./chunk-5FBNGFJF.js";import{a as Bt}from"./chunk-2NN3FGTU.js";import{a as En,b as yn,c as st,d as ct,e as dt,g as pt}from"./chunk-NZ7GXIXQ.js";import{a as Lt}from"./chunk-OL4YLV7Y.js";import{h as Qt}from"./chunk-P5MGVPSI.js";import{a as Tt}from"./chunk-Z6W4ZRMV.js";import{a as Me}from"./chunk-Q7HRBW6P.js";import{a as wn,b as Eo}from"./chunk-U6ICXYH4.js";import{a as Rt}from"./chunk-4EXBWSCP.js";import{a as H}from"./chunk-Q3TCANM4.js";import{b as lt,c as wo,f as F}from"./chunk-TKHTSCV5.js";import{$b as nt,Aa as gn,Ac as Mo,B as pn,Fb as So,Gb as Ue,Ha as re,Hb as Qe,Ia as ue,Ja as we,K as Te,Kb as ze,L as ve,M as Ce,Mb as Ke,Nb as Je,Nc as le,O as oo,Ob as Ye,Oc as O,P as ro,Pa as Fe,Qb as Cn,R as ke,Rb as In,Rc as ko,Sb as bn,T as ao,Tb as Mn,U as mn,Vb as Xe,Wb as Ze,Xb as $e,Yb as et,Zb as tt,_b as it,ac as ot,bc as rt,cc as at,dc as ho,eb as ae,gb as _n,hb as Tn,hc as _o,ib as vn,ic as To,jc as vo,kc as Co,l as no,lc as Io,ma as W,mc as bo,o as ee,oa as Be,pc as B,qc as N,r as te,s as Se,u as he,v as dn,w as fe,x as _e,ya as fn,za as un,zc as kn}from"./chunk-F4DV5AV4.js";import{Aa as an,Ab as X,Ba as Mt,Bb as Z,Cb as $,Cd as ri,E as en,Ea as o,Fd as je,Fl as fo,Gb as D,Gc as Et,Gl as yt,H as tn,Hc as oi,Hd as P,Hl as Ne,Ib as Re,Ic as V,Il as hn,Ja as u,Jl as uo,Kd as Sn,Kl as At,Lb as d,Ld as St,Ll as Oe,Mb as w,Mc as We,Ml as go,Nb as f,Nd as so,Nl as Ge,O as nn,Oa as R,Ob as to,Oc as Ve,Od as ht,Ol as Dt,P as on,Pa as ln,Pd as j,Pl as Ut,Rb as E,Sa as q,Sb as y,Tb as A,Td as z,Ua as C,Ub as x,Uc as io,Ud as K,Ul as kt,Vb as Gt,Vd as ie,Ve as po,Vl as Zn,Wa as Xt,Wl as Pe,X as rn,Xl as _t,Yb as He,Yl as ft,Zb as qe,ac as h,ae as U,ag as jt,bb as Ot,bc as _,ca as g,cc as ni,da as S,ee as co,hb as c,ib as r,jb as a,kb as T,ng as mo,ob as M,od as Ie,p as Zi,pb as k,pd as lo,q as $i,qb as xe,qd as oe,qq as G,rb as b,tc as L,ub as I,wb as m,wd as Xn,xb as sn,xd as Pt,yb as cn}from"./chunk-XE7RBGKI.js";import{i as Y}from"./chunk-SEDBTTTN.js";var Lo=["*"];function Vo(n,l){if(n&1&&(r(0,"label",13),d(1),a()),n&2){let e=m();c("for",Gt("app-cms-site-selector-",e.id)),o(),w(e.optionLabel)}}function Bo(n,l){if(n&1&&(T(0,"img",14),h(1,"cmsthumbnail")),n&2){let e=m();c("src",x(_(1,2,e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),Mt)}}function Fo(n,l){if(n&1&&(T(0,"img",14),h(1,"cmsthumbnail")),n&2){let e=m().$implicit;c("src",x(_(1,2,e.linkMainImageIdSrc)),Mt)}}function No(n,l){if(n&1&&(r(0,"mat-option",15),C(1,Fo,2,4,"img",5),r(2,"span"),d(3),a()()),n&2){let e=l.$implicit,i=m();c("value",e)("disabled",i.optionDisabled),o(),c("ngIf",e.linkMainImageIdSrc),o(2),w(i.displayOption(e))}}function Oo(n,l){n&1&&T(0,"i",16)}function Go(n,l){n&1&&T(0,"i",17)}function Po(n,l){if(n&1){let e=b();r(0,"i",18),I("click",function(){g(e);let t=m();return S(t.onActionSelectClear())}),a()}}function Ho(n,l){n&1&&(r(0,"em"),d(1),h(2,"translate"),a()),n&2&&(o(),f("(",_(2,1,"TITLE.Necessary"),")"))}var Kt=class Kt{constructor(l,e,i,t,s){this.coreEnumService=l;this.cdr=e;this.publicHelper=i;this.translate=t;this.categoryService=s;this.id=++Kt.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new j;this.dataModelSelect=new Pe;this.formControl=new dn;this.optionDisabled=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionRequired=!1;this.optionLabel="";this.optionChange=new Xt;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(nn(""),en(1500),tn(),on(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return Y(this,null,function*(){let e=new K;e.rowPerPage=20,e.accessLoad=!0;let i=new z;i.propertyName="Title",i.value=l,i.searchType=ri.Contains,i.clauseType=Pt.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new z,i.propertyName="Id",i.value=l,i.searchType=ri.Equal,i.clauseType=Pt.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield Zi(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe($i(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="number"&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess&&(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item))}});return}if(typeof l==typeof Pe){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new Pe,this.loadOptions()}};Kt.nextId=0,Kt.\u0275fac=function(e){return new(e||Kt)(u(U),u(L),u(F),u(B),u(Ne))},Kt.\u0275cmp=R({type:Kt,selectors:[["app-ticketing-departemen-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionRequired:"optionRequired",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:Lo,decls:16,vars:19,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=b();sn(),r(0,"div",1),T(1,"app-progress-spinner",2),C(2,Vo,2,3,"label",3),r(3,"span",4),C(4,Bo,2,4,"img",5),d(5," \xA0"),a(),T(6,"input",6),r(7,"mat-autocomplete",7,0),I("optionSelected",function(v){return g(t),S(i.onActionSelect(v.option.value))}),C(9,No,4,4,"mat-option",8),h(10,"async"),a(),C(11,Oo,1,0,"i",9)(12,Go,1,0,"i",10)(13,Po,1,0,"i",11)(14,Ho,3,3,"em",12),cn(15),a()}if(e&2){let t=D(8);o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),o(2),c("ngIf",i.dataModelSelect&&(i.dataModelSelect==null?null:i.dataModelSelect.linkMainImageIdSrc)),o(2),c("placeholder",x(i.optionPlaceholder))("id",Gt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),Ot("disabled",i.optionDisabled?!0:null),o(),c("displayWith",i.displayFn),o(2),c("ngForOf",_(10,17,i.filteredOptions)),o(2),c("ngIf",!i.formControl.valid),o(),c("ngIf",i.optionRequired&&i.formControl.valid),o(),c("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[oi,V,ee,te,Te,pn,Tn,_n,vn,ao,W,H,Ve,N,Qt],encapsulation:2});var Ee=Kt;var qo=["vform"];function Wo(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",11),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),S(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function jo(n,l){if(n&1){let e=b();r(0,"div",12)(1,"label",13),d(2),h(3,"translate"),a(),r(4,"textarea",14,1),h(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),S(t)}),d(7,"        "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),w(_(3,6,"TITLE.Answer_Text")),o(2),c("placeholder",x(_(6,8,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)),o(5),f("",e.value.length," / 1000")}}function Uo(n,l){if(n&1){let e=b();r(0,"div",15)(1,"button",16),I("click",function(){g(e);let t=m();return S(t.onActionBackToParent())}),d(2),h(3,"translate"),a(),r(4,"button",17),d(5),h(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),f(" ",_(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),f(" ",_(6,5,"ACTION.SAVE")," ")}}var li=class li extends Tt{constructor(e,i,t,s,v,p,Q,J,Ae,De){super(p,new kt,s,De);this.data=e;this.dialogRef=i;this.activatedRoute=t;this.publicHelper=s;this.coreEnumService=v;this.ticketingAnswerService=p;this.cmsToastrService=Q;this.router=J;this.cdr=Ae;this.translate=De;this.requestLinkTaskId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new ie;this.fieldsInfo=new Map;this.dataModel=new kt;this.dataModelResult=new j;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new xt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestLinkTaskId=+e.linkTaskId||0)}ngOnInit(){if(this.requestLinkTaskId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.dataModel.linkTaskId=this.requestLinkTaskId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingAnswerService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorAdd(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorAdd(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}};li.\u0275fac=function(i){return new(i||li)(u(ue),u(re),u(Ie),u(F),u(U),u(yt),u(O),u(oe),u(L),u(B))},li.\u0275cmp=R({type:li,selectors:[["app-ticketing-answer-add"]],viewQuery:function(i,t){if(i&1&&X(qo,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:15,vars:13,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=b();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),h(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return g(s),S(t.onFormSubmit())}),C(10,Wo,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),h(12,"translate"),I("optionChange",function(p){return g(s),S(t.onActionSelectSource(p))}),a(),C(13,jo,10,10,"div",9)(14,Uo,7,7,"div",10),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),f(" ",t.formInfo.formTitle," "),o(2),f(" ",_(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,11,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessAddField)),o(2),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,_e,ee,te,Se,ve,Ce,fe,he,W,Me,H,Ee,N],encapsulation:2});var Dn=li;var Qo=["vform"];function zo(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",11),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),S(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Ko(n,l){if(n&1){let e=b();r(0,"div",12)(1,"label",13),d(2),h(3,"translate"),a(),r(4,"textarea",14,1),h(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),S(t)}),d(7,"        "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),w(_(3,6,"TITLE.Answer_Text")),o(2),c("placeholder",x(_(6,8,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessEditField)),o(5),f("",e.value.length," / 1000")}}function Jo(n,l){if(n&1){let e=b();r(0,"div",15)(1,"button",16),I("click",function(){g(e);let t=m();return S(t.onActionBackToParent())}),d(2),h(3,"translate"),a(),r(4,"button",17),d(5),h(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),f(" ",_(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),f(" ",_(6,5,"ACTION.SAVE")," ")}}var si=class si extends Lt{constructor(e,i,t,s,v,p,Q,J,Ae,De){super(p,new kt,s,De);this.data=e;this.dialogRef=i;this.activatedRoute=t;this.publicHelper=s;this.coreEnumService=v;this.ticketingAnswerService=p;this.cmsToastrService=Q;this.router=J;this.cdr=Ae;this.translate=De;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new ie;this.dataModel=new kt;this.dataModelResult=new ht;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new xt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestId=+e.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull();return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(e){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.setAccessDataType(St.Editor),this.ticketingAnswerService.ServiceGetOneById(e).subscribe({next:t=>{this.dataAccessModel=t.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.publicHelper.processService.processStop(i),this.dataModelResult=t,this.formInfo.formSubmitAllow=!0,t.isSuccess?this.dataModel=t.item:this.cmsToastrService.typeErrorGetOne(t.errorMessage)},error:t=>{this.publicHelper.processService.processStop(i),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorGetOne(t)}})}DataEditContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingAnswerService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!1})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}}};si.\u0275fac=function(i){return new(i||si)(u(ue),u(re),u(Ie),u(F),u(U),u(yt),u(O),u(oe),u(L),u(B))},si.\u0275cmp=R({type:si,selectors:[["app-ticketing-answer-edit"]],viewQuery:function(i,t){if(i&1&&X(Qo,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:15,vars:13,consts:[["vform","ngForm"],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=b();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),h(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return g(s),S(t.onFormSubmit())}),C(10,zo,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),h(12,"translate"),I("optionChange",function(p){return g(s),S(t.onActionSelectSource(p))}),a(),C(13,Ko,10,10,"div",9)(14,Jo,7,7,"div",10),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),f(" ",t.formInfo.formTitle," "),o(2),f(" ",_(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,11,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessEditField)),o(2),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,_e,ee,te,Se,ve,Ce,fe,he,W,Me,H,Ee,N],encapsulation:2});var xn=si;var Yo=["vform"];function Xo(n,l){if(n&1){let e=b();r(0,"div",5)(1,"button",10),I("click",function(){g(e);let t=m();return S(t.onFormCancel())}),T(2,"i",11),d(3),h(4,"translate"),a()()}n&2&&(o(3),f(" ",_(4,1,"ACTION.CANCEL")," "))}var ci=class ci{constructor(l,e,i,t,s,v,p,Q,J,Ae){this.data=l;this.dialogRef=e;this.coreEnumService=i;this.ticketingAnswerService=t;this.cmsToastrService=s;this.tokenHelper=v;this.cmsStoreService=p;this.cdr=Q;this.publicHelper=J;this.translate=Ae;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new jt;this.dataModelResult=new j;this.dataModel=new kt;this.formInfo=new ie;this.dataModelEnumSendSmsStatusTypeResult=new j;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(l=>{this.formInfo.formTitle=l}),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.tokenInfo=l})),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:l=>{this.dataModelEnumSendSmsStatusTypeResult=l}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingAnswerService.setAccessLoad(),this.ticketingAnswerService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,console.log(this.dataModel),e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};ci.\u0275fac=function(e){return new(e||ci)(u(ue),u(re),u(U),u(yt),u(O),u(le),u(ae),u(L),u(F),u(B))},ci.\u0275cmp=R({type:ci,selectors:[["app-ticketing-answer-view"]],viewQuery:function(e,i){if(e&1&&X(Yo,5),e&2){let t;Z(t=$())&&(i.formGroup=t.first)}},standalone:!1,decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(r(0,"div",0),d(1),a(),r(2,"div",1),T(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),a(),r(5,"div",4)(6,"div",5)(7,"small",6),d(8),a(),r(9,"small",7),d(10),a()()(),r(11,"div",8),C(12,Xo,5,3,"div",9),a()),e&2&&(o(),f(" ",i.formInfo.formTitle," "),o(2),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("dataModel",i.dataModel)("optionMethod",1),o(4),f("",i.formInfo.formAlert," "),o(2),f("",i.formInfo.formError," "),o(2),c("ngIf",i.formInfo.formSubmitAllow))},dependencies:[V,H,yo,N],encapsulation:2});var Rn=ci;function Zo(n,l){n&1&&T(0,"div",10)}function $o(n,l){if(n&1&&(r(0,"div",4)(1,"div",5)(2,"b"),d(3),h(4,"translate"),a(),d(5,": "),a(),T(6,"div",15)(7,"div",12)(8,"div",11),a()),n&2){let e=m();o(3),f("",_(4,2,"TITLE.Description")," "),o(3),c("innerText",e.dataModelResult.item.htmlBody)}}var di=class di{constructor(l,e,i,t,s,v,p,Q){this.headerService=l;this.publicHelper=e;this.cdr=i;this.cmsToastrService=t;this.dialog=s;this.translate=v;this.cmsStoreService=p;this.tokenHelper=Q;this.constructorInfoAreaId=this.constructor.name;this.optionId=0;this.dataModelResult=new j;this.fieldsInfo=new Map;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){this.optionId>0&&this.DataGetOneContent(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.DataGetOneContent()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.headerService.setAccessLoad(),this.headerService.ServiceGetOneById(this.optionId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),e.isSuccess?this.dataModelResult=e:this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l)}})}};di.\u0275fac=function(e){return new(e||di)(u(Ge),u(F),u(L),u(O),u(we),u(B),u(ae),u(le))},di.\u0275cmp=R({type:di,selectors:[["app-ticketing-task-header"]],inputs:{optionId:"optionId"},standalone:!1,decls:33,vars:11,consts:[[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content"],[1,"table"],[1,"tr"],[1,"td","small-width"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"],[1,"td","large-width",2,"color","darkblue"],["class","td",4,"ngIf"],[1,"td","large-width"],[1,"td"],[2,"clear","both"],[1,"td",2,"text-align","left"],["class","tr",4,"ngIf"],[1,"divider","divider-margins"],[1,"td","large-width",3,"innerText"]],template:function(e,i){e&1&&(r(0,"div",0),T(1,"app-progress-spinner",1),r(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),T(6,"span",6),a(),r(7,"div",7)(8,"h5")(9,"b"),d(10),h(11,"translate"),a()()(),C(12,Zo,1,0,"div",8),a(),r(13,"div",4)(14,"div",5)(15,"b"),d(16),a(),d(17,": "),a(),r(18,"div",9),d(19),a(),T(20,"div",10)(21,"div",11),a(),r(22,"div",4)(23,"div",5)(24,"b"),d(25),a(),d(26,": "),a(),r(27,"div",9),d(28),a(),T(29,"div",12)(30,"div",11),a(),C(31,$o,9,4,"div",13),a()()(),T(32,"div",14)),e&2&&(o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(5),c("inlineSVG","./assets/media/svg/icons/Communication/Flag.svg"),o(4),f(" ",_(11,9,"TITLE.Selected_Ticket")," "),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.item==null?null:i.dataModelResult.item.id),o(4),f("",i.fieldsInfo.id==null?null:i.fieldsInfo.id.fieldTitle," "),o(3),w(i.dataModelResult==null||i.dataModelResult.item==null?null:i.dataModelResult.item.id),o(6),f("",i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle," "),o(3),w(i.dataModelResult==null||i.dataModelResult.item==null?null:i.dataModelResult.item.title),o(3),c("ngIf",(i.dataModelResult==null||i.dataModelResult.item==null||i.dataModelResult.item.htmlBody==null?null:i.dataModelResult.item.htmlBody.length)>0))},dependencies:[V,H,wo,N],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40a1f5;padding:2px;background:#fff;border-radius:5px}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f577;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40a1f5;color:#3d7c7a}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.small-width[_ngcontent-%COMP%]{width:90px}.large-width[_ngcontent-%COMP%]{width:400px}.clear[_ngcontent-%COMP%]{clear:both}"]});var Ln=di;var tr=()=>[5,10,20,100],ir=n=>({background:n});function nr(n,l){if(n&1&&T(0,"app-ticketing-task-header",39),n&2){let e=m();c("optionId",e.requestLinkTaskId)}}function or(n,l){if(n&1){let e=b();r(0,"a",40),I("click",function(){g(e);let t=m();return S(t.onActionBackToParent())}),T(1,"i",41),a()}}function rr(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",43),I("click",function(){g(e);let t=m();return S(t.onActionButtonNewRow())}),T(2,"i",44)(3,"br"),a(),r(4,"p",45),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.ADD")," "))}function ar(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",46),I("click",function(){g(e);let t=m();return S(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",47)(3,"br"),a(),r(4,"p",45),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.EDIT")," "))}function lr(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",48),I("click",function(){g(e);let t=m();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",49)(3,"br"),a(),r(4,"p",45),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.DELETE")," "))}function sr(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",50),I("click",function(){g(e);let t=m();return S(t.onActionButtonViewRow(t.tableRowSelected))}),T(2,"i",51)(3,"br"),a(),r(4,"p",45),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.VIEW")," "))}function cr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function dr(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.id," ")}}function pr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.linkTaskId==null?null:e.fieldsInfo.linkTaskId.fieldTitle," ")}}function mr(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.linkTaskId," ")}}function fr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function ur(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.linkMemberId," ")}}function gr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Sr(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),f(" ",_(2,1,e.createdDate)," ")}}function hr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function _r(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),f(" ",_(2,1,e.updatedDate)," ")}}function Tr(n,l){if(n&1&&(r(0,"mat-header-cell",52),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.answerStatus==null?null:e.fieldsInfo.answerStatus.fieldTitle," ")}}function vr(n,l){if(n&1&&(r(0,"mat-cell",53),d(1),h(2,"enums"),a()),n&2){let e=l.$implicit,i=m();c("ngStyle",qe(5,ir,i.publicHelper.RowStyleAnswerStatus(e.ticketStatus))),o(),f(" ",ni(2,2,e.answerStatus,i.dataModelEnumAnswerStatusResult.listItems)," ")}}function Cr(n,l){n&1&&(r(0,"mat-header-cell"),d(1),h(2,"translate"),a()),n&2&&(o(),f(" ",_(2,1,"TITLE.OPTION")," "))}function Ir(n,l){if(n&1&&(r(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5),i=m();o(),c("matMenuTriggerFor",e)("disabled",!i.dataModelResult.access.accessEditRow&&!i.dataModelResult.access.accessDeleteRow)}}function br(n,l){n&1&&T(0,"mat-header-row")}function Mr(n,l){if(n&1){let e=b();r(0,"mat-row",56),I("click",function(){let t=g(e).$implicit,s=m();return S(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var pi=class pi extends st{constructor(e,i,t,s,v,p,Q,J,Ae,De,wt,mt,ji){super(e,new kt,mt,p,Ae);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=v;this.tokenHelper=p;this.cdr=Q;this.cmsStoreService=J;this.translate=Ae;this.ticketingEnumService=De;this.pageInfo=wt;this.publicHelper=mt;this.dialog=ji;this.requestLinkTaskId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.dataModelEnumAnswerStatusResult=new j;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkTaskId","LinkMemberId","CreatedDate","UpdatedDate","AnswerStatus"];this.tabledisplayedColumnsMobileSource=["Id","LinkTaskId","LinkMemberId","CreatedDate","UpdatedDate","AnswerStatus"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Yn=>this.onSubmitOptionsSearch(Yn)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Ascending}ngOnInit(){this.requestLinkTaskId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkTaskId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.getEnumAnswerStatus(),this.tokenInfo=e,this.DataGetAll()})),this.getEnumAnswerStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}getEnumAnswerStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:e=>{this.dataModelEnumAnswerStatusResult=e}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new kt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestLinkTaskId>0&&(t.propertyName="LinkTaskId",t.value=this.requestLinkTaskId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTaskId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestLinkTaskId==null||this.requestLinkTaskId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Dn,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{linkTaskId:this.requestLinkTaskId>0?this.requestLinkTaskId:this.categoryModelSelected.id}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Rn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(xn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let v=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(v,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(v)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(v)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/task/"])}};pi.\u0275fac=function(i){return new(i||pi)(u(yt),u(Ie),u(O),u(Rt),u(oe),u(le),u(L),u(ae),u(B),u(Ut),u(lt),u(F),u(we))},pi.\u0275cmp=R({type:pi,selectors:[["app-ticketing-answer-list"]],standalone:!1,features:[q],decls:59,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionId",4,"ngIf"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkTaskId"],["matColumnDef","LinkMemberId"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","AnswerStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[3,"optionId"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","box-shadow-button","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor","disabled"],[1,"ntk-row-mainfild",3,"click"]],template:function(i,t){if(i&1){let s=b();C(0,nr,1,1,"app-ticketing-task-header",3),r(1,"app-cms-html-list",4),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),S(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),S(t.onActionButtonPrintRow())}),M(2,5),d(3," -------------------------------------- "),k(),xe(4,6)(5,7),M(6,8),C(7,or,2,0,"a",9),r(8,"a",10),I("click",function(){return g(s),S(t.viewGuideNotice=!t.viewGuideNotice)}),T(9,"i",11),a(),r(10,"a",10),I("click",function(){return g(s),S(t.onActionButtonReload())}),T(11,"i",12),a(),k(),M(12,13),r(13,"a",14),I("click",function(){return g(s),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(14,"mat-slide-toggle",15),d(15),h(16,"translate"),a(),r(17,"a",14),I("click",function(){return g(s),S(t.onActionButtonStatist())}),T(18,"mat-slide-toggle",15),d(19),h(20,"translate"),a(),k(),M(21,16),C(22,rr,7,3,"div",17),k(),M(23,18),C(24,ar,7,3,"div",17)(25,lr,7,3,"div",17)(26,sr,7,3,"div",17),k(),M(27,19),r(28,"app-cms-search-list",20),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),S(p)}),a(),r(29,"app-cms-statist-list",20),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),S(p)}),a(),k(),M(30,21),r(31,"mat-table",22,0),I("matSortChange",function(){g(s);let p=D(32);return S(t.onTableSortData(p))}),M(33,23),C(34,cr,2,1,"mat-header-cell",24)(35,dr,2,1,"mat-cell",25),k(),M(36,26),C(37,pr,2,1,"mat-header-cell",24)(38,mr,2,1,"mat-cell",25),k(),M(39,27),C(40,fr,2,1,"mat-header-cell",24)(41,ur,2,1,"mat-cell",25),k(),M(42,28),C(43,gr,2,1,"mat-header-cell",24)(44,Sr,3,3,"mat-cell",25),k(),M(45,29),C(46,hr,2,1,"mat-header-cell",24)(47,_r,3,3,"mat-cell",25),k(),M(48,30),C(49,Tr,2,1,"mat-header-cell",24)(50,vr,3,7,"mat-cell",31),k(),M(51,32),C(52,Cr,3,3,"mat-header-cell",33)(53,Ir,6,2,"mat-cell",34),k(),C(54,br,1,0,"mat-header-row",35)(55,Mr,1,2,"mat-row",36),a(),k(),M(56,37),r(57,"mat-paginator",38,1),I("page",function(p){return g(s),S(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("ngIf",t.requestLinkTaskId>0),o(),c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestLinkTaskId>0),o(7),c("checked",t.optionsSearch.data.show),o(),f("",_(16,26,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),f("",_(20,28,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(23),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(30,tr)))},dependencies:[V,We,Be,Fe,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Ln,N,ai,Ct],encapsulation:2});var Ui=pi;var wr=["vform"];function Er(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",14),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),S(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function yr(n,l){n&1&&T(0,"i",21)}function Ar(n,l){n&1&&T(0,"i",22)}function Dr(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function xr(n,l){if(n&1){let e=b();r(0,"div",15)(1,"label",16),d(2),a(),r(3,"input",17,1),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),S(t)}),a(),C(5,yr,1,0,"i",18)(6,Ar,1,0,"i",19),r(7,"em"),d(8),a(),C(9,Dr,5,4,"mat-error",20),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Rr(n,l){if(n&1&&(T(0,"img",23),h(1,"cmsthumbnail")),n&2){let e=m();c("src",x(_(1,2,e.dataModel.linkMainImageIdSrc)),Mt)}}function Lr(n,l){if(n&1){let e=b();r(0,"div",15)(1,"label",24),I("click",function(){g(e);let t=m();return S(t.fileManagerOpenForm=!0)}),d(2),h(3,"translate"),a(),r(4,"input",25,2),h(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),S(t)}),I("click",function(){g(e);let t=m();return S(t.fileManagerOpenForm=!0)}),a(),r(7,"cms-file-manager",26),I("itemSelected",function(t){g(e);let s=m();return S(s.onActionFileSelected(t))}),A("openFormChange",function(t){g(e);let s=m();return y(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),S(t)}),a()()}if(n&2){let e=m();o(2),w(_(3,12,"TITLE.Icon_File")),o(2),c("placeholder",x(_(6,14,"TITLE.Original_File_ID"))),E("ngModel",e.dataModel.linkMainImageId),o(3),c("language",e.appLanguage)("isPopup",!0),E("openForm",e.fileManagerOpenForm),c("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Vr(n,l){if(n&1){let e=b();r(0,"div",27)(1,"button",28),I("click",function(){g(e);let t=m();return S(t.onFormCancel())}),T(2,"i",29),d(3),h(4,"translate"),a(),r(5,"button",30),T(6,"i",31),d(7),h(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),f(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),f(" ",_(8,5,"ACTION.SAVE")," ")}}var Ci=class Ci extends Lt{constructor(e,i,t,s,v,p,Q,J){super(s,new Pe,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingDepartemenService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new ht;this.dataModel=new Pe;this.formInfo=new ie;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(St.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ci.\u0275fac=function(i){return new(i||Ci)(u(ue),u(re),u(U),u(Ne),u(O),u(F),u(L),u(B))},Ci.\u0275cmp=R({type:Ci,selectors:[["app-ticketing-departemen-edit"]],viewQuery:function(i,t){if(i&1&&X(wr,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:18,vars:14,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),h(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return g(s),S(t.onFormSubmit())}),C(10,Er,1,5,"app-cms-enum-record-status-selector",8)(11,xr,10,9,"div",9),r(12,"div",10)(13,"a",11),h(14,"cmsthumbnail"),C(15,Rr,2,4,"img",12),a()(),C(16,Lr,8,16,"div",9)(17,Vr,9,7,"div",13),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),f(" ",t.formInfo.formTitle," "),o(2),f(" ",_(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(2),c("href",x(_(14,12,t.dataModel.linkMainImageIdSrc)),Mt),o(2),c("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),o(),c("ngIf",t.fieldsInfo.linkMainImageId==null?null:t.fieldsInfo.linkMainImageId.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,_e,ee,te,Se,Te,ve,Ce,fe,he,ke,W,Me,H,kn,N,Qt],encapsulation:2});var Wt=Ci;var Br=["vform"];function Fr(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",14),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),S(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Nr(n,l){n&1&&T(0,"i",21)}function Or(n,l){n&1&&T(0,"i",22)}function Gr(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Pr(n,l){if(n&1){let e=b();r(0,"div",15)(1,"label",16),d(2),a(),r(3,"input",17,1),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),S(t)}),a(),C(5,Nr,1,0,"i",18)(6,Or,1,0,"i",19),r(7,"em"),d(8),a(),C(9,Gr,5,4,"mat-error",20),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Hr(n,l){if(n&1&&(T(0,"img",23),h(1,"cmsthumbnail")),n&2){let e=m();c("src",x(_(1,2,e.dataModel.linkMainImageIdSrc)),Mt)}}function qr(n,l){if(n&1){let e=b();r(0,"div",15)(1,"label",24),I("click",function(){g(e);let t=m();return S(t.fileManagerOpenForm=!0)}),d(2),h(3,"translate"),a(),r(4,"input",25,2),h(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.linkMainImageId,t)||(s.dataModel.linkMainImageId=t),S(t)}),I("click",function(){g(e);let t=m();return S(t.fileManagerOpenForm=!0)}),a(),r(7,"cms-file-manager",26),I("itemSelected",function(t){g(e);let s=m();return S(s.onActionFileSelected(t))}),A("openFormChange",function(t){g(e);let s=m();return y(s.fileManagerOpenForm,t)||(s.fileManagerOpenForm=t),S(t)}),a()()}if(n&2){let e=m();o(2),w(_(3,12,"TITLE.Icon_File")),o(2),c("placeholder",x(_(6,14,"TITLE.Original_File_ID"))),E("ngModel",e.dataModel.linkMainImageId),o(3),c("language",e.appLanguage)("isPopup",!0),E("openForm",e.fileManagerOpenForm),c("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",e.selectFileTypeMainImage)("openFilemanagerButtonView",!1)}}function Wr(n,l){if(n&1){let e=b();r(0,"div",27)(1,"button",28),I("click",function(){g(e);let t=m();return S(t.onFormCancel())}),T(2,"i",29),d(3),h(4,"translate"),a(),r(5,"button",30),T(6,"i",31),d(7),h(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),f(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),f(" ",_(8,5,"ACTION.SAVE")," ")}}var Ii=class Ii extends Tt{constructor(e,i,t,s,v,p,Q,J){super(s,new Pe,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingDepartemenService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new j;this.dataModel=new Pe;this.formInfo=new ie;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}onActionFileSelected(e){this.dataModel.linkMainImageId=e.id,this.dataModel.linkMainImageIdSrc=e.downloadLinksrc}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ii.\u0275fac=function(i){return new(i||Ii)(u(ue),u(re),u(U),u(Ne),u(O),u(F),u(L),u(B))},Ii.\u0275cmp=R({type:Ii,selectors:[["app-ticketing-departemen-add"]],viewQuery:function(i,t){if(i&1&&X(Br,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:18,vars:14,consts:[["vform","ngForm"],["Title",""],["LinkMainImageId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"mb-3"],["target","_blank",3,"href"],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["for","dataModel.linkMainImageId",1,"color-highlight",3,"click"],["matInput","","type","text","name","dataModel.linkMainImageId","autocomplete","off","id","dataModel.linkMainImageId",1,"form-control","validate-name",3,"ngModelChange","click","ngModel","placeholder"],[3,"itemSelected","openFormChange","language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),h(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return g(s),S(t.onFormSubmit())}),C(10,Fr,1,5,"app-cms-enum-record-status-selector",8)(11,Pr,10,9,"div",9),r(12,"div",10)(13,"a",11),h(14,"cmsthumbnail"),C(15,Hr,2,4,"img",12),a()(),C(16,qr,8,16,"div",9)(17,Wr,9,7,"div",13),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),f(" ",t.formInfo.formTitle," "),o(2),f(" ",_(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(2),c("href",x(_(14,12,t.dataModel.linkMainImageIdSrc)),Mt),o(2),c("ngIf",(t.dataModel==null||t.dataModel.linkMainImageIdSrc==null?null:t.dataModel.linkMainImageIdSrc.length)>0),o(),c("ngIf",t.fieldsInfo.linkMainImageId==null?null:t.fieldsInfo.linkMainImageId.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,_e,ee,te,Se,Te,ve,Ce,fe,he,ke,W,Me,H,kn,N,Qt],encapsulation:2});var bi=Ii;var jr=["vform"];function Ur(n,l){if(n&1){let e=b();M(0),r(1,"div",7)(2,"label",8),d(3),a(),r(4,"input",9,0),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModelResultCategory.item.title,t)||(s.dataModelResultCategory.item.title=t),S(t)}),a()(),k()}if(n&2){let e=m();o(3),w(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)),E("ngModel",e.dataModelResultCategory.item.title)}}function Qr(n,l){if(n&1){let e=b();r(0,"div",10)(1,"button",11),I("click",function(){g(e);let t=m();return S(t.onFormCancel())}),T(2,"i",12),d(3),h(4,"translate"),a(),r(5,"button",13),I("click",function(){g(e);let t=m();return S(t.onFormDelete())}),T(6,"i",14),d(7),h(8,"translate"),a()()}if(n&2){let e=m();o(3),f(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.formInfo.buttonSubmittedEnabled),o(2),f(" ",_(8,5,"ACTION.DELETE")," ")}}var Mi=class Mi{constructor(l,e,i,t,s,v,p){this.data=l;this.dialogRef=e;this.publicHelper=i;this.ticketingDepartemenService=t;this.cdr=s;this.translate=v;this.cmsToastrService=p;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResultCategory=new j;this.dataModelResultCategoryAllData=new j;this.dataModel={};this.formInfo=new ie;this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.requestId<=0){this.cmsToastrService.typeErrorDeleteRowIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(),this.DataGetAll()}DataGetOne(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.translate.get("TITLE.Loading_Information").subscribe(e=>{this.formInfo.formAlert=e});let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingDepartemenService.setAccessLoad(),this.ticketingDepartemenService.setAccessDataType(St.Editor),this.ticketingDepartemenService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResultCategory=e,e.isSuccess?this.formInfo.formAlert="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorGetOne()),this.formInfo.formErrorStatus=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l)}})}DataGetAll(){this.translate.get("TITLE.Loading_Information").subscribe(i=>{this.formInfo.formAlert=i});let l=new K;l.rowPerPage=100;let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceGetAll(l).subscribe({next:i=>{this.dataModelResultCategoryAllData=i,i.isSuccess?this.formInfo.formAlert="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorGetAll()),this.publicHelper.processService.processStop(e)},error:i=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onFormDelete(){if(this.requestId===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.formInfo.formSubmitAllow=!1,this.formInfo.buttonSubmittedEnabled=!1;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingDepartemenService.ServiceDelete(this.requestId).subscribe({next:e=>{this.formInfo.formSubmitAllow=!e.isSuccess,e.isSuccess?(this.translate.get("MESSAGE.Deletion_Was_Successful").subscribe(i=>{this.formInfo.formAlert=i}),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.buttonSubmittedEnabled=!0,this.publicHelper.processService.processStop(l)},error:e=>{this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(e),this.formInfo.buttonSubmittedEnabled=!0,this.publicHelper.processService.processStop(l)}})}onFormChangeNewCatId(l){if(this.formInfo.formAlert="",this.requestId===0||!l||l.id<=0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}this.dataModel.newCatId=l.id,this.dataModel.newCatId===this.requestId?(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.translate.get("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category").subscribe(e=>{this.formInfo.formError=e}),this.formInfo.buttonSubmittedEnabled=!1):(this.formInfo.buttonSubmittedEnabled=!0,this.formInfo.formError="")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Mi.\u0275fac=function(e){return new(e||Mi)(u(ue),u(re),u(F),u(Ne),u(L),u(B),u(O))},Mi.\u0275cmp=R({type:Mi,selectors:[["app-ticketing-departemen-delete"]],viewQuery:function(e,i){if(e&1&&X(jr,5),e&2){let t;Z(t=$())&&(i.formGroup=t.first)}},standalone:!1,decls:10,vars:7,consts:[["Title",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModelResultCategory.item.title",1,"color-highlight"],["matInput","","type","text","name","dataModelResultCategory.item.title","id","dataModelResultCategory.item.title","minlength","3","maxlength","50","readonly","",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click","disabled"],[1,"fa","fa-check-square-o"]],template:function(e,i){e&1&&(r(0,"div",1),T(1,"app-progress-spinner",2),r(2,"div",3)(3,"p",4),d(4),a(),r(5,"p"),d(6),h(7,"translate"),a(),C(8,Ur,6,4,"ng-container",5)(9,Qr,9,7,"div",6),a()()),e&2&&(o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(3),f(" ",i.formInfo.formTitle," "),o(2),f(" ",_(7,5,"TITLE.Be_Careful_When_Entering_Information")," "),o(2),c("ngIf",i.dataModelResultCategory==null?null:i.dataModelResultCategory.item),o(),c("ngIf",i.formInfo.formSubmitAllow))},dependencies:[V,ee,te,ve,Ce,fe,W,H,N],encapsulation:2});var ki=Mi;var zr=()=>[5,10,20,100],Kr=n=>({display:n});function Jr(n,l){if(n&1){let e=b();r(0,"div",17)(1,"a",44),I("click",function(){g(e);let t=m();return S(t.onActionButtonNewRow())}),T(2,"i",45)(3,"br"),a(),r(4,"p",20),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.ADD")," "))}function Yr(n,l){if(n&1){let e=b();r(0,"div",17)(1,"a",46),I("click",function(){g(e);let t=m();return S(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",47)(3,"br"),a(),r(4,"p",20),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.EDIT")," "))}function Xr(n,l){if(n&1){let e=b();r(0,"div",17)(1,"a",48),I("click",function(){g(e);let t=m();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",49)(3,"br"),a(),r(4,"p",20),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.DELETE")," "))}function Zr(n,l){n&1&&(r(0,"mat-header-cell",50),d(1),h(2,"translate"),a()),n&2&&(o(),f(" ",_(2,1,"TITLE.PICTURE")," "))}function $r(n,l){if(n&1&&(T(0,"img",52),h(1,"cmsthumbnail")),n&2){let e=m().$implicit;c("src",x(_(1,2,e.linkMainImageIdSrc)),Mt)}}function ea(n,l){if(n&1&&(r(0,"mat-cell"),C(1,$r,2,4,"img",51),a()),n&2){let e=l.$implicit;o(),c("ngIf",(e==null||e.linkMainImageIdSrc==null?null:e.linkMainImageIdSrc.length)>0)}}function ta(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function ia(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.id," ")}}function na(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function oa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"cmssiteinfo"),h(3,"async"),a()),n&2){let e=l.$implicit;o(),f(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function ra(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function aa(n,l){if(n&1&&T(0,"select",55),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,Kr,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function la(n,l){if(n&1&&(r(0,"mat-cell",53),h(1,"statusCellClass"),T(2,"i",53),h(3,"statusIconClass"),C(4,aa,1,5,"select",54),a()),n&2){let e=l.$implicit,i=m();c("ngClass",_(1,3,e.recordStatus)),o(2),c("ngClass",_(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function sa(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function ca(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.title," ")}}function da(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function pa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),f(" ",_(2,1,e.createdDate)," ")}}function ma(n,l){if(n&1&&(r(0,"mat-header-cell",50),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function fa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),f(" ",_(2,1,e.updatedDate)," ")}}function ua(n,l){n&1&&(r(0,"mat-header-cell"),d(1),h(2,"translate"),a()),n&2&&(o(),f(" ",_(2,1,"TITLE.OPTION")," "))}function ga(n,l){if(n&1&&(r(0,"mat-cell",56)(1,"button",57)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Sa(n,l){n&1&&T(0,"mat-header-row")}function ha(n,l){if(n&1){let e=b();r(0,"mat-row",58),I("click",function(){let t=g(e).$implicit,s=m();return S(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var wi=class wi extends st{constructor(e,i,t,s,v,p,Q,J,Ae,De){super(e,new Pe,Ae,s,p);this.contentService=e;this.cmsToastrService=i;this.router=t;this.tokenHelper=s;this.cdr=v;this.translate=p;this.cmsStoreService=Q;this.pageInfo=J;this.publicHelper=Ae;this.dialog=De;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["LinkMainImageIdSrc","Id","RecordStatus"];this.tabledisplayedColumnsMobileSource=["LinkMainImageIdSrc","Id","RecordStatus"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:wt=>this.onSubmitOptionsSearch(wt)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Pe);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess&&(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(bi,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Wt,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(ki,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonFaqList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/faq/",this.tableRowSelected.id])}onActionButtonTemplateList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/template/",this.tableRowSelected.id])}onActionButtonLogList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/departemenlog/DepartemenId/",this.tableRowSelected.id])}onActionButtonTaskList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.onActionTableRowSelect(e),this.router.navigate(["/ticketing/task/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}};wi.\u0275fac=function(i){return new(i||wi)(u(Ne),u(O),u(oe),u(le),u(L),u(B),u(ae),u(lt),u(F),u(we))},wi.\u0275cmp=R({type:wi,selectors:[["app-ticketing-departemen-list"]],standalone:!1,features:[q],decls:87,vars:40,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-ticket","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-question","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-memo","font-18",2,"color","#ffffff"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","LinkMainImageIdSrc"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Id"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","40","width","40",3,"src",4,"ngIf"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),S(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),S(t.onActionButtonPrintRow())}),M(1,4),d(2," -------------------------------------- "),k(),xe(3,5)(4,6),M(5,7),r(6,"a",8),I("click",function(){return g(s),S(t.viewGuideNotice=!t.viewGuideNotice)}),T(7,"i",9),a(),r(8,"a",8),I("click",function(){return g(s),S(t.onActionButtonReload())}),T(9,"i",10),a(),k(),M(10,11),r(11,"a",12),I("click",function(){return g(s),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(12,"mat-slide-toggle",13),d(13),h(14,"translate"),a(),r(15,"a",12),I("click",function(){return g(s),S(t.onActionButtonStatist())}),T(16,"mat-slide-toggle",13),d(17),h(18,"translate"),a(),k(),M(19,14),C(20,Jr,7,3,"div",15),k(),M(21,16),C(22,Yr,7,3,"div",15)(23,Xr,7,3,"div",15),r(24,"div",17)(25,"a",18),I("click",function(){return g(s),S(t.onActionButtonTaskList(t.tableRowSelected))}),T(26,"i",19)(27,"br"),a(),r(28,"p",20),d(29),h(30,"translate"),a()(),r(31,"div",17)(32,"a",18),I("click",function(){return g(s),S(t.onActionButtonFaqList(t.tableRowSelected))}),T(33,"i",21)(34,"br"),a(),r(35,"p",20),d(36),h(37,"translate"),a()(),r(38,"div",17)(39,"a",18),I("click",function(){return g(s),S(t.onActionButtonTemplateList(t.tableRowSelected))}),T(40,"i",22)(41,"br"),a(),r(42,"p",20),d(43),h(44,"translate"),a()(),r(45,"div",17)(46,"a",18),I("click",function(){return g(s),S(t.onActionButtonLogList(t.tableRowSelected))}),T(47,"i",22)(48,"br"),a(),r(49,"p",20),d(50),h(51,"translate"),a()(),k(),M(52,23),r(53,"app-cms-search-list",24),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),S(p)}),a(),r(54,"app-cms-statist-list",24),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),S(p)}),a(),k(),M(55,25),r(56,"mat-table",26,0),I("matSortChange",function(){g(s);let p=D(57);return S(t.onTableSortData(p))}),M(58,27),C(59,Zr,3,3,"mat-header-cell",28)(60,ea,2,1,"mat-cell",29),k(),M(61,30),C(62,ta,2,1,"mat-header-cell",28)(63,ia,2,1,"mat-cell",29),k(),M(64,31),C(65,na,2,1,"mat-header-cell",28)(66,oa,4,5,"mat-cell",29),k(),M(67,32),C(68,ra,2,1,"mat-header-cell",28)(69,la,5,7,"mat-cell",33),k(),M(70,34),C(71,sa,2,1,"mat-header-cell",28)(72,ca,2,1,"mat-cell",29),k(),M(73,35),C(74,da,2,1,"mat-header-cell",28)(75,pa,3,3,"mat-cell",29),k(),M(76,36),C(77,ma,2,1,"mat-header-cell",28)(78,fa,3,3,"mat-cell",29),k(),M(79,37),C(80,ua,3,3,"mat-header-cell",38)(81,ga,6,1,"mat-cell",39),k(),C(82,Sa,1,0,"mat-header-row",40)(83,ha,1,2,"mat-row",41),a(),k(),M(84,42),r(85,"mat-paginator",43,1),I("page",function(p){return g(s),S(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.departemen.list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(12),c("checked",t.optionsSearch.data.show),o(),f("",_(14,27,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),f("",_(18,29,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(6),f(" ",_(30,31,"ACTION.TICKETS")," "),o(7),f(" ",_(37,33,"ACTION.QUESTIONS")," "),o(7),f(" ",_(44,35,"ACTION.TEMPLATES")," "),o(7),f(" ",_(51,37,"ACTION.LOGS")," "),o(3),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(26),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(39,zr)))},dependencies:[Et,V,We,Be,Fe,W,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Vt,Ve,N,vt,Qt,Ct,Bt,Ft],encapsulation:2});var Vn=wi;function _a(n,l){if(n&1){let e=b();r(0,"button",14),I("click",function(){g(e);let t=m();return S(t.onActionAdd())}),d(1),h(2,"translate"),a()}n&2&&(o(),f(" ",_(2,1,"ACTION.ADD")," "))}function Ta(n,l){if(n&1){let e=b();r(0,"button",15),I("click",function(){g(e);let t=m();return S(t.onActionEdit())}),d(1),h(2,"translate"),a()}n&2&&(o(),f(" ",_(2,1,"ACTION.EDIT")," "))}function va(n,l){if(n&1){let e=b();r(0,"button",16),I("click",function(){g(e);let t=m();return S(t.onActionDelete())}),d(1),h(2,"translate"),a()}n&2&&(o(),f(" ",_(2,1,"ACTION.DELETE")," "))}function Ca(n,l){if(n&1){let e=b();r(0,"button",17),I("click",function(){g(e);let t=m();return S(t.onActionButtonReload())}),r(1,"mat-icon",18),h(2,"translate"),d(3,"refresh"),a()()}n&2&&(o(),c("title",x(_(2,2,"ACTION.RELOAD"))))}function Ia(n,l){if(n&1){let e=b();r(0,"mat-tree-node",19),T(1,"button",20),r(2,"span",21),I("click",function(){let t=g(e).$implicit,s=m();return S(s.onActionSelect(t))}),d(3),a()()}if(n&2){let e=l.$implicit,i=m();Re("ntk-tree-selected",i.dataModelSelect.id>0&&i.dataModelSelect.id===e.id),o(3),w(e.title)}}function ba(n,l){if(n&1){let e=b();r(0,"mat-tree-node",22)(1,"button",23)(2,"mat-icon",24),d(3),a()(),r(4,"span",21),I("click",function(){let t=g(e).$implicit,s=m();return S(s.onActionSelect(t))}),d(5),a()()}if(n&2){let e=l.$implicit,i=m(),t=D(12);Re("ntk-tree-selected",i.dataModelSelect.id>0&&i.dataModelSelect.id===e.id),c("cdkTreeNodeTypeaheadLabel",e.title),o(),Ot("type","button")("aria-label","Toggle "+e.title),o(2),f(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),o(2),w(e.title)}}var Ei=class Ei{constructor(l,e,i,t,s,v,p,Q,J){this.cmsToastrService=l;this.coreEnumService=e;this.categoryService=i;this.dialog=t;this.cdr=s;this.publicHelper=v;this.tokenHelper=p;this.cmsStoreService=Q;this.translate=J;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new Pe;this.dataModelResult=new j;this.filterModel=new K;this.dataSource=new bo;this.optionChange=new Xt;this.optionReload=()=>this.onActionButtonReload();this.hasChild=(l,e)=>!1;this.childrenAccessor=l=>[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){setTimeout(()=>{this.DataGetAll()},500),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess&&(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new Pe,this.DataGetAll()}onActionSelectForce(l){}onActionAdd(){var l="";this.publicHelper.isMobile?l="dialog-fullscreen":l="dialog-min",this.dialog.open(bi,{height:"90%",panelClass:l,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(i=>{i&&i.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let l=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(l=this.dataModelSelect.id),l===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Wt,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let l=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(l=this.dataModelSelect.id),l===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(ki,{height:"90%",panelClass:e,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:l}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}};Ei.\u0275fac=function(e){return new(e||Ei)(u(O),u(U),u(Ne),u(we),u(L),u(F),u(le),u(ae),u(B))},Ei.\u0275cmp=R({type:Ei,selectors:[["app-ticketing-departemen-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:16,vars:14,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["matTreeNodePadding","","matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,i){e&1&&(r(0,"app-cms-html-tree",1),M(1,2),d(2),h(3,"translate"),k(),M(4,3),C(5,_a,3,3,"button",4)(6,Ta,3,3,"button",5)(7,va,3,3,"button",6)(8,Ca,4,4,"button",7),k(),M(9,8),T(10,"app-progress-spinner",9),r(11,"mat-tree",10,0),C(13,Ia,4,3,"mat-tree-node",11)(14,ba,6,7,"mat-tree-node",12),a(),k(),xe(15,13),a()),e&2&&(c("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),o(2),f(" ",_(3,12,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),o(3),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessAddRow),o(),c("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)&&(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessDeleteRow)&&(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessWatchRow),o(2),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),o(3),c("matTreeNodeDefWhen",i.hasChild))},dependencies:[V,Be,Fe,To,vo,Io,Co,_o,H,Ao,N],encapsulation:2});var Nt=Ei;var Ma=()=>[5,10,20,100],ka=n=>({display:n});function wa(n,l){if(n&1){let e=b();r(0,"a",40),I("click",function(){g(e);let t=m();return S(t.onActionBackToParent())}),T(1,"i",41),a()}}function Ea(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",43),I("click",function(){g(e);let t=m();return S(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",44)(3,"br"),a(),r(4,"p",45),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.EDIT")," "))}function ya(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Aa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.id," ")}}function Da(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function xa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"cmssiteinfo"),h(3,"async"),a()),n&2){let e=l.$implicit;o(),f(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function Ra(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.linkSourceId==null?null:e.fieldsInfo.linkSourceId.fieldTitle," ")}}function La(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.linkSourceId," ")}}function Va(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Ba(n,l){if(n&1&&T(0,"select",49),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,ka,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Fa(n,l){if(n&1&&(r(0,"mat-cell",47),h(1,"statusCellClass"),T(2,"i",47),h(3,"statusIconClass"),C(4,Ba,1,5,"select",48),a()),n&2){let e=l.$implicit,i=m();c("ngClass",_(1,3,e.recordStatus)),o(2),c("ngClass",_(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Na(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function Oa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.title," ")}}function Ga(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Pa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),f(" ",_(2,1,e.createdDate)," ")}}function Ha(n,l){if(n&1&&(r(0,"mat-header-cell",46),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function qa(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),f(" ",_(2,1,e.updatedDate)," ")}}function Wa(n,l){n&1&&(r(0,"mat-header-cell"),d(1),h(2,"translate"),a()),n&2&&(o(),f(" ",_(2,1,"TITLE.OPTION")," "))}function ja(n,l){if(n&1&&(r(0,"mat-cell",50)(1,"button",51)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Ua(n,l){n&1&&T(0,"mat-header-row")}function Qa(n,l){if(n&1){let e=b();r(0,"mat-row",52),I("click",function(){let t=g(e).$implicit,s=m();return S(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var yi=class yi extends st{constructor(e,i,t,s,v,p,Q,J,Ae,De,wt){super(e,new Zn,De,v,J);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.router=s;this.tokenHelper=v;this.cmsStoreService=p;this.cdr=Q;this.translate=J;this.pageInfo=Ae;this.publicHelper=De;this.dialog=wt;this.requestDepartemenId=0;this.requestOperatorId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus","LinkSourceId","CreatedDate","UpdatedDate"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","LinkSourceId","CreatedDate","UpdatedDate"];this.publicHelper.processService.cdr=this.cdr,this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestOperatorId=+Number(this.activatedRoute.snapshot.paramMap.get("OperatorId")),this.optionsSearch.parentMethods={onSubmit:mt=>this.onSubmitOptionsSearch(mt)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(i=>i.tokenInfoStore).subscribe(i=>Y(this,null,function*(){this.tokenInfo=i,this.DataGetAll()}));let e=new z;this.requestOperatorId>0&&(e.propertyName="LinkFromOperatorId",e.value=this.requestOperatorId,this.filteModelContent.filters.push(e)),this.requestDepartemenId>0&&(e=new z,e.propertyName="LinkFromTicketingDepartemenId",e.value=this.requestDepartemenId,e.clauseType=Pt.Or,this.filteModelContent.filters.push(e),e=new z,e.propertyName="LinkToTicketingDepartemenId",e.value=this.requestDepartemenId,e.clauseType=Pt.Or,this.filteModelContent.filters.push(e))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Zn);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.categoryModelSelected&&this.categoryModelSelected.id>0){let t=new z;t.propertyName="LinkFromTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)}this.contentService.setAccessLoad(),this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorGetAll(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}this.router.navigate(["/application/app/edit/",this.tableRowSelected.id])}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}this.router.navigate(["/application/app/delete/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.requestOperatorId>0&&this.router.navigate(["/application/app/"]),this.requestDepartemenId>0&&this.router.navigate(["/ticketing/departemen/"])}};yi.\u0275fac=function(i){return new(i||yi)(u(hn),u(Ie),u(O),u(oe),u(le),u(ae),u(L),u(B),u(lt),u(F),u(we))},yi.\u0275cmp=R({type:yi,selectors:[["app-application-app-list"]],standalone:!1,features:[q],decls:58,vars:27,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkSourceId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),S(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),S(t.onActionButtonPrintRow())}),M(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return g(s),S(t.onActionSelectorSelect(p))}),a(),k(),xe(3,6)(4,7),M(5,8),C(6,wa,2,0,"a",9),r(7,"a",10),I("click",function(){return g(s),S(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),I("click",function(){return g(s),S(t.onActionButtonReload())}),T(10,"i",12),a(),k(),M(11,13),r(12,"a",14),I("click",function(){return g(s),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),h(15,"translate"),a(),r(16,"a",14),I("click",function(){return g(s),S(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),h(19,"translate"),a(),k(),xe(20,16),M(21,17),C(22,Ea,7,3,"div",18),k(),M(23,19),r(24,"app-cms-search-list",20),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),S(p)}),a(),r(25,"app-cms-statist-list",20),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),S(p)}),a(),k(),M(26,21),r(27,"mat-table",22,0),I("matSortChange",function(){g(s);let p=D(28);return S(t.onTableSortData(p))}),M(29,23),C(30,ya,2,1,"mat-header-cell",24)(31,Aa,2,1,"mat-cell",25),k(),M(32,26),C(33,Da,2,1,"mat-header-cell",24)(34,xa,4,5,"mat-cell",25),k(),M(35,27),C(36,Ra,2,1,"mat-header-cell",24)(37,La,2,1,"mat-cell",25),k(),M(38,28),C(39,Va,2,1,"mat-header-cell",24)(40,Fa,5,7,"mat-cell",29),k(),M(41,30),C(42,Na,2,1,"mat-header-cell",24)(43,Oa,2,1,"mat-cell",25),k(),M(44,31),C(45,Ga,2,1,"mat-header-cell",24)(46,Pa,3,3,"mat-cell",25),k(),M(47,32),C(48,Ha,2,1,"mat-header-cell",24)(49,qa,3,3,"mat-cell",25),k(),M(50,33),C(51,Wa,3,3,"mat-header-cell",34)(52,ja,6,1,"mat-cell",35),k(),C(53,Ua,1,0,"mat-header-row",36)(54,Qa,1,2,"mat-row",37),a(),k(),M(55,38),r(56,"mat-paginator",39,1),I("page",function(p){return g(s),S(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),f("",_(15,22,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),f("",_(19,24,"ACTION.STATIST")," "),o(4),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(26),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(26,Ma)))},dependencies:[Et,V,We,Be,Fe,W,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Vt,Nt,Ve,N,vt,Ct,Bt,Ft],encapsulation:2});var Ki=yi;var Ja=["vform"];function Ya(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",18),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),S(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Xa(n,l){n&1&&T(0,"i",19)}function Za(n,l){n&1&&T(0,"i",20)}function $a(n,l){n&1&&(r(0,"mat-error"),d(1," Question is "),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2&&(o(3),w(_(4,1,"MESSAGE.required")))}function el(n,l){if(n&1){let e=b();r(0,"div",21)(1,"button",22),I("click",function(){g(e);let t=m();return S(t.onFormCancel())}),T(2,"i",23),d(3),h(4,"translate"),a(),r(5,"button",24),T(6,"i",25),d(7),h(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),f(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),f(" ",_(8,5,"ACTION.SAVE")," ")}}var Ai=class Ai extends Tt{constructor(e,i,t,s,v,p,Q,J){super(s,new _t,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingFaqService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestParentId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new zt;this.dataModelResult=new j;this.dataModel=new _t;this.dataFileModel=new Map;this.formInfo=new ie;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=+e.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.Submit_New_Content").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";if(this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ai.\u0275fac=function(i){return new(i||Ai)(u(ue),u(re),u(U),u(At),u(O),u(F),u(L),u(B))},Ai.\u0275cmp=R({type:Ai,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,t){if(i&1&&X(Ja,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:33,vars:33,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),h(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return g(s),S(t.onFormSubmit())}),C(10,Ya,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),h(12,"translate"),I("optionChange",function(p){return g(s),S(t.onActionSelectorSelect(p))}),a(),r(13,"div",9)(14,"label",10),d(15),h(16,"translate"),a(),r(17,"input",11,1),h(19,"translate"),A("ngModelChange",function(p){return g(s),y(t.dataModel.question,p)||(t.dataModel.question=p),S(p)}),a(),C(20,Xa,1,0,"i",12)(21,Za,1,0,"i",13),r(22,"em"),d(23),a(),C(24,$a,5,3,"mat-error",14),a(),r(25,"p"),d(26),h(27,"translate"),a(),r(28,"angular-editor",15),h(29,"translate"),A("ngModelChange",function(p){return g(s),y(t.dataModel.answer,p)||(t.dataModel.answer=p),S(p)}),a(),T(30,"br"),r(31,"app-cms-files-selector",16),A("dataFileModelChange",function(p){return g(s),y(t.dataFileModel,p)||(t.dataFileModel=p),S(p)}),a(),C(32,el,9,7,"div",17),a()()()}if(i&2){let s=D(18);o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),f(" ",t.formInfo.formTitle," "),o(2),f(" ",_(7,21,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,23,"TITLE.Department")),o(4),w(_(16,25,"TITLE.Question")),o(2),c("placeholder",x(_(19,27,"TITLE.Question"))),E("ngModel",t.dataModel.question),o(3),c("ngIf",!s.value),o(),c("ngIf",s.value),o(2),f("",s.value.length," / 100"),o(),c("ngIf",s.errors==null?null:s.errors.required),o(2),w(_(27,29,"TITLE.Answer")),o(2),c("placeholder",_(29,31,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),E("ngModel",t.dataModel.answer),o(3),E("dataFileModel",t.dataFileModel),c("openDirectUploadView",!0),o(),c("ngIf",t.formInfo.formSubmitAllow)}},dependencies:[V,_e,ee,te,Se,Te,ve,Ce,fe,he,ke,W,Me,H,An,wn,Ee,N],encapsulation:2});var Gn=Ai;var tl=["vform"];function il(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",18),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),S(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function nl(n,l){n&1&&T(0,"i",19)}function ol(n,l){n&1&&T(0,"i",20)}function rl(n,l){n&1&&(r(0,"mat-error"),d(1," Question is "),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2&&(o(3),w(_(4,1,"MESSAGE.required")))}function al(n,l){if(n&1){let e=b();r(0,"div",21)(1,"button",22),I("click",function(){g(e);let t=m();return S(t.onFormCancel())}),T(2,"i",23),d(3),h(4,"translate"),a(),r(5,"button",24),T(6,"i",25),d(7),h(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),f(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),f(" ",_(8,5,"ACTION.SAVE")," ")}}var Di=class Di extends Lt{constructor(e,i,t,s,v,p,Q,J){super(s,new _t,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingFaqService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new zt;this.dataModelResult=new ht;this.dataModel=new _t;this.dataFileModel=new Map;this.formInfo=new ie;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.requestId<=0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent()}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingFaqService.setAccessLoad(),this.ticketingFaqService.setAccessDataType(St.Editor),this.ticketingFaqService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.question,this.formInfo.formAlert="",this.dataModel.linkFileIds&&this.dataModel.linkFileIds.length>0&&this.dataModel.linkFileIds.split(",").forEach((t,s)=>{let v="";this.dataModel.linkFileIdsSrc.length>=this.dataModel.linkFileIdsSrc.length&&(v=this.dataModel.linkFileIdsSrc[s]),this.dataFileModel.set(+t,v)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";if(this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.linkFileIds="",this.dataFileModel){let i=Array.from(this.dataFileModel.keys());i&&i.length>0&&(this.dataModel.linkFileIds=i.join(","))}this.ticketingFaqService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Di.\u0275fac=function(i){return new(i||Di)(u(ue),u(re),u(U),u(At),u(O),u(F),u(L),u(B))},Di.\u0275cmp=R({type:Di,selectors:[["app-ticketing-faq-add"]],viewQuery:function(i,t){if(i&1&&X(tl,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:33,vars:33,consts:[["vform","ngForm"],["Question",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.question",1,"color-highlight"],["matInput","","type","text","name","dataModel.question","minlength","3","maxlength","1000","required","","id","dataModel.question",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],["id","Answer","name","dataModel.answer",3,"ngModelChange","placeholder","config","ngModel"],[3,"dataFileModelChange","dataFileModel","openDirectUploadView"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",2),T(1,"app-progress-spinner",3),r(2,"div",4)(3,"p",5),d(4),a(),r(5,"p"),d(6),h(7,"translate"),a(),r(8,"form",6,0),I("ngSubmit",function(){return g(s),S(t.onFormSubmit())}),C(10,il,1,5,"app-cms-enum-record-status-selector",7),r(11,"app-ticketing-departemen-selector",8),h(12,"translate"),I("optionChange",function(p){return g(s),S(t.onActionSelectorSelect(p))}),a(),r(13,"div",9)(14,"label",10),d(15),h(16,"translate"),a(),r(17,"input",11,1),h(19,"translate"),A("ngModelChange",function(p){return g(s),y(t.dataModel.question,p)||(t.dataModel.question=p),S(p)}),a(),C(20,nl,1,0,"i",12)(21,ol,1,0,"i",13),r(22,"em"),d(23),a(),C(24,rl,5,3,"mat-error",14),a(),r(25,"p"),d(26),h(27,"translate"),a(),r(28,"angular-editor",15),h(29,"translate"),A("ngModelChange",function(p){return g(s),y(t.dataModel.answer,p)||(t.dataModel.answer=p),S(p)}),a(),T(30,"br"),r(31,"app-cms-files-selector",16),A("dataFileModelChange",function(p){return g(s),y(t.dataFileModel,p)||(t.dataFileModel=p),S(p)}),a(),C(32,al,9,7,"div",17),a()()()}if(i&2){let s=D(18);o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),f(" ",t.formInfo.formTitle," "),o(2),f(" ",_(7,21,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,23,"TITLE.Department")),o(4),w(_(16,25,"TITLE.Question")),o(2),c("placeholder",x(_(19,27,"TITLE.Question"))),E("ngModel",t.dataModel.question),o(3),c("ngIf",!s.value),o(),c("ngIf",s.value),o(2),f("",s.value.length," / 100"),o(),c("ngIf",s.errors==null?null:s.errors.required),o(2),w(_(27,29,"TITLE.Answer")),o(2),c("placeholder",_(29,31,"TITLE.Enter_Text"))("config",t.publicHelper.editorConfig),E("ngModel",t.dataModel.answer),o(3),E("dataFileModel",t.dataFileModel),c("openDirectUploadView",!0),o(),c("ngIf",t.formInfo.formSubmitAllow)}},dependencies:[V,_e,ee,te,Se,Te,ve,Ce,fe,he,ke,W,Me,H,An,wn,Ee,N],encapsulation:2});var Pn=Di;var ll=()=>[5,10,20,100],sl=n=>({display:n});function cl(n,l){if(n&1){let e=b();r(0,"a",37),I("click",function(){g(e);let t=m();return S(t.onActionBackToParent())}),T(1,"i",38),a()}}function dl(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",40),I("click",function(){g(e);let t=m();return S(t.onActionButtonNewRow())}),T(2,"i",41)(3,"br"),a(),r(4,"p",42),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.ADD")," "))}function pl(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",43),I("click",function(){g(e);let t=m();return S(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",44)(3,"br"),a(),r(4,"p",42),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.EDIT")," "))}function ml(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",45),I("click",function(){g(e);let t=m();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",46)(3,"br"),a(),r(4,"p",42),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.DELETE")," "))}function fl(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function ul(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.id," ")}}function gl(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Sl(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"cmssiteinfo"),h(3,"async"),a()),n&2){let e=l.$implicit;o(),f(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function hl(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function _l(n,l){if(n&1&&T(0,"select",50),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,sl,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Tl(n,l){if(n&1&&(r(0,"mat-cell",48),h(1,"statusCellClass"),T(2,"i",48),h(3,"statusIconClass"),C(4,_l,1,5,"select",49),a()),n&2){let e=l.$implicit,i=m();c("ngClass",_(1,3,e.recordStatus)),o(2),c("ngClass",_(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function vl(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.question==null?null:e.fieldsInfo.question.fieldTitle," ")}}function Cl(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.question," ")}}function Il(n,l){n&1&&(r(0,"mat-header-cell"),d(1),h(2,"translate"),a()),n&2&&(o(),f(" ",_(2,1,"TITLE.OPTION")," "))}function bl(n,l){if(n&1&&(r(0,"mat-cell",51)(1,"button",52)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Ml(n,l){n&1&&T(0,"mat-header-row")}function kl(n,l){if(n&1){let e=b();r(0,"mat-row",53),I("click",function(){let t=g(e).$implicit,s=m();return S(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var xi=class xi extends st{constructor(e,i,t,s,v,p,Q,J,Ae,De,wt,mt){super(e,new _t,wt,p,J);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=v;this.tokenHelper=p;this.cdr=Q;this.translate=J;this.pageInfo=Ae;this.cmsStoreService=De;this.publicHelper=wt;this.dialog=mt;this.requestDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus","Question"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","Question"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:ji=>this.onSubmitOptionsSearch(ji)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Ascending}ngOnInit(){if(this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestDepartemenId>0){let e=new z;e.propertyName="LinkTicketingDepartemenId",e.value=this.requestDepartemenId,this.filteModelContent.filters.push(e)}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new _t);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.categoryModelSelected&&this.categoryModelSelected.id>0){let t=new z;t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)}this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorGetAll(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Gn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{parentId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Pn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.question+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let v=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(v,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(v)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(v)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};xi.\u0275fac=function(i){return new(i||xi)(u(At),u(Ie),u(O),u(Rt),u(oe),u(le),u(L),u(B),u(lt),u(ae),u(F),u(we))},xi.\u0275cmp=R({type:xi,selectors:[["app-application-app-list"]],standalone:!1,features:[q],decls:51,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Question"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),S(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),S(t.onActionButtonPrintRow())}),M(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return g(s),S(t.onActionSelectorSelect(p))}),a(),k(),xe(3,6)(4,7),M(5,8),C(6,cl,2,0,"a",9),r(7,"a",10),I("click",function(){return g(s),S(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),I("click",function(){return g(s),S(t.onActionButtonReload())}),T(10,"i",12),a(),k(),M(11,13),r(12,"a",14),I("click",function(){return g(s),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),h(15,"translate"),a(),r(16,"a",14),I("click",function(){return g(s),S(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),h(19,"translate"),a(),k(),M(20,16),C(21,dl,7,3,"div",17),k(),M(22,18),C(23,pl,7,3,"div",17)(24,ml,7,3,"div",17),k(),M(25,19),r(26,"app-cms-search-list",20),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),S(p)}),a(),r(27,"app-cms-statist-list",20),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),S(p)}),a(),k(),M(28,21),r(29,"mat-table",22,0),I("matSortChange",function(){g(s);let p=D(30);return S(t.onTableSortData(p))}),M(31,23),C(32,fl,2,1,"mat-header-cell",24)(33,ul,2,1,"mat-cell",25),k(),M(34,26),C(35,gl,2,1,"mat-header-cell",24)(36,Sl,4,5,"mat-cell",25),k(),M(37,27),C(38,hl,2,1,"mat-header-cell",24)(39,Tl,5,7,"mat-cell",28),k(),M(40,29),C(41,vl,2,1,"mat-header-cell",24)(42,Cl,2,1,"mat-cell",25),k(),M(43,30),C(44,Il,3,3,"mat-header-cell",31)(45,bl,6,1,"mat-cell",32),k(),C(46,Ml,1,0,"mat-header-row",33)(47,kl,1,2,"mat-row",34),a(),k(),M(48,35),r(49,"mat-paginator",36,1),I("page",function(p){return g(s),S(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.faq.list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),f("",_(15,24,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),f("",_(19,26,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(17),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(28,ll)))},dependencies:[Et,V,We,Be,Fe,W,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Vt,Nt,Ve,N,vt,Bt,Ft],encapsulation:2});var Ji=xi;function wl(n,l){if(n&1&&(r(0,"div",6)(1,"button",7),T(2,"i",8),d(3),T(4,"i",9),a(),r(5,"div",10)(6,"div",11),T(7,"p",12),a()()()),n&2){let e=m().$implicit,i=m().$implicit;o(),Ot("data-bs-target","#collapse"+e.id),o(2),f(" ",e.question," "),o(2),c("id",Gt("collapse",e.id)),Ot("data-bs-parent","#accordion-"+i.id),o(2),c("innerHTML",e.answer,an)}}function El(n,l){if(n&1&&(M(0),C(1,wl,8,6,"div",5),k()),n&2){let e=l.$implicit,i=m().$implicit;o(),c("ngIf",e.linkTicketingDepartemenId===i.id)}}function yl(n,l){if(n&1&&(M(0),r(1,"div",2)(2,"div",3)(3,"h4"),d(4),a()(),r(5,"div",4),C(6,El,2,1,"ng-container",1),a()(),k()),n&2){let e=l.$implicit,i=m();o(4),w(e.title),o(),c("id",Gt("accordion-",e.id)),o(),c("ngForOf",i.dataModelResult.listItems)}}var Ri=class Ri{constructor(l,e,i,t,s,v,p,Q,J){this.ticketingFaqService=l;this.ticketingDepartemenService=e;this.publicHelper=i;this.cmsToastrService=t;this.cmsStoreService=s;this.router=v;this.cdr=p;this.translate=Q;this.tokenHelper=J;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.dataModelResult=new j;this.dataDepartemenModelResult=new j;this.optionsSearch=new En;this.optionsStatist=new yn;this.tokenInfo=new jt;this.tableRowsSelected=[];this.tableRowSelected=new _t;this.tableSource=new ho;this.DataDepartemanLinkSelect=0;this.DataFaqLinkSelect=0;this.publicHelper.processService.cdr=this.cdr,this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Ascending}ngOnInit(){this.DataDepartemenGetAll(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.DataDepartemenGetAll(),this.tokenInfo=l,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.onActionTableRowSelect(new _t);let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(l,i,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let e=JSON.parse(JSON.stringify(this.filteModelContent));if(this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(e.filters=[...this.filterDataModelQueryBuilder]),this.categoryModelSelected&&this.categoryModelSelected.id>0){let i=new z;i.propertyName="LinkTicketingDepartemenId",i.value=this.categoryModelSelected.id,e.filters.push(i)}this.ticketingFaqService.ServiceGetAllOrigin(e).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),i.isSuccess?(this.dataModelResult=i,this.tableSource.data=i.listItems):this.cmsToastrService.typeErrorGetAll(i.errorMessage),this.publicHelper.processService.processStop(l)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(l)}})}DataDepartemenGetAll(){this.ticketingDepartemenService.ServiceGetAllOrigin(null).subscribe({next:l=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(l.access),l.isSuccess?this.dataDepartemenModelResult=l:this.cmsToastrService.typeErrorGetAll(l.errorMessage),Promise.resolve().then(()=>this.cdr.detectChanges())},error:l=>{this.cmsToastrService.typeError(l)}})}onTableSortData(l){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===l.active?this.tableSource.sort.start==="asc"?(l.start="desc",this.filteModelContent.sortColumn=l.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(l.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):l.start="desc":(this.filteModelContent.sortColumn=l.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=l,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(l){this.filteModelContent.currentPageNumber=l.pageIndex+1,this.filteModelContent.rowPerPage=l.pageSize,this.DataGetAll()}onActionSelectorSelect(l){var e=this.filteModelContent.sortColumn,i=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=e,this.filteModelContent.sortType=i,this.categoryModelSelected=l,this.DataGetAll()}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(l){l&&l.length>0?this.filterDataModelQueryBuilder=[...l]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionTableRowSelect(l){this.tableRowSelected=l,l.expanded||(l.expanded=!1),l.expanded=!l.expanded}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}onActionButtonDeparteman(l){this.DataDepartemanLinkSelect=l,this.DataFaqLinkSelect=0}onActionButtonFaqTitle(l){this.DataFaqLinkSelect=l}};Ri.\u0275fac=function(e){return new(e||Ri)(u(At),u(Ne),u(F),u(O),u(ae),u(oe),u(L),u(B),u(le))},Ri.\u0275cmp=R({type:Ri,selectors:[["app-ticketing-faq-originlist"]],standalone:!1,decls:2,vars:2,consts:[[3,"optionsInfoAreaId"],[4,"ngFor","ngForOf"],[1,"card","card-style"],[1,"content"],[1,"accordion",3,"id"],["class","mb-0",4,"ngIf"],[1,"mb-0"],["type","button","data-bs-toggle","collapse",1,"btn","accordion-btn","no-effect","color-theme"],[1,"fa","fa-cloud","color-yellow-dark","me-2"],[1,"fa","fa-chevron-down","font-10","accordion-icon"],[1,"collapse",3,"id"],[1,"pt-1","pb-2","ps-3","pe-3"],[3,"innerHTML"]],template:function(e,i){e&1&&(T(0,"app-progress-spinner",0),C(1,yl,7,4,"ng-container",1)),e&2&&(c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("ngForOf",i.dataDepartemenModelResult.listItems))},dependencies:[oi,V,H],encapsulation:2});var Hn=Ri;var Al=["*"];function Dl(n,l){if(n&1&&(r(0,"label",11),d(1),a()),n&2){let e=m();c("for",Gt("app-cms-site-selector-",e.id)),o(),w(e.optionLabel)}}function xl(n,l){if(n&1&&(r(0,"mat-option",12)(1,"span"),d(2),a()()),n&2){let e=l.$implicit,i=m();c("value",e)("disabled",i.optionDisabled),o(2),w(i.displayOption(e))}}function Rl(n,l){n&1&&T(0,"i",13)}function Ll(n,l){n&1&&T(0,"i",14)}function Vl(n,l){if(n&1){let e=b();r(0,"i",15),I("click",function(){g(e);let t=m();return S(t.onActionSelectClear())}),a()}}function Bl(n,l){n&1&&(r(0,"em"),d(1),h(2,"translate"),a()),n&2&&(o(),f("(",_(2,1,"TITLE.Necessary"),")"))}var Yt=class Yt{constructor(l,e,i,t,s){this.coreEnumService=l;this.cdr=e;this.publicHelper=i;this.translate=t;this.categoryService=s;this.id=++Yt.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new j;this.dataModelSelect=new ft;this.formControl=new dn;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new Xt;this.optionReload=()=>this.onActionButtonReload();this.optionItemCount=new Xt;this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(nn(""),en(1500),tn(),on(l=>typeof l=="string"||typeof l=="number"?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.title:void 0}displayOption(l){return l?l.title:void 0}DataGetAll(l){return Y(this,null,function*(){let e=new K;e.rowPerPage=20,e.accessLoad=!0;let i=new z;i.propertyName="Title",i.value=l,i.searchType=ri.Contains,i.clauseType=Pt.Or,e.filters.push(i),l&&typeof+l=="number"&&+l>0&&(i=new z,i.propertyName="Id",i.value=l,i.searchType=ri.Equal,i.clauseType=Pt.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(t,s,this.constructorInfoAreaId)}),yield Zi(this.categoryService.ServiceGetAll(e)).then(s=>(this.dataModelResult=s,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),s.listItems?.length>0?this.optionItemCount.emit(s.listItems?.length):this.optionItemCount.emit(0),s.listItems))})}onActionSelect(l){this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(l){return this.filteredOptions.pipe($i(e=>(e.find(i=>i.id===l.id)||e.push(l),e)))}onActionSelectForce(l){if(typeof l=="number"&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===l)){let e=this.dataModelResult.listItems.find(i=>i.id===l);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(l).subscribe({next:e=>{e.isSuccess&&(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item))}});return}if(typeof l==typeof ft){this.filteredOptions=this.push(l),this.dataModelSelect=l,this.formControl.setValue(l);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new ft,this.loadOptions()}};Yt.nextId=0,Yt.\u0275fac=function(e){return new(e||Yt)(u(U),u(L),u(F),u(B),u(Dt))},Yt.\u0275cmp=R({type:Yt,selectors:[["app-ticketing-template-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionItemCount:"optionItemCount"},standalone:!1,ngContentSelectors:Al,decls:13,vars:18,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=b();sn(),r(0,"div",1),T(1,"app-progress-spinner",2),C(2,Dl,2,3,"label",3),T(3,"input",4),r(4,"mat-autocomplete",5,0),I("optionSelected",function(v){return g(t),S(i.onActionSelect(v.option.value))}),C(6,xl,3,3,"mat-option",6),h(7,"async"),a(),C(8,Rl,1,0,"i",7)(9,Ll,1,0,"i",8)(10,Vl,1,0,"i",9)(11,Bl,3,3,"em",10),cn(12),a()}if(e&2){let t=D(5);o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(),c("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),o(),c("placeholder",x(i.optionPlaceholder))("id",Gt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),Ot("disabled",i.optionDisabled?!0:null),o(),c("displayWith",i.displayFn),o(2),c("ngForOf",_(7,16,i.filteredOptions)),o(2),c("ngIf",!i.formControl.valid),o(),c("ngIf",i.optionRequired&&i.formControl.valid),o(),c("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),o(),c("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[oi,V,ee,te,Te,pn,Tn,_n,vn,W,H,Ve,N],encapsulation:2});var qn=Yt;var Nl=["vform"];function Ol(n,l){n&1&&(r(0,"mat-error"),d(1),h(2,"translate"),r(3,"strong"),d(4),h(5,"translate"),a()()),n&2&&(o(),f(" ",_(2,2,"AUTH.INPUT.FULLNAME")," "),o(3),w(_(5,4,"MESSAGE.required")))}function Gl(n,l){n&1&&(r(0,"mat-error"),d(1),h(2,"translate"),r(3,"strong"),d(4),h(5,"translate"),a()()),n&2&&(o(),f(" ",_(2,2,"AUTH.INPUT.MOBILE")," "),o(3),w(_(5,4,"MESSAGE.required")))}function Pl(n,l){n&1&&(r(0,"mat-error"),d(1),h(2,"translate"),r(3,"strong"),d(4),h(5,"translate"),a()()),n&2&&(o(),f(" ",_(2,2,"AUTH.INPUT.EMAIL")," "),o(3),w(_(5,4,"MESSAGE.required")))}function Hl(n,l){if(n&1){let e=b();r(0,"div",36)(1,"label"),d(2),h(3,"translate"),a(),r(4,"app-ticketing-template-selector",45),I("optionItemCount",function(){g(e);let t=m(2);return S(t.templateItemCount)})("optionChange",function(t){g(e);let s=m(2);return S(s.onActionSelectorSelect(t))}),a()()}n&2&&(o(2),w(_(3,1,"TITLE.Categories")))}function ql(n,l){n&1&&(r(0,"mat-error"),d(1),h(2,"translate"),r(3,"strong"),d(4),h(5,"translate"),a()()),n&2&&(o(),f(" ",_(2,2,"AUTH.INPUT.YOURMEESAGE")," "),o(3),w(_(5,4,"MESSAGE.required")))}function Wl(n,l){if(n&1){let e=b();r(0,"div",8)(1,"form",29,0),I("ngSubmit",function(){g(e);let t=m();return S(t.onFormSubmit())}),r(3,"fieldset")(4,"div",30)(5,"label",31),d(6),h(7,"translate"),r(8,"span"),d(9),h(10,"translate"),a()(),r(11,"input",32,1),h(13,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.fullName,t)||(s.dataModel.fullName=t),S(t)}),a(),C(14,Ol,6,6,"mat-error",33),a(),r(15,"div",30)(16,"label",34),d(17),h(18,"translate"),r(19,"span"),d(20),h(21,"translate"),a()(),r(22,"input",35,2),h(24,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),S(t)}),a(),C(25,Gl,6,6,"mat-error",33),a(),r(26,"div",36)(27,"label",37),d(28),h(29,"translate"),r(30,"span"),d(31),h(32,"translate"),a()(),r(33,"input",38,3),h(35,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.email,t)||(s.dataModel.email=t),S(t)}),a(),C(36,Pl,6,6,"mat-error",33),a(),C(37,Hl,5,3,"div",39),r(38,"div",40)(39,"label",41),d(40),h(41,"translate"),r(42,"span"),d(43),h(44,"translate"),a()(),r(45,"textarea",42,4),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),S(t)}),a(),C(47,ql,6,6,"mat-error",33),a(),r(48,"div",43),T(49,"input",44),h(50,"translate"),a()()()()}if(n&2){let e=D(12),i=D(23),t=D(34),s=D(46),v=m();o(6),f("",_(7,25,"AUTH.INPUT.FULLNAME"),":"),o(3),f("( ",_(10,27,"TITLE.Necessary")," )"),o(2),c("placeholder",x(_(13,29,"TITLE.Enter_your_first_and_last_name"))),E("ngModel",v.dataModel.fullName),o(3),c("ngIf",e.errors==null?null:e.errors.required),o(3),f("",_(18,31,"AUTH.INPUT.MOBILE"),":"),o(3),f("( ",_(21,33,"TITLE.Necessary")," )"),o(2),c("placeholder",x(_(24,35,"TITLE.Enter_your_first_and_last_name"))),E("ngModel",v.dataModel.phoneNo),o(3),c("ngIf",i.errors==null?null:i.errors.required),o(3),f("",_(29,37,"AUTH.INPUT.EMAIL"),":"),o(3),f("( ",_(32,39,"TITLE.Necessary")," )"),o(2),c("placeholder",x(_(35,41,"TITLE.Enter_email"))),E("ngModel",v.dataModel.email),o(3),c("ngIf",t.errors==null?null:t.errors.required),o(),c("ngIf",v.templateItemCount>0),o(3),f("",_(41,43,"AUTH.INPUT.YOURMEESAGE"),":"),o(3),f("( ",_(44,45,"TITLE.Necessary")," )"),o(2),E("ngModel",v.dataModel.htmlBody),o(2),c("ngIf",s.errors==null?null:s.errors.required),o(2),c("value",x(_(50,47,"ACTION.SEND")))}}function jl(n,l){if(n&1&&(r(0,"div",46)(1,"div",11)(2,"div",12)(3,"h1",13),T(4,"i",14),a(),r(5,"h2",15),d(6),h(7,"translate"),a(),r(8,"p",16),d(9),h(10,"translate"),a(),r(11,"p",15),d(12),h(13,"translate"),a(),T(14,"div",47),a()()()),n&2){let e=m();o(6),f(" ",_(7,5,"TITLE.Your_message_has_been_registered_in_the_system")," "),o(3),f(" ",_(10,7,"TITLE.Note_the_tracking_code_for_further_tracking")," "),o(3),to(" ",_(13,9,"TITLE.Tracking_Code")," : ",e.dataModelResult.item.id," "),o(2),c("innerHTML",e.dataModelResult.item==null||e.dataModelResult.item.virtual_Departemen==null?null:e.dataModelResult.item.virtual_Departemen.DefaultAnswerBody,an)}}var Li=class Li extends Tt{constructor(e,i,t,s,v,p,Q,J,Ae,De,wt){super(Q,new Oe,v,De);this.tokenHelper=e;this.cmsStoreService=i;this.activatedRoute=t;this.coreAuthService=s;this.publicHelper=v;this.coreEnumService=p;this.ticketingTaskService=Q;this.cmsToastrService=J;this.router=Ae;this.translate=De;this.cdr=wt;this.requestLinkDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.formInfo=new ie;this.dataModel=new go;this.dataModelResult=new j;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.templateItemCount=0;this.mapOptonCenter=new xt;this.captchaModel=new so;this.countAutoCaptchaOrder=1;this.enumFormSubmitedStatus=Sn;this.onCaptchaOrderInProcess=!1;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&(this.dataModel.fullName=this.tokenInfo.user.lastName,this.dataModel.email=this.tokenInfo.user.email,this.dataModel.phoneNo=this.tokenInfo.user.mobile),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(mt=>mt.tokenInfoStore).subscribe(mt=>Y(this,null,function*(){this.tokenInfo=mt,this.dataModel.fullName=this.tokenInfo.user.lastName,this.dataModel.email=this.tokenInfo.user.email,this.dataModel.phoneNo=this.tokenInfo.user.mobile}))}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.onCaptchaOrder(),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.dataModel.captchaKey=this.captchaModel.key,this.ticketingTaskService.ServiceContactUS(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.formInfo.formSubmitedStatus=Sn.Success,this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd()):(this.formInfo.formSubmitedStatus=Sn.Error,this.cmsToastrService.typeErrorAdd(i.errorMessage)),this.publicHelper.processService.processStop(e),this.cdr.markForCheck()},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorAdd(i),this.cdr.markForCheck()}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_template_is_not_clear").subscribe(i=>{this.cmsToastrService.typeWarningSelected(i)});return}this.dataModel.htmlBody=e.htmlBody}onActionBackToParent(){this.router.navigate(["/application/app/"])}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}onCaptchaOrder(){this.onCaptchaOrderInProcess||(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModel.captchaText="",this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{if(e.isSuccess){this.captchaModel=e.item,this.expireDate=e.item.expire;let i=new Date,s=new Date(e.item.expire).getTime()-i.getTime();this.countAutoCaptchaOrder<10&&(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,setTimeout(()=>{this.onCaptchaOrder()},s))}else this.cmsToastrService.typeErrorGetCpatcha(e.errorMessage);this.onCaptchaOrderInProcess=!1},error:e=>{this.onCaptchaOrderInProcess=!1}}))}};Li.\u0275fac=function(i){return new(i||Li)(u(le),u(ae),u(Ie),u(po),u(F),u(U),u(Ge),u(O),u(oe),u(B),u(L))},Li.\u0275cmp=R({type:Li,selectors:[["app-ticketing-task-contactus"]],viewQuery:function(i,t){if(i&1&&X(Nl,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:39,vars:21,consts:[["vform","ngForm"],["FullName",""],["phoneNo",""],["Email",""],["HtmlBody",""],[1,"page-content","pb-3"],[1,"card","card-full","rounded-m","pb-4"],[1,"drag-line"],[1,"content"],[1,"font-600","mb-0","color-highlight"],[1,"form-sent","disabled"],[1,"card","card-style"],[1,"shadow-l","rounded-m","gradient-green","ms-n1","mb-0"],[1,"color-white","text-center","pt-4"],[1,"fa","fa-check-circle","fa-3x","shadow-s","scale-box","rounded-circle"],[1,"color-white","bold","text-center","pt-3"],[1,"color-white","pb-4","text-center","mt-n2","mb-0"],[1,"content","text-center"],[1,"boxed-text-xl"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-facebook"],[1,"fab","fa-facebook-f"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-instagram","ms-3","me-3"],[1,"fab","fa-instagram"],["href","#",1,"icon","icon-xl","shadow-xl","rounded-xl","bg-twitter"],[1,"fab","fa-twitter"],[3,"optionsInfoAreaId"],[1,"card","contact-form"],["class","content",4,"ngIf"],["class","form-sent",4,"ngIf"],[3,"ngSubmit"],[1,"form-field","form-name"],["for","contactNameField",1,"contactNameField","color-theme"],["type","text","name","dataModel.fullName","id","contactNameField","required","",1,"round-small",2,"text-align","center !important",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","contactPhoneField",1,"contactNameField","color-theme"],["type","text","name","dataModel.phoneNo","id","contactPhoneField","required","",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],[1,"form-field","form-email"],["for","contactEmailField",1,"contactEmailField","color-theme"],["type","email","name","dataModel.email","id","contactEmailField",1,"round-small","input-ltr-center",3,"ngModelChange","ngModel","placeholder"],["class","form-field form-email",4,"ngIf"],[1,"form-field","form-text"],["for","contactMessageTextarea",1,"contactMessageTextarea","color-theme"],["name","dataModel.htmlBody","id","contactMessageTextarea","rows","3","required","",1,"round-small",3,"ngModelChange","ngModel"],[1,"form-button"],["type","submit","data-formId","contactForm",1,"btn","bg-highlight","font-700","btn-m","btn-full","rounded-sm","shadow-xl","contactSubmitButton",3,"value"],[3,"optionItemCount","optionChange"],[1,"form-sent"],[3,"innerHTML"]],template:function(i,t){i&1&&(r(0,"div",5)(1,"div",6),T(2,"div",7),r(3,"div",8)(4,"p",9),d(5),h(6,"translate"),a(),r(7,"p"),d(8),h(9,"translate"),a()(),r(10,"div",10)(11,"div",11)(12,"div",12)(13,"h1",13),T(14,"i",14),a(),r(15,"h2",15),d(16),h(17,"translate"),a(),r(18,"p",16),d(19),h(20,"translate"),a()()(),r(21,"div",11)(22,"div",17)(23,"h2"),d(24),h(25,"translate"),a(),r(26,"p",18),d(27),h(28,"translate"),a(),r(29,"a",19),T(30,"i",20),a(),r(31,"a",21),T(32,"i",22),a(),r(33,"a",23),T(34,"i",24),a()()()(),T(35,"app-progress-spinner",25),r(36,"div",26),C(37,Wl,51,49,"div",27),a(),C(38,jl,15,11,"div",28),a()()),i&2&&(o(5),f(" ",_(6,9,"TITLE.Send_us_your_questions")," "),o(3),f(" ",_(9,11,"TITLE.GetInTouchWithUs")," "),o(8),f(" ",_(17,13,"TITLE.MESSAGE_SENT")," "),o(3),f(" ",_(20,15,"TITLE.WE_WILL_CONTACT_YOU_SOON")," "),o(5),w(_(25,17,"TITLE.LETS_BE_SOCIAL")),o(3),f(" ",_(28,19,"TITLE.SOCIAL_MEDIA_PLATFORMS")," "),o(8),c("optionsInfoAreaId",t.constructorInfoAreaId),o(2),c("ngIf",(t.formInfo==null?null:t.formInfo.formSubmitedStatus)!==t.enumFormSubmitedStatus.Success),o(),c("ngIf",(t.formInfo==null?null:t.formInfo.formSubmitedStatus)===t.enumFormSubmitedStatus.Success))},dependencies:[V,_e,ee,te,Se,Te,fe,he,ke,H,qn,N],encapsulation:2});var Wn=Li;var Ul=["vform"];function Ql(n,l){if(n&1){let e=b();r(0,"div",14)(1,"button",19),I("click",function(){g(e);let t=m(2);return S(t.onFormCancel())}),T(2,"i",20),d(3),h(4,"translate"),a()()}n&2&&(o(3),f(" ",_(4,1,"ACTION.CANCEL")," "))}function zl(n,l){if(n&1&&(M(0),r(1,"div",9)(2,"table",10)(3,"thead",11)(4,"tr"),T(5,"th")(6,"th"),a()(),r(7,"tbody")(8,"tr")(9,"td"),d(10),a(),r(11,"td"),d(12),a()(),r(13,"tr")(14,"td"),d(15),a(),r(16,"td"),d(17),a()(),r(18,"tr")(19,"td"),d(20),a(),r(21,"td"),d(22),h(23,"enums"),a()(),r(24,"tr")(25,"td"),d(26),a(),r(27,"td"),d(28),a()(),r(29,"tr")(30,"td"),d(31),h(32,"translate"),a(),r(33,"td"),d(34),a()(),r(35,"tr")(36,"td"),d(37),a(),r(38,"td"),d(39),a()(),r(40,"tr")(41,"td"),d(42),a(),r(43,"td"),d(44),a()(),r(45,"tr")(46,"td"),d(47),a(),r(48,"td"),d(49),h(50,"localeDate"),a()(),r(51,"tr")(52,"td"),d(53),a(),r(54,"td"),d(55),h(56,"localeDate"),a()(),r(57,"tr")(58,"td"),d(59),a(),r(60,"td"),d(61),a()(),r(62,"tr")(63,"td"),d(64),a(),r(65,"td"),d(66),a()(),r(67,"tr")(68,"td"),d(69),a(),r(70,"td"),d(71),a()(),r(72,"tr")(73,"td"),d(74),a(),r(75,"td"),d(76),a()(),r(77,"tr")(78,"td"),d(79),a(),r(80,"td"),d(81),a()()()(),T(82,"hr"),a(),T(83,"div",12),r(84,"div",13)(85,"div",14)(86,"small",15),d(87),a(),r(88,"small",16),d(89),a()()(),r(90,"div",17),C(91,Ql,5,3,"div",18),a(),k()),n&2){let e=m();o(10),w(e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle),o(2),w(e.dataModel.id),o(3),w(e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle),o(2),w(e.dataModel.linkSiteId),o(3),w(e.fieldsInfo.ticketStatus==null?null:e.fieldsInfo.ticketStatus.fieldTitle),o(2),f(" ",ni(23,31,e.dataModel.ticketStatus,e.dataModelEnumTicketStatusResult.listItems)," "),o(4),w(e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle),o(2),w(e.dataModel.title),o(3),w(_(32,34,"TITLE.Message_Text")),o(3),w(e.dataModel.htmlBody),o(3),w(e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle),o(2),w(e.dataModel.fullName),o(3),w(e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle),o(2),w(e.dataModel.phoneNo),o(3),w(e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle),o(2),w(_(50,36,e.dataModel.createdDate)),o(4),w(e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle),o(2),w(_(56,38,e.dataModel.updatedDate)),o(4),w(e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle),o(2),w(e.dataModel.email),o(3),w(e.fieldsInfo.linkCmsUserId==null?null:e.fieldsInfo.linkCmsUserId.fieldTitle),o(2),w(e.dataModel.linkCmsUserId),o(3),w(e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle),o(2),w(e.dataModel.linkMemberId),o(3),f(" ",e.fieldsInfo.linkTicketingDepartemenId==null?null:e.fieldsInfo.linkTicketingDepartemenId.fieldTitle," "),o(2),w(e.dataModel.linkTicketingDepartemenId),o(3),f(" ",e.fieldsInfo.ticketingDepartemenDefaultAnswerBody==null?null:e.fieldsInfo.ticketingDepartemenDefaultAnswerBody.fieldTitle," "),o(2),w(e.dataModel.ticketingDepartemenDefaultAnswerBody),o(6),f("",e.formInfo.formAlert," "),o(2),f("",e.formInfo.formError," "),o(2),c("ngIf",e.formInfo.formSubmitAllow&&!e.publicHelper.processService.process.inRunAll)}}var Vi=class Vi{constructor(l,e,i,t,s,v,p,Q,J,Ae,De){this.data=l;this.dialogRef=e;this.coreEnumService=i;this.ticketingTaskService=t;this.cmsToastrService=s;this.tokenHelper=v;this.cmsStoreService=p;this.cdr=Q;this.ticketingEnumService=J;this.publicHelper=Ae;this.translate=De;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new jt;this.dataModelResult=new j;this.dataModel=new Oe;this.formInfo=new ie;this.dataModelEnumTicketStatusResult=new j;this.fieldsInfo=new Map;this.dataTaskReadedResult=new ht;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,l&&(this.requestId=+l.id||0)}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(l=>{this.formInfo.formTitle=l}),this.requestId===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(l=>l.tokenInfoStore).subscribe(l=>Y(this,null,function*(){this.tokenInfo=l})),this.getEnumTicketStatus()}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:l=>{this.dataModelEnumTicketStatusResult=l}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let l=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(l,e,this.constructorInfoAreaId)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.title+" ( "+e.item.id+" ) ",this.formInfo.formAlert="",this.dataTaskReaded(this.requestId)):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(l)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(l,!1)}})}dataTaskReaded(l){this.ticketingTaskService.ServiceTaskReaded(l).subscribe({next:e=>{e.isSuccess&&(this.dataTaskReadedResult=e)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Vi.\u0275fac=function(e){return new(e||Vi)(u(ue),u(re),u(U),u(Ge),u(O),u(le),u(ae),u(L),u(Ut),u(F),u(B))},Vi.\u0275cmp=R({type:Vi,selectors:[["app-ticketing-task-view"]],viewQuery:function(e,i){if(e&1&&X(Ul,5),e&2){let t;Z(t=$())&&(i.formGroup=t.first)}},standalone:!1,decls:12,vars:4,consts:[[1,"card","card-style","loader-container",2,"height","100vh","overflow-y","auto"],[3,"optionsInfoAreaId"],[1,"menu-title"],[1,"color-highlight"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[4,"ngIf"],[1,"ntk-cms-html-card-header"],[1,"table","table-striped","center"],[2,"background-color","#81d4fa"],["dir","rtl",1,"ntk-cms-html-card-body","ntk-allow-text-selection"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(r(0,"div",0),T(1,"app-progress-spinner",1),r(2,"div",2)(3,"p",3),d(4),a(),r(5,"a",4),I("click",function(){return i.onFormCancel()}),T(6,"i",5),a(),T(7,"hr"),a(),r(8,"div",6)(9,"p",7),d(10),a(),C(11,zl,92,40,"ng-container",8),a()()),e&2&&(o(),c("optionsInfoAreaId",i.constructorInfoAreaId),o(3),w(i.formInfo.formTitle),o(6),f(" ",i.formInfo.formDescription," "),o(),c("ngIf",!i.publicHelper.processService.process.inRunAll))},dependencies:[V,no,H,N,ai,Ct],encapsulation:2});var Bi=Vi;var Kl=()=>[5,10,20,100],Jl=n=>({display:n});function Yl(n,l){if(n&1){let e=b();r(0,"a",38),I("click",function(){g(e);let t=m();return S(t.onActionBackToParent())}),T(1,"i",39),a()}}function Xl(n,l){if(n&1){let e=b();r(0,"div",40)(1,"a",41),I("click",function(){g(e);let t=m();return S(t.onActionButtonNewRow())}),T(2,"i",42)(3,"br"),a(),r(4,"p",43),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.ADD")," "))}function Zl(n,l){if(n&1){let e=b();r(0,"div",40)(1,"a",9),I("click",function(){g(e);let t=m();return S(t.onActionButtonAnswerList())}),T(2,"i",44)(3,"br"),a(),r(4,"p",43),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.ANSWERS")," "))}function $l(n,l){if(n&1){let e=b();r(0,"div",40)(1,"a",45),I("click",function(){g(e);let t=m();return S(t.onActionButtonAnswerList(t.tableRowSelected))}),T(2,"i",44),a(),r(3,"p",43),d(4),h(5,"translate"),a()()}n&2&&(o(4),f(" ",_(5,1,"ACTION.ANSWERS")," "))}function es(n,l){if(n&1){let e=b();r(0,"div",40)(1,"a",46),I("click",function(){g(e);let t=m();return S(t.onActionButtonViewRow(t.tableRowSelected))}),T(2,"i",47),a(),r(3,"p",43),d(4),h(5,"translate"),a()()}n&2&&(o(4),f(" ",_(5,1,"ACTION.VIEW")," "))}function ts(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function is(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.id," ")}}function ns(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function os(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"cmssiteinfo"),h(3,"async"),a()),n&2){let e=l.$implicit;o(),f(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function rs(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function as(n,l){if(n&1&&T(0,"select",51),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,Jl,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function ls(n,l){if(n&1&&(r(0,"mat-cell",49),h(1,"statusCellClass"),T(2,"i",49),h(3,"statusIconClass"),C(4,as,1,5,"select",50),a()),n&2){let e=l.$implicit,i=m();c("ngClass",_(1,3,e.recordStatus)),o(2),c("ngClass",_(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function ss(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function cs(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.title," ")}}function ds(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function ps(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),f(" ",_(2,1,e.createdDate)," ")}}function ms(n,l){if(n&1&&(r(0,"mat-header-cell",48),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function fs(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),f(" ",_(2,1,e.updatedDate)," ")}}function us(n,l){n&1&&(r(0,"mat-header-cell"),d(1),h(2,"translate"),a()),n&2&&(o(),f(" ",_(2,1,"TITLE.OPTION")," "))}function gs(n,l){if(n&1&&(r(0,"mat-cell",52)(1,"button",53)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Ss(n,l){n&1&&T(0,"mat-header-row")}function hs(n,l){if(n&1){let e=b();r(0,"mat-row",54),I("click",function(){let t=g(e).$implicit,s=m();return S(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Fi=class Fi extends st{constructor(e,i,t,s,v,p,Q,J,Ae,De,wt){super(e,new Oe,De,v,Q);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.router=s;this.tokenHelper=v;this.cdr=p;this.translate=Q;this.pageInfo=J;this.cmsStoreService=Ae;this.publicHelper=De;this.dialog=wt;this.requestDepartemenId=0;this.requestLinkCmsUserId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.optionsSearch=new En;this.optionsStatist=new yn;this.tokenInfo=new jt;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus","CreatedDate","UpdatedDate"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus","CreatedDate","UpdatedDate"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:mt=>this.onSubmitOptionsSearch(mt)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Oe);let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.requestLinkCmsUserId>0&&(t.propertyName="LinkCmsUserId",t.value=this.requestLinkCmsUserId,i.filters.push(t)),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){this.router.navigate(["/ticketing/contactus/"])}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Bi,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionButtonAnswerList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};Fi.\u0275fac=function(i){return new(i||Fi)(u(Ge),u(Ie),u(O),u(oe),u(le),u(L),u(B),u(lt),u(ae),u(F),u(we))},Fi.\u0275cmp=R({type:Fi,selectors:[["app-ticketing-task-contact-us-list"]],standalone:!1,features:[q],decls:57,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["mat-menu-item","","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-m","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),S(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),S(t.onActionButtonPrintRow())}),xe(1,4)(2,5)(3,6),M(4,7),C(5,Yl,2,0,"a",8),r(6,"a",9),I("click",function(){return g(s),S(t.viewGuideNotice=!t.viewGuideNotice)}),T(7,"i",10),a(),r(8,"a",9),I("click",function(){return g(s),S(t.onActionButtonReload())}),T(9,"i",11),a(),k(),M(10,12),r(11,"a",13),I("click",function(){return g(s),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(12,"mat-slide-toggle",14),d(13),h(14,"translate"),a(),r(15,"a",13),I("click",function(){return g(s),S(t.onActionButtonStatist())}),T(16,"mat-slide-toggle",14),d(17),h(18,"translate"),a(),k(),M(19,15),C(20,Xl,7,3,"div",16)(21,Zl,7,3,"div",16),k(),M(22,17),C(23,$l,6,3,"div",16)(24,es,6,3,"div",16),k(),M(25,18),r(26,"app-cms-search-list",19),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),S(p)}),a(),r(27,"app-cms-statist-list",19),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),S(p)}),a(),k(),M(28,20),r(29,"mat-table",21,0),I("matSortChange",function(){g(s);let p=D(30);return S(t.onTableSortData(p))}),M(31,22),C(32,ts,2,1,"mat-header-cell",23)(33,is,2,1,"mat-cell",24),k(),M(34,25),C(35,ns,2,1,"mat-header-cell",23)(36,os,4,5,"mat-cell",24),k(),M(37,26),C(38,rs,2,1,"mat-header-cell",23)(39,ls,5,7,"mat-cell",27),k(),M(40,28),C(41,ss,2,1,"mat-header-cell",23)(42,cs,2,1,"mat-cell",24),k(),M(43,29),C(44,ds,2,1,"mat-header-cell",23)(45,ps,3,3,"mat-cell",24),k(),M(46,30),C(47,ms,2,1,"mat-header-cell",23)(48,fs,3,3,"mat-cell",24),k(),M(49,31),C(50,us,3,3,"mat-header-cell",32)(51,gs,6,1,"mat-cell",33),k(),C(52,Ss,1,0,"mat-header-row",34)(53,hs,1,2,"mat-row",35),a(),k(),M(54,36),r(55,"mat-paginator",37,1),I("page",function(p){return g(s),S(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.task.contactus-list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(5),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),f("",_(14,25,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),f("",_(18,27,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(23),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(29,Kl)))},dependencies:[Et,V,We,Be,Fe,W,Ue,So,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Vt,Ve,N,vt,Ct,Bt,Ft],encapsulation:2});var Yi=Fi;var vs=["vform"];function Cs(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",23),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),S(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Is(n,l){n&1&&T(0,"i",30)}function bs(n,l){n&1&&T(0,"i",31)}function Ms(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function ks(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",25),d(2),a(),r(3,"input",26,2),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.fullName,t)||(s.dataModel.fullName=t),S(t)}),a(),C(5,Is,1,0,"i",27)(6,bs,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Ms,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle)),E("ngModel",i.dataModel.fullName),c("disabled",!(i.fieldsInfo.fullName!=null&&i.fieldsInfo.fullName.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function ws(n,l){n&1&&T(0,"i",30)}function Es(n,l){n&1&&T(0,"i",31)}function ys(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function As(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",32),d(2),a(),r(3,"input",33,3),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),S(t)}),a(),C(5,ws,1,0,"i",27)(6,Es,1,0,"i",28),r(7,"em"),d(8),a(),C(9,ys,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Ds(n,l){n&1&&T(0,"i",30)}function xs(n,l){n&1&&T(0,"i",31)}function Rs(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Ls(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",34),d(2),a(),r(3,"input",35,4),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),S(t)}),a(),C(5,Ds,1,0,"i",27)(6,xs,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Rs,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle)),E("ngModel",i.dataModel.phoneNo),c("disabled",!(i.fieldsInfo.phoneNo!=null&&i.fieldsInfo.phoneNo.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Vs(n,l){n&1&&T(0,"i",30)}function Bs(n,l){n&1&&T(0,"i",31)}function Fs(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Ns(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",36),d(2),a(),r(3,"input",37,5),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.email,t)||(s.dataModel.email=t),S(t)}),a(),C(5,Vs,1,0,"i",27)(6,Bs,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Fs,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle)),E("ngModel",i.dataModel.email),c("disabled",!(i.fieldsInfo.email!=null&&i.fieldsInfo.email.accessAddField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Os(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",38),d(2),h(3,"translate"),a(),r(4,"textarea",39,6),h(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),S(t)}),d(7,"            "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),w(_(3,6,"TITLE.Description")),o(2),c("placeholder",x(_(6,8,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)),o(5),f("",e.value.length," / 1000")}}function Gs(n,l){if(n&1){let e=b();r(0,"div",40)(1,"label",41),d(2),a(),r(3,"input",42),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),S(t)}),a(),T(4,"mat-datepicker-toggle",43)(5,"mat-datepicker",44,7),a()}if(n&2){let e=D(6),i=m();o(2),w(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),o(),c("matDatepicker",e),E("ngModel",i.dataModel.expireDate),o(),c("for",e)}}function Ps(n,l){if(n&1){let e=b();r(0,"div",45)(1,"button",46),I("click",function(){g(e);let t=m();return S(t.onActionBackToParent())}),d(2),h(3,"translate"),a(),r(4,"button",47),d(5),h(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),f(" ",_(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),f(" ",_(6,5,"ACTION.NEXT")," ")}}function Hs(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",48),d(2),a(),r(3,"input",49,8),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.userIpAddress,t)||(s.dataModel.userIpAddress=t),S(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle)),E("ngModel",i.dataModel.userIpAddress),c("disabled",!(i.fieldsInfo.userIpAddress!=null&&i.fieldsInfo.userIpAddress.accessAddField)),o(3),f("",e.value.length," / 100")}}function qs(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",50),d(2),a(),r(3,"input",51,9),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.deviceInformation,t)||(s.dataModel.deviceInformation=t),S(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.deviceInformation==null?null:i.fieldsInfo.deviceInformation.fieldTitle)),E("ngModel",i.dataModel.deviceInformation),c("disabled",!(i.fieldsInfo.deviceInformation!=null&&i.fieldsInfo.deviceInformation.accessAddField)),o(3),f("",e.value.length," / 100")}}function Ws(n,l){if(n&1&&(r(0,"div",45)(1,"button",52),d(2),h(3,"translate"),a(),r(4,"button",53),d(5),h(6,"translate"),a()()),n&2){m();let e=D(9);o(2),f(" ",_(3,3,"ACTION.BEFOR")," "),o(2),c("disabled",!e.form.valid),o(),f(" ",_(6,5,"ACTION.SAVE")," ")}}var Ni=class Ni extends Tt{constructor(e,i,t,s,v,p,Q,J,Ae){super(s,new Oe,i,Ae);this.activatedRoute=e;this.publicHelper=i;this.coreEnumService=t;this.ticketingTaskService=s;this.cmsToastrService=v;this.dialogRef=p;this.router=Q;this.cdr=J;this.translate=Ae;this.requestLinkDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.formInfo=new ie;this.dataModel=new Oe;this.dataModelResult=new j;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new xt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.requestLinkDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkDepartemenId")),this.dataModel.linkTicketingDepartemenId=this.requestLinkDepartemenId,this.DataGetAccess()}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataAddContent()}DataAddContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTaskService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>this.router.navigate(["/ticketing/task/"]),1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}this.dataModel.linkTicketingDepartemenId=e.id}};Ni.\u0275fac=function(i){return new(i||Ni)(u(Ie),u(F),u(U),u(Ge),u(O),u(re),u(oe),u(L),u(B))},Ni.\u0275cmp=R({type:Ni,selectors:[["app-ticketing-task-add"]],viewQuery:function(i,t){if(i&1&&X(vs,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:32,vars:32,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=b();r(0,"div",10),T(1,"app-progress-spinner",11),r(2,"div",12)(3,"p",13),d(4),a(),r(5,"p"),d(6),h(7,"translate"),a(),r(8,"form",14,0),I("ngSubmit",function(){return g(s),S(t.onFormSubmit())}),r(10,"mat-horizontal-stepper",15,1),I("selectionChange",function(p){g(s);let Q=D(11);return S(t.onStepClick(p,Q))}),r(12,"mat-step",16),h(13,"translate"),C(14,Cs,1,5,"app-cms-enum-record-status-selector",17),r(15,"app-ticketing-departemen-selector",18),h(16,"translate"),I("optionChange",function(p){return g(s),S(t.onActionSelectSource(p))}),a(),C(17,ks,10,9,"div",19)(18,As,10,9,"div",19)(19,Ls,10,9,"div",19)(20,Ns,10,9,"div",19)(21,Os,10,10,"div",19)(22,Gs,7,4,"div",20)(23,Ps,7,7,"div",21),a(),r(24,"mat-step",22),h(25,"translate"),r(26,"p"),d(27),h(28,"translate"),a(),C(29,Hs,7,6,"div",19)(30,qs,7,6,"div",19)(31,Ws,7,7,"div",21),a()()()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),f(" ",t.formInfo.formTitle," "),o(2),f(" ",_(7,22,"TITLE.Be_Careful_When_Entering_Information")," "),o(6),c("label",x(_(13,24,"TITLE.REQUIRED_INFORMATION"))),o(2),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(16,26,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessAddField)),o(2),c("ngIf",t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.accessWatchField),o(),c("ngIf",t.fieldsInfo.email==null?null:t.fieldsInfo.email.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow),o(),c("label",x(_(25,28,"TITLE.REST_OF_THE_INFORMATION"))),o(3),w(_(28,30,"TITLE.Rest_of_Information")),o(2),c("ngIf",t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.accessWatchField),o(),c("ngIf",t.fieldsInfo.deviceInformation==null?null:t.fieldsInfo.deviceInformation.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,_e,ee,te,Se,Te,ve,Ce,fe,he,fn,un,gn,ke,mn,W,Cn,In,bn,Mn,Me,H,Ee,N],encapsulation:2});var jn=Ni;var js=["vform"];function Us(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",23),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),S(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Qs(n,l){n&1&&T(0,"i",30)}function zs(n,l){n&1&&T(0,"i",31)}function Ks(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.fullName==null?null:e.fieldsInfo.fullName.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Js(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",25),d(2),a(),r(3,"input",26,2),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.fullName,t)||(s.dataModel.fullName=t),S(t)}),a(),C(5,Qs,1,0,"i",27)(6,zs,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Ks,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.fullName==null?null:i.fieldsInfo.fullName.fieldTitle)),E("ngModel",i.dataModel.fullName),c("disabled",!(i.fieldsInfo.fullName!=null&&i.fieldsInfo.fullName.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Ys(n,l){n&1&&T(0,"i",30)}function Xs(n,l){n&1&&T(0,"i",31)}function Zs(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function $s(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",32),d(2),a(),r(3,"input",33,3),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),S(t)}),a(),C(5,Ys,1,0,"i",27)(6,Xs,1,0,"i",28),r(7,"em"),d(8),a(),C(9,Zs,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function ec(n,l){n&1&&T(0,"i",30)}function tc(n,l){n&1&&T(0,"i",31)}function ic(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.phoneNo==null?null:e.fieldsInfo.phoneNo.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function nc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",34),d(2),a(),r(3,"input",35,4),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.phoneNo,t)||(s.dataModel.phoneNo=t),S(t)}),a(),C(5,ec,1,0,"i",27)(6,tc,1,0,"i",28),r(7,"em"),d(8),a(),C(9,ic,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.phoneNo==null?null:i.fieldsInfo.phoneNo.fieldTitle)),E("ngModel",i.dataModel.phoneNo),c("disabled",!(i.fieldsInfo.phoneNo!=null&&i.fieldsInfo.phoneNo.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function oc(n,l){n&1&&T(0,"i",30)}function rc(n,l){n&1&&T(0,"i",31)}function ac(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.email==null?null:e.fieldsInfo.email.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function lc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",36),d(2),a(),r(3,"input",37,5),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.email,t)||(s.dataModel.email=t),S(t)}),a(),C(5,oc,1,0,"i",27)(6,rc,1,0,"i",28),r(7,"em"),d(8),a(),C(9,ac,5,4,"mat-error",29),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.email==null?null:i.fieldsInfo.email.fieldTitle)),E("ngModel",i.dataModel.email),c("disabled",!(i.fieldsInfo.email!=null&&i.fieldsInfo.email.accessEditField)),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function sc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",38),d(2),h(3,"translate"),a(),r(4,"textarea",39,6),h(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),S(t)}),d(7,"            "),a(),r(8,"em"),d(9),a()()}if(n&2){let e=D(5),i=m();o(2),w(_(3,6,"TITLE.Description")),o(2),c("placeholder",x(_(6,8,"TITLE.Description"))),E("ngModel",i.dataModel.htmlBody),c("disabled",!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessEditField)),o(5),f("",e.value.length," / 1000")}}function cc(n,l){if(n&1){let e=b();r(0,"div",40)(1,"label",41),d(2),a(),r(3,"input",42),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),S(t)}),a(),T(4,"mat-datepicker-toggle",43)(5,"mat-datepicker",44,7),a()}if(n&2){let e=D(6),i=m();o(2),w(i.fieldsInfo.expireDate==null?null:i.fieldsInfo.expireDate.fieldTitle),o(),c("matDatepicker",e),E("ngModel",i.dataModel.expireDate),o(),c("for",e)}}function dc(n,l){if(n&1){let e=b();r(0,"div",45)(1,"button",46),I("click",function(){g(e);let t=m();return S(t.onActionBackToParent())}),d(2),h(3,"translate"),a(),r(4,"button",47),d(5),h(6,"translate"),a()()}if(n&2){m();let e=D(9);o(2),f(" ",_(3,3,"ACTION.BACK")," "),o(2),c("disabled",!e.form.valid),o(),f(" ",_(6,5,"ACTION.NEXT")," ")}}function pc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",48),d(2),a(),r(3,"input",49,8),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.userIpAddress,t)||(s.dataModel.userIpAddress=t),S(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle)),E("ngModel",i.dataModel.userIpAddress),c("disabled",!(i.fieldsInfo.userIpAddress!=null&&i.fieldsInfo.userIpAddress.accessEditField)),o(3),f("",e.value.length," / 100")}}function mc(n,l){if(n&1){let e=b();r(0,"div",24)(1,"label",50),d(2),a(),r(3,"input",51,9),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.deviceInformation,t)||(s.dataModel.deviceInformation=t),S(t)}),a(),r(5,"em"),d(6),a()()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.userIpAddress==null?null:i.fieldsInfo.userIpAddress.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.deviceInformation==null?null:i.fieldsInfo.deviceInformation.fieldTitle)),E("ngModel",i.dataModel.deviceInformation),c("disabled",!(i.fieldsInfo.deviceInformation!=null&&i.fieldsInfo.deviceInformation.accessEditField)),o(3),f("",e.value.length," / 100")}}function fc(n,l){if(n&1&&(r(0,"div",45)(1,"button",52),d(2),h(3,"translate"),a(),r(4,"button",53),d(5),h(6,"translate"),a()()),n&2){m();let e=D(9);o(2),f(" ",_(3,3,"ACTION.BEFOR")," "),o(2),c("disabled",!e.form.valid),o(),f(" ",_(6,5,"ACTION.SAVE")," ")}}var Oi=class Oi extends Lt{constructor(e,i,t,s,v,p,Q,J,Ae,De){super(p,new Oe,s,De);this.data=e;this.activatedRoute=i;this.dialogRef=t;this.publicHelper=s;this.coreEnumService=v;this.ticketingTaskService=p;this.cmsToastrService=Q;this.router=J;this.cdr=Ae;this.translate=De;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.formInfo=new ie;this.dataModel=new Oe;this.dataModelResult=new ht;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.fileManagerOpenForm=!1;this.appLanguage="fa";this.mapOptonCenter=new xt;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),e&&(this.requestId=+e.id||0)}ngOnInit(){if(this.requestId===0){this.cmsToastrService.typeErrorAddRowParentIsNull(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOne(this.requestId)}onFormSubmit(){if(!this.formGroup.valid){this.cmsToastrService.typeErrorFormInvalid();return}this.DataEditContent()}DataGetOne(e){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.get_information_from_the_server").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError="";let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),this.ticketingTaskService.setAccessLoad(),this.ticketingTaskService.setAccessDataType(St.Editor),this.ticketingTaskService.ServiceGetOneById(e).subscribe({next:t=>{this.dataAccessModel=t.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.publicHelper.processService.processStop(i),this.dataModelResult=t,this.formInfo.formSubmitAllow=!0,t.isSuccess?(this.dataModel=t.item,this.ticketingTaskService.ServiceTaskReaded(e).subscribe({next:s=>{},error:s=>{this.cmsToastrService.typeErrorGetOne(s)}})):this.cmsToastrService.typeErrorGetOne(t.errorMessage)},error:t=>{this.publicHelper.processService.processStop(i),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorGetOne(t)}})}DataEditContent(){this.formInfo.formSubmitAllow=!1,this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTaskService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!i.isSuccess,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),setTimeout(()=>{this.dialogRef.close({dialogChangedDate:!0})},1e3)):this.cmsToastrService.typeErrorEdit(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeErrorEdit(i)}})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex}onActionBackToParent(){this.dialogRef.close({dialogChangedDate:!1})}onActionFileSelectedLinkMainImageId(){}onActionSelectSource(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_source","MESSAGE.The_source_of_the_information_application_is_not_known"]).subscribe(i=>{this.cmsToastrService.typeErrorMessage(i["MESSAGE.Specify_the_source"],i["MESSAGE.The_source_of_the_information_application_is_not_known"])});return}}};Oi.\u0275fac=function(i){return new(i||Oi)(u(ue),u(Ie),u(re),u(F),u(U),u(Ge),u(O),u(oe),u(L),u(B))},Oi.\u0275cmp=R({type:Oi,selectors:[["app-ticketing-task-edit"]],viewQuery:function(i,t){if(i&1&&X(js,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:32,vars:32,consts:[["vform","ngForm"],["stepper",""],["FullName",""],["Title",""],["PhoneNo",""],["Email",""],["HtmlBody",""],["ExpireDate",""],["UserIpAddress",""],["DeviceInformation",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionDisabled"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.fullName",1,"color-highlight"],["matInput","","type","text","name","dataModel.fullName","minlength","3","maxlength","1000","required","","id","dataModel.fullName",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.phoneNo",1,"color-highlight"],["matInput","","type","text","name","dataModel.phoneNo","type","text","minlength","3","maxlength","100","required","","id","dataModel.phoneNo",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.email",1,"color-highlight"],["matInput","","type","text","name","dataModel.email","type","text","minlength","3","maxlength","100","required","","id","dataModel.email",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","0","maxlength","1000","rows","5","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","type","text","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["for","dataModel.userIpAddress",1,"color-highlight"],["matInput","","type","text","name","dataModel.userIpAddress","type","text","minlength","0","maxlength","100","id","dataModel.userIpAddress",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.deviceInformation",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceInformation","type","text","minlength","0","maxlength","100","id","dataModel.deviceInformation",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let s=b();r(0,"div",10),T(1,"app-progress-spinner",11),r(2,"div",12)(3,"p",13),d(4),a(),r(5,"p"),d(6),h(7,"translate"),a(),r(8,"form",14,0),I("ngSubmit",function(){return g(s),S(t.onFormSubmit())}),r(10,"mat-horizontal-stepper",15,1),I("selectionChange",function(p){g(s);let Q=D(11);return S(t.onStepClick(p,Q))}),r(12,"mat-step",16),h(13,"translate"),C(14,Us,1,5,"app-cms-enum-record-status-selector",17),r(15,"app-ticketing-departemen-selector",18),h(16,"translate"),I("optionChange",function(p){return g(s),S(t.onActionSelectSource(p))}),a(),C(17,Js,10,9,"div",19)(18,$s,10,9,"div",19)(19,nc,10,9,"div",19)(20,lc,10,9,"div",19)(21,sc,10,10,"div",19)(22,cc,7,4,"div",20)(23,dc,7,7,"div",21),a(),r(24,"mat-step",22),h(25,"translate"),r(26,"p"),d(27),h(28,"translate"),a(),C(29,pc,7,6,"div",19)(30,mc,7,6,"div",19)(31,fc,7,7,"div",21),a()()()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),f(" ",t.formInfo.formTitle," "),o(2),f(" ",_(7,22,"TITLE.Be_Careful_When_Entering_Information")," "),o(6),c("label",x(_(13,24,"TITLE.REQUIRED_INFORMATION"))),o(2),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(16,26,"TITLE.Department"))("optionDisabled",!(t.fieldsInfo.linkTicketingDepartemenId!=null&&t.fieldsInfo.linkTicketingDepartemenId.accessEditField)),o(2),c("ngIf",t.fieldsInfo.fullName==null?null:t.fieldsInfo.fullName.accessWatchField),o(),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.phoneNo==null?null:t.fieldsInfo.phoneNo.accessWatchField),o(),c("ngIf",t.fieldsInfo.email==null?null:t.fieldsInfo.email.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow),o(),c("label",x(_(25,28,"TITLE.REST_OF_THE_INFORMATION"))),o(3),w(_(28,30,"TITLE.Rest_of_Information")),o(2),c("ngIf",t.fieldsInfo.userIpAddress==null?null:t.fieldsInfo.userIpAddress.accessWatchField),o(),c("ngIf",t.fieldsInfo.deviceInformation==null?null:t.fieldsInfo.deviceInformation.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,_e,ee,te,Se,Te,ve,Ce,fe,he,fn,un,gn,ke,mn,W,Cn,In,bn,Mn,Me,H,Ee,N],encapsulation:2});var Un=Oi;var uc=()=>[5,10,20,100],gc=n=>({background:n});function Sc(n,l){if(n&1){let e=b();r(0,"a",40),I("click",function(){g(e);let t=m();return S(t.onActionBackToParent())}),T(1,"i",41),a()}}function hc(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",43),I("click",function(){g(e);let t=m();return S(t.onActionButtonNewRow())}),T(2,"i",44)(3,"br"),a(),r(4,"p",45),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.ADD")," "))}function _c(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",10),I("click",function(){g(e);let t=m();return S(t.onActionButtonAnswerList())}),T(2,"i",46)(3,"br"),a(),r(4,"p",45),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.ANSWERS")," "))}function Tc(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",47),I("click",function(){g(e);let t=m();return S(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",48)(3,"br"),a(),r(4,"p",45),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.EDIT")," "))}function vc(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",49),I("click",function(){g(e);let t=m();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",50)(3,"br"),a(),r(4,"p",45),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.DELETE")," "))}function Cc(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",51),I("click",function(){g(e);let t=m();return S(t.onActionButtonAnswerList(t.tableRowSelected))}),T(2,"i",46)(3,"br"),a(),r(4,"p",45),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.ANSWERS")," "))}function Ic(n,l){if(n&1){let e=b();r(0,"div",42)(1,"a",52),I("click",function(){g(e);let t=m();return S(t.onActionButtonViewRow(t.tableRowSelected))}),T(2,"i",53)(3,"br"),a(),r(4,"p",45),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.VIEW")," "))}function bc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Mc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.id," ")}}function kc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function wc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"cmssiteinfo"),h(3,"async"),a()),n&2){let e=l.$implicit;o(),f(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function Ec(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function yc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.linkMemberId," ")}}function Ac(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function Dc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.title," ")}}function xc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Rc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),f(" ",_(2,1,e.createdDate)," ")}}function Lc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Vc(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"localeDate"),a()),n&2){let e=l.$implicit;o(),f(" ",_(2,1,e.updatedDate)," ")}}function Bc(n,l){if(n&1&&(r(0,"mat-header-cell",54),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.ticketStatus==null?null:e.fieldsInfo.ticketStatus.fieldTitle," ")}}function Fc(n,l){if(n&1&&(r(0,"mat-cell",55),d(1),h(2,"enums"),a()),n&2){let e=l.$implicit,i=m();c("ngStyle",qe(5,gc,i.publicHelper.RowStyleTicketStatus(e.ticketStatus))),o(),f(" ",ni(2,2,e.ticketStatus,i.dataModelEnumTicketStatusResult.listItems)," ")}}function Nc(n,l){n&1&&(r(0,"mat-header-cell"),d(1),h(2,"translate"),a()),n&2&&(o(),f(" ",_(2,1,"TITLE.OPTION")," "))}function Oc(n,l){if(n&1&&(r(0,"mat-cell",56)(1,"button",57)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Gc(n,l){n&1&&T(0,"mat-header-row")}function Pc(n,l){if(n&1){let e=b();r(0,"mat-row",58),I("click",function(){let t=g(e).$implicit,s=m();return S(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var Gi=class Gi extends st{constructor(e,i,t,s,v,p,Q,J,Ae,De,wt,mt,ji){super(e,new Oe,mt,p,Ae);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=v;this.tokenHelper=p;this.cmsStoreService=Q;this.cdr=J;this.translate=Ae;this.ticketingEnumService=De;this.pageInfo=wt;this.publicHelper=mt;this.dialog=ji;this.requestDepartemenId=0;this.requestLinkCmsUserId=0;this.requestTicketStatus=-1;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.dataModelEnumTicketStatusResult=new j;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Title","LinkMemberId","CreatedDate","UpdatedDate","TicketStatus"];this.tabledisplayedColumnsMobileSource=["Title","LinkMemberId","CreatedDate","UpdatedDate","TicketStatus"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:Yn=>this.onSubmitOptionsSearch(Yn)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.requestLinkCmsUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkCmsUserId")),this.activatedRoute.snapshot.paramMap.get("TicketStatus")&&(this.requestTicketStatus=+Number(this.activatedRoute.snapshot.paramMap.get("TicketStatus"))),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.getEnumTicketStatus(),this.tokenInfo=e,this.DataGetAll()})),this.getEnumTicketStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}getEnumTicketStatus(){this.ticketingEnumService.ServiceTicketStatusEnum().subscribe({next:e=>{this.dataModelEnumTicketStatusResult=e}})}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Oe);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.requestLinkCmsUserId>0&&(t.propertyName="LinkCmsUserId",t.value=this.requestLinkCmsUserId,i.filters.push(t)),this.requestTicketStatus>=0&&(t.propertyName="TicketStatus",t.value=this.requestTicketStatus,i.filters.push(t)),this.contentService.ServiceGetAll(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(jn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{linkDepartemenId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}this.tableRowSelected=e;var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Bi,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Un,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonAnswerList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}this.router.navigate(["/ticketing/answer/LinkTaskId/",this.tableRowSelected.id])}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let v=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(v,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(v)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(v,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(this.translate.get("MESSAGE.All").subscribe(Q=>{i.set(Q,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(this.translate.get("MESSAGE.Active").subscribe(Q=>{i.set(Q,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.requestTicketStatus=-1,this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};Gi.\u0275fac=function(i){return new(i||Gi)(u(Ge),u(Ie),u(O),u(Rt),u(oe),u(le),u(ae),u(L),u(B),u(Ut),u(lt),u(F),u(we))},Gi.\u0275cmp=R({type:Gi,selectors:[["app-ticketing-task-list"]],standalone:!1,features:[q],decls:63,vars:32,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkMemberId"],["matColumnDef","Title"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","TicketStatus"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],[1,"fa-solid","fa-phone-arrow-right","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],["type","button","target","_blank","data-toggle","modal","data-target","#categoryModal",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),S(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),S(t.onActionButtonPrintRow())}),M(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return g(s),S(t.onActionSelectorSelect(p))}),a(),k(),xe(3,6)(4,7),M(5,8),C(6,Sc,2,0,"a",9),r(7,"a",10),I("click",function(){return g(s),S(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),I("click",function(){return g(s),S(t.onActionButtonReload())}),T(10,"i",12),a(),k(),M(11,13),r(12,"a",14),I("click",function(){return g(s),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),h(15,"translate"),a(),r(16,"a",14),I("click",function(){return g(s),S(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),h(19,"translate"),a(),k(),M(20,16),C(21,hc,7,3,"div",17)(22,_c,7,3,"div",17),k(),M(23,18),C(24,Tc,7,3,"div",17)(25,vc,7,3,"div",17)(26,Cc,7,3,"div",17)(27,Ic,7,3,"div",17),k(),M(28,19),r(29,"app-cms-search-list",20),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),S(p)}),a(),r(30,"app-cms-statist-list",20),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),S(p)}),a(),k(),M(31,21),r(32,"mat-table",22,0),I("matSortChange",function(){g(s);let p=D(33);return S(t.onTableSortData(p))}),M(34,23),C(35,bc,2,1,"mat-header-cell",24)(36,Mc,2,1,"mat-cell",25),k(),M(37,26),C(38,kc,2,1,"mat-header-cell",24)(39,wc,4,5,"mat-cell",25),k(),M(40,27),C(41,Ec,2,1,"mat-header-cell",24)(42,yc,2,1,"mat-cell",25),k(),M(43,28),C(44,Ac,2,1,"mat-header-cell",24)(45,Dc,2,1,"mat-cell",25),k(),M(46,29),C(47,xc,2,1,"mat-header-cell",24)(48,Rc,3,3,"mat-cell",25),k(),M(49,30),C(50,Lc,2,1,"mat-header-cell",24)(51,Vc,3,3,"mat-cell",25),k(),M(52,31),C(53,Bc,2,1,"mat-header-cell",24)(54,Fc,3,7,"mat-cell",32),k(),M(55,33),C(56,Nc,3,3,"mat-header-cell",34)(57,Oc,6,1,"mat-cell",35),k(),C(58,Gc,1,0,"mat-header-row",36)(59,Pc,1,2,"mat-row",37),a(),k(),M(60,38),r(61,"mat-paginator",39,1),I("page",function(p){return g(s),S(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey","ticketing.task.list"),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),f("",_(15,27,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),f("",_(19,29,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),o(),c("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow)&&(t.tableRowSelected==null?null:t.tableRowSelected.id)>0),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(26),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(31,uc)))},dependencies:[V,We,Be,Fe,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Nt,Ve,N,ai,vt,Ct],encapsulation:2});var ei=Gi;var Hc=["vform"];function qc(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",12),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),S(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Wc(n,l){n&1&&T(0,"i",19)}function jc(n,l){n&1&&T(0,"i",20)}function Uc(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function Qc(n,l){if(n&1){let e=b();r(0,"div",13)(1,"label",14),d(2),a(),r(3,"input",15,1),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),S(t)}),a(),C(5,Wc,1,0,"i",16)(6,jc,1,0,"i",17),r(7,"em"),d(8),a(),C(9,Uc,5,4,"mat-error",18),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function zc(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.fieldTitle," "),o(2),w(_(4,2,"MESSAGE.required"))}}function Kc(n,l){if(n&1){let e=b();r(0,"div",13)(1,"label",21),d(2),h(3,"translate"),a(),r(4,"textarea",22,2),h(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),S(t)}),d(7,"        "),a(),r(8,"em"),d(9),a(),C(10,zc,5,4,"mat-error",18),a()}if(n&2){let e=D(5),i=m();o(2),w(_(3,8,"TITLE.Description")),o(2),c("disabled",x(!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)))("placeholder",x(_(6,10,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),o(5),f("",e.value.length," / 2000"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function Jc(n,l){if(n&1){let e=b();r(0,"div",23)(1,"button",24),I("click",function(){g(e);let t=m();return S(t.onFormCancel())}),T(2,"i",25),d(3),h(4,"translate"),a(),r(5,"button",26),T(6,"i",27),d(7),h(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),f(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),f(" ",_(8,5,"ACTION.SAVE")," ")}}var Pi=class Pi extends Tt{constructor(e,i,t,s,v,p,Q,J){super(s,new ft,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingTemplateService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestParentId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.formMatcher=new zt;this.dataModelResult=new j;this.dataModel=new ft;this.formInfo=new ie;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=+e.parentId||0),this.requestParentId>0&&(this.dataModel.linkTicketingDepartemenId=this.requestParentId)}ngOnInit(){this.translate.get("TITLE.Submit_New_Content").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess()}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Pi.\u0275fac=function(i){return new(i||Pi)(u(ue),u(re),u(U),u(Dt),u(O),u(F),u(L),u(B))},Pi.\u0275cmp=R({type:Pi,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,t){if(i&1&&X(Hc,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:16,vars:13,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),h(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return g(s),S(t.onFormSubmit())}),C(10,qc,1,5,"app-cms-enum-record-status-selector",8),r(11,"app-ticketing-departemen-selector",9),h(12,"translate"),I("optionChange",function(p){return g(s),S(t.onActionSelectorSelect(p))}),a(),C(13,Qc,10,8,"div",10)(14,Kc,11,12,"div",10)(15,Jc,9,7,"div",11),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),f(" ",t.formInfo.formTitle," "),o(2),f(" ",_(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,11,"TITLE.Department")),o(2),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,_e,ee,te,Se,Te,ve,Ce,fe,he,ke,W,Me,H,Ee,N],encapsulation:2});var Qn=Pi;var Yc=["vform"];function Xc(n,l){if(n&1){let e=b();r(0,"app-cms-enum-record-status-selector",12),A("modelChange",function(t){g(e);let s=m();return y(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),S(t)}),a()}if(n&2){let e=m();E("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Zc(n,l){n&1&&T(0,"i",19)}function $c(n,l){n&1&&T(0,"i",20)}function ed(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),o(2),w(_(4,2,"MESSAGE.required"))}}function td(n,l){if(n&1){let e=b();r(0,"div",13)(1,"label",14),d(2),a(),r(3,"input",15,1),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.title,t)||(s.dataModel.title=t),S(t)}),a(),C(5,Zc,1,0,"i",16)(6,$c,1,0,"i",17),r(7,"em"),d(8),a(),C(9,ed,5,4,"mat-error",18),a()}if(n&2){let e=D(4),i=m();o(2),w(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),o(),c("placeholder",x(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),E("ngModel",i.dataModel.title),o(2),c("ngIf",!e.value),o(),c("ngIf",e.value),o(2),f("",e.value.length," / 100"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function id(n,l){if(n&1&&(r(0,"mat-error"),d(1),r(2,"strong"),d(3),h(4,"translate"),a()()),n&2){let e=m(2);o(),f(" ",e.fieldsInfo.htmlBody==null?null:e.fieldsInfo.htmlBody.fieldTitle," "),o(2),w(_(4,2,"MESSAGE.required"))}}function nd(n,l){if(n&1){let e=b();r(0,"div",13)(1,"label",21),d(2),h(3,"translate"),a(),r(4,"textarea",22,2),h(6,"translate"),A("ngModelChange",function(t){g(e);let s=m();return y(s.dataModel.htmlBody,t)||(s.dataModel.htmlBody=t),S(t)}),d(7,"        "),a(),r(8,"em"),d(9),a(),C(10,id,5,4,"mat-error",18),a()}if(n&2){let e=D(5),i=m();o(2),w(_(3,8,"TITLE.Description")),o(2),c("disabled",x(!(i.fieldsInfo.htmlBody!=null&&i.fieldsInfo.htmlBody.accessAddField)))("placeholder",x(_(6,10,"TITLE.Answer_Text"))),E("ngModel",i.dataModel.htmlBody),o(5),f("",e.value.length," / 2000"),o(),c("ngIf",e.errors==null?null:e.errors.required)}}function od(n,l){if(n&1){let e=b();r(0,"div",23)(1,"button",24),I("click",function(){g(e);let t=m();return S(t.onFormCancel())}),T(2,"i",25),d(3),h(4,"translate"),a(),r(5,"button",26),T(6,"i",27),d(7),h(8,"translate"),a()()}if(n&2){m();let e=D(9);o(3),f(" ",_(4,3,"ACTION.CANCEL")," "),o(2),c("disabled",!e.form.valid),o(2),f(" ",_(8,5,"ACTION.SAVE")," ")}}var Hi=class Hi extends Lt{constructor(e,i,t,s,v,p,Q,J){super(s,new ft,p,J);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.ticketingTemplateService=s;this.cmsToastrService=v;this.publicHelper=p;this.cdr=Q;this.translate=J;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.formMatcher=new zt;this.dataModelResult=new ht;this.dataModel=new ft;this.dataFileModel=new Map;this.formInfo=new ie;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit_Categories").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.setAccessLoad(),this.ticketingTemplateService.setAccessDataType(St.Editor),this.ticketingTemplateService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.ticketingTemplateService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e)}})}onActionSelectorSelect(e){if(!e||e.id<=0){this.translate.get("MESSAGE.Information_department_is_not_clear").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.dataModel.linkTicketingDepartemenId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Hi.\u0275fac=function(i){return new(i||Hi)(u(ue),u(re),u(U),u(Dt),u(O),u(F),u(L),u(B))},Hi.\u0275cmp=R({type:Hi,selectors:[["app-ticketing-template-add"]],viewQuery:function(i,t){if(i&1&&X(Yc,5),i&2){let s;Z(s=$())&&(t.formGroup=s.first)}},standalone:!1,features:[q],decls:16,vars:13,consts:[["vform","ngForm"],["Title",""],["HtmlBody",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","type","text","minlength","3","maxlength","100","required","","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","fa fa-times invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-times","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],["for","dataModel.htmlBody",1,"color-highlight"],["matInput","","name","dataModel.htmlBody","type","text","minlength","1","maxlength","2000","rows","7","id","dataModel.htmlBody",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let s=b();r(0,"div",3),T(1,"app-progress-spinner",4),r(2,"div",5)(3,"p",6),d(4),a(),r(5,"p"),d(6),h(7,"translate"),a(),r(8,"form",7,0),I("ngSubmit",function(){return g(s),S(t.onFormSubmit())}),C(10,Xc,1,5,"app-cms-enum-record-status-selector",8),r(11,"app-ticketing-departemen-selector",9),h(12,"translate"),I("optionChange",function(p){return g(s),S(t.onActionSelectorSelect(p))}),a(),C(13,td,10,8,"div",10)(14,nd,11,12,"div",10)(15,od,9,7,"div",11),a()()()}i&2&&(o(),c("optionsInfoAreaId",t.constructorInfoAreaId),o(3),f(" ",t.formInfo.formTitle," "),o(2),f(" ",_(7,9,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(),c("optionSelectForce",t.dataModel.linkTicketingDepartemenId)("optionPlaceholder",_(12,11,"TITLE.Department")),o(2),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),o(),c("ngIf",t.fieldsInfo.htmlBody==null?null:t.fieldsInfo.htmlBody.accessWatchField),o(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,_e,ee,te,Se,Te,ve,Ce,fe,he,ke,W,Me,H,Ee,N],encapsulation:2});var zn=Hi;var rd=()=>[5,10,20,100],ad=n=>({display:n});function ld(n,l){if(n&1){let e=b();r(0,"a",37),I("click",function(){g(e);let t=m();return S(t.onActionBackToParent())}),T(1,"i",38),a()}}function sd(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",40),I("click",function(){g(e);let t=m();return S(t.onActionButtonNewRow())}),T(2,"i",41)(3,"br"),a(),r(4,"p",42),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.ADD")," "))}function cd(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",43),I("click",function(){g(e);let t=m();return S(t.onActionButtonEditRow(t.tableRowSelected))}),T(2,"i",44)(3,"br"),a(),r(4,"p",42),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.EDIT")," "))}function dd(n,l){if(n&1){let e=b();r(0,"div",39)(1,"a",45),I("click",function(){g(e);let t=m();return S(t.onActionButtonDeleteRow(t.tableRowSelected))}),T(2,"i",46)(3,"br"),a(),r(4,"p",42),d(5),h(6,"translate"),a()()}n&2&&(o(5),f(" ",_(6,1,"ACTION.DELETE")," "))}function pd(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function md(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.id," ")}}function fd(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function ud(n,l){if(n&1&&(r(0,"mat-cell"),d(1),h(2,"cmssiteinfo"),h(3,"async"),a()),n&2){let e=l.$implicit;o(),f(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function gd(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Sd(n,l){if(n&1&&T(0,"select",50),n&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",qe(3,ad,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function hd(n,l){if(n&1&&(r(0,"mat-cell",48),h(1,"statusCellClass"),T(2,"i",48),h(3,"statusIconClass"),C(4,Sd,1,5,"select",49),a()),n&2){let e=l.$implicit,i=m();c("ngClass",_(1,3,e.recordStatus)),o(2),c("ngClass",_(3,5,e.recordStatus)),o(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function _d(n,l){if(n&1&&(r(0,"mat-header-cell",47),d(1),a()),n&2){let e=m();o(),f(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," ")}}function Td(n,l){if(n&1&&(r(0,"mat-cell"),d(1),a()),n&2){let e=l.$implicit;o(),f(" ",e.title," ")}}function vd(n,l){n&1&&(r(0,"mat-header-cell"),d(1),h(2,"translate"),a()),n&2&&(o(),f(" ",_(2,1,"TITLE.OPTION")," "))}function Cd(n,l){if(n&1&&(r(0,"mat-cell",51)(1,"button",52)(2,"mat-icon"),d(3,"more_vert"),a()(),T(4,"mat-menu",null,2),a()),n&2){let e=D(5);o(),c("matMenuTriggerFor",e)}}function Id(n,l){n&1&&T(0,"mat-header-row")}function bd(n,l){if(n&1){let e=b();r(0,"mat-row",53),I("click",function(){let t=g(e).$implicit,s=m();return S(s.onActionTableRowSelect(t))}),a()}if(n&2){let e=l.$implicit,i=m();Re("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id))}}var qi=class qi extends st{constructor(e,i,t,s,v,p,Q,J,Ae,De,wt,mt){super(e,new ft,wt,p,J);this.contentService=e;this.activatedRoute=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=s;this.router=v;this.tokenHelper=p;this.cdr=Q;this.translate=J;this.cmsStoreService=Ae;this.pageInfo=De;this.publicHelper=wt;this.dialog=mt;this.requestDepartemenId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new K;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","RecordStatus"];this.tabledisplayedColumnsMobileSource=["Id","RecordStatus"];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:ji=>this.onSubmitOptionsSearch(ji)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=P.Descending}ngOnInit(){this.requestDepartemenId=+Number(this.activatedRoute.snapshot.paramMap.get("DepartemenId")),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>Y(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new ft);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(s=>{this.publicHelper.processService.processStart(e,s,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]);let t=new z;this.requestDepartemenId>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.requestDepartemenId,i.filters.push(t)),this.categoryModelSelected&&this.categoryModelSelected.id>0&&(t.propertyName="LinkTicketingDepartemenId",t.value=this.categoryModelSelected.id,i.filters.push(t)),this.contentService.ServiceGetAllEditor(i).subscribe({next:s=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(s.access),s.isSuccess?(this.dataModelResult=s,this.tableSource.data=s.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(s.access)},1e3)):this.cmsToastrService.typeErrorGetAll(s.errorMessage),this.publicHelper.processService.processStop(e)},error:s=>{this.cmsToastrService.typeError(s),this.publicHelper.processService.processStop(e)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=P.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=P.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.categoryModelSelected==null&&this.categoryModelSelected&&this.categoryModelSelected.id===0&&(this.requestDepartemenId==null||this.requestDepartemenId===0)){this.translate.get("MESSAGE.Content_not_selected").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}let e=this.requestDepartemenId;this.categoryModelSelected&&this.categoryModelSelected.id>0&&(e=this.categoryModelSelected.id);var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Qn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{parentId:e}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new K,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.categoryModelSelected=e,this.DataGetAll()}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(zn,{height:"90%",panelClass:i,enterAnimationDuration:G.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:G.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.translate.get("MESSAGE.No_row_selected_for_editing").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{i=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(s=>{if(s){let v=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(v,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?this.cmsToastrService.typeSuccessRemove():this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(v)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(v)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess&&(i.set("All",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),v=new z;v.propertyName="RecordStatus",v.value=je.Available,s.filters.push(v),this.contentService.ServiceGetCount(s).subscribe({next:p=>{p.isSuccess&&(i.set("Active",p.totalRowCount),this.optionsStatist.childMethods.setStatistValue(i)),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/ticketing/departemen/"])}};qi.\u0275fac=function(i){return new(i||qi)(u(Dt),u(Ie),u(O),u(Rt),u(oe),u(le),u(L),u(B),u(ae),u(lt),u(F),u(we))},qi.\u0275cmp=R({type:qi,selectors:[["app-application-app-list"]],standalone:!1,features:[q],decls:51,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click"]],template:function(i,t){if(i&1){let s=b();r(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return g(s),y(t.viewGuideNotice,p)||(t.viewGuideNotice=p),S(p)}),I("optionOnActionButtonMemoRow",function(){return g(s),S(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return g(s),S(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return g(s),S(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return g(s),S(t.onActionButtonPrintRow())}),M(1,4),r(2,"app-ticketing-departemen-tree",5),I("optionChange",function(p){return g(s),S(t.onActionSelectorSelect(p))}),a(),k(),xe(3,6)(4,7),M(5,8),C(6,ld,2,0,"a",9),r(7,"a",10),I("click",function(){return g(s),S(t.viewGuideNotice=!t.viewGuideNotice)}),T(8,"i",11),a(),r(9,"a",10),I("click",function(){return g(s),S(t.onActionButtonReload())}),T(10,"i",12),a(),k(),M(11,13),r(12,"a",14),I("click",function(){return g(s),S(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),T(13,"mat-slide-toggle",15),d(14),h(15,"translate"),a(),r(16,"a",14),I("click",function(){return g(s),S(t.onActionButtonStatist())}),T(17,"mat-slide-toggle",15),d(18),h(19,"translate"),a(),k(),M(20,16),C(21,sd,7,3,"div",17),k(),M(22,18),C(23,cd,7,3,"div",17)(24,dd,7,3,"div",17),k(),M(25,19),r(26,"app-cms-search-list",20),A("optionsChange",function(p){return g(s),y(t.optionsSearch,p)||(t.optionsSearch=p),S(p)}),a(),r(27,"app-cms-statist-list",20),A("optionsChange",function(p){return g(s),y(t.optionsStatist,p)||(t.optionsStatist=p),S(p)}),a(),k(),M(28,21),r(29,"mat-table",22,0),I("matSortChange",function(){g(s);let p=D(30);return S(t.onTableSortData(p))}),M(31,23),C(32,pd,2,1,"mat-header-cell",24)(33,md,2,1,"mat-cell",25),k(),M(34,26),C(35,fd,2,1,"mat-header-cell",24)(36,ud,4,5,"mat-cell",25),k(),M(37,27),C(38,gd,2,1,"mat-header-cell",24)(39,hd,5,7,"mat-cell",28),k(),M(40,29),C(41,_d,2,1,"mat-header-cell",24)(42,Td,2,1,"mat-cell",25),k(),M(43,30),C(44,vd,3,3,"mat-header-cell",31)(45,Cd,6,1,"mat-cell",32),k(),C(46,Id,1,0,"mat-header-row",33)(47,bd,1,2,"mat-row",34),a(),k(),M(48,35),r(49,"mat-paginator",36,1),I("page",function(p){return g(s),S(t.onTablePageingData(p))}),a(),k(),a()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),E("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",t.requestDepartemenId===0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",(t.tableRowSelected==null||t.tableRowSelected.title==null?null:t.tableRowSelected.title.length)>0?t.tableRowSelected==null?null:t.tableRowSelected.title:t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),c("ngIf",t.requestDepartemenId>0),o(7),c("checked",t.optionsSearch.data.show),o(),f("",_(15,24,"ACTION.SEARCH")," "),o(3),c("checked",t.optionsStatist.data.show),o(),f("",_(19,26,"ACTION.STATIST")," "),o(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(2),E("options",t.optionsSearch),o(),E("options",t.optionsStatist),o(2),c("dataSource",t.tableSource),o(17),c("matHeaderRowDef",t.tabledisplayedColumns),o(),c("matRowDefColumns",t.tabledisplayedColumns),o(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",He(28,rd)))},dependencies:[Et,V,We,Be,Fe,W,Ue,Qe,ze,Ke,Je,Ye,Xe,$e,nt,et,Ze,ot,tt,it,rt,at,ct,dt,pt,Vt,Nt,Ve,N,vt,Bt,Ft],encapsulation:2});var Xi=qi;var Wi=class Wi{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};Wi.\u0275fac=function(e){return new(e||Wi)},Wi.\u0275cmp=R({type:Wi,selectors:[["app-ticketing"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&T(0,"router-outlet")},dependencies:[lo],encapsulation:2});var Kn=Wi;var Md=[{path:"",component:Kn,data:{title:"ROUTE.TICKETING"},children:[{path:"config",loadChildren:()=>import("./chunk-AS57K53W.js").then(n=>n.TicketingConfigModule),data:{title:"ROUTE.TICKETING"}},{path:"departemen",component:Vn,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/add/",component:Wt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemen/edit/:Id",component:Wt,data:{title:"ROUTE.TICKETING.DEPARTMENT"}},{path:"departemenlog/DepartemenId/:DepartemenId",component:Ki,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"departemenlog/OperatorId/:OperatorId",component:Ki,data:{title:"ROUTE.TICKETING.DEPARTMENTLOG"}},{path:"faq",component:Hn,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/:DepartemenId",component:Ji,data:{title:"ROUTE.TICKETING.FAQ"}},{path:"faq/list",component:Ji,data:{title:"ROUTE.TICKETING.LIST"}},{path:"template",component:Xi,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"template/:DepartemenId",component:Xi,data:{title:"ROUTE.TICKETING.TEMPLATE"}},{path:"contactus",component:Wn,data:{title:"ROUTE.TICKETING.CONTACTUS"}},{path:"task",component:ei,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/listTicketStatus/:TicketStatus",component:ei,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list",component:Yi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/contactus-list/LinkCmsUserId/:LinkCmsUserId",component:Yi,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/:DepartemenId",component:ei,data:{title:"ROUTE.TICKETING.TASK"}},{path:"task/LinkCmsUserId/:LinkCmsUserId",component:ei,data:{title:"ROUTE.TICKETING.TASK"}},{path:"answer",component:Ui,data:{title:"ROUTE.TICKETING.ANSWER"}},{path:"answer/LinkTaskId/:LinkTaskId",component:Ui,data:{title:"ROUTE.TICKETING.ANSWER"}}]}],ti=class ti{};ti.\u0275fac=function(e){return new(e||ti)},ti.\u0275mod=ln({type:ti}),ti.\u0275inj=rn({imports:[Xn.forChild(Md),Xn]});var Jn=ti;var ii=class ii{};ii.\u0275fac=function(e){return new(e||ii)},ii.\u0275mod=ln({type:ii}),ii.\u0275inj=rn({providers:[co,U,fo,mo,Ut,Ne,hn,uo,Ge,At,yt,Dt,Rt],imports:[io,Jn,oo,ro.withConfig({warnOnNgModelWithFormControl:"never"}),ko,Eo,Mo]});var xo=ii;export{xo as TicketingModule};
