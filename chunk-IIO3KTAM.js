import{a as oo,b as no}from"./chunk-62FRH4IV.js";import{a as to}from"./chunk-WWN7VPDN.js";import{a as ro}from"./chunk-IICEXPXA.js";import{a as Zi}from"./chunk-ZVGTXHWZ.js";import{a as eo}from"./chunk-HAGAHY37.js";import{a as io}from"./chunk-KEZI6U4E.js";import{c as $i}from"./chunk-QHLFUYMR.js";import"./chunk-L332CTFT.js";import"./chunk-L4CLR4ST.js";import"./chunk-IZHSNBKM.js";import"./chunk-FATHGWLK.js";import{a as Xi}from"./chunk-JOBZ66S4.js";import{a as Yi}from"./chunk-HNRXMGIC.js";import{c as qi,d as Qi,e as zi,g as Ki,h as Ji}from"./chunk-C4JYBGTP.js";import{a as Ui}from"./chunk-QP62H6LL.js";import{j as Oi,k as Fi,l as Ni}from"./chunk-4SG5SRWI.js";import"./chunk-UDRFCW2O.js";import{a as Bi}from"./chunk-JUFEZRZP.js";import{a as ji}from"./chunk-EKDLVPVA.js";import{a as et}from"./chunk-FDDQRPK4.js";import{b as Wi}from"./chunk-YUX5DUBN.js";import"./chunk-B5ZXGGJN.js";import{a as Hi}from"./chunk-GWFCTHO4.js";import{a as tt}from"./chunk-MEZSNILR.js";import{a as $e}from"./chunk-E6KBDBNI.js";import{a as Z,d as Ze}from"./chunk-FY7Z7WFG.js";import{b as Vi,e as Gi,f as B}from"./chunk-OWKBGPSV.js";import{$ as ii,$a as J,A as zt,Ab as bi,Bb as Ei,Cb as yi,D as Kt,Db as Ti,E as Jt,Fc as X,G as Xt,Ib as wi,Ic as Y,J as Yt,Ja as ri,Jb as Ai,K as qe,Ka as Je,Kb as Ri,Kc as N,L as Qe,La as Xe,Lb as xi,Ma as Ye,Mb as Di,Mc as ki,N as Zt,Nb as Pi,Nc as Li,O as $t,Q as ei,Qb as F,Rb as U,W as ze,Z as ti,Za as ue,aa as oi,ba as Ke,d as Bt,eb as ai,f as Ht,fb as li,g as Wt,hb as si,i as jt,j as Ut,k as qt,lb as ci,m as Qt,mb as di,n as pe,nb as pi,ob as mi,pb as ui,q as me,qb as fi,r as Be,rb as Mi,sa as ni,sb as Ci,t as He,u as We,ub as hi,v as je,vb as Si,w as Ue,wb as gi,xb as _i,yb as Ii,zb as vi}from"./chunk-SZJKWUJC.js";import{$b as Oe,Ab as yt,Ad as dt,Bb as Tt,Bq as K,Cd as pt,Db as Le,Eb as Ve,F as It,Fa as r,Fb as Ge,Fd as mt,Ha as q,I as vt,Id as Dt,Jb as x,Jc as Fe,Kb as ie,Kc as ce,Lb as Q,Lc as j,Ld as oe,Oa as M,Ob as d,Od as Pt,P as bt,Pb as R,Pc as de,Q as Et,Qb as C,Rc as At,Sa as k,Sd as kt,Ta as De,Td as V,Ub as T,Vb as w,Wa as le,Wb as A,Xb as D,Xc as Rt,Xd as z,Y as xe,Ya as S,Yb as st,Yd as H,ac as se,ae as Lt,be as O,ce as Ne,da as u,db as Pe,dc as g,de as L,dg as Nt,ea as f,ec as _,fc as wt,he as Vt,hf as ut,if as P,kb as c,lb as l,mb as s,nb as I,p as gt,pe as Gt,q as _t,rb as E,sb as y,sd as xt,se as Ot,tb as ke,ub as b,uf as Ft,wc as G,xb as v,zb as m,zd as ct}from"./chunk-OZYBSVFX.js";import{i as ae}from"./chunk-SEDBTTTN.js";var fe=class fe{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};fe.\u0275fac=function(e){return new(e||fe)},fe.\u0275cmp=k({type:fe,selectors:[["app-core-user"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&I(0,"router-outlet")},dependencies:[xt],encapsulation:2});var it=fe;function uo(o,n){if(o&1){let e=b();l(0,"li")(1,"mat-checkbox",1),v("change",function(){let t=u(e).$implicit,a=m();return f(a.onActionSelect(t))}),d(2),s()()}if(o&2){let e=n.$implicit,i=m();r(),c("checked",i.fieldsStatus.get(e.id))("disabled",i.optionDisabled),r(),C(" ",e.title," ")}}var Ce=class Ce{constructor(n,e,i,t,a,h){this.coreEnumService=n;this.categoryService=e;this.cdr=i;this.publicHelper=t;this.translate=a;this.cmsToastrService=h;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new V;this.dataModelSelect=[];this.dataIdsSelect=[];this.formControl=new We;this.fieldsStatus=new Map;this.optionDisabled=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionChange=new q;this.optionSelectAdded=new q;this.optionSelectRemoved=new q;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){this.DataGetAll()}DataGetAll(){let n=new H;n.rowPerPage=50,n.accessLoad=!0;let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(n).subscribe({next:i=>{i.isSuccess?(this.dataModelResult=i,this.dataModelResult.listItems.forEach(t=>this.fieldsStatus.set(t.id,!1)),this.dataIdsSelect.forEach(t=>this.fieldsStatus.set(t,!0)),this.dataModelResult.listItems.forEach(t=>{this.fieldsStatus.get(t.id)&&this.dataModelSelect.push(t)})):this.cmsToastrService.typeErrorMessage(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionSelect(n){this.fieldsStatus.get(n.id)?(this.fieldsStatus.set(n.id,!1),this.optionSelectRemoved.emit(n),this.dataModelSelect.splice(this.dataModelSelect.indexOf(n),1)):(this.fieldsStatus.set(n.id,!0),this.optionSelectAdded.emit(n),this.dataModelSelect.push(n)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(n){typeof n==typeof Array(Number)?n.forEach(e=>{this.dataIdsSelect.push(e)}):typeof n==typeof Array(Ft)&&n.forEach(e=>{this.dataIdsSelect.push(e.id)}),this.dataIdsSelect.forEach(e=>this.fieldsStatus.set(e,!0))}onActionButtonReload(){this.DataGetAll()}};Ce.\u0275fac=function(e){return new(e||Ce)(M(L),M(Ot),M(G),M(B),M(F),M(N))},Ce.\u0275cmp=k({type:Ce,selectors:[["app-core-usergroup-selectionlist"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},standalone:!1,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"change","checked","disabled"]],template:function(e,i){e&1&&(l(0,"ul"),S(1,uo,3,3,"li",0),s()),e&2&&(r(),c("ngForOf",i.dataModelResult.listItems))},dependencies:[ce,ni],encapsulation:2});var ot=Ce;var Mo=["*"];function Co(o,n){if(o&1&&(l(0,"label",12),d(1),s()),o&2){let e=m();c("for",st("app-cms-site-selector-",e.id)),r(),R(e.optionLabel)}}function ho(o,n){if(o&1&&(l(0,"mat-option",13)(1,"span"),d(2),s()()),o&2){let e=n.$implicit,i=m();c("value",e)("disabled",i.optionDisabled),r(2),R(i.displayOption(e))}}function So(o,n){o&1&&I(0,"i",14)}function go(o,n){o&1&&I(0,"i",15)}function _o(o,n){if(o&1){let e=b();l(0,"i",16),v("click",function(){u(e);let t=m();return f(t.onActionSelectClear())}),s()}}function Io(o,n){o&1&&(l(0,"em"),d(1),g(2,"translate"),s()),o&2&&(r(),C("(",_(2,1,"TITLE.Necessary"),")"))}var ee=class ee{constructor(n,e,i,t,a,h){this.coreEnumService=n;this.cmsToastrService=e;this.cdr=i;this.publicHelper=t;this.translate=a;this.categoryService=h;this.id=++ee.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new V;this.dataModelSelect=new P;this.formControl=new We;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new q;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(bt(""),It(1500),vt(),Et(n=>typeof n=="string"||typeof n=="number"?this.DataGetAll(n||""):[]))}displayFn(n){return n?n.titleML:void 0}displayOption(n){return n?n.titleML:void 0}DataGetAll(n){return ae(this,null,function*(){let e=new H;e.rowPerPage=20,e.accessLoad=!0;let i=new z;i.propertyName="title",i.value=n,i.searchType=mt.Contains,i.clauseType=dt.Or,e.filters.push(i),n&&typeof+n=="number"&&+n>0&&(i=new z,i.propertyName="id",i.value=n,i.searchType=mt.Equal,i.clauseType=dt.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(a=>{this.publicHelper.processService.processStart(t,a,this.constructorInfoAreaId)}),yield gt(this.categoryService.ServiceGetAll(e)).then(a=>(this.dataModelResult=a,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),a.listItems))})}onActionSelect(n){this.dataModelSelect=n,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(n){return this.filteredOptions.pipe(_t(e=>(e.find(i=>i.id===n.id)||e.push(n),e)))}onActionSelectForce(n){if(typeof n=="number"&&n>0){if(this.dataModelSelect&&this.dataModelSelect.id===n)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===n)){let e=this.dataModelResult.listItems.find(i=>i.id===n);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(n).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof n==typeof P){this.filteredOptions=this.push(n),this.dataModelSelect=n,this.formControl.setValue(n);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new P,this.loadOptions()}};ee.nextId=0,ee.\u0275fac=function(e){return new(e||ee)(M(L),M(N),M(G),M(B),M(F),M(O))},ee.\u0275cmp=k({type:ee,selectors:[["app-core-cpmainmenu-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:Mo,decls:15,vars:24,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=b();yt(),l(0,"div",1),I(1,"app-progress-spinner",2),S(2,Co,2,3,"label",3),I(3,"input",4),l(4,"mat-autocomplete",5,0),v("optionSelected",function(h){return u(t),f(i.onActionSelect(h.option.value))}),S(6,ho,3,3,"mat-option",6),g(7,"async"),s(),S(8,So,1,0,"i",7)(9,go,1,0,"i",8)(10,_o,1,0,"i",9),l(11,"i",10),g(12,"translate"),v("click",function(){return u(t),f(i.onActionButtonReload())}),s(),S(13,Io,3,3,"em",11),Tt(14),s()}if(e&2){let t=x(5);r(),c("optionsInfoAreaId",i.constructorInfoAreaId),r(),c("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),r(),c("placeholder",D(i.optionPlaceholder))("id",st("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),Pe("disabled",i.optionDisabled?!0:null),r(),c("displayWith",i.displayFn),r(2),c("ngForOf",_(7,20,i.filteredOptions)),r(2),c("ngIf",!i.formControl.valid),r(),c("ngIf",i.optionRequired&&i.formControl.valid),r(),c("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),r(),Q("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),c("title",D(_(12,22,"ACTION.RELOAD"))),r(2),c("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[ce,j,pe,me,Yt,zt,ii,ei,oi,J,Z,At,U],encapsulation:2});var he=ee;var To=["vform"],wo=o=>({direction:o}),Ao=()=>["fa"];function Ro(o,n){if(o&1){let e=b();l(0,"app-cms-enum-record-status-selector",35),A("modelChange",function(t){u(e);let a=m();return w(a.dataModel.recordStatus,t)||(a.dataModel.recordStatus=t),f(t)}),s()}if(o&2){let e=m();T("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function xo(o,n){if(o&1&&(l(0,"mat-error"),d(1),l(2,"strong"),d(3),g(4,"translate"),s()()),o&2){let e=m(2);r(),C(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),r(2),R(_(4,2,"MESSAGE.required"))}}function Do(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",36),d(2),s(),l(3,"input",37,3),A("ngModelChange",function(t){u(e);let a=m();return w(a.dataModel.title,t)||(a.dataModel.title=t),f(t)}),s(),l(5,"em"),d(6),s(),S(7,xo,5,4,"mat-error",38),s()}if(o&2){let e=x(4),i=m();r(2),R(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),r(),c("placeholder",D(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),T("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessEditField)),r(3),C("",e.value.length," / 100"),r(),c("ngIf",e.errors==null?null:e.errors.required)}}function Po(o,n){o&1&&(l(0,"mat-error"),d(1," TitleResourceLanguage is "),l(2,"strong"),d(3),g(4,"translate"),s()()),o&2&&(r(3),R(_(4,1,"MESSAGE.required")))}function ko(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",39),d(2),s(),l(3,"input",40,4),A("ngModelChange",function(t){u(e);let a=m();return w(a.dataModel.title,t)||(a.dataModel.title=t),f(t)}),s(),l(5,"em"),d(6),s(),S(7,Po,5,3,"mat-error",38),s()}if(o&2){let e=x(4),i=m();r(2),R(i.fieldsInfo.titleResourceLanguage==null?null:i.fieldsInfo.titleResourceLanguage.fieldTitle),r(),c("placeholder",D(i.fieldsInfo.titleResourceLanguage==null?null:i.fieldsInfo.titleResourceLanguage.fieldTitle)),T("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.titleResourceLanguage!=null&&i.fieldsInfo.titleResourceLanguage.accessEditField)),r(3),C("",e.value.length," / 100"),r(),c("ngIf",e.errors==null?null:e.errors.required)}}function Lo(o,n){if(o&1&&(l(0,"option",41),d(1),s()),o&2){let e=n.$implicit;c("value",e.value),r(),C(" ",e.description," ")}}function Vo(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",42),d(2),s(),l(3,"input",43,5),A("ngModelChange",function(t){u(e);let a=m();return w(a.dataModel.routeAddressLink,t)||(a.dataModel.routeAddressLink=t),f(t)}),s(),l(5,"em"),d(6),s()()}if(o&2){let e=x(4),i=m();r(2),R(i.fieldsInfo.routeAddressLink==null?null:i.fieldsInfo.routeAddressLink.fieldTitle),r(),c("placeholder",D(i.fieldsInfo.routeAddressLink==null?null:i.fieldsInfo.routeAddressLink.fieldTitle)),T("ngModel",i.dataModel.routeAddressLink),c("disabled",!(i.fieldsInfo.routeAddressLink!=null&&i.fieldsInfo.routeAddressLink.accessEditField)),r(3),C("",e.value.length," / 100")}}function Go(o,n){if(o&1){let e=b();l(0,"div",44)(1,"div",45)(2,"h5",46),d(3),s()(),l(4,"div",47)(5,"div",48)(6,"input",49),A("ngModelChange",function(t){u(e);let a=m();return w(a.dataModel.routeAddressBlankPage,t)||(a.dataModel.routeAddressBlankPage=t),f(t)}),s(),I(7,"label",50),s()()()}if(o&2){let e=m();r(3),C(" ",e.fieldsInfo.routeAddressBlankPage==null?null:e.fieldsInfo.routeAddressBlankPage.fieldTitle," "),r(3),T("ngModel",e.dataModel.routeAddressBlankPage)}}function Oo(o,n){if(o&1){let e=b();l(0,"div",51)(1,"label",52),d(2),s(),l(3,"input",53),A("ngModelChange",function(t){u(e);let a=m();return w(a.dataModel.color,t)||(a.dataModel.color=t),f(t)}),s(),I(4,"ngx-mat-color-toggle",54)(5,"ngx-mat-color-picker",55,6),s()}if(o&2){let e=x(6),i=m();r(2),R(i.fieldsInfo.routeAddressLink==null?null:i.fieldsInfo.routeAddressLink.fieldTitle),r(),ie("background",i.dataModel.color),c("placeholder",D(i.fieldsInfo.color==null?null:i.fieldsInfo.color.fieldTitle))("ngxMatColorPicker",e),T("ngModel",i.dataModel.color),c("disabled",!(i.fieldsInfo.color!=null&&i.fieldsInfo.color.accessEditField)),r(),c("for",e),r(),c("color","primary")}}function Fo(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",56),d(2),s(),l(3,"input",57,7),v("iconPickerSelect",function(t){u(e);let a=m();return f(a.onIconPickerSelect(t))}),A("ngModelChange",function(t){u(e);let a=m();return w(a.dataModel.icon,t)||(a.dataModel.icon=t),f(t)}),s()()}if(o&2){let e=m();r(2),R(e.fieldsInfo.icon==null?null:e.fieldsInfo.icon.fieldTitle),r(),c("placeholder",D(e.fieldsInfo.icon==null?null:e.fieldsInfo.icon.fieldTitle))("iconPicker",e.dataModel.icon)("ipIconPack",Oe(8,Ao))("ipPosition","top"),T("ngModel",e.dataModel.icon),c("disabled",!(e.fieldsInfo.icon!=null&&e.fieldsInfo.icon.accessEditField))}}function No(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",58),d(2),s(),l(3,"input",59,8),A("ngModelChange",function(t){u(e);let a=m();return w(a.dataModel.showInMenuOrder,t)||(a.dataModel.showInMenuOrder=t),f(t)}),s()()}if(o&2){let e=m();r(2),R(e.fieldsInfo.showInMenuOrder==null?null:e.fieldsInfo.showInMenuOrder.fieldTitle),r(),c("placeholder",D(e.fieldsInfo.showInMenuOrder==null?null:e.fieldsInfo.showInMenuOrder.fieldTitle)),T("ngModel",e.dataModel.showInMenuOrder),c("disabled",!(e.fieldsInfo.showInMenuOrder!=null&&e.fieldsInfo.showInMenuOrder.accessEditField))}}function Bo(o,n){o&1&&(l(0,"mat-error"),d(1," Description is "),l(2,"strong"),d(3),g(4,"translate"),s()()),o&2&&(r(3),R(_(4,1,"MESSAGE.required")))}function Ho(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",60),d(2),s(),l(3,"textarea",61,9),A("ngModelChange",function(t){u(e);let a=m();return w(a.dataModel.description,t)||(a.dataModel.description=t),f(t)}),d(5,"            "),s(),l(6,"em"),d(7),s(),S(8,Bo,5,3,"mat-error",38),s()}if(o&2){let e=x(4),i=m();r(2),R(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle),r(),c("placeholder",D(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle)),T("ngModel",i.dataModel.description),r(4),C("",e.value.length," / 500"),r(),c("ngIf",e.errors==null?null:e.errors.required)}}function Wo(o,n){if(o&1){let e=b();l(0,"div",62)(1,"button",63),v("click",function(){u(e);let t=m();return f(t.onFormCancel())}),d(2),g(3,"translate"),s(),l(4,"button",64),d(5),g(6,"translate"),s()()}if(o&2){m();let e=x(10);r(2),C(" ",_(3,3,"ACTION.BACK")," "),r(2),c("disabled",!e.form.valid),r(),C(" ",_(6,5,"ACTION.NEXT")," ")}}function jo(o,n){if(o&1){let e=b();l(0,"div",44)(1,"div",45)(2,"h5",65),d(3),s()(),l(4,"div",47)(5,"div",48)(6,"input",66),A("ngModelChange",function(t){u(e);let a=m();return w(a.dataModel.showInMenu,t)||(a.dataModel.showInMenu=t),f(t)}),s(),I(7,"label",67),s()()()}if(o&2){let e=m();r(3),C(" ",e.fieldsInfo.showInMenu==null?null:e.fieldsInfo.showInMenu.fieldTitle," "),r(3),T("ngModel",e.dataModel.showInMenu)}}function Uo(o,n){if(o&1){let e=b();l(0,"div",44)(1,"div",45)(2,"h5",68),d(3),s()(),l(4,"div",47)(5,"div",48)(6,"input",69),A("ngModelChange",function(t){u(e);let a=m();return w(a.dataModel.showInAccessAdminAllowToProfessionalData,t)||(a.dataModel.showInAccessAdminAllowToProfessionalData=t),f(t)}),s(),I(7,"label",70),s()()()}if(o&2){let e=m();r(3),C(" ",e.fieldsInfo.showInAccessAdminAllowToProfessionalData==null?null:e.fieldsInfo.showInAccessAdminAllowToProfessionalData.fieldTitle," "),r(3),T("ngModel",e.dataModel.showInAccessAdminAllowToProfessionalData)}}function qo(o,n){if(o&1&&(l(0,"div",62)(1,"button",71),d(2),g(3,"translate"),s(),l(4,"button",72),d(5),g(6,"translate"),s()()),o&2){m();let e=x(10);r(2),C(" ",_(3,3,"ACTION.BEFOR")," "),r(2),c("disabled",!e.form.valid),r(),C(" ",_(6,5,"ACTION.SAVE")," ")}}function Qo(o,n){o&1&&(l(0,"mat-icon"),d(1,"call_end"),s())}function zo(o,n){o&1&&(l(0,"mat-icon"),d(1,"call_end"),s())}function Ko(o,n){o&1&&(l(0,"mat-icon"),d(1,"forum"),s())}function Jo(o,n){o&1&&(l(0,"mat-icon"),d(1,"forum"),s())}var Se=class Se extends Ui{constructor(e,i,t,a,h,p,W,Ae,lt,Re,po){super(a,new P,W,Re);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreCpMainMenuService=a;this.coreCpMainMenuCmsUserGroupService=h;this.cmsToastrService=p;this.publicHelper=W;this.cmsStoreService=Ae;this.cdr=lt;this.translate=Re;this.tokenHelper=po;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.appLanguage="fa";this.dataModelResult=new kt;this.dataModel=new P;this.formInfo=new Ze;this.dataModelEnumMenuPlaceTypeResult=new V;this.fileManagerOpenForm=!1;this.dataCoreCpMainMenuIds=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.getEnumMenuPlaceType()}getEnumMenuPlaceType(){this.coreEnumService.ServiceMenuPlaceTypeEnum().subscribe({next:e=>{this.dataModelEnumMenuPlaceTypeResult=e}})}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreCpMainMenuService.setAccessLoad(),this.coreCpMainMenuService.setAccessDataType(Pt.Editor),this.coreCpMainMenuService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.dataAccessModel=i.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.DataGetAllMenuCoreUserGroup(),this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataGetAllMenuCoreUserGroup(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Getting_access_category_from_the_server").subscribe(a=>{this.formInfo.submitResultMessage=a}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(a=>{this.publicHelper.processService.processStart(e,a,this.constructorInfoAreaId)});let i=new H,t=new z;t.propertyName="CmsCpMainMenu_Id",t.value=this.requestId,i.filters.push(t),this.coreCpMainMenuCmsUserGroupService.ServiceGetAll(i).subscribe({next:a=>{this.dataCoreCpMainMenuCmsUserGroupModel=a.listItems;let h=[];this.dataCoreCpMainMenuCmsUserGroupModel.forEach(p=>{h.push(p.cmsUserGroup_Id)}),this.dataCoreCpMainMenuIds=h,a.isSuccess?(this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=1):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(p=>{this.formInfo.submitResultMessage=p}),this.formInfo.submitResultMessage=a.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(a.errorMessage)),this.publicHelper.processService.processStop(e)},error:a=>{this.cmsToastrService.typeError(a),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)});this.dataModel.color=this.dataModel.color?.toString(),this.coreCpMainMenuService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex&&(this.formGroup.valid||(this.cmsToastrService.typeErrorFormInvalid(),setTimeout(()=>{i.selectedIndex=e.previouslySelectedIndex},10)))}onActionSelectorModuleSelect(e){this.dataModel.linkModuleId=null,e&&e.id>0&&(this.dataModel.linkModuleId=e.id)}onActionSelectorSelect(e){this.dataModel.linkParentId=null,e&&e.id>0&&(this.dataModel.linkParentId=e.id)}onActionSelectorUserCategorySelect(e){this.dataCoreCpMainMenuModel=e}onActionSelectorUserCategorySelectAdded(e){let i=new ut;i.cmsUserGroup_Id=e.id,i.cmsCpMainMenu_Id=this.dataModel.id,this.coreCpMainMenuCmsUserGroupService.ServiceAdd(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(a=>{this.formInfo.submitResultMessage=a}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(a=>{this.formInfo.submitResultMessage=a}),this.formInfo.submitResultMessage=t.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(t)}})}onActionSelectorUserCategorySelectRemoved(e){let i=new ut;i.cmsUserGroup_Id=e.id,i.cmsCpMainMenu_Id=this.dataModel.id,this.coreCpMainMenuCmsUserGroupService.ServiceDeleteEntity(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.Deletion_from_this_group_Was_Successful").subscribe(a=>{this.formInfo.submitResultMessage=a}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(a=>{this.formInfo.submitResultMessage=a}),this.formInfo.submitResultMessage=t.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(t)}})}onIconPickerSelect(e){this.dataModel.icon=e}};Se.\u0275fac=function(i){return new(i||Se)(M(Xe),M(Je),M(L),M(O),M(Ne),M(N),M(B),M(X),M(G),M(F),M(Y))},Se.\u0275cmp=k({type:Se,selectors:[["app-core-user-edit"]],viewQuery:function(i,t){if(i&1&&Le(To,5),i&2){let a;Ve(a=Ge())&&(t.formGroup=a.first)}},standalone:!1,features:[le],decls:51,vars:52,consts:[["vform","ngForm"],["stepper",""],["MenuPlaceType","ngModel"],["Title",""],["TitleResourceLanguage",""],["RouteAddressLink",""],["colorPicker",""],["icon",""],["ShowInMenuOrder",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit","ngStyle"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.titleML",1,"color-highlight"],["matInput","","type","text","cmsKeyboardForce","en","name","dataModel.titleML","id","dataModel.titleML",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],["id","dataModel.menuPlaceType","name","dataModel.menuPlaceType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","d-flex mb-3",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"optionChange","optionSelectAdded","optionSelectRemoved","optionSelectForce","optionDisabled"],["matStepperIcon","main"],["matStepperIcon","seo"],["matStepperIcon","file"],["matStepperIcon","loaction"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[4,"ngIf"],["for","dataModel.titleResourceLanguage",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleResourceLanguage","minlength","3","maxlength","100","id","dataModel.titleResourceLanguage",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[3,"value"],["for","dataModel.routeAddressLink",1,"color-highlight"],["matInput","","type","text","name","dataModel.routeAddressLink","minlength","3","maxlength","100","id","dataModel.routeAddressLink",1,"form-control","validate-name","input-ltr",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.routeAddressBlankPage",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.routeAddressBlankPage","name","dataModel.routeAddressBlankPage",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.routeAddressBlankPage",1,"custom-control-label"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.color",1,"color-highlight"],["matInput","","name","colorPicker.color","id","dataModel.color",1,"form-control","validate-name",3,"ngModelChange","ngxMatColorPicker","ngModel","placeholder","disabled"],["matSuffix","",3,"for"],["touchUi","",3,"color"],["for","dataModel.icon",1,"color-highlight"],["matInput","","type","text","name","dataModel.icon","id","dataModel.icon",1,"form-control","validate-name",3,"iconPickerSelect","ngModelChange","iconPicker","ipIconPack","ipPosition","ngModel","placeholder","disabled"],["for","dataModel.showInMenuOrder",1,"color-highlight"],["matInput","","type","text","name","dataModel.showInMenuOrder","id","dataModel.showInMenuOrder",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["data-trigger-switch","dataModel.showInMenu",1,"font-600","font-14"],["type","checkbox","id","dataModel.showInMenu","name","dataModel.showInMenu",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.showInMenu",1,"custom-control-label"],["data-trigger-switch","dataModel.showInAccessAdminAllowToProfessionalData",1,"font-600","font-14"],["type","checkbox","id","dataModel.showInAccessAdminAllowToProfessionalData","name","dataModel.showInAccessAdminAllowToProfessionalData",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.showInAccessAdminAllowToProfessionalData",1,"custom-control-label"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let a=b();l(0,"div",10),I(1,"app-progress-spinner",11),l(2,"div",12)(3,"p",13),d(4),s(),l(5,"p"),d(6),g(7,"translate"),s(),I(8,"app-cms-form-result-message",14),l(9,"form",15,0),v("ngSubmit",function(){return u(a),f(t.onFormSubmit())}),l(11,"mat-vertical-stepper",16,1),v("selectionChange",function(p){u(a);let W=x(12);return f(t.onStepClick(p,W))}),l(13,"mat-step",17),g(14,"translate"),S(15,Ro,1,5,"app-cms-enum-record-status-selector",18),l(16,"app-core-cpmainmenu-selector",19),g(17,"translate"),v("optionChange",function(p){return u(a),f(t.onActionSelectorSelect(p))}),s(),S(18,Do,8,7,"div",20),l(19,"div",21)(20,"label",22),d(21),g(22,"translate"),s(),l(23,"input",23),A("ngModelChange",function(p){return u(a),w(t.dataModel.titleML,p)||(t.dataModel.titleML=p),f(p)}),s()(),S(24,ko,8,7,"div",20),l(25,"div",21)(26,"select",24,2),A("ngModelChange",function(p){return u(a),w(t.dataModel.menuPlaceType,p)||(t.dataModel.menuPlaceType=p),f(p)}),S(28,Lo,2,2,"option",25),s()(),S(29,Vo,7,6,"div",20)(30,Go,8,2,"div",26)(31,Oo,7,10,"div",27)(32,Fo,5,9,"div",20)(33,No,5,5,"div",20)(34,Ho,9,6,"div",20)(35,Wo,7,7,"div",28),s(),l(36,"mat-step",29),g(37,"translate"),l(38,"p"),d(39),g(40,"translate"),s(),S(41,jo,8,2,"div",26)(42,Uo,8,2,"div",26),l(43,"app-core-module-selector",19),g(44,"translate"),v("optionChange",function(p){return u(a),f(t.onActionSelectorModuleSelect(p))}),s(),l(45,"app-core-usergroup-selectionlist",30),v("optionChange",function(p){return u(a),f(t.onActionSelectorUserCategorySelect(p))})("optionSelectAdded",function(p){return u(a),f(t.onActionSelectorUserCategorySelectAdded(p))})("optionSelectRemoved",function(p){return u(a),f(t.onActionSelectorUserCategorySelectRemoved(p))}),s(),S(46,qo,7,7,"div",28),s(),S(47,Qo,2,0,"ng-template",31)(48,zo,2,0,"ng-template",32)(49,Ko,2,0,"ng-template",33)(50,Jo,2,0,"ng-template",34),s()()()()}i&2&&(r(),c("optionsInfoAreaId",t.constructorInfoAreaId),r(3),C(" ",t.formInfo.formTitle," "),r(2),C(" ",_(7,36,"TITLE.Be_Careful_When_Entering_Information")," "),r(2),c("formInfo",t.formInfo),r(),c("ngStyle",se(50,wo,t.tokenInfo.access.direction)),r(4),c("label",D(_(14,38,"TITLE.Menu_Profile"))),r(2),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),r(),c("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",_(17,40,"TITLE.Parent_Menu")),r(2),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),r(3),R(_(22,42,"TITLE.TitleML")),r(2),T("ngModel",t.dataModel.titleML),c("disabled",!0),r(),c("ngIf",t.fieldsInfo.titleResourceLanguage==null?null:t.fieldsInfo.titleResourceLanguage.accessWatchField),r(2),T("ngModel",t.dataModel.menuPlaceType),r(2),c("ngForOf",t.dataModelEnumMenuPlaceTypeResult.listItems),r(),c("ngIf",t.fieldsInfo.routeAddressLink==null?null:t.fieldsInfo.routeAddressLink.accessWatchField),r(),c("ngIf",t.fieldsInfo.routeAddressBlankPage==null?null:t.fieldsInfo.routeAddressBlankPage.accessWatchField),r(),c("ngIf",t.fieldsInfo.color==null?null:t.fieldsInfo.color.accessWatchField),r(),c("ngIf",t.fieldsInfo.icon==null?null:t.fieldsInfo.icon.accessWatchField),r(),c("ngIf",t.fieldsInfo.showInMenuOrder==null?null:t.fieldsInfo.showInMenuOrder.accessWatchField),r(),c("ngIf",t.fieldsInfo.description==null?null:t.fieldsInfo.description.accessWatchField),r(),c("ngIf",t.formInfo.submitButtonEnabled),r(),c("label",D(_(37,44,"TITLE.ACEESS"))),r(3),R(_(40,46,"TITLE.Specify_access_to_this_content")),r(2),c("ngIf",t.fieldsInfo.showInMenu==null?null:t.fieldsInfo.showInMenu.accessWatchField),r(),c("ngIf",t.fieldsInfo.showInAccessAdminAllowToProfessionalData==null?null:t.fieldsInfo.showInAccessAdminAllowToProfessionalData.accessWatchField),r(),c("optionDisabled",!1)("optionSelectForce",t.dataModel.linkModuleId)("optionPlaceholder",_(44,48,"TITLE.MODULE")),r(2),c("optionSelectForce",t.dataCoreCpMainMenuIds)("optionDisabled",!1),r(),c("ngIf",t.formInfo.submitButtonEnabled))},dependencies:[ce,j,de,Ue,Jt,Xt,pe,Qt,Kt,me,Be,qe,Qe,je,He,ze,ti,ue,J,ui,fi,Mi,Ci,mi,et,Z,$e,ji,Hi,io,ot,Ni,Fi,Oi,oo,he,U],encapsulation:2});var te=Se;var Xo=["vform"],Yo=o=>({direction:o});function Zo(o,n){if(o&1){let e=b();l(0,"app-cms-enum-record-status-selector",18),A("modelChange",function(t){u(e);let a=m();return w(a.dataModel.recordStatus,t)||(a.dataModel.recordStatus=t),f(t)}),s()}if(o&2){let e=m();T("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function $o(o,n){if(o&1&&(l(0,"mat-error"),d(1),l(2,"strong"),d(3),g(4,"translate"),s()()),o&2){let e=m();r(),C(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),r(2),R(_(4,2,"MESSAGE.required"))}}function en(o,n){o&1&&(l(0,"mat-error"),d(1," Description is "),l(2,"strong"),d(3),g(4,"translate"),s()()),o&2&&(r(3),R(_(4,1,"MESSAGE.required")))}function tn(o,n){if(o&1){let e=b();l(0,"div",19)(1,"button",20),v("click",function(){u(e);let t=m();return f(t.onFormCancel())}),I(2,"i",21),d(3),g(4,"translate"),s(),l(5,"button",22),I(6,"i",23),d(7),g(8,"translate"),s()()}if(o&2){m();let e=x(10);r(3),C(" ",_(4,3,"ACTION.CANCEL")," "),r(2),c("disabled",!e.form.valid),r(2),C(" ",_(8,5,"ACTION.SAVE")," ")}}var ge=class ge extends Bi{constructor(e,i,t,a,h,p,W,Ae,lt,Re){super(a,new P,h,lt);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreCpMainMenuService=a;this.publicHelper=h;this.cmsToastrService=p;this.cmsStoreService=W;this.cdr=Ae;this.translate=lt;this.tokenHelper=Re;this.requestParentId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResult=new V;this.dataModel=new P;this.formInfo=new Ze;this.dataModelEnumMenuPlaceTypeResult=new V;this.fileManagerOpenForm=!1;this.tokenInfo=new Nt;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=+e.parentId||0),this.requestParentId>0&&(this.dataModel.linkParentId=this.requestParentId),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(e=>{this.formInfo.formTitle=e}),this.getEnumMenuPlaceType(),this.DataGetAccess()}getEnumMenuPlaceType(){this.coreEnumService.ServiceMenuPlaceTypeEnum().subscribe({next:e=>{this.dataModelEnumMenuPlaceTypeResult=e}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreCpMainMenuService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1,this.formInfo.submitResultMessageType=1}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0,model:i.item})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=3,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionSelectorSelect(e){this.dataModel.linkParentId=null,e&&e.id>0&&(this.dataModel.linkParentId=e.id)}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};ge.\u0275fac=function(i){return new(i||ge)(M(Xe),M(Je),M(L),M(O),M(B),M(N),M(X),M(G),M(F),M(Y))},ge.\u0275cmp=k({type:ge,selectors:[["app-core-user-add"]],viewQuery:function(i,t){if(i&1&&Le(Xo,5),i&2){let a;Ve(a=Ge())&&(t.formGroup=a.first)}},standalone:!1,features:[le],decls:32,vars:28,consts:[["vform","ngForm"],["Title",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit","ngStyle"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let a=b();l(0,"div",3),I(1,"app-progress-spinner",4),l(2,"div",5)(3,"p",6),d(4),s(),l(5,"p"),d(6),g(7,"translate"),s(),I(8,"app-cms-form-result-message",7),l(9,"form",8,0),v("ngSubmit",function(){return u(a),f(t.onFormSubmit())}),S(11,Zo,1,5,"app-cms-enum-record-status-selector",9),l(12,"app-core-cpmainmenu-selector",10),g(13,"translate"),v("optionChange",function(p){return u(a),f(t.onActionSelectorSelect(p))}),s(),l(14,"div",11)(15,"label",12),d(16),s(),l(17,"input",13,1),A("ngModelChange",function(p){return u(a),w(t.dataModel.title,p)||(t.dataModel.title=p),f(p)}),s(),l(19,"em"),d(20),s(),S(21,$o,5,4,"mat-error",14),s(),l(22,"div",11)(23,"label",15),d(24),s(),l(25,"textarea",16,2),A("ngModelChange",function(p){return u(a),w(t.dataModel.description,p)||(t.dataModel.description=p),f(p)}),d(27,"        "),s(),l(28,"em"),d(29),s(),S(30,en,5,3,"mat-error",14),s(),S(31,tn,9,7,"div",17),s()()()}if(i&2){let a=x(18),h=x(26);r(),c("optionsInfoAreaId",t.constructorInfoAreaId),r(3),C(" ",t.formInfo.formTitle," "),r(2),C(" ",_(7,22,"TITLE.Be_Careful_When_Entering_Information")," "),r(2),c("formInfo",t.formInfo),r(),c("ngStyle",se(26,Yo,t.tokenInfo.access.direction)),r(2),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),r(),c("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",_(13,24,"TITLE.Parent_Menu")),r(4),R(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),c("placeholder",D(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),T("ngModel",t.dataModel.title),r(3),C("",a.value.length," / 100"),r(),c("ngIf",a.errors==null?null:a.errors.required),r(3),R(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),r(),c("placeholder",D(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),T("ngModel",t.dataModel.description),r(4),C("",h.value.length," / 500"),r(),c("ngIf",h.errors==null?null:h.errors.required),r(),c("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[j,de,Ue,pe,me,Be,qe,Qe,je,He,ze,J,et,Z,$e,he,U],encapsulation:2});var _e=ge;function nn(o,n){if(o&1){let e=b();l(0,"button",13),v("click",function(){u(e);let t=m();return f(t.onActionAdd())}),d(1),g(2,"translate"),s()}o&2&&(r(),C(" ",_(2,1,"ACTION.ADD")," "))}function rn(o,n){if(o&1){let e=b();l(0,"button",14),v("click",function(){u(e);let t=m();return f(t.onActionEdit())}),d(1),g(2,"translate"),s()}o&2&&(r(),C(" ",_(2,1,"ACTION.EDIT")," "))}function an(o,n){if(o&1){let e=b();l(0,"button",15),v("click",function(){u(e);let t=m();return f(t.onActionButtonReload())}),l(1,"mat-icon",16),g(2,"translate"),d(3,"refresh"),s()()}o&2&&(r(),c("title",D(_(2,2,"ACTION.RELOAD"))))}function ln(o,n){if(o&1){let e=b();l(0,"mat-tree-node",17),I(1,"button",18),l(2,"span",19),v("click",function(){let t=u(e).$implicit,a=m();return f(a.onActionSelect(t))}),I(3,"i",20),d(4),s()()}if(o&2){let e=n.$implicit,i=m();Q("ntk-tree-selected",i.dataModelSelect.id>0&&i.dataModelSelect.id===e.id),r(3),ie("color",e.color),c("ngClass",e.icon),r(),C(" \xA0\xA0\xA0\xA0 ",e.titleML)}}function sn(o,n){if(o&1){let e=b();l(0,"mat-tree-node",21)(1,"button",22)(2,"mat-icon",23),d(3),s()(),l(4,"span",19),v("click",function(){let t=u(e).$implicit,a=m();return f(a.onActionSelect(t))}),I(5,"i",20),d(6),s()()}if(o&2){let e=n.$implicit,i=m(),t=x(11);Q("ntk-tree-selected",i.dataModelSelect.id>0&&i.dataModelSelect.id===e.id),c("cdkTreeNodeTypeaheadLabel",e.titleML)("isExpanded",e.isExpanded??!1),r(),Pe("type","button")("aria-label","Toggle "+e.titleML),r(2),C(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),r(2),ie("color",e.color),c("ngClass",e.icon),r(),C(" \xA0\xA0\xA0\xA0 ",e.titleML)}}var Ie=class Ie{constructor(n,e,i,t,a,h,p,W,Ae){this.cmsToastrService=n;this.coreEnumService=e;this.categoryService=i;this.dialog=t;this.tokenHelper=a;this.cmsStoreService=h;this.translate=p;this.cdr=W;this.publicHelper=Ae;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new P;this.dataModelResult=new V;this.filterModel=new H;this.dataSource=new Pi;this.optionChange=new q;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(n,e)=>!!e.children&&e.children.length>0;this.childrenAccessor=n=>n.children??[];this.publicHelper.processService.cdr=this.cdr,this.filterModel.sortColumn="ShowInMenuOrder",this.filterModel.sortType=oe.Ascending}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(n=>n.tokenInfoStore).subscribe(n=>ae(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(n=>n.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let n=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(n,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAllTree(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(n)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(n,!1)}})}onActionSelect(n){this.dataModelSelect=n,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new P,this.DataGetAll()}onActionSelectForce(n){}onActionAdd(){let n=0;this.dataModelSelect&&this.dataModelSelect.id>0&&(n=this.dataModelSelect.id);let e=new ri;e.disableClose=!0,e.autoFocus=!0,e.data={parentId:n},this.dialog.open(_e,e).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&(this.dataModelSelect=t.model,this.onActionEdit())})}onActionEdit(){let n=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(n=this.dataModelSelect.id),n===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(te,{height:"90%",panelClass:e,enterAnimationDuration:K.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:K.cmsViewConfig.exitAnimationDuration,data:{id:n}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let n=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(n=this.dataModelSelect.id),n===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(e=>{this.cmsToastrService.typeErrorSelected(e)});return}}};Ie.\u0275fac=function(e){return new(e||Ie)(M(N),M(L),M(O),M(Ye),M(Y),M(X),M(F),M(G),M(B))},Ie.\u0275cmp=k({type:Ie,selectors:[["app-core-cpmainmenu-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:15,vars:13,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["aria-hidden","true",3,"ngClass"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,i){e&1&&(l(0,"app-cms-html-tree",1),E(1,2),d(2),g(3,"translate"),y(),E(4,3),S(5,nn,3,3,"button",4)(6,rn,3,3,"button",5)(7,an,4,4,"button",6),y(),E(8,7),I(9,"app-progress-spinner",8),l(10,"mat-tree",9,0),S(12,ln,5,6,"mat-tree-node",10)(13,sn,7,11,"mat-tree-node",11),s(),y(),ke(14,12),s()),e&2&&(c("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),r(2),C(" ",_(3,11,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),r(3),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessAddRow),r(),c("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)&&(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),r(),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessWatchRow),r(2),c("optionsInfoAreaId",i.constructorInfoAreaId),r(),c("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),r(3),c("matTreeNodeDefWhen",i.hasChild))},dependencies:[Fe,j,Ke,ue,Ai,Ri,Di,xi,wi,Z,eo,U],encapsulation:2});var nt=Ie;var dn=()=>[5,10,20,100],pn=o=>({display:o});function mn(o,n){if(o&1){let e=b();l(0,"div",41)(1,"a",42),v("click",function(){u(e);let t=m();return f(t.onActionButtonNewRow())}),I(2,"i",43)(3,"br"),s(),l(4,"p",44),d(5),g(6,"translate"),s()()}o&2&&(r(5),C(" ",_(6,1,"ACTION.ADD")," "))}function un(o,n){if(o&1){let e=b();l(0,"div",41)(1,"a",45),v("click",function(){u(e);let t=m();return f(t.onActionButtonEditRow(t.tableRowSelected))}),I(2,"i",46)(3,"br"),s(),l(4,"p",44),d(5),g(6,"translate"),s()()}o&2&&(r(5),C(" ",_(6,1,"ACTION.EDIT")," "))}function fn(o,n){if(o&1){let e=b();l(0,"div",41)(1,"a",47),v("click",function(){u(e);let t=m();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),I(2,"i",48)(3,"br"),s(),l(4,"p",44),d(5),g(6,"translate"),s()()}o&2&&(r(5),C(" ",_(6,1,"ACTION.DELETE")," "))}function Mn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),C(" ",e.fieldsInfo.icon==null?null:e.fieldsInfo.icon.fieldTitle," ")}}function Cn(o,n){if(o&1&&(l(0,"mat-cell"),I(1,"i",50),s()),o&2){let e=n.$implicit;r(),ie("color",e.color),c("ngClass",e.icon)}}function hn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),C(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Sn(o,n){if(o&1&&(l(0,"mat-cell"),d(1),s()),o&2){let e=n.$implicit;r(),C(" ",e.id," ")}}function gn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),C(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function _n(o,n){if(o&1&&I(0,"select",53),o&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",se(3,pn,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function In(o,n){if(o&1&&(l(0,"mat-cell"),I(1,"i",51),g(2,"statusIconClass"),S(3,_n,1,5,"select",52),s()),o&2){let e=n.$implicit,i=m();r(),c("ngClass",_(2,2,e.recordStatus)),r(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function vn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),C(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)}}function bn(o,n){if(o&1&&(l(0,"mat-cell"),d(1),s()),o&2){let e=n.$implicit;r(),C(" ",e.title," ")}}function En(o,n){o&1&&(l(0,"mat-header-cell",49),d(1),g(2,"translate"),s()),o&2&&(r(),C(" ",_(2,1,"TITLE.TitleML")))}function yn(o,n){if(o&1&&(l(0,"mat-cell"),d(1),s()),o&2){let e=n.$implicit;r(),C(" ",e.titleML," ")}}function Tn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),C(" ",e.fieldsInfo.showInMenu==null?null:e.fieldsInfo.showInMenu.fieldTitle)}}function wn(o,n){if(o&1&&(l(0,"mat-cell"),I(1,"i",51),g(2,"boolclass"),s()),o&2){let e=n.$implicit;r(),c("ngClass",_(2,1,e.showInMenu))}}function An(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),C(" ",e.fieldsInfo.showInAccessAdminAllowToProfessionalData==null?null:e.fieldsInfo.showInAccessAdminAllowToProfessionalData.fieldTitle)}}function Rn(o,n){if(o&1&&(l(0,"mat-cell"),I(1,"i",51),g(2,"boolclass"),s()),o&2){let e=n.$implicit;r(),c("ngClass",_(2,1,e.showInAccessAdminAllowToProfessionalData))}}function xn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),C(" ",e.fieldsInfo.menuPlaceType==null?null:e.fieldsInfo.menuPlaceType.fieldTitle," ")}}function Dn(o,n){if(o&1&&(l(0,"mat-cell"),d(1),g(2,"enums"),s()),o&2){let e=n.$implicit,i=m();r(),C(" ",wt(2,1,e.menuPlaceType,i.dataModelEnumMenuPlaceTypeResult.listItems)," ")}}function Pn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),C(" ",e.fieldsInfo.showInMenuOrder==null?null:e.fieldsInfo.showInMenuOrder.fieldTitle," ")}}function kn(o,n){if(o&1&&(l(0,"mat-cell"),d(1),s()),o&2){let e=n.$implicit;r(),C(" ",e.showInMenuOrder," ")}}function Ln(o,n){o&1&&(l(0,"mat-header-cell"),d(1),g(2,"translate"),s()),o&2&&(r(),C(" ",_(2,1,"TITLE.OPTION")," "))}function Vn(o,n){if(o&1&&(l(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),d(3,"more_vert"),s()(),I(4,"mat-menu",null,2),s()),o&2){let e=x(5);r(),c("matMenuTriggerFor",e)}}function Gn(o,n){o&1&&(l(0,"mat-header-cell",49),d(1,". "),s())}function On(o,n){o&1&&(l(0,"mat-cell")(1,"mat-icon",56),d(2,"reorder"),s()())}function Fn(o,n){o&1&&I(0,"mat-header-row")}function Nn(o,n){o&1&&I(0,"div",59)}function Bn(o,n){if(o&1){let e=b();l(0,"mat-row",57),v("click",function(t){let a=u(e).$implicit,h=m();return f(h.onActionTableRowSelect(a,t))})("rtclick",function(t){let a=u(e).$implicit,h=m();return f(h.onActionTableRowSelect(a,t))}),S(1,Nn,1,0,"div",58),s()}if(o&2){let e=n.$implicit,i=m();Q("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)),c("cdkDragData",e)}}var ve=class ve extends qi{constructor(e,i,t,a,h,p,W,Ae,lt,Re,po,Wn){super(e,new P,Re,a,Ae);this.contentService=e;this.cmsConfirmationDialogService=i;this.cmsToastrService=t;this.tokenHelper=a;this.coreEnumService=h;this.cdr=p;this.cmsStoreService=W;this.translate=Ae;this.pageInfo=lt;this.publicHelper=Re;this.themeService=po;this.dialog=Wn;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new H;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Icon","id","recordStatus","TitleML","ShowInMenu","ShowInAccessAdminAllowToProfessionalData","MenuPlaceType","ShowInMenuOrder","position"];this.tabledisplayedColumnsMobileSource=["Icon","id","recordStatus","TitleML","ShowInMenu","ShowInAccessAdminAllowToProfessionalData","MenuPlaceType","ShowInMenuOrder","position"];this.dataModelEnumMenuPlaceTypeResult=new V;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:mo=>this.onSubmitOptionsSearch(mo)},this.filteModelContent.sortColumn="ShowInMenuOrder",this.filteModelContent.sortType=oe.Ascending}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>ae(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))),this.getEnumMenuPlaceType()}getEnumMenuPlaceType(){this.coreEnumService.ServiceMenuPlaceTypeEnum().subscribe({next:e=>{this.dataModelEnumMenuPlaceTypeResult=e}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new P);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.categoryModelSelected&&this.categoryModelSelected.id>0){let t=new z;t.propertyName="LinkParentId",t.value=this.categoryModelSelected.id,i.filters.push(t)}this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=oe.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=oe.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=oe.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onTableDropRow(e){let i=this.tableSource.data.findIndex(a=>a===e.item.data),t=new Lt;t.id=this.tableSource.data[i].id,t.centerId=this.tableSource.data[e.currentIndex].id,i>e.currentIndex?t.actionGo=pt.GoUp:t.actionGo=pt.GoDown,this.contentService.ServiceEditStep(t).subscribe({next:a=>{a.isSuccess?(Bt(this.tableSource.data,i,e.currentIndex),this.tableSource.data=this.tableSource.data.slice()):this.cmsToastrService.typeErrorMessage(a.errorMessage)},error:a=>{this.cmsToastrService.typeError(a)}})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new H,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.filteModelContent.sortColumn="ShowInMenuOrder",this.categoryModelSelected=e,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(_e,{height:"90%",panelClass:e,enterAnimationDuration:K.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:K.cmsViewConfig.exitAnimationDuration,data:{parentId:this.categoryModelSelected.id}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.onActionButtonEditRow(t.model)})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(te,{height:"90%",panelClass:i,enterAnimationDuration:K.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:K.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(a=>{a&&a.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(a=>{i=a["MESSAGE.Please_Confirm"],t=a["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(a=>{if(a){let h=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(h,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(h)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(h,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess?(this.translate.get("MESSAGE.All").subscribe(W=>{i.set(W,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(p.errorMessage),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}});let a=JSON.parse(JSON.stringify(this.filteModelContent)),h=new z;h.propertyName="recordStatus",h.value=Dt.Available,a.filters.push(h),this.contentService.ServiceGetCount(a).subscribe({next:p=>{p.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(W=>{i.set(W,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(p.errorMessage),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.filteModelContent.sortColumn="ShowInMenuOrder",this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}};ve.\u0275fac=function(i){return new(i||ve)(M(O),M(tt),M(N),M(Y),M(L),M(G),M(X),M(F),M(Gi),M(B),M(ki),M(Ye))},ve.\u0275cmp=k({type:ve,selectors:[["app-core-user-list"]],standalone:!1,features:[le],decls:68,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","","cdkDropList","",3,"matSortChange","cdkDropListDropped","dataSource","cdkDropListData"],["matColumnDef","Icon"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","id"],["matColumnDef","recordStatus"],["matColumnDef","title"],["matColumnDef","TitleML"],["matColumnDef","ShowInMenu"],["matColumnDef","ShowInAccessAdminAllowToProfessionalData"],["matColumnDef","MenuPlaceType"],["matColumnDef","ShowInMenuOrder"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],["matColumnDef","position"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild","cdkDrag","",3,"ntk-row-selected","cdkDragData","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],["aria-hidden","true",3,"ngClass"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["cdkDragHandle","",2,"pointer-events","all"],["cdkDrag","",1,"ntk-row-mainfild",3,"click","rtclick","cdkDragData"],["class","ntk-row-placeholder",4,"cdkDragPlaceholder"],[1,"ntk-row-placeholder"]],template:function(i,t){if(i&1){let a=b();l(0,"app-cms-html-list",3),A("optionActionGuideNoticeDisplayChange",function(p){return u(a),w(t.viewGuideNotice,p)||(t.viewGuideNotice=p),f(p)}),v("optionOnActionButtonMemoRow",function(){return u(a),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(a),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(a),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(a),f(t.onActionButtonPrintRow())}),E(1,4),l(2,"app-core-cpmainmenu-tree",5),v("optionChange",function(p){return u(a),f(t.onActionSelectorSelect(p))}),s(),y(),ke(3,6)(4,7),E(5,8),l(6,"a",9),v("click",function(){return u(a),f(t.viewGuideNotice=!t.viewGuideNotice)}),I(7,"i",10),s(),l(8,"a",9),v("click",function(){return u(a),f(t.onActionButtonReload())}),I(9,"i",11),s(),y(),E(10,12),l(11,"a",13),v("click",function(){return u(a),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),I(12,"mat-slide-toggle",14),d(13),g(14,"translate"),s(),l(15,"a",13),v("click",function(){return u(a),f(t.onActionButtonStatist())}),I(16,"mat-slide-toggle",14),d(17),g(18,"translate"),s(),y(),E(19,15),S(20,mn,7,3,"div",16),y(),E(21,17),S(22,un,7,3,"div",16)(23,fn,7,3,"div",16),y(),E(24,18),l(25,"app-cms-search-list",19),A("optionsChange",function(p){return u(a),w(t.optionsSearch,p)||(t.optionsSearch=p),f(p)}),s(),l(26,"app-cms-statist-list",19),A("optionsChange",function(p){return u(a),w(t.optionsStatist,p)||(t.optionsStatist=p),f(p)}),s(),y(),E(27,20),l(28,"mat-table",21,0),v("matSortChange",function(){u(a);let p=x(29);return f(t.onTableSortData(p))})("cdkDropListDropped",function(p){return u(a),f(t.onTableDropRow(p))}),E(30,22),S(31,Mn,2,1,"mat-header-cell",23)(32,Cn,2,3,"mat-cell",24),y(),E(33,25),S(34,hn,2,1,"mat-header-cell",23)(35,Sn,2,1,"mat-cell",24),y(),E(36,26),S(37,gn,2,1,"mat-header-cell",23)(38,In,4,4,"mat-cell",24),y(),E(39,27),S(40,vn,2,1,"mat-header-cell",23)(41,bn,2,1,"mat-cell",24),y(),E(42,28),S(43,En,3,3,"mat-header-cell",23)(44,yn,2,1,"mat-cell",24),y(),E(45,29),S(46,Tn,2,1,"mat-header-cell",23)(47,wn,3,3,"mat-cell",24),y(),E(48,30),S(49,An,2,1,"mat-header-cell",23)(50,Rn,3,3,"mat-cell",24),y(),E(51,31),S(52,xn,2,1,"mat-header-cell",23)(53,Dn,3,4,"mat-cell",24),y(),E(54,32),S(55,Pn,2,1,"mat-header-cell",23)(56,kn,2,1,"mat-cell",24),y(),E(57,33),S(58,Ln,3,3,"mat-header-cell",34)(59,Vn,6,1,"mat-cell",35),y(),E(60,36),S(61,Gn,2,0,"mat-header-cell",23)(62,On,3,0,"mat-cell",24),y(),S(63,Fn,1,0,"mat-header-row",37)(64,Bn,2,3,"mat-row",38),s(),y(),E(65,39),l(66,"mat-paginator",40,1),v("page",function(p){return u(a),f(t.onTablePageingData(p))}),s(),y(),s()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",!0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.title),r(9),Q("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),r(3),c("checked",t.optionsSearch.data.show),r(),C("",_(14,26,"ACTION.SEARCH")," "),r(3),c("checked",t.optionsStatist.data.show),r(),C("",_(18,28,"ACTION.STATIST")," "),r(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),r(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),r(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(2),T("options",t.optionsSearch),r(),T("options",t.optionsStatist),r(2),c("dataSource",t.tableSource)("cdkDropListData",t.tableSource),r(35),c("matHeaderRowDef",t.tabledisplayedColumns),r(),c("matRowDefColumns",t.tabledisplayedColumns),r(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Oe(30,dn)))},dependencies:[Fe,j,de,Ke,ue,J,ai,li,si,ci,di,pi,hi,gi,bi,_i,Si,Ei,Ii,vi,yi,Ti,Qi,zi,Ki,Ji,Xi,jt,Wt,Ht,Ut,nt,U,ro,Yi,Vi],encapsulation:2});var rt=ve;var Hn=[{path:"",component:it,data:{title:"ROUTE.CORE.CPMAINMENU"},children:[{path:"",component:rt,data:{title:"ROUTE.CORE.CPMAINMENU"}},{path:"edit/:Id",component:te,data:{title:"ROUTE.CORE.CPMAINMENU"}}]}],ne=class ne{};ne.\u0275fac=function(e){return new(e||ne)},ne.\u0275mod=De({type:ne}),ne.\u0275inj=xe({imports:[ct.forChild(Hn),ct]});var at=ne;var re=class re{};re.\u0275fac=function(e){return new(e||re)},re.\u0275mod=De({type:re}),re.\u0275inj=xe({providers:[Vt,L,O,Ne,Gt,tt],imports:[Rt,at,Zt,$t.withConfig({warnOnNgModelWithFormControl:"never"}),Li,Wi,$i,Zi,to,no,qt]});var co=re;export{co as CoreCpMainMenu};
