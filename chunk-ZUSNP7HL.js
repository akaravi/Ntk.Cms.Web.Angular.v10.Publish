import{d as Re}from"./chunk-3ZU3UEXX.js";import{a as Le}from"./chunk-DBXDODMI.js";import{a as Pe}from"./chunk-BLNS3IRN.js";import{Dc as Oe,Ib as Ee,L as oe,M as ae,O as re,P as se,Pa as me,Qa as fe,R as le,fc as Ae,gc as Ne,ka as de,lb as xe,ma as ce,mb as be,n as Y,nb as Te,o as Z,ob as Ie,pb as we,qb as ye,r as $,s as ee,u as te,uc as ke,vc as Be,w as ne,x as ie,xc as Ve}from"./chunk-YUK42NQZ.js";import{m as ve}from"./chunk-5FBTF4ET.js";import"./chunk-QIN7QE5W.js";import{$d as P,$f as Se,Bb as F,Cb as H,Db as j,Fa as n,Hb as G,Jc as U,Ka as C,Mb as o,Nb as _,Ob as f,Od as ue,Pa as N,Qa as k,Sb as B,Tb as V,Ub as O,Ud as ge,Ue as _e,Va as y,Vc as J,X as A,Ze as Ce,_e as L,bc as s,ca as d,cc as l,da as c,de as Me,ek as he,ib as M,jb as t,kb as a,lb as S,ok as q,pk as Q,qd as pe,sb as E,uc as z,vb as u,vd as W,xb as v}from"./chunk-Y22UWZ2R.js";import{i as X}from"./chunk-SEDBTTTN.js";var T=class T{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};T.\u0275fac=function(r){return new(r||T)},T.\u0275cmp=N({type:T,selectors:[["app-core-main-action"]],standalone:!1,decls:1,vars:0,template:function(r,e){r&1&&S(0,"router-outlet")},dependencies:[pe],encapsulation:2});var R=T;var He=["vform"],je=["Message"];function Ge(g,p){if(g&1){let r=E();t(0,"textarea",30),O("ngModelChange",function(i){d(r);let m=v();return V(m.dataMessageContentModel.messageBody,i)||(m.dataMessageContentModel.messageBody=i),c(i)}),o(1,"                  "),a()}if(g&2){let r=v();B("ngModel",r.dataMessageContentModel.messageBody)}}function We(g,p){if(g&1){let r=E();t(0,"button",31),u("click",function(){d(r);let i=v();return c(i.onActionMessageContentAdd())}),S(1,"i",32),o(2),s(3,"translate"),a()}g&2&&(n(2),f(" ",l(3,1,"TITLE.Added_to_the_text")," "))}function qe(g,p){if(g&1){let r=E();t(0,"button",31),u("click",function(){d(r);let i=v();return c(i.onActionMessageContentNew())}),S(1,"i",32),o(2),s(3,"translate"),a()}g&2&&(n(2),f(" ",l(3,1,"TITLE.Message_Text")," "))}function Qe(g,p){g&1&&(t(0,"mat-error"),o(1),s(2,"translate"),t(3,"strong"),o(4),s(5,"translate"),a()()),g&2&&(n(),f(" ",l(2,2,"TITLE.Message_Text")," "),n(3),_(l(5,4,"content.required")))}function Ke(g,p){if(g&1&&(t(0,"button",35),S(1,"i",36),o(2),s(3,"translate"),a()),g&2){v(2);let r=G(10);M("disabled",!r.valid),n(2),f(" ",l(3,2,"ACTION.Send_Message")," ")}}function Xe(g,p){if(g&1&&(t(0,"div",33),y(1,Ke,4,4,"button",34),a()),g&2){let r=v();n(),M("ngIf",!r.publicHelper.processService.process.inRunAll)}}var I=class I{constructor(p,r,e,i,m,h,Ue,Je){this.coreEnumService=p;this.coreTokenConnectionService=r;this.cmsStoreService=e;this.cmsToastrService=i;this.cdr=m;this.publicHelper=h;this.translate=Ue;this.tokenHelper=Je;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Se;this.dataModelParentSelected=new he;this.dataModel=new Ce;this.dataModelResult=new ue;this.formInfo=new ge;this.clipboardText="";this.dataMessageCategoryModel=new q;this.dataMessageContentModel=new Q;this.step=0;this.publicHelper.processService.cdr=this.cdr,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore}ngOnInit(){}readClipboardFromDevTools(){return new Promise((p,r)=>{let e=()=>X(null,null,function*(){try{let i=yield navigator.clipboard.readText();p(i)}catch(i){r(i)}window.removeEventListener("focus",e)});window.addEventListener("focus",e),console.log("Hit <Tab> to give focus back to document (or we will face a DOMException);")})}onActionMessageLTR(){this.message.nativeElement.style.direction="ltr",this.message.nativeElement.style.textAlign="left"}onActionMessageRTL(){this.message.nativeElement.style.direction="rtl",this.message.nativeElement.style.textAlign="right"}onActionSelectMessageCategory(p){p&&p.id?.length>0?this.dataMessageCategoryModel=p:this.dataMessageCategoryModel=new q}onActionSelectMessageContent(p){p&&p.id?.length>0?this.dataMessageContentModel=p:this.dataMessageContentModel=new Q}onActionMessageContentAdd(){this.dataMessageContentModel?.messageBody?.length>0?this.dataModel.content.length>0&&(this.dataModel.content=this.dataModel.content+" "+this.dataMessageContentModel.messageBody):this.dataModel.content=this.dataMessageContentModel.messageBody}onActionMessageContentNew(){this.dataMessageContentModel?.messageBody?.length>0&&(this.dataModel.content=this.dataMessageContentModel.messageBody)}onFormSubmit(){if(!this.formGroup.valid)return;this.formInfo.formSubmitAllow=!1;let p=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(r=>{this.publicHelper.processService.processStart(p,r,this.constructorInfoAreaId)}),this.formInfo.formAlert="",this.formInfo.formError="",this.coreTokenConnectionService.ServiceSendNotification(this.dataModel).subscribe({next:r=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=r,r.isSuccess?(this.translate.get("MESSAGE.Submit_request_was_successfully_registered").subscribe(e=>{this.formInfo.formAlert=e}),this.translate.get("MESSAGE.Send_request_was_successfully_registered").subscribe(e=>{this.cmsToastrService.typeSuccessMessage(e)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError=r.errorMessage,this.cmsToastrService.typeErrorMessage(r.errorMessage)),this.publicHelper.processService.processStop(p)},error:r=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(r),this.publicHelper.processService.processStop(p,!1)},complete:()=>{}})}setStep(p){this.step=p}nextStep(){this.step++}prevStep(){this.step--}};I.\u0275fac=function(r){return new(r||I)(C(P),C(L),C(ve),C(Be),C(z),C(Oe),C(Ae),C(ke))},I.\u0275cmp=N({type:I,selectors:[["app-core-main-action-send-notification"]],viewQuery:function(r,e){if(r&1&&(F(He,5),F(je,5)),r&2){let i;H(i=j())&&(e.formGroup=i.first),H(i=j())&&(e.message=i.first)}},standalone:!1,decls:142,vars:97,consts:[["vform","ngForm"],["content",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection"],[1,"row"],[1,"col-6"],[1,"example-headers-align"],["hideToggle","",3,"opened","expanded"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"click"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModel","ngModelChange",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray",3,"click",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.sendToAll",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.sendToAll","name","dataModel.sendToAll",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.sendToAll",1,"custom-control-label"],[1,"message-box"],[1,"row",2,"height","300px"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.content",1,"color-highlight"],["matInput","","name","dataModel.content","type","text","placeholder","...","minlength","1","maxlength","500","rows","9","id","dataModel.content",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[4,"ngIf"],["class","row","style","height:140px;bottom: 4vh;justify-content: center;",4,"ngIf"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10","id","dataMessageContentModel.messageBody",3,"ngModelChange","ngModel"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],[1,"row",2,"height","140px","bottom","4vh","justify-content","center"],["type","submit","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled",4,"ngIf"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(r,e){if(r&1){let i=E();t(0,"div",2),S(1,"app-progress-spinner",3),t(2,"div",4)(3,"p",5),o(4),s(5,"translate"),a(),t(6,"p"),o(7),s(8,"translate"),a(),t(9,"form",6,0),u("ngSubmit",function(){return d(i),c(e.onFormSubmit())}),o(11),t(12,"div",7)(13,"div",8)(14,"div",9)(15,"mat-accordion",10)(16,"mat-expansion-panel",11),u("opened",function(){return d(i),c(e.setStep(0))}),t(17,"mat-expansion-panel-header")(18,"mat-panel-title"),o(19),s(20,"translate"),a(),t(21,"mat-panel-description"),o(22),s(23,"translate"),t(24,"mat-icon"),o(25,"account_circle"),a()()(),t(26,"mat-action-row")(27,"button",12),u("click",function(){return d(i),c(e.nextStep())}),o(28),s(29,"translate"),a()()(),t(30,"mat-expansion-panel",11),u("opened",function(){return d(i),c(e.setStep(1))}),t(31,"mat-expansion-panel-header")(32,"mat-panel-title"),o(33),s(34,"translate"),a(),t(35,"mat-panel-description"),o(36),s(37,"translate"),t(38,"mat-icon"),o(39,"map"),a()()(),y(40,Ge,2,1,"textarea",13)(41,We,4,3,"button",14)(42,qe,4,3,"button",14),t(43,"mat-action-row")(44,"button",15),u("click",function(){return d(i),c(e.prevStep())}),o(45),s(46,"translate"),a(),t(47,"button",12),u("click",function(){return d(i),c(e.nextStep())}),o(48),s(49,"translate"),a()()(),t(50,"mat-expansion-panel",11),u("opened",function(){return d(i),c(e.setStep(2))}),t(51,"mat-expansion-panel-header")(52,"mat-panel-title"),o(53),s(54,"translate"),a(),t(55,"mat-panel-description"),o(56),s(57,"translate"),t(58,"mat-icon"),o(59,"date_range"),a()()(),t(60,"mat-action-row")(61,"button",15),u("click",function(){return d(i),c(e.prevStep())}),o(62),s(63,"translate"),a(),t(64,"button",12),u("click",function(){return d(i),c(e.nextStep())}),o(65),s(66,"translate"),a()()(),t(67,"mat-expansion-panel",11),u("opened",function(){return d(i),c(e.setStep(3))}),t(68,"mat-expansion-panel-header")(69,"mat-panel-title"),o(70),s(71,"translate"),a(),t(72,"mat-panel-description"),o(73),s(74,"translate"),t(75,"mat-icon"),o(76,"date_range"),a()()(),S(77,"div",8)(78,"hr"),t(79,"mat-action-row")(80,"button",15),u("click",function(){return d(i),c(e.prevStep())}),o(81),s(82,"translate"),a(),t(83,"button",12),u("click",function(){return d(i),c(e.nextStep())}),o(84),s(85,"translate"),a()()(),t(86,"mat-expansion-panel",11),u("opened",function(){return d(i),c(e.setStep(4))}),t(87,"mat-expansion-panel-header")(88,"mat-panel-title"),o(89),s(90,"translate"),a(),t(91,"mat-panel-description"),o(92),s(93,"translate"),t(94,"mat-icon"),o(95,"date_range"),a()()(),t(96,"mat-action-row")(97,"button",15),u("click",function(){return d(i),c(e.prevStep())}),o(98),s(99,"translate"),a(),t(100,"button",12),u("click",function(){return d(i),c(e.nextStep())}),o(101),s(102,"translate"),a()()(),t(103,"mat-expansion-panel",11),u("opened",function(){return d(i),c(e.setStep(5))}),t(104,"mat-expansion-panel-header")(105,"mat-panel-title"),o(106),s(107,"translate"),a(),t(108,"mat-panel-description"),o(109),s(110,"translate"),t(111,"mat-icon"),o(112,"date_range"),a()()(),t(113,"div",16)(114,"div",17)(115,"h5",18),o(116),s(117,"translate"),a()(),t(118,"div",19)(119,"div",20)(120,"input",21),O("ngModelChange",function(h){return d(i),V(e.dataModel.sendToAll,h)||(e.dataModel.sendToAll=h),c(h)}),a(),S(121,"label",22),a()()(),t(122,"mat-action-row")(123,"button",15),u("click",function(){return d(i),c(e.prevStep())}),o(124),s(125,"translate"),a(),t(126,"button",12),u("click",function(){return d(i),c(e.nextStep())}),o(127),s(128,"translate"),a()()()()(),t(129,"div",9)(130,"div",23)(131,"div",24)(132,"div",25)(133,"label",26),o(134),s(135,"translate"),a(),t(136,"textarea",27,1),O("ngModelChange",function(h){return d(i),V(e.dataModel.content,h)||(e.dataModel.content=h),c(h)}),a(),t(138,"em"),o(139),a(),y(140,Qe,6,6,"mat-error",28),a()(),y(141,Xe,2,1,"div",29),a()()()()()()()}if(r&2){let i=G(137);n(),M("optionsInfoAreaId",e.constructorInfoAreaId),n(3),f(" ",l(5,43,"TITLE.EDIT_USER_ACCOUNT")," "),n(3),f(" ",l(8,45,"TITLE.Be_Careful_When_Entering_Information")," "),n(4),f(" ",e.formInfo.formTitle," "),n(5),M("expanded",e.step===0),n(3),f(" ",l(20,47,"TITLE.Direction")," "),n(3),f(" ",l(23,49,"TITLE.Select_the_path_to_send_the_message")," "),n(6),_(l(29,51,"ACTION.NEXT")),n(2),M("expanded",e.step===1),n(3),f(" ",l(34,53,"TITLE.Message_Text")," "),n(3),f(" ",l(37,55,"TITLE.Select_the_text_of_the_default_messages")," "),n(4),M("ngIf",(e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0),n(),M("ngIf",(e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0&&(e.dataModel.content==null?null:e.dataModel.content.length)>0),n(),M("ngIf",(e.dataMessageContentModel==null||e.dataMessageContentModel.messageBody==null?null:e.dataMessageContentModel.messageBody.length)>0),n(3),_(l(46,57,"ACTION.BACK")),n(3),_(l(49,59,"ACTION.NEXT")),n(2),M("expanded",e.step===2),n(3),f(" ",l(54,61,"TITLE.Phonebook")," "),n(3),f(" ",l(57,63,"TITLE.Audience_selection")," "),n(6),_(l(63,65,"ACTION.BACK")),n(3),_(l(66,67,"ACTION.NEXT")),n(2),M("expanded",e.step===3),n(3),f(" ",l(71,69,"TITLE.Shipping_time")," "),n(3),f(" ",l(74,71,"TITLE.Time_to_start_sending_and_finish")," "),n(8),_(l(82,73,"ACTION.BACK")),n(3),_(l(85,75,"ACTION.NEXT")),n(2),M("expanded",e.step===4),n(3),f(" ",l(90,77,"TITLE.Timing")," "),n(3),f(" ",l(93,79,"TITLE.Retry_schedule")," "),n(6),_(l(99,81,"ACTION.BACK")),n(3),_(l(102,83,"ACTION.NEXT")),n(2),M("expanded",e.step===5),n(3),f(" ",l(107,85,"TITLE.Settings")," "),n(3),f(" ",l(110,87,"TITLE.Send_settings")," "),n(7),f(" ",l(117,89,"TITLE.Send_To_All")),n(4),B("ngModel",e.dataModel.sendToAll),n(4),_(l(125,91,"ACTION.BACK")),n(3),_(l(128,93,"ACTION.END")),n(7),_(l(135,95,"TITLE.Message_Text")),n(2),B("ngModel",e.dataModel.content),n(3),f("",i.value.length," / 500"),n(),M("ngIf",i.errors==null?null:i.errors.required),n(),M("ngIf",e.formInfo.formSubmitAllow)}},dependencies:[U,ie,Z,Y,$,ee,oe,ae,ne,te,ye,xe,be,Te,we,Ie,le,me,ce,Pe,Ne],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}.mat-tab-group[_ngcontent-%COMP%]{height:95%}.message-box[_ngcontent-%COMP%]{background-image:url(/assets/media/bg/iphone.png);height:600px;width:300px;background-position:center;background-repeat:no-repeat;background-size:cover;padding-right:33px;padding-left:33px}.message-box-button[_ngcontent-%COMP%]{color:#00f;border-color:transparent;background-color:transparent}.message-box-button[_ngcontent-%COMP%]:hover{color:red;font-size:initial}.message-box-button[_ngcontent-%COMP%]:active{color:#a200ff}"]});var w=I;var ze=[{path:"",component:R,children:[{path:"send-notification",component:w},{path:"send-notification/inbox-extras",component:w},{path:"send-notification/outbox-extras",component:w}]}],x=class x{};x.\u0275fac=function(r){return new(r||x)},x.\u0275mod=k({type:x}),x.\u0275inj=A({imports:[W.forChild(ze),W]});var D=x;var b=class b{};b.\u0275fac=function(r){return new(r||b)},b.\u0275mod=k({type:b}),b.\u0275inj=A({providers:[Me,P,_e,Le,L],imports:[J,D,re,se.withConfig({warnOnNgModelWithFormControl:"never"}),Ve,Re,fe,de,Ee]});var De=b;export{De as CoreMainActionModule};
