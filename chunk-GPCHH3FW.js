import{a as Ut}from"./chunk-NZVNPSFK.js";import{a as Nt}from"./chunk-PQAMI56L.js";import{a as L}from"./chunk-BTN5MJ5N.js";import{Dc as H,Ja as vt,K as $,Ka as Ct,L as ee,La as yt,M as te,Ma as Et,Na as Tt,O as gt,P as bt,Pa as ne,R as ge,U as ie,fc as F,gc as G,n as He,o as Y,qc as Ot,r as z,s as Q,sc as le,u as J,uc as Fe,vc as N,w as X,x as Z,xc as Rt,zc as ce}from"./chunk-QGGCLMQI.js";import{a as De,c as be,m as se}from"./chunk-WNRZ34IP.js";import{a as _e}from"./chunk-OP2H2BS3.js";import{$f as wt,Ba as pt,Bb as mt,Ca as k,Cb as ut,Db as ft,Fa as t,Hb as T,Jc as K,Ka as b,Mb as m,Md as oe,Nb as h,Nc as Ne,Ob as S,Od as xt,Pa as P,Pb as Re,Qa as Oe,Sb as x,Tb as M,Ub as w,Ud as ae,Ue as U,Va as C,Vb as y,Vc as St,Wb as Ze,X as Be,Xb as ht,Xd as ke,Zb as O,_ as he,_b as pe,ag as Ve,bc as s,ca as _,cc as l,cg as et,da as I,de as Mt,dg as At,eg as Pt,gc as Ue,gg as Bt,ia as Se,ib as p,jb as r,kb as n,lb as u,pb as W,pd as _t,qb as q,qd as It,rd as D,sb as A,sd as re,uc as R,vb as v,vd as $e,w as dt,xb as g}from"./chunk-MDNBQXON.js";import{i as j}from"./chunk-SEDBTTTN.js";var Ie=class Ie{constructor(a,e,i,o,c,f){this.router=a;this.publicHelper=e;this.tokenHelper=i;this.translate=o;this.cmsStoreService=c;this.cdr=f;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new wt;this.today=new Date;this.showSplashModel=!0;this.publicHelper.processService.cdr=this.cdr,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&(this.tokenInfo&&this.tokenInfo?.access?.userId>0&&this.tokenInfo?.access?.siteId>0?setTimeout(()=>this.router.navigate(["/dashboard"]),500):this.tokenInfo&&this.tokenInfo?.access&&this.tokenInfo?.access?.userId>0&&setTimeout(()=>this.router.navigate(["/core/site/selection"]),500))}ngOnInit(){window.innerWidth<_e.cmsViewConfig.mobileWindowInnerWidth&&setTimeout(()=>{this.showSplashModel=!1,this.cdr.markForCheck()},5e3)}};Ie.\u0275fac=function(e){return new(e||Ie)(b(D),b(H),b(Fe),b(le),b(se),b(R))},Ie.\u0275cmp=P({type:Ie,selectors:[["app-auth"]],standalone:!1,decls:7,vars:0,consts:[[1,"page-content","header-clear-medium"],[1,"content"],[1,"row"],[1,"col-sm-0","col-md-2","col-lg-3","col-xl-4"],[1,"col-sm-12","col-md-8","col-lg-6","col-xl-4"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),u(3,"div",3),r(4,"div",4),u(5,"router-outlet"),n(),u(6,"div",3),n()()())},dependencies:[It],encapsulation:2});var Ge=Ie;var Gt=()=>["/auth/singin"],Lt=()=>["/auth/singup"],st=d=>({display:d});function Wt(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.FORGOT.MOBILE")," "),t(3),h(l(5,4,"MESSAGE.required")))}function qt(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),h(l(5,4,"MESSAGE.required")))}function jt(d,a){if(d&1){let e=A();r(0,"form",18,1),v("ngSubmit",function(){_(e);let o=g();return I(o.onActionSubmitOrderCodeBySms())}),r(2,"div",19),u(3,"i",20),r(4,"input",21,2),s(6,"translate"),w("ngModelChange",function(o){_(e);let c=g();return M(c.dataModelforgetPasswordBySms.mobile,o)||(c.dataModelforgetPasswordBySms.mobile=o),I(o)}),n(),r(7,"label",22),m(8),s(9,"translate"),n(),u(10,"i",23)(11,"i",24),r(12,"em"),m(13),s(14,"translate"),n(),C(15,Wt,6,6,"mat-error",25),n(),r(16,"img",26),v("click",function(){_(e);let o=g();return I(o.onCaptchaOrder())}),n(),r(17,"mat-icon",27),v("click",function(){_(e);let o=g();return I(o.onCaptchaOrder())}),m(18,"refresh"),n(),r(19,"div",19),u(20,"i",28),r(21,"input",29,3),s(23,"translate"),w("ngModelChange",function(o){_(e);let c=g();return M(c.dataModelforgetPasswordBySms.captchaText,o)||(c.dataModelforgetPasswordBySms.captchaText=o),I(o)}),n(),r(24,"label",30),m(25),s(26,"translate"),n(),u(27,"i",23)(28,"i",24),r(29,"em"),m(30),s(31,"translate"),n(),C(32,qt,6,6,"mat-error",25),n(),r(33,"button",31),m(34),s(35,"translate"),n(),r(36,"button",32),v("click",function(){_(e);let o=g();return I(o.changeforgetState("email"))}),m(37),s(38,"translate"),n()()}if(d&2){let e=T(1),i=T(5),o=T(22),c=g();p("ngStyle",pe(37,st,c.errorState===c.errorStates.NoError?"none":"block")),t(4),p("placeholder",y(l(6,21,"AUTH.FORGOT.MOBILE"))),x("ngModel",c.dataModelforgetPasswordBySms.mobile),p("disabled",!c.formInfo.buttonSubmittedEnabled),t(4),h(l(9,23,"AUTH.FORGOT.MOBILE")),t(5),S("(",l(14,25,"TITLE.Necessary"),")"),t(2),p("ngIf",i.errors==null?null:i.errors.required),t(),p("src",y(c.captchaModel.image),k),t(5),p("placeholder",y(l(23,27,"AUTH.INPUT.CAPTCHACODE"))),x("ngModel",c.dataModelforgetPasswordBySms.captchaText),p("disabled",!c.formInfo.buttonSubmittedEnabled),t(4),h(l(26,29,"AUTH.INPUT.CAPTCHACODE")),t(5),S("(",l(31,31,"TITLE.Necessary"),")"),t(2),p("ngIf",o.errors==null?null:o.errors.required),t(),p("disabled",e.invalid||!c.formInfo.buttonSubmittedEnabled),t(),S(" ",l(35,33,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(2),p("disabled",!c.formInfo.buttonSubmittedEnabled),t(),S(" ",l(38,35,"MESSAGE.Reminders.by.email")," ")}}function Kt(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.FORGOT.EMAIL")," "),t(3),h(l(5,4,"MESSAGE.required")))}function Yt(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),h(l(5,4,"MESSAGE.required")))}function zt(d,a){if(d&1){let e=A();r(0,"form",18,4),v("ngSubmit",function(){_(e);let o=g();return I(o.onActionSubmitOrderCodeByEmail())}),r(2,"div",19),u(3,"i",20),r(4,"input",33,5),s(6,"translate"),w("ngModelChange",function(o){_(e);let c=g();return M(c.dataModelforgetPasswordByEmail.email,o)||(c.dataModelforgetPasswordByEmail.email=o),I(o)}),n(),r(7,"label",34),m(8),s(9,"translate"),n(),u(10,"i",23)(11,"i",24),r(12,"em"),m(13),s(14,"translate"),n(),C(15,Kt,6,6,"mat-error",25),n(),r(16,"img",26),v("click",function(){_(e);let o=g();return I(o.onCaptchaOrder())}),n(),r(17,"mat-icon",27),v("click",function(){_(e);let o=g();return I(o.onCaptchaOrder())}),m(18,"refresh"),n(),r(19,"div",19),u(20,"i",28),r(21,"input",35,3),s(23,"translate"),w("ngModelChange",function(o){_(e);let c=g();return M(c.dataModelforgetPasswordByEmail.captchaText,o)||(c.dataModelforgetPasswordByEmail.captchaText=o),I(o)}),n(),r(24,"label",36),m(25),s(26,"translate"),n(),u(27,"i",23)(28,"i",24),r(29,"em"),m(30),s(31,"translate"),n(),C(32,Yt,6,6,"mat-error",25),n(),r(33,"button",31),m(34),s(35,"translate"),n(),r(36,"button",32),v("click",function(){_(e);let o=g();return I(o.changeforgetState("sms"))}),m(37),s(38,"translate"),n()()}if(d&2){let e=T(1),i=T(5),o=T(22),c=g();p("ngStyle",pe(37,st,c.errorState===c.errorStates.NoError?"none":"block")),t(4),p("placeholder",y(l(6,21,"AUTH.FORGOT.EMAIL"))),x("ngModel",c.dataModelforgetPasswordByEmail.email),p("disabled",!c.formInfo.buttonSubmittedEnabled),t(4),h(l(9,23,"AUTH.FORGOT.EMAIL")),t(5),S("(",l(14,25,"TITLE.Necessary"),")"),t(2),p("ngIf",i.errors==null?null:i.errors.required),t(),p("src",y(c.captchaModel.image),k),t(5),p("placeholder",y(l(23,27,"AUTH.INPUT.CAPTCHACODE"))),x("ngModel",c.dataModelforgetPasswordByEmail.captchaText),p("disabled",!c.formInfo.buttonSubmittedEnabled),t(4),h(l(26,29,"AUTH.INPUT.CAPTCHACODE")),t(5),S("(",l(31,31,"TITLE.Necessary"),")"),t(2),p("ngIf",o.errors==null?null:o.errors.required),t(),p("disabled",e.invalid||!c.formInfo.buttonSubmittedEnabled),t(),S(" ",l(35,33,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(2),p("disabled",!c.formInfo.buttonSubmittedEnabled),t(),S(" ",l(38,35,"MESSAGE.Reminder.by.SMS")," ")}}function Qt(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(3),h(l(5,4,"MESSAGE.required")))}function Jt(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.FORGOT.PASSWORD")," "),t(3),h(l(5,4,"MESSAGE.required")))}function Xt(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.INPUT.CONFIRM_PASSWORD")," "),t(3),h(l(5,4,"MESSAGE.required")))}function Zt(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),n()),d&2&&(t(),S(" ",l(2,1,"MESSAGE.Password_and_password_confirmation_are_different")," "))}function $t(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),h(l(5,4,"MESSAGE.required")))}function ei(d,a){if(d&1){let e=A();r(0,"form",18,6),v("ngSubmit",function(){_(e);let o=g();return I(o.onActionSubmitEntryPinCode())}),r(2,"div",19),u(3,"i",20),r(4,"input",37,7),s(6,"translate"),w("ngModelChange",function(o){_(e);let c=g();return M(c.dataModelforgetPasswordEntryPinCode.activateCode,o)||(c.dataModelforgetPasswordEntryPinCode.activateCode=o),I(o)}),n(),r(7,"label",38),m(8),s(9,"translate"),n(),u(10,"i",23)(11,"i",24),r(12,"em"),m(13),s(14,"translate"),n(),C(15,Qt,6,6,"mat-error",25),n(),r(16,"div",19),u(17,"i",39),r(18,"input",40,8),s(20,"translate"),w("ngModelChange",function(o){_(e);let c=g();return M(c.dataModelforgetPasswordEntryPinCode.newPassword,o)||(c.dataModelforgetPasswordEntryPinCode.newPassword=o),I(o)}),n(),r(21,"label",41),m(22),s(23,"translate"),n(),u(24,"i",23)(25,"i",24),r(26,"em"),m(27),s(28,"translate"),n(),C(29,Jt,6,6,"mat-error",25),n(),r(30,"app-password-strength",42),v("passwordStrength",function(o){_(e);let c=g();return I(c.passwordValid(o))}),n(),r(31,"div",19),u(32,"i",39),r(33,"input",43,9),s(35,"translate"),w("ngModelChange",function(o){_(e);let c=g();return M(c.RePasswordModel,o)||(c.RePasswordModel=o),I(o)}),n(),r(36,"label",44),m(37),s(38,"translate"),n(),u(39,"i",23)(40,"i",24),r(41,"em"),m(42),s(43,"translate"),n(),C(44,Xt,6,6,"mat-error",25)(45,Zt,3,3,"mat-error",25),n(),r(46,"img",26),v("click",function(){_(e);let o=g();return I(o.onCaptchaOrder())}),n(),r(47,"mat-icon",27),v("click",function(){_(e);let o=g();return I(o.onCaptchaOrder())}),m(48,"refresh"),n(),r(49,"div",19),u(50,"i",28),r(51,"input",45,3),s(53,"translate"),w("ngModelChange",function(o){_(e);let c=g();return M(c.dataModelforgetPasswordEntryPinCode.captchaText,o)||(c.dataModelforgetPasswordEntryPinCode.captchaText=o),I(o)}),n(),r(54,"label",46),m(55),s(56,"translate"),n(),u(57,"i",23)(58,"i",24),r(59,"em"),m(60),s(61,"translate"),n(),C(62,$t,6,6,"mat-error",25),n(),r(63,"button",31),m(64),s(65,"translate"),n(),r(66,"button",32),v("click",function(){_(e);let o=g();return I(o.changeforgetState("sms"))}),m(67),s(68,"translate"),n(),r(69,"button",32),v("click",function(){_(e);let o=g();return I(o.changeforgetState("email"))}),m(70),s(71,"translate"),n()()}if(d&2){let e=T(1),i=T(5),o=T(19),c=T(34),f=T(52),E=g();p("ngStyle",pe(69,st,E.errorState===E.errorStates.NoError?"none":"block")),t(4),p("placeholder",Ze(" ",l(6,39,"AUTH.FORGOT.SEND_PIN_CODE"))),x("ngModel",E.dataModelforgetPasswordEntryPinCode.activateCode),p("disabled",!E.formInfo.buttonSubmittedEnabled),t(4),S(" ",l(9,41,"AUTH.FORGOT.PIN_CODE")),t(5),S("(",l(14,43,"TITLE.Necessary"),")"),t(2),p("ngIf",i.errors==null?null:i.errors.required),t(3),p("placeholder",Ze(" ",l(20,45,"AUTH.FORGOT.PASSWORD"))),x("ngModel",E.dataModelforgetPasswordEntryPinCode.newPassword),p("disabled",!E.formInfo.buttonSubmittedEnabled),t(4),S(" ",l(23,47,"AUTH.FORGOT.PASSWORD")),t(5),S("(",l(28,49,"TITLE.Necessary"),")"),t(2),p("ngIf",o.errors==null?null:o.errors.required),t(),p("passwordToCheck",E.dataModelforgetPasswordEntryPinCode.newPassword),t(3),p("placeholder",y(l(35,51,"AUTH.INPUT.CONFIRM_PASSWORD"))),x("ngModel",E.RePasswordModel),p("disabled",!E.formInfo.buttonSubmittedEnabled),t(4),h(l(38,53,"AUTH.INPUT.CONFIRM_PASSWORD")),t(5),S("(",l(43,55,"TITLE.Necessary"),")"),t(2),p("ngIf",c.errors==null?null:c.errors.required),t(),p("ngIf",(E.RePasswordModel==null?null:E.RePasswordModel.length)>0&&c.value!==o.value),t(),p("src",y(E.captchaModel.image),k),t(5),p("placeholder",y(l(53,57,"AUTH.INPUT.CAPTCHACODE"))),x("ngModel",E.dataModelforgetPasswordEntryPinCode.captchaText),p("disabled",!E.formInfo.buttonSubmittedEnabled),t(4),h(l(56,59,"AUTH.INPUT.CAPTCHACODE")),t(5),S("(",l(61,61,"TITLE.Necessary"),")"),t(2),p("ngIf",f.errors==null?null:f.errors.required),t(),p("disabled",e.invalid||!E.formInfo.buttonSubmittedEnabled),t(),S(" ",l(65,63,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(2),p("disabled",!E.formInfo.buttonSubmittedEnabled),t(),S(" ",l(68,65,"MESSAGE.Reminder.by.SMS")," "),t(2),p("disabled",!E.formInfo.buttonSubmittedEnabled),t(),S(" ",l(71,67,"MESSAGE.Resend_the_recovery_code")," ")}}function ti(d,a){if(d&1&&(W(0),r(1,"div",47)(2,"div",48),m(3),n()(),q()),d&2){let e=g().message;t(3),S(" ",e," ")}}function ii(d,a){if(d&1&&C(0,ti,4,1,"ng-container",25),d&2){let e=a.control,i=a.validation;p("ngIf",e.hasError(i)&&(e.dirty||e.touched))}}var Ht=(i=>(i[i.NotSubmitted=0]="NotSubmitted",i[i.HasError=1]="HasError",i[i.NoError=2]="NoError",i))(Ht||{}),Ce=class Ce{constructor(a,e,i,o,c,f,E){this.coreAuthService=a;this.cmsToastrService=e;this.translate=i;this.router=o;this.cdr=c;this.publicHelper=f;this.pageInfo=E;this.constructorInfoAreaId=this.constructor.name;this.destroyRef=he(Se);this.errorState=0;this.errorStates=Ht;this.dataModelforgetPasswordBySms=new et;this.dataModelforgetPasswordByEmail=new et;this.dataModelforgetPasswordEntryPinCode=new At;this.captchaModel=new oe;this.forgetState="sms";this.countAutoCaptchaOrder=1;this.formInfo=new ae;this.passwordIsValid=!1;this.RePasswordModel="";this.onCaptchaOrderInProcess=!1;this.publicHelper.processService.cdr=this.cdr,this.RePasswordModel=""}ngOnInit(){this.onCaptchaOrder(),this.translate.get("AUTH.FORGOT.TITLE").subscribe(a=>{this.pageInfo.updateTitle(a)})}onActionSubmitOrderCodeBySms(){this.formInfo.buttonSubmittedEnabled=!1,this.errorState=0,this.dataModelforgetPasswordBySms.captchaKey=this.captchaModel.key,this.dataModelforgetPasswordEntryPinCode.email="",this.dataModelforgetPasswordEntryPinCode.mobile=this.dataModelforgetPasswordBySms.mobile;let a=this.constructor.name+".ServiceForgetPassword";this.translate.get("AUTH.FORGOT.REQUEST_PASSWORD_REMINDER").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceForgetPassword(this.dataModelforgetPasswordBySms).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.The_activation_code_was_texted_with_you").subscribe(i=>{this.cmsToastrService.typeSuccessMessage(i)}),this.forgetState="entrycode"):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.formInfo.buttonSubmittedEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.buttonSubmittedEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onActionSubmitOrderCodeByEmail(){this.formInfo.buttonSubmittedEnabled=!1,this.errorState=0,this.dataModelforgetPasswordByEmail.captchaKey=this.captchaModel.key,this.dataModelforgetPasswordEntryPinCode.mobile="",this.dataModelforgetPasswordEntryPinCode.email=this.dataModelforgetPasswordByEmail.email;let a=this.constructor.name+".ServiceForgetPassword";this.translate.get("AUTH.FORGOT.REQUEST_PASSWORD_REMINDER").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceForgetPassword(this.dataModelforgetPasswordByEmail).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.The_activation_code_was_emailed_to_you").subscribe(i=>{this.cmsToastrService.typeSuccessMessage(i)}),this.forgetState="entrycode"):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.formInfo.buttonSubmittedEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.buttonSubmittedEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onActionSubmitEntryPinCode(){this.formInfo.buttonSubmittedEnabled=!1,this.errorState=0,this.dataModelforgetPasswordEntryPinCode.captchaKey=this.captchaModel.key;let a=this.constructor.name+".ServiceForgetPasswordEntryPinCode";this.translate.get("MESSAGE.Check_the_code_on_the_server").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceForgetPasswordEntryPinCode(this.dataModelforgetPasswordEntryPinCode).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.Your_password_was_changed_successfully").subscribe(i=>{this.cmsToastrService.typeSuccessMessage(i)}),setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate(["/"])},1e3)):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.formInfo.buttonSubmittedEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.buttonSubmittedEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}passwordValid(a){this.passwordIsValid=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModelforgetPasswordBySms.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{this.captchaModel=e.item,this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}changeforgetState(a){this.forgetState=a}};Ce.\u0275fac=function(e){return new(e||Ce)(b(U),b(N),b(F),b(D),b(R),b(H),b(ce))},Ce.\u0275cmp=P({type:Ce,selectors:[["app-auth-forgot-password"]],standalone:!1,decls:22,vars:20,consts:[["formError",""],["vformBySms","ngForm"],["Mobile",""],["captchaText",""],["vformByEmail","ngForm"],["email",""],["vformEntryCode","ngForm"],["ActivateCode",""],["newPassword",""],["RePassword",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"font-600","color-highlight","mb-0"],["class","form fv-plugins-bootstrap fv-plugins-framework","novalidate","novalidate","id","kt_login_forgot_form",3,"ngStyle","ngSubmit",4,"ngIf"],[1,"row","pt-3","mb-0"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"],["novalidate","novalidate","id","kt_login_forgot_form",1,"form","fv-plugins-bootstrap","fv-plugins-framework",3,"ngSubmit","ngStyle"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-at"],["type","text","name","dataModelforgetPasswordBySms.mobile","id","dataModelforgetPasswordBySms.mobile","autocomplete","off","minlength","5","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordBySms.mobile",1,"color-highlight","font-11","font-500"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],[4,"ngIf"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left"],["name","dataModelforgetPasswordBySms.captchaText","id","dataModelforgetPasswordBySms.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordBySms.captchaText",1,"color-highlight"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"click","disabled"],["type","email","name","dataModelforgetPasswordByEmail.email","id","dataModelforgetPasswordByEmail.email","autocomplete","off","minlength","5","maxlength","50","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordByEmail.email",1,"color-highlight","font-11","font-500"],["name","dataModelforgetPasswordByEmail.captchaText","id","dataModelforgetPasswordByEmail.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordByEmail.captchaText",1,"color-highlight"],["name","dataModelforgetPasswordEntryPinCode.activateCode","type","text","autocomplete","off","id","dataModelforgetPasswordEntryPinCode.activateCode","minlength","3","maxlength","5","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordEntryPinCode.activateCode",1,"color-highlight","font-11","font-500"],[1,"fa","fa-lock"],["name","dataModelforgetPasswordEntryPinCode.newPassword","id","dataModelforgetPasswordEntryPinCode.newPassword","type","password","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordEntryPinCode.newPassword",1,"color-highlight","font-11","font-500"],[3,"passwordStrength","passwordToCheck"],["type","password","id","RePassword","name","RePasswordModel","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",3,"ngModelChange","placeholder","ngModel","disabled"],["for","RePassword",1,"color-highlight"],["name","dataModelforgetPasswordEntryPinCode.captchaText","id","dataModelforgetPasswordEntryPinCode.captchaText","type","text","autocomplete","off","minlength","4","maxlength","10","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordEntryPinCode.captchaText",1,"color-highlight"],[1,"fv-plugins-message-container"],[1,"fv-help-block"]],template:function(e,i){e&1&&(r(0,"div",10),u(1,"app-progress-spinner",11),r(2,"p",12),m(3),s(4,"translate"),n(),r(5,"p"),m(6),s(7,"translate"),n(),C(8,jt,39,39,"form",13)(9,zt,39,39,"form",13)(10,ei,72,71,"form",13)(11,ii,1,1,"ng-template",null,0,Ue),r(13,"div",14)(14,"div",15)(15,"a",16),m(16),s(17,"translate"),n()(),r(18,"div",17)(19,"a",16),m(20),s(21,"translate"),n()()()()),e&2&&(t(),p("optionsInfoAreaId",i.constructorInfoAreaId),t(2),h(l(4,10,"AUTH.Account.Reset")),t(3),S(" ",l(7,12,"AUTH.FORGOT.DESCSMS")," "),t(2),p("ngIf",i.forgetState==="sms"),t(),p("ngIf",i.forgetState==="email"),t(),p("ngIf",i.forgetState==="entrycode"),t(5),p("routerLink",O(18,Gt)),t(),h(l(17,14,"AUTH.REGISTER.RETURN_TO_LOGIN")),t(3),p("routerLink",O(19,Lt)),t(),h(l(21,16,"AUTH.GENERAL.SIGNUP_BUTTON")))},dependencies:[K,Ne,Z,Y,z,Q,$,ee,te,X,J,ge,ie,ne,L,Ut,re,G],styles:["[_nghost-%COMP%]{width:100%}@media (min-width: 992px){[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%;max-width:450px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}}"]});var We=Ce;var kt=d=>({display:d}),ni=()=>["/auth/singin"],oi=()=>["/auth/singup"];function ai(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.SINGINBYSMS.MOBILE")," "),t(3),h(l(5,4,"MESSAGE.required")))}function si(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),h(l(5,4,"MESSAGE.required")))}function li(d,a){if(d&1){let e=A();r(0,"form",11,1),v("ngSubmit",function(){_(e);let o=g();return I(o.onActionSubmitOrderCodeBySms())}),r(2,"div",12),u(3,"i",13),r(4,"input",14,2),s(6,"translate"),w("ngModelChange",function(o){_(e);let c=g();return M(c.dataModelAuthUserSignInBySms.mobile,o)||(c.dataModelAuthUserSignInBySms.mobile=o),I(o)}),n(),r(7,"label",15),m(8),s(9,"translate"),n(),u(10,"i",16)(11,"i",17),C(12,ai,6,6,"mat-error",18),n(),r(13,"img",19),v("click",function(){_(e);let o=g();return I(o.onCaptchaOrder())}),n(),r(14,"mat-icon",20),v("click",function(){_(e);let o=g();return I(o.onCaptchaOrder())}),m(15,"refresh"),n(),r(16,"div",12),u(17,"i",21),r(18,"input",22,3),s(20,"translate"),w("ngModelChange",function(o){_(e);let c=g();return M(c.dataModelAuthUserSignInBySms.captchaText,o)||(c.dataModelAuthUserSignInBySms.captchaText=o),I(o)}),n(),r(21,"label",23),m(22),s(23,"translate"),n(),u(24,"i",16)(25,"i",17),C(26,si,6,6,"mat-error",18),n(),r(27,"button",24),m(28),s(29,"translate"),n(),u(30,"br"),n()}if(d&2){let e=T(1),i=T(5),o=T(19),c=g();p("ngStyle",pe(27,kt,c.errorState===c.errorStates.NoError?"none":"block")),t(4),p("placeholder",y(l(6,17,"AUTH.SINGINBYSMS.MOBILE"))),x("ngModel",c.dataModelAuthUserSignInBySms.mobile),p("disabled",!c.formInfo.buttonSubmittedEnabled),t(4),h(l(9,19,"AUTH.SINGINBYSMS.MOBILE")),t(4),p("ngIf",i.errors==null?null:i.errors.required),t(),p("src",y(c.captchaModel.image),k),t(5),p("placeholder",y(l(20,21,"AUTH.INPUT.CAPTCHACODE"))),x("ngModel",c.dataModelAuthUserSignInBySms.captchaText),p("disabled",!c.formInfo.buttonSubmittedEnabled),t(4),h(l(23,23,"AUTH.INPUT.CAPTCHACODE")),t(4),p("ngIf",o.errors==null?null:o.errors.required),t(),p("disabled",e.invalid||!c.formInfo.buttonSubmittedEnabled||!c.connectionStatus.internetConnection),t(),S(" ",l(29,25,"AUTH.SINGINBYSMS.SEND_PIN_CODE")," ")}}function ci(d,a){if(d&1){let e=A();r(0,"img",19),v("click",function(){_(e);let o=g(2);return I(o.onCaptchaOrder())}),n()}if(d&2){let e=g(2);p("src",y(e.captchaModel.image),k)}}function di(d,a){if(d&1){let e=A();r(0,"mat-icon",20),v("click",function(){_(e);let o=g(2);return I(o.onCaptchaOrder())}),m(1,"refresh"),n()}}function pi(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),h(l(5,4,"MESSAGE.required")))}function mi(d,a){if(d&1){let e=A();r(0,"div",12),u(1,"i",21),r(2,"input",33,3),s(4,"translate"),w("ngModelChange",function(o){_(e);let c=g(2);return M(c.dataModelAuthUserSignInBySms.captchaText,o)||(c.dataModelAuthUserSignInBySms.captchaText=o),I(o)}),n(),r(5,"label",23),m(6),s(7,"translate"),n(),u(8,"i",16)(9,"i",17),C(10,pi,6,6,"mat-error",18),n()}if(d&2){let e=T(3),i=g(2);t(2),p("placeholder",y(l(4,6,"AUTH.INPUT.CAPTCHACODE"))),x("ngModel",i.dataModelAuthUserSignInBySms.captchaText),p("disabled",!i.formInfo.buttonSubmittedEnabled),t(4),h(l(7,8,"AUTH.INPUT.CAPTCHACODE")),t(4),p("ngIf",e.errors==null?null:e.errors.required)}}function ui(d,a){if(d&1&&(r(0,"button",24),m(1),s(2,"translate"),n()),d&2){g();let e=T(1),i=g();p("disabled",e.invalid||!i.formInfo.buttonSubmittedEnabled||!i.connectionStatus.internetConnection||!i.dataModelAuthUserSignInBySms.code||i.dataModelAuthUserSignInBySms.code.length<4),t(),S(" ",l(2,2,"AUTH.SINGINBYSMS.LOGIN")," ")}}function fi(d,a){if(d&1){let e=A();r(0,"button",34),v("click",function(){_(e);let o=g(2);return I(o.onActionSubmitOrderCodeBySms())}),m(1),s(2,"translate"),n()}if(d&2){let e=g(2);p("disabled",e.buttonnResendSmsDisable||!e.connectionStatus.internetConnection),t(),Re(" ",l(2,3,"AUTH.LOGIN.RESEND_SMS")," ",e.prorocess==null?null:e.prorocess.message," ")}}function hi(d,a){if(d&1&&u(0,"progress",35),d&2){let e=g(2);p("max",y(e.prorocess.progressBarMaxValue))("value",e.prorocess.progressBarValue)}}function Si(d,a){if(d&1){let e=A();r(0,"form",11,4),v("ngSubmit",function(){_(e);let o=g();return I(o.onActionSubmitEntryPinCode())}),r(2,"p"),m(3),s(4,"translate"),n(),r(5,"div",25)(6,"ng-otp-input",26,5),v("onInputChange",function(o){_(e);let c=g();return I(c.onOtpChange(o))}),n()(),C(8,ci,1,2,"img",27)(9,di,2,0,"mat-icon",28)(10,mi,11,10,"div",29)(11,ui,3,4,"button",30)(12,fi,3,5,"button",31)(13,hi,1,3,"progress",32),n()}if(d&2){let e=g();p("ngStyle",pe(11,kt,e.errorState===e.errorStates.NoError?"none":"block")),t(3),S(" ",l(4,9,"AUTH.ENTER_RECEIVED_NUMBER")," "),t(3),p("config",e.otpConfig),t(2),p("ngIf",e.diffSeconds<0),t(),p("ngIf",e.diffSeconds<0),t(),p("ngIf",e.diffSeconds<0),t(),p("ngIf",!e.onNavigate),t(),p("ngIf",!e.onNavigate),t(),p("ngIf",(e.prorocess==null?null:e.prorocess.progressBarValue)>0&&e.buttonnResendSmsDisable)}}function gi(d,a){if(d&1&&(W(0),r(1,"div",36)(2,"div",37),m(3),n()(),q()),d&2){let e=g().message;t(3),S(" ",e," ")}}function bi(d,a){if(d&1&&C(0,gi,4,1,"ng-container",18),d&2){let e=a.control,i=a.validation;p("ngIf",e.hasError(i)&&(e.dirty||e.touched))}}function _i(d,a){d&1&&(r(0,"div",38)(1,"div",39)(2,"a",40),m(3),s(4,"translate"),n()(),r(5,"div",41)(6,"a",40),m(7),s(8,"translate"),n()()()),d&2&&(t(2),p("routerLink",O(8,ni)),t(),h(l(4,4,"AUTH.REGISTER.RETURN_TO_LOGIN")),t(3),p("routerLink",O(9,oi)),t(),h(l(8,6,"AUTH.GENERAL.SIGNUP_BUTTON")))}var Vt=(i=>(i[i.NotSubmitted=0]="NotSubmitted",i[i.HasError=1]="HasError",i[i.NoError=2]="NoError",i))(Vt||{}),lt=class{},ye=class ye{constructor(a,e,i,o,c,f,E,B,ct){this.coreAuthService=a;this.cmsToastrService=e;this.translate=i;this.router=o;this.cmsTranslationService=c;this.cmsStoreService=f;this.cdr=E;this.publicHelper=B;this.pageInfo=ct;this.constructorInfoAreaId=this.constructor.name;this.destroyRef=he(Se);this.connectionStatus=new De;this.errorState=0;this.errorStates=Vt;this.dataModelAuthUserSignInBySms=new Bt;this.captchaModel=new oe;this.forgetState="sms";this.countAutoCaptchaOrder=1;this.formInfo=new ae;this.passwordIsValid=!1;this.RePasswordModel="";this.onCaptchaOrderInProcess=!1;this.onNavigate=!1;this.unsubscribe=[];this.buttonnResendSmsDisable=!0;this.otpConfig={allowNumbersOnly:!0,length:4,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputStyles:{width:"50px",height:"50px",margin:"5px"}};this.publicHelper.processService.cdr=this.cdr,this.RePasswordModel="",this.unsubscribe.push(this.cmsStoreService.getState(V=>V.connectionStatusStore).subscribe(V=>j(this,null,function*(){this.connectionStatus=V}))),this.unsubscribe.push(this.cmsStoreService.getState(V=>V.tokenInfoStore).subscribe(V=>j(this,null,function*(){this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.siteId>0&&this.router.navigate(["/dashboard"],{}),this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.router.navigate(["/core/site/selection"],{})})))}ngOnInit(){this.onCaptchaOrder(),this.translate.get("AUTH.SINGINBYSMS.TITLE").subscribe(a=>{this.pageInfo.updateTitle(a)})}onOtpChange(a){this.dataModelAuthUserSignInBySms.code=a}onActionSubmitOrderCodeBySms(){if(this.forgetState=="entrycode"){if(!this.dataModelAuthUserSignInBySms.captchaText||this.dataModelAuthUserSignInBySms.captchaText.length==0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSetCpatcha").subscribe(e=>{this.cmsToastrService.typeWarningMessage(e)});return}this.dataModelAuthUserSignInBySms.code=""}this.formInfo.buttonSubmittedEnabled=!1,this.errorState=0,this.dataModelAuthUserSignInBySms.captchaKey=this.captchaModel.key,this.dataModelAuthUserSignInBySms.lang=this.cmsTranslationService.getSelectedLanguage;let a=this.constructor.name+".ServiceSigninUserBySMS";this.translate.get("MESSAGE.Send_login_request_with_one_time_password").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceSigninUserBySMS(this.dataModelAuthUserSignInBySms).subscribe({next:e=>{if(e.isSuccess){this.translate.get("MESSAGE.The_login_code_was_texted_with_you").subscribe(o=>{this.cmsToastrService.typeSuccessMessage(o)}),this.forgetState="entrycode",this.prorocess=new lt,this.prorocess.progressBarValue=0,this.prorocess.progressBarMaxValue=60,this.prorocess.message="",this.buttonnResendSmsDisable=!0;var i=this.prorocess.progressBarMaxValue;this.translate.get("MESSAGE.SECONDS").subscribe(o=>{this.downloadTimer=setInterval(()=>{this.prorocess.progressBarValue=this.prorocess.progressBarMaxValue-i,this.prorocess.message="("+i+" "+o+")",i-=1,i<=0&&(this.buttonnResendSmsDisable=!1,this.prorocess.message="",clearInterval(this.downloadTimer)),Promise.resolve().then(()=>this.cdr.detectChanges())},500)})}else this.cmsToastrService.typeErrorMessage(e.errorMessage);this.formInfo.buttonSubmittedEnabled=!0,this.countAutoCaptchaOrder<10&&(!this.captchaModel||this.diffSeconds<2)&&this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.buttonSubmittedEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}ngOnDestroy(){clearInterval(this.downloadTimer),this.diffSecondsSubscribe&&this.diffSecondsSubscribe.unsubscribe(),this.unsubscribe&&this.unsubscribe.forEach(a=>a.unsubscribe())}onActionSubmitEntryPinCode(){this.formInfo.buttonSubmittedEnabled=!1,this.errorState=0,this.dataModelAuthUserSignInBySms.captchaKey=this.captchaModel.key,this.dataModelAuthUserSignInBySms.lang=this.cmsTranslationService.getSelectedLanguage;let a=this.constructor.name+".ServiceSigninUserBySMS";this.translate.get("MESSAGE.Send_login_request_with_one_time_password").subscribe(c=>{this.publicHelper.processService.processStart(a,c,this.constructorInfoAreaId)});let e=+localStorage.getItem("siteId");e>0&&(this.dataModelAuthUserSignInBySms.siteId=e);let i=+localStorage.getItem("ResellerSiteId");i>0&&(this.dataModelAuthUserSignInBySms.resellerSiteId=i);let o=+localStorage.getItem("ResellerUserId");o>0&&(this.dataModelAuthUserSignInBySms.resellerUserId=o),this.coreAuthService.ServiceSigninUserBySMS(this.dataModelAuthUserSignInBySms).subscribe({next:c=>{c.isSuccess?(this.cmsToastrService.typeSuccessLogin(),this.formInfo.buttonSubmittedEnabled=!1,this.coreAuthService.ServiceCurrentToken().subscribe({next:f=>{f.isSuccess&&(this.cmsStoreService.setState({type:be,payload:f.item}),f.item.access.siteId>0?(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate(["/dashboard"])},10)):(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate(["/core/site/selection"])},10)))}})):(this.onCaptchaOrder(),this.cmsToastrService.typeErrorMessage(c.errorMessage)),this.formInfo.buttonSubmittedEnabled=!0,this.publicHelper.processService.processStop(a)},error:c=>{this.cmsToastrService.typeError(c),this.formInfo.buttonSubmittedEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}passwordValid(a){this.passwordIsValid=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.diffSecondsSubscribe&&this.diffSecondsSubscribe.unsubscribe(),this.dataModelAuthUserSignInBySms.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{this.captchaModel=e.item,this.onCaptchaOrderInProcess=!1,this.diffSecondsSubscribe=dt(500).subscribe(i=>{this.diffSeconds=new Date(this.captchaModel.expire).getTime()-new Date().getTime(),this.diffSeconds<0&&this.countAutoCaptchaOrder<10&&(this.diffSecondsSubscribe.unsubscribe(),this.onCaptchaOrder())}),this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}changeforgetState(a){this.forgetState=a}};ye.\u0275fac=function(e){return new(e||ye)(b(U),b(N),b(F),b(D),b(le),b(se),b(R),b(H),b(ce))},ye.\u0275cmp=P({type:ye,selectors:[["app-auth-singin-bysms"]],standalone:!1,decls:13,vars:10,consts:[["formError",""],["vformBySms","ngForm"],["Mobile",""],["captchaText",""],["vformEntryCode","ngForm"],["ngOtpInput",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"font-600","color-highlight","mb-0"],["class","form fv-plugins-bootstrap fv-plugins-framework","novalidate","novalidate","id","kt_login_forgot_form",3,"ngStyle","ngSubmit",4,"ngIf"],["class","row pt-3 mb-0",4,"ngIf"],["novalidate","novalidate","id","kt_login_forgot_form",1,"form","fv-plugins-bootstrap","fv-plugins-framework",3,"ngSubmit","ngStyle"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-at"],["type","text","name","dataModelAuthUserSignInBySms.mobile","id","dataModelAuthUserSignInBySms.mobile","autocomplete","off","minlength","5","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelAuthUserSignInBySms.mobile",1,"color-highlight","font-11","font-500"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],[4,"ngIf"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left"],["name","dataModelAuthUserSignInBySms.captchaText","id","dataModelAuthUserSignInBySms.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelAuthUserSignInBySms.captchaText",1,"color-highlight"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],[2,"text-align","center"],[3,"onInputChange","config"],["class","mb-3","alt","",3,"src","click",4,"ngIf"],["matSuffix","",3,"click",4,"ngIf"],["class","input-style no-borders has-icon validate-field mb-4",4,"ngIf"],["type","submit","style","width: 100%;","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled",4,"ngIf"],["type","button","style","width: 100%;","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled","click",4,"ngIf"],["style","width: inherit;",3,"value","max",4,"ngIf"],["name","dataModelAuthUserSignInBySms.captchaText","id","dataModelAuthUserSignInBySms.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"click","disabled"],[2,"width","inherit",3,"value","max"],[1,"fv-plugins-message-container"],[1,"fv-help-block"],[1,"row","pt-3","mb-0"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"]],template:function(e,i){e&1&&(r(0,"div",6),u(1,"app-progress-spinner",7),r(2,"p",8),m(3),s(4,"translate"),n(),r(5,"p"),m(6),s(7,"translate"),n(),C(8,li,31,29,"form",9)(9,Si,14,13,"form",9)(10,bi,1,1,"ng-template",null,0,Ue)(12,_i,9,10,"div",10),n()),e&2&&(t(),p("optionsInfoAreaId",i.constructorInfoAreaId),t(2),h(l(4,6,"AUTH.LOGIN.BUTTON")),t(3),S(" ",l(7,8,"AUTH.SINGINBYSMS.DESCSMS")," "),t(2),p("ngIf",i.forgetState==="sms"),t(),p("ngIf",i.forgetState==="entrycode"),t(3),p("ngIf",!i.onNavigate))},dependencies:[K,Ne,Z,Y,z,Q,$,ee,te,X,J,ge,ie,ne,L,re,Nt,G],encapsulation:2});var Ke=ye;var Ii=()=>["/auth/singinbysms"],vi=()=>["/auth/forgot-password"],Ci=()=>["/auth/singup"];function yi(d,a){if(d&1){let e=A();W(0),r(1,"img",24),v("click",function(){_(e);let o=g();return I(o.onCaptchaOrder())}),n(),r(2,"mat-icon",25),v("click",function(){_(e);let o=g();return I(o.onCaptchaOrder())}),m(3,"refresh"),n(),r(4,"div",6),u(5,"i",26),r(6,"input",27),s(7,"translate"),w("ngModelChange",function(o){_(e);let c=g();return M(c.dataModel.captchaText,o)||(c.dataModel.captchaText=o),I(o)}),n(),r(8,"label",28),m(9),s(10,"translate"),n(),u(11,"i",10)(12,"i",11),n(),q()}if(d&2){let e=g();t(),p("src",y(e.captchaModel.image),k),t(5),p("placeholder",y(l(7,7,"AUTH.INPUT.CAPTCHACODE"))),x("ngModel",e.dataModel.captchaText),p("disabled",!e.formInfo.buttonSubmittedEnabled),t(3),h(l(10,9,"AUTH.INPUT.CAPTCHACODE"))}}function Ei(d,a){if(d&1&&(r(0,"button",29),m(1),s(2,"translate"),n()),d&2){let e=g(),i=T(3);p("disabled",i.invalid||!e.formInfo.buttonSubmittedEnabled||!e.connectionStatus.internetConnection),t(),S(" ",l(2,2,"AUTH.LOGIN.BUTTON")," ")}}function Ti(d,a){if(d&1&&(r(0,"button",30),m(1),s(2,"translate"),n()),d&2){let e=g();p("routerLink",O(5,Ii))("disabled",!e.formInfo.buttonSubmittedEnabled||!e.connectionStatus.internetConnection),t(),S(" ",l(2,3,"AUTH.LOGIN.SMS")," ")}}function xi(d,a){d&1&&(r(0,"div",31)(1,"div",32)(2,"a",33),m(3),s(4,"translate"),n()(),r(5,"div",34)(6,"a",33),m(7),s(8,"translate"),n()()()),d&2&&(t(2),p("routerLink",O(8,vi)),t(),h(l(4,4,"AUTH.FORGOT.TITLE")),t(3),p("routerLink",O(9,Ci)),t(),h(l(8,6,"AUTH.GENERAL.SIGNUP_BUTTON")))}function Mi(d,a){d&1&&(W(0),u(1,"div",35),r(2,"a",36),u(3,"i",37),m(4),s(5,"translate"),n(),r(6,"a",38),u(7,"i",39),m(8),s(9,"translate"),n(),r(10,"a",40),u(11,"i",41),m(12),s(13,"translate"),n(),q()),d&2&&(t(4),h(l(5,3,"AUTH.LOGIN_WITH_FACEBOOK")),t(4),h(l(9,5,"AUTH.LOGIN_WITH_TWITTER")),t(4),h(l(13,7,"AUTH.LOGIN_WITH_APPLE")))}var Ee=class Ee{constructor(a,e,i,o,c,f,E,B,ct,V,Li){this.cmsToastrService=a;this.cmsStoreService=e;this.route=i;this.router=o;this.coreAuthService=c;this.cmsTranslationService=f;this.translate=E;this.cdr=B;this.publicHelper=ct;this.pageInfo=V;this.tokenHelper=Li;this.constructorInfoAreaId=this.constructor.name;this.destroyRef=he(Se);this.loadDemoTheme=_e.loadDemoTheme;this.connectionStatus=new De;this.firstRun=!0;this.hidePassword=!0;this.formInfo=new ae;this.dataModel=new Ve;this.captchaModel=new oe;this.countAutoCaptchaOrder=1;this.loginType="email";this.onCaptchaOrderInProcess=!1;this.onNavigate=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.firstRun=!0,this.unsubscribe.push(this.cmsStoreService.getState(fe=>fe.connectionStatusStore).subscribe(fe=>j(this,null,function*(){this.connectionStatus=fe}))),this.unsubscribe.push(this.cmsStoreService.getState(fe=>fe.tokenInfoStore).subscribe(fe=>j(this,null,function*(){this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.siteId>0&&this.router.navigate(["/dashboard"],{}),this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.router.navigate(["/core/site/selection"],{})})))}ngOnInit(){this.onCaptchaOrder(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/",this.firstRun&&(this.dataModel.captchaText="0000"),this.translate.get("AUTH.SINGINBYSMS.TITLE").subscribe(a=>{this.pageInfo.updateTitle(a)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(a=>a.unsubscribe())}onActionSubmit(){this.formInfo.buttonSubmittedEnabled=!1,this.hasError=!1,this.dataModel.captchaKey=this.captchaModel.key,this.dataModel.lang=this.cmsTranslationService.getSelectedLanguage;let a=this.constructor.name+".ServiceSigninUser";this.translate.get("MESSAGE.login_to_user_account").subscribe(i=>{this.publicHelper.processService.processStart(a,i,this.constructorInfoAreaId)});let e=+localStorage.getItem("siteId");e>0&&(this.dataModel.siteId=e),this.coreAuthService.ServiceSigninUser(this.dataModel).subscribe({next:i=>{i.isSuccess?(this.cmsToastrService.typeSuccessLogin(),this.coreAuthService.ServiceCurrentToken().subscribe({next:o=>{o.isSuccess&&(this.cmsStoreService.setState({type:be,payload:o.item}),o.item.access.siteId>0?(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate(["/dashboard"])},10)):(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate(["/core/site/selection"])},10)))}})):(this.firstRun=!1,this.formInfo.buttonSubmittedEnabled=!0,this.cmsToastrService.typeErrorLogin(i.errorMessage),this.onCaptchaOrder()),this.publicHelper.processService.processStop(a)},error:i=>{this.firstRun=!1,this.formInfo.buttonSubmittedEnabled=!0,this.cmsToastrService.typeError(i),this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onloginTypeChange(a){this.loginType=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModel.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{if(e.isSuccess){this.captchaModel=e.item,this.expireDate=e.item.expire;let i=new Date,c=new Date(e.item.expire).getTime()-i.getTime();this.countAutoCaptchaOrder<10&&setTimeout(()=>{this.firstRun||this.onCaptchaOrder()},c)}else this.cmsToastrService.typeErrorGetCpatcha(e.errorMessage);this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}};Ee.\u0275fac=function(e){return new(e||Ee)(b(N),b(se),b(_t),b(D),b(U),b(le),b(F),b(R),b(H),b(ce),b(Fe))},Ee.\u0275cmp=P({type:Ee,selectors:[["app-auth-singin"]],standalone:!1,decls:43,vars:41,consts:[["vform","ngForm"],["Password",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],["novalidate","novalidate","id","kt_login_signin_form",1,"form",3,"ngSubmit"],[1,"font-600","color-highlight","mb-0"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-user"],["name","dataModel.email","id","dataModel.email","type","text","autocomplete","off","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModel.email",1,"color-highlight"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],[1,"fa","fa-lock"],["name","dataModel.password","id","dataModel.password","type","password","autocomplete","off","required","",1,"form-control","validate-password",2,"direction","ltr !important","text-align","center",3,"ngModelChange","type","ngModel","disabled","placeholder"],["for","dataModel.password",1,"color-highlight"],[4,"ngIf"],[1,"form-check","icon-check","text-start","float-start","opacity-50"],["type","checkbox","value","","id","isRemember","name","isRemember",1,"form-check-input",3,"ngModelChange","ngModel"],["for","isRemember",1,"form-check-label","font-13"],[1,"icon-check-1","far","fa-circle","color-gray-dark","font-14"],[1,"icon-check-2","fa","fa-check-circle","font-14","color-highlight"],["type","submit","style","width: 100%;","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled",4,"ngIf"],["type","button","style","width: 100%;","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"routerLink","disabled",4,"ngIf"],["class","row pt-3 mb-3",4,"ngIf"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left"],["name","dataModel.captchaText","id","dataModel.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModel.captchaText",1,"color-highlight"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"routerLink","disabled"],[1,"row","pt-3","mb-3"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"],[1,"divider"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-facebook","mt-4","rounded-s"],[1,"fab","fa-facebook-f","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-twitter","mt-2","rounded-s"],[1,"fab","fa-twitter","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-dark-dark","mt-2","rounded-s"],[1,"fab","fa-apple","text-center"]],template:function(e,i){if(e&1){let o=A();r(0,"div",2),u(1,"app-progress-spinner",3),r(2,"form",4,0),v("ngSubmit",function(){return _(o),I(i.onActionSubmit())}),r(4,"p",5),m(5),s(6,"translate"),n(),r(7,"p"),m(8),s(9,"translate"),n(),r(10,"div",6),u(11,"i",7),r(12,"input",8),s(13,"translate"),s(14,"translate"),w("ngModelChange",function(f){return _(o),M(i.dataModel.email,f)||(i.dataModel.email=f),I(f)}),n(),r(15,"label",9),m(16),s(17,"translate"),s(18,"translate"),n(),u(19,"i",10)(20,"i",11),n(),r(21,"div",6),u(22,"i",12),r(23,"input",13,1),s(25,"translate"),w("ngModelChange",function(f){return _(o),M(i.dataModel.password,f)||(i.dataModel.password=f),I(f)}),n(),r(26,"label",14),m(27),s(28,"translate"),n(),u(29,"i",10)(30,"i",11),n(),C(31,yi,13,11,"ng-container",15),r(32,"div",16)(33,"input",17),w("ngModelChange",function(f){return _(o),M(i.dataModel.isRemember,f)||(i.dataModel.isRemember=f),I(f)}),n(),r(34,"label",18),m(35),s(36,"translate"),n(),u(37,"i",19)(38,"i",20),n(),C(39,Ei,3,4,"button",21)(40,Ti,3,6,"button",22)(41,xi,9,10,"div",23)(42,Mi,14,9,"ng-container",15),n()()}e&2&&(t(),p("optionsInfoAreaId",i.constructorInfoAreaId),t(4),S(" ",l(6,23,"TRANSLATOR.WELCOME")),t(3),S(" ",l(9,25,"TITLE.To_Login_To_your_Account_Enter_Your_Credentials_Below")," "),t(4),p("placeholder",ht("",l(13,27,"AUTH.INPUT.MOBILE")," / ",l(14,29,"AUTH.INPUT.EMAIL"))),x("ngModel",i.dataModel.email),p("disabled",!i.formInfo.buttonSubmittedEnabled),t(4),Re("",l(17,31,"AUTH.INPUT.MOBILE")," / ",l(18,33,"AUTH.INPUT.EMAIL")),t(7),p("placeholder",y(l(25,35,"AUTH.INPUT.PASSWORD")))("type",i.hidePassword?"password":"text"),x("ngModel",i.dataModel.password),p("disabled",!i.formInfo.buttonSubmittedEnabled),t(4),h(l(28,37,"AUTH.INPUT.PASSWORD")),t(4),p("ngIf",!i.firstRun),t(2),x("ngModel",i.dataModel.isRemember),t(2),h(l(36,39,"TITLE.remember_me")),t(4),p("ngIf",!i.onNavigate),t(),p("ngIf",!i.onNavigate),t(),p("ngIf",!i.onNavigate),t(),p("ngIf",i.loadDemoTheme))},dependencies:[K,Z,Y,He,z,Q,$,ee,te,X,J,ie,ne,L,re,G],encapsulation:2});var Ye=Ee;var Te=class Te{constructor(a,e){this.authService=a;this.cmsToastrService=e;this.constructorInfoAreaId=this.constructor.name;this.authService.ServiceLogout().subscribe({next:i=>{i.isSuccess?this.cmsToastrService.typeSuccessLogout():this.cmsToastrService.typeErrorMessage(i.errorMessage)}})}ngOnInit(){}};Te.\u0275fac=function(e){return new(e||Te)(b(U),b(N))},Te.\u0275cmp=P({type:Te,selectors:[["app-auth-singout"]],standalone:!1,decls:3,vars:0,consts:[[1,"card","card-style"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"p"),m(2,"logout works!"),n()())},encapsulation:2});var ze=Te;var xe=class xe{constructor(a,e,i,o,c){this.coreConfigurationService=a;this.cmsToastrService=e;this.cdr=i;this.publicHelper=o;this.translate=c;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new xt;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){let a=this.constructor.name+"ServiceUserMembershipRule";this.translate.get("MESSAGE.get_the_rules").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreConfigurationService.ServiceUserMembershipRule().subscribe({next:e=>{e.isSuccess?this.dataModelResult=e:this.cmsToastrService.typeErrorGetOne(e.errorMessage),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeErrorGetOne(e),this.publicHelper.processService.processStop(a,!1)}})}};xe.\u0275fac=function(e){return new(e||xe)(b(ke),b(N),b(R),b(H),b(F))},xe.\u0275cmp=P({type:xe,selectors:[["app-auth-singup-rule"]],standalone:!1,decls:13,vars:12,consts:[["mat-dialog-title",""],[3,"optionsInfoAreaId"],[3,"innerHTML"],[1,"ntk-button-row",2,"text-align","left"],["type","button","mat-dialog-close","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red"],["type","button","cdkFocusInitial","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"mat-dialog-close"]],template:function(e,i){e&1&&(r(0,"h2",0),m(1),s(2,"translate"),n(),r(3,"mat-dialog-content"),u(4,"app-progress-spinner",1)(5,"div",2),n(),r(6,"mat-dialog-actions",3)(7,"button",4),m(8),s(9,"translate"),n(),r(10,"button",5),m(11),s(12,"translate"),n()()),e&2&&(t(),h(l(2,6,"TITLE.rules")),t(3),p("optionsInfoAreaId",i.constructorInfoAreaId),t(),p("innerHTML",i.dataModelResult.item,pt),t(3),h(l(9,8,"ACTION.DENY")),t(2),p("mat-dialog-close",!0),t(),h(l(12,10,"ACTION.ACCEPT")))},dependencies:[Ct,yt,Tt,Et,L,G],encapsulation:2});var Qe=xe;var Ai=["vform"],Pi=()=>["/auth/singin"],Bi=()=>["/auth/forgot-password"];function Oi(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.INPUT.FIRSTNAME")," "),t(3),h(l(5,4,"MESSAGE.required")))}function Ri(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.INPUT.LASTNAME")," "),t(3),h(l(5,4,"MESSAGE.required")))}function Ui(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.INPUT.EMAIL")," "),t(3),h(l(5,4,"MESSAGE.required")))}function Ni(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.INPUT.PASSWORD")," "),t(3),h(l(5,4,"MESSAGE.required")))}function Hi(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),r(3,"strong"),m(4),s(5,"translate"),n()()),d&2&&(t(),S(" ",l(2,2,"AUTH.INPUT.CONFIRM_PASSWORD")," "),t(3),h(l(5,4,"MESSAGE.required")))}function ki(d,a){d&1&&(r(0,"mat-error"),m(1),s(2,"translate"),n()),d&2&&(t(),S(" ",l(2,1,"MESSAGE.Password_and_password_confirmation_are_different")," "))}function Vi(d,a){if(d&1&&(r(0,"button",40),m(1),s(2,"translate"),n()),d&2){let e=g(),i=T(3);p("disabled",!e.roulaccespt||i.invalid||!e.formInfo.buttonSubmittedEnabled),t(),S(" ",l(2,2,"AUTH.REGISTER.CREATE_AN_ACCOUNT")," ")}}function Di(d,a){d&1&&(r(0,"div",41)(1,"div",42)(2,"a",43),m(3),s(4,"translate"),n()(),r(5,"div",44)(6,"a",43),m(7),s(8,"translate"),n()()()),d&2&&(t(2),p("routerLink",O(8,Pi)),t(),h(l(4,4,"AUTH.REGISTER.RETURN_TO_LOGIN")),t(3),p("routerLink",O(9,Bi)),t(),h(l(8,6,"AUTH.FORGOT.TITLE")))}function Fi(d,a){d&1&&(W(0),u(1,"div",39),r(2,"a",45),u(3,"i",46),m(4),s(5,"translate"),n(),r(6,"a",47),u(7,"i",48),m(8),s(9,"translate"),n(),r(10,"a",49),u(11,"i",50),m(12),s(13,"translate"),n(),q()),d&2&&(t(4),h(l(5,3,"AUTH.LOGIN_WITH_FACEBOOK")),t(4),h(l(9,5,"AUTH.LOGIN_WITH_TWITTER")),t(4),h(l(13,7,"AUTH.LOGIN_WITH_APPLE")))}var Me=class Me{constructor(a,e,i,o,c,f,E,B,ct){this.cmsToastrService=a;this.router=e;this.coreAuthService=i;this.dialog=o;this.cdr=c;this.publicHelper=f;this.translate=E;this.pageInfo=B;this.cmsStoreService=ct;this.constructorInfoAreaId=this.constructor.name;this.unsubscribe=[];this.formInfo=new ae;this.roulaccespt="";this.captchaModel=new oe;this.countAutoCaptchaOrder=1;this.passwordIsValid=!1;this.dataModel=new Pt;this.onCaptchaOrderInProcess=!1;this.RePasswordModel="";this.PasswordView=!1;this.loginAuto=!0;this.hidePassword=!0;this.loadDemoTheme=_e.loadDemoTheme;this.onNavigate=!1;this.publicHelper.processService.cdr=this.cdr,this.unsubscribe.push(this.cmsStoreService.getState(V=>V.tokenInfoStore).subscribe(V=>j(this,null,function*(){this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.siteId>0&&this.router.navigate(["/dashboard"],{}),this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.router.navigate(["/core/site/selection"],{})})))}ngOnInit(){this.onCaptchaOrder(),this.translate.get("AUTH.REGISTER.SIGNUP").subscribe(a=>{this.pageInfo.updateTitle(a)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(a=>a.unsubscribe())}onActionSubmit(){if(!this.dataModel.email||this.dataModel.email.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_your_email_address").subscribe(c=>{this.formInfo.formError=c,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorRegistery(this.formInfo.formError)});return}if(!this.dataModel.name||this.dataModel.name.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_your_name").subscribe(c=>{this.formInfo.formError=c,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorRegistery(this.formInfo.formError)});return}if(!this.dataModel.family||this.dataModel.family.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_your_last_name").subscribe(c=>{this.formInfo.formError=c,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorRegistery(this.formInfo.formError)});return}if(!this.dataModel.password||this.dataModel.password.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_the_password").subscribe(c=>{this.formInfo.formError=c,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorRegistery(this.formInfo.formError)});return}if(!this.RePasswordModel||this.RePasswordModel.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.re_enter_the_password").subscribe(c=>{this.formInfo.formError=c,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorRegistery(this.formInfo.formError)});return}if(!this.dataModel.captchaText||this.dataModel.captchaText.length===0){this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorRegistery(this.formInfo.formError);return}if(this.dataModel.password!==this.RePasswordModel){this.translate.get("ERRORMESSAGE.MESSAGE.password_and_re_password_are_different").subscribe(c=>{this.formInfo.formError=c,this.dataModel.password="",this.RePasswordModel="",this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorRegistery(this.formInfo.formError)});return}this.formInfo.formErrorStatus=!1,this.dataModel.captchaKey=this.captchaModel.key;let a=this.constructor.name+".ServiceSignupUser";this.translate.get("MESSAGE.Creating_new_account").subscribe(c=>{this.publicHelper.processService.processStart(a,c,this.constructorInfoAreaId)});let e=+localStorage.getItem("siteId");e>0&&(this.dataModel.siteId=e);let i=+localStorage.getItem("ResellerSiteId");i>0&&(this.dataModel.resellerSiteId=i);let o=+localStorage.getItem("ResellerUserId");o>0&&(this.dataModel.resellerUserId=o),this.coreAuthService.ServiceSignupUser(this.dataModel).subscribe({next:c=>{if(c.isSuccess){if(this.cmsToastrService.typeSuccessRegistery(),this.formInfo.formErrorStatus=!1,this.loginAuto||setTimeout(()=>this.router.navigate(["/"]),500),this.loginAuto){let f=new Ve;f.captchaKey=this.dataModel.captchaKey,f.captchaText=this.dataModel.captchaText,f.email=this.dataModel.email,f.password=this.dataModel.password,f.siteId=this.dataModel.siteId,f.mobile=this.dataModel.mobile;let E=this.constructor.name+"ServiceSigninUser";this.translate.get("MESSAGE.login_to_user_account").subscribe(B=>{this.publicHelper.processService.processStart(a,B,this.constructorInfoAreaId)}),this.coreAuthService.ServiceSigninUser(f).subscribe({next:B=>{B.isSuccess?(this.cmsToastrService.typeSuccessLogin(),this.cmsStoreService.setState({type:be,payload:c.item}),c.item.access.siteId>0?(this.onNavigate=!0,this.router.navigate(["/dashboard"])):(this.onNavigate=!0,this.router.navigate(["/core/site/selection"]))):(this.formInfo.buttonSubmittedEnabled=!0,this.cmsToastrService.typeErrorLogin(B.errorMessage),setTimeout(()=>this.router.navigate(["/"]),500)),this.publicHelper.processService.processStop(E)},error:B=>{this.formInfo.buttonSubmittedEnabled=!0,this.cmsToastrService.typeError(B),this.publicHelper.processService.processStop(E)}})}}else this.cmsToastrService.typeErrorRegistery(c.errorMessage),this.formInfo.buttonSubmittedEnabled=!0,this.formInfo.formErrorStatus=!0,this.onCaptchaOrder();this.publicHelper.processService.processStop(a)},error:c=>{this.cmsToastrService.typeError(c),this.formInfo.formErrorStatus=!0,this.formInfo.buttonSubmittedEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onRoulaccespt(){if(this.roulaccespt)return;this.dialog.open(Qe,{height:"90%",width:"90%"}).afterClosed().subscribe(e=>{this.roulaccespt=e})}passwordValid(a){this.passwordIsValid=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModel.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{if(e.isSuccess){this.captchaModel=e.item,this.expireDate=e.item.expire;let i=new Date,c=new Date(e.item.expire).getTime()-i.getTime();this.countAutoCaptchaOrder<10&&(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,setTimeout(()=>{this.onCaptchaOrder()},c))}else this.cmsToastrService.typeErrorGetCpatcha(e.errorMessage);this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}ActionPasswordGenerator(){let a="0123456789abcdefghijklmnopqrstuvwxyz",i="";for(let o=0;o<=10;o++){let c=Math.floor(Math.random()*a.length);i+=a.substring(c,c+1)}this.dataModel.password=i,this.RePasswordModel=i,this.PasswordView=!0}};Me.\u0275fac=function(e){return new(e||Me)(b(N),b(D),b(U),b(vt),b(R),b(H),b(F),b(ce),b(se))},Me.\u0275cmp=P({type:Me,selectors:[["app-auth-singup"]],viewQuery:function(e,i){if(e&1&&mt(Ai,5),e&2){let o;ut(o=ft())&&(i.formGroup=o.first)}},standalone:!1,decls:107,vars:94,consts:[["vform","ngForm"],["Name",""],["family",""],["email",""],["password",""],["RePassword",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"form","form-horizontal",3,"ngSubmit"],[1,"font-600","color-highlight","mb-0"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-user"],["type","name","id","dataModel.name","name","dataModel.name","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.name",1,"color-highlight"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],[4,"ngIf"],["type","name","id","dataModel.family","name","dataModel.family","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.family",1,"color-highlight"],[1,"fa","fa-at"],["type","email","id","dataModel.email","name","dataModel.email","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.email",1,"color-highlight"],[1,"fa","fa-lock"],["type","password","id","dataModel.password","name","dataModel.password","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.password",1,"color-highlight"],["type","password","id","RePassword","name","RePasswordModel","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","RePassword",1,"color-highlight"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left"],["name","dataModel.captchaText","id","dataModel.captchaText","type","text","autocomplete","off","required","","minlength","5","maxlength","5",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModel.captchaText",1,"color-highlight"],[1,"form-check","icon-check","text-start","float-start","opacity-50"],["type","checkbox","id","roulaccespt","name","roulaccespt",1,"form-check-input",3,"ngModelChange","ngModel"],["for","roulaccespt",1,"form-check-label","font-13",3,"click"],[1,"icon-check-1","far","fa-circle","color-gray-dark","font-14"],[1,"icon-check-2","fa","fa-check-circle","font-14","color-highlight"],["type","submit","style","width: 100%;","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"disabled",4,"ngIf"],["class","row pt-3 mb-3",4,"ngIf"],[1,"divider"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],[1,"row","pt-3","mb-3"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-facebook","mt-4","rounded-s"],[1,"fab","fa-facebook-f","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-twitter","mt-2","rounded-s"],[1,"fab","fa-twitter","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-dark-dark","mt-2","rounded-s"],[1,"fab","fa-apple","text-center"]],template:function(e,i){if(e&1){let o=A();r(0,"div",6),u(1,"app-progress-spinner",7),r(2,"form",8,0),v("ngSubmit",function(){return _(o),I(i.onActionSubmit())}),r(4,"p",9),m(5),s(6,"translate"),n(),r(7,"p"),m(8),s(9,"translate"),n(),r(10,"div",10),u(11,"i",11),r(12,"input",12,1),s(14,"translate"),w("ngModelChange",function(f){return _(o),M(i.dataModel.name,f)||(i.dataModel.name=f),I(f)}),n(),r(15,"label",13),m(16),s(17,"translate"),n(),u(18,"i",14)(19,"i",15),r(20,"em"),m(21),s(22,"translate"),n(),C(23,Oi,6,6,"mat-error",16),n(),r(24,"div",10),u(25,"i",11),r(26,"input",17,2),s(28,"translate"),w("ngModelChange",function(f){return _(o),M(i.dataModel.family,f)||(i.dataModel.family=f),I(f)}),n(),r(29,"label",18),m(30),s(31,"translate"),n(),u(32,"i",14)(33,"i",15),r(34,"em"),m(35),s(36,"translate"),n(),C(37,Ri,6,6,"mat-error",16),n(),r(38,"div",10),u(39,"i",19),r(40,"input",20,3),s(42,"translate"),w("ngModelChange",function(f){return _(o),M(i.dataModel.email,f)||(i.dataModel.email=f),I(f)}),n(),r(43,"label",21),m(44),s(45,"translate"),n(),u(46,"i",14)(47,"i",15),r(48,"em"),m(49),s(50,"translate"),n(),C(51,Ui,6,6,"mat-error",16),n(),r(52,"div",10),u(53,"i",22),r(54,"input",23,4),s(56,"translate"),w("ngModelChange",function(f){return _(o),M(i.dataModel.password,f)||(i.dataModel.password=f),I(f)}),n(),r(57,"label",24),m(58),s(59,"translate"),n(),u(60,"i",14)(61,"i",15),r(62,"em"),m(63),s(64,"translate"),n(),C(65,Ni,6,6,"mat-error",16),n(),r(66,"div",10),u(67,"i",22),r(68,"input",25,5),s(70,"translate"),w("ngModelChange",function(f){return _(o),M(i.RePasswordModel,f)||(i.RePasswordModel=f),I(f)}),n(),r(71,"label",26),m(72),s(73,"translate"),n(),u(74,"i",14)(75,"i",15),r(76,"em"),m(77),s(78,"translate"),n(),C(79,Hi,6,6,"mat-error",16)(80,ki,3,3,"mat-error",16),n(),r(81,"img",27),v("click",function(){return _(o),I(i.onCaptchaOrder())}),n(),r(82,"mat-icon",28),v("click",function(){return _(o),I(i.onCaptchaOrder())}),m(83,"refresh"),n(),r(84,"div",10),u(85,"i",29),r(86,"input",30),s(87,"translate"),w("ngModelChange",function(f){return _(o),M(i.dataModel.captchaText,f)||(i.dataModel.captchaText=f),I(f)}),n(),r(88,"label",31),m(89),s(90,"translate"),n(),u(91,"i",14)(92,"i",15),r(93,"em"),m(94),s(95,"translate"),n()(),r(96,"div",32)(97,"input",33),w("ngModelChange",function(f){return _(o),M(i.roulaccespt,f)||(i.roulaccespt=f),I(f)}),n(),r(98,"label",34),v("click",function(){return _(o),I(i.onRoulaccespt())}),m(99),s(100,"translate"),n(),u(101,"i",35)(102,"i",36),n(),C(103,Vi,3,4,"button",37)(104,Di,9,10,"div",38),u(105,"div",39),C(106,Fi,14,9,"ng-container",16),n()()}if(e&2){let o=T(13),c=T(27),f=T(41),E=T(55),B=T(69);t(),p("optionsInfoAreaId",i.constructorInfoAreaId),t(4),h(l(6,52,"AUTH.Sign.Up")),t(3),S(" ",l(9,54,"AUTH.REGISTER.DESC")," "),t(4),p("placeholder",y(l(14,56,"AUTH.INPUT.FIRSTNAME"))),x("ngModel",i.dataModel.name),p("disabled",!i.formInfo.buttonSubmittedEnabled),t(4),h(l(17,58,"AUTH.INPUT.FIRSTNAME")),t(5),S("(",l(22,60,"TITLE.Necessary"),")"),t(2),p("ngIf",o.errors==null?null:o.errors.required),t(3),p("placeholder",y(l(28,62,"AUTH.INPUT.LASTNAME"))),x("ngModel",i.dataModel.family),p("disabled",!i.formInfo.buttonSubmittedEnabled),t(4),h(l(31,64,"AUTH.INPUT.LASTNAME")),t(5),S("(",l(36,66,"TITLE.Necessary"),")"),t(2),p("ngIf",c.errors==null?null:c.errors.required),t(3),p("placeholder",y(l(42,68,"AUTH.INPUT.EMAIL"))),x("ngModel",i.dataModel.email),p("disabled",!i.formInfo.buttonSubmittedEnabled),t(4),h(l(45,70,"AUTH.INPUT.EMAIL")),t(5),S("(",l(50,72,"TITLE.Necessary"),")"),t(2),p("ngIf",f.errors==null?null:f.errors.required),t(3),p("placeholder",y(l(56,74,"AUTH.INPUT.PASSWORD"))),x("ngModel",i.dataModel.password),p("disabled",!i.formInfo.buttonSubmittedEnabled),t(4),h(l(59,76,"AUTH.INPUT.PASSWORD")),t(5),S("(",l(64,78,"TITLE.Necessary"),")"),t(2),p("ngIf",E.errors==null?null:E.errors.required),t(3),p("placeholder",y(l(70,80,"AUTH.INPUT.CONFIRM_PASSWORD"))),x("ngModel",i.RePasswordModel),p("disabled",!i.formInfo.buttonSubmittedEnabled),t(4),h(l(73,82,"AUTH.INPUT.CONFIRM_PASSWORD")),t(5),S("(",l(78,84,"TITLE.Necessary"),")"),t(2),p("ngIf",B.errors==null?null:B.errors.required),t(),p("ngIf",(i.RePasswordModel==null?null:i.RePasswordModel.length)>0&&B.value!==E.value),t(),p("src",y(i.captchaModel.image),k),t(5),p("placeholder",y(l(87,86,"AUTH.INPUT.CAPTCHACODE"))),x("ngModel",i.dataModel.captchaText),p("disabled",!i.formInfo.buttonSubmittedEnabled),t(3),h(l(90,88,"AUTH.INPUT.CAPTCHACODE")),t(5),S("(",l(95,90,"TITLE.Necessary"),")"),t(3),x("ngModel",i.roulaccespt),t(2),h(l(100,92,"TITLE.rules_accespt")),t(4),p("ngIf",!i.onNavigate),t(),p("ngIf",!i.onNavigate),t(2),p("ngIf",i.loadDemoTheme)}},dependencies:[K,Z,Y,He,z,Q,$,ee,te,X,J,ge,ie,ne,L,re,G],encapsulation:2});var Je=Me;var Gi=[{path:"",component:Ge,children:[{path:"singin",component:Ye,data:{title:"ROUTE.REGISTER.SIGNIN"}},{path:"singinbysms",component:Ke,data:{title:"ROUTE.REGISTER.SIGNINBYSMS"}},{path:"singout",component:ze,data:{title:"ROUTE.REGISTER.SIGNOUT"}},{path:"singup",component:Je,data:{title:"ROUTE.REGISTER.SIGNUP"}},{path:"forgot-password",component:We,data:{title:"ROUTE.REGISTER.FORGETPASSWORD"}},{path:"",redirectTo:"singinbysms",pathMatch:"full"},{path:"**",redirectTo:"singinbysms",pathMatch:"full"}]}],me=class me{};me.\u0275fac=function(e){return new(e||me)},me.\u0275mod=Oe({type:me}),me.\u0275inj=Be({imports:[$e.forChild(Gi),$e]});var Xe=me;var ue=class ue{};ue.\u0275fac=function(e){return new(e||ue)},ue.\u0275mod=Oe({type:ue}),ue.\u0275inj=Be({providers:[Mt,ke,U,le],imports:[St,Rt,Xe,gt,bt,Ot]});var Dt=ue;export{Dt as AuthModule};
