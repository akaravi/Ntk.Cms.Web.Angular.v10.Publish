import{C as jt,D as Ut,Fa as lt,I as Yt,J as Xt,Ja as ne,P as zt,Pa as re,Q as Kt,Qa as ae,T as Wt,V as at,j as G,k as Pt,ka as qt,la as Qt,m as Dt,ma as Zt,na as Jt,o as Ft,oa as te,p as Vt,pa as ee,q as C,qa as st,r as Bt,s as Ht,t as Gt,ua as oe,v as R,wa as ie,x as Lt,xa as L,y as $t}from"./chunk-MZT2GAV3.js";import{E as Y,F as gt,Fa as m,Fb as et,Gb as ot,H as ft,Hc as Nt,Ib as O,Jb as H,Ka as h,La as vt,Ma as yt,Mb as _,Pa as g,Q as X,Ra as q,Ta as Q,V as z,W as _t,Xa as f,Y as K,Ya as F,Yb as it,_b as nt,a as N,ca as P,cb as V,d as U,da as D,fb as Z,gb as J,ha as Ct,hb as tt,ib as d,jb as c,jc as Et,kb as l,lb as v,lc as Tt,m as ut,ma as W,mb as wt,nb as Mt,oc as S,pc as y,qc as rt,ra as xt,sb as B,tb as kt,ua as bt,ub as St,uc as Ot,vb as u,wb as Rt,x as T,xb as k,yb as It,z as mt,zb as At}from"./chunk-Y22UWZ2R.js";var de=n=>({active:n});function Ce(n,o){if(n&1){let a=B();c(0,"button",2),u("click",function(){let e=P(a).$implicit,i=k();return D(i.select(e))}),l()}if(n&2){let a=o.$implicit,t=k();O("background-color",a),d("ngClass",nt(4,de,t.selectedColor()===a))("disableRipple",!0)}}function xe(n,o){if(n&1){let a=B();c(0,"button",2),u("click",function(){let e=P(a).$implicit,i=k();return D(i.select(e))}),l()}if(n&2){let a=o.$implicit,t=k();O("background-color",a),d("ngClass",nt(4,de,t.selectedColor()===a))("disableRipple",!0)}}var be=["button"],ve=[[["","ngxMatColorpickerToggleIcon",""]]],ye=["[ngxMatColorpickerToggleIcon]"];function we(n,o){if(n&1&&(c(0,"mat-icon"),_(1,"palette"),l()),n&2){let a,t=k();O("color",(a=t.picker())==null||a._selected==null?null:a._selected.rgba)}}var Me=/^\s+/,ke=/\s+$/;var E=Math.round;var I=255;var se=["#ffffff","#ffff00","#ff00ff","#ff0000","#c0c0c0","#808080","#808000","#800080","#800000","#00ffff","#00ff00","#008080","#008000","#0000ff","#000080","#000000"];function pe(n,o,a){let t=n.getImageData(o,a,1,1).data;return{r:t[0],g:t[1],b:t[2]}}function Se(n,o,a,t,e){var i=[M(E(n).toString(16)),M(E(o).toString(16)),M(E(a).toString(16)),M(Re(t))];return e&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function M(n){return n.length==1?"0"+n:""+n}function Re(n){return Math.round(parseFloat(n)*255).toString(16)}function le(n){return p(n)/255}function p(n){return parseInt(n,16)}function ce(n,o,a,t){var e=[M(E(n).toString(16)),M(E(o).toString(16)),M(E(a).toString(16))];return t&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}var Ie="[-\\+]?\\d+%?",Ae="[-\\+]?\\d*\\.\\d+%?",x="(?:"+Ae+")|(?:"+Ie+")",ct="[\\s|\\(]+("+x+")[,|\\s]+("+x+")[,|\\s]+("+x+")\\s*\\)?",ht="[\\s|\\(]+("+x+")[,|\\s]+("+x+")[,|\\s]+("+x+")[,|\\s]+("+x+")\\s*\\)?",w={CSS_UNIT:new RegExp(x),rgb:new RegExp("rgb"+ct),rgba:new RegExp("rgba"+ht),hsl:new RegExp("hsl"+ct),hsla:new RegExp("hsla"+ht),hsv:new RegExp("hsv"+ct),hsva:new RegExp("hsva"+ht),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function pt(n){n=n.replace(Me,"").replace(ke,"").toLowerCase();let o,a;return(o=w.rgb.exec(n))?{r:o[1],g:o[2],b:o[3],a:1}:(o=w.rgba.exec(n))?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=w.hex8.exec(n))?{r:p(o[1]),g:p(o[2]),b:p(o[3]),a:le(o[4])}:(o=w.hex6.exec(n))?{r:p(o[1]),g:p(o[2]),b:p(o[3]),a:1}:(o=w.hex4.exec(n))?{r:p(o[1]+""+o[1]),g:p(o[2]+""+o[2]),b:p(o[3]+""+o[3]),a:le(o[4]+""+o[4])}:(o=w.hex3.exec(n))?{r:p(o[1]+""+o[1]),g:p(o[2]+""+o[2]),b:p(o[3]+""+o[3]),a:1}:null}function Ee(n){return Error(`NgxMatColorPicker: No provider found for ${n}. You must define MAT_COLOR_FORMATS in your module`)}var b=class{constructor(o,a,t,e){this.r=o>I?I:o,this.g=a>I?I:a,this.b=t>I?I:t,e!=null?this.a=e>1?1:e:this.a=1,this.roundA=Math.round(this.a),this.hex=ce(this.r,this.g,this.b),this.rgba=this.toRgba()}toHex(o){return ce(this.r,this.g,this.b,o)}toRgba(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}toHexString(o){return"#"+this.toHex(o)}toRgbString(){return this.a===1?"rgb("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+")":"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.roundA+")"}toHex8(o){return Se(this.r,this.g,this.b,this.a,o)}toHex8String(o){return"#"+this.toHex8(o)}toString(o){let a=!!o,t,e=this.a<1&&this.a>=0;return!a&&e&&(o==="hex"||o==="hex6"||o==="hex3"||o==="hex4"||o==="hex8")?this.toRgbString():(o==="rgb"&&(t=this.toRgbString()),(o==="hex"||o==="hex6")&&(t=this.toHexString()),o==="hex3"&&(t=this.toHexString(!0)),o==="hex4"&&(t=this.toHex8String(!0)),o==="hex8"&&(t=this.toHex8String()),t||this.toHexString())}},ue=(()=>{let o=class o{set setColor(t){this.color.set(t)}constructor(t,e){this.zone=t,this.colorChanged=S(),this.theme=y(),this.color=W(null),this.x=0,this.y=0,this.drag=!1,this._destroyed=new U,this.elementId=e}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}ngAfterViewInit(){this.canvas=document.getElementById(this.elementId),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.draw()}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.rect(0,0,this.width,this.height),this.fillGradient(),this.y!=0&&this.redrawIndicator(this.x,this.y)}onMousedown(t){this.drag=!0,this.changeColor(t),this.zone.runOutsideAngular(()=>{this.canvas.addEventListener("mousemove",this.onMousemove.bind(this))})}onMousemove(t){this.drag&&this.zone.run(()=>{this.changeColor(t)})}onMouseup(t){this.drag=!1,this.canvas.removeEventListener("mousemove",this.onMousemove)}emitChange(t){this.colorChanged.emit(t)}};o.\u0275fac=function(e){vt()},o.\u0275dir=q({type:o,inputs:{theme:[1,"theme"],setColor:[0,"color","setColor"]},outputs:{colorChanged:"colorChanged"}});let n=o;return n})(),Te=(()=>{let o=class o extends ue{constructor(t){super(t,"color-strip"),this.zone=t}ngAfterViewInit(){super.ngAfterViewInit()}fillGradient(){let t=this.ctx.createLinearGradient(0,0,0,this.height);t.addColorStop(0,"rgba(255, 0, 0, 1)"),t.addColorStop(.17,"rgba(255, 255, 0, 1)"),t.addColorStop(.34,"rgba(0, 255, 0, 1)"),t.addColorStop(.51,"rgba(0, 255, 255, 1)"),t.addColorStop(.68,"rgba(0, 0, 255, 1)"),t.addColorStop(.85,"rgba(255, 0, 255, 1)"),t.addColorStop(1,"rgba(255, 0, 0, 1)"),this.ctx.fillStyle=t,this.ctx.fill()}redrawIndicator(t,e){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.arc(7.5,e,7.5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this.draw();let{r:e,g:i,b:r}=pe(this.ctx,t.offsetX,t.offsetY);this.emitChange(new b(e,i,r))}};o.\u0275fac=function(e){return new(e||o)(h(F))},o.\u0275cmp=g({type:o,selectors:[["ngx-mat-color-slider"]],features:[Q],decls:1,vars:0,consts:[["id","color-strip","width","15","height","234",1,"zone-strip",3,"mousedown","mouseup"]],template:function(e,i){e&1&&(wt(0,"canvas",0),Rt("mousedown",function(s){return i.onMousedown(s)})("mouseup",function(s){return i.onMouseup(s)}),Mt())},encapsulation:2});let n=o;return n})(),Oe=5,Ne=(()=>{let o=class o extends ue{get rCtrl(){return this.formGroup.get("r")}get gCtrl(){return this.formGroup.get("g")}get bCtrl(){return this.formGroup.get("b")}get aCtrl(){return this.formGroup.get("a")}get hexCtrl(){return this.formGroup.get("hex")}constructor(t){super(t,"color-block"),this.zone=t,this._resetBaseColor=!0,this.formGroup=new Gt({r:new R(null,[C.required]),g:new R(null,[C.required]),b:new R(null,[C.required]),a:new R(null,[C.required]),hex:new R(null,[C.required,C.pattern(w.hex6)])})}ngOnInit(){T(this.rCtrl.valueChanges,this.gCtrl.valueChanges,this.bCtrl.valueChanges,this.aCtrl.valueChanges).pipe(X(this._destroyed),Y(400)).subscribe(i=>{let r=new b(Number(this.rCtrl.value),Number(this.gCtrl.value),Number(this.bCtrl.value),Number(this.aCtrl.value));this.emitChange(r)}),this.hexCtrl.valueChanges.pipe(X(this._destroyed),Y(400),ft()).subscribe(i=>{let r=pt(i);if(r!=null){let s=new b(r.r,r.g,r.b,r.a);this.emitChange(s)}})}ngOnChanges(t){t.color&&t.color.currentValue&&(this.updateForm(t.color.currentValue),this._resetBaseColor&&(this._baseColor=t.color.currentValue),this._resetBaseColor=!0,t.color.firstChange||this.draw())}updateForm(t){let e={emitEvent:!1};this.rCtrl.setValue(t.r,e),this.gCtrl.setValue(t.g,e),this.bCtrl.setValue(t.b,e),this.aCtrl.setValue(t.a,e),this.hexCtrl.setValue(t.hex,e)}redrawIndicator(t,e){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.arc(t,e,Oe,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}fillGradient(){this.ctx.fillStyle=this._baseColor?this._baseColor.rgba:"rgba(255,255,255,1)",this.ctx.fillRect(0,0,this.width,this.height);let t=this.ctx.createLinearGradient(0,0,this.width,0);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height);let e=this.ctx.createLinearGradient(0,0,0,this.height);e.addColorStop(0,"rgba(0,0,0,0)"),e.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.width,this.height)}onSliderColorChanged(t){this._baseColor=t,this.color.set(t),this.fillGradient(),this.emitChange(t)}changeColor(t){this.x=t.offsetX,this.y=t.offsetY,this._resetBaseColor=!1,this.draw();let{r:e,g:i,b:r}=pe(this.ctx,t.offsetX,t.offsetY);this.emitChange(new b(e,i,r))}};o.\u0275fac=function(e){return new(e||o)(h(F))},o.\u0275cmp=g({type:o,selectors:[["ngx-mat-color-canvas"]],hostAttrs:[1,"ngx-mat-color-canvas"],features:[Q,xt],decls:30,vars:8,consts:[[3,"formGroup"],[1,"color-canvas-row"],[1,"zone-canvas"],["id","color-block","width","200","height","235",1,"zone-block",3,"mousedown","mouseup"],[3,"colorChanged"],[1,"zone-inputs"],[3,"color"],["matInput","","formControlName","r","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","g","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","b","ngxMatNumericColorInput","","autocomplete","off"],["mat-mini-fab","",1,"preview"],["matPrefix","",1,"symbol"],["matInput","","formControlName","hex","autocomplete","off"],[1,"input-opacity",3,"color"],["matInput","","formControlName","a","type","number","min","0","max","1","step","0.1","autocomplete","off"]],template:function(e,i){if(e&1&&(c(0,"form",0)(1,"div",1)(2,"div",2)(3,"canvas",3),u("mousedown",function(s){return i.onMousedown(s)})("mouseup",function(s){return i.onMouseup(s)}),l(),c(4,"ngx-mat-color-slider",4),u("colorChanged",function(s){return i.onSliderColorChanged(s)}),l()(),c(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),_(8,"R"),l(),v(9,"input",7),l(),c(10,"mat-form-field",6)(11,"mat-label"),_(12,"G"),l(),v(13,"input",8),l(),c(14,"mat-form-field",6)(15,"mat-label"),_(16,"B"),l(),v(17,"input",9),l()()(),c(18,"div",1),v(19,"button",10),c(20,"mat-form-field",6)(21,"mat-label"),_(22,"HEX6"),l(),c(23,"mat-label",11),_(24,"#\xA0"),l(),v(25,"input",12),l(),c(26,"mat-form-field",13)(27,"mat-label"),_(28,"A"),l(),v(29,"input",14),l()()()),e&2){let r;d("formGroup",i.formGroup),m(6),d("color",i.theme),m(4),d("color",i.theme),m(4),d("color",i.theme),m(5),O("background-color",((r=i.color())==null?null:r.rgba)||"transparent"),m(),d("color",i.theme),m(6),d("color",i.theme)}},dependencies:[qt,at,Kt,Wt,Jt,Zt,Te,zt,Lt,Ft,$t,Bt,Ht,Xt,Yt,jt,Ut],styles:[`.ngx-mat-color-canvas .color-canvas-row{display:flex}.ngx-mat-color-canvas .color-canvas-row:first-of-type{height:235px;margin-bottom:12px}.ngx-mat-color-canvas .color-canvas-row:first-of-type .card{height:180px}.ngx-mat-color-canvas .color-canvas-row canvas:hover{cursor:crosshair}.ngx-mat-color-canvas .color-canvas-row .zone{display:flex}.ngx-mat-color-canvas .color-canvas-row .zone-canvas{height:235px}.ngx-mat-color-canvas .color-canvas-row .zone-canvas .zone-block{border:1px solid rgba(0,0,0,.12)}.ngx-mat-color-canvas .color-canvas-row .zone-strip{flex-basis:auto;margin-left:10px}.ngx-mat-color-canvas .color-canvas-row .zone-inputs{display:flex;width:60px;height:235px;flex-direction:column;margin-left:16px;margin-top:12px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2){display:flex}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .preview{min-width:40px;min-height:40px;height:40px;width:40px;margin-top:12px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field{margin-left:16px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:first-of-type{width:170px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:first-of-type .symbol{font-weight:700;color:#0000008a}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:last-of-type{width:60px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:last-of-type .mat-mdc-text-field-wrapper{padding:0 8px}.ngx-mat-color-canvas .mat-mdc-form-field-label{font-weight:700}.ngx-mat-color-canvas .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:transparent}
`],encapsulation:2});let n=o;return n})(),Pe=(()=>{let o=class o{constructor(){this.colorChanged=S(),this.selectedColor=W(""),this.colors1=se.slice(0,8),this.colors2=se.slice(8,16)}set color(t){t&&this.selectedColor.set(t.toHexString())}select(t){this.selectedColor.set(t);let{r:e,g:i,b:r,a:s}=pt(t);this.colorChanged.emit(new b(e,i,r,s))}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=g({type:o,selectors:[["ngx-mat-color-collection"]],hostAttrs:[1,"ngx-mat-color-collection"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:6,vars:0,consts:[[1,"color-collection-row"],["mat-mini-fab","",1,"btn-color",3,"background-color","ngClass","disableRipple"],["mat-mini-fab","",1,"btn-color",3,"click","ngClass","disableRipple"]],template:function(e,i){e&1&&(c(0,"div",0),J(1,Ce,1,6,"button",1,Z),l(),c(3,"div",0),J(4,xe,1,6,"button",1,Z),l()),e&2&&(m(),tt(i.colors1),m(3),tt(i.colors2))},dependencies:[st,ee,Nt],styles:[`.ngx-mat-color-collection .btn-color{height:20px;width:20px;margin-right:11px;box-shadow:none;opacity:.3;will-change:opacity;transition:opacity .3s linear}.ngx-mat-color-collection .btn-color.active{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;opacity:1}.ngx-mat-color-collection .btn-color .mat-mdc-button-touch-target{display:none!important}
`],encapsulation:2});let n=o;return n})(),dt=(()=>{let o=class o{constructor(){this.colorChanged=S(),this.color=y(),this.theme=y()}handleColorChanged(t){this.colorChanged.emit(t)}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=g({type:o,selectors:[["ngx-mat-color-palette"]],hostAttrs:[1,"ngx-mat-color-palette"],inputs:{color:[1,"color"],theme:[1,"theme"]},outputs:{colorChanged:"colorChanged"},decls:2,vars:3,consts:[[3,"colorChanged","color","theme"],[3,"colorChanged","color"]],template:function(e,i){e&1&&(c(0,"ngx-mat-color-canvas",0),u("colorChanged",function(s){return i.handleColorChanged(s)}),l(),c(1,"ngx-mat-color-collection",1),u("colorChanged",function(s){return i.handleColorChanged(s)}),l()),e&2&&(d("color",i.color())("theme",i.theme()),m(),d("color",i.color()))},dependencies:[Pe,Ne],styles:[`.ngx-mat-color-palette .actions{margin-top:10px;display:flex}.ngx-mat-color-palette .actions .left{display:flex;flex-direction:column;margin-right:15px}.ngx-mat-color-palette .actions .left .preview{flex:2 1 auto;margin-bottom:10px}.ngx-mat-color-palette .actions .right{display:flex;width:60px;flex-direction:column}
`],encapsulation:2});let n=o;return n})(),$=(()=>{let o=class o{sameColor(t,e){return t==null&&e==null?!0:t!=null&&e!=null?t.rgba===e.rgba:!1}format(t,e){return t.toString(e)}parse(t){let e=pt(t);return e?new b(e.r,e.g,e.b,e.a):null}};o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=_t({token:o,factory:o.\u0275fac});let n=o;return n})(),wo={display:{colorInput:"hex"}},De=new K("mat-color-formats"),me=new K("ngx-mat-colorpicker-scroll-strategy");function Fe(n){return()=>n.scrollStrategies.reposition()}var Ve={provide:me,deps:[L],useFactory:Fe},he=(()=>{let o=class o{constructor(){this._palette=rt(dt)}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=g({type:o,selectors:[["ngx-mat-color-picker-content"]],viewQuery:function(e,i){e&1&&et(i._palette,dt,5),e&2&&ot()},hostAttrs:[1,"ngx-mat-colorpicker-content"],hostVars:3,hostBindings:function(e,i){e&2&&(St("@transformPanel","enter"),H("ngx-mat-colorpicker-content-touch",i.picker.touchUi))},inputs:{color:"color"},exportAs:["ngxMatColorPickerContent"],decls:1,vars:2,consts:[[3,"colorChanged","color","theme"]],template:function(e,i){e&1&&(c(0,"ngx-mat-color-palette",0),u("colorChanged",function(s){return i.picker.select(s)}),l()),e&2&&d("color",i.picker._selected)("theme",i.color)},dependencies:[dt],styles:[`.ngx-mat-colorpicker-content{display:block;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background-color:#fff;color:#000000de;padding:16px}.ngx-mat-colorpicker-content .ngx-mat-color-palette{width:296px;height:354px}.ngx-mat-colorpicker-content-touch{display:block;max-height:80vh;overflow:auto}.ngx-mat-colorpicker-content-touch .ngx-mat-color-palette{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation: landscape){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:80vw;height:100vw}}
`],encapsulation:2,data:{animation:[lt.transformPanel,lt.fadeInCalendar]},changeDetection:0});let n=o;return n})(),Mo=(()=>{let o=class o{get disabled(){return this._disabled===void 0&&this._pickerInput?this._pickerInput.disabled:!!this._disabled}set disabled(t){let e=G(t);e!==this._disabled&&(this._disabled=e,this._disabledChange.next(e))}get touchUi(){return this._touchUi}set touchUi(t){this._touchUi=G(t)}get opened(){return this._opened}set opened(t){t?this.open():this.close()}get defaultColor(){return this._defaultColor}set defaultColor(t){this._defaultColor=t}get color(){return this._color||(this._pickerInput?this._pickerInput.getThemePalette():void 0)}set color(t){this._color=t}get isPrimary(){return this.color==="primary"}get isAccent(){return this.color==="accent"}get isWarn(){return this.color==="warn"}get _selected(){return this._validSelected}set _selected(t){this._validSelected=t}constructor(t,e,i,r,s,j,fe,_e){this._dialog=t,this._overlay=e,this._zone=i,this._adapter=r,this._dir=s,this._document=fe,this._viewContainerRef=_e,this.openedStream=new f,this.closedStream=new f,this._touchUi=!1,this._opened=!1,this._defaultColor="primary",this._validSelected=null,this._disabledChange=new f,this._focusedElementBeforeOpen=null,this._inputSubscription=N.EMPTY,this._selectedChanged=new U,this._scrollStrategy=j}ngOnDestroy(){this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete(),this._popupRef&&(this._popupRef.dispose(),this._popupComponentRef=null)}select(t){let e=this._selected;this._selected=t,this._adapter.sameColor(e,this._selected)||this._selectedChanged.next(t)}registerInput(t){if(this._pickerInput)throw Error("A ColorPicker can only be associated with a single input.");this._pickerInput=t,this._inputSubscription=this._pickerInput._valueChange.subscribe(e=>this._selected=e)}open(){if(!(this._opened||this.disabled)){if(!this._pickerInput)throw Error("Attempted to open an ColorPicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}}_openAsDialog(){this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(he,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"ngx-mat-colorpicker-dialog"}),this._dialogRef.afterClosed().subscribe(()=>this.close()),this._dialogRef.componentInstance.picker=this,this._setColor()}_openAsPopup(){this._portal||(this._portal=new oe(he,this._viewContainerRef)),this._popupRef||this._createPopup(),this._popupRef.hasAttached()||(this._popupComponentRef=this._popupRef.attach(this._portal),this._popupComponentRef.instance.picker=this,this._setColor(),this._zone.onStable.asObservable().pipe(gt(1)).subscribe(()=>{this._popupRef.updatePosition()}))}_createPopup(){let t=new ie({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-colorpicker-popup"});this._popupRef=this._overlay.create(t),this._popupRef.overlayElement.setAttribute("role","dialog"),T(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(mt(e=>e.keyCode===27||this._pickerInput&&e.altKey&&e.keyCode===38))).subscribe(e=>{e&&e.preventDefault(),this.close()})}close(){if(!this._opened)return;this._popupRef&&this._popupRef.hasAttached()&&this._popupRef.detach(),this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._portal&&this._portal.isAttached&&this._portal.detach();let t=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&typeof this._focusedElementBeforeOpen.focus=="function"?(this._focusedElementBeforeOpen.focus(),setTimeout(t)):t()}_setColor(){let t=this.color;this._popupComponentRef&&(this._popupComponentRef.instance.color=t),this._dialogRef&&(this._dialogRef.componentInstance.color=t)}_createPopupPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._pickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".ngx-mat-colorpicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}};o.\u0275fac=function(e){return new(e||o)(h(ne),h(L),h(F),h($),h(Pt,8),h(me),h(Ct,8),h(yt))},o.\u0275cmp=g({type:o,selectors:[["ngx-mat-color-picker"]],hostVars:6,hostBindings:function(e,i){e&2&&H("mat-primary",i.isPrimary)("mat-accent",i.isAccent)("mat-warn",i.isWarn)},inputs:{disabled:"disabled",touchUi:"touchUi",opened:"opened",defaultColor:"defaultColor",color:"color"},outputs:{openedStream:"opened",closedStream:"closed"},exportAs:["ngxMatColorPicker"],features:[it([$,Ve])],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0});let n=o;return n})(),A=class{constructor(o,a){this.target=o,this.targetElement=a,this.value=this.target.value}},Be={provide:Dt,useExisting:z(()=>ge),multi:!0},He={provide:Vt,useExisting:z(()=>ge),multi:!0},ge=(()=>{let o=class o{set ngxMatColorPicker(t){t&&(this._picker=t,this._picker.registerInput(this),this._pickerSubscription.unsubscribe(),this._pickerSubscription=this._picker._selectedChanged.subscribe(e=>{this.value=e,this._cvaOnChange(e),this._onTouched(),this.colorInput.emit(new A(this,this._elementRef.nativeElement)),this.colorChange.emit(new A(this,this._elementRef.nativeElement))}))}get disabled(){return!!this._disabled}set disabled(t){let e=G(t),i=this._elementRef.nativeElement;this._disabled!==e&&(this._disabled=e,this._disabledChange.emit(e)),e&&i.blur&&i.blur()}get value(){return this._value}set value(t){let e=this.value;this._value=t,this._formatValue(t),this._adapter.sameColor(e,t)||this._valueChange.emit(t)}constructor(t,e,i,r){if(this._elementRef=t,this._formField=e,this._colorFormats=i,this._adapter=r,this.colorChange=S(),this.colorInput=S(),this._disabledChange=new f,this._valueChange=new f,this._onTouched=()=>{},this._cvaOnChange=()=>{},this._validatorOnChange=()=>{},this._pickerSubscription=N.EMPTY,this._validator=C.compose([]),this._lastValueValid=!1,!this._colorFormats)throw Ee("MAT_COLOR_FORMATS")}getThemePalette(){return this._formField?this._formField.color:void 0}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}ngOnInit(){}ngOnDestroy(){this._pickerSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}writeValue(t){this.value=t}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onChange(){this.colorChange.emit(new A(this,this._elementRef.nativeElement))}_onKeydown(t){let e=t.altKey&&t.keyCode===40;this._picker&&e&&!this._elementRef.nativeElement.readOnly&&(this._picker.open(),t.preventDefault())}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=t?this._adapter.format(t,this._colorFormats.display.colorInput):""}_onInput(t){let e=this._lastValueValid,i=this._adapter.parse(t);this._adapter.sameColor(i,this._value)?e!==this._lastValueValid&&this._validatorOnChange():(this._value=i,this._cvaOnChange(i),this._valueChange.emit(i),this.colorInput.emit(new A(this,this._elementRef.nativeElement)))}};o.\u0275fac=function(e){return new(e||o)(h(bt),h(at,8),h(De,8),h($))},o.\u0275dir=q({type:o,selectors:[["input","ngxMatColorPicker",""]],hostVars:3,hostBindings:function(e,i){e&1&&u("input",function(s){return i._onInput(s.target.value)})("change",function(){return i._onChange()})("blur",function(){return i._onBlur()})("keydown",function(s){return i._onKeydown(s)}),e&2&&(kt("disabled",i.disabled),V("aria-haspopup",i._picker?"dialog":null)("aria-owns",(i._picker==null?null:i._picker.opened)&&i._picker.id||null))},inputs:{ngxMatColorPicker:"ngxMatColorPicker",disabled:"disabled",value:"value"},outputs:{colorChange:"colorChange",colorInput:"colorInput"},exportAs:["ngxMatColorPickerInput"],features:[it([{provide:Qt,useExisting:o},$,He,Be])]});let n=o;return n})();var ko=(()=>{let o=class o{get disabled(){if(this._disabled==null&&this.picker())return this.picker().disabled}set disabled(t){this._disabled=t}constructor(t){this._cd=t,this._stateChanges=N.EMPTY,this.picker=y(void 0,{alias:"for"}),this.tabIndex=y(),this.disableRipple=y(),this._button=rt("button"),Tt(()=>{this.picker(),Et(()=>this._watchStateChanges())})}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}open(t){this.picker()&&!this.disabled&&(this.picker().open(),t.stopPropagation())}_watchStateChanges(){let t=this.picker()?._disabledChange??new f,e=this.picker()?._pickerInput?._disabledChange??new f,i=this.picker()?T(this.picker().openedStream,this.picker().closedStream):ut();this._stateChanges.unsubscribe(),this._stateChanges=T(t,e,i).subscribe(()=>this._cd.markForCheck())}};o.\u0275fac=function(e){return new(e||o)(h(Ot))},o.\u0275cmp=g({type:o,selectors:[["ngx-mat-color-toggle"]],viewQuery:function(e,i){e&1&&et(i._button,be,5),e&2&&ot()},hostAttrs:[1,"ngx-mat-color-toggle"],hostVars:7,hostBindings:function(e,i){e&1&&u("focus",function(){return i._button.focus()}),e&2&&(V("tabindex",-1),H("ngx-mat-color-toggle-active",i.picker&&i.picker.opened)("mat-accent",i.picker&&i.picker.color==="accent")("mat-warn",i.picker&&i.picker.color==="warn"))},inputs:{picker:[1,"for","picker"],tabIndex:[1,"tabIndex"],disabled:"disabled",disableRipple:[1,"disableRipple"]},exportAs:["ngxMatColorPickerToggle"],ngContentSelectors:ye,decls:4,vars:4,consts:[["button",""],["mat-icon-button","","type","button",3,"click","disabled","disableRipple"]],template:function(e,i){if(e&1){let r=B();It(ve),c(0,"button",1,0),u("click",function(j){return P(r),D(i.open(j))}),At(2,0,null,we,2,2),l()}e&2&&(d("disabled",i.disabled)("disableRipple",i.disableRipple()),V("aria-haspopup",i.picker()?"dialog":null)("tabindex",i.disabled?-1:i.tabIndex()))},dependencies:[st,te,ae,re],styles:[`.mat-form-field-appearance .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field-appearance .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-prefix .mat-icon-button .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-suffix .mat-icon-button .ngx-mat-color-toggle-default-icon{margin:auto}
`],encapsulation:2});let n=o;return n})();export{Te as a,Ne as b,Pe as c,dt as d,$ as e,wo as f,De as g,Ve as h,he as i,Mo as j,ge as k,ko as l};
