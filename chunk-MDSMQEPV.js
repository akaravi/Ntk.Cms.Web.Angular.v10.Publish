import{a as jt}from"./chunk-YYDEBBCJ.js";import{a as Kt}from"./chunk-RMWOEGPY.js";import{a as Qe}from"./chunk-HGNWVODT.js";import{a as j,d as ce}from"./chunk-XBBMWE56.js";import{e as le,f as k}from"./chunk-LID2Z6NB.js";import{Ba as ae,Cb as G,Db as W,Sb as Gt,gc as je,ic as Ce,oa as kt,pa as Vt,qa as Dt,ra as Lt,rc as q,s as ve,sa as Ft,sc as se,uc as ze,v as oe,wc as H,xc as Wt,zc as qt}from"./chunk-TSM5A4DZ.js";import{A as ie,B as ne,C as re,F as Nt,G as Ht,b as qe,c as J,h as X,i as Z,k as $,m as ee,n as te}from"./chunk-QRBNL5ZA.js";import{$b as Rt,La as N,Mn as be,Qn as Ie,Un as K,Vn as Ke,Wb as Bt,Wn as Ye,Yb as We,Z as Ge,_b as ct,_n as D,ac as Ot,cc as Ut,d as At,e as xt,f as U,fa as Pt,g as z,l as lt,o as Q,q as wt}from"./chunk-VH4FEZX5.js";import{Ab as I,Ad as Mt,C as gt,Dc as s,Ec as l,Fb as m,Gb as n,Hb as o,Ib as u,Ic as Le,Pb as P,Qa as vt,Ra as V,Sb as E,Ub as g,Va as t,Xc as O,Yb as Ct,Zb as It,_b as Et,cb as _,cc as M,fa as _t,ga as Ne,hc as d,ib as B,ic as v,ja as He,jb as ke,jc as h,ka as ge,kc as De,ld as yt,nc as A,ob as Ve,oc as x,pa as S,pc as w,qa as f,rd as Fe,tc as y,uc as st,va as _e,vc as Tt,xb as bt,xc as R,yc as de,zb as C}from"./chunk-2AL2II5Z.js";import{i as F}from"./chunk-SEDBTTTN.js";var pe=class pe{constructor(a,e,i){this.cmsStoreService=a;this.authService=e;this.router=i}canActivate(a,e){return F(this,null,function*(){return this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.siteId>0&&this.authService.getJWT()?.accessToken?.length>0?(setTimeout(()=>{this.router.navigate(["/dashboard"],{queryParams:{}})},10),!1):this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.authService.getJWT()?.accessToken?.length>0?(setTimeout(()=>{this.router.navigate([D],{queryParams:{}})},10),!1):!0})}};pe.\u0275fac=function(e){return new(e||pe)(He(q),He(N),He(U))},pe.\u0275prov=_t({token:pe,factory:pe.\u0275fac,providedIn:"root"});var me=pe;var Ee=class Ee{constructor(a,e,i,r,p,b){this.router=a;this.publicHelper=e;this.tokenHelper=i;this.translate=r;this.cmsStoreService=p;this.cdr=b;this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Bt;this.today=new Date;this.showSplashModel=!0;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){window.innerWidth<be.cmsViewConfig.mobileWindowInnerWidth&&setTimeout(()=>{this.showSplashModel=!1,this.cdr.markForCheck()},5e3)}};Ee.\u0275fac=function(e){return new(e||Ee)(_(U),_(k),_(ze),_(se),_(q),_(O))},Ee.\u0275cmp=B({type:Ee,selectors:[["app-auth"]],standalone:!1,decls:7,vars:0,consts:[[1,"page-content","header-clear-medium"],[1,"content"],[1,"row"],[1,"col-sm-0","col-md-2","col-lg-3","col-xl-4"],[1,"col-sm-12","col-md-8","col-lg-6","col-xl-4"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),u(3,"div",3),n(4,"div",4),u(5,"router-outlet"),o(),u(6,"div",3),o()()())},dependencies:[xt],encapsulation:2});var Xe=Ee;var ei=()=>["/auth/signinbyusername"],ti=()=>["/auth/signup"],ht=c=>({display:c});function ii(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.FORGOT.MOBILE")," "),t(3),v(l(5,4,"MESSAGE.required")))}function ni(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),v(l(5,4,"MESSAGE.required")))}function ri(c,a){if(c&1){let e=P();n(0,"form",19,1),E("ngSubmit",function(){S(e);let r=g();return f(r.onActionSubmitOrderCodeBySms())}),n(2,"div",20),u(3,"i",21),n(4,"input",22,2),s(6,"translate"),w("ngModelChange",function(r){S(e);let p=g();return x(p.dataModelforgetPasswordBySms.mobile,r)||(p.dataModelforgetPasswordBySms.mobile=r),f(r)}),o(),n(7,"label",23),d(8),s(9,"translate"),o(),u(10,"i",24)(11,"i",25),n(12,"em"),d(13),s(14,"translate"),o(),C(15,ii,6,6,"mat-error"),o(),n(16,"img",26),E("click",function(){S(e);let r=g();return f(r.onCaptchaOrder())}),o(),n(17,"mat-icon",27),E("click",function(){S(e);let r=g();return f(r.onCaptchaOrder())}),d(18,"refresh"),o(),n(19,"div",20),u(20,"i",28),n(21,"input",29,3),s(23,"translate"),w("ngModelChange",function(r){S(e);let p=g();return x(p.dataModelforgetPasswordBySms.captchaText,r)||(p.dataModelforgetPasswordBySms.captchaText=r),f(r)}),o(),n(24,"label",30),d(25),s(26,"translate"),o(),u(27,"i",24)(28,"i",25),n(29,"em"),d(30),s(31,"translate"),o(),C(32,ni,6,6,"mat-error"),o(),n(33,"button",31),d(34),s(35,"translate"),o(),n(36,"button",32),E("click",function(){S(e);let r=g();return f(r.changeforgetState("email"))}),d(37),s(38,"translate"),o()()}if(c&2){let e=M(1),i=M(5),r=M(22),p=g();m("ngStyle",de(37,ht,p.errorState===p.errorStates.NoError?"none":"block")),t(4),m("placeholder",y(l(6,21,"AUTH.FORGOT.MOBILE"))),A("ngModel",p.dataModelforgetPasswordBySms.mobile),m("disabled",!p.formInfo.submitButtonEnabled),t(4),v(l(9,23,"AUTH.FORGOT.MOBILE")),t(5),h("(",l(14,25,"TITLE.Necessary"),")"),t(2),I(i.errors!=null&&i.errors.required?15:-1),t(),m("src",y(p.captchaModel.image),V),t(5),m("placeholder",y(l(23,27,"AUTH.INPUT.CAPTCHACODE"))),A("ngModel",p.dataModelforgetPasswordBySms.captchaText),m("disabled",!p.formInfo.submitButtonEnabled),t(4),v(l(26,29,"AUTH.INPUT.CAPTCHACODE")),t(5),h("(",l(31,31,"TITLE.Necessary"),")"),t(2),I(r.errors!=null&&r.errors.required?32:-1),t(),m("disabled",e.invalid||!p.formInfo.submitButtonEnabled),t(),h(" ",l(35,33,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(2),m("disabled",!p.formInfo.submitButtonEnabled),t(),h(" ",l(38,35,"MESSAGE.Reminders.by.email")," ")}}function oi(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.FORGOT.EMAIL")," "),t(3),v(l(5,4,"MESSAGE.required")))}function ai(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),v(l(5,4,"MESSAGE.required")))}function si(c,a){if(c&1){let e=P();n(0,"form",19,4),E("ngSubmit",function(){S(e);let r=g();return f(r.onActionSubmitOrderCodeByEmail())}),n(2,"div",20),u(3,"i",21),n(4,"input",33,5),s(6,"translate"),w("ngModelChange",function(r){S(e);let p=g();return x(p.dataModelforgetPasswordByEmail.email,r)||(p.dataModelforgetPasswordByEmail.email=r),f(r)}),o(),n(7,"label",34),d(8),s(9,"translate"),o(),u(10,"i",24)(11,"i",25),n(12,"em"),d(13),s(14,"translate"),o(),C(15,oi,6,6,"mat-error"),o(),n(16,"img",26),E("click",function(){S(e);let r=g();return f(r.onCaptchaOrder())}),o(),n(17,"mat-icon",27),E("click",function(){S(e);let r=g();return f(r.onCaptchaOrder())}),d(18,"refresh"),o(),n(19,"div",20),u(20,"i",28),n(21,"input",35,3),s(23,"translate"),w("ngModelChange",function(r){S(e);let p=g();return x(p.dataModelforgetPasswordByEmail.captchaText,r)||(p.dataModelforgetPasswordByEmail.captchaText=r),f(r)}),o(),n(24,"label",36),d(25),s(26,"translate"),o(),u(27,"i",24)(28,"i",25),n(29,"em"),d(30),s(31,"translate"),o(),C(32,ai,6,6,"mat-error"),o(),n(33,"button",31),d(34),s(35,"translate"),o(),n(36,"button",32),E("click",function(){S(e);let r=g();return f(r.changeforgetState("sms"))}),d(37),s(38,"translate"),o()()}if(c&2){let e=M(1),i=M(5),r=M(22),p=g();m("ngStyle",de(37,ht,p.errorState===p.errorStates.NoError?"none":"block")),t(4),m("placeholder",y(l(6,21,"AUTH.FORGOT.EMAIL"))),A("ngModel",p.dataModelforgetPasswordByEmail.email),m("disabled",!p.formInfo.submitButtonEnabled),t(4),v(l(9,23,"AUTH.FORGOT.EMAIL")),t(5),h("(",l(14,25,"TITLE.Necessary"),")"),t(2),I(i.errors!=null&&i.errors.required?15:-1),t(),m("src",y(p.captchaModel.image),V),t(5),m("placeholder",y(l(23,27,"AUTH.INPUT.CAPTCHACODE"))),A("ngModel",p.dataModelforgetPasswordByEmail.captchaText),m("disabled",!p.formInfo.submitButtonEnabled),t(4),v(l(26,29,"AUTH.INPUT.CAPTCHACODE")),t(5),h("(",l(31,31,"TITLE.Necessary"),")"),t(2),I(r.errors!=null&&r.errors.required?32:-1),t(),m("disabled",e.invalid||!p.formInfo.submitButtonEnabled),t(),h(" ",l(35,33,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(2),m("disabled",!p.formInfo.submitButtonEnabled),t(),h(" ",l(38,35,"MESSAGE.Reminder.by.SMS")," ")}}function li(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(3),v(l(5,4,"MESSAGE.required")))}function ci(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.FORGOT.PASSWORD")," "),t(3),v(l(5,4,"MESSAGE.required")))}function di(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.INPUT.CONFIRM_PASSWORD")," "),t(3),v(l(5,4,"MESSAGE.required")))}function pi(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),o()),c&2&&(t(),h(" ",l(2,1,"MESSAGE.Password_and_password_confirmation_are_different")," "))}function mi(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),v(l(5,4,"MESSAGE.required")))}function ui(c,a){if(c&1){let e=P();n(0,"form",19,6),E("ngSubmit",function(){S(e);let r=g();return f(r.onActionSubmitEntryPinCode())}),n(2,"div",20),u(3,"i",21),n(4,"input",37,7),s(6,"translate"),w("ngModelChange",function(r){S(e);let p=g();return x(p.dataModelforgetPasswordEntryPinCode.activateCode,r)||(p.dataModelforgetPasswordEntryPinCode.activateCode=r),f(r)}),o(),n(7,"label",38),d(8),s(9,"translate"),o(),u(10,"i",24)(11,"i",25),n(12,"em"),d(13),s(14,"translate"),o(),C(15,li,6,6,"mat-error"),o(),n(16,"div",20),u(17,"i",39),n(18,"input",40,8),s(20,"translate"),w("ngModelChange",function(r){S(e);let p=g();return x(p.dataModelforgetPasswordEntryPinCode.newPassword,r)||(p.dataModelforgetPasswordEntryPinCode.newPassword=r),f(r)}),o(),n(21,"label",41),d(22),s(23,"translate"),o(),u(24,"i",24)(25,"i",25),n(26,"em"),d(27),s(28,"translate"),o(),C(29,ci,6,6,"mat-error"),o(),n(30,"app-password-strength",42),E("passwordStrength",function(r){S(e);let p=g();return f(p.passwordValid(r))}),o(),n(31,"div",20),u(32,"i",39),n(33,"input",43,9),s(35,"translate"),w("ngModelChange",function(r){S(e);let p=g();return x(p.RePasswordModel,r)||(p.RePasswordModel=r),f(r)}),o(),n(36,"label",44),d(37),s(38,"translate"),o(),u(39,"i",24)(40,"i",25),n(41,"em"),d(42),s(43,"translate"),o(),C(44,di,6,6,"mat-error"),C(45,pi,3,3,"mat-error"),o(),n(46,"img",26),E("click",function(){S(e);let r=g();return f(r.onCaptchaOrder())}),o(),n(47,"mat-icon",27),E("click",function(){S(e);let r=g();return f(r.onCaptchaOrder())}),d(48,"refresh"),o(),n(49,"div",20),u(50,"i",28),n(51,"input",45,3),s(53,"translate"),w("ngModelChange",function(r){S(e);let p=g();return x(p.dataModelforgetPasswordEntryPinCode.captchaText,r)||(p.dataModelforgetPasswordEntryPinCode.captchaText=r),f(r)}),o(),n(54,"label",46),d(55),s(56,"translate"),o(),u(57,"i",24)(58,"i",25),n(59,"em"),d(60),s(61,"translate"),o(),C(62,mi,6,6,"mat-error"),o(),n(63,"button",31),d(64),s(65,"translate"),o(),n(66,"button",32),E("click",function(){S(e);let r=g();return f(r.changeforgetState("sms"))}),d(67),s(68,"translate"),o(),n(69,"button",32),E("click",function(){S(e);let r=g();return f(r.changeforgetState("email"))}),d(70),s(71,"translate"),o()()}if(c&2){let e=M(1),i=M(5),r=M(19),p=M(34),b=M(52),T=g();m("ngStyle",de(69,ht,T.errorState===T.errorStates.NoError?"none":"block")),t(4),m("placeholder",st(" ",l(6,39,"AUTH.FORGOT.SEND_PIN_CODE"))),A("ngModel",T.dataModelforgetPasswordEntryPinCode.activateCode),m("disabled",!T.formInfo.submitButtonEnabled),t(4),h(" ",l(9,41,"AUTH.FORGOT.PIN_CODE")),t(5),h("(",l(14,43,"TITLE.Necessary"),")"),t(2),I(i.errors!=null&&i.errors.required?15:-1),t(3),m("placeholder",st(" ",l(20,45,"AUTH.FORGOT.PASSWORD"))),A("ngModel",T.dataModelforgetPasswordEntryPinCode.newPassword),m("disabled",!T.formInfo.submitButtonEnabled),t(4),h(" ",l(23,47,"AUTH.FORGOT.PASSWORD")),t(5),h("(",l(28,49,"TITLE.Necessary"),")"),t(2),I(r.errors!=null&&r.errors.required?29:-1),t(),m("passwordToCheck",T.dataModelforgetPasswordEntryPinCode.newPassword),t(3),m("placeholder",y(l(35,51,"AUTH.INPUT.CONFIRM_PASSWORD"))),A("ngModel",T.RePasswordModel),m("disabled",!T.formInfo.submitButtonEnabled),t(4),v(l(38,53,"AUTH.INPUT.CONFIRM_PASSWORD")),t(5),h("(",l(43,55,"TITLE.Necessary"),")"),t(2),I(p.errors!=null&&p.errors.required?44:-1),t(),I((T.RePasswordModel==null?null:T.RePasswordModel.length)>0&&p.value!==r.value?45:-1),t(),m("src",y(T.captchaModel.image),V),t(5),m("placeholder",y(l(53,57,"AUTH.INPUT.CAPTCHACODE"))),A("ngModel",T.dataModelforgetPasswordEntryPinCode.captchaText),m("disabled",!T.formInfo.submitButtonEnabled),t(4),v(l(56,59,"AUTH.INPUT.CAPTCHACODE")),t(5),h("(",l(61,61,"TITLE.Necessary"),")"),t(2),I(b.errors!=null&&b.errors.required?62:-1),t(),m("disabled",e.invalid||!T.formInfo.submitButtonEnabled),t(),h(" ",l(65,63,"AUTH.FORGOT.SEND_PIN_CODE")," "),t(2),m("disabled",!T.formInfo.submitButtonEnabled),t(),h(" ",l(68,65,"MESSAGE.Reminder.by.SMS")," "),t(2),m("disabled",!T.formInfo.submitButtonEnabled),t(),h(" ",l(71,67,"MESSAGE.Resend_the_recovery_code")," ")}}function hi(c,a){if(c&1&&(n(0,"div",47)(1,"div",48),d(2),o()()),c&2){let e=g().message;t(2),h(" ",e," ")}}function Si(c,a){if(c&1&&C(0,hi,3,1,"div",47),c&2){let e=a.control,i=a.validation;I(e.hasError(i)&&(e.dirty||e.touched)?0:-1)}}var zt=(i=>(i[i.NotSubmitted=0]="NotSubmitted",i[i.HasError=1]="HasError",i[i.NoError=2]="NoError",i))(zt||{}),ye=class ye{constructor(a,e,i,r,p,b,T){this.coreAuthService=a;this.cmsToastrService=e;this.translate=i;this.router=r;this.cdr=p;this.publicHelper=b;this.pageInfo=T;this.constructorInfoAreaId=this.constructor.name;this.destroyRef=ge(_e);this.errorState=0;this.errorStates=zt;this.dataModelforgetPasswordBySms=new ct;this.dataModelforgetPasswordByEmail=new ct;this.dataModelforgetPasswordEntryPinCode=new Rt;this.captchaModel=new Q;this.forgetState="sms";this.countAutoCaptchaOrder=1;this.formInfo=new ce;this.passwordIsValid=!1;this.RePasswordModel="";this.onCaptchaOrderInProcess=!1;this.publicHelper.processService.cdr=this.cdr,this.RePasswordModel=""}ngOnInit(){this.onCaptchaOrder(),this.translate.get("AUTH.FORGOT.TITLE").subscribe(a=>{this.pageInfo.updateTitle(a)})}onActionSubmitOrderCodeBySms(){this.formInfo.submitButtonEnabled=!1,this.errorState=0,this.dataModelforgetPasswordBySms.captchaKey=this.captchaModel.key,this.dataModelforgetPasswordEntryPinCode.email="",this.dataModelforgetPasswordEntryPinCode.mobile=this.dataModelforgetPasswordBySms.mobile;let a=this.constructor.name+".ServiceForgetPassword";this.translate.get("AUTH.FORGOT.REQUEST_PASSWORD_REMINDER").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceForgetPassword(this.dataModelforgetPasswordBySms).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.The_activation_code_was_texted_with_you").subscribe(i=>{this.cmsToastrService.typeSuccessMessage(i)}),this.forgetState="entrycode"):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onActionSubmitOrderCodeByEmail(){this.formInfo.submitButtonEnabled=!1,this.errorState=0,this.dataModelforgetPasswordByEmail.captchaKey=this.captchaModel.key,this.dataModelforgetPasswordEntryPinCode.mobile="",this.dataModelforgetPasswordEntryPinCode.email=this.dataModelforgetPasswordByEmail.email;let a=this.constructor.name+".ServiceForgetPassword";this.translate.get("AUTH.FORGOT.REQUEST_PASSWORD_REMINDER").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceForgetPassword(this.dataModelforgetPasswordByEmail).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.The_activation_code_was_emailed_to_you").subscribe(i=>{this.cmsToastrService.typeSuccessMessage(i)}),this.forgetState="entrycode"):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onActionSubmitEntryPinCode(){this.formInfo.submitButtonEnabled=!1,this.errorState=0,this.dataModelforgetPasswordEntryPinCode.captchaKey=this.captchaModel.key;let a=this.constructor.name+".ServiceForgetPasswordEntryPinCode";this.translate.get("MESSAGE.Check_the_code_on_the_server").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceForgetPasswordEntryPinCode(this.dataModelforgetPasswordEntryPinCode).subscribe({next:e=>{e.isSuccess?(this.translate.get("MESSAGE.Your_password_was_changed_successfully").subscribe(i=>{this.cmsToastrService.typeSuccessMessage(i)}),setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate(["/"])},1e3)):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}passwordValid(a){this.passwordIsValid=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModelforgetPasswordBySms.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{this.captchaModel=e.item,this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}changeforgetState(a){this.forgetState=a}};ye.\u0275fac=function(e){return new(e||ye)(_(N),_(H),_(G),_(U),_(O),_(k),_(le))},ye.\u0275cmp=B({type:ye,selectors:[["app-auth-forgot-password"]],standalone:!1,decls:23,vars:20,consts:[["formError",""],["vformBySms","ngForm"],["Mobile",""],["captchaText",""],["vformByEmail","ngForm"],["email",""],["vformEntryCode","ngForm"],["ActivateCode",""],["newPassword",""],["RePassword",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"font-800","color-highlight","mb-0"],["novalidate","novalidate","id","kt_login_forgot_form",1,"form","fv-plugins-bootstrap","fv-plugins-framework",3,"ngStyle"],[1,"row","pt-3","mb-0"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"],["novalidate","novalidate","id","kt_login_forgot_form",1,"form","fv-plugins-bootstrap","fv-plugins-framework",3,"ngSubmit","ngStyle"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-at","color-highlight"],["type","text","name","dataModelforgetPasswordBySms.mobile","id","dataModelforgetPasswordBySms.mobile","autocomplete","off","minlength","5","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordBySms.mobile",1,"color-highlight","font-11","font-500"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left","color-highlight"],["name","dataModelforgetPasswordBySms.captchaText","id","dataModelforgetPasswordBySms.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordBySms.captchaText",1,"color-highlight"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"click","disabled"],["type","email","name","dataModelforgetPasswordByEmail.email","id","dataModelforgetPasswordByEmail.email","autocomplete","off","minlength","5","maxlength","50","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordByEmail.email",1,"color-highlight","font-11","font-500"],["name","dataModelforgetPasswordByEmail.captchaText","id","dataModelforgetPasswordByEmail.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordByEmail.captchaText",1,"color-highlight"],["name","dataModelforgetPasswordEntryPinCode.activateCode","type","text","autocomplete","off","id","dataModelforgetPasswordEntryPinCode.activateCode","minlength","3","maxlength","5","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordEntryPinCode.activateCode",1,"color-highlight","font-11","font-500"],[1,"fa","fa-lock","color-highlight"],["name","dataModelforgetPasswordEntryPinCode.newPassword","id","dataModelforgetPasswordEntryPinCode.newPassword","type","password","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordEntryPinCode.newPassword",1,"color-highlight","font-11","font-500"],[3,"passwordStrength","passwordToCheck"],["type","password","id","RePassword","name","RePasswordModel","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",3,"ngModelChange","placeholder","ngModel","disabled"],["for","RePassword",1,"color-highlight"],["name","dataModelforgetPasswordEntryPinCode.captchaText","id","dataModelforgetPasswordEntryPinCode.captchaText","type","text","autocomplete","off","minlength","4","maxlength","10","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelforgetPasswordEntryPinCode.captchaText",1,"color-highlight"],[1,"fv-plugins-message-container"],[1,"fv-help-block"]],template:function(e,i){e&1&&(n(0,"div",10),u(1,"app-progress-spinner",11),n(2,"div",12)(3,"p",13),d(4),s(5,"translate"),o(),n(6,"p"),d(7),s(8,"translate"),o(),C(9,ri,39,39,"form",14),C(10,si,39,39,"form",14),C(11,ui,72,71,"form",14),Ve(12,Si,1,1,"ng-template",null,0,Le),n(14,"div",15)(15,"div",16)(16,"a",17),d(17),s(18,"translate"),o()(),n(19,"div",18)(20,"a",17),d(21),s(22,"translate"),o()()()()()),e&2&&(t(),m("optionsInfoAreaId",i.constructorInfoAreaId),t(3),h(" ",l(5,10,"AUTH.Account.Reset")," "),t(3),h(" ",l(8,12,"AUTH.FORGOT.DESCSMS")," "),t(2),I(i.forgetState==="sms"?9:-1),t(),I(i.forgetState==="email"?10:-1),t(),I(i.forgetState==="entrycode"?11:-1),t(5),m("routerLink",R(18,ei)),t(),v(l(18,14,"AUTH.REGISTER.RETURN_TO_LOGIN")),t(3),m("routerLink",R(19,ti)),t(),v(l(22,16,"AUTH.GENERAL.SIGNUP_BUTTON")))},dependencies:[Fe,z,te,J,X,Z,ie,ne,re,ee,$,ve,oe,ae,j,jt,W],encapsulation:2});var Ze=ye;var Qt=c=>({display:c}),gi=()=>["/auth/signinbyusername"],_i=()=>["/auth/signup"];function vi(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.SIGNINBYSMS.MOBILE")," "),t(3),v(l(5,4,"MESSAGE.required")))}function bi(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),v(l(5,4,"MESSAGE.required")))}function Ci(c,a){if(c&1){let e=P();n(0,"form",12,1),E("ngSubmit",function(){S(e);let r=g();return f(r.onActionSubmitOrderCodeBySms())}),n(2,"div",13),u(3,"i",14),n(4,"input",15,2),s(6,"translate"),w("ngModelChange",function(r){S(e);let p=g();return x(p.dataModelAuthUserSignInBySms.mobile,r)||(p.dataModelAuthUserSignInBySms.mobile=r),f(r)}),o(),n(7,"label",16),d(8),s(9,"translate"),o(),u(10,"i",17)(11,"i",18),C(12,vi,6,6,"mat-error"),o(),n(13,"img",19),E("click",function(){S(e);let r=g();return f(r.onCaptchaOrder())}),o(),n(14,"mat-icon",20),E("click",function(){S(e);let r=g();return f(r.onCaptchaOrder())}),d(15,"refresh"),o(),n(16,"div",13),u(17,"i",21),n(18,"input",22,3),s(20,"translate"),w("ngModelChange",function(r){S(e);let p=g();return x(p.dataModelAuthUserSignInBySms.captchaText,r)||(p.dataModelAuthUserSignInBySms.captchaText=r),f(r)}),o(),n(21,"label",23),d(22),s(23,"translate"),o(),u(24,"i",17)(25,"i",18),C(26,bi,6,6,"mat-error"),o(),n(27,"button",24),d(28),s(29,"translate"),o(),u(30,"br"),o()}if(c&2){let e=M(1),i=M(5),r=M(19),p=g();m("ngStyle",de(27,Qt,p.errorState===p.errorStates.NoError?"none":"block")),t(4),m("placeholder",y(l(6,17,"AUTH.SIGNINBYSMS.MOBILE"))),A("ngModel",p.dataModelAuthUserSignInBySms.mobile),m("disabled",!p.formInfo.submitButtonEnabled),t(4),v(l(9,19,"AUTH.SIGNINBYSMS.MOBILE")),t(4),I(i.errors!=null&&i.errors.required?12:-1),t(),m("src",y(p.captchaModel.image),V),t(5),m("placeholder",y(l(20,21,"AUTH.INPUT.CAPTCHACODE"))),A("ngModel",p.dataModelAuthUserSignInBySms.captchaText),m("disabled",!p.formInfo.submitButtonEnabled),t(4),v(l(23,23,"AUTH.INPUT.CAPTCHACODE")),t(4),I(r.errors!=null&&r.errors.required?26:-1),t(),m("disabled",e.invalid||!p.formInfo.submitButtonEnabled||!p.connectionStatus.internetConnection),t(),h(" ",l(29,25,"AUTH.SIGNINBYSMS.SEND_PIN_CODE")," ")}}function Ii(c,a){if(c&1){let e=P();n(0,"img",19),E("click",function(){S(e);let r=g(2);return f(r.onCaptchaOrder())}),o()}if(c&2){let e=g(2);m("src",y(e.captchaModel.image),V)}}function Ei(c,a){if(c&1){let e=P();n(0,"mat-icon",20),E("click",function(){S(e);let r=g(2);return f(r.onCaptchaOrder())}),d(1,"refresh"),o()}}function Ti(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.INPUT.CAPTCHACODE")," "),t(3),v(l(5,4,"MESSAGE.required")))}function yi(c,a){if(c&1){let e=P();n(0,"div",13),u(1,"i",21),n(2,"input",31,3),s(4,"translate"),w("ngModelChange",function(r){S(e);let p=g(2);return x(p.dataModelAuthUserSignInBySms.captchaText,r)||(p.dataModelAuthUserSignInBySms.captchaText=r),f(r)}),o(),n(5,"label",23),d(6),s(7,"translate"),o(),u(8,"i",17)(9,"i",18),C(10,Ti,6,6,"mat-error"),o()}if(c&2){let e=M(3),i=g(2);t(2),m("placeholder",y(l(4,6,"AUTH.INPUT.CAPTCHACODE"))),A("ngModel",i.dataModelAuthUserSignInBySms.captchaText),m("disabled",!i.formInfo.submitButtonEnabled),t(4),v(l(7,8,"AUTH.INPUT.CAPTCHACODE")),t(4),I(e.errors!=null&&e.errors.required?10:-1)}}function Mi(c,a){if(c&1&&(n(0,"button",24),d(1),s(2,"translate"),o()),c&2){g();let e=M(1),i=g();m("disabled",e.invalid||!i.formInfo.submitButtonEnabled||!i.connectionStatus.internetConnection||!i.dataModelAuthUserSignInBySms.code||i.dataModelAuthUserSignInBySms.code.length<4),t(),h(" ",l(2,2,"AUTH.SIGNINBYSMS.LOGIN")," ")}}function Ai(c,a){if(c&1){let e=P();n(0,"button",32),E("click",function(){S(e);let r=g(2);return f(r.onActionSubmitOrderCodeBySms())}),d(1),s(2,"translate"),o()}if(c&2){let e=g(2);m("disabled",e.buttonnResendSmsDisable||!e.connectionStatus.internetConnection),t(),De(" ",l(2,3,"AUTH.LOGIN.RESEND_SMS")," ",e.prorocess==null?null:e.prorocess.message," ")}}function xi(c,a){if(c&1&&u(0,"progress",30),c&2){let e=g(2);m("max",y(e.prorocess.progressBarMaxValue))("value",e.prorocess.progressBarValue)}}function wi(c,a){if(c&1){let e=P();n(0,"form",12,4),E("ngSubmit",function(){S(e);let r=g();return f(r.onActionSubmitEntryPinCode())}),n(2,"p"),d(3),s(4,"translate"),o(),n(5,"div",25)(6,"ng-otp-input",26,5),E("onInputChange",function(r){S(e);let p=g();return f(p.onOtpChange(r))}),o()(),C(8,Ii,1,2,"img",27),C(9,Ei,2,0,"mat-icon",28),C(10,yi,11,10,"div",13),C(11,Mi,3,4,"button",24),C(12,Ai,3,5,"button",29),C(13,xi,1,3,"progress",30),o()}if(c&2){let e=g();m("ngStyle",de(11,Qt,e.errorState===e.errorStates.NoError?"none":"block")),t(3),h(" ",l(4,9,"AUTH.ENTER_RECEIVED_NUMBER")," "),t(3),m("config",e.otpConfig),t(2),I(e.diffSeconds<0?8:-1),t(),I(e.diffSeconds<0?9:-1),t(),I(e.diffSeconds<0?10:-1),t(),I(e.onNavigate?-1:11),t(),I(e.onNavigate?-1:12),t(),I((e.prorocess==null?null:e.prorocess.progressBarValue)>0&&e.buttonnResendSmsDisable?13:-1)}}function Pi(c,a){if(c&1&&(n(0,"div",33)(1,"div",34),d(2),o()()),c&2){let e=g().message;t(2),h(" ",e," ")}}function Bi(c,a){if(c&1&&C(0,Pi,3,1,"div",33),c&2){let e=a.control,i=a.validation;I(e.hasError(i)&&(e.dirty||e.touched)?0:-1)}}function Ri(c,a){c&1&&(n(0,"div",11)(1,"div",35)(2,"a",36),d(3),s(4,"translate"),o()(),n(5,"div",37)(6,"a",36),d(7),s(8,"translate"),o()()()),c&2&&(t(2),m("routerLink",R(8,gi)),t(),v(l(4,4,"AUTH.REGISTER.RETURN_TO_LOGIN")),t(3),m("routerLink",R(9,_i)),t(),v(l(8,6,"AUTH.GENERAL.SIGNUP_BUTTON")))}var Jt=(i=>(i[i.NotSubmitted=0]="NotSubmitted",i[i.HasError=1]="HasError",i[i.NoError=2]="NoError",i))(Jt||{}),St=class{},Me=class Me{constructor(a,e,i,r,p,b,T,Se,ft){this.coreAuthService=a;this.cmsToastrService=e;this.translate=i;this.router=r;this.cmsTranslationService=p;this.cmsStoreService=b;this.cdr=T;this.publicHelper=Se;this.pageInfo=ft;this.constructorInfoAreaId=this.constructor.name;this.destroyRef=ge(_e);this.connectionStatus=new je;this.errorState=0;this.errorStates=Jt;this.dataModelAuthUserSignInBySms=new Ut;this.captchaModel=new Q;this.forgetState="sms";this.countAutoCaptchaOrder=1;this.formInfo=new ce;this.passwordIsValid=!1;this.RePasswordModel="";this.onCaptchaOrderInProcess=!1;this.onNavigate=!1;this.unsubscribe=[];this.buttonnResendSmsDisable=!0;this.otpConfig={allowNumbersOnly:!0,length:4,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputStyles:{width:"50px",height:"50px",margin:"5px"}};this.publicHelper.processService.cdr=this.cdr,localStorage&&localStorage.setItem(Ie,"signinbysms"),this.RePasswordModel="",this.unsubscribe.push(this.cmsStoreService.getState(L=>L.connectionStatusStore).subscribe(L=>F(this,null,function*(){this.connectionStatus=L}))),this.unsubscribe.push(this.cmsStoreService.getState(L=>L.tokenInfoStore).subscribe(L=>F(this,null,function*(){this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.siteId>0&&this.router.navigate(["/dashboard"],{}),this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.router.navigate([D],{})})))}ngOnInit(){this.onCaptchaOrder(),this.translate.get("AUTH.SIGNINBYSMS.TITLE").subscribe(a=>{this.pageInfo.updateTitle(a)})}onOtpChange(a){this.dataModelAuthUserSignInBySms.code=a}onActionSubmitOrderCodeBySms(){if(this.forgetState=="entrycode"){if(!this.dataModelAuthUserSignInBySms.captchaText||this.dataModelAuthUserSignInBySms.captchaText.length==0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSetCpatcha").subscribe(e=>{this.cmsToastrService.typeWarningMessage(e)});return}this.dataModelAuthUserSignInBySms.code=""}this.formInfo.submitButtonEnabled=!1,this.errorState=0,this.dataModelAuthUserSignInBySms.captchaKey=this.captchaModel.key,this.dataModelAuthUserSignInBySms.lang=this.cmsTranslationService.getSelectedLanguage;let a=this.constructor.name+".ServiceSigninUserBySMS";this.translate.get("MESSAGE.Send_login_request_with_one_time_password").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceSigninUserBySMS(this.dataModelAuthUserSignInBySms).subscribe({next:e=>{if(e.isSuccess){this.translate.get("MESSAGE.The_login_code_was_texted_with_you").subscribe(r=>{this.cmsToastrService.typeSuccessMessage(r)}),this.forgetState="entrycode",this.prorocess=new St,this.prorocess.progressBarValue=0,this.prorocess.progressBarMaxValue=60,this.prorocess.message="",this.buttonnResendSmsDisable=!0;var i=this.prorocess.progressBarMaxValue;this.translate.get("MESSAGE.SECONDS").subscribe(r=>{this.downloadTimer=setInterval(()=>{this.prorocess.progressBarValue=this.prorocess.progressBarMaxValue-i,this.prorocess.message="("+i+" "+r+")",i-=1,i<=0&&(this.buttonnResendSmsDisable=!1,this.prorocess.message="",clearInterval(this.downloadTimer)),Promise.resolve().then(()=>this.cdr.detectChanges())},500)})}else this.cmsToastrService.typeErrorMessage(e.errorMessage);this.formInfo.submitButtonEnabled=!0,this.countAutoCaptchaOrder<10&&(!this.captchaModel||this.diffSeconds<2)&&this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeError(e),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}ngOnDestroy(){clearInterval(this.downloadTimer),this.diffSecondsSubscribe&&this.diffSecondsSubscribe.unsubscribe(),this.unsubscribe&&this.unsubscribe.forEach(a=>a.unsubscribe())}onActionSubmitEntryPinCode(){this.formInfo.submitButtonEnabled=!1,this.errorState=0,this.dataModelAuthUserSignInBySms.captchaKey=this.captchaModel.key,this.dataModelAuthUserSignInBySms.lang=this.cmsTranslationService.getSelectedLanguage;let a=this.constructor.name+".ServiceSigninUserBySMS";if(this.translate.get("MESSAGE.Send_login_request_with_one_time_password").subscribe(r=>{this.publicHelper.processService.processStart(a,r,this.constructorInfoAreaId)}),localStorage.getItem(K)){let r=localStorage.getItem(K).split(",");r&&r.length>0&&(this.dataModelAuthUserSignInBySms.siteId=+r[r.length-1])}let e=+localStorage.getItem(Ke);e>0&&(this.dataModelAuthUserSignInBySms.resellerSiteId=e);let i=+localStorage.getItem(Ye);i>0&&(this.dataModelAuthUserSignInBySms.resellerUserId=i),this.coreAuthService.ServiceSigninUserBySMS(this.dataModelAuthUserSignInBySms).subscribe({next:r=>{r.isSuccess?(this.cmsToastrService.typeSuccessLogin(),this.formInfo.submitButtonEnabled=!1,this.coreAuthService.ServiceCurrentToken().subscribe({next:p=>{p.isSuccess&&(this.cmsStoreService.setState({type:Ce,payload:p.item}),p.item.access.siteId>0?(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate(["/dashboard"])},10)):(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate([D])},10)))}})):(this.onCaptchaOrder(),this.cmsToastrService.typeErrorMessage(r.errorMessage)),this.formInfo.submitButtonEnabled=!0,this.publicHelper.processService.processStop(a)},error:r=>{this.cmsToastrService.typeError(r),this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}passwordValid(a){this.passwordIsValid=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.diffSecondsSubscribe&&this.diffSecondsSubscribe.unsubscribe(),this.dataModelAuthUserSignInBySms.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{this.captchaModel=e.item,this.onCaptchaOrderInProcess=!1,this.diffSecondsSubscribe=gt(500).subscribe(i=>{this.diffSeconds=new Date(this.captchaModel.expire).getTime()-new Date().getTime(),this.diffSeconds<0&&this.countAutoCaptchaOrder<10&&(this.diffSecondsSubscribe.unsubscribe(),this.onCaptchaOrder())}),this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}changeforgetState(a){this.forgetState=a}};Me.\u0275fac=function(e){return new(e||Me)(_(N),_(H),_(G),_(U),_(se),_(q),_(O),_(k),_(le))},Me.\u0275cmp=B({type:Me,selectors:[["app-auth-signin-bysms"]],standalone:!1,decls:14,vars:10,consts:[["formError",""],["vformBySms","ngForm"],["Mobile",""],["captchaText",""],["vformEntryCode","ngForm"],["ngOtpInput",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"font-800","color-highlight","mb-0"],["novalidate","novalidate","id","kt_login_forgot_form",1,"form","fv-plugins-bootstrap","fv-plugins-framework",3,"ngStyle"],[1,"row","pt-3","mb-0"],["novalidate","novalidate","id","kt_login_forgot_form",1,"form","fv-plugins-bootstrap","fv-plugins-framework",3,"ngSubmit","ngStyle"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-at","color-highlight"],["type","text","name","dataModelAuthUserSignInBySms.mobile","id","dataModelAuthUserSignInBySms.mobile","autocomplete","off","minlength","5","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelAuthUserSignInBySms.mobile",1,"color-highlight","font-11","font-500"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left","color-highlight"],["name","dataModelAuthUserSignInBySms.captchaText","id","dataModelAuthUserSignInBySms.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModelAuthUserSignInBySms.captchaText",1,"color-highlight"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],[2,"text-align","center"],[3,"onInputChange","config"],["alt","",1,"mb-3",3,"src"],["matSuffix",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],[2,"width","inherit",3,"value","max"],["name","dataModelAuthUserSignInBySms.captchaText","id","dataModelAuthUserSignInBySms.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"click","disabled"],[1,"fv-plugins-message-container"],[1,"fv-help-block"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"]],template:function(e,i){e&1&&(n(0,"div",6),u(1,"app-progress-spinner",7),n(2,"div",8)(3,"p",9),d(4),s(5,"translate"),o(),n(6,"p"),d(7),s(8,"translate"),o(),C(9,Ci,31,29,"form",10),C(10,wi,14,13,"form",10),Ve(11,Bi,1,1,"ng-template",null,0,Le),C(13,Ri,9,10,"div",11),o()()),e&2&&(t(),m("optionsInfoAreaId",i.constructorInfoAreaId),t(3),h(" ",l(5,6,"AUTH.LOGIN.BUTTON")," "),t(3),h(" ",l(8,8,"AUTH.SIGNINBYSMS.DESCSMS")," "),t(2),I(i.forgetState==="sms"?9:-1),t(),I(i.forgetState==="entrycode"?10:-1),t(3),I(i.onNavigate?-1:13))},dependencies:[Fe,z,te,J,X,Z,ie,ne,re,ee,$,ve,oe,ae,j,Kt,W],encapsulation:2});var tt=Me;var Ui=()=>["/auth/signinbysms"],Ni=()=>["/auth/forgot-password"],Hi=()=>["/auth/signup"];function ki(c,a){if(c&1){let e=P();n(0,"img",26),E("click",function(){S(e);let r=g();return f(r.onCaptchaOrder())}),o(),n(1,"mat-icon",27),E("click",function(){S(e);let r=g();return f(r.onCaptchaOrder())}),d(2,"refresh"),o(),n(3,"div",7),u(4,"i",28),n(5,"input",29),s(6,"translate"),w("ngModelChange",function(r){S(e);let p=g();return x(p.dataModel.captchaText,r)||(p.dataModel.captchaText=r),f(r)}),o(),n(7,"label",30),d(8),s(9,"translate"),o(),u(10,"i",11)(11,"i",12),o()}if(c&2){let e=g();m("src",y(e.captchaModel.image),V),t(5),m("placeholder",y(l(6,7,"AUTH.INPUT.CAPTCHACODE"))),A("ngModel",e.dataModel.captchaText),m("disabled",!e.formInfo.submitButtonEnabled),t(3),v(l(9,9,"AUTH.INPUT.CAPTCHACODE"))}}function Vi(c,a){if(c&1&&(n(0,"button",23),d(1),s(2,"translate"),o()),c&2){let e=g(),i=M(10);m("disabled",i.invalid||!e.formInfo.submitButtonEnabled||!e.connectionStatus.internetConnection),t(),h(" ",l(2,2,"AUTH.LOGIN.BUTTON")," ")}}function Di(c,a){if(c&1&&(n(0,"button",24),d(1),s(2,"translate"),o()),c&2){let e=g();m("routerLink",R(5,Ui))("disabled",!e.formInfo.submitButtonEnabled||!e.connectionStatus.internetConnection),t(),h(" ",l(2,3,"AUTH.LOGIN.SMS")," ")}}function Li(c,a){c&1&&(n(0,"div",25)(1,"div",31)(2,"a",32),d(3),s(4,"translate"),o()(),n(5,"div",33)(6,"a",32),d(7),s(8,"translate"),o()()()),c&2&&(t(2),m("routerLink",R(8,Ni)),t(),v(l(4,4,"AUTH.FORGOT.TITLE")),t(3),m("routerLink",R(9,Hi)),t(),v(l(8,6,"AUTH.GENERAL.SIGNUP_BUTTON")))}function Fi(c,a){c&1&&(u(0,"div",34),n(1,"a",35),u(2,"i",36),d(3),s(4,"translate"),o(),n(5,"a",37),u(6,"i",38),d(7),s(8,"translate"),o(),n(9,"a",39),u(10,"i",40),d(11),s(12,"translate"),o()),c&2&&(t(3),v(l(4,3,"AUTH.LOGIN_WITH_FACEBOOK")),t(4),v(l(8,5,"AUTH.LOGIN_WITH_TWITTER")),t(4),v(l(12,7,"AUTH.LOGIN_WITH_APPLE")))}var Ae=class Ae{constructor(a,e,i,r,p,b,T,Se,ft,L,nn){this.cmsToastrService=a;this.cmsStoreService=e;this.route=i;this.router=r;this.coreAuthService=p;this.cmsTranslationService=b;this.translate=T;this.cdr=Se;this.publicHelper=ft;this.pageInfo=L;this.tokenHelper=nn;this.constructorInfoAreaId=this.constructor.name;this.destroyRef=ge(_e);this.loadDemoTheme=be.loadDemoTheme;this.connectionStatus=new je;this.firstRun=!0;this.hidePassword=!0;this.formInfo=new ce;this.dataModel=new We;this.captchaModel=new Q;this.countAutoCaptchaOrder=1;this.loginType="email";this.onCaptchaOrderInProcess=!1;this.onNavigate=!1;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,localStorage&&localStorage.setItem(Ie,"signinbyusername"),this.firstRun=!0,this.unsubscribe.push(this.cmsStoreService.getState(fe=>fe.connectionStatusStore).subscribe(fe=>F(this,null,function*(){this.connectionStatus=fe}))),this.unsubscribe.push(this.cmsStoreService.getState(fe=>fe.tokenInfoStore).subscribe(fe=>F(this,null,function*(){this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.siteId>0&&this.router.navigate(["/dashboard"],{}),this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.router.navigate([D],{})})))}ngOnInit(){this.onCaptchaOrder(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/",this.firstRun&&(this.dataModel.captchaText="0000"),this.translate.get("AUTH.SIGNINBYSMS.TITLE").subscribe(a=>{this.pageInfo.updateTitle(a)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(a=>a.unsubscribe())}onActionSubmit(){this.formInfo.submitButtonEnabled=!1,this.hasError=!1,this.dataModel.captchaKey=this.captchaModel.key,this.dataModel.lang=this.cmsTranslationService.getSelectedLanguage;let a=this.constructor.name+".ServiceSigninUser";if(this.translate.get("MESSAGE.login_to_user_account").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),localStorage.getItem(K)){let e=localStorage.getItem(K).split(",");e&&e.length>0&&(this.dataModel.siteId=+e[e.length-1])}this.coreAuthService.ServiceSigninUser(this.dataModel).subscribe({next:e=>{e.isSuccess?(this.cmsToastrService.typeSuccessLogin(),this.coreAuthService.ServiceCurrentToken().subscribe({next:i=>{i.isSuccess&&(this.cmsStoreService.setState({type:Ce,payload:i.item}),i.item.access.siteId>0?(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate(["/dashboard"])},10)):(this.onNavigate=!0,setTimeout(()=>{this.destroyRef.destroyed||this.router.navigate([D])},10)))}})):(this.firstRun=!1,this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorLogin(e.errorMessage),this.onCaptchaOrder()),this.publicHelper.processService.processStop(a)},error:e=>{this.firstRun=!1,this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(e),this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onloginTypeChange(a){this.loginType=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModel.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{if(e.isSuccess){this.captchaModel=e.item,this.expireDate=e.item.expire;let i=new Date,p=new Date(e.item.expire).getTime()-i.getTime();this.countAutoCaptchaOrder<10&&setTimeout(()=>{this.firstRun||this.onCaptchaOrder()},p)}else this.cmsToastrService.typeErrorGetCpatcha(e.errorMessage);this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}};Ae.\u0275fac=function(e){return new(e||Ae)(_(H),_(q),_(At),_(U),_(N),_(se),_(G),_(O),_(k),_(le),_(ze))},Ae.\u0275cmp=B({type:Ae,selectors:[["app-auth-signin-byusername"]],standalone:!1,decls:47,vars:49,consts:[["vform","ngForm"],["Password",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"font-800","color-highlight","mb-0"],["novalidate","novalidate","id","kt_login_signin_form",1,"form",3,"ngSubmit"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-user","color-highlight"],["cmsKeyboardForce","en","name","dataModel.email","id","dataModel.email","type","text","autocomplete","off","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModel.email",1,"color-highlight"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],[1,"input-style","no-borders","has-icon","validate-field","mb-4","position-relative"],[1,"fa","fa-lock","color-highlight"],["cmsKeyboardForce","en","name","dataModel.password","id","dataModel.password","autocomplete","off","required","",1,"form-control","validate-password",2,"direction","ltr !important","text-align","center","padding-inline-end","45px",3,"ngModelChange","type","ngModel","disabled","placeholder"],["for","dataModel.password",1,"color-highlight"],["role","button","tabindex","0",1,"fa","password-toggle-icon","color-highlight",2,"position","absolute","top","50%","transform","translateY(-50%)","inset-inline-end","12px","cursor","pointer","opacity","0.6","z-index","5",3,"click","keydown.enter","keydown.space","ngClass","title"],[1,"form-check","icon-check","text-start","float-start","opacity-50","color-highlight"],["type","checkbox","value","","id","isRemember","name","isRemember",1,"form-check-input",3,"ngModelChange","ngModel"],["for","isRemember",1,"form-check-label","font-13"],[1,"icon-check-1","far","fa-circle","color-gray-dark","font-14"],[1,"icon-check-2","fa","fa-check-circle","font-14","color-highlight"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"routerLink","disabled"],[1,"row","pt-3","mb-3"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left","color-highlight"],["name","dataModel.captchaText","id","dataModel.captchaText","type","text","minlength","5","maxlength","5","autocomplete","off","required","",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModel.captchaText",1,"color-highlight"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"],[1,"divider"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-facebook","mt-4","rounded-s"],[1,"fab","fa-facebook-f","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-twitter","mt-2","rounded-s"],[1,"fab","fa-twitter","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-dark-dark","mt-2","rounded-s"],[1,"fab","fa-apple","text-center"]],template:function(e,i){if(e&1){let r=P();n(0,"div",2),u(1,"app-progress-spinner",3),n(2,"div",4)(3,"p",5),d(4),s(5,"translate"),o(),n(6,"p"),d(7),s(8,"translate"),o(),n(9,"form",6,0),E("ngSubmit",function(){return S(r),f(i.onActionSubmit())}),n(11,"div",7),u(12,"i",8),n(13,"input",9),s(14,"translate"),s(15,"translate"),w("ngModelChange",function(b){return S(r),x(i.dataModel.email,b)||(i.dataModel.email=b),f(b)}),o(),n(16,"label",10),d(17),s(18,"translate"),s(19,"translate"),o(),u(20,"i",11)(21,"i",12),o(),n(22,"div",13),u(23,"i",14),n(24,"input",15,1),s(26,"translate"),w("ngModelChange",function(b){return S(r),x(i.dataModel.password,b)||(i.dataModel.password=b),f(b)}),o(),n(27,"label",16),d(28),s(29,"translate"),o(),u(30,"i",11)(31,"i",12),n(32,"i",17),s(33,"translate"),s(34,"translate"),E("click",function(){return S(r),f(i.hidePassword=!i.hidePassword)})("keydown.enter",function(){return S(r),f(i.hidePassword=!i.hidePassword)})("keydown.space",function(){return S(r),f(i.hidePassword=!i.hidePassword)}),o()(),C(35,ki,12,11),n(36,"div",18)(37,"input",19),w("ngModelChange",function(b){return S(r),x(i.dataModel.isRemember,b)||(i.dataModel.isRemember=b),f(b)}),o(),n(38,"label",20),d(39),s(40,"translate"),o(),u(41,"i",21)(42,"i",22),o(),C(43,Vi,3,4,"button",23),C(44,Di,3,6,"button",24),C(45,Li,9,10,"div",25),C(46,Fi,13,9),o()()()}e&2&&(t(),m("optionsInfoAreaId",i.constructorInfoAreaId),t(3),h(" ",l(5,27,"TRANSLATOR.WELCOME")," "),t(3),h(" ",l(8,29,"TITLE.To_Login_To_your_Account_Enter_Your_Credentials_Below")," "),t(6),m("placeholder",Tt("",l(14,31,"AUTH.INPUT.MOBILE")," / ",l(15,33,"AUTH.INPUT.EMAIL"))),A("ngModel",i.dataModel.email),m("disabled",!i.formInfo.submitButtonEnabled),t(4),De("",l(18,35,"AUTH.INPUT.MOBILE")," / ",l(19,37,"AUTH.INPUT.EMAIL")),t(7),m("placeholder",y(l(26,39,"AUTH.INPUT.PASSWORD")))("type",i.hidePassword?"password":"text"),A("ngModel",i.dataModel.password),m("disabled",!i.formInfo.submitButtonEnabled),t(4),v(l(29,41,"AUTH.INPUT.PASSWORD")),t(4),m("title",y(l(33,43,i.hidePassword?"AUTH.SHOW_PASSWORD":"AUTH.HIDE_PASSWORD")))("ngClass",i.hidePassword?"fa-eye":"fa-eye-slash"),bt("aria-label",l(34,45,i.hidePassword?"AUTH.SHOW_PASSWORD":"AUTH.HIDE_PASSWORD")),t(3),I(i.firstRun?-1:35),t(2),A("ngModel",i.dataModel.isRemember),t(2),v(l(40,47,"TITLE.remember_me")),t(4),I(i.onNavigate?-1:43),t(),I(i.onNavigate?-1:44),t(),I(i.onNavigate?-1:45),t(),I(i.loadDemoTheme?46:-1))},dependencies:[yt,z,te,J,qe,X,Z,ie,ne,re,ee,$,oe,ae,j,Qe,W],encapsulation:2});var it=Ae;var xe=class xe{constructor(a,e){this.cmsToastrService=a;this.cmsAuthService=e;this.constructorInfoAreaId=this.constructor.name}ngOnInit(){this.cmsToastrService.typeOrderActionLogout(),this.cmsAuthService.logout()}};xe.\u0275fac=function(e){return new(e||xe)(_(H),_(Wt))},xe.\u0275cmp=B({type:xe,selectors:[["app-auth-signout"]],standalone:!1,decls:3,vars:0,consts:[[1,"card","card-style"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"p"),d(2,"..."),o()())},encapsulation:2});var nt=xe;var we=class we{constructor(a,e,i,r,p){this.coreConfigurationService=a;this.cmsToastrService=e;this.cdr=i;this.publicHelper=r;this.translate=p;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new wt;this.publicHelper.processService.cdr=this.cdr}ngOnInit(){let a=this.constructor.name+"ServiceUserMembershipRule";this.translate.get("MESSAGE.get_the_rules").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreConfigurationService.ServiceUserMembershipRule().subscribe({next:e=>{e.isSuccess?this.dataModelResult=e:this.cmsToastrService.typeErrorGetOne(e.errorMessage),this.publicHelper.processService.processStop(a)},error:e=>{this.cmsToastrService.typeErrorGetOne(e),this.publicHelper.processService.processStop(a,!1)}})}};we.\u0275fac=function(e){return new(e||we)(_(Ge),_(H),_(O),_(k),_(G))},we.\u0275cmp=B({type:we,selectors:[["app-auth-signup-rule"]],standalone:!1,decls:13,vars:12,consts:[["mat-dialog-title",""],[3,"optionsInfoAreaId"],[3,"innerHTML"],[1,"ntk-button-row",2,"text-align","left"],["type","button","mat-dialog-close","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red"],["type","button","cdkFocusInitial","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"mat-dialog-close"]],template:function(e,i){e&1&&(n(0,"h2",0),d(1),s(2,"translate"),o(),n(3,"mat-dialog-content"),u(4,"app-progress-spinner",1)(5,"div",2),o(),n(6,"mat-dialog-actions",3)(7,"button",4),d(8),s(9,"translate"),o(),n(10,"button",5),d(11),s(12,"translate"),o()()),e&2&&(t(),v(l(2,6,"TITLE.rules")),t(3),m("optionsInfoAreaId",i.constructorInfoAreaId),t(),m("innerHTML",i.dataModelResult.item,vt),t(3),h(" ",l(9,8,"ACTION.DENY")," "),t(2),m("mat-dialog-close",!0),t(),h(" ",l(12,10,"ACTION.ACCEPT")," "))},dependencies:[Vt,Dt,Ft,Lt,j,W],encapsulation:2});var rt=we;var Wi=["vform"],qi=()=>["/auth/signinbyusername"],ji=()=>["/auth/forgot-password"];function Ki(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.INPUT.FIRSTNAME")," "),t(3),v(l(5,4,"MESSAGE.required")))}function Yi(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.INPUT.LASTNAME")," "),t(3),v(l(5,4,"MESSAGE.required")))}function zi(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.INPUT.EMAIL")," "),t(3),v(l(5,4,"MESSAGE.required")))}function Qi(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.INPUT.PASSWORD")," "),t(3),v(l(5,4,"MESSAGE.required")))}function Ji(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),n(3,"strong"),d(4),s(5,"translate"),o()()),c&2&&(t(),h(" ",l(2,2,"AUTH.INPUT.CONFIRM_PASSWORD")," "),t(3),v(l(5,4,"MESSAGE.required")))}function Xi(c,a){c&1&&(n(0,"mat-error"),d(1),s(2,"translate"),o()),c&2&&(t(),h(" ",l(2,1,"MESSAGE.Password_and_password_confirmation_are_different")," "))}function Zi(c,a){if(c&1&&(n(0,"button",36),d(1),s(2,"translate"),o()),c&2){let e=g(),i=M(9);m("disabled",!e.roulaccespt||i.invalid||!e.formInfo.submitButtonEnabled),t(),h(" ",l(2,2,"AUTH.REGISTER.CREATE_AN_ACCOUNT")," ")}}function $i(c,a){c&1&&(n(0,"div",37)(1,"div",39)(2,"a",40),d(3),s(4,"translate"),o()(),n(5,"div",41)(6,"a",40),d(7),s(8,"translate"),o()()()),c&2&&(t(2),m("routerLink",R(8,qi)),t(),v(l(4,4,"AUTH.REGISTER.RETURN_TO_LOGIN")),t(3),m("routerLink",R(9,ji)),t(),v(l(8,6,"AUTH.FORGOT.TITLE")))}function en(c,a){c&1&&(u(0,"div",38),n(1,"a",42),u(2,"i",43),d(3),s(4,"translate"),o(),n(5,"a",44),u(6,"i",45),d(7),s(8,"translate"),o(),n(9,"a",46),u(10,"i",47),d(11),s(12,"translate"),o()),c&2&&(t(3),v(l(4,3,"AUTH.LOGIN_WITH_FACEBOOK")),t(4),v(l(8,5,"AUTH.LOGIN_WITH_TWITTER")),t(4),v(l(12,7,"AUTH.LOGIN_WITH_APPLE")))}var Pe=class Pe{constructor(a,e,i,r,p,b,T,Se,ft){this.cmsToastrService=a;this.router=e;this.coreAuthService=i;this.dialog=r;this.cdr=p;this.publicHelper=b;this.translate=T;this.pageInfo=Se;this.cmsStoreService=ft;this.constructorInfoAreaId=this.constructor.name;this.unsubscribe=[];this.formInfo=new ce;this.roulaccespt="";this.captchaModel=new Q;this.countAutoCaptchaOrder=1;this.passwordIsValid=!1;this.dataModel=new Ot;this.onCaptchaOrderInProcess=!1;this.RePasswordModel="";this.PasswordView=!1;this.loginAuto=!0;this.hidePassword=!0;this.loadDemoTheme=be.loadDemoTheme;this.onNavigate=!1;this.publicHelper.processService.cdr=this.cdr,this.unsubscribe.push(this.cmsStoreService.getState(L=>L.tokenInfoStore).subscribe(L=>F(this,null,function*(){this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.siteId>0&&this.router.navigate(["/dashboard"],{}),this.cmsStoreService?.getStateAll?.tokenInfoStore&&this.cmsStoreService?.getStateAll?.tokenInfoStore?.access?.userId>0&&this.router.navigate([D],{})})))}ngOnInit(){this.onCaptchaOrder(),this.translate.get("AUTH.REGISTER.SIGNUP").subscribe(a=>{this.pageInfo.updateTitle(a)})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(a=>a.unsubscribe())}onActionSubmit(){if(!this.dataModel.email||this.dataModel.email.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_your_email_address").subscribe(r=>{this.formInfo.submitResultMessage=r,this.formInfo.submitResultMessageType=1,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}if(!this.dataModel.name||this.dataModel.name?.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_your_name").subscribe(r=>{this.formInfo.submitResultMessage=r,this.formInfo.submitResultMessageType=1,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}if(!this.dataModel.family||this.dataModel.family.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_your_last_name").subscribe(r=>{this.formInfo.submitResultMessage=r,this.formInfo.submitResultMessageType=1,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}if(!this.dataModel.password||this.dataModel.password.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.enter_the_password").subscribe(r=>{this.formInfo.submitResultMessage=r,this.formInfo.submitResultMessageType=1,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}if(!this.RePasswordModel||this.RePasswordModel.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.re_enter_the_password").subscribe(r=>{this.formInfo.submitResultMessage=r,this.formInfo.submitResultMessageType=1,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}if(!this.dataModel.captchaText||this.dataModel.captchaText.length===0){this.formInfo.submitResultMessageType=1,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage);return}if(this.dataModel.password!==this.RePasswordModel){this.translate.get("ERRORMESSAGE.MESSAGE.password_and_re_password_are_different").subscribe(r=>{this.formInfo.submitResultMessage=r,this.dataModel.password="",this.RePasswordModel="",this.formInfo.submitResultMessageType=1,this.cmsToastrService.typeErrorRegistery(this.formInfo.submitResultMessage)});return}this.formInfo.submitResultMessageType=3,this.dataModel.captchaKey=this.captchaModel.key;let a=this.constructor.name+".ServiceSignupUser";if(this.translate.get("MESSAGE.Creating_new_account").subscribe(r=>{this.publicHelper.processService.processStart(a,r,this.constructorInfoAreaId)}),localStorage.getItem(K)){let r=localStorage.getItem(K).split(",");r&&r.length>0&&(this.dataModel.siteId=+r[r.length-1])}let e=+localStorage.getItem(Ke);e>0&&(this.dataModel.resellerSiteId=e);let i=+localStorage.getItem(Ye);i>0&&(this.dataModel.resellerUserId=i),this.coreAuthService.ServiceSignupUser(this.dataModel).subscribe({next:r=>{if(r.isSuccess){if(this.cmsToastrService.typeSuccessRegistery(),this.formInfo.submitResultMessageType=3,this.loginAuto||setTimeout(()=>this.router.navigate(["/"]),500),this.loginAuto){let p=new We;p.captchaKey=this.dataModel.captchaKey,p.captchaText=this.dataModel.captchaText,p.email=this.dataModel.email,p.password=this.dataModel.password,p.siteId=this.dataModel.siteId,p.mobile=this.dataModel.mobile;let b=this.constructor.name+"ServiceSigninUser";this.translate.get("MESSAGE.login_to_user_account").subscribe(T=>{this.publicHelper.processService.processStart(a,T,this.constructorInfoAreaId)}),this.coreAuthService.ServiceSigninUser(p).subscribe({next:T=>{T.isSuccess?(this.cmsToastrService.typeSuccessLogin(),this.cmsStoreService.setState({type:Ce,payload:r.item}),r.item.access.siteId>0?(this.onNavigate=!0,this.router.navigate(["/dashboard"])):(this.onNavigate=!0,this.router.navigate([D]))):(this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeErrorLogin(T.errorMessage),setTimeout(()=>this.router.navigate(["/"]),500)),this.publicHelper.processService.processStop(b)},error:T=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(T),this.publicHelper.processService.processStop(b)}})}}else this.cmsToastrService.typeErrorRegistery(r.errorMessage),this.formInfo.submitButtonEnabled=!0,this.formInfo.submitResultMessageType=1,this.onCaptchaOrder();this.publicHelper.processService.processStop(a)},error:r=>{this.cmsToastrService.typeError(r),this.formInfo.submitResultMessageType=1,this.formInfo.submitButtonEnabled=!0,this.onCaptchaOrder(),this.publicHelper.processService.processStop(a)}})}onRoulaccespt(){if(this.roulaccespt)return;this.dialog.open(rt,{height:"90%",width:"90%"}).afterClosed().subscribe(e=>{this.roulaccespt=e})}passwordValid(a){this.passwordIsValid=a}onCaptchaOrder(){if(this.onCaptchaOrderInProcess)return;this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,this.dataModel.captchaText="";let a=this.constructor.name+".ServiceCaptcha";this.translate.get("MESSAGE.get_security_photo_content").subscribe(e=>{this.publicHelper.processService.processStart(a,e,this.constructorInfoAreaId)}),this.coreAuthService.ServiceCaptcha().subscribe({next:e=>{if(e.isSuccess){this.captchaModel=e.item,this.expireDate=e.item.expire;let i=new Date,p=new Date(e.item.expire).getTime()-i.getTime();this.countAutoCaptchaOrder<10&&(this.countAutoCaptchaOrder=this.countAutoCaptchaOrder+1,setTimeout(()=>{this.onCaptchaOrder()},p))}else this.cmsToastrService.typeErrorGetCpatcha(e.errorMessage);this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)},error:e=>{this.onCaptchaOrderInProcess=!1,this.publicHelper.processService.processStop(a)}})}ActionPasswordGenerator(){let a="0123456789abcdefghijklmnopqrstuvwxyz",i="";for(let r=0;r<=10;r++){let p=Math.floor(Math.random()*a.length);i+=a.substring(p,p+1)}this.dataModel.password=i,this.RePasswordModel=i,this.PasswordView=!0}};Pe.\u0275fac=function(e){return new(e||Pe)(_(H),_(U),_(N),_(kt),_(O),_(k),_(G),_(le),_(q))},Pe.\u0275cmp=B({type:Pe,selectors:[["app-auth-signup"]],viewQuery:function(e,i){if(e&1&&Ct(Wi,5),e&2){let r;It(r=Et())&&(i.formGroup=r.first)}},standalone:!1,decls:107,vars:94,consts:[["vform","ngForm"],["Name",""],["family",""],["email",""],["password",""],["RePassword",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"font-800","color-highlight","mb-0"],[1,"form","form-horizontal",3,"ngSubmit"],[1,"input-style","no-borders","has-icon","validate-field","mb-4"],[1,"fa","fa-user","color-highlight"],["type","name","id","dataModel.name","name","dataModel.name","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.name",1,"color-highlight"],[1,"fa","fa-times","disabled","invalid","color-red-dark"],[1,"fa","fa-check","disabled","valid","color-green-dark"],["type","name","id","dataModel.family","name","dataModel.family","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.family",1,"color-highlight"],[1,"fa","fa-at","color-highlight"],["type","email","id","dataModel.email","cmsKeyboardForce","en","name","dataModel.email","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.email",1,"color-highlight"],[1,"fa","fa-lock","color-highlight"],["type","password","id","dataModel.password","cmsKeyboardForce","en","name","dataModel.password","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","dataModel.password",1,"color-highlight"],["type","password","id","RePassword","name","RePasswordModel","autocomplete","off","minlength","3","maxlength","50","required","",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","placeholder","ngModel","disabled"],["for","RePassword",1,"color-highlight"],["alt","",1,"mb-3",3,"click","src"],["matSuffix","",3,"click"],[1,"fa","fa-quote-left","color-highlight"],["name","dataModel.captchaText","id","dataModel.captchaText","type","text","autocomplete","off","required","","minlength","5","maxlength","5",1,"form-control","validate-name",2,"direction","ltr !important","text-align","center",3,"ngModelChange","ngModel","disabled","placeholder"],["for","dataModel.captchaText",1,"color-highlight"],[1,"form-check","icon-check","text-start","float-start","opacity-50"],["type","checkbox","id","roulaccespt","name","roulaccespt",1,"form-check-input",3,"ngModelChange","ngModel"],["for","roulaccespt",1,"form-check-label","font-13",3,"click"],[1,"icon-check-1","far","fa-circle","color-gray-dark","font-14"],[1,"icon-check-2","fa","fa-check-circle","font-14","color-highlight"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",2,"width","100%",3,"disabled"],[1,"row","pt-3","mb-3"],[1,"divider"],[1,"col-6","text-start"],[1,"color-highlight",3,"routerLink"],[1,"col-6","text-end"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-facebook","mt-4","rounded-s"],[1,"fab","fa-facebook-f","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-twitter","mt-2","rounded-s"],[1,"fab","fa-twitter","text-center"],[1,"btn","btn-icon","text-start","btn-full","btn-s","font-600","font-13","bg-dark-dark","mt-2","rounded-s"],[1,"fab","fa-apple","text-center"]],template:function(e,i){if(e&1){let r=P();n(0,"div",6),u(1,"app-progress-spinner",7),n(2,"p",8),d(3),s(4,"translate"),o(),n(5,"p"),d(6),s(7,"translate"),o(),n(8,"form",9,0),E("ngSubmit",function(){return S(r),f(i.onActionSubmit())}),n(10,"div",10),u(11,"i",11),n(12,"input",12,1),s(14,"translate"),w("ngModelChange",function(b){return S(r),x(i.dataModel.name,b)||(i.dataModel.name=b),f(b)}),o(),n(15,"label",13),d(16),s(17,"translate"),o(),u(18,"i",14)(19,"i",15),n(20,"em"),d(21),s(22,"translate"),o(),C(23,Ki,6,6,"mat-error"),o(),n(24,"div",10),u(25,"i",11),n(26,"input",16,2),s(28,"translate"),w("ngModelChange",function(b){return S(r),x(i.dataModel.family,b)||(i.dataModel.family=b),f(b)}),o(),n(29,"label",17),d(30),s(31,"translate"),o(),u(32,"i",14)(33,"i",15),n(34,"em"),d(35),s(36,"translate"),o(),C(37,Yi,6,6,"mat-error"),o(),n(38,"div",10),u(39,"i",18),n(40,"input",19,3),s(42,"translate"),w("ngModelChange",function(b){return S(r),x(i.dataModel.email,b)||(i.dataModel.email=b),f(b)}),o(),n(43,"label",20),d(44),s(45,"translate"),o(),u(46,"i",14)(47,"i",15),n(48,"em"),d(49),s(50,"translate"),o(),C(51,zi,6,6,"mat-error"),o(),n(52,"div",10),u(53,"i",21),n(54,"input",22,4),s(56,"translate"),w("ngModelChange",function(b){return S(r),x(i.dataModel.password,b)||(i.dataModel.password=b),f(b)}),o(),n(57,"label",23),d(58),s(59,"translate"),o(),u(60,"i",14)(61,"i",15),n(62,"em"),d(63),s(64,"translate"),o(),C(65,Qi,6,6,"mat-error"),o(),n(66,"div",10),u(67,"i",21),n(68,"input",24,5),s(70,"translate"),w("ngModelChange",function(b){return S(r),x(i.RePasswordModel,b)||(i.RePasswordModel=b),f(b)}),o(),n(71,"label",25),d(72),s(73,"translate"),o(),u(74,"i",14)(75,"i",15),n(76,"em"),d(77),s(78,"translate"),o(),C(79,Ji,6,6,"mat-error"),C(80,Xi,3,3,"mat-error"),o(),n(81,"img",26),E("click",function(){return S(r),f(i.onCaptchaOrder())}),o(),n(82,"mat-icon",27),E("click",function(){return S(r),f(i.onCaptchaOrder())}),d(83,"refresh"),o(),n(84,"div",10),u(85,"i",28),n(86,"input",29),s(87,"translate"),w("ngModelChange",function(b){return S(r),x(i.dataModel.captchaText,b)||(i.dataModel.captchaText=b),f(b)}),o(),n(88,"label",30),d(89),s(90,"translate"),o(),u(91,"i",14)(92,"i",15),n(93,"em"),d(94),s(95,"translate"),o()(),n(96,"div",31)(97,"input",32),w("ngModelChange",function(b){return S(r),x(i.roulaccespt,b)||(i.roulaccespt=b),f(b)}),o(),n(98,"label",33),E("click",function(){return S(r),f(i.onRoulaccespt())}),d(99),s(100,"translate"),o(),u(101,"i",34)(102,"i",35),o(),C(103,Zi,3,4,"button",36),C(104,$i,9,10,"div",37),u(105,"div",38),C(106,en,13,9),o()()}if(e&2){let r=M(13),p=M(27),b=M(41),T=M(55),Se=M(69);t(),m("optionsInfoAreaId",i.constructorInfoAreaId),t(2),h(" ",l(4,52,"AUTH.Sign.Up")," "),t(3),h(" ",l(7,54,"AUTH.REGISTER.DESC")," "),t(6),m("placeholder",y(l(14,56,"AUTH.INPUT.FIRSTNAME"))),A("ngModel",i.dataModel.name),m("disabled",!i.formInfo.submitButtonEnabled),t(4),v(l(17,58,"AUTH.INPUT.FIRSTNAME")),t(5),h("(",l(22,60,"TITLE.Necessary"),")"),t(2),I(r.errors!=null&&r.errors.required?23:-1),t(3),m("placeholder",y(l(28,62,"AUTH.INPUT.LASTNAME"))),A("ngModel",i.dataModel.family),m("disabled",!i.formInfo.submitButtonEnabled),t(4),v(l(31,64,"AUTH.INPUT.LASTNAME")),t(5),h("(",l(36,66,"TITLE.Necessary"),")"),t(2),I(p.errors!=null&&p.errors.required?37:-1),t(3),m("placeholder",y(l(42,68,"AUTH.INPUT.EMAIL"))),A("ngModel",i.dataModel.email),m("disabled",!i.formInfo.submitButtonEnabled),t(4),v(l(45,70,"AUTH.INPUT.EMAIL")),t(5),h("(",l(50,72,"TITLE.Necessary"),")"),t(2),I(b.errors!=null&&b.errors.required?51:-1),t(3),m("placeholder",y(l(56,74,"AUTH.INPUT.PASSWORD"))),A("ngModel",i.dataModel.password),m("disabled",!i.formInfo.submitButtonEnabled),t(4),v(l(59,76,"AUTH.INPUT.PASSWORD")),t(5),h("(",l(64,78,"TITLE.Necessary"),")"),t(2),I(T.errors!=null&&T.errors.required?65:-1),t(3),m("placeholder",y(l(70,80,"AUTH.INPUT.CONFIRM_PASSWORD"))),A("ngModel",i.RePasswordModel),m("disabled",!i.formInfo.submitButtonEnabled),t(4),v(l(73,82,"AUTH.INPUT.CONFIRM_PASSWORD")),t(5),h("(",l(78,84,"TITLE.Necessary"),")"),t(2),I(Se.errors!=null&&Se.errors.required?79:-1),t(),I((i.RePasswordModel==null?null:i.RePasswordModel.length)>0&&Se.value!==T.value?80:-1),t(),m("src",y(i.captchaModel.image),V),t(5),m("placeholder",y(l(87,86,"AUTH.INPUT.CAPTCHACODE"))),A("ngModel",i.dataModel.captchaText),m("disabled",!i.formInfo.submitButtonEnabled),t(3),v(l(90,88,"AUTH.INPUT.CAPTCHACODE")),t(5),h("(",l(95,90,"TITLE.Necessary"),")"),t(3),A("ngModel",i.roulaccespt),t(2),v(l(100,92,"TITLE.rules_accespt")),t(4),I(i.onNavigate?-1:103),t(),I(i.onNavigate?-1:104),t(2),I(i.loadDemoTheme?106:-1)}},dependencies:[z,te,J,qe,X,Z,ie,ne,re,ee,$,ve,oe,ae,j,Qe,W],encapsulation:2});var ot=Pe;function Xt(){let c=localStorage.getItem(Ie);if(c){if(c==="signinbyusername")return"signinbyusername";if(c==="signinbysms")return"signinbysms"}return"signinbysms"}var tn=[{path:"",component:Xe,data:{title:"ROUTE.REGISTER"},children:[{path:"signinbyusername",component:it,canActivate:[me],data:{title:"ROUTE.REGISTER.SIGNINBYUSERNAME"}},{path:"signinbysms",component:tt,canActivate:[me],data:{title:"ROUTE.REGISTER.SIGNINBYSMS"}},{path:"signout",component:nt,data:{title:"ROUTE.REGISTER.SIGNOUT"}},{path:"signup",component:ot,canActivate:[me],data:{title:"ROUTE.REGISTER.SIGNUP"}},{path:"forgot-password",component:Ze,canActivate:[me],data:{title:"ROUTE.REGISTER.FORGETPASSWORD"}},{path:"",redirectTo:Xt(),pathMatch:"full",data:{title:"ROUTE.REGISTER"}},{path:"**",redirectTo:Xt(),pathMatch:"full",data:{title:"ROUTE.REGISTER"}}]}],ue=class ue{};ue.\u0275fac=function(e){return new(e||ue)},ue.\u0275mod=ke({type:ue}),ue.\u0275inj=Ne({imports:[lt.forChild(tn),lt]});var at=ue;var he=class he{};he.\u0275fac=function(e){return new(e||he)},he.\u0275mod=ke({type:he}),he.\u0275inj=Ne({providers:[Pt,Ge,N,se],imports:[Mt,qt,at,Nt,Ht,Gt]});var Zt=he;export{Zt as AuthModule};
