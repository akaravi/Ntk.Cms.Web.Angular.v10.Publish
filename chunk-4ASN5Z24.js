import{a as io,b as oo}from"./chunk-6XUUXNWV.js";import{a as no}from"./chunk-XSBG6UYX.js";import{a as $i}from"./chunk-FNI7GNBM.js";import{a as to}from"./chunk-RX4A6MRL.js";import{a as Qi}from"./chunk-C6VEBZHM.js";import{a as eo}from"./chunk-JBOX4PUA.js";import{d as Zi}from"./chunk-O3XQOHUB.js";import{a as zi,b as Ji,c as Ki,d as Xi,e as Yi}from"./chunk-JOS6ODLD.js";import{j as Bt,k as Ht,l as Wt}from"./chunk-2KX5L3DL.js";import"./chunk-JF4PW4LW.js";import"./chunk-BBKOJKGF.js";import"./chunk-Z7LLDNBU.js";import{a as Ui}from"./chunk-LXDGOMHV.js";import{a as qi}from"./chunk-3OXB4ASU.js";import{c as Bi,d as Hi,e as Wi,g as ji}from"./chunk-UBA7IFYP.js";import{a as Oi}from"./chunk-7YJZQ2MB.js";import"./chunk-CU3OLILU.js";import{a as Gi}from"./chunk-R5M5JHUG.js";import{a as Ni}from"./chunk-AGZ2HKTS.js";import{a as et}from"./chunk-MDTY2GNU.js";import{b as Fi}from"./chunk-OPFAG3H4.js";import{a as $e}from"./chunk-XKBE4SHI.js";import{a as Y}from"./chunk-GHOZ2SNL.js";import{$b as Ai,Ab as ri,B as Rt,Bb as ai,Bc as Vi,Cb as li,Db as si,Dc as B,E as Dt,Eb as ci,F as Pt,Fb as di,Ga as Nt,Gb as pi,H as kt,Ha as Je,Hb as mi,Ia as Ke,Ja as Xe,Jb as ui,K as Lt,Kb as fi,L as Ue,Lb as Mi,M as qe,Mb as Ci,Nb as Si,O as Vt,Ob as hi,P as Gt,Pa as ue,Pb as gi,Qb as _i,R as Qe,Rb as vi,Sb as Ii,U as Ot,Wa as Zt,Wb as bi,Xa as $t,Xb as Ei,Ya as ei,Yb as wi,Zb as yi,_b as Ti,ac as xi,bc as Ri,cc as Di,fc as F,gc as U,kb as ti,ma as Q,n as xt,o as pe,oa as ze,r as me,s as Ne,u as Be,ub as ii,uc as X,v as He,vb as oi,vc as N,w as We,wc as Pi,x as je,xc as ki,yb as ni,zc as Li}from"./chunk-QFK6R63V.js";import{m as J}from"./chunk-WNRZ34IP.js";import{a as K}from"./chunk-AXHTCGA7.js";import{$d as L,$f as Yt,Bb as Le,Bd as pt,Cb as Ve,Db as Ge,E as _t,Ed as jt,Fa as r,Gd as te,H as vt,Hb as R,Hc as Fe,Ib as ae,Ic as ce,Jb as le,Jc as j,Ka as M,Kd as Ut,Mb as d,Nb as E,Nc as de,Nd as qt,O as It,Ob as S,Od as V,P as bt,Pa as k,Pc as Tt,Qa as Pe,Sb as T,Sd as z,Ta as re,Tb as A,Td as H,Ub as x,Ud as Ye,Va as h,Vb as D,Vc as At,Wb as lt,X as De,Xa as q,Yd as Qt,Zb as Oe,Zd as O,_b as se,_d as Ze,bc as g,ca as u,cb as ke,cc as _,da as f,dc as yt,de as zt,df as mt,ef as P,ib as c,jb as l,kb as s,lb as I,le as Jt,oe as Kt,p as ht,pb as w,q as gt,qb as y,qd as Ft,qf as Xt,rb as be,sb as b,uc as G,vb as v,vd as st,wd as ct,xb as m,yb as Et,yd as dt,zb as wt}from"./chunk-MDNBQXON.js";import{i as ne}from"./chunk-SEDBTTTN.js";var fe=class fe{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};fe.\u0275fac=function(e){return new(e||fe)},fe.\u0275cmp=k({type:fe,selectors:[["app-core-user"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&I(0,"router-outlet")},dependencies:[Ft],encapsulation:2});var tt=fe;function mo(o,n){if(o&1){let e=b();l(0,"li")(1,"mat-checkbox",1),v("change",function(){let t=u(e).$implicit,a=m();return f(a.onActionSelect(t))}),d(2),s()()}if(o&2){let e=n.$implicit,i=m();r(),c("checked",i.fieldsStatus.get(e.id))("disabled",i.optionDisabled),r(),S(" ",e.title," ")}}var Ce=class Ce{constructor(n,e,i,t,a,C){this.coreEnumService=n;this.categoryService=e;this.cdr=i;this.publicHelper=t;this.translate=a;this.cmsToastrService=C;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new V;this.dataModelSelect=[];this.dataIdsSelect=[];this.formControl=new He;this.fieldsStatus=new Map;this.optionDisabled=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionChange=new q;this.optionSelectAdded=new q;this.optionSelectRemoved=new q;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){this.DataGetAll()}DataGetAll(){let n=new H;n.rowPerPage=50,n.accessLoad=!0;let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(n).subscribe({next:i=>{i.isSuccess?(this.dataModelResult=i,this.dataModelResult.listItems.forEach(t=>this.fieldsStatus.set(t.id,!1)),this.dataIdsSelect.forEach(t=>this.fieldsStatus.set(t,!0)),this.dataModelResult.listItems.forEach(t=>{this.fieldsStatus.get(t.id)&&this.dataModelSelect.push(t)})):this.cmsToastrService.typeErrorMessage(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionSelect(n){this.fieldsStatus.get(n.id)?(this.fieldsStatus.set(n.id,!1),this.optionSelectRemoved.emit(n),this.dataModelSelect.splice(this.dataModelSelect.indexOf(n),1)):(this.fieldsStatus.set(n.id,!0),this.optionSelectAdded.emit(n),this.dataModelSelect.push(n)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(n){typeof n==typeof Array(Number)?n.forEach(e=>{this.dataIdsSelect.push(e)}):typeof n==typeof Array(Xt)&&n.forEach(e=>{this.dataIdsSelect.push(e.id)}),this.dataIdsSelect.forEach(e=>this.fieldsStatus.set(e,!0))}onActionButtonReload(){this.DataGetAll()}};Ce.\u0275fac=function(e){return new(e||Ce)(M(L),M(Kt),M(G),M(B),M(F),M(N))},Ce.\u0275cmp=k({type:Ce,selectors:[["app-core-usergroup-selectionlist"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},standalone:!1,decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"change","checked","disabled"]],template:function(e,i){e&1&&(l(0,"ul"),h(1,mo,3,3,"li",0),s()),e&2&&(r(),c("ngForOf",i.dataModelResult.listItems))},dependencies:[ce,ti],encapsulation:2});var it=Ce;var fo=["*"];function Mo(o,n){if(o&1&&(l(0,"label",11),d(1),s()),o&2){let e=m();c("for",lt("app-cms-site-selector-",e.id)),r(),E(e.optionLabel)}}function Co(o,n){if(o&1&&(l(0,"mat-option",12)(1,"span"),d(2),s()()),o&2){let e=n.$implicit,i=m();c("value",e)("disabled",i.optionDisabled),r(2),E(i.displayOption(e))}}function So(o,n){o&1&&I(0,"i",13)}function ho(o,n){o&1&&I(0,"i",14)}function go(o,n){if(o&1){let e=b();l(0,"i",15),v("click",function(){u(e);let t=m();return f(t.onActionSelectClear())}),s()}}function _o(o,n){o&1&&(l(0,"em"),d(1),g(2,"translate"),s()),o&2&&(r(),S("(",_(2,1,"TITLE.Necessary"),")"))}var $=class ${constructor(n,e,i,t,a,C){this.coreEnumService=n;this.cmsToastrService=e;this.cdr=i;this.publicHelper=t;this.translate=a;this.categoryService=C;this.id=++$.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new V;this.dataModelSelect=new P;this.formControl=new He;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new q;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(It(""),_t(1500),vt(),bt(n=>typeof n=="string"||typeof n=="number"?this.DataGetAll(n||""):[]))}displayFn(n){return n?n.titleML:void 0}displayOption(n){return n?n.titleML:void 0}DataGetAll(n){return ne(this,null,function*(){let e=new H;e.rowPerPage=20,e.accessLoad=!0;let i=new z;i.propertyName="Title",i.value=n,i.searchType=pt.Contains,i.clauseType=ct.Or,e.filters.push(i),n&&typeof+n=="number"&&+n>0&&(i=new z,i.propertyName="Id",i.value=n,i.searchType=pt.Equal,i.clauseType=ct.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(a=>{this.publicHelper.processService.processStart(t,a,this.constructorInfoAreaId)}),yield ht(this.categoryService.ServiceGetAll(e)).then(a=>(this.dataModelResult=a,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),a.listItems))})}onActionSelect(n){this.dataModelSelect=n,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(n){return this.filteredOptions.pipe(gt(e=>(e.find(i=>i.id===n.id)||e.push(n),e)))}onActionSelectForce(n){if(typeof n=="number"&&n>0){if(this.dataModelSelect&&this.dataModelSelect.id===n)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===n)){let e=this.dataModelResult.listItems.find(i=>i.id===n);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(n).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof n==typeof P){this.filteredOptions=this.push(n),this.dataModelSelect=n,this.formControl.setValue(n);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new P,this.loadOptions()}};$.nextId=0,$.\u0275fac=function(e){return new(e||$)(M(L),M(N),M(G),M(B),M(F),M(O))},$.\u0275cmp=k({type:$,selectors:[["app-core-cpmainmenu-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:fo,decls:13,vars:18,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],["class","fa fa-times  action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=b();Et(),l(0,"div",1),I(1,"app-progress-spinner",2),h(2,Mo,2,3,"label",3),I(3,"input",4),l(4,"mat-autocomplete",5,0),v("optionSelected",function(C){return u(t),f(i.onActionSelect(C.option.value))}),h(6,Co,3,3,"mat-option",6),g(7,"async"),s(),h(8,So,1,0,"i",7)(9,ho,1,0,"i",8)(10,go,1,0,"i",9)(11,_o,3,3,"em",10),wt(12),s()}if(e&2){let t=R(5);r(),c("optionsInfoAreaId",i.constructorInfoAreaId),r(),c("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),r(),c("placeholder",D(i.optionPlaceholder))("id",lt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),ke("disabled",i.optionDisabled?!0:null),r(),c("displayWith",i.displayFn),r(2),c("ngForOf",_(7,16,i.filteredOptions)),r(2),c("ngIf",!i.formControl.valid),r(),c("ngIf",i.optionRequired&&i.formControl.valid),r(),c("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),r(),c("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[ce,j,pe,me,Lt,Rt,$t,Zt,ei,Q,Y,Tt,U],encapsulation:2});var Se=$;var bo=["vform"],Eo=o=>({direction:o}),wo=()=>["fa"];function yo(o,n){if(o&1){let e=b();l(0,"app-cms-enum-record-status-selector",34),x("modelChange",function(t){u(e);let a=m();return A(a.dataModel.recordStatus,t)||(a.dataModel.recordStatus=t),f(t)}),s()}if(o&2){let e=m();T("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function To(o,n){if(o&1&&(l(0,"mat-error"),d(1),l(2,"strong"),d(3),g(4,"translate"),s()()),o&2){let e=m(2);r(),S(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),r(2),E(_(4,2,"MESSAGE.required"))}}function Ao(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",35),d(2),s(),l(3,"input",36,3),x("ngModelChange",function(t){u(e);let a=m();return A(a.dataModel.title,t)||(a.dataModel.title=t),f(t)}),s(),l(5,"em"),d(6),s(),h(7,To,5,4,"mat-error",37),s()}if(o&2){let e=R(4),i=m();r(2),E(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),r(),c("placeholder",D(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),T("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessEditField)),r(3),S("",e.value.length," / 100"),r(),c("ngIf",e.errors==null?null:e.errors.required)}}function xo(o,n){o&1&&(l(0,"mat-error"),d(1," TitleResourceLanguage is "),l(2,"strong"),d(3),g(4,"translate"),s()()),o&2&&(r(3),E(_(4,1,"MESSAGE.required")))}function Ro(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",38),d(2),s(),l(3,"input",39,4),x("ngModelChange",function(t){u(e);let a=m();return A(a.dataModel.title,t)||(a.dataModel.title=t),f(t)}),s(),l(5,"em"),d(6),s(),h(7,xo,5,3,"mat-error",37),s()}if(o&2){let e=R(4),i=m();r(2),E(i.fieldsInfo.titleResourceLanguage==null?null:i.fieldsInfo.titleResourceLanguage.fieldTitle),r(),c("placeholder",D(i.fieldsInfo.titleResourceLanguage==null?null:i.fieldsInfo.titleResourceLanguage.fieldTitle)),T("ngModel",i.dataModel.title),c("disabled",!(i.fieldsInfo.titleResourceLanguage!=null&&i.fieldsInfo.titleResourceLanguage.accessEditField)),r(3),S("",e.value.length," / 100"),r(),c("ngIf",e.errors==null?null:e.errors.required)}}function Do(o,n){if(o&1&&(l(0,"option",40),d(1),s()),o&2){let e=n.$implicit;c("value",e.value),r(),S(" ",e.description," ")}}function Po(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",41),d(2),s(),l(3,"input",42,5),x("ngModelChange",function(t){u(e);let a=m();return A(a.dataModel.routeAddressLink,t)||(a.dataModel.routeAddressLink=t),f(t)}),s(),l(5,"em"),d(6),s()()}if(o&2){let e=R(4),i=m();r(2),E(i.fieldsInfo.routeAddressLink==null?null:i.fieldsInfo.routeAddressLink.fieldTitle),r(),c("placeholder",D(i.fieldsInfo.routeAddressLink==null?null:i.fieldsInfo.routeAddressLink.fieldTitle)),T("ngModel",i.dataModel.routeAddressLink),c("disabled",!(i.fieldsInfo.routeAddressLink!=null&&i.fieldsInfo.routeAddressLink.accessEditField)),r(3),S("",e.value.length," / 100")}}function ko(o,n){if(o&1){let e=b();l(0,"div",43)(1,"div",44)(2,"h5",45),d(3),s()(),l(4,"div",46)(5,"div",47)(6,"input",48),x("ngModelChange",function(t){u(e);let a=m();return A(a.dataModel.routeAddressBlankPage,t)||(a.dataModel.routeAddressBlankPage=t),f(t)}),s(),I(7,"label",49),s()()()}if(o&2){let e=m();r(3),S(" ",e.fieldsInfo.routeAddressBlankPage==null?null:e.fieldsInfo.routeAddressBlankPage.fieldTitle),r(3),T("ngModel",e.dataModel.routeAddressBlankPage)}}function Lo(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",50),d(2),s(),l(3,"input",51,6),x("ngModelChange",function(t){u(e);let a=m();return A(a.dataModel.color,t)||(a.dataModel.color=t),f(t)}),s(),I(5,"ngx-mat-color-toggle",52)(6,"ngx-mat-color-picker",53,7),s()}if(o&2){let e=R(7),i=m();r(2),E(i.fieldsInfo.routeAddressLink==null?null:i.fieldsInfo.routeAddressLink.fieldTitle),r(),ae("background",i.dataModel.color),c("placeholder",D(i.fieldsInfo.color==null?null:i.fieldsInfo.color.fieldTitle))("ngxMatColorPicker",e),T("ngModel",i.dataModel.color),c("disabled",!(i.fieldsInfo.color!=null&&i.fieldsInfo.color.accessEditField)),r(2),c("for",e),r(),c("touchUi",!0)("color","primary")}}function Vo(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",54),d(2),s(),l(3,"input",55,8),v("iconPickerSelect",function(t){u(e);let a=m();return f(a.onIconPickerSelect(t))}),x("ngModelChange",function(t){u(e);let a=m();return A(a.dataModel.icon,t)||(a.dataModel.icon=t),f(t)}),s()()}if(o&2){let e=m();r(2),E(e.fieldsInfo.icon==null?null:e.fieldsInfo.icon.fieldTitle),r(),c("placeholder",D(e.fieldsInfo.icon==null?null:e.fieldsInfo.icon.fieldTitle))("iconPicker",e.dataModel.icon)("ipIconPack",Oe(8,wo))("ipPosition","top"),T("ngModel",e.dataModel.icon),c("disabled",!(e.fieldsInfo.icon!=null&&e.fieldsInfo.icon.accessEditField))}}function Go(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",56),d(2),s(),l(3,"input",57,9),x("ngModelChange",function(t){u(e);let a=m();return A(a.dataModel.showInMenuOrder,t)||(a.dataModel.showInMenuOrder=t),f(t)}),s()()}if(o&2){let e=m();r(2),E(e.fieldsInfo.showInMenuOrder==null?null:e.fieldsInfo.showInMenuOrder.fieldTitle),r(),c("placeholder",D(e.fieldsInfo.showInMenuOrder==null?null:e.fieldsInfo.showInMenuOrder.fieldTitle)),T("ngModel",e.dataModel.showInMenuOrder),c("disabled",!(e.fieldsInfo.showInMenuOrder!=null&&e.fieldsInfo.showInMenuOrder.accessEditField))}}function Oo(o,n){o&1&&(l(0,"mat-error"),d(1," Description is "),l(2,"strong"),d(3),g(4,"translate"),s()()),o&2&&(r(3),E(_(4,1,"MESSAGE.required")))}function Fo(o,n){if(o&1){let e=b();l(0,"div",21)(1,"label",58),d(2),s(),l(3,"textarea",59,10),x("ngModelChange",function(t){u(e);let a=m();return A(a.dataModel.description,t)||(a.dataModel.description=t),f(t)}),d(5,"            "),s(),l(6,"em"),d(7),s(),h(8,Oo,5,3,"mat-error",37),s()}if(o&2){let e=R(4),i=m();r(2),E(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle),r(),c("placeholder",D(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle)),T("ngModel",i.dataModel.description),r(4),S("",e.value.length," / 500"),r(),c("ngIf",e.errors==null?null:e.errors.required)}}function No(o,n){if(o&1){let e=b();l(0,"div",60)(1,"button",61),v("click",function(){u(e);let t=m();return f(t.onFormCancel())}),d(2),g(3,"translate"),s(),l(4,"button",62),d(5),g(6,"translate"),s()()}if(o&2){m();let e=R(9);r(2),E(_(3,3,"ACTION.BACK")),r(2),c("disabled",!e.form.valid),r(),S(" ",_(6,5,"ACTION.NEXT")," ")}}function Bo(o,n){if(o&1){let e=b();l(0,"div",43)(1,"div",44)(2,"h5",63),d(3),s()(),l(4,"div",46)(5,"div",47)(6,"input",64),x("ngModelChange",function(t){u(e);let a=m();return A(a.dataModel.showInMenu,t)||(a.dataModel.showInMenu=t),f(t)}),s(),I(7,"label",65),s()()()}if(o&2){let e=m();r(3),S(" ",e.fieldsInfo.showInMenu==null?null:e.fieldsInfo.showInMenu.fieldTitle),r(3),T("ngModel",e.dataModel.showInMenu)}}function Ho(o,n){if(o&1){let e=b();l(0,"div",43)(1,"div",44)(2,"h5",66),d(3),s()(),l(4,"div",46)(5,"div",47)(6,"input",67),x("ngModelChange",function(t){u(e);let a=m();return A(a.dataModel.showInAccessAdminAllowToProfessionalData,t)||(a.dataModel.showInAccessAdminAllowToProfessionalData=t),f(t)}),s(),I(7,"label",68),s()()()}if(o&2){let e=m();r(3),S(" ",e.fieldsInfo.showInAccessAdminAllowToProfessionalData==null?null:e.fieldsInfo.showInAccessAdminAllowToProfessionalData.fieldTitle),r(3),T("ngModel",e.dataModel.showInAccessAdminAllowToProfessionalData)}}function Wo(o,n){if(o&1&&(l(0,"div",60)(1,"button",69),d(2),g(3,"translate"),s(),l(4,"button",70),d(5),g(6,"translate"),s()()),o&2){m();let e=R(9);r(2),S(" ",_(3,3,"ACTION.BEFOR")," "),r(2),c("disabled",!e.form.valid),r(),S(" ",_(6,5,"ACTION.SAVE")," ")}}function jo(o,n){o&1&&(l(0,"mat-icon"),d(1,"call_end"),s())}function Uo(o,n){o&1&&(l(0,"mat-icon"),d(1,"call_end"),s())}function qo(o,n){o&1&&(l(0,"mat-icon"),d(1,"forum"),s())}function Qo(o,n){o&1&&(l(0,"mat-icon"),d(1,"forum"),s())}var he=class he extends Oi{constructor(e,i,t,a,C,p,W,xe,at,Re,co){super(a,new P,W,Re);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreCpMainMenuService=a;this.coreCpMainMenuCmsUserGroupService=C;this.cmsToastrService=p;this.publicHelper=W;this.cmsStoreService=xe;this.cdr=at;this.translate=Re;this.tokenHelper=co;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.appLanguage="fa";this.dataModelResult=new qt;this.dataModel=new P;this.formInfo=new Ye;this.dataModelEnumMenuPlaceTypeResult=new V;this.fileManagerOpenForm=!1;this.dataCoreCpMainMenuIds=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.getEnumMenuPlaceType()}getEnumMenuPlaceType(){this.coreEnumService.ServiceMenuPlaceTypeEnum().subscribe({next:e=>{this.dataModelEnumMenuPlaceTypeResult=e}})}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreCpMainMenuService.setAccessLoad(),this.coreCpMainMenuService.setAccessDataType(Ut.Editor),this.coreCpMainMenuService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.dataAccessModel=i.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.DataGetAllMenuCoreUserGroup(),this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataGetAllMenuCoreUserGroup(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Getting_access_category_from_the_server").subscribe(a=>{this.formInfo.formAlert=a}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(a=>{this.publicHelper.processService.processStart(e,a,this.constructorInfoAreaId)});let i=new H,t=new z;t.propertyName="CmsCpMainMenu_Id",t.value=this.requestId,i.filters.push(t),this.coreCpMainMenuCmsUserGroupService.ServiceGetAll(i).subscribe({next:a=>{this.dataCoreCpMainMenuCmsUserGroupModel=a.listItems;let C=[];this.dataCoreCpMainMenuCmsUserGroupModel.forEach(p=>{C.push(p.cmsUserGroup_Id)}),this.dataCoreCpMainMenuIds=C,a.isSuccess?this.formInfo.formAlert="":(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(p=>{this.formInfo.formAlert=p}),this.formInfo.formError=a.errorMessage,this.cmsToastrService.typeErrorMessage(a.errorMessage)),this.publicHelper.processService.processStop(e)},error:a=>{this.cmsToastrService.typeError(a),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)});this.dataModel.color=this.dataModel.color?.toString(),this.coreCpMainMenuService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex&&(this.formGroup.valid||(this.cmsToastrService.typeErrorFormInvalid(),setTimeout(()=>{i.selectedIndex=e.previouslySelectedIndex},10)))}onActionSelectorModuleSelect(e){this.dataModel.linkModuleId=null,e&&e.id>0&&(this.dataModel.linkModuleId=e.id)}onActionSelectorSelect(e){this.dataModel.linkParentId=null,e&&e.id>0&&(this.dataModel.linkParentId=e.id)}onActionSelectorUserCategorySelect(e){this.dataCoreCpMainMenuModel=e}onActionSelectorUserCategorySelectAdded(e){let i=new mt;i.cmsUserGroup_Id=e.id,i.cmsCpMainMenu_Id=this.dataModel.id,this.coreCpMainMenuCmsUserGroupService.ServiceAdd(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(a=>{this.formInfo.formAlert=a}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(a=>{this.formInfo.formAlert=a}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t)}})}onActionSelectorUserCategorySelectRemoved(e){let i=new mt;i.cmsUserGroup_Id=e.id,i.cmsCpMainMenu_Id=this.dataModel.id,this.coreCpMainMenuCmsUserGroupService.ServiceDeleteEntity(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.Deletion_from_this_group_Was_Successful").subscribe(a=>{this.formInfo.formAlert=a}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(a=>{this.formInfo.formAlert=a}),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t)}})}onIconPickerSelect(e){this.dataModel.icon=e}};he.\u0275fac=function(i){return new(i||he)(M(Ke),M(Je),M(L),M(O),M(Ze),M(N),M(B),M(J),M(G),M(F),M(X))},he.\u0275cmp=k({type:he,selectors:[["app-core-user-edit"]],viewQuery:function(i,t){if(i&1&&Le(bo,5),i&2){let a;Ve(a=Ge())&&(t.formGroup=a.first)}},standalone:!1,features:[re],decls:50,vars:51,consts:[["vform","ngForm"],["stepper",""],["MenuPlaceType","ngModel"],["Title",""],["TitleResourceLanguage",""],["RouteAddressLink",""],["color",""],["colorPicker",""],["icon",""],["ShowInMenuOrder",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit","ngStyle"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.titleML",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleML","id","dataModel.titleML",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],["id","dataModel.menuPlaceType","name","dataModel.menuPlaceType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","d-flex mb-3",4,"ngIf"],["class","form-actions",4,"ngIf"],["state","seo",3,"label"],[3,"optionChange","optionSelectAdded","optionSelectRemoved","optionSelectForce","optionDisabled"],["matStepperIcon","main"],["matStepperIcon","seo"],["matStepperIcon","file"],["matStepperIcon","loaction"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[4,"ngIf"],["for","dataModel.titleResourceLanguage",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleResourceLanguage","minlength","3","maxlength","100","id","dataModel.titleResourceLanguage",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],[3,"value"],["for","dataModel.routeAddressLink",1,"color-highlight"],["matInput","","type","text","name","dataModel.routeAddressLink","minlength","3","maxlength","100","id","dataModel.routeAddressLink",1,"form-control","validate-name","input-ltr",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"d-flex","mb-3"],[1,"pt-1"],["data-trigger-switch","dataModel.routeAddressBlankPage",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.routeAddressBlankPage","name","dataModel.routeAddressBlankPage",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.routeAddressBlankPage",1,"custom-control-label"],["for","dataModel.color",1,"color-highlight"],["matInput","","type","text","name","dataModel.color","id","dataModel.color",1,"form-control","validate-name",3,"ngModelChange","ngxMatColorPicker","ngModel","placeholder","disabled"],["matSuffix","",3,"for"],[3,"touchUi","color"],["for","dataModel.icon",1,"color-highlight"],["matInput","","type","text","name","dataModel.icon","id","dataModel.icon",1,"form-control","validate-name",3,"iconPickerSelect","ngModelChange","iconPicker","ipIconPack","ipPosition","ngModel","placeholder","disabled"],["for","dataModel.showInMenuOrder",1,"color-highlight"],["matInput","","type","text","name","dataModel.showInMenuOrder","id","dataModel.showInMenuOrder",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["data-trigger-switch","dataModel.showInMenu",1,"font-600","font-14"],["type","checkbox","id","dataModel.showInMenu","name","dataModel.showInMenu",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.showInMenu",1,"custom-control-label"],["data-trigger-switch","dataModel.showInAccessAdminAllowToProfessionalData",1,"font-600","font-14"],["type","checkbox","id","dataModel.showInAccessAdminAllowToProfessionalData","name","dataModel.showInAccessAdminAllowToProfessionalData",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.showInAccessAdminAllowToProfessionalData",1,"custom-control-label"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let a=b();l(0,"div",11),I(1,"app-progress-spinner",12),l(2,"div",13)(3,"p",14),d(4),s(),l(5,"p"),d(6),g(7,"translate"),s(),l(8,"form",15,0),v("ngSubmit",function(){return u(a),f(t.onFormSubmit())}),l(10,"mat-vertical-stepper",16,1),v("selectionChange",function(p){u(a);let W=R(11);return f(t.onStepClick(p,W))}),l(12,"mat-step",17),g(13,"translate"),h(14,yo,1,5,"app-cms-enum-record-status-selector",18),l(15,"app-core-cpmainmenu-selector",19),g(16,"translate"),v("optionChange",function(p){return u(a),f(t.onActionSelectorSelect(p))}),s(),h(17,Ao,8,7,"div",20),l(18,"div",21)(19,"label",22),d(20),g(21,"translate"),s(),l(22,"input",23),x("ngModelChange",function(p){return u(a),A(t.dataModel.titleML,p)||(t.dataModel.titleML=p),f(p)}),s()(),h(23,Ro,8,7,"div",20),l(24,"div",21)(25,"select",24,2),x("ngModelChange",function(p){return u(a),A(t.dataModel.menuPlaceType,p)||(t.dataModel.menuPlaceType=p),f(p)}),h(27,Do,2,2,"option",25),s()(),h(28,Po,7,6,"div",20)(29,ko,8,2,"div",26)(30,Lo,8,11,"div",20)(31,Vo,5,9,"div",20)(32,Go,5,5,"div",20)(33,Fo,9,6,"div",20)(34,No,7,7,"div",27),s(),l(35,"mat-step",28),g(36,"translate"),l(37,"p"),d(38),g(39,"translate"),s(),h(40,Bo,8,2,"div",26)(41,Ho,8,2,"div",26),l(42,"app-core-module-selector",19),g(43,"translate"),v("optionChange",function(p){return u(a),f(t.onActionSelectorModuleSelect(p))}),s(),l(44,"app-core-usergroup-selectionlist",29),v("optionChange",function(p){return u(a),f(t.onActionSelectorUserCategorySelect(p))})("optionSelectAdded",function(p){return u(a),f(t.onActionSelectorUserCategorySelectAdded(p))})("optionSelectRemoved",function(p){return u(a),f(t.onActionSelectorUserCategorySelectRemoved(p))}),s(),h(45,Wo,7,7,"div",27),s(),h(46,jo,2,0,"ng-template",30)(47,Uo,2,0,"ng-template",31)(48,qo,2,0,"ng-template",32)(49,Qo,2,0,"ng-template",33),s()()()()}i&2&&(r(),c("optionsInfoAreaId",t.constructorInfoAreaId),r(3),S(" ",t.formInfo.formTitle," "),r(2),S(" ",_(7,35,"TITLE.Be_Careful_When_Entering_Information")," "),r(2),c("ngStyle",se(49,Eo,t.tokenInfo.access.direction)),r(4),c("label",D(_(13,37,"TITLE.Menu_Profile"))),r(2),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),r(),c("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",_(16,39,"TITLE.Parent_Menu")),r(2),c("ngIf",t.fieldsInfo.title==null?null:t.fieldsInfo.title.accessWatchField),r(3),E(_(21,41,"TITLE.TitleML")),r(2),T("ngModel",t.dataModel.titleML),c("disabled",!0),r(),c("ngIf",t.fieldsInfo.titleResourceLanguage==null?null:t.fieldsInfo.titleResourceLanguage.accessWatchField),r(2),T("ngModel",t.dataModel.menuPlaceType),r(2),c("ngForOf",t.dataModelEnumMenuPlaceTypeResult.listItems),r(),c("ngIf",t.fieldsInfo.routeAddressLink==null?null:t.fieldsInfo.routeAddressLink.accessWatchField),r(),c("ngIf",t.fieldsInfo.routeAddressBlankPage==null?null:t.fieldsInfo.routeAddressBlankPage.accessWatchField),r(),c("ngIf",t.fieldsInfo.color==null?null:t.fieldsInfo.color.accessWatchField),r(),c("ngIf",t.fieldsInfo.icon==null?null:t.fieldsInfo.icon.accessWatchField),r(),c("ngIf",t.fieldsInfo.showInMenuOrder==null?null:t.fieldsInfo.showInMenuOrder.accessWatchField),r(),c("ngIf",t.fieldsInfo.description==null?null:t.fieldsInfo.description.accessWatchField),r(),c("ngIf",t.formInfo.formSubmitAllow),r(),c("label",D(_(36,43,"TITLE.ACEESS"))),r(3),E(_(39,45,"TITLE.Specify_access_to_this_content")),r(2),c("ngIf",t.fieldsInfo.showInMenu==null?null:t.fieldsInfo.showInMenu.accessWatchField),r(),c("ngIf",t.fieldsInfo.showInAccessAdminAllowToProfessionalData==null?null:t.fieldsInfo.showInAccessAdminAllowToProfessionalData.accessWatchField),r(),c("optionDisabled",!1)("optionSelectForce",t.dataModel.linkModuleId)("optionPlaceholder",_(43,47,"TITLE.MODULE")),r(2),c("optionSelectForce",t.dataCoreCpMainMenuIds)("optionDisabled",!1),r(),c("ngIf",t.formInfo.formSubmitAllow))},dependencies:[ce,j,de,je,Pt,kt,pe,xt,Dt,me,Ne,Ue,qe,We,Be,Qe,Ot,ue,Q,ci,di,pi,mi,si,et,Y,Ni,eo,it,Wt,Ht,Bt,io,Se,U],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var ee=he;var zo=["vform"],Jo=o=>({direction:o});function Ko(o,n){if(o&1){let e=b();l(0,"app-cms-enum-record-status-selector",17),x("modelChange",function(t){u(e);let a=m();return A(a.dataModel.recordStatus,t)||(a.dataModel.recordStatus=t),f(t)}),s()}if(o&2){let e=m();T("model",e.dataModel.recordStatus),c("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Xo(o,n){if(o&1&&(l(0,"mat-error"),d(1),l(2,"strong"),d(3),g(4,"translate"),s()()),o&2){let e=m();r(),S(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),r(2),E(_(4,2,"MESSAGE.required"))}}function Yo(o,n){o&1&&(l(0,"mat-error"),d(1," Description is "),l(2,"strong"),d(3),g(4,"translate"),s()()),o&2&&(r(3),E(_(4,1,"MESSAGE.required")))}function Zo(o,n){if(o&1){let e=b();l(0,"div",18)(1,"button",19),v("click",function(){u(e);let t=m();return f(t.onFormCancel())}),I(2,"i",20),d(3),g(4,"translate"),s(),l(5,"button",21),I(6,"i",22),d(7),g(8,"translate"),s()()}if(o&2){m();let e=R(9);r(3),S(" ",_(4,3,"ACTION.CANCEL")," "),r(2),c("disabled",!e.form.valid),r(2),S(" ",_(8,5,"ACTION.SAVE")," ")}}var ge=class ge extends Gi{constructor(e,i,t,a,C,p,W,xe,at,Re){super(a,new P,C,at);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreCpMainMenuService=a;this.publicHelper=C;this.cmsToastrService=p;this.cmsStoreService=W;this.cdr=xe;this.translate=at;this.tokenHelper=Re;this.requestParentId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResult=new V;this.dataModel=new P;this.formInfo=new Ye;this.dataModelEnumMenuPlaceTypeResult=new V;this.fileManagerOpenForm=!1;this.tokenInfo=new Yt;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=+e.parentId||0),this.requestParentId>0&&(this.dataModel.linkParentId=this.requestParentId),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(e=>{this.formInfo.formTitle=e}),this.getEnumMenuPlaceType(),this.DataGetAccess()}getEnumMenuPlaceType(){this.coreEnumService.ServiceMenuPlaceTypeEnum().subscribe({next:e=>{this.dataModelEnumMenuPlaceTypeResult=e}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreCpMainMenuService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0,model:i.item})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionSelectorSelect(e){this.dataModel.linkParentId=null,e&&e.id>0&&(this.dataModel.linkParentId=e.id)}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};ge.\u0275fac=function(i){return new(i||ge)(M(Ke),M(Je),M(L),M(O),M(B),M(N),M(J),M(G),M(F),M(X))},ge.\u0275cmp=k({type:ge,selectors:[["app-core-user-add"]],viewQuery:function(i,t){if(i&1&&Le(zo,5),i&2){let a;Ve(a=Ge())&&(t.formGroup=a.first)}},standalone:!1,features:[re],decls:31,vars:27,consts:[["vform","ngForm"],["Title",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit","ngStyle"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[4,"ngIf"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let a=b();l(0,"div",3),I(1,"app-progress-spinner",4),l(2,"div",5)(3,"p",6),d(4),s(),l(5,"p"),d(6),g(7,"translate"),s(),l(8,"form",7,0),v("ngSubmit",function(){return u(a),f(t.onFormSubmit())}),h(10,Ko,1,5,"app-cms-enum-record-status-selector",8),l(11,"app-core-cpmainmenu-selector",9),g(12,"translate"),v("optionChange",function(p){return u(a),f(t.onActionSelectorSelect(p))}),s(),l(13,"div",10)(14,"label",11),d(15),s(),l(16,"input",12,1),x("ngModelChange",function(p){return u(a),A(t.dataModel.title,p)||(t.dataModel.title=p),f(p)}),s(),l(18,"em"),d(19),s(),h(20,Xo,5,4,"mat-error",13),s(),l(21,"div",10)(22,"label",14),d(23),s(),l(24,"textarea",15,2),x("ngModelChange",function(p){return u(a),A(t.dataModel.description,p)||(t.dataModel.description=p),f(p)}),d(26,"        "),s(),l(27,"em"),d(28),s(),h(29,Yo,5,3,"mat-error",13),s(),h(30,Zo,9,7,"div",16),s()()()}if(i&2){let a=R(17),C=R(25);r(),c("optionsInfoAreaId",t.constructorInfoAreaId),r(3),S(" ",t.formInfo.formTitle," "),r(2),S(" ",_(7,21,"TITLE.Be_Careful_When_Entering_Information")," "),r(2),c("ngStyle",se(25,Jo,t.tokenInfo.access.direction)),r(2),c("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),r(),c("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",_(12,23,"TITLE.Parent_Menu")),r(4),E(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),c("placeholder",D(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),T("ngModel",t.dataModel.title),r(3),S("",a.value.length," / 100"),r(),c("ngIf",a.errors==null?null:a.errors.required),r(3),E(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),r(),c("placeholder",D(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),T("ngModel",t.dataModel.description),r(4),S("",C.value.length," / 500"),r(),c("ngIf",C.errors==null?null:C.errors.required),r(),c("ngIf",t.formInfo.formSubmitAllow)}},dependencies:[j,de,je,pe,me,Ne,Ue,qe,We,Be,Qe,Q,et,Y,Se,U],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var _e=ge;function en(o,n){if(o&1){let e=b();l(0,"button",12),v("click",function(){u(e);let t=m();return f(t.onActionAdd())}),d(1),g(2,"translate"),s()}o&2&&(r(),E(_(2,1,"ACTION.ADD")))}function tn(o,n){if(o&1){let e=b();l(0,"button",13),v("click",function(){u(e);let t=m();return f(t.onActionEdit())}),d(1),g(2,"translate"),s()}o&2&&(r(),E(_(2,1,"ACTION.EDIT")))}function on(o,n){if(o&1){let e=b();l(0,"button",14),v("click",function(){u(e);let t=m();return f(t.onActionButtonReload())}),l(1,"mat-icon",15),g(2,"translate"),d(3,"refresh"),s()()}o&2&&(r(),c("title",D(_(2,2,"ACTION.RELOAD"))))}function nn(o,n){if(o&1){let e=b();l(0,"mat-tree-node",16),v("click",function(){let t=u(e).$implicit,a=m();return f(a.onActionSelect(t))}),I(1,"button",17)(2,"i",18),d(3),s()}if(o&2){let e=n.$implicit,i=n.dataIndex,t=m();le("ntk-tree-odd",i%2)("ntk-tree-even",!(i%2))("ntk-tree-selected",t.dataModelSelect.id>0&&t.dataModelSelect.id===e.id),r(2),c("ngClass",e.icon),r(),S(" \xA0\xA0\xA0\xA0 ",e.titleML," ")}}function rn(o,n){if(o&1){let e=b();l(0,"mat-nested-tree-node")(1,"li")(2,"div",19),v("click",function(){let t=u(e).$implicit,a=m();return f(a.onActionSelect(t))}),l(3,"button",20),v("click",function(){let t=u(e).$implicit,a=m();return f(a.onActionSelect(t))}),l(4,"mat-icon",21),d(5),s()(),I(6,"i",18),d(7),s(),l(8,"ul"),be(9,22),s()()()}if(o&2){let e=n.$implicit,i=m();r(2),le("ntk-tree-selected",i.dataModelSelect.id>0&&i.dataModelSelect.id===e.id),r(),ke("aria-label","Toggle "+e.titleML),r(2),S(" ",i.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),r(),ae("color",e.color),c("ngClass",e.icon),r(),S(" \xA0\xA0\xA0\xA0 ",e.titleML," "),r(),le("category-tree-invisible",!i.treeControl.isExpanded(e))}}var ve=class ve{constructor(n,e,i,t,a,C,p,W,xe){this.cmsToastrService=n;this.coreEnumService=e;this.categoryService=i;this.dialog=t;this.tokenHelper=a;this.cmsStoreService=C;this.translate=p;this.cdr=W;this.publicHelper=xe;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new P;this.dataModelResult=new V;this.filterModel=new H;this.treeControl=new bi(n=>n.children);this.dataSource=new Di;this.optionChange=new q;this.optionReload=()=>this.onActionButtonReload();this.hasChild=(n,e)=>!!e.children&&e.children.length>0;this.publicHelper.processService.cdr=this.cdr,this.filterModel.sortColumn="ShowInMenuOrder",this.filterModel.sortType=te.Ascending}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){setTimeout(()=>{this.DataGetAll()},500),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(n=>n.tokenInfoStore).subscribe(n=>ne(this,null,function*(){this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let n=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(n,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAllTree(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(n)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(n,!1)}})}onActionSelect(n){this.dataModelSelect=n,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new P,this.DataGetAll()}onActionSelectForce(n){}onActionAdd(){let n=0;this.dataModelSelect&&this.dataModelSelect.id>0&&(n=this.dataModelSelect.id);let e=new Nt;e.disableClose=!0,e.autoFocus=!0,e.data={parentId:n},this.dialog.open(_e,e).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&(this.dataModelSelect=t.model,this.onActionEdit())})}onActionEdit(){let n=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(n=this.dataModelSelect.id),n===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(ee,{height:"90%",panelClass:e,enterAnimationDuration:K.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:K.cmsViewConfig.exitAnimationDuration,data:{id:n}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let n=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(n=this.dataModelSelect.id),n===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(e=>{this.cmsToastrService.typeErrorSelected(e)});return}}};ve.\u0275fac=function(e){return new(e||ve)(M(N),M(L),M(O),M(Xe),M(X),M(J),M(F),M(G),M(B))},ve.\u0275cmp=k({type:ve,selectors:[["app-core-cpmainmenu-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:14,vars:13,consts:[[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[1,"category-tree","cursor-pointer",3,"dataSource","treeControl"],["matTreeNodePadding","",3,"ntk-tree-odd","ntk-tree-even","ntk-tree-selected","click",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"title"],["matTreeNodePadding","",3,"click"],["type","button","mat-icon-button","","disabled","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["aria-hidden","true",3,"ngClass"],[1,"mat-tree-node",3,"click"],["type","button","mat-icon-button","","matTreeNodeToggle","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"mat-icon-rtl-mirror"],["matTreeNodeOutlet",""]],template:function(e,i){e&1&&(l(0,"app-cms-html-tree",0),w(1,1),d(2),g(3,"translate"),y(),w(4,2),h(5,en,3,3,"button",3)(6,tn,3,3,"button",4)(7,on,4,4,"button",5),y(),w(8,6),I(9,"app-progress-spinner",7),l(10,"mat-tree",8),h(11,nn,4,8,"mat-tree-node",9)(12,rn,10,10,"mat-nested-tree-node",10),s(),y(),be(13,11),s()),e&2&&(c("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),r(2),S(" ",_(3,11,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),r(3),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessAddRow),r(),c("ngIf",(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)&&(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),r(),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessWatchRow),r(2),c("optionsInfoAreaId",i.constructorInfoAreaId),r(),c("dataSource",i.dataSource)("treeControl",i.treeControl),r(2),c("matTreeNodeDefWhen",i.hasChild))},dependencies:[Fe,j,ze,ue,yi,wi,Ti,Ri,xi,Ei,Ai,Y,$i,U],encapsulation:2});var ot=ve;var ln=()=>[5,10,20,100],sn=o=>({display:o});function cn(o,n){if(o&1){let e=b();l(0,"div",41)(1,"a",42),v("click",function(){u(e);let t=m();return f(t.onActionButtonNewRow())}),I(2,"i",43)(3,"br"),s(),l(4,"p",44),d(5),g(6,"translate"),s()()}o&2&&(r(5),E(_(6,1,"ACTION.ADD")))}function dn(o,n){if(o&1){let e=b();l(0,"div",41)(1,"a",45),v("click",function(){u(e);let t=m();return f(t.onActionButtonEditRow(t.tableRowSelected))}),I(2,"i",46)(3,"br"),s(),l(4,"p",44),d(5),g(6,"translate"),s()()}o&2&&(r(5),E(_(6,1,"ACTION.EDIT")))}function pn(o,n){if(o&1){let e=b();l(0,"div",41)(1,"a",47),v("click",function(){u(e);let t=m();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),I(2,"i",48)(3,"br"),s(),l(4,"p",44),d(5),g(6,"translate"),s()()}o&2&&(r(5),E(_(6,1,"ACTION.DELETE")))}function mn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),S(" ",e.fieldsInfo.icon==null?null:e.fieldsInfo.icon.fieldTitle," ")}}function un(o,n){if(o&1&&(l(0,"mat-cell"),I(1,"i",50),s()),o&2){let e=n.$implicit;r(),ae("color",e.color),c("ngClass",e.icon)}}function fn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),S(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Mn(o,n){if(o&1&&(l(0,"mat-cell"),d(1),s()),o&2){let e=n.$implicit;r(),S(" ",e.id," ")}}function Cn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),S(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Sn(o,n){if(o&1&&I(0,"select",53),o&2){let e=m().$implicit,i=m();c("contentService",i.contentService)("row",e)("ngStyle",se(3,sn,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function hn(o,n){if(o&1&&(l(0,"mat-cell"),I(1,"i",51),g(2,"statusIconClass"),h(3,Sn,1,5,"select",52),s()),o&2){let e=n.$implicit,i=m();r(),c("ngClass",_(2,2,e.recordStatus)),r(2),c("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function gn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),S(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)}}function _n(o,n){if(o&1&&(l(0,"mat-cell"),d(1),s()),o&2){let e=n.$implicit;r(),S(" ",e.title," ")}}function vn(o,n){o&1&&(l(0,"mat-header-cell",49),d(1),g(2,"translate"),s()),o&2&&(r(),S(" ",_(2,1,"TITLE.TitleML")))}function In(o,n){if(o&1&&(l(0,"mat-cell"),d(1),s()),o&2){let e=n.$implicit;r(),S(" ",e.titleML," ")}}function bn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),S(" ",e.fieldsInfo.showInMenu==null?null:e.fieldsInfo.showInMenu.fieldTitle)}}function En(o,n){if(o&1&&(l(0,"mat-cell"),I(1,"i",51),g(2,"boolclass"),s()),o&2){let e=n.$implicit;r(),c("ngClass",_(2,1,e.showInMenu))}}function wn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),S(" ",e.fieldsInfo.showInAccessAdminAllowToProfessionalData==null?null:e.fieldsInfo.showInAccessAdminAllowToProfessionalData.fieldTitle)}}function yn(o,n){if(o&1&&(l(0,"mat-cell"),I(1,"i",51),g(2,"boolclass"),s()),o&2){let e=n.$implicit;r(),c("ngClass",_(2,1,e.showInAccessAdminAllowToProfessionalData))}}function Tn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),S(" ",e.fieldsInfo.menuPlaceType==null?null:e.fieldsInfo.menuPlaceType.fieldTitle," ")}}function An(o,n){if(o&1&&(l(0,"mat-cell"),d(1),g(2,"enums"),s()),o&2){let e=n.$implicit,i=m();r(),S(" ",yt(2,1,e.menuPlaceType,i.dataModelEnumMenuPlaceTypeResult.listItems)," ")}}function xn(o,n){if(o&1&&(l(0,"mat-header-cell",49),d(1),s()),o&2){let e=m();r(),S(" ",e.fieldsInfo.showInMenuOrder==null?null:e.fieldsInfo.showInMenuOrder.fieldTitle," ")}}function Rn(o,n){if(o&1&&(l(0,"mat-cell"),d(1),s()),o&2){let e=n.$implicit;r(),S(" ",e.showInMenuOrder," ")}}function Dn(o,n){o&1&&(l(0,"mat-header-cell"),d(1),g(2,"translate"),s()),o&2&&(r(),S(" ",_(2,1,"TITLE.OPTION")," "))}function Pn(o,n){if(o&1&&(l(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),d(3,"more_vert"),s()(),I(4,"mat-menu",null,2),s()),o&2){let e=R(5);r(),c("matMenuTriggerFor",e)}}function kn(o,n){o&1&&(l(0,"mat-header-cell",49),d(1,". "),s())}function Ln(o,n){o&1&&(l(0,"mat-cell")(1,"mat-icon",56),d(2,"reorder"),s()())}function Vn(o,n){o&1&&I(0,"mat-header-row")}function Gn(o,n){if(o&1){let e=b();l(0,"mat-row",57),v("click",function(){let t=u(e).$implicit,a=m();return f(a.onActionTableRowSelect(t))}),s()}if(o&2){let e=n.$implicit,i=n.dataIndex,t=m();le("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id)),c("cdkDragData",e)}}var Ie=class Ie extends Bi{constructor(e,i,t,a,C,p,W,xe,at,Re,co,Fn){super(e,new P,Re,a,xe);this.contentService=e;this.cmsConfirmationDialogService=i;this.cmsToastrService=t;this.tokenHelper=a;this.coreEnumService=C;this.cdr=p;this.cmsStoreService=W;this.translate=xe;this.pageInfo=at;this.publicHelper=Re;this.themeService=co;this.dialog=Fn;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new H;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Icon","Id","RecordStatus","TitleML","ShowInMenu","ShowInAccessAdminAllowToProfessionalData","MenuPlaceType","ShowInMenuOrder","position"];this.tabledisplayedColumnsMobileSource=["Icon","Id","RecordStatus","TitleML","ShowInMenu","ShowInAccessAdminAllowToProfessionalData","MenuPlaceType","ShowInMenuOrder","position"];this.dataModelEnumMenuPlaceTypeResult=new V;this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:po=>this.onSubmitOptionsSearch(po)},this.filteModelContent.sortColumn="ShowInMenuOrder",this.filteModelContent.sortType=te.Ascending}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>ne(this,null,function*(){this.tokenInfo=e,this.DataGetAll()})),this.getEnumMenuPlaceType()}getEnumMenuPlaceType(){this.coreEnumService.ServiceMenuPlaceTypeEnum().subscribe({next:e=>{this.dataModelEnumMenuPlaceTypeResult=e}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new P);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){let t=new z;t.propertyName="LinkParentId",t.value=this.categoryModelSelected.id,i.filters.push(t)}this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=te.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=te.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=te.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onTableDropRow(e){let i=this.tableSource.data.findIndex(a=>a===e.item.data),t=new Qt;t.id=this.tableSource.data[i].id,t.centerId=this.tableSource.data[e.currentIndex].id,i>e.currentIndex?t.actionGo=dt.GoUp:t.actionGo=dt.GoDown,this.contentService.ServiceEditStep(t).subscribe({next:a=>{a.isSuccess?(zi(this.tableSource.data,i,e.currentIndex),this.tableSource.data=this.tableSource.data.slice()):this.cmsToastrService.typeErrorMessage(a.errorMessage)},error:a=>{this.cmsToastrService.typeError(a)}})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new H,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.filteModelContent.sortColumn="ShowInMenuOrder",this.categoryModelSelected=e,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(_e,{height:"90%",panelClass:e,enterAnimationDuration:K.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:K.cmsViewConfig.exitAnimationDuration,data:{parentId:this.categoryModelSelected.id}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.onActionButtonEditRow(t.model)})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(ee,{height:"90%",panelClass:i,enterAnimationDuration:K.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:K.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(a=>{a&&a.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(a=>{i=a["MESSAGE.Please_Confirm"],t=a["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(a=>{if(a){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(p=>{this.publicHelper.processService.processStart(C,p,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:p=>{p.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(p=>{i.set(p,0)}),this.translate.get("MESSAGE.All").subscribe(p=>{i.set(p,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(p=>{this.publicHelper.processService.processStart(t,p,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:p=>{p.isSuccess?(this.translate.get("MESSAGE.All").subscribe(W=>{i.set(W,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(p.errorMessage),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}});let a=JSON.parse(JSON.stringify(this.filteModelContent)),C=new z;C.propertyName="RecordStatus",C.value=jt.Available,a.filters.push(C),this.contentService.ServiceGetCount(a).subscribe({next:p=>{p.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(W=>{i.set(W,p.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(p.errorMessage),this.publicHelper.processService.processStop(t)},error:p=>{this.cmsToastrService.typeError(p),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.filteModelContent.sortColumn="ShowInMenuOrder",this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}};Ie.\u0275fac=function(i){return new(i||Ie)(M(O),M($e),M(N),M(X),M(L),M(G),M(J),M(F),M(Li),M(B),M(Pi),M(Xe))},Ie.\u0275cmp=k({type:Ie,selectors:[["app-core-user-list"]],standalone:!1,features:[re],decls:68,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","","cdkDropList","",3,"matSortChange","cdkDropListDropped","dataSource","cdkDropListData"],["matColumnDef","Icon"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Id"],["matColumnDef","RecordStatus"],["matColumnDef","Title"],["matColumnDef","TitleML"],["matColumnDef","ShowInMenu"],["matColumnDef","ShowInAccessAdminAllowToProfessionalData"],["matColumnDef","MenuPlaceType"],["matColumnDef","ShowInMenuOrder"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],["matColumnDef","position"],[4,"matHeaderRowDef"],["cdkDrag","",3,"ntk-row-odd","ntk-row-even","ntk-row-selected","cdkDragData","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#FFFFFF"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],["aria-hidden","true",3,"ngClass"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["cdkDragHandle","",2,"pointer-events","all"],["cdkDrag","",3,"click","cdkDragData"]],template:function(i,t){if(i&1){let a=b();l(0,"app-cms-html-list",3),x("optionActionGuideNoticeDisplayChange",function(p){return u(a),A(t.viewGuideNotice,p)||(t.viewGuideNotice=p),f(p)}),v("optionOnActionButtonMemoRow",function(){return u(a),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(a),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(a),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(a),f(t.onActionButtonPrintRow())}),w(1,4),l(2,"app-core-cpmainmenu-tree",5),v("optionChange",function(p){return u(a),f(t.onActionSelectorSelect(p))}),s(),y(),be(3,6)(4,7),w(5,8),l(6,"a",9),v("click",function(){return u(a),f(t.viewGuideNotice=!t.viewGuideNotice)}),I(7,"i",10),s(),l(8,"a",9),v("click",function(){return u(a),f(t.onActionButtonReload())}),I(9,"i",11),s(),y(),w(10,12),l(11,"a",13),v("click",function(){return u(a),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),I(12,"mat-slide-toggle",14),d(13),g(14,"translate"),s(),l(15,"a",13),v("click",function(){return u(a),f(t.onActionButtonStatist())}),I(16,"mat-slide-toggle",14),d(17),g(18,"translate"),s(),y(),w(19,15),h(20,cn,7,3,"div",16),y(),w(21,17),h(22,dn,7,3,"div",16)(23,pn,7,3,"div",16),y(),w(24,18),l(25,"app-cms-search-list",19),x("optionsChange",function(p){return u(a),A(t.optionsSearch,p)||(t.optionsSearch=p),f(p)}),s(),l(26,"app-cms-statist-list",19),x("optionsChange",function(p){return u(a),A(t.optionsStatist,p)||(t.optionsStatist=p),f(p)}),s(),y(),w(27,20),l(28,"mat-table",21,0),v("matSortChange",function(){u(a);let p=R(29);return f(t.onTableSortData(p))})("cdkDropListDropped",function(p){return u(a),f(t.onTableDropRow(p))}),w(30,22),h(31,mn,2,1,"mat-header-cell",23)(32,un,2,3,"mat-cell",24),y(),w(33,25),h(34,fn,2,1,"mat-header-cell",23)(35,Mn,2,1,"mat-cell",24),y(),w(36,26),h(37,Cn,2,1,"mat-header-cell",23)(38,hn,4,4,"mat-cell",24),y(),w(39,27),h(40,gn,2,1,"mat-header-cell",23)(41,_n,2,1,"mat-cell",24),y(),w(42,28),h(43,vn,3,3,"mat-header-cell",23)(44,In,2,1,"mat-cell",24),y(),w(45,29),h(46,bn,2,1,"mat-header-cell",23)(47,En,3,3,"mat-cell",24),y(),w(48,30),h(49,wn,2,1,"mat-header-cell",23)(50,yn,3,3,"mat-cell",24),y(),w(51,31),h(52,Tn,2,1,"mat-header-cell",23)(53,An,3,4,"mat-cell",24),y(),w(54,32),h(55,xn,2,1,"mat-header-cell",23)(56,Rn,2,1,"mat-cell",24),y(),w(57,33),h(58,Dn,3,3,"mat-header-cell",34)(59,Pn,6,1,"mat-cell",35),y(),w(60,36),h(61,kn,2,0,"mat-header-cell",23)(62,Ln,3,0,"mat-cell",24),y(),h(63,Vn,1,0,"mat-header-row",37)(64,Gn,1,7,"mat-row",38),s(),y(),w(65,39),l(66,"mat-paginator",40,1),v("page",function(p){return u(a),f(t.onTablePageingData(p))}),s(),y(),s()}i&2&&(c("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),c("optionTreeDisplay",!0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.title),r(12),c("checked",t.optionsSearch.data.show),r(),S("",_(14,24,"ACTION.SEARCH")," "),r(3),c("checked",t.optionsStatist.data.show),r(),S("",_(18,26,"ACTION.STATIST")," "),r(3),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),r(2),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),r(),c("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(2),T("options",t.optionsSearch),r(),T("options",t.optionsStatist),r(2),c("dataSource",t.tableSource)("cdkDropListData",t.tableSource),r(35),c("matHeaderRowDef",t.tabledisplayedColumns),r(),c("matRowDefColumns",t.tabledisplayedColumns),r(2),c("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Oe(28,ln)))},dependencies:[Fe,j,de,ze,ue,Q,ii,oi,ni,ri,ai,li,ui,Mi,gi,Ci,fi,_i,Si,hi,vi,Ii,Hi,Wi,ji,Ui,Xi,Ki,Ji,ot,U,no,qi,Vi],encapsulation:2});var nt=Ie;var On=[{path:"",component:tt,children:[{path:"",component:nt},{path:"edit/:Id",component:ee}]}],ie=class ie{};ie.\u0275fac=function(e){return new(e||ie)},ie.\u0275mod=Pe({type:ie}),ie.\u0275inj=De({imports:[st.forChild(On),st]});var rt=ie;var oe=class oe{};oe.\u0275fac=function(e){return new(e||oe)},oe.\u0275mod=Pe({type:oe}),oe.\u0275inj=De({providers:[zt,L,O,Ze,Jt,$e],imports:[At,rt,Vt,Gt.withConfig({warnOnNgModelWithFormControl:"never"}),ki,Fi,Zi,Qi,to,oo,Yi]});var so=oe;export{so as CoreCpMainMenu};
