import{a as se}from"./chunk-BTN5MJ5N.js";import{B as Q,Dc as ae,K as X,Wa as ie,Xa as oe,Ya as re,fc as ne,gc as le,ma as Y,o as z,r as J,v as K}from"./chunk-QGGCLMQI.js";import{$d as ee,Bd as u,E as w,Fa as n,H as E,Hb as j,Ic as W,Jc as U,Je as te,Ka as d,Mb as b,Nb as I,O as D,Ob as G,Od as Z,P as F,Pa as P,Pc as $,Qf as C,Sd as c,Td as x,Va as h,Vb as H,Wb as _,Xa as V,bc as T,ca as M,cb as k,cc as O,da as S,ib as l,jb as s,kb as p,lb as f,p as L,q as R,sb as v,uc as B,vb as y,wd as m,xb as g,yb as N,zb as q}from"./chunk-MDNBQXON.js";import{i as A}from"./chunk-SEDBTTTN.js";var me=["*"];function ue(r,e){if(r&1&&(s(0,"label",11),b(1),p()),r&2){let i=g();l("for",_("app-cms-site-selector-",i.id)),n(),I(i.optionLabel)}}function fe(r,e){if(r&1&&(s(0,"mat-option",12)(1,"span"),b(2),p()()),r&2){let i=e.$implicit,o=g();l("value",i)("disabled",o.optionDisabled),n(2),I(o.displayOption(i))}}function he(r,e){r&1&&f(0,"i",13)}function ge(r,e){r&1&&f(0,"i",14)}function be(r,e){if(r&1){let i=v();s(0,"i",15),y("click",function(){M(i);let t=g();return S(t.onActionSelectClear())}),p()}}function Ce(r,e){r&1&&(s(0,"em"),b(1),T(2,"translate"),p()),r&2&&(n(),G("(",O(2,1,"TITLE.Necessary"),")"))}var a=class a{constructor(e,i,o,t,ce){this.coreEnumService=e;this.translate=i;this.cdr=o;this.publicHelper=t;this.categoryService=ce;this.id=++a.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new Z;this.dataModelSelect=new C;this.formControl=new K;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new V;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(D(""),w(1500),E(),F(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){return e?e.id:void 0}displayOption(e){return e?e.id:void 0}DataGetAll(e){return A(this,null,function*(){let i=new x;if(i.rowPerPage=20,i.accessLoad=!0,e&&e.length>0){let t=new c;t=new c,t.propertyName="username",t.value=e,t.searchType=u.Contains,t.clauseType=m.Or,i.filters.push(t),t=new c,t.propertyName="name",t.value=e,t.searchType=u.Contains,t.clauseType=m.Or,i.filters.push(t),t=new c,t.propertyName="email",t.value=e,t.searchType=u.Contains,t.clauseType=m.Or,i.filters.push(t),t=new c,t.propertyName="lastname",t.value=e,t.searchType=u.Contains,t.clauseType=m.Or,i.filters.push(t),e&&typeof+e=="number"&&+e>0&&(t=new c,t.propertyName="Id",t.value=e,t.searchType=u.Equal,t.clauseType=m.Or,i.filters.push(t))}let o=this.constructor.name+"categoryService.ServiceGetAll";return this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(o,t,this.constructorInfoAreaId)}),yield L(this.categoryService.ServiceGetAll(i)).then(t=>(this.dataModelResult=t,this.publicHelper.processService.processStop(o),t.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe(R(i=>(i.find(o=>o.id===e.id)||i.push(e),i)))}onActionSelectForce(e){if(typeof e=="string"&&e.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===e)){let i=this.dataModelResult.listItems.find(o=>o.id===e);this.dataModelSelect=i,this.formControl.setValue(i);return}this.categoryService.ServiceGetOneById(e).subscribe({next:i=>{i.isSuccess&&(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item))}});return}if(typeof e==typeof C){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new C,this.loadOptions()}};a.nextId=0,a.\u0275fac=function(i){return new(i||a)(d(ee),d(ne),d(B),d(ae),d(te))},a.\u0275cmp=P({type:a,selectors:[["app-cms-member-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:me,decls:13,vars:18,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],["class","fa fa-times  action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(i,o){if(i&1){let t=v();N(),s(0,"div",1),f(1,"app-progress-spinner",2),h(2,ue,2,3,"label",3),f(3,"input",4),s(4,"mat-autocomplete",5,0),y("optionSelected",function(de){return M(t),S(o.onActionSelect(de.option.value))}),h(6,fe,3,3,"mat-option",6),T(7,"async"),p(),h(8,he,1,0,"i",7)(9,ge,1,0,"i",8)(10,be,1,0,"i",9)(11,Ce,3,3,"em",10),q(12),p()}if(i&2){let t=j(5);n(),l("optionsInfoAreaId",o.constructorInfoAreaId),n(),l("ngIf",(o.optionLabel==null?null:o.optionLabel.length)>0),n(),l("placeholder",H(o.optionPlaceholder))("id",_("app-cms-site-selector-",o.id))("formControl",o.formControl)("matAutocomplete",t)("required",o.optionRequired),k("disabled",o.optionDisabled?!0:null),n(),l("displayWith",o.displayFn),n(2),l("ngForOf",O(7,16,o.filteredOptions)),n(2),l("ngIf",!o.formControl.valid),n(),l("ngIf",o.optionRequired&&o.formControl.valid),n(),l("ngIf",(o.dataModelSelect==null||o.dataModelSelect.id==null?null:o.dataModelSelect.id.length)>0),n(),l("ngIf",o.optionRequired&&(!o.dataModelSelect||!o.dataModelSelect.id||(o.dataModelSelect.id==null?null:o.dataModelSelect.id.length)===0))}},dependencies:[W,U,z,J,X,Q,oe,ie,re,Y,se,$,le],encapsulation:2});var pe=a;export{pe as a};
