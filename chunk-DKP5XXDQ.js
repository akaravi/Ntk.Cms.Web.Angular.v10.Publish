import{a as jt}from"./chunk-3DFIZGNZ.js";import{a as et}from"./chunk-OK6PZZWU.js";import{a as Ut}from"./chunk-IUA4WVGX.js";import{a as pt}from"./chunk-JCUWFHRI.js";import{a as st}from"./chunk-Z7LLDNBU.js";import{a as rt}from"./chunk-YVXHHNGT.js";import{a as nt}from"./chunk-3OXB4ASU.js";import{c as $e,d as tt,e as it,g as ot}from"./chunk-QM2ZNJ2D.js";import{a as Ze}from"./chunk-NBLOFTCW.js";import{a as mt}from"./chunk-TFQRKJMQ.js";import{c as gt,d as Ye}from"./chunk-WSRBIPMR.js";import{b as Fo}from"./chunk-ACTYMGGL.js";import{a as ge}from"./chunk-AM4TJVH7.js";import{a as ee}from"./chunk-BTN5MJ5N.js";import{Aa as ko,Ab as dt,Bb as Ge,Cb as Pe,Dc as j,Ha as Y,Ia as Z,Ja as Ae,Jb as He,Kb as Fe,L as bt,Lb as Ue,M as It,Mb as je,Nb as qe,O as Eo,Ob as We,P as yo,Pa as ke,Pb as Ke,Qb as Qe,R as qi,Rb as ze,Sb as Je,U as To,fc as P,gc as H,ma as oe,o as ft,oa as Re,oc as Po,r as St,s as we,u as Ee,ub as Ve,uc as F,vb as Ne,vc as U,w as Ct,x as ye,xc as Ho,ya as Ro,yb as Oe,za as Ao,zc as Xe}from"./chunk-QGGCLMQI.js";import{m as G}from"./chunk-WNRZ34IP.js";import{a as q}from"./chunk-OP2H2BS3.js";import{$d as O,$f as Be,$g as Ft,Bb as z,Bg as Lt,Cb as J,Cg as Oo,Db as X,Dg as Rt,Ed as De,Eg as At,Fa as r,Fg as kt,Gd as N,Gg as Dt,Hb as te,Hc as be,Jb as ve,Jc as V,Ka as m,Kd as he,Kg as Go,Mb as d,Nb as D,Nc as Ie,Nd as ht,Ob as S,Od as ie,Pa as k,Pc as ct,Qa as ji,Sb as T,Sd as W,Ta as Q,Tb as L,Td as xe,Tg as xt,Ub as R,Ud as $,Ug as Bt,Va as b,Vb as ai,Vc as wo,Vg as Vt,Wg as Nt,X as Ui,Xg as Ot,Yg as Gt,Zb as _e,Zg as Pt,_b as Me,_g as Ht,bc as v,ca as u,cc as _,da as f,de as Do,ib as p,jb as n,kb as a,lb as h,mg as xo,ng as Bo,pb as I,pd as Te,qb as w,qd as Lo,rb as se,rd as Le,rg as Vo,sb as E,uc as B,vb as M,vd as Mo,vg as No,wg as wt,xb as g,xg as Et,yg as yt,zg as Tt}from"./chunk-MDNBQXON.js";import{i as x}from"./chunk-SEDBTTTN.js";var ui=class ui{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};ui.\u0275fac=function(e){return new(e||ui)},ui.\u0275cmp=k({type:ui,selectors:[["app-coremodulelog"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&h(0,"router-outlet")},dependencies:[Lo],encapsulation:2});var Wi=ui;var qo=["vform"];function Wo(o,s){if(o&1){let e=E();n(0,"div",18)(1,"button",19),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",20),d(3),v(4,"translate"),a(),n(5,"button",21),h(6,"i",20),d(7),v(8,"translate"),a()()}o&2&&(r(3),S(" ",_(4,2,"ACTION.CANCEL")," "),r(4),S(" ",_(8,4,"ACTION.SAVE")," "))}var fi=class fi extends Ze{constructor(e,i,t,c,C,l,A,re,K,le){super(c,new xt,K,le);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreModuleLogFavoriteService=c;this.cmsToastrService=C;this.tokenHelper=l;this.cmsStoreService=A;this.cdr=re;this.publicHelper=K;this.translate=le;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ht;this.dataModel=new xt;this.formInfo=new $;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogFavoriteService.setAccessLoad(),this.coreModuleLogFavoriteService.setAccessDataType(he.Editor),this.coreModuleLogFavoriteService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogFavoriteService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};fi.\u0275fac=function(i){return new(i||fi)(m(Z),m(Y),m(O),m(yt),m(U),m(F),m(G),m(B),m(j),m(P))},fi.\u0275cmp=k({type:fi,selectors:[["app-coremodulelog-favorite-edit"]],viewQuery:function(i,t){if(i&1&&z(qo,5),i&2){let c;J(c=X())&&(t.formGroup=c.first)}},standalone:!1,features:[Q],decls:32,vars:24,consts:[["vform","ngForm"],["ModuleName",""],["ModuleEntityName",""],["ModuleEntityId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleName","placeholder","ModuleName","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityName","placeholder","moduleEntityName","id","dataModel.moduleEntityName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityId",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityId","placeholder","ModuleEntityId","id","dataModel.moduleEntityId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["class","form-actions",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green"]],template:function(i,t){if(i&1){let c=E();n(0,"div",4),h(1,"app-progress-spinner",5),n(2,"div",6)(3,"p",7),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"form",8,0),M("ngSubmit",function(){return u(c),f(t.onFormSubmit())}),h(10,"app-cms-site-selector",9),v(11,"translate"),h(12,"app-cms-user-selector",9),v(13,"translate"),h(14,"app-cms-member-selector",9),v(15,"translate"),n(16,"div",10)(17,"label",11),d(18,"ModuleName"),a(),n(19,"input",12,1),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleName,l)||(t.dataModel.moduleName=l),f(l)}),a()(),n(21,"div",10)(22,"label",13),d(23,"ModuleEntityName"),a(),n(24,"input",14,2),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleEntityName,l)||(t.dataModel.moduleEntityName=l),f(l)}),a()(),n(26,"div",10)(27,"label",15),d(28,"ModuleEntityId"),a(),n(29,"input",16,3),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleEntityId,l)||(t.dataModel.moduleEntityId=l),f(l)}),a()(),b(31,Wo,9,6,"div",17),a()()()}i&2&&(r(),p("optionsInfoAreaId",t.constructorInfoAreaId),r(3),S(" ",t.formInfo.formTitle," "),r(2),S(" ",_(7,16,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",_(11,18,"TITLE.SITE")),r(2),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",_(13,20,"TITLE.USER")),r(2),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkMemberId)("optionPlaceholder",_(15,22,"TITLE.Member")),r(5),T("ngModel",t.dataModel.moduleName),r(5),T("ngModel",t.dataModel.moduleEntityName),r(5),T("ngModel",t.dataModel.moduleEntityId),r(2),p("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,ye,ft,St,we,Ct,Ee,oe,mt,Ut,jt,ee,H],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var Ki=fi;var Ko=["vform"];function Qo(o,s){if(o&1){let e=E();n(0,"div",5)(1,"button",10),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",11),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var Si=class Si{constructor(s,e,i,t,c,C,l,A,re,K){this.data=s;this.dialogRef=e;this.coreEnumService=i;this.coreModuleLogFavoriteService=t;this.cmsToastrService=c;this.tokenHelper=C;this.cmsStoreService=l;this.cdr=A;this.publicHelper=re;this.translate=K;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Be;this.dataModelResult=new ie;this.dataModel=new xt;this.formInfo=new $;this.dataModelEnumSendSmsStatusTypeResult=new ie;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,s&&(this.requestId=s.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(s=>{this.formInfo.formTitle=s}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(s=>s.tokenInfoStore).subscribe(s=>x(this,null,function*(){this.tokenInfo=s})),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:s=>{this.dataModelEnumSendSmsStatusTypeResult=s}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let s=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(s,e,this.constructorInfoAreaId)}),this.coreModuleLogFavoriteService.setAccessLoad(),this.coreModuleLogFavoriteService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(s)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(s,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Si.\u0275fac=function(e){return new(e||Si)(m(Z),m(Y),m(O),m(yt),m(U),m(F),m(G),m(B),m(j),m(P))},Si.\u0275cmp=k({type:Si,selectors:[["app-coremodulelog-favorite-view"]],viewQuery:function(e,i){if(e&1&&z(Ko,5),e&2){let t;J(t=X())&&(i.formGroup=t.first)}},standalone:!1,decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(n(0,"div",0),d(1),a(),n(2,"div",1),h(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),a(),n(5,"div",4)(6,"div",5)(7,"small",6),d(8),a(),n(9,"small",7),d(10),a()()(),n(11,"div",8),b(12,Qo,5,3,"div",9),a()),e&2&&(r(),S(" ",i.formInfo.formTitle," "),r(2),p("optionsInfoAreaId",i.constructorInfoAreaId),r(),p("dataModel",i.dataModel)("optionMethod",1),r(4),S("",i.formInfo.formAlert," "),r(2),S("",i.formInfo.formError," "),r(2),p("ngIf",i.formInfo.formSubmitAllow))},dependencies:[V,ee,et,H],encapsulation:2});var Qi=Si;var zo=()=>[5,10,20,100],Jo=o=>({display:o});function Xo(o,s){if(o&1){let e=E();n(0,"a",43),M("click",function(){u(e);let t=g();return f(t.onActionBackToParent())}),h(1,"i",44),a()}}function Yo(o,s){if(o&1){let e=E();n(0,"div",45)(1,"a",46),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewRow(t.tableRowSelected))}),h(2,"i",47)(3,"br"),a(),n(4,"p",48),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.VIEW")))}function Zo(o,s){if(o&1){let e=E();n(0,"div",45)(1,"a",49),M("click",function(){u(e);let t=g();return f(t.onActionButtonEditRow(t.tableRowSelected))}),h(2,"i",50)(3,"br"),a(),n(4,"p",48),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.EDIT")))}function $o(o,s){if(o&1){let e=E();n(0,"div",45)(1,"a",51),M("click",function(){u(e);let t=g();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),h(2,"i",52)(3,"br"),a(),n(4,"p",48),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.DELETE")))}function er(o,s){if(o&1){let e=E();n(0,"div",45)(1,"a",46),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewContent(t.tableRowSelected))}),h(2,"i",53)(3,"br"),a(),n(4,"p",48),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.CONTENT")))}function tr(o,s){if(o&1){let e=E();n(0,"div",45)(1,"a",46),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewUserRow(t.tableRowSelected))}),h(2,"i",54)(3,"br"),a(),n(4,"p",48),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.USER")))}function ir(o,s){if(o&1&&(n(0,"mat-header-cell",55),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function or(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.id," ")}}function rr(o,s){if(o&1&&(n(0,"mat-header-cell",55),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function nr(o,s){if(o&1&&h(0,"select",58),o&2){let e=g().$implicit,i=g();p("contentService",i.contentService)("row",e)("ngStyle",Me(3,Jo,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function sr(o,s){if(o&1&&(n(0,"mat-cell",56),v(1,"statusCellClass"),h(2,"i",56),v(3,"statusIconClass"),b(4,nr,1,5,"select",57),a()),o&2){let e=s.$implicit,i=g();p("ngClass",_(1,3,e.recordStatus)),r(2),p("ngClass",_(3,5,e.recordStatus)),r(2),p("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function ar(o,s){if(o&1&&(n(0,"mat-header-cell",55),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function lr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmssiteinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function cr(o,s){if(o&1&&(n(0,"mat-header-cell",55),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function dr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmsuserinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkUserId))," ")}}function mr(o,s){if(o&1&&(n(0,"mat-header-cell",55),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function pr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.linkMemberId," ")}}function ur(o,s){if(o&1&&(n(0,"mat-header-cell",55),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleName==null?null:e.fieldsInfo.moduleName.fieldTitle," ")}}function fr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleName," ")}}function Sr(o,s){if(o&1&&(n(0,"mat-header-cell",55),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleEntityName==null?null:e.fieldsInfo.moduleEntityName.fieldTitle," ")}}function Cr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleEntityName," ")}}function hr(o,s){if(o&1&&(n(0,"mat-header-cell",55),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleEntityId==null?null:e.fieldsInfo.moduleEntityId.fieldTitle," ")}}function gr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleEntityId," ")}}function vr(o,s){if(o&1&&(n(0,"mat-header-cell",55),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function _r(o,s){if(o&1&&(n(0,"mat-cell",59),d(1),v(2,"localeDateTime"),a()),o&2){let e=s.$implicit;r(),S(" ",_(2,1,e.createdDate)," ")}}function Mr(o,s){o&1&&(n(0,"mat-header-cell"),d(1),v(2,"translate"),a()),o&2&&(r(),S(" ",_(2,1,"TITLE.OPTION")," "))}function br(o,s){if(o&1&&(n(0,"mat-cell",60)(1,"button",61)(2,"mat-icon"),d(3,"more_vert"),a()(),h(4,"mat-menu",null,2),a()),o&2){let e=te(5);r(),p("matMenuTriggerFor",e)}}function Ir(o,s){o&1&&h(0,"mat-header-row")}function wr(o,s){if(o&1){let e=E();n(0,"mat-row",62),M("click",function(){let t=u(e).$implicit,c=g();return f(c.onActionTableRowSelect(t))}),a()}if(o&2){let e=s.$implicit,i=s.dataIndex,t=g();ve("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var Ci=class Ci extends $e{constructor(e,i,t,c,C,l,A,re,K,le,_t,at,Mt){super(i,new xt,at,l,re);this.coreEnumService=e;this.contentService=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=C;this.tokenHelper=l;this.cdr=A;this.translate=re;this.router=K;this.cmsStoreService=le;this.pageInfo=_t;this.publicHelper=at;this.dialog=Mt;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestlinkMemberId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new xe;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkUserId","LinkSiteId","LinkMemberId","ModuleName","ModuleEntityName","ModuleEntityId","CreatedDate"];this.tabledisplayedColumnsMobileSource=["Id","LinkUserId","LinkSiteId","LinkMemberId","ModuleName","ModuleEntityName","ModuleEntityId","CreatedDate"];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberId")),this.requestLinkSiteId>0){let y=new W;y.propertyName="LinkCmsSiteId",y.value=this.requestLinkSiteId,this.filteModelContent.filters.push(y)}if(this.requestLinkUserId>0){let y=new W;y.propertyName="LinkUserId",y.value=this.requestLinkUserId,this.filteModelContent.filters.push(y)}if(this.requestlinkMemberId>0){let y=new W;y.propertyName="linkMemberId",y.value=this.requestlinkMemberId,this.filteModelContent.filters.push(y)}this.optionsSearch.parentMethods={onSubmit:y=>this.onSubmitOptionsSearch(y)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending}ngOnInit(){this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new xt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=N.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Qi,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Ki,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(C,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonViewContent(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorSelectedRow").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}this.onActionTableRowSelect(e);let i="/"+e.moduleName+"/"+e.moduleEntityName.substring(e.moduleName.length)+"/edit/"+e.moduleEntityId;e.moduleEntityName.indexOf(e.moduleName)>=0?this.router.navigate([i.toLowerCase()]):this.router.navigate([i.toLowerCase()])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{i.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{i.set(l,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(t,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new W;C.propertyName="RecordStatus",C.value=De.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkUserId||this.tableRowSelected.linkUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkUserId])}onActionButtonViewMemberRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkMemberId||this.tableRowSelected.linkMemberId===""){this.translate.get("MESSAGE.content_does_not_include_member_informations").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/member/user/edit",this.tableRowSelected.linkMemberId])}onActionButtonViewSiteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkSiteId||this.tableRowSelected.linkSiteId===0){this.translate.get("MESSAGE.content_does_not_include_site_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/site/edit",this.tableRowSelected.linkSiteId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};Ci.\u0275fac=function(i){return new(i||Ci)(m(O),m(yt),m(U),m(ge),m(Te),m(F),m(B),m(P),m(Le),m(G),m(Xe),m(j),m(Ae))},Ci.\u0275cmp=k({type:Ci,selectors:[["app-coremodulelog-favorite-list"]],standalone:!1,features:[Q],decls:64,vars:23,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],[1,"d-flex","justify-content-between","flex-wrap"],[1,"justify-content-end"],[1,"justify-content-start"],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkUserId"],["matColumnDef","LinkMemberId"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","ModuleEntityId"],["matColumnDef","CreatedDate"],["style","direction:ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-folder-grid","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let c=E();n(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(l){return u(c),L(t.viewGuideNotice,l)||(t.viewGuideNotice=l),f(l)}),M("optionOnActionButtonMemoRow",function(){return u(c),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(c),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(c),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(c),f(t.onActionButtonPrintRow())}),I(1,4),d(2," -------------------------------------- "),w(),se(3,5),I(4,6),n(5,"div",7),h(6,"div",8)(7,"div",9),a(),w(),se(8,6),I(9,10),b(10,Xo,2,0,"a",11),n(11,"a",12),M("click",function(){return u(c),f(t.viewGuideNotice=!t.viewGuideNotice)}),h(12,"i",13),a(),n(13,"a",12),M("click",function(){return u(c),f(t.onActionButtonReload())}),h(14,"i",14),a(),w(),se(15,15)(16,16),I(17,17),b(18,Yo,7,3,"div",18)(19,Zo,7,3,"div",18)(20,$o,7,3,"div",18)(21,er,7,3,"div",18)(22,tr,7,3,"div",18),w(),I(23,19),n(24,"app-cms-search-list",20),R("optionsChange",function(l){return u(c),L(t.optionsSearch,l)||(t.optionsSearch=l),f(l)}),a(),n(25,"app-cms-statist-list",20),R("optionsChange",function(l){return u(c),L(t.optionsStatist,l)||(t.optionsStatist=l),f(l)}),a(),w(),I(26,21),n(27,"mat-table",22,0),M("matSortChange",function(){u(c);let l=te(28);return f(t.onTableSortData(l))}),I(29,23),b(30,ir,2,1,"mat-header-cell",24)(31,or,2,1,"mat-cell",25),w(),I(32,26),b(33,rr,2,1,"mat-header-cell",24)(34,sr,5,7,"mat-cell",27),w(),I(35,28),b(36,ar,2,1,"mat-header-cell",24)(37,lr,4,5,"mat-cell",25),w(),I(38,29),b(39,cr,2,1,"mat-header-cell",24)(40,dr,4,5,"mat-cell",25),w(),I(41,30),b(42,mr,2,1,"mat-header-cell",24)(43,pr,2,1,"mat-cell",25),w(),I(44,31),b(45,ur,2,1,"mat-header-cell",24)(46,fr,2,1,"mat-cell",25),w(),I(47,32),b(48,Sr,2,1,"mat-header-cell",24)(49,Cr,2,1,"mat-cell",25),w(),I(50,33),b(51,hr,2,1,"mat-header-cell",24)(52,gr,2,1,"mat-cell",25),w(),I(53,34),b(54,vr,2,1,"mat-header-cell",24)(55,_r,3,3,"mat-cell",35),w(),I(56,36),b(57,Mr,3,3,"mat-header-cell",37)(58,br,6,1,"mat-cell",38),w(),b(59,Ir,1,0,"mat-header-row",39)(60,wr,1,6,"mat-row",40),a(),w(),I(61,41),n(62,"mat-paginator",42,1),M("page",function(l){return u(c),f(t.onTablePageingData(l))}),a(),w(),a()}i&2&&(p("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),p("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),r(10),p("ngIf",t.requestLinkSiteId>0),r(8),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(),p("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.linkUserId)>0),r(2),T("options",t.optionsSearch),r(),T("options",t.optionsStatist),r(2),p("dataSource",t.tableSource),r(32),p("matHeaderRowDef",t.tabledisplayedColumns),r(),p("matRowDefColumns",t.tabledisplayedColumns),r(2),p("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",_e(22,zo)))},dependencies:[be,V,Ie,Re,ke,oe,Ve,Ne,Oe,Ge,Pe,He,Ue,Ke,je,Fe,Qe,qe,We,ze,Je,tt,it,ot,rt,ct,H,gt,pt,Ye,nt,st],encapsulation:2});var zi=Ci;var Er=["vform"];function yr(o,s){if(o&1){let e=E();n(0,"div",18)(1,"button",19),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",20),d(3),v(4,"translate"),a(),n(5,"button",21),h(6,"i",20),d(7),v(8,"translate"),a()()}o&2&&(r(3),S(" ",_(4,2,"ACTION.CANCEL")," "),r(4),S(" ",_(8,4,"ACTION.SAVE")," "))}var hi=class hi extends Ze{constructor(e,i,t,c,C,l,A,re,K,le){super(c,new Bt,K,le);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreModuleLogLikeService=c;this.cmsToastrService=C;this.tokenHelper=l;this.cmsStoreService=A;this.cdr=re;this.publicHelper=K;this.translate=le;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ht;this.dataModel=new Bt;this.formInfo=new $;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogLikeService.setAccessLoad(),this.coreModuleLogLikeService.setAccessDataType(he.Editor),this.coreModuleLogLikeService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogLikeService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};hi.\u0275fac=function(i){return new(i||hi)(m(Z),m(Y),m(O),m(Et),m(U),m(F),m(G),m(B),m(j),m(P))},hi.\u0275cmp=k({type:hi,selectors:[["app-coremodulelog-like-edit"]],viewQuery:function(i,t){if(i&1&&z(Er,5),i&2){let c;J(c=X())&&(t.formGroup=c.first)}},standalone:!1,features:[Q],decls:32,vars:24,consts:[["vform","ngForm"],["ModuleName",""],["ModuleEntityName",""],["ModuleEntityId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleName","placeholder","ModuleName","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityName","placeholder","moduleEntityName","id","dataModel.moduleEntityName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityId",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityId","placeholder","ModuleEntityId","id","dataModel.moduleEntityId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["class","form-actions",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green"]],template:function(i,t){if(i&1){let c=E();n(0,"div",4),h(1,"app-progress-spinner",5),n(2,"div",6)(3,"p",7),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"form",8,0),M("ngSubmit",function(){return u(c),f(t.onFormSubmit())}),h(10,"app-cms-site-selector",9),v(11,"translate"),h(12,"app-cms-user-selector",9),v(13,"translate"),h(14,"app-cms-member-selector",9),v(15,"translate"),n(16,"div",10)(17,"label",11),d(18,"ModuleName"),a(),n(19,"input",12,1),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleName,l)||(t.dataModel.moduleName=l),f(l)}),a()(),n(21,"div",10)(22,"label",13),d(23,"ModuleEntityName"),a(),n(24,"input",14,2),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleEntityName,l)||(t.dataModel.moduleEntityName=l),f(l)}),a()(),n(26,"div",10)(27,"label",15),d(28,"ModuleEntityId"),a(),n(29,"input",16,3),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleEntityId,l)||(t.dataModel.moduleEntityId=l),f(l)}),a()(),b(31,yr,9,6,"div",17),a()()()}i&2&&(r(),p("optionsInfoAreaId",t.constructorInfoAreaId),r(3),S(" ",t.formInfo.formTitle," "),r(2),S(" ",_(7,16,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",_(11,18,"TITLE.SITE")),r(2),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",_(13,20,"TITLE.USER")),r(2),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkMemberId)("optionPlaceholder",_(15,22,"TITLE.Member")),r(5),T("ngModel",t.dataModel.moduleName),r(5),T("ngModel",t.dataModel.moduleEntityName),r(5),T("ngModel",t.dataModel.moduleEntityId),r(2),p("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,ye,ft,St,we,Ct,Ee,oe,mt,Ut,jt,ee,H],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var Ji=hi;var Tr=["vform"];function Lr(o,s){if(o&1){let e=E();n(0,"div",7)(1,"button",12),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",13),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var gi=class gi{constructor(s,e,i,t,c,C,l,A,re,K){this.data=s;this.dialogRef=e;this.coreEnumService=i;this.coreModuleLogLikeService=t;this.cmsToastrService=c;this.tokenHelper=C;this.cmsStoreService=l;this.cdr=A;this.publicHelper=re;this.translate=K;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Be;this.dataModelResult=new ie;this.dataModel=new Bt;this.formInfo=new $;this.dataModelEnumSendSmsStatusTypeResult=new ie;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,s&&(this.requestId=s.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(s=>{this.formInfo.formTitle=s}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(s=>s.tokenInfoStore).subscribe(s=>x(this,null,function*(){this.tokenInfo=s})),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:s=>{this.dataModelEnumSendSmsStatusTypeResult=s}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let s=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(s,e,this.constructorInfoAreaId)}),this.coreModuleLogLikeService.setAccessLoad(),this.coreModuleLogLikeService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(s)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(s,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};gi.\u0275fac=function(e){return new(e||gi)(m(Z),m(Y),m(O),m(Et),m(U),m(F),m(G),m(B),m(j),m(P))},gi.\u0275cmp=k({type:gi,selectors:[["app-coremodulelog-report-abuse-view"]],viewQuery:function(e,i){if(e&1&&z(Tr,5),e&2){let t;J(t=X())&&(i.formGroup=t.first)}},standalone:!1,decls:18,vars:10,consts:[[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(n(0,"div",0),h(1,"app-progress-spinner",1),n(2,"div",2)(3,"p",3),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"div",4),h(9,"app-cms-json-list",5),a(),n(10,"div",6)(11,"div",7)(12,"small",8),d(13),a(),n(14,"small",9),d(15),a()()(),n(16,"div",10),b(17,Lr,5,3,"div",11),a()()()),e&2&&(r(),p("optionsInfoAreaId",i.constructorInfoAreaId),r(3),S(" ",i.formInfo.formTitle," "),r(2),S(" ",_(7,8,"TITLE.Be_Careful_When_Entering_Information")," "),r(3),p("dataModel",i.dataModel)("optionMethod",1),r(4),S("",i.formInfo.formAlert," "),r(2),S("",i.formInfo.formError," "),r(2),p("ngIf",i.formInfo.formSubmitAllow))},dependencies:[V,ee,et,H],encapsulation:2});var Xi=gi;var Rr=()=>[5,10,20,100],Ar=o=>({display:o});function kr(o,s){if(o&1){let e=E();n(0,"a",42),M("click",function(){u(e);let t=g();return f(t.onActionBackToParent())}),h(1,"i",43),a()}}function Dr(o,s){if(o&1){let e=E();n(0,"div",44)(1,"a",45),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewRow(t.tableRowSelected))}),h(2,"i",46)(3,"br"),a(),n(4,"p",47),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.VIEW")))}function xr(o,s){if(o&1){let e=E();n(0,"div",44)(1,"a",48),M("click",function(){u(e);let t=g();return f(t.onActionButtonEditRow(t.tableRowSelected))}),h(2,"i",49)(3,"br"),a(),n(4,"p",47),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.EDIT")))}function Br(o,s){if(o&1){let e=E();n(0,"div",44)(1,"a",50),M("click",function(){u(e);let t=g();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),h(2,"i",51)(3,"br"),a(),n(4,"p",47),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.DELETE")))}function Vr(o,s){if(o&1){let e=E();n(0,"div",44)(1,"a",45),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewUserRow(t.tableRowSelected))}),h(2,"i",52)(3,"br"),a(),n(4,"p",47),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.USER")))}function Nr(o,s){if(o&1){let e=E();n(0,"div",44)(1,"a",45),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewMemberRow(t.tableRowSelected))}),h(2,"i",53)(3,"br"),a(),n(4,"p",47),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.MEMBER")))}function Or(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Gr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.id," ")}}function Pr(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Hr(o,s){if(o&1&&h(0,"select",57),o&2){let e=g().$implicit,i=g();p("contentService",i.contentService)("row",e)("ngStyle",Me(3,Ar,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Fr(o,s){if(o&1&&(n(0,"mat-cell",55),v(1,"statusCellClass"),h(2,"i",55),v(3,"statusIconClass"),b(4,Hr,1,5,"select",56),a()),o&2){let e=s.$implicit,i=g();p("ngClass",_(1,3,e.recordStatus)),r(2),p("ngClass",_(3,5,e.recordStatus)),r(2),p("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Ur(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function jr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmssiteinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function qr(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function Wr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmsuserinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkUserId))," ")}}function Kr(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function Qr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.linkMemberId," ")}}function zr(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleName==null?null:e.fieldsInfo.moduleName.fieldTitle," ")}}function Jr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleName," ")}}function Xr(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleEntityName==null?null:e.fieldsInfo.moduleEntityName.fieldTitle," ")}}function Yr(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleEntityName," ")}}function Zr(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleEntityId==null?null:e.fieldsInfo.moduleEntityId.fieldTitle," ")}}function $r(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleEntityId," ")}}function en(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function tn(o,s){if(o&1&&(n(0,"mat-cell",58),d(1),v(2,"localeDateTime"),a()),o&2){let e=s.$implicit;r(),S(" ",_(2,1,e.createdDate)," ")}}function on(o,s){o&1&&(n(0,"mat-header-cell"),d(1),v(2,"translate"),a()),o&2&&(r(),S(" ",_(2,1,"TITLE.OPTION")," "))}function rn(o,s){if(o&1&&(n(0,"mat-cell",59)(1,"button",60)(2,"mat-icon"),d(3,"more_vert"),a()(),h(4,"mat-menu",null,2),a()),o&2){let e=te(5);r(),p("matMenuTriggerFor",e)}}function nn(o,s){o&1&&h(0,"mat-header-row")}function sn(o,s){if(o&1){let e=E();n(0,"mat-row",61),M("click",function(){let t=u(e).$implicit,c=g();return f(c.onActionTableRowSelect(t))}),a()}if(o&2){let e=s.$implicit,i=s.dataIndex,t=g();ve("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var vi=class vi extends $e{constructor(e,i,t,c,C,l,A,re,K,le,_t,at,Mt){super(i,new Bt,at,l,K);this.coreEnumService=e;this.contentService=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=C;this.tokenHelper=l;this.cmsStoreService=A;this.cdr=re;this.translate=K;this.router=le;this.pageInfo=_t;this.publicHelper=at;this.dialog=Mt;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestlinkMemberId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new xe;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkUserId","LinkSiteId","LinkMemberId","ModuleName","ModuleEntityName","ModuleEntityId","CreatedDate"];this.tabledisplayedColumnsMobileSource=["Id","LinkUserId","LinkSiteId","LinkMemberId","ModuleName","ModuleEntityName","ModuleEntityId","CreatedDate"];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberId")),this.requestLinkSiteId>0){let y=new W;y.propertyName="LinkCmsSiteId",y.value=this.requestLinkSiteId,this.filteModelContent.filters.push(y)}if(this.requestLinkUserId>0){let y=new W;y.propertyName="LinkUserId",y.value=this.requestLinkUserId,this.filteModelContent.filters.push(y)}if(this.requestlinkMemberId>0){let y=new W;y.propertyName="linkMemberId",y.value=this.requestlinkMemberId,this.filteModelContent.filters.push(y)}this.optionsSearch.parentMethods={onSubmit:y=>this.onSubmitOptionsSearch(y)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending}ngOnInit(){this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Bt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=N.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Xi,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Ji,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(C,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{i.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{i.set(l,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(t,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new W;C.propertyName="RecordStatus",C.value=De.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkUserId||this.tableRowSelected.linkUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkUserId])}onActionButtonViewMemberRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkMemberId||this.tableRowSelected.linkMemberId===""){this.translate.get("MESSAGE.content_does_not_include_member_informations").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/member/user/edit",this.tableRowSelected.linkMemberId])}onActionButtonViewSiteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkSiteId||this.tableRowSelected.linkSiteId===0){this.translate.get("MESSAGE.content_does_not_include_site_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/site/edit",this.tableRowSelected.linkSiteId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};vi.\u0275fac=function(i){return new(i||vi)(m(O),m(Et),m(U),m(ge),m(Te),m(F),m(G),m(B),m(P),m(Le),m(Xe),m(j),m(Ae))},vi.\u0275cmp=k({type:vi,selectors:[["app-coremodulelog-like-list"]],standalone:!1,features:[Q],decls:68,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkUserId"],["matColumnDef","LinkMemberId"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","ModuleEntityId"],["matColumnDef","CreatedDate"],["style","direction:ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-id-card-clip","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let c=E();n(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(l){return u(c),L(t.viewGuideNotice,l)||(t.viewGuideNotice=l),f(l)}),M("optionOnActionButtonMemoRow",function(){return u(c),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(c),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(c),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(c),f(t.onActionButtonPrintRow())}),I(1,4),d(2," -------------------------------------- "),w(),se(3,5)(4,6),I(5,7),b(6,kr,2,0,"a",8),n(7,"a",9),M("click",function(){return u(c),f(t.viewGuideNotice=!t.viewGuideNotice)}),h(8,"i",10),a(),n(9,"a",9),M("click",function(){return u(c),f(t.onActionButtonReload())}),h(10,"i",11),a(),w(),I(11,12),n(12,"a",13),M("click",function(){return u(c),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),h(13,"mat-slide-toggle",14),d(14),v(15,"translate"),a(),n(16,"a",13),M("click",function(){return u(c),f(t.onActionButtonStatist())}),h(17,"mat-slide-toggle",14),d(18),v(19,"translate"),a(),w(),se(20,15),I(21,16),b(22,Dr,7,3,"div",17)(23,xr,7,3,"div",17)(24,Br,7,3,"div",17)(25,Vr,7,3,"div",17)(26,Nr,7,3,"div",17),w(),I(27,18),n(28,"app-cms-search-list",19),R("optionsChange",function(l){return u(c),L(t.optionsSearch,l)||(t.optionsSearch=l),f(l)}),a(),n(29,"app-cms-statist-list",19),R("optionsChange",function(l){return u(c),L(t.optionsStatist,l)||(t.optionsStatist=l),f(l)}),a(),w(),I(30,20),n(31,"mat-table",21,0),M("matSortChange",function(){u(c);let l=te(32);return f(t.onTableSortData(l))}),I(33,22),b(34,Or,2,1,"mat-header-cell",23)(35,Gr,2,1,"mat-cell",24),w(),I(36,25),b(37,Pr,2,1,"mat-header-cell",23)(38,Fr,5,7,"mat-cell",26),w(),I(39,27),b(40,Ur,2,1,"mat-header-cell",23)(41,jr,4,5,"mat-cell",24),w(),I(42,28),b(43,qr,2,1,"mat-header-cell",23)(44,Wr,4,5,"mat-cell",24),w(),I(45,29),b(46,Kr,2,1,"mat-header-cell",23)(47,Qr,2,1,"mat-cell",24),w(),I(48,30),b(49,zr,2,1,"mat-header-cell",23)(50,Jr,2,1,"mat-cell",24),w(),I(51,31),b(52,Xr,2,1,"mat-header-cell",23)(53,Yr,2,1,"mat-cell",24),w(),I(54,32),b(55,Zr,2,1,"mat-header-cell",23)(56,$r,2,1,"mat-cell",24),w(),I(57,33),b(58,en,2,1,"mat-header-cell",23)(59,tn,3,3,"mat-cell",34),w(),I(60,35),b(61,on,3,3,"mat-header-cell",36)(62,rn,6,1,"mat-cell",37),w(),b(63,nn,1,0,"mat-header-row",38)(64,sn,1,6,"mat-row",39),a(),w(),I(65,40),n(66,"mat-paginator",41,1),M("page",function(l){return u(c),f(t.onTablePageingData(l))}),a(),w(),a()}i&2&&(p("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),p("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),r(6),p("ngIf",t.requestLinkSiteId>0),r(7),p("checked",t.optionsSearch.data.show),r(),S("",_(15,26,"ACTION.SEARCH")," "),r(3),p("checked",t.optionsStatist.data.show),r(),S("",_(19,28,"ACTION.STATIST")," "),r(4),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(),p("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.linkUserId)>0),r(),p("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.linkMemberId)>0),r(2),T("options",t.optionsSearch),r(),T("options",t.optionsStatist),r(2),p("dataSource",t.tableSource),r(32),p("matHeaderRowDef",t.tabledisplayedColumns),r(),p("matRowDefColumns",t.tabledisplayedColumns),r(2),p("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",_e(30,Rr)))},dependencies:[be,V,Ie,Re,ke,oe,Ve,Ne,Oe,dt,Ge,Pe,He,Ue,Ke,je,Fe,Qe,qe,We,ze,Je,tt,it,ot,rt,ct,H,gt,pt,Ye,nt,st],encapsulation:2});var Yi=vi;var an=["vform"];function ln(o,s){if(o&1){let e=E();n(0,"div",27)(1,"button",28),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",29),d(3),v(4,"translate"),a(),n(5,"button",30),h(6,"i",29),d(7),v(8,"translate"),a()()}o&2&&(r(3),S(" ",_(4,2,"ACTION.CANCEL")," "),r(4),S(" ",_(8,4,"ACTION.SAVE")," "))}var _i=class _i extends Ze{constructor(e,i,t,c,C,l,A,re,K,le){super(c,new Nt,K,le);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreModuleLogReportAbuseService=c;this.cmsToastrService=C;this.tokenHelper=l;this.cmsStoreService=A;this.cdr=re;this.publicHelper=K;this.translate=le;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ht;this.dataModel=new Nt;this.formInfo=new $;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogReportAbuseService.setAccessLoad(),this.coreModuleLogReportAbuseService.setAccessDataType(he.Editor),this.coreModuleLogReportAbuseService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogReportAbuseService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};_i.\u0275fac=function(i){return new(i||_i)(m(Z),m(Y),m(O),m(Tt),m(U),m(F),m(G),m(B),m(j),m(P))},_i.\u0275cmp=k({type:_i,selectors:[["app-coremodulelog-report-abuse-edit"]],viewQuery:function(i,t){if(i&1&&z(an,5),i&2){let c;J(c=X())&&(t.formGroup=c.first)}},standalone:!1,features:[Q],decls:49,vars:27,consts:[["vform","ngForm"],["ModuleName",""],["ModuleEntityName",""],["ModuleEntityId",""],["SubjectBody",""],["AdminResultProcess",""],["SubjectUrl",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleName","placeholder","ModuleName","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityName","placeholder","moduleEntityName","id","dataModel.moduleEntityName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityId",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityId","placeholder","ModuleEntityId","id","dataModel.moduleEntityId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.subjectBody",1,"color-highlight"],["matInput","","type","text","name","dataModel.subjectBody","placeholder","SubjectBody","id","dataModel.subjectBody",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.adminResultProcess",1,"color-highlight"],["matInput","","name","dataModel.adminResultProcess","type","text","placeholder","AdminResultProcess","minlength","1","maxlength","500","rows","5","id","dataModel.adminResultProcess",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.subjectUrl",1,"color-highlight"],["matInput","","name","dataModel.subjectUrl","type","text","placeholder","SubjectUrl","minlength","1","maxlength","500","rows","5","id","dataModel.subjectUrl",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["class","form-actions",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green"]],template:function(i,t){if(i&1){let c=E();n(0,"div",7),h(1,"app-progress-spinner",8),n(2,"div",9)(3,"p",10),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"form",11,0),M("ngSubmit",function(){return u(c),f(t.onFormSubmit())}),h(10,"app-cms-site-selector",12),v(11,"translate"),h(12,"app-cms-user-selector",12),v(13,"translate"),h(14,"app-cms-member-selector",12),v(15,"translate"),n(16,"div",13)(17,"label",14),d(18,"ModuleName"),a(),n(19,"input",15,1),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleName,l)||(t.dataModel.moduleName=l),f(l)}),a()(),n(21,"div",13)(22,"label",16),d(23,"ModuleEntityName"),a(),n(24,"input",17,2),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleEntityName,l)||(t.dataModel.moduleEntityName=l),f(l)}),a()(),n(26,"div",13)(27,"label",18),d(28,"ModuleEntityId"),a(),n(29,"input",19,3),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleEntityId,l)||(t.dataModel.moduleEntityId=l),f(l)}),a()(),n(31,"div",13)(32,"label",20),d(33,"SubjectBody"),a(),n(34,"input",21,4),R("ngModelChange",function(l){return u(c),L(t.dataModel.subjectBody,l)||(t.dataModel.subjectBody=l),f(l)}),a()(),n(36,"div",13)(37,"label",22),d(38,"AdminResultProcess"),a(),n(39,"textarea",23,5),R("ngModelChange",function(l){return u(c),L(t.dataModel.adminResultProcess,l)||(t.dataModel.adminResultProcess=l),f(l)}),d(41,"        "),a()(),n(42,"div",13)(43,"label",24),d(44,"SubjectUrl"),a(),n(45,"textarea",25,6),R("ngModelChange",function(l){return u(c),L(t.dataModel.subjectUrl,l)||(t.dataModel.subjectUrl=l),f(l)}),d(47,"        "),a()(),b(48,ln,9,6,"div",26),a()()()}i&2&&(r(),p("optionsInfoAreaId",t.constructorInfoAreaId),r(3),S(" ",t.formInfo.formTitle," "),r(2),S(" ",_(7,19,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",_(11,21,"TITLE.SITE")),r(2),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",_(13,23,"TITLE.USER")),r(2),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkMemberId)("optionPlaceholder",_(15,25,"TITLE.Member")),r(5),T("ngModel",t.dataModel.moduleName),r(5),T("ngModel",t.dataModel.moduleEntityName),r(5),T("ngModel",t.dataModel.moduleEntityId),r(5),T("ngModel",t.dataModel.subjectBody),r(5),T("ngModel",t.dataModel.adminResultProcess),r(6),T("ngModel",t.dataModel.subjectUrl),r(3),p("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,ye,ft,St,we,bt,It,Ct,Ee,oe,mt,Ut,jt,ee,H],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var Zi=_i;var cn=["vform"];function dn(o,s){if(o&1){let e=E();n(0,"div",5)(1,"button",10),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",11),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var Mi=class Mi{constructor(s,e,i,t,c,C,l,A,re,K){this.data=s;this.dialogRef=e;this.coreEnumService=i;this.coreModuleLogReportAbuseService=t;this.cmsToastrService=c;this.tokenHelper=C;this.cmsStoreService=l;this.cdr=A;this.publicHelper=re;this.translate=K;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Be;this.dataModelResult=new ie;this.dataModel=new Nt;this.formInfo=new $;this.dataModelEnumSendSmsStatusTypeResult=new ie;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,s&&(this.requestId=s.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(s=>{this.formInfo.formTitle=s}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(s=>s.tokenInfoStore).subscribe(s=>x(this,null,function*(){this.tokenInfo=s})),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:s=>{this.dataModelEnumSendSmsStatusTypeResult=s}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let s=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(s,e,this.constructorInfoAreaId)}),this.coreModuleLogReportAbuseService.setAccessLoad(),this.coreModuleLogReportAbuseService.setAccessDataType(he.Editor),this.coreModuleLogReportAbuseService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(s)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(s,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Mi.\u0275fac=function(e){return new(e||Mi)(m(Z),m(Y),m(O),m(Tt),m(U),m(F),m(G),m(B),m(j),m(P))},Mi.\u0275cmp=k({type:Mi,selectors:[["app-coremodulelog-report-abuse-view"]],viewQuery:function(e,i){if(e&1&&z(cn,5),e&2){let t;J(t=X())&&(i.formGroup=t.first)}},standalone:!1,decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(n(0,"div",0),d(1),a(),n(2,"div",1),h(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),a(),n(5,"div",4)(6,"div",5)(7,"small",6),d(8),a(),n(9,"small",7),d(10),a()()(),n(11,"div",8),b(12,dn,5,3,"div",9),a()),e&2&&(r(),S(" ",i.formInfo.formTitle," "),r(2),p("optionsInfoAreaId",i.constructorInfoAreaId),r(),p("dataModel",i.dataModel)("optionMethod",1),r(4),S("",i.formInfo.formAlert," "),r(2),S("",i.formInfo.formError," "),r(2),p("ngIf",i.formInfo.formSubmitAllow))},dependencies:[V,ee,et,H],encapsulation:2});var $i=Mi;var mn=()=>[5,10,20,100],pn=o=>({display:o});function un(o,s){if(o&1){let e=E();n(0,"a",44),M("click",function(){u(e);let t=g();return f(t.onActionBackToParent())}),h(1,"i",45),a()}}function fn(o,s){if(o&1){let e=E();n(0,"div",46)(1,"a",47),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewRow(t.tableRowSelected))}),h(2,"i",48)(3,"br"),a(),n(4,"p",49),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.VIEW")))}function Sn(o,s){if(o&1){let e=E();n(0,"div",46)(1,"a",50),M("click",function(){u(e);let t=g();return f(t.onActionButtonEditRow(t.tableRowSelected))}),h(2,"i",51)(3,"br"),a(),n(4,"p",49),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.EDIT")))}function Cn(o,s){if(o&1){let e=E();n(0,"div",46)(1,"a",52),M("click",function(){u(e);let t=g();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),h(2,"i",53)(3,"br"),a(),n(4,"p",49),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.DELETE")))}function hn(o,s){if(o&1){let e=E();n(0,"div",46)(1,"a",47),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewUserRow(t.tableRowSelected))}),h(2,"i",54)(3,"br"),a(),n(4,"p",49),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.USER")))}function gn(o,s){if(o&1){let e=E();n(0,"div",46)(1,"a",47),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewMemberRow(t.tableRowSelected))}),h(2,"i",55)(3,"br"),a(),n(4,"p",49),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.MEMBER")))}function vn(o,s){if(o&1&&(n(0,"mat-header-cell",56),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function _n(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.id," ")}}function Mn(o,s){if(o&1&&(n(0,"mat-header-cell",56),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function bn(o,s){if(o&1&&h(0,"select",59),o&2){let e=g().$implicit,i=g();p("contentService",i.contentService)("row",e)("ngStyle",Me(3,pn,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function In(o,s){if(o&1&&(n(0,"mat-cell",57),v(1,"statusCellClass"),h(2,"i",57),v(3,"statusIconClass"),b(4,bn,1,5,"select",58),a()),o&2){let e=s.$implicit,i=g();p("ngClass",_(1,3,e.recordStatus)),r(2),p("ngClass",_(3,5,e.recordStatus)),r(2),p("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function wn(o,s){if(o&1&&(n(0,"mat-header-cell",56),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function En(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmssiteinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function yn(o,s){if(o&1&&(n(0,"mat-header-cell",56),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function Tn(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmsuserinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkUserId))," ")}}function Ln(o,s){if(o&1&&(n(0,"mat-header-cell",56),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function Rn(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.linkMemberId," ")}}function An(o,s){if(o&1&&(n(0,"mat-header-cell",56),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleName==null?null:e.fieldsInfo.moduleName.fieldTitle," ")}}function kn(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleName," ")}}function Dn(o,s){if(o&1&&(n(0,"mat-header-cell",56),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleEntityName==null?null:e.fieldsInfo.moduleEntityName.fieldTitle," ")}}function xn(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleEntityName," ")}}function Bn(o,s){if(o&1&&(n(0,"mat-header-cell",56),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleEntityId==null?null:e.fieldsInfo.moduleEntityId.fieldTitle," ")}}function Vn(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleEntityId," ")}}function Nn(o,s){if(o&1&&(n(0,"mat-header-cell",56),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.subjectBody==null?null:e.fieldsInfo.subjectBody.fieldTitle," ")}}function On(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.subjectBody," ")}}function Gn(o,s){if(o&1&&(n(0,"mat-header-cell",56),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.adminResultProcess==null?null:e.fieldsInfo.adminResultProcess.fieldTitle," ")}}function Pn(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.adminResultProcess," ")}}function Hn(o,s){if(o&1&&(n(0,"mat-header-cell",56),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Fn(o,s){if(o&1&&(n(0,"mat-cell",60),d(1),v(2,"localeDateTime"),a()),o&2){let e=s.$implicit;r(),S(" ",_(2,1,e.createdDate)," ")}}function Un(o,s){o&1&&(n(0,"mat-header-cell"),d(1),v(2,"translate"),a()),o&2&&(r(),S(" ",_(2,1,"TITLE.OPTION")," "))}function jn(o,s){if(o&1&&(n(0,"mat-cell",61)(1,"button",62)(2,"mat-icon"),d(3,"more_vert"),a()(),h(4,"mat-menu",null,2),a()),o&2){let e=te(5);r(),p("matMenuTriggerFor",e)}}function qn(o,s){o&1&&h(0,"mat-header-row")}function Wn(o,s){if(o&1){let e=E();n(0,"mat-row",63),M("click",function(){let t=u(e).$implicit,c=g();return f(c.onActionTableRowSelect(t))}),a()}if(o&2){let e=s.$implicit,i=s.dataIndex,t=g();ve("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var bi=class bi extends $e{constructor(e,i,t,c,C,l,A,re,K,le,_t,at,Mt){super(i,new Nt,at,l,re);this.coreEnumService=e;this.contentService=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=C;this.tokenHelper=l;this.cdr=A;this.translate=re;this.cmsStoreService=K;this.router=le;this.pageInfo=_t;this.publicHelper=at;this.dialog=Mt;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestlinkMemberId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new xe;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkUserId","LinkSiteId","LinkMemberId","ModuleName","ModuleEntityName","ModuleEntityId","SubjectBody","AdminResultProcess","CreatedDate"];this.tabledisplayedColumnsMobileSource=["Id","LinkUserId","LinkSiteId","LinkMemberId","ModuleName","ModuleEntityName","ModuleEntityId","SubjectBody","AdminResultProcess","CreatedDate"];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberId")),this.requestLinkSiteId>0){let y=new W;y.propertyName="LinkCmsSiteId",y.value=this.requestLinkSiteId,this.filteModelContent.filters.push(y)}if(this.requestLinkUserId>0){let y=new W;y.propertyName="LinkUserId",y.value=this.requestLinkUserId,this.filteModelContent.filters.push(y)}if(this.requestlinkMemberId>0){let y=new W;y.propertyName="linkMemberId",y.value=this.requestlinkMemberId,this.filteModelContent.filters.push(y)}this.optionsSearch.parentMethods={onSubmit:y=>this.onSubmitOptionsSearch(y)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending}ngOnInit(){this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Nt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=N.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open($i,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(Zi,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(C,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{i.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{i.set(l,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(t,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new W;C.propertyName="RecordStatus",C.value=De.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkUserId||this.tableRowSelected.linkUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkUserId])}onActionButtonViewMemberRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkMemberId||this.tableRowSelected.linkMemberId===""){this.translate.get("MESSAGE.content_does_not_include_member_informations").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/member/user/edit",this.tableRowSelected.linkMemberId])}onActionButtonViewSiteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkSiteId||this.tableRowSelected.linkSiteId===0){this.translate.get("MESSAGE.content_does_not_include_site_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/site/edit",this.tableRowSelected.linkSiteId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};bi.\u0275fac=function(i){return new(i||bi)(m(O),m(Tt),m(U),m(ge),m(Te),m(F),m(B),m(P),m(G),m(Le),m(Xe),m(j),m(Ae))},bi.\u0275cmp=k({type:bi,selectors:[["app-coremodulelog-report-abuse-list"]],standalone:!1,features:[Q],decls:74,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkUserId"],["matColumnDef","LinkMemberId"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","ModuleEntityId"],["matColumnDef","SubjectBody"],["matColumnDef","AdminResultProcess"],["matColumnDef","CreatedDate"],["style","direction:ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-id-card-clip","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let c=E();n(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(l){return u(c),L(t.viewGuideNotice,l)||(t.viewGuideNotice=l),f(l)}),M("optionOnActionButtonMemoRow",function(){return u(c),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(c),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(c),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(c),f(t.onActionButtonPrintRow())}),I(1,4),d(2," -------------------------------------- "),w(),se(3,5)(4,6),I(5,7),b(6,un,2,0,"a",8),n(7,"a",9),M("click",function(){return u(c),f(t.viewGuideNotice=!t.viewGuideNotice)}),h(8,"i",10),a(),n(9,"a",9),M("click",function(){return u(c),f(t.onActionButtonReload())}),h(10,"i",11),a(),w(),I(11,12),n(12,"a",13),M("click",function(){return u(c),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),h(13,"mat-slide-toggle",14),d(14),v(15,"translate"),a(),n(16,"a",13),M("click",function(){return u(c),f(t.onActionButtonStatist())}),h(17,"mat-slide-toggle",14),d(18),v(19,"translate"),a(),w(),se(20,15),I(21,16),b(22,fn,7,3,"div",17)(23,Sn,7,3,"div",17)(24,Cn,7,3,"div",17)(25,hn,7,3,"div",17)(26,gn,7,3,"div",17),w(),I(27,18),n(28,"app-cms-search-list",19),R("optionsChange",function(l){return u(c),L(t.optionsSearch,l)||(t.optionsSearch=l),f(l)}),a(),n(29,"app-cms-statist-list",19),R("optionsChange",function(l){return u(c),L(t.optionsStatist,l)||(t.optionsStatist=l),f(l)}),a(),w(),I(30,20),n(31,"mat-table",21,0),M("matSortChange",function(){u(c);let l=te(32);return f(t.onTableSortData(l))}),I(33,22),b(34,vn,2,1,"mat-header-cell",23)(35,_n,2,1,"mat-cell",24),w(),I(36,25),b(37,Mn,2,1,"mat-header-cell",23)(38,In,5,7,"mat-cell",26),w(),I(39,27),b(40,wn,2,1,"mat-header-cell",23)(41,En,4,5,"mat-cell",24),w(),I(42,28),b(43,yn,2,1,"mat-header-cell",23)(44,Tn,4,5,"mat-cell",24),w(),I(45,29),b(46,Ln,2,1,"mat-header-cell",23)(47,Rn,2,1,"mat-cell",24),w(),I(48,30),b(49,An,2,1,"mat-header-cell",23)(50,kn,2,1,"mat-cell",24),w(),I(51,31),b(52,Dn,2,1,"mat-header-cell",23)(53,xn,2,1,"mat-cell",24),w(),I(54,32),b(55,Bn,2,1,"mat-header-cell",23)(56,Vn,2,1,"mat-cell",24),w(),I(57,33),b(58,Nn,2,1,"mat-header-cell",23)(59,On,2,1,"mat-cell",24),w(),I(60,34),b(61,Gn,2,1,"mat-header-cell",23)(62,Pn,2,1,"mat-cell",24),w(),I(63,35),b(64,Hn,2,1,"mat-header-cell",23)(65,Fn,3,3,"mat-cell",36),w(),I(66,37),b(67,Un,3,3,"mat-header-cell",38)(68,jn,6,1,"mat-cell",39),w(),b(69,qn,1,0,"mat-header-row",40)(70,Wn,1,6,"mat-row",41),a(),w(),I(71,42),n(72,"mat-paginator",43,1),M("page",function(l){return u(c),f(t.onTablePageingData(l))}),a(),w(),a()}i&2&&(p("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),p("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),r(6),p("ngIf",t.requestLinkSiteId>0),r(7),p("checked",t.optionsSearch.data.show),r(),S("",_(15,26,"ACTION.SEARCH")," "),r(3),p("checked",t.optionsStatist.data.show),r(),S("",_(19,28,"ACTION.STATIST")," "),r(4),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(),p("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.linkUserId)>0),r(),p("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.linkMemberId)>0),r(2),T("options",t.optionsSearch),r(),T("options",t.optionsStatist),r(2),p("dataSource",t.tableSource),r(38),p("matHeaderRowDef",t.tabledisplayedColumns),r(),p("matRowDefColumns",t.tabledisplayedColumns),r(2),p("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",_e(30,mn)))},dependencies:[be,V,Ie,Re,ke,oe,Ve,Ne,Oe,dt,Ge,Pe,He,Ue,Ke,je,Fe,Qe,qe,We,ze,Je,tt,it,ot,rt,ct,H,gt,pt,Ye,nt,st],encapsulation:2});var eo=bi;var Kn=["vform"];function Qn(o,s){if(o&1){let e=E();n(0,"div",17)(1,"button",18),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",19),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var Ii=class Ii extends Ze{constructor(e,i,t,c,C,l,A,re,K,le){super(c,new Vt,K,le);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreModuleLogScoreService=c;this.cmsToastrService=C;this.tokenHelper=l;this.cmsStoreService=A;this.cdr=re;this.publicHelper=K;this.translate=le;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ie;this.dataModel=new Vt;this.formInfo=new $;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogScoreService.setAccessLoad(),this.coreModuleLogScoreService.setAccessDataType(he.Editor),this.coreModuleLogScoreService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ii.\u0275fac=function(i){return new(i||Ii)(m(Z),m(Y),m(O),m(wt),m(U),m(F),m(G),m(B),m(j),m(P))},Ii.\u0275cmp=k({type:Ii,selectors:[["app-coremodulelog-score-edit"]],viewQuery:function(i,t){if(i&1&&z(Kn,5),i&2){let c;J(c=X())&&(t.formGroup=c.first)}},standalone:!1,features:[Q],decls:32,vars:24,consts:[["vform","ngForm"],["ModuleName",""],["ModuleEntityName",""],["ModuleEntityId",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleName","placeholder","ModuleName","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityName","placeholder","moduleEntityName","id","dataModel.moduleEntityName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityId",1,"color-highlight"],["matInput","","type","text","name","dataModel.moduleEntityId","placeholder","ModuleEntityId","id","dataModel.moduleEntityId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["class","form-actions",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(i,t){if(i&1){let c=E();n(0,"div",4),h(1,"app-progress-spinner",5),n(2,"div",6)(3,"p",7),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"form",null,0),h(10,"app-cms-site-selector",8),v(11,"translate"),h(12,"app-cms-user-selector",8),v(13,"translate"),h(14,"app-cms-member-selector",8),v(15,"translate"),n(16,"div",9)(17,"label",10),d(18,"ModuleName"),a(),n(19,"input",11,1),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleName,l)||(t.dataModel.moduleName=l),f(l)}),a()(),n(21,"div",9)(22,"label",12),d(23,"ModuleEntityName"),a(),n(24,"input",13,2),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleEntityName,l)||(t.dataModel.moduleEntityName=l),f(l)}),a()(),n(26,"div",9)(27,"label",14),d(28,"ModuleEntityId"),a(),n(29,"input",15,3),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleEntityId,l)||(t.dataModel.moduleEntityId=l),f(l)}),a()(),b(31,Qn,5,3,"div",16),a()()()}i&2&&(r(),p("optionsInfoAreaId",t.constructorInfoAreaId),r(3),S(" ",t.formInfo.formTitle," "),r(2),S(" ",_(7,16,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",_(11,18,"TITLE.SITE")),r(2),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",_(13,20,"TITLE.USER")),r(2),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkMemberId)("optionPlaceholder",_(15,22,"TITLE.Member")),r(5),T("ngModel",t.dataModel.moduleName),r(5),T("ngModel",t.dataModel.moduleEntityName),r(5),T("ngModel",t.dataModel.moduleEntityId),r(2),p("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,ye,ft,St,we,Ct,Ee,oe,mt,Ut,jt,ee,H],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var to=Ii;var zn=["vform"];function Jn(o,s){if(o&1){let e=E();n(0,"div",5)(1,"button",10),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",11),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var wi=class wi{constructor(s,e,i,t,c,C,l,A,re,K){this.data=s;this.dialogRef=e;this.coreEnumService=i;this.coreModuleLogScoreService=t;this.cmsToastrService=c;this.tokenHelper=C;this.cmsStoreService=l;this.cdr=A;this.publicHelper=re;this.translate=K;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Be;this.dataModelResult=new ie;this.dataModel=new Vt;this.formInfo=new $;this.dataModelEnumSendSmsStatusTypeResult=new ie;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,s&&(this.requestId=s.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(s=>{this.formInfo.formTitle=s}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(s=>s.tokenInfoStore).subscribe(s=>x(this,null,function*(){this.tokenInfo=s})),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:s=>{this.dataModelEnumSendSmsStatusTypeResult=s}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let s=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(s,e,this.constructorInfoAreaId)}),this.coreModuleLogScoreService.setAccessLoad(),this.coreModuleLogScoreService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(s)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(s,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};wi.\u0275fac=function(e){return new(e||wi)(m(Z),m(Y),m(O),m(wt),m(U),m(F),m(G),m(B),m(j),m(P))},wi.\u0275cmp=k({type:wi,selectors:[["app-coremodulelog-score-view"]],viewQuery:function(e,i){if(e&1&&z(zn,5),e&2){let t;J(t=X())&&(i.formGroup=t.first)}},standalone:!1,decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(n(0,"div",0),d(1),a(),n(2,"div",1),h(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),a(),n(5,"div",4)(6,"div",5)(7,"small",6),d(8),a(),n(9,"small",7),d(10),a()()(),n(11,"div",8),b(12,Jn,5,3,"div",9),a()),e&2&&(r(),S(" ",i.formInfo.formTitle," "),r(2),p("optionsInfoAreaId",i.constructorInfoAreaId),r(),p("dataModel",i.dataModel)("optionMethod",1),r(4),S("",i.formInfo.formAlert," "),r(2),S("",i.formInfo.formError," "),r(2),p("ngIf",i.formInfo.formSubmitAllow))},dependencies:[V,ee,et,H],encapsulation:2});var io=wi;var Xn=()=>[5,10,20,100],Yn=o=>({display:o});function Zn(o,s){if(o&1){let e=E();n(0,"a",42),M("click",function(){u(e);let t=g();return f(t.onActionBackToParent())}),h(1,"i",43),a()}}function $n(o,s){if(o&1){let e=E();n(0,"div",44)(1,"a",45),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewRow(t.tableRowSelected))}),h(2,"i",46)(3,"br"),a(),n(4,"p",47),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.VIEW")))}function es(o,s){if(o&1){let e=E();n(0,"div",44)(1,"a",48),M("click",function(){u(e);let t=g();return f(t.onActionButtonEditRow(t.tableRowSelected))}),h(2,"i",49)(3,"br"),a(),n(4,"p",47),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.EDIT")))}function ts(o,s){if(o&1){let e=E();n(0,"div",44)(1,"a",50),M("click",function(){u(e);let t=g();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),h(2,"i",51)(3,"br"),a(),n(4,"p",47),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.DELETE")))}function is(o,s){if(o&1){let e=E();n(0,"div",44)(1,"a",45),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewUserRow(t.tableRowSelected))}),h(2,"i",52)(3,"br"),a(),n(4,"p",47),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.USER")))}function os(o,s){if(o&1){let e=E();n(0,"div",44)(1,"a",45),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewMemberRow(t.tableRowSelected))}),h(2,"i",53)(3,"br"),a(),n(4,"p",47),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.MEMBER")))}function rs(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function ns(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.id," ")}}function ss(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function as(o,s){if(o&1&&h(0,"select",57),o&2){let e=g().$implicit,i=g();p("contentService",i.contentService)("row",e)("ngStyle",Me(3,Yn,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function ls(o,s){if(o&1&&(n(0,"mat-cell",55),v(1,"statusCellClass"),h(2,"i",55),v(3,"statusIconClass"),b(4,as,1,5,"select",56),a()),o&2){let e=s.$implicit,i=g();p("ngClass",_(1,3,e.recordStatus)),r(2),p("ngClass",_(3,5,e.recordStatus)),r(2),p("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function cs(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function ds(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmssiteinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function ms(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function ps(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmsuserinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkUserId))," ")}}function us(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkMemberId==null?null:e.fieldsInfo.linkMemberId.fieldTitle," ")}}function fs(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.linkMemberId," ")}}function Ss(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleName==null?null:e.fieldsInfo.moduleName.fieldTitle," ")}}function Cs(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleName," ")}}function hs(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleEntityName==null?null:e.fieldsInfo.moduleEntityName.fieldTitle," ")}}function gs(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleEntityName," ")}}function vs(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleEntityId==null?null:e.fieldsInfo.moduleEntityId.fieldTitle," ")}}function _s(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleEntityId," ")}}function Ms(o,s){if(o&1&&(n(0,"mat-header-cell",54),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function bs(o,s){if(o&1&&(n(0,"mat-cell",58),d(1),v(2,"localeDateTime"),a()),o&2){let e=s.$implicit;r(),S(" ",_(2,1,e.createdDate)," ")}}function Is(o,s){o&1&&(n(0,"mat-header-cell"),d(1),v(2,"translate"),a()),o&2&&(r(),S(" ",_(2,1,"TITLE.OPTION")," "))}function ws(o,s){if(o&1&&(n(0,"mat-cell",59)(1,"button",60)(2,"mat-icon"),d(3,"more_vert"),a()(),h(4,"mat-menu",null,2),a()),o&2){let e=te(5);r(),p("matMenuTriggerFor",e)}}function Es(o,s){o&1&&h(0,"mat-header-row")}function ys(o,s){if(o&1){let e=E();n(0,"mat-row",61),M("click",function(){let t=u(e).$implicit,c=g();return f(c.onActionTableRowSelect(t))}),a()}if(o&2){let e=s.$implicit,i=s.dataIndex,t=g();ve("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var Ei=class Ei extends $e{constructor(e,i,t,c,C,l,A,re,K,le,_t,at,Mt){super(i,new Vt,at,A,K);this.coreEnumService=e;this.contentService=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=C;this.cmsStoreService=l;this.tokenHelper=A;this.cdr=re;this.translate=K;this.router=le;this.pageInfo=_t;this.publicHelper=at;this.dialog=Mt;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestlinkMemberId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new xe;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkUserId","LinkSiteId","LinkMemberId","ModuleName","ModuleEntityName","ModuleEntityId","CreatedDate"];this.tabledisplayedColumnsMobileSource=["Id","LinkUserId","LinkSiteId","LinkMemberId","ModuleName","ModuleEntityName","ModuleEntityId","CreatedDate"];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberId")),this.requestLinkSiteId>0){let y=new W;y.propertyName="LinkCmsSiteId",y.value=this.requestLinkSiteId,this.filteModelContent.filters.push(y)}if(this.requestLinkUserId>0){let y=new W;y.propertyName="LinkUserId",y.value=this.requestLinkUserId,this.filteModelContent.filters.push(y)}if(this.requestlinkMemberId>0){let y=new W;y.propertyName="linkMemberId",y.value=this.requestlinkMemberId,this.filteModelContent.filters.push(y)}this.optionsSearch.parentMethods={onSubmit:y=>this.onSubmitOptionsSearch(y)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending}ngOnInit(){this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Vt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=N.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(io,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(to,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(C,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{i.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{i.set(l,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(t,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new W;C.propertyName="RecordStatus",C.value=De.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkUserId||this.tableRowSelected.linkUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkUserId])}onActionButtonViewMemberRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkMemberId||this.tableRowSelected.linkMemberId===""){this.translate.get("MESSAGE.content_does_not_include_member_informations").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/member/user/edit",this.tableRowSelected.linkMemberId])}onActionButtonViewSiteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkSiteId||this.tableRowSelected.linkSiteId===0){this.translate.get("MESSAGE.content_does_not_include_site_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/site/edit",this.tableRowSelected.linkSiteId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};Ei.\u0275fac=function(i){return new(i||Ei)(m(O),m(wt),m(U),m(ge),m(Te),m(G),m(F),m(B),m(P),m(Le),m(Xe),m(j),m(Ae))},Ei.\u0275cmp=k({type:Ei,selectors:[["app-coremodulelog-score-list"]],standalone:!1,features:[Q],decls:68,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkUserId"],["matColumnDef","LinkMemberId"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","ModuleEntityId"],["matColumnDef","CreatedDate"],["style","direction:ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-id-card-clip","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let c=E();n(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(l){return u(c),L(t.viewGuideNotice,l)||(t.viewGuideNotice=l),f(l)}),M("optionOnActionButtonMemoRow",function(){return u(c),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(c),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(c),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(c),f(t.onActionButtonPrintRow())}),I(1,4),d(2," -------------------------------------- "),w(),se(3,5)(4,6),I(5,7),b(6,Zn,2,0,"a",8),n(7,"a",9),M("click",function(){return u(c),f(t.viewGuideNotice=!t.viewGuideNotice)}),h(8,"i",10),a(),n(9,"a",9),M("click",function(){return u(c),f(t.onActionButtonReload())}),h(10,"i",11),a(),w(),I(11,12),n(12,"a",13),M("click",function(){return u(c),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),h(13,"mat-slide-toggle",14),d(14),v(15,"translate"),a(),n(16,"a",13),M("click",function(){return u(c),f(t.onActionButtonStatist())}),h(17,"mat-slide-toggle",14),d(18),v(19,"translate"),a(),w(),se(20,15),I(21,16),b(22,$n,7,3,"div",17)(23,es,7,3,"div",17)(24,ts,7,3,"div",17)(25,is,7,3,"div",17)(26,os,7,3,"div",17),w(),I(27,18),n(28,"app-cms-search-list",19),R("optionsChange",function(l){return u(c),L(t.optionsSearch,l)||(t.optionsSearch=l),f(l)}),a(),n(29,"app-cms-statist-list",19),R("optionsChange",function(l){return u(c),L(t.optionsStatist,l)||(t.optionsStatist=l),f(l)}),a(),w(),I(30,20),n(31,"mat-table",21,0),M("matSortChange",function(){u(c);let l=te(32);return f(t.onTableSortData(l))}),I(33,22),b(34,rs,2,1,"mat-header-cell",23)(35,ns,2,1,"mat-cell",24),w(),I(36,25),b(37,ss,2,1,"mat-header-cell",23)(38,ls,5,7,"mat-cell",26),w(),I(39,27),b(40,cs,2,1,"mat-header-cell",23)(41,ds,4,5,"mat-cell",24),w(),I(42,28),b(43,ms,2,1,"mat-header-cell",23)(44,ps,4,5,"mat-cell",24),w(),I(45,29),b(46,us,2,1,"mat-header-cell",23)(47,fs,2,1,"mat-cell",24),w(),I(48,30),b(49,Ss,2,1,"mat-header-cell",23)(50,Cs,2,1,"mat-cell",24),w(),I(51,31),b(52,hs,2,1,"mat-header-cell",23)(53,gs,2,1,"mat-cell",24),w(),I(54,32),b(55,vs,2,1,"mat-header-cell",23)(56,_s,2,1,"mat-cell",24),w(),I(57,33),b(58,Ms,2,1,"mat-header-cell",23)(59,bs,3,3,"mat-cell",34),w(),I(60,35),b(61,Is,3,3,"mat-header-cell",36)(62,ws,6,1,"mat-cell",37),w(),b(63,Es,1,0,"mat-header-row",38)(64,ys,1,6,"mat-row",39),a(),w(),I(65,40),n(66,"mat-paginator",41,1),M("page",function(l){return u(c),f(t.onTablePageingData(l))}),a(),w(),a()}i&2&&(p("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),p("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),r(6),p("ngIf",t.requestLinkSiteId>0),r(7),p("checked",t.optionsSearch.data.show),r(),S("",_(15,26,"ACTION.SEARCH")," "),r(3),p("checked",t.optionsStatist.data.show),r(),S("",_(19,28,"ACTION.STATIST")," "),r(4),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(),p("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.linkUserId)>0),r(),p("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.linkMemberId)>0),r(2),T("options",t.optionsSearch),r(),T("options",t.optionsStatist),r(2),p("dataSource",t.tableSource),r(32),p("matHeaderRowDef",t.tabledisplayedColumns),r(),p("matRowDefColumns",t.tabledisplayedColumns),r(2),p("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",_e(30,Xn)))},dependencies:[be,V,Ie,Re,ke,oe,Ve,Ne,Oe,dt,Ge,Pe,He,Ue,Ke,je,Fe,Qe,qe,We,ze,Je,tt,it,ot,rt,ct,H,gt,pt,Ye,nt,st],encapsulation:2});var oo=Ei;var Ts=["vform"];function Ls(o,s){if(o&1){let e=E();n(0,"div",25)(1,"label",26),d(2),a(),n(3,"input",27),R("ngModelChange",function(t){u(e);let c=g();return L(c.dataModel.expireDateTime,t)||(c.dataModel.expireDateTime=t),f(t)}),a(),h(4,"mat-datepicker-toggle",28)(5,"mat-datepicker",29,6),a()}if(o&2){let e=te(6),i=g();r(2),D(i.fieldsInfo.expireDateTime==null?null:i.fieldsInfo.expireDateTime.fieldTitle),r(),p("placeholder",ai(i.fieldsInfo.expireDateTime==null?null:i.fieldsInfo.expireDateTime.fieldTitle))("disabled",ai(!(i.fieldsInfo.expireDateTime!=null&&i.fieldsInfo.expireDateTime.accessEditField)))("matDatepicker",e),T("ngModel",i.dataModel.expireDateTime),r(),p("for",e)}}function Rs(o,s){if(o&1){let e=E();n(0,"div",30)(1,"button",31),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",32),d(3),v(4,"translate"),a(),n(5,"button",33),h(6,"i",32),d(7),v(8,"translate"),a()()}o&2&&(r(3),S(" ",_(4,2,"ACTION.CANCEL")," "),r(4),S(" ",_(8,4,"ACTION.SAVE")," "))}var yi=class yi extends Ze{constructor(e,i,t,c,C,l,A,re,K,le){super(c,new Ot,K,le);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreModuleLogShowKeyService=c;this.cmsToastrService=C;this.tokenHelper=l;this.cmsStoreService=A;this.cdr=re;this.publicHelper=K;this.translate=le;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ht;this.dataModel=new Ot;this.formInfo=new $;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogShowKeyService.setAccessLoad(),this.coreModuleLogShowKeyService.setAccessDataType(he.Editor),this.coreModuleLogShowKeyService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogShowKeyService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.formAlert=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e),this.formInfo.formSubmitAllow=!0},error:i=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};yi.\u0275fac=function(i){return new(i||yi)(m(Z),m(Y),m(O),m(Lt),m(U),m(F),m(G),m(B),m(j),m(P))},yi.\u0275cmp=k({type:yi,selectors:[["app-coremodule-data-memo-edit"]],viewQuery:function(i,t){if(i&1&&z(Ts,5),i&2){let c;J(c=X())&&(t.formGroup=c.first)}},standalone:!1,features:[Q],decls:37,vars:12,consts:[["vform","ngForm"],["ModuleName",""],["ModuleEntityName",""],["ModuleEntityId",""],["showKey",""],["SubjectTitle",""],["expireDateTime",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.moduleName",1,"color-highlight"],["matInput","","name","dataModel.moduleName","type","text","placeholder","ModuleName","id","dataModel.moduleName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityName",1,"color-highlight"],["matInput","","name","dataModel.moduleEntityName","type","text","placeholder","ModuleEntityName","id","dataModel.moduleEntityName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.moduleEntityId",1,"color-highlight"],["matInput","","name","dataModel.moduleEntityId","type","text","placeholder","ModuleEntityId","id","dataModel.moduleEntityId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.showKey",1,"color-highlight"],["matInput","","name","dataModel.showKey","type","text","placeholder","showKey","id","dataModel.showKey",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.subjectTitle",1,"color-highlight"],["matInput","","name","dataModel.subjectTitle","type","text","placeholder","SubjectTitle","id","dataModel.subjectTitle",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.expireDateTime",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDateTime","minlength","3","maxlength","100","id","dataModel.expireDateTime",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel","placeholder","disabled"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green"]],template:function(i,t){if(i&1){let c=E();n(0,"div",7),h(1,"app-progress-spinner",8),n(2,"div",9)(3,"p",10),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"form",11,0),M("ngSubmit",function(){return u(c),f(t.onFormSubmit())}),n(10,"div",12)(11,"label",13),d(12,"ModuleName"),a(),n(13,"input",14,1),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleName,l)||(t.dataModel.moduleName=l),f(l)}),a()(),n(15,"div",12)(16,"label",15),d(17,"ModuleEntityName"),a(),n(18,"input",16,2),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleEntityName,l)||(t.dataModel.moduleEntityName=l),f(l)}),a()(),n(20,"div",12)(21,"label",17),d(22,"ModuleEntityId"),a(),n(23,"input",18,3),R("ngModelChange",function(l){return u(c),L(t.dataModel.moduleEntityId,l)||(t.dataModel.moduleEntityId=l),f(l)}),a()(),n(25,"div",12)(26,"label",19),d(27,"showKey"),a(),n(28,"textarea",20,4),R("ngModelChange",function(l){return u(c),L(t.dataModel.showKey,l)||(t.dataModel.showKey=l),f(l)}),a()(),n(30,"div",12)(31,"label",21),d(32,"SubjectTitle"),a(),n(33,"textarea",22,5),R("ngModelChange",function(l){return u(c),L(t.dataModel.subjectTitle,l)||(t.dataModel.subjectTitle=l),f(l)}),a()(),b(35,Ls,7,8,"div",23)(36,Rs,9,6,"div",24),a()()()}i&2&&(r(),p("optionsInfoAreaId",t.constructorInfoAreaId),r(3),S(" ",t.formInfo.formTitle," "),r(2),S(" ",_(7,10,"TITLE.Be_Careful_When_Entering_Information")," "),r(7),T("ngModel",t.dataModel.moduleName),r(5),T("ngModel",t.dataModel.moduleEntityName),r(5),T("ngModel",t.dataModel.moduleEntityId),r(5),T("ngModel",t.dataModel.showKey),r(5),T("ngModel",t.dataModel.subjectTitle),r(2),p("ngIf",t.fieldsInfo.expireDateTime==null?null:t.fieldsInfo.expireDateTime.accessWatchField),r(),p("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,ye,ft,St,we,bt,It,Ct,Ee,Ro,Ao,ko,To,oe,ee,H],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var ro=yi;var As=["vform"];function ks(o,s){if(o&1){let e=E();n(0,"div",5)(1,"button",10),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",11),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var Ti=class Ti{constructor(s,e,i,t,c,C,l,A,re,K){this.data=s;this.dialogRef=e;this.coreEnumService=i;this.coreModuleLogShowKeyService=t;this.cmsToastrService=c;this.tokenHelper=C;this.cmsStoreService=l;this.cdr=A;this.publicHelper=re;this.translate=K;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Be;this.dataModelResult=new ie;this.dataModel=new Ot;this.formInfo=new $;this.dataModelEnumSendSmsStatusTypeResult=new ie;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,s&&(this.requestId=s.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(s=>{this.formInfo.formTitle=s}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(s=>s.tokenInfoStore).subscribe(s=>x(this,null,function*(){this.tokenInfo=s})),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:s=>{this.dataModelEnumSendSmsStatusTypeResult=s}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let s=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(s,e,this.constructorInfoAreaId)}),this.coreModuleLogShowKeyService.setAccessLoad(),this.coreModuleLogShowKeyService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(s)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(s,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ti.\u0275fac=function(e){return new(e||Ti)(m(Z),m(Y),m(O),m(Lt),m(U),m(F),m(G),m(B),m(j),m(P))},Ti.\u0275cmp=k({type:Ti,selectors:[["app-coremodule-data-memo-view"]],viewQuery:function(e,i){if(e&1&&z(As,5),e&2){let t;J(t=X())&&(i.formGroup=t.first)}},standalone:!1,decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(n(0,"div",0),d(1),a(),n(2,"div",1),h(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),a(),n(5,"div",4)(6,"div",5)(7,"small",6),d(8),a(),n(9,"small",7),d(10),a()()(),n(11,"div",8),b(12,ks,5,3,"div",9),a()),e&2&&(r(),S(" ",i.formInfo.formTitle," "),r(2),p("optionsInfoAreaId",i.constructorInfoAreaId),r(),p("dataModel",i.dataModel)("optionMethod",1),r(4),S("",i.formInfo.formAlert," "),r(2),S("",i.formInfo.formError," "),r(2),p("ngIf",i.formInfo.formSubmitAllow))},dependencies:[V,ee,et,H],encapsulation:2});var no=Ti;var Ds=()=>[5,10,20,100],xs=o=>({display:o});function Bs(o,s){if(o&1){let e=E();n(0,"a",41),M("click",function(){u(e);let t=g();return f(t.onActionBackToParent())}),h(1,"i",42),a()}}function Vs(o,s){if(o&1){let e=E();n(0,"div",43)(1,"a",44),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewRow(t.tableRowSelected))}),h(2,"i",45)(3,"br"),a(),n(4,"p",46),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.VIEW")))}function Ns(o,s){if(o&1){let e=E();n(0,"div",43)(1,"a",47),M("click",function(){u(e);let t=g();return f(t.onActionButtonEditRow(t.tableRowSelected))}),h(2,"i",48)(3,"br"),a(),n(4,"p",46),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.EDIT")))}function Os(o,s){if(o&1){let e=E();n(0,"div",43)(1,"a",49),M("click",function(){u(e);let t=g();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),h(2,"i",50)(3,"br"),a(),n(4,"p",46),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.DELETE")))}function Gs(o,s){if(o&1&&(n(0,"mat-header-cell",51),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Ps(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.id," ")}}function Hs(o,s){if(o&1&&(n(0,"mat-header-cell",51),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Fs(o,s){if(o&1&&h(0,"select",54),o&2){let e=g().$implicit,i=g();p("contentService",i.contentService)("row",e)("ngStyle",Me(3,xs,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Us(o,s){if(o&1&&(n(0,"mat-cell",52),v(1,"statusCellClass"),h(2,"i",52),v(3,"statusIconClass"),b(4,Fs,1,5,"select",53),a()),o&2){let e=s.$implicit,i=g();p("ngClass",_(1,3,e.recordStatus)),r(2),p("ngClass",_(3,5,e.recordStatus)),r(2),p("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function js(o,s){if(o&1&&(n(0,"mat-header-cell",51),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleName==null?null:e.fieldsInfo.moduleName.fieldTitle," ")}}function qs(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleName," ")}}function Ws(o,s){if(o&1&&(n(0,"mat-header-cell",51),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleEntityName==null?null:e.fieldsInfo.moduleEntityName.fieldTitle," ")}}function Ks(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleEntityName," ")}}function Qs(o,s){if(o&1&&(n(0,"mat-header-cell",51),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.moduleEntityId==null?null:e.fieldsInfo.moduleEntityId.fieldTitle," ")}}function zs(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.moduleEntityId," ")}}function Js(o,s){if(o&1&&(n(0,"mat-header-cell",51),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.showKey==null?null:e.fieldsInfo.showKey.fieldTitle," ")}}function Xs(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.showKey," ")}}function Ys(o,s){if(o&1&&(n(0,"mat-header-cell",51),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Zs(o,s){if(o&1&&(n(0,"mat-cell",55),d(1),v(2,"localeDateTime"),a()),o&2){let e=s.$implicit;r(),S(" ",_(2,1,e.createdDate)," ")}}function $s(o,s){o&1&&(n(0,"mat-header-cell"),d(1),v(2,"translate"),a()),o&2&&(r(),S(" ",_(2,1,"TITLE.OPTION")," "))}function ea(o,s){if(o&1&&(n(0,"mat-cell",56)(1,"button",57)(2,"mat-icon"),d(3,"more_vert"),a()(),h(4,"mat-menu",null,2),a()),o&2){let e=te(5);r(),p("matMenuTriggerFor",e)}}function ta(o,s){if(o&1&&(n(0,"mat-cell")(1,"div")(2,"table")(3,"tr"),h(4,"td"),n(5,"td"),d(6),a()()()()()),o&2){let e=s.$implicit;r(6),S(" ",e.subjectTitle," ")}}function ia(o,s){o&1&&h(0,"mat-header-row")}function oa(o,s){if(o&1){let e=E();n(0,"mat-row",58),M("click",function(){let t=u(e).$implicit,c=g();return f(c.onActionTableRowSelect(t))}),a()}if(o&2){let e=s.$implicit,i=s.dataIndex,t=g();ve("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var Li=class Li extends $e{constructor(e,i,t,c,C,l,A,re,K,le,_t,at,Mt){super(i,new Ot,at,l,re);this.coreEnumService=e;this.contentService=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=C;this.tokenHelper=l;this.cdr=A;this.translate=re;this.cmsStoreService=K;this.router=le;this.pageInfo=_t;this.publicHelper=at;this.dialog=Mt;this.requestLinkSiteId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new xe;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["RecordStatus","ModuleName","ModuleEntityName","ModuleEntityId","showKey","CreatedDate"];this.tabledisplayedColumnsMobileSource=["RecordStatus","ModuleName","ModuleEntityName","ModuleEntityId","showKey","CreatedDate"];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkSiteId>0){let y=new W;y.propertyName="LinkCmsSiteId",y.value=this.requestLinkSiteId,this.filteModelContent.filters.push(y)}this.optionsSearch.parentMethods={onSubmit:y=>this.onSubmitOptionsSearch(y)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending}ngOnInit(){this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ot);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=N.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(no,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(ro,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(C,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{i.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{i.set(l,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(t,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new W;C.propertyName="RecordStatus",C.value=De.Available,c.Filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};Li.\u0275fac=function(i){return new(i||Li)(m(O),m(Lt),m(U),m(ge),m(Te),m(F),m(B),m(P),m(G),m(Le),m(Xe),m(j),m(Ae))},Li.\u0275cmp=k({type:Li,selectors:[["app-coremodule-data-memo-list"]],standalone:!1,features:[Q],decls:62,vars:29,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","ModuleEntityId"],["matColumnDef","showKey"],["matColumnDef","CreatedDate"],["style","direction:ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],["matColumnDef","expandedDetail"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let c=E();n(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(l){return u(c),L(t.viewGuideNotice,l)||(t.viewGuideNotice=l),f(l)}),M("optionOnActionButtonMemoRow",function(){return u(c),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(c),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(c),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(c),f(t.onActionButtonPrintRow())}),I(1,4),d(2," -------------------------------------- "),w(),se(3,5)(4,6),I(5,7),b(6,Bs,2,0,"a",8),n(7,"a",9),M("click",function(){return u(c),f(t.viewGuideNotice=!t.viewGuideNotice)}),h(8,"i",10),a(),n(9,"a",9),M("click",function(){return u(c),f(t.onActionButtonReload())}),h(10,"i",11),a(),w(),I(11,12),n(12,"a",13),M("click",function(){return u(c),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),h(13,"mat-slide-toggle",14),d(14),v(15,"translate"),a(),n(16,"a",13),M("click",function(){return u(c),f(t.onActionButtonStatist())}),h(17,"mat-slide-toggle",14),d(18),v(19,"translate"),a(),w(),se(20,15),I(21,16),b(22,Vs,7,3,"div",17)(23,Ns,7,3,"div",17)(24,Os,7,3,"div",17),w(),I(25,18),n(26,"app-cms-search-list",19),R("optionsChange",function(l){return u(c),L(t.optionsSearch,l)||(t.optionsSearch=l),f(l)}),a(),n(27,"app-cms-statist-list",19),R("optionsChange",function(l){return u(c),L(t.optionsStatist,l)||(t.optionsStatist=l),f(l)}),a(),w(),I(28,20),n(29,"mat-table",21,0),M("matSortChange",function(){u(c);let l=te(30);return f(t.onTableSortData(l))}),I(31,22),b(32,Gs,2,1,"mat-header-cell",23)(33,Ps,2,1,"mat-cell",24),w(),I(34,25),b(35,Hs,2,1,"mat-header-cell",23)(36,Us,5,7,"mat-cell",26),w(),I(37,27),b(38,js,2,1,"mat-header-cell",23)(39,qs,2,1,"mat-cell",24),w(),I(40,28),b(41,Ws,2,1,"mat-header-cell",23)(42,Ks,2,1,"mat-cell",24),w(),I(43,29),b(44,Qs,2,1,"mat-header-cell",23)(45,zs,2,1,"mat-cell",24),w(),I(46,30),b(47,Js,2,1,"mat-header-cell",23)(48,Xs,2,1,"mat-cell",24),w(),I(49,31),b(50,Ys,2,1,"mat-header-cell",23)(51,Zs,3,3,"mat-cell",32),w(),I(52,33),b(53,$s,3,3,"mat-header-cell",34)(54,ea,6,1,"mat-cell",35),w(),I(55,36),b(56,ta,7,1,"mat-cell",24),w(),b(57,ia,1,0,"mat-header-row",37)(58,oa,1,6,"mat-row",38),a(),w(),I(59,39),n(60,"mat-paginator",40,1),M("page",function(l){return u(c),f(t.onTablePageingData(l))}),a(),w(),a()}i&2&&(p("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),p("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),r(6),p("ngIf",t.requestLinkSiteId>0),r(7),p("checked",t.optionsSearch.data.show),r(),S("",_(15,24,"ACTION.SEARCH")," "),r(3),p("checked",t.optionsStatist.data.show),r(),S("",_(19,26,"ACTION.STATIST")," "),r(4),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(2),T("options",t.optionsSearch),r(),T("options",t.optionsStatist),r(2),p("dataSource",t.tableSource),r(28),p("matHeaderRowDef",t.tabledisplayedColumns),r(),p("matRowDefColumns",t.tabledisplayedColumns),r(2),p("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",_e(28,Ds)))},dependencies:[be,V,Ie,Re,ke,oe,Ve,Ne,Oe,dt,Ge,Pe,He,Ue,Ke,je,Fe,Qe,qe,We,ze,Je,tt,it,ot,rt,H,Ye,nt,st],encapsulation:2});var so=Li;var ra=["vform"];function na(o,s){if(o&1){let e=E();n(0,"div",7)(1,"button",8),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",9),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var Ri=class Ri extends Ze{constructor(e,i,t,c,C,l,A,re,K,le){super(c,new Gt,K,le);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreModuleLogSiteCreditBlockedService=c;this.cmsToastrService=C;this.tokenHelper=l;this.cmsStoreService=A;this.cdr=re;this.publicHelper=K;this.translate=le;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ht;this.dataModel=new Gt;this.formInfo=new $;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogSiteCreditBlockedService.setAccessLoad(),this.coreModuleLogSiteCreditBlockedService.setAccessDataType(he.Editor),this.coreModuleLogSiteCreditBlockedService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ri.\u0275fac=function(i){return new(i||Ri)(m(Z),m(Y),m(O),m(Rt),m(U),m(F),m(G),m(B),m(j),m(P))},Ri.\u0275cmp=k({type:Ri,selectors:[["app-coremodulelog-site-credit-blocked-edit"]],viewQuery:function(i,t){if(i&1&&z(ra,5),i&2){let c;J(c=X())&&(t.formGroup=c.first)}},standalone:!1,features:[Q],decls:13,vars:11,consts:[["vform","ngForm"],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],["class","form-actions",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(i,t){i&1&&(n(0,"div",1),h(1,"app-progress-spinner",2),n(2,"div",3)(3,"p",4),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"form",null,0),h(10,"app-cms-site-selector",5),v(11,"translate"),b(12,na,5,3,"div",6),a()()()),i&2&&(r(),p("optionsInfoAreaId",t.constructorInfoAreaId),r(3),S(" ",t.formInfo.formTitle," "),r(2),S(" ",_(7,7,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",_(11,9,"TITLE.SITE")),r(2),p("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,ye,we,Ee,mt,ee,H],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var ao=Ri;var sa=["vform"];function aa(o,s){if(o&1){let e=E();n(0,"div",5)(1,"button",10),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",11),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var Ai=class Ai{constructor(s,e,i,t,c,C,l,A,re,K){this.data=s;this.dialogRef=e;this.coreEnumService=i;this.coreModuleLogSiteCreditBlockedService=t;this.cmsToastrService=c;this.tokenHelper=C;this.cmsStoreService=l;this.cdr=A;this.publicHelper=re;this.translate=K;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Be;this.dataModelResult=new ie;this.dataModel=new Gt;this.formInfo=new $;this.dataModelEnumSendSmsStatusTypeResult=new ie;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,s&&(this.requestId=s.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(s=>{this.formInfo.formTitle=s}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(s=>s.tokenInfoStore).subscribe(s=>x(this,null,function*(){this.tokenInfo=s})),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:s=>{this.dataModelEnumSendSmsStatusTypeResult=s}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let s=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(s,e,this.constructorInfoAreaId)}),this.coreModuleLogSiteCreditBlockedService.setAccessLoad(),this.coreModuleLogSiteCreditBlockedService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(s)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(s,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ai.\u0275fac=function(e){return new(e||Ai)(m(Z),m(Y),m(O),m(Rt),m(U),m(F),m(G),m(B),m(j),m(P))},Ai.\u0275cmp=k({type:Ai,selectors:[["app-coremodulelog-site-credit-blocked-view"]],viewQuery:function(e,i){if(e&1&&z(sa,5),e&2){let t;J(t=X())&&(i.formGroup=t.first)}},standalone:!1,decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(n(0,"div",0),d(1),a(),n(2,"div",1),h(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),a(),n(5,"div",4)(6,"div",5)(7,"small",6),d(8),a(),n(9,"small",7),d(10),a()()(),n(11,"div",8),b(12,aa,5,3,"div",9),a()),e&2&&(r(),S(" ",i.formInfo.formTitle," "),r(2),p("optionsInfoAreaId",i.constructorInfoAreaId),r(),p("dataModel",i.dataModel)("optionMethod",1),r(4),S("",i.formInfo.formAlert," "),r(2),S("",i.formInfo.formError," "),r(2),p("ngIf",i.formInfo.formSubmitAllow))},dependencies:[V,ee,et,H],encapsulation:2});var lo=Ai;var la=()=>[5,10,20,100],ca=o=>({display:o});function da(o,s){if(o&1){let e=E();n(0,"a",37),M("click",function(){u(e);let t=g();return f(t.onActionBackToParent())}),h(1,"i",38),a()}}function ma(o,s){if(o&1){let e=E();n(0,"div",39)(1,"a",40),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewRow(t.tableRowSelected))}),h(2,"i",41)(3,"br"),a(),n(4,"p",42),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.VIEW")))}function pa(o,s){if(o&1){let e=E();n(0,"div",39)(1,"a",43),M("click",function(){u(e);let t=g();return f(t.onActionButtonEditRow(t.tableRowSelected))}),h(2,"i",44)(3,"br"),a(),n(4,"p",42),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.EDIT")))}function ua(o,s){if(o&1){let e=E();n(0,"div",39)(1,"a",45),M("click",function(){u(e);let t=g();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),h(2,"i",46)(3,"br"),a(),n(4,"p",42),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.DELETE")))}function fa(o,s){if(o&1){let e=E();n(0,"div",39)(1,"a",40),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewSiteRow(t.tableRowSelected))}),h(2,"i",47)(3,"br"),a(),n(4,"p",42),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.SITE")))}function Sa(o,s){if(o&1&&(n(0,"mat-header-cell",48),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Ca(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.id," ")}}function ha(o,s){if(o&1&&(n(0,"mat-header-cell",48),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function ga(o,s){if(o&1&&h(0,"select",51),o&2){let e=g().$implicit,i=g();p("contentService",i.contentService)("row",e)("ngStyle",Me(3,ca,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function va(o,s){if(o&1&&(n(0,"mat-cell",49),v(1,"statusCellClass"),h(2,"i",49),v(3,"statusIconClass"),b(4,ga,1,5,"select",50),a()),o&2){let e=s.$implicit,i=g();p("ngClass",_(1,3,e.recordStatus)),r(2),p("ngClass",_(3,5,e.recordStatus)),r(2),p("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function _a(o,s){if(o&1&&(n(0,"mat-header-cell",48),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Ma(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmssiteinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function ba(o,s){if(o&1&&(n(0,"mat-header-cell",48),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Ia(o,s){if(o&1&&(n(0,"mat-cell",52),d(1),v(2,"localeDateTime"),a()),o&2){let e=s.$implicit;r(),S(" ",_(2,1,e.createdDate)," ")}}function wa(o,s){o&1&&(n(0,"mat-header-cell"),d(1),v(2,"translate"),a()),o&2&&(r(),S(" ",_(2,1,"TITLE.OPTION")," "))}function Ea(o,s){if(o&1&&(n(0,"mat-cell",53)(1,"button",54)(2,"mat-icon"),d(3,"more_vert"),a()(),h(4,"mat-menu",null,2),a()),o&2){let e=te(5);r(),p("matMenuTriggerFor",e)}}function ya(o,s){o&1&&h(0,"mat-header-row")}function Ta(o,s){if(o&1){let e=E();n(0,"mat-row",55),M("click",function(){let t=u(e).$implicit,c=g();return f(c.onActionTableRowSelect(t))}),a()}if(o&2){let e=s.$implicit,i=s.dataIndex,t=g();ve("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var ki=class ki extends $e{constructor(e,i,t,c,C,l,A,re,K,le,_t,at,Mt){super(i,new Gt,at,l,K);this.coreEnumService=e;this.contentService=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=C;this.tokenHelper=l;this.cdr=A;this.cmsStoreService=re;this.translate=K;this.router=le;this.pageInfo=_t;this.publicHelper=at;this.dialog=Mt;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestlinkMemberUserId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new xe;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkSiteId","CreatedDate"];this.tabledisplayedColumnsMobileSource=["Id","LinkSiteId","CreatedDate"];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberUserId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberUserId")),this.requestLinkSiteId>0){let y=new W;y.propertyName="LinkCmsSiteId",y.value=this.requestLinkSiteId,this.filteModelContent.filters.push(y)}if(this.requestLinkUserId>0){let y=new W;y.propertyName="LinkUserId",y.value=this.requestLinkUserId,this.filteModelContent.filters.push(y)}if(this.requestlinkMemberUserId>0){let y=new W;y.propertyName="linkMemberUserId",y.value=this.requestlinkMemberUserId,this.filteModelContent.filters.push(y)}this.optionsSearch.parentMethods={onSubmit:y=>this.onSubmitOptionsSearch(y)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending}ngOnInit(){this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Gt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=N.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(lo,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(ao,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(C,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{i.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{i.set(l,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(t,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new W;C.propertyName="RecordStatus",C.value=De.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewSiteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkSiteId||this.tableRowSelected.linkSiteId===0){this.translate.get("MESSAGE.content_does_not_include_site_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/site/edit",this.tableRowSelected.linkSiteId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};ki.\u0275fac=function(i){return new(i||ki)(m(O),m(Rt),m(U),m(ge),m(Te),m(F),m(B),m(G),m(P),m(Le),m(Xe),m(j),m(Ae))},ki.\u0275cmp=k({type:ki,selectors:[["app-coremodulelog-site-credit-blocked-list"]],standalone:!1,features:[Q],decls:52,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","CreatedDate"],["style","direction:ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-globe","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let c=E();n(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(l){return u(c),L(t.viewGuideNotice,l)||(t.viewGuideNotice=l),f(l)}),M("optionOnActionButtonMemoRow",function(){return u(c),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(c),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(c),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(c),f(t.onActionButtonPrintRow())}),I(1,4),d(2," -------------------------------------- "),w(),se(3,5)(4,6),I(5,7),b(6,da,2,0,"a",8),n(7,"a",9),M("click",function(){return u(c),f(t.viewGuideNotice=!t.viewGuideNotice)}),h(8,"i",10),a(),n(9,"a",9),M("click",function(){return u(c),f(t.onActionButtonReload())}),h(10,"i",11),a(),w(),I(11,12),n(12,"a",13),M("click",function(){return u(c),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),h(13,"mat-slide-toggle",14),d(14),v(15,"translate"),a(),n(16,"a",13),M("click",function(){return u(c),f(t.onActionButtonStatist())}),h(17,"mat-slide-toggle",14),d(18),v(19,"translate"),a(),w(),se(20,15),I(21,16),b(22,ma,7,3,"div",17)(23,pa,7,3,"div",17)(24,ua,7,3,"div",17)(25,fa,7,3,"div",17),w(),I(26,18),n(27,"app-cms-search-list",19),R("optionsChange",function(l){return u(c),L(t.optionsSearch,l)||(t.optionsSearch=l),f(l)}),a(),n(28,"app-cms-statist-list",19),R("optionsChange",function(l){return u(c),L(t.optionsStatist,l)||(t.optionsStatist=l),f(l)}),a(),w(),I(29,20),n(30,"mat-table",21,0),M("matSortChange",function(){u(c);let l=te(31);return f(t.onTableSortData(l))}),I(32,22),b(33,Sa,2,1,"mat-header-cell",23)(34,Ca,2,1,"mat-cell",24),w(),I(35,25),b(36,ha,2,1,"mat-header-cell",23)(37,va,5,7,"mat-cell",26),w(),I(38,27),b(39,_a,2,1,"mat-header-cell",23)(40,Ma,4,5,"mat-cell",24),w(),I(41,28),b(42,ba,2,1,"mat-header-cell",23)(43,Ia,3,3,"mat-cell",29),w(),I(44,30),b(45,wa,3,3,"mat-header-cell",31)(46,Ea,6,1,"mat-cell",32),w(),b(47,ya,1,0,"mat-header-row",33)(48,Ta,1,6,"mat-row",34),a(),w(),I(49,35),n(50,"mat-paginator",36,1),M("page",function(l){return u(c),f(t.onTablePageingData(l))}),a(),w(),a()}i&2&&(p("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),p("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),r(6),p("ngIf",t.requestLinkSiteId>0),r(7),p("checked",t.optionsSearch.data.show),r(),S("",_(15,25,"ACTION.SEARCH")," "),r(3),p("checked",t.optionsStatist.data.show),r(),S("",_(19,27,"ACTION.STATIST")," "),r(4),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(),p("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.linkSiteId)>0),r(2),T("options",t.optionsSearch),r(),T("options",t.optionsStatist),r(2),p("dataSource",t.tableSource),r(17),p("matHeaderRowDef",t.tabledisplayedColumns),r(),p("matRowDefColumns",t.tabledisplayedColumns),r(2),p("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",_e(29,la)))},dependencies:[be,V,Ie,Re,ke,oe,Ve,Ne,Oe,dt,Ge,Pe,He,Ue,Ke,je,Fe,Qe,qe,We,ze,Je,tt,it,ot,rt,ct,H,pt,Ye,nt,st],encapsulation:2});var co=ki;var La=["vform"];function Ra(o,s){if(o&1&&(n(0,"mat-error"),d(1),n(2,"strong"),d(3),v(4,"translate"),a()()),o&2){let e=g(2);r(),S(" ",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldDescription," is "),r(2),D(_(4,2,"MESSAGE.required"))}}function Aa(o,s){if(o&1){let e=E();n(0,"div",9)(1,"label",10),d(2),a(),n(3,"textarea",11,1),R("ngModelChange",function(t){u(e);let c=g();return L(c.dataModel.description,t)||(c.dataModel.description=t),f(t)}),d(5,"                "),a(),n(6,"em"),d(7),a(),b(8,Ra,5,4,"mat-error",12),a()}if(o&2){let e=te(4),i=g();r(2),D(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldDescription),r(),p("placeholder",ai(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle)),T("ngModel",i.dataModel.description),p("disabled",!(i.fieldsInfo.description!=null&&i.fieldsInfo.description.accessEditField)),r(4),S("",e.value.length," / 500"),r(),p("ngIf",e.errors==null?null:e.errors.required)}}function ka(o,s){if(o&1){let e=E();n(0,"div",13)(1,"button",14),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",15),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var Di=class Di extends Ze{constructor(e,i,t,c,C,l,A,re,K,le){super(c,new Ht,K,le);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreModuleLogSiteCreditService=c;this.cmsToastrService=C;this.tokenHelper=l;this.cmsStoreService=A;this.cdr=re;this.publicHelper=K;this.translate=le;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ie;this.dataModel=new Ht;this.formInfo=new $;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogSiteCreditService.setAccessLoad(),this.coreModuleLogSiteCreditService.setAccessDataType(he.Editor),this.coreModuleLogSiteCreditService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Di.\u0275fac=function(i){return new(i||Di)(m(Z),m(Y),m(O),m(kt),m(U),m(F),m(G),m(B),m(j),m(P))},Di.\u0275cmp=k({type:Di,selectors:[["app-coremodulelog-site-credit--edit"]],viewQuery:function(i,t){if(i&1&&z(La,5),i&2){let c;J(c=X())&&(t.formGroup=c.first)}},standalone:!1,features:[Q],decls:14,vars:12,consts:[["vform","ngForm"],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","0","maxlength","500","rows","10","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(i,t){i&1&&(n(0,"div",2),h(1,"app-progress-spinner",3),n(2,"div",4)(3,"p",5),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"form",null,0),h(10,"app-cms-site-selector",6),v(11,"translate"),b(12,Aa,9,7,"div",7)(13,ka,5,3,"div",8),a()()()),i&2&&(r(),p("optionsInfoAreaId",t.constructorInfoAreaId),r(3),S(" ",t.formInfo.formTitle," "),r(2),S(" ",_(7,8,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",_(11,10,"TITLE.SITE")),r(2),p("ngIf",t.fieldsInfo.description==null?null:t.fieldsInfo.description.accessWatchField),r(),p("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,ye,ft,St,we,bt,It,Ct,Ee,qi,oe,mt,ee,H],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var mo=Di;var Da=["vform"];function xa(o,s){if(o&1){let e=E();n(0,"div",5)(1,"button",10),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",11),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var xi=class xi{constructor(s,e,i,t,c,C,l,A,re,K){this.data=s;this.dialogRef=e;this.coreEnumService=i;this.coreModuleLogSiteCreditService=t;this.cmsToastrService=c;this.tokenHelper=C;this.cmsStoreService=l;this.cdr=A;this.publicHelper=re;this.translate=K;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Be;this.dataModelResult=new ie;this.dataModel=new Ht;this.formInfo=new $;this.dataModelEnumSendSmsStatusTypeResult=new ie;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,s&&(this.requestId=s.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(s=>{this.formInfo.formTitle=s}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(s=>s.tokenInfoStore).subscribe(s=>x(this,null,function*(){this.tokenInfo=s})),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:s=>{this.dataModelEnumSendSmsStatusTypeResult=s}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let s=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(s,e,this.constructorInfoAreaId)}),this.coreModuleLogSiteCreditService.setAccessLoad(),this.coreModuleLogSiteCreditService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(s)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(s,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};xi.\u0275fac=function(e){return new(e||xi)(m(Z),m(Y),m(O),m(kt),m(U),m(F),m(G),m(B),m(j),m(P))},xi.\u0275cmp=k({type:xi,selectors:[["app-coremodulelog-site-credit--view"]],viewQuery:function(e,i){if(e&1&&z(Da,5),e&2){let t;J(t=X())&&(i.formGroup=t.first)}},standalone:!1,decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection","loader-container"],[3,"optionsInfoAreaId"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(n(0,"div",0),d(1),a(),n(2,"div",1),h(3,"app-progress-spinner",2)(4,"app-cms-json-list",3),a(),n(5,"div",4)(6,"div",5)(7,"small",6),d(8),a(),n(9,"small",7),d(10),a()()(),n(11,"div",8),b(12,xa,5,3,"div",9),a()),e&2&&(r(),S(" ",i.formInfo.formTitle," "),r(2),p("optionsInfoAreaId",i.constructorInfoAreaId),r(),p("dataModel",i.dataModel)("optionMethod",1),r(4),S("",i.formInfo.formAlert," "),r(2),S("",i.formInfo.formError," "),r(2),p("ngIf",i.formInfo.formSubmitAllow))},dependencies:[V,ee,et,H],encapsulation:2});var po=xi;var Ba=()=>[5,10,20,100],Va=o=>({display:o});function Na(o,s){if(o&1){let e=E();n(0,"a",37),M("click",function(){u(e);let t=g();return f(t.onActionBackToParent())}),h(1,"i",38),a()}}function Oa(o,s){if(o&1){let e=E();n(0,"div",39)(1,"a",40),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewRow(t.tableRowSelected))}),h(2,"i",41)(3,"br"),a(),n(4,"p",42),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.VIEW")))}function Ga(o,s){if(o&1){let e=E();n(0,"div",39)(1,"a",43),M("click",function(){u(e);let t=g();return f(t.onActionButtonEditRow(t.tableRowSelected))}),h(2,"i",44)(3,"br"),a(),n(4,"p",42),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.EDIT")))}function Pa(o,s){if(o&1){let e=E();n(0,"div",39)(1,"a",45),M("click",function(){u(e);let t=g();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),h(2,"i",46)(3,"br"),a(),n(4,"p",42),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.DELETE")))}function Ha(o,s){if(o&1){let e=E();n(0,"div",39)(1,"a",40),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewSiteRow(t.tableRowSelected))}),h(2,"i",47)(3,"br"),a(),n(4,"p",42),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.SITE")))}function Fa(o,s){if(o&1&&(n(0,"mat-header-cell",48),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Ua(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.id," ")}}function ja(o,s){if(o&1&&(n(0,"mat-header-cell",48),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function qa(o,s){if(o&1&&h(0,"select",51),o&2){let e=g().$implicit,i=g();p("contentService",i.contentService)("row",e)("ngStyle",Me(3,Va,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Wa(o,s){if(o&1&&(n(0,"mat-cell",49),v(1,"statusCellClass"),h(2,"i",49),v(3,"statusIconClass"),b(4,qa,1,5,"select",50),a()),o&2){let e=s.$implicit,i=g();p("ngClass",_(1,3,e.recordStatus)),r(2),p("ngClass",_(3,5,e.recordStatus)),r(2),p("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Ka(o,s){if(o&1&&(n(0,"mat-header-cell",48),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Qa(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmssiteinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function za(o,s){if(o&1&&(n(0,"mat-header-cell",48),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Ja(o,s){if(o&1&&(n(0,"mat-cell",52),d(1),v(2,"localeDateTime"),a()),o&2){let e=s.$implicit;r(),S(" ",_(2,1,e.createdDate)," ")}}function Xa(o,s){o&1&&(n(0,"mat-header-cell"),d(1),v(2,"translate"),a()),o&2&&(r(),S(" ",_(2,1,"TITLE.OPTION")," "))}function Ya(o,s){if(o&1&&(n(0,"mat-cell",53)(1,"button",54)(2,"mat-icon"),d(3,"more_vert"),a()(),h(4,"mat-menu",null,2),a()),o&2){let e=te(5);r(),p("matMenuTriggerFor",e)}}function Za(o,s){o&1&&h(0,"mat-header-row")}function $a(o,s){if(o&1){let e=E();n(0,"mat-row",55),M("click",function(){let t=u(e).$implicit,c=g();return f(c.onActionTableRowSelect(t))}),a()}if(o&2){let e=s.$implicit,i=s.dataIndex,t=g();ve("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var Bi=class Bi extends $e{constructor(e,i,t,c,C,l,A,re,K,le,_t,at,Mt){super(i,new Ht,at,l,re);this.coreEnumService=e;this.contentService=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=C;this.tokenHelper=l;this.cdr=A;this.translate=re;this.router=K;this.cmsStoreService=le;this.pageInfo=_t;this.publicHelper=at;this.dialog=Mt;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestlinkMemberUserId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new xe;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkSiteId","CreatedDate"];this.tabledisplayedColumnsMobileSource=["Id","LinkSiteId","CreatedDate"];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberUserId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberUserId")),this.requestLinkSiteId>0){let y=new W;y.propertyName="LinkCmsSiteId",y.value=this.requestLinkSiteId,this.filteModelContent.filters.push(y)}if(this.requestLinkUserId>0){let y=new W;y.propertyName="LinkUserId",y.value=this.requestLinkUserId,this.filteModelContent.filters.push(y)}if(this.requestlinkMemberUserId>0){let y=new W;y.propertyName="linkMemberUserId",y.value=this.requestlinkMemberUserId,this.filteModelContent.filters.push(y)}this.optionsSearch.parentMethods={onSubmit:y=>this.onSubmitOptionsSearch(y)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending}ngOnInit(){this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ht);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=N.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(po,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(mo,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(C,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{i.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{i.set(l,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(t,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new W;C.propertyName="RecordStatus",C.value=De.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewSiteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkSiteId||this.tableRowSelected.linkSiteId===0){this.translate.get("MESSAGE.content_does_not_include_site_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/site/edit",this.tableRowSelected.linkSiteId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};Bi.\u0275fac=function(i){return new(i||Bi)(m(O),m(kt),m(U),m(ge),m(Te),m(F),m(B),m(P),m(Le),m(G),m(Xe),m(j),m(Ae))},Bi.\u0275cmp=k({type:Bi,selectors:[["app-coremodulelog-site-credit--list"]],standalone:!1,features:[Q],decls:52,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","CreatedDate"],["style","direction:ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-globe","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let c=E();n(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(l){return u(c),L(t.viewGuideNotice,l)||(t.viewGuideNotice=l),f(l)}),M("optionOnActionButtonMemoRow",function(){return u(c),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(c),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(c),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(c),f(t.onActionButtonPrintRow())}),I(1,4),d(2," -------------------------------------- "),w(),se(3,5)(4,6),I(5,7),b(6,Na,2,0,"a",8),n(7,"a",9),M("click",function(){return u(c),f(t.viewGuideNotice=!t.viewGuideNotice)}),h(8,"i",10),a(),n(9,"a",9),M("click",function(){return u(c),f(t.onActionButtonReload())}),h(10,"i",11),a(),w(),I(11,12),n(12,"a",13),M("click",function(){return u(c),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),h(13,"mat-slide-toggle",14),d(14),v(15,"translate"),a(),n(16,"a",13),M("click",function(){return u(c),f(t.onActionButtonStatist())}),h(17,"mat-slide-toggle",14),d(18),v(19,"translate"),a(),w(),se(20,15),I(21,16),b(22,Oa,7,3,"div",17)(23,Ga,7,3,"div",17)(24,Pa,7,3,"div",17)(25,Ha,7,3,"div",17),w(),I(26,18),n(27,"app-cms-search-list",19),R("optionsChange",function(l){return u(c),L(t.optionsSearch,l)||(t.optionsSearch=l),f(l)}),a(),n(28,"app-cms-statist-list",19),R("optionsChange",function(l){return u(c),L(t.optionsStatist,l)||(t.optionsStatist=l),f(l)}),a(),w(),I(29,20),n(30,"mat-table",21,0),M("matSortChange",function(){u(c);let l=te(31);return f(t.onTableSortData(l))}),I(32,22),b(33,Fa,2,1,"mat-header-cell",23)(34,Ua,2,1,"mat-cell",24),w(),I(35,25),b(36,ja,2,1,"mat-header-cell",23)(37,Wa,5,7,"mat-cell",26),w(),I(38,27),b(39,Ka,2,1,"mat-header-cell",23)(40,Qa,4,5,"mat-cell",24),w(),I(41,28),b(42,za,2,1,"mat-header-cell",23)(43,Ja,3,3,"mat-cell",29),w(),I(44,30),b(45,Xa,3,3,"mat-header-cell",31)(46,Ya,6,1,"mat-cell",32),w(),b(47,Za,1,0,"mat-header-row",33)(48,$a,1,6,"mat-row",34),a(),w(),I(49,35),n(50,"mat-paginator",36,1),M("page",function(l){return u(c),f(t.onTablePageingData(l))}),a(),w(),a()}i&2&&(p("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),p("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),r(6),p("ngIf",t.requestLinkSiteId>0),r(7),p("checked",t.optionsSearch.data.show),r(),S("",_(15,25,"ACTION.SEARCH")," "),r(3),p("checked",t.optionsStatist.data.show),r(),S("",_(19,27,"ACTION.STATIST")," "),r(4),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(),p("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.linkSiteId)>0),r(2),T("options",t.optionsSearch),r(),T("options",t.optionsStatist),r(2),p("dataSource",t.tableSource),r(17),p("matHeaderRowDef",t.tabledisplayedColumns),r(),p("matRowDefColumns",t.tabledisplayedColumns),r(2),p("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",_e(29,Ba)))},dependencies:[be,V,Ie,Re,ke,oe,Ve,Ne,Oe,dt,Ge,Pe,He,Ue,Ke,je,Fe,Qe,qe,We,ze,Je,tt,it,ot,rt,ct,H,pt,Ye,nt,st],encapsulation:2});var uo=Bi;var el=["vform"];function tl(o,s){if(o&1){let e=E();n(0,"div",7)(1,"button",8),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",9),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var Vi=class Vi extends Ze{constructor(e,i,t,c,C,l,A,re,K,le){super(c,new Pt,K,le);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreModuleLogSiteUserCreditBlockedService=c;this.cmsToastrService=C;this.tokenHelper=l;this.cmsStoreService=A;this.cdr=re;this.publicHelper=K;this.translate=le;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ht;this.dataModel=new Pt;this.formInfo=new $;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogSiteUserCreditBlockedService.setAccessLoad(),this.coreModuleLogSiteUserCreditBlockedService.setAccessDataType(he.Editor),this.coreModuleLogSiteUserCreditBlockedService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Vi.\u0275fac=function(i){return new(i||Vi)(m(Z),m(Y),m(O),m(At),m(U),m(F),m(G),m(B),m(j),m(P))},Vi.\u0275cmp=k({type:Vi,selectors:[["app-coremodulelog-site-user-credit-blocked-edit"]],viewQuery:function(i,t){if(i&1&&z(el,5),i&2){let c;J(c=X())&&(t.formGroup=c.first)}},standalone:!1,features:[Q],decls:13,vars:11,consts:[["vform","ngForm"],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],["class","form-actions",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(i,t){i&1&&(n(0,"div",1),h(1,"app-progress-spinner",2),n(2,"div",3)(3,"p",4),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"form",null,0),h(10,"app-cms-site-selector",5),v(11,"translate"),b(12,tl,5,3,"div",6),a()()()),i&2&&(r(),p("optionsInfoAreaId",t.constructorInfoAreaId),r(3),S(" ",t.formInfo.formTitle," "),r(2),S(" ",_(7,7,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",_(11,9,"TITLE.SITE")),r(2),p("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,ye,we,Ee,mt,ee,H],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var fo=Vi;var il=["vform"];function ol(o,s){if(o&1){let e=E();n(0,"div",7)(1,"button",12),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",13),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var Ni=class Ni{constructor(s,e,i,t,c,C,l,A,re,K){this.data=s;this.dialogRef=e;this.coreEnumService=i;this.coreModuleLogSiteUserCreditBlockedService=t;this.cmsToastrService=c;this.tokenHelper=C;this.cmsStoreService=l;this.cdr=A;this.publicHelper=re;this.translate=K;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Be;this.dataModelResult=new ie;this.dataModel=new Pt;this.formInfo=new $;this.dataModelEnumSendSmsStatusTypeResult=new ie;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,s&&(this.requestId=s.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(s=>{this.formInfo.formTitle=s}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(s=>s.tokenInfoStore).subscribe(s=>x(this,null,function*(){this.tokenInfo=s})),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:s=>{this.dataModelEnumSendSmsStatusTypeResult=s}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let s=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(s,e,this.constructorInfoAreaId)}),this.coreModuleLogSiteUserCreditBlockedService.setAccessLoad(),this.coreModuleLogSiteUserCreditBlockedService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(s)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(s,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Ni.\u0275fac=function(e){return new(e||Ni)(m(Z),m(Y),m(O),m(At),m(U),m(F),m(G),m(B),m(j),m(P))},Ni.\u0275cmp=k({type:Ni,selectors:[["app-coremodulelog-site-user-credit-blocked-view"]],viewQuery:function(e,i){if(e&1&&z(il,5),e&2){let t;J(t=X())&&(i.formGroup=t.first)}},standalone:!1,decls:18,vars:10,consts:[[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(n(0,"div",0),h(1,"app-progress-spinner",1),n(2,"div",2)(3,"p",3),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"div",4),h(9,"app-cms-json-list",5),a(),n(10,"div",6)(11,"div",7)(12,"small",8),d(13),a(),n(14,"small",9),d(15),a()()(),n(16,"div",10),b(17,ol,5,3,"div",11),a()()()),e&2&&(r(),p("optionsInfoAreaId",i.constructorInfoAreaId),r(3),S(" ",i.formInfo.formTitle," "),r(2),S(" ",_(7,8,"TITLE.Be_Careful_When_Entering_Information")," "),r(3),p("dataModel",i.dataModel)("optionMethod",1),r(4),S("",i.formInfo.formAlert," "),r(2),S("",i.formInfo.formError," "),r(2),p("ngIf",i.formInfo.formSubmitAllow))},dependencies:[V,ee,et,H],encapsulation:2});var So=Ni;var rl=()=>[5,10,20,100],nl=o=>({display:o});function sl(o,s){if(o&1){let e=E();n(0,"a",38),M("click",function(){u(e);let t=g();return f(t.onActionBackToParent())}),h(1,"i",39),a()}}function al(o,s){if(o&1){let e=E();n(0,"div",40)(1,"a",41),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewRow(t.tableRowSelected))}),h(2,"i",42)(3,"br"),a(),n(4,"p",43),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.VIEW")))}function ll(o,s){if(o&1){let e=E();n(0,"div",40)(1,"a",44),M("click",function(){u(e);let t=g();return f(t.onActionButtonEditRow(t.tableRowSelected))}),h(2,"i",45)(3,"br"),a(),n(4,"p",43),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.EDIT")))}function cl(o,s){if(o&1){let e=E();n(0,"div",40)(1,"a",46),M("click",function(){u(e);let t=g();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),h(2,"i",47)(3,"br"),a(),n(4,"p",43),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.DELETE")))}function dl(o,s){if(o&1){let e=E();n(0,"div",40)(1,"a",41),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewUserRow(t.tableRowSelected))}),h(2,"i",48)(3,"br"),a(),n(4,"p",43),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.USER")))}function ml(o,s){if(o&1&&(n(0,"mat-header-cell",49),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function pl(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.id," ")}}function ul(o,s){if(o&1&&(n(0,"mat-header-cell",49),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function fl(o,s){if(o&1&&h(0,"select",52),o&2){let e=g().$implicit,i=g();p("contentService",i.contentService)("row",e)("ngStyle",Me(3,nl,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function Sl(o,s){if(o&1&&(n(0,"mat-cell",50),v(1,"statusCellClass"),h(2,"i",50),v(3,"statusIconClass"),b(4,fl,1,5,"select",51),a()),o&2){let e=s.$implicit,i=g();p("ngClass",_(1,3,e.recordStatus)),r(2),p("ngClass",_(3,5,e.recordStatus)),r(2),p("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function Cl(o,s){if(o&1&&(n(0,"mat-header-cell",49),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function hl(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmssiteinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function gl(o,s){if(o&1&&(n(0,"mat-header-cell",49),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function vl(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmsuserinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkUserId))," ")}}function _l(o,s){if(o&1&&(n(0,"mat-header-cell",49),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Ml(o,s){if(o&1&&(n(0,"mat-cell",53),d(1),v(2,"localeDateTime"),a()),o&2){let e=s.$implicit;r(),S(" ",_(2,1,e.createdDate)," ")}}function bl(o,s){o&1&&(n(0,"mat-header-cell"),d(1),v(2,"translate"),a()),o&2&&(r(),S(" ",_(2,1,"TITLE.OPTION")," "))}function Il(o,s){if(o&1&&(n(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),d(3,"more_vert"),a()(),h(4,"mat-menu",null,2),a()),o&2){let e=te(5);r(),p("matMenuTriggerFor",e)}}function wl(o,s){o&1&&h(0,"mat-header-row")}function El(o,s){if(o&1){let e=E();n(0,"mat-row",56),M("click",function(){let t=u(e).$implicit,c=g();return f(c.onActionTableRowSelect(t))}),a()}if(o&2){let e=s.$implicit,i=s.dataIndex,t=g();ve("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var Oi=class Oi extends $e{constructor(e,i,t,c,C,l,A,re,K,le,_t,at,Mt){super(i,new Pt,at,l,re);this.coreEnumService=e;this.contentService=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=C;this.tokenHelper=l;this.cdr=A;this.translate=re;this.cmsStoreService=K;this.router=le;this.pageInfo=_t;this.publicHelper=at;this.dialog=Mt;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestlinkMemberUserId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new xe;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkUserId","LinkSiteId","CreatedDate"];this.tabledisplayedColumnsMobileSource=["Id","LinkUserId","LinkSiteId","CreatedDate"];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberUserId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberUserId")),this.requestLinkSiteId>0){let y=new W;y.propertyName="LinkCmsSiteId",y.value=this.requestLinkSiteId,this.filteModelContent.filters.push(y)}if(this.requestLinkUserId>0){let y=new W;y.propertyName="LinkUserId",y.value=this.requestLinkUserId,this.filteModelContent.filters.push(y)}if(this.requestlinkMemberUserId>0){let y=new W;y.propertyName="linkMemberUserId",y.value=this.requestlinkMemberUserId,this.filteModelContent.filters.push(y)}this.optionsSearch.parentMethods={onSubmit:y=>this.onSubmitOptionsSearch(y)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending}ngOnInit(){this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Pt);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=N.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(So,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(fo,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(C,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{i.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{i.set(l,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(t,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new W;C.propertyName="RecordStatus",C.value=De.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkUserId||this.tableRowSelected.linkUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkUserId])}onActionButtonViewSiteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkSiteId||this.tableRowSelected.linkSiteId===0){this.translate.get("MESSAGE.content_does_not_include_site_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/site/edit",this.tableRowSelected.linkSiteId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};Oi.\u0275fac=function(i){return new(i||Oi)(m(O),m(At),m(U),m(ge),m(Te),m(F),m(B),m(P),m(G),m(Le),m(Xe),m(j),m(Ae))},Oi.\u0275cmp=k({type:Oi,selectors:[["app-coremodulelog-site-user-credit-blocked-list"]],standalone:!1,features:[Q],decls:56,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkUserId"],["matColumnDef","CreatedDate"],["style","direction:ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let c=E();n(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(l){return u(c),L(t.viewGuideNotice,l)||(t.viewGuideNotice=l),f(l)}),M("optionOnActionButtonMemoRow",function(){return u(c),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(c),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(c),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(c),f(t.onActionButtonPrintRow())}),I(1,4),d(2,"id "),d(3," -------------------------------------- "),w(),se(4,5)(5,6),I(6,7),b(7,sl,2,0,"a",8),n(8,"a",9),M("click",function(){return u(c),f(t.viewGuideNotice=!t.viewGuideNotice)}),h(9,"i",10),a(),n(10,"a",9),M("click",function(){return u(c),f(t.onActionButtonReload())}),h(11,"i",11),a(),w(),I(12,12),n(13,"a",13),M("click",function(){return u(c),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),h(14,"mat-slide-toggle",14),d(15),v(16,"translate"),a(),n(17,"a",13),M("click",function(){return u(c),f(t.onActionButtonStatist())}),h(18,"mat-slide-toggle",14),d(19),v(20,"translate"),a(),w(),se(21,15),I(22,16),b(23,al,7,3,"div",17)(24,ll,7,3,"div",17)(25,cl,7,3,"div",17)(26,dl,7,3,"div",17),w(),I(27,18),n(28,"app-cms-search-list",19),R("optionsChange",function(l){return u(c),L(t.optionsSearch,l)||(t.optionsSearch=l),f(l)}),a(),n(29,"app-cms-statist-list",19),R("optionsChange",function(l){return u(c),L(t.optionsStatist,l)||(t.optionsStatist=l),f(l)}),a(),w(),I(30,20),n(31,"mat-table",21,0),M("matSortChange",function(){u(c);let l=te(32);return f(t.onTableSortData(l))}),I(33,22),b(34,ml,2,1,"mat-header-cell",23)(35,pl,2,1,"mat-cell",24),w(),I(36,25),b(37,ul,2,1,"mat-header-cell",23)(38,Sl,5,7,"mat-cell",26),w(),I(39,27),b(40,Cl,2,1,"mat-header-cell",23)(41,hl,4,5,"mat-cell",24),w(),I(42,28),b(43,gl,2,1,"mat-header-cell",23)(44,vl,4,5,"mat-cell",24),w(),I(45,29),b(46,_l,2,1,"mat-header-cell",23)(47,Ml,3,3,"mat-cell",30),w(),I(48,31),b(49,bl,3,3,"mat-header-cell",32)(50,Il,6,1,"mat-cell",33),w(),b(51,wl,1,0,"mat-header-row",34)(52,El,1,6,"mat-row",35),a(),w(),I(53,36),n(54,"mat-paginator",37,1),M("page",function(l){return u(c),f(t.onTablePageingData(l))}),a(),w(),a()}i&2&&(p("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),p("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),r(7),p("ngIf",t.requestLinkSiteId>0),r(7),p("checked",t.optionsSearch.data.show),r(),S("",_(16,25,"ACTION.SEARCH")," "),r(3),p("checked",t.optionsStatist.data.show),r(),S("",_(20,27,"ACTION.STATIST")," "),r(4),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(),p("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.linkUserId)>0),r(2),T("options",t.optionsSearch),r(),T("options",t.optionsStatist),r(2),p("dataSource",t.tableSource),r(20),p("matHeaderRowDef",t.tabledisplayedColumns),r(),p("matRowDefColumns",t.tabledisplayedColumns),r(2),p("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",_e(29,rl)))},dependencies:[be,V,Ie,Re,ke,oe,Ve,Ne,Oe,dt,Ge,Pe,He,Ue,Ke,je,Fe,Qe,qe,We,ze,Je,tt,it,ot,rt,ct,H,gt,pt,Ye,nt,st],encapsulation:2});var Co=Oi;var yl=["vform"];function Tl(o,s){if(o&1&&(n(0,"mat-error"),d(1),n(2,"strong"),d(3),v(4,"translate"),a()()),o&2){let e=g(2);r(),S(" ",e.fieldsInfo.description==null?null:e.fieldsInfo.description.fieldDescription," is "),r(2),D(_(4,2,"MESSAGE.required"))}}function Ll(o,s){if(o&1){let e=E();n(0,"div",9)(1,"label",10),d(2),a(),n(3,"textarea",11,1),R("ngModelChange",function(t){u(e);let c=g();return L(c.dataModel.description,t)||(c.dataModel.description=t),f(t)}),d(5,"                "),a(),n(6,"em"),d(7),a(),b(8,Tl,5,4,"mat-error",12),a()}if(o&2){let e=te(4),i=g();r(2),D(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldDescription),r(),p("placeholder",ai(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle)),T("ngModel",i.dataModel.description),p("disabled",!(i.fieldsInfo.description!=null&&i.fieldsInfo.description.accessEditField)),r(4),S("",e.value.length," / 500"),r(),p("ngIf",e.errors==null?null:e.errors.required)}}function Rl(o,s){if(o&1){let e=E();n(0,"div",13)(1,"button",14),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",15),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var Gi=class Gi extends Ze{constructor(e,i,t,c,C,l,A,re,K,le){super(c,new Ft,K,le);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreModuleLogSiteUserCreditService=c;this.cmsToastrService=C;this.tokenHelper=l;this.cmsStoreService=A;this.cdr=re;this.publicHelper=K;this.translate=le;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ie;this.dataModel=new Ft;this.formInfo=new $;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=e.id)}ngOnInit(){if(this.requestId&&this.requestId.length>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||this.requestId.length===0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreModuleLogSiteUserCreditService.setAccessLoad(),this.coreModuleLogSiteUserCreditService.setAccessDataType(he.Editor),this.coreModuleLogSiteUserCreditService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=i.errorMessage,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Gi.\u0275fac=function(i){return new(i||Gi)(m(Z),m(Y),m(O),m(Dt),m(U),m(F),m(G),m(B),m(j),m(P))},Gi.\u0275cmp=k({type:Gi,selectors:[["app-coremodulelog-site-user-credit--edit"]],viewQuery:function(i,t){if(i&1&&z(yl,5),i&2){let c;J(c=X())&&(t.formGroup=c.first)}},standalone:!1,features:[Q],decls:14,vars:12,consts:[["vform","ngForm"],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","0","maxlength","500","rows","10","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled","placeholder"],[4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(i,t){i&1&&(n(0,"div",2),h(1,"app-progress-spinner",3),n(2,"div",4)(3,"p",5),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"form",null,0),h(10,"app-cms-site-selector",6),v(11,"translate"),b(12,Ll,9,7,"div",7)(13,Rl,5,3,"div",8),a()()()),i&2&&(r(),p("optionsInfoAreaId",t.constructorInfoAreaId),r(3),S(" ",t.formInfo.formTitle," "),r(2),S(" ",_(7,8,"TITLE.Be_Careful_When_Entering_Information")," "),r(4),p("optionDisabled",!0)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",_(11,10,"TITLE.SITE")),r(2),p("ngIf",t.fieldsInfo.description==null?null:t.fieldsInfo.description.accessWatchField),r(),p("ngIf",t.formInfo.formSubmitAllow))},dependencies:[V,ye,ft,St,we,bt,It,Ct,Ee,qi,oe,mt,ee,H],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:#ff0}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:#000}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]});var ho=Gi;var Al=["vform"];function kl(o,s){if(o&1){let e=E();n(0,"div",7)(1,"button",12),M("click",function(){u(e);let t=g();return f(t.onFormCancel())}),h(2,"i",13),d(3),v(4,"translate"),a()()}o&2&&(r(3),S(" ",_(4,1,"ACTION.CANCEL")," "))}var Pi=class Pi{constructor(s,e,i,t,c,C,l,A,re,K){this.data=s;this.dialogRef=e;this.coreEnumService=i;this.coreModuleLogSiteUserCreditService=t;this.cmsToastrService=c;this.tokenHelper=C;this.cmsStoreService=l;this.cdr=A;this.publicHelper=re;this.translate=K;this.requestId="";this.constructorInfoAreaId=this.constructor.name;this.tokenInfo=new Be;this.dataModelResult=new ie;this.dataModel=new Ft;this.formInfo=new $;this.dataModelEnumSendSmsStatusTypeResult=new ie;this.fieldsInfo=new Map;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,s&&(this.requestId=s.id+"")}ngOnInit(){if(this.translate.get("TITLE.VIEW").subscribe(s=>{this.formInfo.formTitle=s}),this.requestId.length===0){this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.DataGetOneContent(),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(s=>s.tokenInfoStore).subscribe(s=>x(this,null,function*(){this.tokenInfo=s})),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceSendSmsStatusTypeEnum().subscribe({next:s=>{this.dataModelEnumSendSmsStatusTypeResult=s}})}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(e=>{this.formInfo.formAlert=e}),this.formInfo.formError="";let s=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(s,e,this.constructorInfoAreaId)}),this.coreModuleLogSiteUserCreditService.setAccessLoad(),this.coreModuleLogSiteUserCreditService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.id,this.formInfo.formAlert=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(i=>{this.formInfo.formAlert=i}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(s)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(s,!1)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};Pi.\u0275fac=function(e){return new(e||Pi)(m(Z),m(Y),m(O),m(Dt),m(U),m(F),m(G),m(B),m(j),m(P))},Pi.\u0275cmp=k({type:Pi,selectors:[["app-coremodulelog-site-user-credit--view"]],viewQuery:function(e,i){if(e&1&&z(Al,5),e&2){let t;J(t=X())&&(i.formGroup=t.first)}},standalone:!1,decls:18,vars:10,consts:[[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[1,"ntk-cms-html-card-body","ntk-allow-text-selection"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"]],template:function(e,i){e&1&&(n(0,"div",0),h(1,"app-progress-spinner",1),n(2,"div",2)(3,"p",3),d(4),a(),n(5,"p"),d(6),v(7,"translate"),a(),n(8,"div",4),h(9,"app-cms-json-list",5),a(),n(10,"div",6)(11,"div",7)(12,"small",8),d(13),a(),n(14,"small",9),d(15),a()()(),n(16,"div",10),b(17,kl,5,3,"div",11),a()()()),e&2&&(r(),p("optionsInfoAreaId",i.constructorInfoAreaId),r(3),S(" ",i.formInfo.formTitle," "),r(2),S(" ",_(7,8,"TITLE.Be_Careful_When_Entering_Information")," "),r(3),p("dataModel",i.dataModel)("optionMethod",1),r(4),S("",i.formInfo.formAlert," "),r(2),S("",i.formInfo.formError," "),r(2),p("ngIf",i.formInfo.formSubmitAllow))},dependencies:[V,ee,et,H],encapsulation:2});var go=Pi;var Dl=()=>[5,10,20,100],xl=o=>({display:o});function Bl(o,s){if(o&1){let e=E();n(0,"a",38),M("click",function(){u(e);let t=g();return f(t.onActionBackToParent())}),h(1,"i",39),a()}}function Vl(o,s){if(o&1){let e=E();n(0,"div",40)(1,"a",41),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewRow(t.tableRowSelected))}),h(2,"i",42)(3,"br"),a(),n(4,"p",43),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.VIEW")))}function Nl(o,s){if(o&1){let e=E();n(0,"div",40)(1,"a",44),M("click",function(){u(e);let t=g();return f(t.onActionButtonEditRow(t.tableRowSelected))}),h(2,"i",45)(3,"br"),a(),n(4,"p",43),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.EDIT")))}function Ol(o,s){if(o&1){let e=E();n(0,"div",40)(1,"a",46),M("click",function(){u(e);let t=g();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),h(2,"i",47)(3,"br"),a(),n(4,"p",43),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.DELETE")))}function Gl(o,s){if(o&1){let e=E();n(0,"div",40)(1,"a",41),M("click",function(){u(e);let t=g();return f(t.onActionButtonViewUserRow(t.tableRowSelected))}),h(2,"i",48)(3,"br"),a(),n(4,"p",43),d(5),v(6,"translate"),a()()}o&2&&(r(5),D(_(6,1,"ACTION.USER")))}function Pl(o,s){if(o&1&&(n(0,"mat-header-cell",49),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Hl(o,s){if(o&1&&(n(0,"mat-cell"),d(1),a()),o&2){let e=s.$implicit;r(),S(" ",e.id," ")}}function Fl(o,s){if(o&1&&(n(0,"mat-header-cell",49),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Ul(o,s){if(o&1&&h(0,"select",52),o&2){let e=g().$implicit,i=g();p("contentService",i.contentService)("row",e)("ngStyle",Me(3,xl,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function jl(o,s){if(o&1&&(n(0,"mat-cell",50),v(1,"statusCellClass"),h(2,"i",50),v(3,"statusIconClass"),b(4,Ul,1,5,"select",51),a()),o&2){let e=s.$implicit,i=g();p("ngClass",_(1,3,e.recordStatus)),r(2),p("ngClass",_(3,5,e.recordStatus)),r(2),p("ngIf",i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.accessEditRow)}}function ql(o,s){if(o&1&&(n(0,"mat-header-cell",49),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Wl(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmssiteinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkSiteId))," ")}}function Kl(o,s){if(o&1&&(n(0,"mat-header-cell",49),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.linkUserId==null?null:e.fieldsInfo.linkUserId.fieldTitle," ")}}function Ql(o,s){if(o&1&&(n(0,"mat-cell"),d(1),v(2,"cmsuserinfo"),v(3,"async"),a()),o&2){let e=s.$implicit;r(),S(" ",_(3,3,_(2,1,e.linkUserId))," ")}}function zl(o,s){if(o&1&&(n(0,"mat-header-cell",49),d(1),a()),o&2){let e=g();r(),S(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function Jl(o,s){if(o&1&&(n(0,"mat-cell",53),d(1),v(2,"localeDateTime"),a()),o&2){let e=s.$implicit;r(),S(" ",_(2,1,e.createdDate)," ")}}function Xl(o,s){o&1&&(n(0,"mat-header-cell"),d(1),v(2,"translate"),a()),o&2&&(r(),S(" ",_(2,1,"TITLE.OPTION")," "))}function Yl(o,s){if(o&1&&(n(0,"mat-cell",54)(1,"button",55)(2,"mat-icon"),d(3,"more_vert"),a()(),h(4,"mat-menu",null,2),a()),o&2){let e=te(5);r(),p("matMenuTriggerFor",e)}}function Zl(o,s){o&1&&h(0,"mat-header-row")}function $l(o,s){if(o&1){let e=E();n(0,"mat-row",56),M("click",function(){let t=u(e).$implicit,c=g();return f(c.onActionTableRowSelect(t))}),a()}if(o&2){let e=s.$implicit,i=s.dataIndex,t=g();ve("ntk-row-odd",i%2)("ntk-row-even",!(i%2))("ntk-row-selected",e.id===(t.tableRowSelected==null?null:t.tableRowSelected.id))}}var Hi=class Hi extends $e{constructor(e,i,t,c,C,l,A,re,K,le,_t,at,Mt){super(i,new Ft,at,A,K);this.coreEnumService=e;this.contentService=i;this.cmsToastrService=t;this.cmsConfirmationDialogService=c;this.activatedRoute=C;this.cmsStoreService=l;this.tokenHelper=A;this.cdr=re;this.translate=K;this.router=le;this.pageInfo=_t;this.publicHelper=at;this.dialog=Mt;this.requestLinkSiteId=0;this.requestLinkUserId=0;this.requestlinkMemberUserId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new xe;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkUserId","LinkSiteId","CreatedDate"];this.tabledisplayedColumnsMobileSource=["Id","LinkUserId","LinkSiteId","CreatedDate"];if(this.publicHelper.processService.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberUserId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberUserId")),this.requestLinkSiteId>0){let y=new W;y.propertyName="LinkCmsSiteId",y.value=this.requestLinkSiteId,this.filteModelContent.filters.push(y)}if(this.requestLinkUserId>0){let y=new W;y.propertyName="LinkUserId",y.value=this.requestLinkUserId,this.filteModelContent.filters.push(y)}if(this.requestlinkMemberUserId>0){let y=new W;y.propertyName="linkMemberUserId",y.value=this.requestlinkMemberUserId,this.filteModelContent.filters.push(y)}this.optionsSearch.parentMethods={onSubmit:y=>this.onSubmitOptionsSearch(y)},this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending}ngOnInit(){this.filteModelContent.sortColumn="CreatedDate",this.filteModelContent.sortType=N.Descending,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>x(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new Ft);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=N.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=N.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonViewRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessWatchRow){this.cmsToastrService.typeErrorAccessWatch();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(go,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(ho,{height:"90%",panelClass:i,enterAnimationDuration:q.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:q.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(c=>{this.cmsToastrService.typeErrorSelected(c)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(c=>{i=c["MESSAGE.Please_Confirm"],t=c["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(c=>{if(c){let C=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(C,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(C)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(C,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{i.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{i.set(l,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(t,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}});let c=JSON.parse(JSON.stringify(this.filteModelContent)),C=new W;C.propertyName="RecordStatus",C.value=De.Available,c.filters.push(C),this.contentService.ServiceGetCount(c).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(A=>{i.set(A,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonViewUserRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkUserId||this.tableRowSelected.linkUserId===0){this.translate.get("MESSAGE.content_does_not_contain_user_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/user/edit",this.tableRowSelected.linkUserId])}onActionButtonViewSiteRow(e=this.tableRowSelected){if(!e||!e.id||e.id.length===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),!this.tableRowSelected.linkSiteId||this.tableRowSelected.linkSiteId===0){this.translate.get("MESSAGE.content_does_not_include_site_information").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}this.router.navigate(["/core/site/edit",this.tableRowSelected.linkSiteId])}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0&&(this.filteModelContent.filters=[...this.filteModelContent.filters,...e]),this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};Hi.\u0275fac=function(i){return new(i||Hi)(m(O),m(Dt),m(U),m(ge),m(Te),m(G),m(F),m(B),m(P),m(Le),m(Xe),m(j),m(Ae))},Hi.\u0275cmp=k({type:Hi,selectors:[["app-coremodulelog-site-user-credit--list"]],standalone:!1,features:[Q],decls:55,vars:30,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["cms-action-row",""],["class","col-4",4,"ngIf"],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkUserId"],["matColumnDef","CreatedDate"],["style","direction:ltr",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ntk-row-odd","ntk-row-even","ntk-row-selected","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-eye","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#FFFFFF"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-user","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none;",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[2,"direction","ltr"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[3,"click"]],template:function(i,t){if(i&1){let c=E();n(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(l){return u(c),L(t.viewGuideNotice,l)||(t.viewGuideNotice=l),f(l)}),M("optionOnActionButtonMemoRow",function(){return u(c),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(c),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(c),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(c),f(t.onActionButtonPrintRow())}),I(1,4),d(2," -------------------------------------- "),w(),se(3,5)(4,6),I(5,7),b(6,Bl,2,0,"a",8),n(7,"a",9),M("click",function(){return u(c),f(t.viewGuideNotice=!t.viewGuideNotice)}),h(8,"i",10),a(),n(9,"a",9),M("click",function(){return u(c),f(t.onActionButtonReload())}),h(10,"i",11),a(),w(),I(11,12),n(12,"a",13),M("click",function(){return u(c),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),h(13,"mat-slide-toggle",14),d(14),v(15,"translate"),a(),n(16,"a",13),M("click",function(){return u(c),f(t.onActionButtonStatist())}),h(17,"mat-slide-toggle",14),d(18),v(19,"translate"),a(),w(),se(20,15),I(21,16),b(22,Vl,7,3,"div",17)(23,Nl,7,3,"div",17)(24,Ol,7,3,"div",17)(25,Gl,7,3,"div",17),w(),I(26,18),n(27,"app-cms-search-list",19),R("optionsChange",function(l){return u(c),L(t.optionsSearch,l)||(t.optionsSearch=l),f(l)}),a(),n(28,"app-cms-statist-list",19),R("optionsChange",function(l){return u(c),L(t.optionsStatist,l)||(t.optionsStatist=l),f(l)}),a(),w(),I(29,20),n(30,"mat-table",21,0),M("matSortChange",function(){u(c);let l=te(31);return f(t.onTableSortData(l))}),I(32,22),b(33,Pl,2,1,"mat-header-cell",23)(34,Hl,2,1,"mat-cell",24),w(),I(35,25),b(36,Fl,2,1,"mat-header-cell",23)(37,jl,5,7,"mat-cell",26),w(),I(38,27),b(39,ql,2,1,"mat-header-cell",23)(40,Wl,4,5,"mat-cell",24),w(),I(41,28),b(42,Kl,2,1,"mat-header-cell",23)(43,Ql,4,5,"mat-cell",24),w(),I(44,29),b(45,zl,2,1,"mat-header-cell",23)(46,Jl,3,3,"mat-cell",30),w(),I(47,31),b(48,Xl,3,3,"mat-header-cell",32)(49,Yl,6,1,"mat-cell",33),w(),b(50,Zl,1,0,"mat-header-row",34)(51,$l,1,6,"mat-row",35),a(),w(),I(52,36),n(53,"mat-paginator",37,1),M("page",function(l){return u(c),f(t.onTablePageingData(l))}),a(),w(),a()}i&2&&(p("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),T("optionActionGuideNoticeDisplay",t.viewGuideNotice),p("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelectDoubleClick)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),r(6),p("ngIf",t.requestLinkSiteId>0),r(7),p("checked",t.optionsSearch.data.show),r(),S("",_(15,25,"ACTION.SEARCH")," "),r(3),p("checked",t.optionsStatist.data.show),r(),S("",_(19,27,"ACTION.STATIST")," "),r(4),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),r(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),r(),p("ngIf",(t.tableRowSelected==null?null:t.tableRowSelected.linkUserId)>0),r(2),T("options",t.optionsSearch),r(),T("options",t.optionsStatist),r(2),p("dataSource",t.tableSource),r(20),p("matHeaderRowDef",t.tabledisplayedColumns),r(),p("matRowDefColumns",t.tabledisplayedColumns),r(2),p("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",_e(29,Dl)))},dependencies:[be,V,Ie,Re,ke,oe,Ve,Ne,Oe,dt,Ge,Pe,He,Ue,Ke,je,Fe,Qe,qe,We,ze,Je,tt,it,ot,rt,ct,H,gt,pt,Ye,nt,st],encapsulation:2});var vo=Hi;var ec=[{path:"",component:Wi,children:[{path:"report-abuse",component:eo,data:{title:"ROUTE.COREMODULELOG"}},{path:"show-key",component:so},{path:"favorite",component:zi,data:{title:"ROUTE.COREMODULELOG.FAVORITE"}},{path:"like",component:Yi,data:{title:"ROUTE.COREMODULELOG.LIKE"}},{path:"score",component:oo,data:{title:"ROUTE.COREMODULELOG.SCORE"}},{path:"site-credit",component:uo,data:{title:"ROUTE.COREMODULELOG"}},{path:"site-user-credit",component:vo,data:{title:"ROUTE.COREMODULELOG"}},{path:"site-credit-blocked",component:co,data:{title:"ROUTE.COREMODULELOG"}},{path:"site-user-credit-blocked",component:Co,data:{title:"ROUTE.COREMODULELOG"}}]}],mi=class mi{};mi.\u0275fac=function(e){return new(e||mi)},mi.\u0275mod=ji({type:mi}),mi.\u0275inj=Ui({imports:[Mo.forChild(ec),Mo]});var _o=mi;var pi=class pi{};pi.\u0275fac=function(e){return new(e||pi)},pi.\u0275mod=ji({type:pi}),pi.\u0275inj=Ui({providers:[Do,xo,Bo,Vo,No,yt,Oo,Et,Go,Lt,Tt,wt,Rt,At,kt,Dt,ge],imports:[_o,wo,Eo,yo.withConfig({warnOnNgModelWithFormControl:"never"}),Ho,Fo,Po]});var jo=pi;export{jo as CoreModuleLogModule};
