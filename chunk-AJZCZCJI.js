import{a as Ht}from"./chunk-KPZQHUQQ.js";import{a as Bt}from"./chunk-ZTLUCMMH.js";import{a as Wt}from"./chunk-MRMABRLS.js";import{a as Ot}from"./chunk-PJBLN4FM.js";import{a as Ft}from"./chunk-SBWQWGIZ.js";import{a as Pt}from"./chunk-GCMX2QY2.js";import{a as Gt}from"./chunk-MH4QKF5G.js";import{c as Rt,d as kt,e as Vt,g as Lt,h as Nt}from"./chunk-YMBF2JWE.js";import{a as At}from"./chunk-HUCM4IUB.js";import{b as xe}from"./chunk-F3EZO4NP.js";import{a as wt}from"./chunk-MJAALOLT.js";import{a as xt}from"./chunk-2W6VVNH7.js";import{a as Ae}from"./chunk-CPKESX5D.js";import{b as Tt}from"./chunk-GC77DQYR.js";import{a as Re}from"./chunk-LEQJQLTA.js";import"./chunk-FSLU6GWV.js";import{a as ke}from"./chunk-Q2J7RKJD.js";import{a as Te}from"./chunk-2SR2KTJV.js";import{e as Dt,f as Q}from"./chunk-M6XJRRI2.js";import{$a as H,Ab as Ct,Ba as ye,Bb as ht,Ca as Ee,Cb as Mt,D as ve,Da as be,Db as It,E as Se,Fc as yt,G as _e,Ic as Et,K as Ce,Ka as De,Kc as K,L as he,La as we,Ma as rt,N as it,Nc as bt,O as nt,Qb as j,Rb as q,W as Me,Z as Ie,Za as at,ba as ot,eb as lt,fb as st,hb as ct,lb as dt,mb as pt,n as ce,nb as mt,q as de,r as pe,t as me,ub as ut,v as ue,vb as ft,w as fe,wb as gt,x as ge,xb as vt,yb as St,zb as _t}from"./chunk-2YOAOFR6.js";import{$b as Oe,Aq as We,Bd as Xe,Bq as Z,Cb as ne,Db as oe,Eb as re,Ed as Ye,Fa as o,Fd as R,Ib as A,Ic as Ke,Jc as le,Jd as Fe,Kb as Be,Kc as F,Kd as Ze,Ld as se,Nb as c,Oa as S,Ob as T,Oc as Qe,Pb as m,Qc as Ue,Sa as B,Ta as ie,Tb as M,Td as W,Ub as I,Vb as y,Wa as O,Wb as ae,Wc as ze,Xd as $e,Y as te,Ya as C,Ze as k,_b as qe,cc as _,da as f,dc as h,ea as g,ec as Ge,he as V,jb as p,kb as a,lb as r,mb as E,qb as D,rb as w,sb as je,sq as et,tb as x,uq as tt,vc as G,vd as Je,wb as b,xd as Y,yb as v}from"./chunk-NIHJZM2J.js";import{i as He}from"./chunk-SEDBTTTN.js";var li=["vform"];function si(i,d){if(i&1){let e=x();a(0,"app-cms-enum-record-status-selector",32),y("modelChange",function(t){f(e);let s=v();return I(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),r()}if(i&2){let e=v();M("model",e.dataModel.recordStatus),p("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function ci(i,d){i&1&&(a(0,"mat-error"),c(1," SecurityKey is "),a(2,"strong"),c(3),_(4,"translate"),r()()),i&2&&(o(3),T(h(4,1,"MESSAGE.required")))}function di(i,d){if(i&1&&(a(0,"option",33),c(1),r()),i&2){let e=d.$implicit;p("value",e.value),o(),m(" ",e.description," ")}}function pi(i,d){if(i&1&&(a(0,"option",33),c(1),r()),i&2){let e=d.$implicit;p("value",e.value),o(),m(" ",e.description," ")}}function mi(i,d){i&1&&(a(0,"mat-error"),c(1," Description is "),a(2,"strong"),c(3),_(4,"translate"),r()()),i&2&&(o(3),T(h(4,1,"MESSAGE.required")))}function ui(i,d){if(i&1){let e=x();a(0,"div",15)(1,"label",34),c(2),r(),a(3,"textarea",35,7),y("ngModelChange",function(t){f(e);let s=v();return I(s.dataModel.description,t)||(s.dataModel.description=t),g(t)}),c(5,"        "),r(),a(6,"em"),c(7),r(),C(8,mi,5,3,"mat-error",18),r()}if(i&2){let e=A(4),n=v();o(2),T(n.fieldsInfo.description==null?null:n.fieldsInfo.description.fieldTitle),o(),p("placeholder",ae(n.fieldsInfo.description==null?null:n.fieldsInfo.description.fieldTitle)),M("ngModel",n.dataModel.description),o(4),m("",e.value.length," / 500"),o(),p("ngIf",e.errors==null?null:e.errors.required)}}function fi(i,d){if(i&1){let e=x();a(0,"div",36)(1,"label",37),c(2),r(),a(3,"input",38),y("ngModelChange",function(t){f(e);let s=v();return I(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),g(t)}),r(),E(4,"mat-datepicker-toggle",39)(5,"mat-datepicker",40,8),r()}if(i&2){let e=A(6),n=v();o(2),T(n.fieldsInfo.expireDate==null?null:n.fieldsInfo.expireDate.fieldTitle),o(),p("matDatepicker",e),M("ngModel",n.dataModel.expireDate),o(),p("for",e)}}function gi(i,d){if(i&1){let e=x();a(0,"div",41)(1,"button",42),b("click",function(){f(e);let t=v();return g(t.onFormCancel())}),E(2,"i",43),c(3),_(4,"translate"),r(),a(5,"button",44),E(6,"i",45),c(7),_(8,"translate"),r()()}if(i&2){v();let e=A(9);o(3),m(" ",h(4,3,"ACTION.CANCEL")," "),o(2),p("disabled",!e.form.valid),o(2),m(" ",h(8,5,"ACTION.SAVE")," ")}}var U=class U extends wt{constructor(e,n,t,s,u,l,P,ee){super(s,new k,l,ee);this.data=e;this.dialogRef=n;this.coreEnumService=t;this.coreDeviceService=s;this.cmsToastrService=u;this.publicHelper=l;this.cdr=P;this.translate=ee;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new R;this.dataModelEnumDeviceTypeResult=new R;this.dataModelEnumOperatingSystemTypeResult=new R;this.dataModel=new k;this.formInfo=new se;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetAccess(),this.getServiceDeviceTypeEnum(),this.getServiceOperatingSystemTypeEnum()}getServiceDeviceTypeEnum(){this.coreEnumService.ServiceDeviceTypeEnum().subscribe({next:e=>{this.dataModelEnumDeviceTypeResult=e}})}getServiceOperatingSystemTypeEnum(){this.coreEnumService.ServiceOperatingSystemTypeEnum().subscribe({next:e=>{this.dataModelEnumOperatingSystemTypeResult=e}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(n=>{this.formInfo.submitResultMessage=n}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(n=>{this.publicHelper.processService.processStart(e,n,this.constructorInfoAreaId)}),this.coreDeviceService.ServiceAdd(this.dataModel).subscribe({next:n=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=n,n.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.publicHelper.processService.processStop(e)},error:n=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(e,!1)}})}onActionSelectSite(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_site","MESSAGE.Information_site_is_not_clear"]).subscribe(n=>{this.cmsToastrService.typeErrorMessage(n["MESSAGE.Specify_the_site"],n["MESSAGE.Information_site_is_not_clear"])});return}this.dataModel.linkSiteId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};U.\u0275fac=function(n){return new(n||U)(S(we),S(De),S(W),S(V),S(K),S(Q),S(G),S(j))},U.\u0275cmp=B({type:U,selectors:[["app-core-sitecategory-add"]],viewQuery:function(n,t){if(n&1&&ne(li,5),n&2){let s;oe(s=re())&&(t.formGroup=s.first)}},standalone:!1,features:[O],decls:51,vars:30,consts:[["vform","ngForm"],["SecurityKey",""],["PackageName",""],["DeviceIPsAllow",""],["LinkApplicationId",""],["osType","ngModel"],["DeviceType","ngModel"],["Description",""],["ExpireDate",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.securityKey",1,"color-highlight"],["matInput","","type","text","name","dataModel.securityKey","placeholder","NTK.CMS.APP.1","minlength","3","maxlength","100","id","dataModel.securityKey",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[4,"ngIf"],["for","dataModel.packageName",1,"color-highlight"],["matInput","","type","text","name","dataModel.packageName","placeholder","8.8.8.8","minlength","0","maxlength","500","id","dataModel.packageName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.deviceIPsAllow",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceIPsAllow","placeholder","8.8.8.8","minlength","0","maxlength","500","id","dataModel.deviceIPsAllow",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.linkApplicationId",1,"color-highlight"],["matInput","","type","number","name","dataModel.linkApplicationId","placeholder","number ","id","dataModel.linkApplicationId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["id","dataModel.osType","name","dataModel.osType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["id","dataModel.deviceType","name","dataModel.deviceType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"value"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(n,t){if(n&1){let s=x();a(0,"div",9),E(1,"app-progress-spinner",10),a(2,"div",11)(3,"p",12),c(4),r(),a(5,"p"),c(6),_(7,"translate"),r(),a(8,"form",13,0),b("ngSubmit",function(){return f(s),g(t.onFormSubmit())}),C(10,si,1,5,"app-cms-enum-record-status-selector",14),a(11,"div",15)(12,"label",16),c(13),r(),a(14,"input",17,1),y("ngModelChange",function(l){return f(s),I(t.dataModel.securityKey,l)||(t.dataModel.securityKey=l),g(l)}),r(),a(16,"em"),c(17),r(),C(18,ci,5,3,"mat-error",18),r(),a(19,"div",15)(20,"label",19),c(21),r(),a(22,"input",20,2),y("ngModelChange",function(l){return f(s),I(t.dataModel.packageName,l)||(t.dataModel.packageName=l),g(l)}),r(),a(24,"em"),c(25),r()(),a(26,"div",15)(27,"label",21),c(28),r(),a(29,"input",22,3),y("ngModelChange",function(l){return f(s),I(t.dataModel.deviceIPsAllow,l)||(t.dataModel.deviceIPsAllow=l),g(l)}),r(),a(31,"em"),c(32),r()(),a(33,"app-cms-site-selector",23),_(34,"translate"),b("optionChange",function(l){return f(s),g(t.onActionSelectSite(l))}),r(),a(35,"div",15)(36,"label",24),c(37),r(),a(38,"input",25,4),y("ngModelChange",function(l){return f(s),I(t.dataModel.linkApplicationId,l)||(t.dataModel.linkApplicationId=l),g(l)}),r()(),a(40,"div",15)(41,"select",26,5),y("ngModelChange",function(l){return f(s),I(t.dataModel.osType,l)||(t.dataModel.osType=l),g(l)}),C(43,di,2,2,"option",27),r()(),a(44,"div",15)(45,"select",28,6),y("ngModelChange",function(l){return f(s),I(t.dataModel.deviceType,l)||(t.dataModel.deviceType=l),g(l)}),C(47,pi,2,2,"option",27),r()(),C(48,ui,9,6,"div",29)(49,fi,7,4,"div",30)(50,gi,9,7,"div",31),r()()()}if(n&2){let s=A(15),u=A(23),l=A(30);o(),p("optionsInfoAreaId",t.constructorInfoAreaId),o(3),m(" ",t.formInfo.formTitle," "),o(2),m(" ",h(7,26,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),p("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(3),T(t.fieldsInfo.securityKey==null?null:t.fieldsInfo.securityKey.fieldTitle),o(),M("ngModel",t.dataModel.securityKey),o(3),m("",s.value.length," / 100"),o(),p("ngIf",s.errors==null?null:s.errors.required),o(3),T(t.fieldsInfo.packageName==null?null:t.fieldsInfo.packageName.fieldTitle),o(),M("ngModel",t.dataModel.packageName),o(3),m("",u.value.length," / 500"),o(3),T(t.fieldsInfo.deviceIPsAllow==null?null:t.fieldsInfo.deviceIPsAllow.fieldTitle),o(),M("ngModel",t.dataModel.deviceIPsAllow),o(3),m("",l.value.length," / 500"),o(),p("optionDisabled",!1)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",h(34,28,"TITLE.SITE")),o(4),T(t.fieldsInfo.linkApplicationId==null?null:t.fieldsInfo.linkApplicationId.fieldTitle),o(),M("ngModel",t.dataModel.linkApplicationId),o(3),M("ngModel",t.dataModel.osType),o(2),p("ngForOf",t.dataModelEnumOperatingSystemTypeResult.listItems),o(2),M("ngModel",t.dataModel.deviceType),o(2),p("ngForOf",t.dataModelEnumDeviceTypeResult.listItems),o(),p("ngIf",t.fieldsInfo.description==null?null:t.fieldsInfo.description.accessWatchField),o(),p("ngIf",t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.accessWatchField),o(),p("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[le,F,fe,Se,_e,ce,ge,ve,de,pe,Ce,he,ue,me,ye,Ee,be,Me,Ie,H,xe,Ae,Te,Re,q],encapsulation:2});var Ve=U;var vi=["vform"];function Si(i,d){if(i&1){let e=x();a(0,"app-cms-enum-record-status-selector",32),y("modelChange",function(t){f(e);let s=v();return I(s.dataModel.recordStatus,t)||(s.dataModel.recordStatus=t),g(t)}),r()}if(i&2){let e=v();M("model",e.dataModel.recordStatus),p("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function _i(i,d){i&1&&(a(0,"mat-error"),c(1," SecurityKey is "),a(2,"strong"),c(3),_(4,"translate"),r()()),i&2&&(o(3),T(h(4,1,"MESSAGE.required")))}function Ci(i,d){if(i&1&&(a(0,"option",33),c(1),r()),i&2){let e=d.$implicit;p("value",e.value),o(),m(" ",e.description," ")}}function hi(i,d){if(i&1&&(a(0,"option",33),c(1),r()),i&2){let e=d.$implicit;p("value",e.value),o(),m(" ",e.description," ")}}function Mi(i,d){i&1&&(a(0,"mat-error"),c(1," Description is "),a(2,"strong"),c(3),_(4,"translate"),r()()),i&2&&(o(3),T(h(4,1,"MESSAGE.required")))}function Ii(i,d){if(i&1){let e=x();a(0,"div",15)(1,"label",34),c(2),r(),a(3,"textarea",35,7),y("ngModelChange",function(t){f(e);let s=v();return I(s.dataModel.description,t)||(s.dataModel.description=t),g(t)}),c(5,"        "),r(),a(6,"em"),c(7),r(),C(8,Mi,5,3,"mat-error",18),r()}if(i&2){let e=A(4),n=v();o(2),T(n.fieldsInfo.description==null?null:n.fieldsInfo.description.fieldTitle),o(),p("placeholder",ae(n.fieldsInfo.description==null?null:n.fieldsInfo.description.fieldTitle)),M("ngModel",n.dataModel.description),o(4),m("",e.value.length," / 500"),o(),p("ngIf",e.errors==null?null:e.errors.required)}}function yi(i,d){if(i&1){let e=x();a(0,"div",36)(1,"label",37),c(2),r(),a(3,"input",38),y("ngModelChange",function(t){f(e);let s=v();return I(s.dataModel.expireDate,t)||(s.dataModel.expireDate=t),g(t)}),r(),E(4,"mat-datepicker-toggle",39)(5,"mat-datepicker",40,8),r()}if(i&2){let e=A(6),n=v();o(2),T(n.fieldsInfo.expireDate==null?null:n.fieldsInfo.expireDate.fieldTitle),o(),p("matDatepicker",e),M("ngModel",n.dataModel.expireDate),o(),p("for",e)}}function Ei(i,d){if(i&1){let e=x();a(0,"div",41)(1,"button",42),b("click",function(){f(e);let t=v();return g(t.onFormCancel())}),E(2,"i",43),c(3),_(4,"translate"),r(),a(5,"button",44),E(6,"i",45),c(7),_(8,"translate"),r()()}if(i&2){v();let e=A(9);o(3),m(" ",h(4,3,"ACTION.CANCEL")," "),o(2),p("disabled",!e.form.valid),o(2),m(" ",h(8,5,"ACTION.SAVE")," ")}}var z=class z extends At{constructor(e,n,t,s,u,l,P,ee){super(s,new k,l,ee);this.data=e;this.dialogRef=n;this.coreEnumService=t;this.coreDeviceService=s;this.cmsToastrService=u;this.publicHelper=l;this.cdr=P;this.translate=ee;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.selectFileTypeMainImage=["jpg","jpeg","png"];this.appLanguage="fa";this.dataModelResult=new Ye;this.dataModel=new k;this.formInfo=new se;this.dataModelEnumDeviceTypeResult=new R;this.dataModelEnumOperatingSystemTypeResult=new R;this.fileManagerOpenForm=!1;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.getServiceDeviceTypeEnum(),this.getServiceOperatingSystemTypeEnum()}getServiceDeviceTypeEnum(){this.coreEnumService.ServiceDeviceTypeEnum().subscribe({next:e=>{this.dataModelEnumDeviceTypeResult=e}})}getServiceOperatingSystemTypeEnum(){this.coreEnumService.ServiceOperatingSystemTypeEnum().subscribe({next:e=>{this.dataModelEnumOperatingSystemTypeResult=e}})}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(n=>{this.formInfo.submitResultMessage=n}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(n=>{this.publicHelper.processService.processStart(e,n,this.constructorInfoAreaId)}),this.coreDeviceService.setAccessLoad(),this.coreDeviceService.setAccessDataType(Xe.Editor),this.coreDeviceService.ServiceGetOneById(this.requestId).subscribe({next:n=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(n.access),this.dataModel=n.item,n.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+n.item.id,this.formInfo.submitResultMessage=""):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.publicHelper.processService.processStop(e)},error:n=>{this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(n=>{this.formInfo.submitResultMessage=n}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(n=>{this.publicHelper.processService.processStart(e,n,this.constructorInfoAreaId)}),this.coreDeviceService.ServiceEdit(this.dataModel).subscribe({next:n=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=n,n.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.publicHelper.processService.processStop(e)},error:n=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(n),this.publicHelper.processService.processStop(e,!1)}})}onActionSelectSite(e){if(!e||e.id<=0){this.translate.get(["MESSAGE.Specify_the_site","MESSAGE.Information_site_is_not_clear"]).subscribe(n=>{this.cmsToastrService.typeErrorMessage(n["MESSAGE.Specify_the_site"],n["MESSAGE.Information_site_is_not_clear"])});return}this.dataModel.linkSiteId=e.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};z.\u0275fac=function(n){return new(n||z)(S(we),S(De),S(W),S(V),S(K),S(Q),S(G),S(j))},z.\u0275cmp=B({type:z,selectors:[["app-core-sitecategory-edit"]],viewQuery:function(n,t){if(n&1&&ne(vi,5),n&2){let s;oe(s=re())&&(t.formGroup=s.first)}},standalone:!1,features:[O],decls:51,vars:30,consts:[["vform","ngForm"],["SecurityKey",""],["PackageName",""],["DeviceIPsAllow",""],["LinkApplicationId",""],["osType","ngModel"],["DeviceType","ngModel"],["Description",""],["ExpireDate",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem","modelChange",4,"ngIf"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.securityKey",1,"color-highlight"],["matInput","","type","text","name","dataModel.securityKey","placeholder","NTK.CMS.APP.1","minlength","3","maxlength","100","id","dataModel.securityKey",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[4,"ngIf"],["for","dataModel.packageName",1,"color-highlight"],["matInput","","type","text","name","dataModel.packageName","placeholder","8.8.8.8","minlength","0","maxlength","500","id","dataModel.packageName",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["for","dataModel.deviceIPsAllow",1,"color-highlight"],["matInput","","type","text","name","dataModel.deviceIPsAllow","placeholder","8.8.8.8","minlength","0","maxlength","500","id","dataModel.deviceIPsAllow",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],["for","dataModel.linkApplicationId",1,"color-highlight"],["matInput","","type","number","name","dataModel.linkApplicationId","placeholder","number ","id","dataModel.linkApplicationId",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["id","dataModel.osType","name","dataModel.osType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["id","dataModel.deviceType","name","dataModel.deviceType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","input-style has-borders no-icon input-style-always-active validate-field mb-4 cms-input-group",4,"ngIf"],["class","form-actions",4,"ngIf"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"value"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],["for","dataModel.expireDate",1,"color-highlight"],["matInput","","type","text","name","dataModel.expireDate","id","dataModel.expireDate",1,"form-control","validate-name",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["touchUi",""],[1,"form-actions"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(n,t){if(n&1){let s=x();a(0,"div",9),E(1,"app-progress-spinner",10),a(2,"div",11)(3,"p",12),c(4),r(),a(5,"p"),c(6),_(7,"translate"),r(),a(8,"form",13,0),b("ngSubmit",function(){return f(s),g(t.onFormSubmit())}),C(10,Si,1,5,"app-cms-enum-record-status-selector",14),a(11,"div",15)(12,"label",16),c(13),r(),a(14,"input",17,1),y("ngModelChange",function(l){return f(s),I(t.dataModel.securityKey,l)||(t.dataModel.securityKey=l),g(l)}),r(),a(16,"em"),c(17),r(),C(18,_i,5,3,"mat-error",18),r(),a(19,"div",15)(20,"label",19),c(21),r(),a(22,"input",20,2),y("ngModelChange",function(l){return f(s),I(t.dataModel.packageName,l)||(t.dataModel.packageName=l),g(l)}),r(),a(24,"em"),c(25),r()(),a(26,"div",15)(27,"label",21),c(28),r(),a(29,"input",22,3),y("ngModelChange",function(l){return f(s),I(t.dataModel.deviceIPsAllow,l)||(t.dataModel.deviceIPsAllow=l),g(l)}),r(),a(31,"em"),c(32),r()(),a(33,"app-cms-site-selector",23),_(34,"translate"),b("optionChange",function(l){return f(s),g(t.onActionSelectSite(l))}),r(),a(35,"div",15)(36,"label",24),c(37),r(),a(38,"input",25,4),y("ngModelChange",function(l){return f(s),I(t.dataModel.linkApplicationId,l)||(t.dataModel.linkApplicationId=l),g(l)}),r()(),a(40,"div",15)(41,"select",26,5),y("ngModelChange",function(l){return f(s),I(t.dataModel.osType,l)||(t.dataModel.osType=l),g(l)}),C(43,Ci,2,2,"option",27),r()(),a(44,"div",15)(45,"select",28,6),y("ngModelChange",function(l){return f(s),I(t.dataModel.deviceType,l)||(t.dataModel.deviceType=l),g(l)}),C(47,hi,2,2,"option",27),r()(),C(48,Ii,9,6,"div",29)(49,yi,7,4,"div",30)(50,Ei,9,7,"div",31),r()()()}if(n&2){let s=A(15),u=A(23),l=A(30);o(),p("optionsInfoAreaId",t.constructorInfoAreaId),o(3),m(" ",t.formInfo.formTitle," "),o(2),m(" ",h(7,26,"TITLE.Be_Careful_When_Entering_Information")," "),o(4),p("ngIf",t.fieldsInfo.recordStatus==null?null:t.fieldsInfo.recordStatus.accessWatchField),o(3),T(t.fieldsInfo.securityKey==null?null:t.fieldsInfo.securityKey.fieldTitle),o(),M("ngModel",t.dataModel.securityKey),o(3),m("",s.value.length," / 100"),o(),p("ngIf",s.errors==null?null:s.errors.required),o(3),T(t.fieldsInfo.packageName==null?null:t.fieldsInfo.packageName.fieldTitle),o(),M("ngModel",t.dataModel.packageName),o(3),m("",u.value.length," / 500"),o(3),T(t.fieldsInfo.deviceIPsAllow==null?null:t.fieldsInfo.deviceIPsAllow.fieldTitle),o(),M("ngModel",t.dataModel.deviceIPsAllow),o(3),m("",l.value.length," / 500"),o(),p("optionDisabled",!1)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",h(34,28,"TITLE.SITE")),o(4),T(t.fieldsInfo.linkApplicationId==null?null:t.fieldsInfo.linkApplicationId.fieldTitle),o(),M("ngModel",t.dataModel.linkApplicationId),o(3),M("ngModel",t.dataModel.osType),o(2),p("ngForOf",t.dataModelEnumOperatingSystemTypeResult.listItems),o(2),M("ngModel",t.dataModel.deviceType),o(2),p("ngForOf",t.dataModelEnumDeviceTypeResult.listItems),o(),p("ngIf",t.fieldsInfo.description==null?null:t.fieldsInfo.description.accessWatchField),o(),p("ngIf",t.fieldsInfo.expireDate==null?null:t.fieldsInfo.expireDate.accessWatchField),o(),p("ngIf",t.formInfo.submitButtonEnabled)}},dependencies:[le,F,fe,Se,_e,ce,ge,ve,de,pe,Ce,he,ue,me,ye,Ee,be,Me,Ie,H,xe,Ae,Te,Re,q],encapsulation:2});var Ne=z;var bi=()=>[5,10,20,100],Di=i=>({display:i}),wi=i=>({background:i});function Ti(i,d){if(i&1){let e=x();a(0,"a",44),b("click",function(){f(e);let t=v();return g(t.onActionBackToParent())}),E(1,"i",45),r()}}function xi(i,d){if(i&1){let e=x();a(0,"div",46)(1,"a",47),b("click",function(){f(e);let t=v();return g(t.onActionButtonNewRow())}),E(2,"i",48)(3,"br"),r(),a(4,"p",49),c(5),_(6,"translate"),r()()}i&2&&(o(5),m(" ",h(6,1,"ACTION.ADD")," "))}function Ai(i,d){if(i&1){let e=x();a(0,"div",46)(1,"a",50),b("click",function(){f(e);let t=v();return g(t.onActionButtonEditRow(t.tableRowSelected))}),E(2,"i",51)(3,"br"),r(),a(4,"p",49),c(5),_(6,"translate"),r()()}i&2&&(o(5),m(" ",h(6,1,"ACTION.EDIT")," "))}function Ri(i,d){if(i&1){let e=x();a(0,"div",46)(1,"a",52),b("click",function(){f(e);let t=v();return g(t.onActionButtonDeleteRow(t.tableRowSelected))}),E(2,"i",53)(3,"br"),r(),a(4,"p",49),c(5),_(6,"translate"),r()()}i&2&&(o(5),m(" ",h(6,1,"ACTION.DELETE")," "))}function ki(i,d){if(i&1&&(a(0,"mat-header-cell",54),c(1),r()),i&2){let e=v();o(),m(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function Vi(i,d){if(i&1&&(a(0,"mat-cell"),c(1),r()),i&2){let e=d.$implicit;o(),m(" ",e.id," ")}}function Li(i,d){if(i&1&&(a(0,"mat-header-cell",54),c(1),r()),i&2){let e=v();o(),m(" ",e.fieldsInfo.linkSiteId==null?null:e.fieldsInfo.linkSiteId.fieldTitle," ")}}function Ni(i,d){if(i&1&&(a(0,"mat-cell"),c(1),_(2,"cmssiteinfo"),_(3,"async"),r()),i&2){let e=d.$implicit;o(),m(" ",h(3,3,h(2,1,e.linkSiteId))," ")}}function Pi(i,d){if(i&1&&(a(0,"mat-header-cell",54),c(1),r()),i&2){let e=v();o(),m(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function Bi(i,d){if(i&1&&E(0,"select",57),i&2){let e=v().$implicit,n=v();p("contentService",n.contentService)("row",e)("ngStyle",Oe(3,Di,e.id===(n.tableRowSelected==null?null:n.tableRowSelected.id)?"":"none"))}}function Oi(i,d){if(i&1&&(a(0,"mat-cell",55),_(1,"statusCellClass"),E(2,"i",55),_(3,"statusIconClass"),C(4,Bi,1,5,"select",56),r()),i&2){let e=d.$implicit,n=v();p("ngClass",h(1,3,e.recordStatus)),o(2),p("ngClass",h(3,5,e.recordStatus)),o(2),p("ngIf",n.dataModelResult==null||n.dataModelResult.access==null?null:n.dataModelResult.access.accessEditRow)}}function Gi(i,d){if(i&1&&(a(0,"mat-header-cell",54),c(1),r()),i&2){let e=v();o(),m(" ",e.fieldsInfo.osType==null?null:e.fieldsInfo.osType.fieldTitle," ")}}function Fi(i,d){if(i&1&&(a(0,"mat-cell"),c(1),_(2,"enums"),r()),i&2){let e=d.$implicit,n=v();o(),m(" ",Ge(2,1,e.osType,n.dataModelEnumOperatingSystemTypeResult.listItems)," ")}}function Wi(i,d){if(i&1&&(a(0,"mat-header-cell",54),c(1),r()),i&2){let e=v();o(),m(" ",e.fieldsInfo.deviceType==null?null:e.fieldsInfo.deviceType.fieldTitle," ")}}function Hi(i,d){if(i&1&&(a(0,"mat-cell"),c(1),_(2,"enums"),r()),i&2){let e=d.$implicit,n=v();o(),m(" ",Ge(2,1,e.deviceType,n.dataModelEnumDeviceTypeResult.listItems)," ")}}function ji(i,d){if(i&1&&(a(0,"mat-header-cell",54),c(1),r()),i&2){let e=v();o(),m(" ",e.fieldsInfo.packageName==null?null:e.fieldsInfo.packageName.fieldTitle," ")}}function qi(i,d){if(i&1&&(a(0,"mat-cell"),c(1),r()),i&2){let e=d.$implicit;o(),m(" ",e.packageName," ")}}function Ki(i,d){if(i&1&&(a(0,"mat-header-cell",54),c(1),r()),i&2){let e=v();o(),m(" ",e.fieldsInfo.linkApplicationId==null?null:e.fieldsInfo.linkApplicationId.fieldTitle," ")}}function Qi(i,d){if(i&1&&(a(0,"mat-cell"),c(1),r()),i&2){let e=d.$implicit;o(),m(" ",e.linkApplicationId," ")}}function Ui(i,d){if(i&1&&(a(0,"mat-header-cell",54),c(1),r()),i&2){let e=v();o(),m(" ",e.fieldsInfo.createdDate==null?null:e.fieldsInfo.createdDate.fieldTitle," ")}}function zi(i,d){if(i&1&&(a(0,"mat-cell"),c(1),_(2,"localeDate"),r()),i&2){let e=d.$implicit;o(),m(" ",h(2,1,e.createdDate)," ")}}function Ji(i,d){if(i&1&&(a(0,"mat-header-cell",54),c(1),r()),i&2){let e=v();o(),m(" ",e.fieldsInfo.updatedDate==null?null:e.fieldsInfo.updatedDate.fieldTitle," ")}}function Xi(i,d){if(i&1&&(a(0,"mat-cell"),c(1),_(2,"localeDate"),r()),i&2){let e=d.$implicit;o(),m(" ",h(2,1,e.updatedDate)," ")}}function Yi(i,d){if(i&1&&(a(0,"mat-header-cell",54),c(1),r()),i&2){let e=v();o(),m(" ",e.fieldsInfo.expireDate==null?null:e.fieldsInfo.expireDate.fieldTitle," ")}}function Zi(i,d){if(i&1&&(a(0,"mat-cell",58),c(1),_(2,"persianDate"),r()),i&2){let e=d.$implicit,n=v();p("ngStyle",Oe(4,wi,n.publicHelper.RowStyleExpireDate(e.expireDate))),o(),m(" ",h(2,2,e.expireDate))}}function $i(i,d){i&1&&(a(0,"mat-header-cell"),c(1),_(2,"translate"),r()),i&2&&(o(),m(" ",h(2,1,"TITLE.OPTION")," "))}function en(i,d){if(i&1&&(a(0,"mat-cell",59)(1,"button",60)(2,"mat-icon"),c(3,"more_vert"),r()(),E(4,"mat-menu",null,2),r()),i&2){let e=A(5);o(),p("matMenuTriggerFor",e)}}function tn(i,d){i&1&&E(0,"mat-header-row")}function nn(i,d){if(i&1){let e=x();a(0,"mat-row",61),b("click",function(t){let s=f(e).$implicit,u=v();return g(u.onActionTableRowSelect(s,t))})("rtclick",function(t){let s=f(e).$implicit,u=v();return g(u.onActionTableRowSelect(s,t))}),r()}if(i&2){let e=d.$implicit,n=v();Be("ntk-row-selected",e.id===(n.tableRowSelected==null?null:n.tableRowSelected.id))}}var J=class J extends Rt{constructor(e,n,t,s,u,l,P,ee,Zt,rn,an,$t,ln){super(e,new k,$t,u,Zt);this.contentService=e;this.cmsToastrService=n;this.cmsConfirmationDialogService=t;this.router=s;this.tokenHelper=u;this.coreEnumService=l;this.activatedRoute=P;this.cdr=ee;this.translate=Zt;this.pageInfo=rn;this.cmsStoreService=an;this.publicHelper=$t;this.dialog=ln;this.requestLinkSiteId=0;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new Ze;this.filterDataModelQueryBuilder=[];this.dataModelEnumDeviceTypeResult=new R;this.dataModelEnumOperatingSystemTypeResult=new R;this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Id","LinkSiteId","RecordStatus","osType","DeviceType","PackageName","LinkApplicationId","CreatedDate","UpdatedDate","ExpireDate"];this.tabledisplayedColumnsMobileSource=["Id","LinkSiteId","RecordStatus","osType","DeviceType","PackageName","LinkApplicationId","CreatedDate","UpdatedDate","ExpireDate"];this.unsubscribe=[];if(this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:X=>this.onSubmitOptionsSearch(X)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=Y.Descending,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkSiteId>0){let X=new Fe;X.propertyName="LinkSiteId",X.value=this.requestLinkSiteId,this.filteModelContent.filters.push(X)}}ngOnInit(){this.filteModelContent.sortColumn="Id",this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>He(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))),this.getServiceDeviceType(),this.getServiceOperatingSystemTypeEnum()}getServiceDeviceType(){this.coreEnumService.ServiceDeviceTypeEnum().subscribe({next:e=>{this.dataModelEnumDeviceTypeResult=e}})}getServiceOperatingSystemTypeEnum(){this.coreEnumService.ServiceOperatingSystemTypeEnum().subscribe({next:e=>{this.dataModelEnumOperatingSystemTypeResult=e}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new k);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let n=JSON.parse(JSON.stringify(this.filteModelContent));this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(n.filters=[...this.filterDataModelQueryBuilder]),this.contentService.ServiceGetAllEditor(n).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),t.isSuccess?(this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=Y.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=Y.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=Y.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Ve,{height:"90%",panelClass:e,enterAnimationDuration:Z.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Z.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionButtonEditRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var n="";this.publicHelper.isMobile?n="dialog-fullscreen":n="dialog-min",this.dialog.open(Ne,{height:"90%",panelClass:n,enterAnimationDuration:Z.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:Z.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(s=>{s&&s.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_delete").subscribe(s=>{this.cmsToastrService.typeErrorSelected(s)});return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var n="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(s=>{n=s["MESSAGE.Please_Confirm"],t=s["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.id+" ) "}),this.cmsConfirmationDialogService.confirm(n,t).then(s=>{if(s){let u=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(l=>{this.publicHelper.processService.processStart(u,l,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:l=>{l.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(u)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(u,!1)}})}}).catch(()=>{})}onActionButtonGoToSiteCategoryList(e=this.tableRowSelected){if(!e||!e.id||e.id===0){this.translate.get("MESSAGE.no_row_selected_to_display").subscribe(n=>{this.cmsToastrService.typeErrorSelected(n)});return}this.onActionTableRowSelect(e),this.router.navigate(["/core/siteSiteCategory/",this.tableRowSelected.id])}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let n=new Map;this.translate.get("MESSAGE.Active").subscribe(l=>{n.set(l,0)}),this.translate.get("MESSAGE.All").subscribe(l=>{n.set(l,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(l=>{this.publicHelper.processService.processStart(t,l,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.All").subscribe(P=>{n.set(P,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(n)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}});let s=JSON.parse(JSON.stringify(this.filteModelContent)),u=new Fe;u.propertyName="RecordStatus",u.value=Je.Available,s.filters.push(u),this.contentService.ServiceGetCount(s).subscribe({next:l=>{l.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(P=>{n.set(P,l.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(n)):this.cmsToastrService.typeErrorMessage(l.errorMessage),this.publicHelper.processService.processStop(t)},error:l=>{this.cmsToastrService.typeError(l),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}onActionBackToParent(){this.router.navigate(["/core/site/"])}};J.\u0275fac=function(n){return new(n||J)(S(V),S(K),S(ke),S(tt),S(Et),S(W),S(et),S(G),S(j),S(Dt),S(yt),S(Q),S(rt))},J.\u0275cmp=B({type:J,selectors:[["app-core-sitecategory-list"]],standalone:!1,features:[O],decls:75,vars:38,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"svg"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-gray","target","_blank",3,"click",4,"ngIf"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],["class","col-4",4,"ngIf"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","",3,"matSortChange","dataSource"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","osType"],["matColumnDef","DeviceType"],["matColumnDef","PackageName"],["matColumnDef","LinkApplicationId"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","ExpireDate"],[3,"ngStyle",4,"matCellDef"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild",3,"ntk-row-selected","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"fa-solid","fa-arrow-left","font-18",2,"color","#ffffff"],[1,"col-4"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","","style","background: none; border: none",3,"contentService","row","ngStyle",4,"ngIf"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[3,"ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],[1,"ntk-row-mainfild",3,"click","rtclick"]],template:function(n,t){if(n&1){let s=x();a(0,"app-cms-html-notice",3)(1,"h4"),c(2),_(3,"translate"),r(),c(4),_(5,"translate"),r(),a(6,"app-cms-html-list",4),y("optionActionGuideNoticeDisplayChange",function(l){return f(s),I(t.viewGuideNotice,l)||(t.viewGuideNotice=l),g(l)}),b("optionOnActionButtonMemoRow",function(){return f(s),g(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return f(s),g(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return f(s),g(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return f(s),g(t.onActionButtonPrintRow())}),D(7,5),c(8," -------------------------------------- "),w(),je(9,6)(10,7),D(11,8),C(12,Ti,2,0,"a",9),a(13,"a",10),b("click",function(){return f(s),g(t.viewGuideNotice=!t.viewGuideNotice)}),E(14,"i",11),r(),a(15,"a",10),b("click",function(){return f(s),g(t.onActionButtonReload())}),E(16,"i",12),r(),w(),D(17,13),a(18,"a",14),b("click",function(){return f(s),g(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),E(19,"mat-slide-toggle",15),c(20),_(21,"translate"),r(),a(22,"a",14),b("click",function(){return f(s),g(t.onActionButtonStatist())}),E(23,"mat-slide-toggle",15),c(24),_(25,"translate"),r(),w(),D(26,16),C(27,xi,7,3,"div",17),w(),D(28,18),C(29,Ai,7,3,"div",17)(30,Ri,7,3,"div",17),w(),D(31,19),a(32,"app-cms-search-list",20),y("optionsChange",function(l){return f(s),I(t.optionsSearch,l)||(t.optionsSearch=l),g(l)}),r(),a(33,"app-cms-statist-list",20),y("optionsChange",function(l){return f(s),I(t.optionsStatist,l)||(t.optionsStatist=l),g(l)}),r(),w(),D(34,21),a(35,"mat-table",22,0),b("matSortChange",function(){f(s);let l=A(36);return g(t.onTableSortData(l))}),D(37,23),C(38,ki,2,1,"mat-header-cell",24)(39,Vi,2,1,"mat-cell",25),w(),D(40,26),C(41,Li,2,1,"mat-header-cell",24)(42,Ni,4,5,"mat-cell",25),w(),D(43,27),C(44,Pi,2,1,"mat-header-cell",24)(45,Oi,5,7,"mat-cell",28),w(),D(46,29),C(47,Gi,2,1,"mat-header-cell",24)(48,Fi,3,4,"mat-cell",25),w(),D(49,30),C(50,Wi,2,1,"mat-header-cell",24)(51,Hi,3,4,"mat-cell",25),w(),D(52,31),C(53,ji,2,1,"mat-header-cell",24)(54,qi,2,1,"mat-cell",25),w(),D(55,32),C(56,Ki,2,1,"mat-header-cell",24)(57,Qi,2,1,"mat-cell",25),w(),D(58,33),C(59,Ui,2,1,"mat-header-cell",24)(60,zi,3,3,"mat-cell",25),w(),D(61,34),C(62,Ji,2,1,"mat-header-cell",24)(63,Xi,3,3,"mat-cell",25),w(),D(64,35),C(65,Yi,2,1,"mat-header-cell",24)(66,Zi,3,6,"mat-cell",36),w(),D(67,37),C(68,$i,3,3,"mat-header-cell",38)(69,en,6,1,"mat-cell",39),w(),C(70,tn,1,0,"mat-header-row",40)(71,nn,1,2,"mat-row",41),r(),w(),D(72,42),a(73,"mat-paginator",43,1),b("page",function(l){return f(s),g(t.onTablePageingData(l))}),r(),w(),r()}n&2&&(p("svg","assets/media/svg/icons/General/Notifications1.svg"),o(2),T(h(3,29,"TITLE.List_of_devices")),o(2),m(" ",h(5,31,"TITLE.In_this_section_you_can_see_the_list_of_your_devices._Inthis_section_you_can_see_the_list_of_your_devicess"),`
`),o(2),p("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),M("optionActionGuideNoticeDisplay",t.viewGuideNotice),p("optionTreeDisplay",!1)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.id),o(6),p("ngIf",t.requestLinkSiteId>0),o(4),Be("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),o(3),p("checked",t.optionsSearch.data.show),o(),m("",h(21,33,"ACTION.SEARCH")," "),o(3),p("checked",t.optionsStatist.data.show),o(),m("",h(25,35,"ACTION.STATIST")," "),o(3),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),o(2),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow),o(),p("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow),o(2),M("options",t.optionsSearch),o(),M("options",t.optionsStatist),o(2),p("dataSource",t.tableSource),o(35),p("matHeaderRowDef",t.tabledisplayedColumns),o(),p("matRowDefColumns",t.tabledisplayedColumns),o(2),p("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",qe(37,bi)))},dependencies:[Ke,F,Qe,ot,at,H,lt,st,ct,dt,pt,mt,ut,gt,Ct,vt,ft,ht,St,_t,Mt,It,kt,Vt,xt,Lt,Nt,Pt,Ue,q,Wt,Ht,Bt,Ot,Gt,Ft],encapsulation:2});var $=J;var on=[{path:"",data:{title:"ROUTE.CORE.DEVICE"},children:[{path:"",component:$,data:{title:"ROUTE.CORE.DEVICE"}},{path:":LinkSiteId",component:$,data:{title:"ROUTE.CORE.DEVICE"}}]}],L=class L{};L.\u0275fac=function(e){return new(e||L)},L.\u0275mod=ie({type:L}),L.\u0275inj=te({imports:[We.forChild(on),We]});var Pe=L;var N=class N{};N.\u0275fac=function(e){return new(e||N)},N.\u0275mod=ie({type:N}),N.\u0275inj=te({providers:[V,$e,ke],imports:[ze,it,Pe,nt.withConfig({warnOnNgModelWithFormControl:"never"}),bt,Tt]});var Yt=N;export{Yt as CoreDeviceModule};
