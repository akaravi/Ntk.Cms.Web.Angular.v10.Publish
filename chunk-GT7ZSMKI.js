import{a as oe}from"./chunk-GSBDZZET.js";import{a as ne}from"./chunk-HDZWEA4D.js";import{f as ie}from"./chunk-2DNDKBAW.js";import{A as G,Ab as X,Ba as $,Bb as Y,oa as z,pc as Z,rb as W,sb as U,sc as ee,tb as q,ub as J,uc as te,vb as K,xb as Q}from"./chunk-XVK3P2WQ.js";import{$ as V,bg as x,q as F,v as O,zg as L}from"./chunk-VXWYWSUO.js";import{Ab as w,Dc as I,Ec as P,Fb as r,Gb as a,Hb as c,Ib as u,Mb as v,Nb as g,Ob as H,Pb as b,Ra as A,Sb as T,Ub as d,Va as n,Xa as y,Xc as B,cb as o,cc as j,ec as C,hc as p,ib as D,jc as S,ob as N,pa as M,qa as f,tc as _,xb as R,zb as k}from"./chunk-2AL2II5Z.js";import{i as E}from"./chunk-SEDBTTTN.js";function ae(l,i){if(l&1){let e=b();a(0,"button",11),T("click",function(){M(e);let s=d();return f(s.onActionButtonReload())}),a(1,"mat-icon",12),I(2,"translate"),p(3,"refresh"),c()()}if(l&2){let e=d();n(),C("rotation360",e.publicHelper.processService.process.inRunArea[e.constructorInfoAreaId]),r("title",_(P(2,4,"ACTION.RELOAD")))}}function le(l,i){if(l&1){let e=b();a(0,"mat-tree-node",13),u(1,"button",14),a(2,"span",15),T("click",function(){let s=M(e).$implicit,h=d();return f(h.onActionSelect(s))}),u(3,"img",16),p(4),c()()}if(l&2){let e=i.$implicit,t=d();C("ntk-tree-selected",(t.dataModelSelect==null||t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)>0&&(t.dataModelSelect==null?null:t.dataModelSelect.id)===e.id),n(3),r("src",_(e.linkMainImageIdSrc),A),n(),S("\xA0",e.title)}}function se(l,i){if(l&1){let e=b();a(0,"mat-tree-node",17)(1,"button",18)(2,"mat-icon",19),p(3),c()(),a(4,"span",15),T("click",function(){let s=M(e).$implicit,h=d();return f(h.onActionSelect(s))}),u(5,"img",16),p(6),c()()}if(l&2){let e=i.$implicit,t=d(),s=j(9);C("ntk-tree-selected",(t.dataModelSelect==null||t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)>0&&(t.dataModelSelect==null?null:t.dataModelSelect.id)===e.id),r("cdkTreeNodeTypeaheadLabel",e.title)("isExpanded",e.isExpanded??!1),n(),R("type","button")("aria-label","Toggle "+e.title),n(2),S(" ",s.isExpanded(e)?"expand_more":"chevron_right"," "),n(2),r("src",_(e.linkMainImageIdSrc),A),n(),S("\xA0",e.title)}}var m=class m{constructor(i,e,t,s,h,ce,de,pe,me){this.cmsToastrService=i;this.coreEnumService=e;this.categoryService=t;this.cdr=s;this.publicHelper=h;this.tokenHelper=ce;this.cmsStoreService=de;this.translate=pe;this.dialog=me;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new x;this.dataModelResult=new F;this.filterModel=new O;this.dataSource=new Q;this.optionChange=new y;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(i,e)=>!1;this.childrenAccessor=i=>[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(i){this.onActionSelectForce(i)}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(i=>i.tokenInfoStore).subscribe(()=>E(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(i=>i.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess&&(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems),this.publicHelper.processService.processStop(i)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i,!1)}})}onActionSelect(i){i&&this.dataModelSelect&&i.id==this.dataModelSelect.id?(this.dataModelSelect=null,this.optionChange.emit(null)):(this.dataModelSelect=i,this.optionChange.emit(this.dataModelSelect))}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new x,this.DataGetAll()}onActionSelectForce(i){}};m.\u0275fac=function(e){return new(e||m)(o(te),o(V),o(L),o(B),o(ie),o(ee),o(Z),o(X),o(z))},m.\u0275cmp=D({type:m,selectors:[["app-sms-apipath-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:13,vars:11,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,t){e&1&&(a(0,"app-cms-html-tree",1),v(1,2),p(2),I(3,"translate"),g(),v(4,3),k(5,ae,4,6,"button",4),g(),v(6,5),u(7,"app-progress-spinner",6),a(8,"mat-tree",7,0),N(10,le,5,5,"mat-tree-node",8)(11,se,7,10,"mat-tree-node",9),c(),g(),H(12,10),c()),e&2&&(r("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),n(2),S(" ",P(3,9,"TABLE."+(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.moduleEntityName))," "),n(3),w(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessWatchRow?5:-1),n(2),r("optionsInfoAreaId",t.constructorInfoAreaId),n(),r("dataSource",t.dataSource)("childrenAccessor",t.childrenAccessor),n(3),r("matTreeNodeDefWhen",t.hasChild))},dependencies:[G,$,U,q,K,J,W,ne,oe,Y],encapsulation:2});var re=m;export{re as a};
