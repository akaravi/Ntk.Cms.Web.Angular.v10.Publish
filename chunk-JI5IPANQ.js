import{a as ae}from"./chunk-V3GTO53O.js";import{a as ne,b as re}from"./chunk-36VJ76EH.js";import{a as ie}from"./chunk-BKBRRENB.js";import{f as oe}from"./chunk-YXVNOMNY.js";import{Ja as G,Nc as ee,Oc as te,Pa as L,eb as z,hc as q,ic as J,jc as K,kc as Q,lc as U,mc as X,oa as B,pc as Y,qc as Z}from"./chunk-UPR5DKLI.js";import{Ea as r,Gb as V,Ib as I,Ic as O,Ja as s,Lb as p,Mb as D,Nb as b,Oa as w,Pd as j,Ua as A,Ub as H,Ud as F,Wa as x,ac as C,ae as $,bb as k,bc as M,ca as m,da as u,ee as W,hb as l,ib as a,jb as c,jf as y,kb as E,ob as T,pb as v,qb as N,qq as h,rb as f,tc as P,ub as S,wb as d}from"./chunk-4PHK4ED5.js";import{i as R}from"./chunk-SEDBTTTN.js";function se(n,o){if(n&1){let e=f();a(0,"button",14),S("click",function(){m(e);let i=d();return u(i.onActionAdd())}),p(1),C(2,"translate"),c()}n&2&&(r(),b(" ",M(2,1,"ACTION.ADD")," "))}function ce(n,o){if(n&1){let e=f();a(0,"button",15),S("click",function(){m(e);let i=d();return u(i.onActionEdit())}),p(1),C(2,"translate"),c()}n&2&&(r(),b(" ",M(2,1,"ACTION.EDIT")," "))}function de(n,o){if(n&1){let e=f();a(0,"button",16),S("click",function(){m(e);let i=d();return u(i.onActionDelete())}),p(1),C(2,"translate"),c()}n&2&&(r(),b(" ",M(2,1,"ACTION.DELETE")," "))}function pe(n,o){if(n&1){let e=f();a(0,"button",17),S("click",function(){m(e);let i=d();return u(i.onActionButtonReload())}),a(1,"mat-icon",18),C(2,"translate"),p(3,"refresh"),c()()}n&2&&(r(),l("title",H(M(2,2,"ACTION.RELOAD"))))}function me(n,o){if(n&1){let e=f();a(0,"mat-tree-node",19),E(1,"button",20),a(2,"span",21),S("click",function(){let i=m(e).$implicit,_=d();return u(_.onActionSelect(i))}),p(3),c()()}if(n&2){let e=o.$implicit,t=d();I("ntk-tree-selected",t.dataModelSelect.id>0&&t.dataModelSelect.id===e.id),r(3),D(e.titleML)}}function ue(n,o){if(n&1){let e=f();a(0,"mat-tree-node",22)(1,"button",23)(2,"mat-icon",24),p(3),c()(),a(4,"span",21),S("click",function(){let i=m(e).$implicit,_=d();return u(_.onActionSelect(i))}),p(5),c()()}if(n&2){let e=o.$implicit,t=d(),i=V(12);I("ntk-tree-selected",t.dataModelSelect.id>0&&t.dataModelSelect.id===e.id),l("cdkTreeNodeTypeaheadLabel",e.titleML),r(),k("type","button")("aria-label","Toggle "+e.titleML),r(2),b(" ",i.isExpanded(e)?"expand_more":"chevron_right"," "),r(2),D(e.titleML)}}var g=class g{constructor(o,e,t,i,_,fe,Se,be,Ce){this.cmsToastrService=o;this.coreEnumService=e;this.categoryService=t;this.dialog=i;this.cdr=_;this.publicHelper=fe;this.tokenHelper=Se;this.cmsStoreService=be;this.translate=Ce;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new y;this.dataModelResult=new j;this.filterModel=new F;this.dataSource=new X;this.optionChange=new x;this.optionReload=()=>this.onActionButtonReload();this.hasChild=(o,e)=>!1;this.childrenAccessor=o=>[];this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(o){this.onActionSelectForce(o)}ngOnInit(){setTimeout(()=>{this.DataGetAll()},500),this.cmsApiStoreSubscribe=this.cmsStoreService.getState(o=>o.tokenInfoStore).subscribe(o=>R(this,null,function*(){this.DataGetAll()}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let o=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(o,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(o)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(o,!1)}})}onActionSelect(o){this.dataModelSelect=o,this.optionChange.emit(this.dataModelSelect)}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new y,this.DataGetAll()}onActionSelectForce(o){}onActionAdd(){var o="";this.publicHelper.isMobile?o="dialog-fullscreen":o="dialog-min",this.dialog.open(ne,{height:"90%",panelClass:o,enterAnimationDuration:h.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:h.cmsViewConfig.exitAnimationDuration,data:{}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let o=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(o=this.dataModelSelect.id),o===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(i=>{this.cmsToastrService.typeErrorSelected(i)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(re,{height:"90%",panelClass:e,enterAnimationDuration:h.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:h.cmsViewConfig.exitAnimationDuration,data:{id:o}}).afterClosed().subscribe(i=>{i&&i.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let o=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(o=this.dataModelSelect.id),o===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(e=>{this.cmsToastrService.typeErrorSelected(e)});return}}};g.\u0275fac=function(e){return new(e||g)(s(te),s($),s(W),s(G),s(P),s(oe),s(ee),s(z),s(Y))},g.\u0275cmp=w({type:g,selectors:[["app-core-module-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:16,vars:14,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-teal",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-magenta",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-red",3,"click",4,"ngIf"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["matTreeNodePadding","","matTreeNodeToggle","",3,"cdkTreeNodeTypeaheadLabel"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,t){e&1&&(a(0,"app-cms-html-tree",1),T(1,2),p(2),C(3,"translate"),v(),T(4,3),A(5,se,3,3,"button",4)(6,ce,3,3,"button",5)(7,de,3,3,"button",6)(8,pe,4,4,"button",7),v(),T(9,8),E(10,"app-progress-spinner",9),a(11,"mat-tree",10,0),A(13,me,4,3,"mat-tree-node",11)(14,ue,6,7,"mat-tree-node",12),c(),v(),N(15,13),c()),e&2&&(l("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),r(2),b(" ",M(3,12,"TABLE."+(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.moduleEntityName))," "),r(3),l("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessAddRow),r(),l("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessEditRow)&&(t.dataModelSelect==null?null:t.dataModelSelect.id)>0),r(),l("ngIf",(t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessDeleteRow)&&(t.dataModelSelect==null?null:t.dataModelSelect.id)>0),r(),l("ngIf",t.dataModelResult==null||t.dataModelResult.access==null?null:t.dataModelResult.access.accessWatchRow),r(2),l("optionsInfoAreaId",t.constructorInfoAreaId),r(),l("dataSource",t.dataSource)("childrenAccessor",t.childrenAccessor),r(3),l("matTreeNodeDefWhen",t.hasChild))},dependencies:[O,B,L,J,K,U,Q,q,ie,ae,Z],encapsulation:2});var le=g;export{le as a};
