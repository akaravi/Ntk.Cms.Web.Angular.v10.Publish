import{h as ue}from"./chunk-WG6YVSYL.js";import{a as pe}from"./chunk-R2DJQ5IG.js";import{f as ce}from"./chunk-G6643B3Q.js";import{B as Q,K as X,T as Y,gb as ne,hb as oe,ib as ae,ma as Z,o as $,pc as le,qc as se,r as J,v as K}from"./chunk-RUFZ56QV.js";import{Ba as L,Cd as S,E,Ea as a,Gb as H,H as F,Hc as z,Ic as U,Ja as u,Lb as h,Mb as T,Nb as B,O as D,Oa as V,Oc as W,P as k,Pd as ee,Td as f,Ua as d,Ub as C,Ud as te,Vb as A,Wa as N,ac as v,ae as ie,bb as q,bc as _,ca as P,da as I,de as re,hb as o,ib as l,if as M,jb as s,kb as p,p as O,q as w,rb as b,tc as G,ub as y,wb as m,xb as x,xd as g,yb as j}from"./chunk-D5KH3ZDN.js";import{i as R}from"./chunk-SEDBTTTN.js";var he=["*"];function ve(n,e){if(n&1&&(l(0,"label",13),h(1),s()),n&2){let t=m();o("for",A("app-cms-site-selector-",t.id)),a(),T(t.optionLabel)}}function _e(n,e){if(n&1&&(p(0,"img",14),v(1,"cmsthumbnail")),n&2){let t=m();o("src",C(_(1,2,t.dataModelSelect==null?null:t.dataModelSelect.linkImageIdSrc)),L)}}function ge(n,e){if(n&1&&(p(0,"img",14),v(1,"cmsthumbnail")),n&2){let t=m().$implicit;o("src",C(_(1,2,t.linkImageIdSrc)),L)}}function Se(n,e){if(n&1&&(l(0,"mat-option",15),d(1,ge,2,4,"img",5),l(2,"span"),h(3),s()()),n&2){let t=e.$implicit,r=m();o("value",t)("disabled",r.optionDisabled),a(),o("ngIf",t.linkImageIdSrc),a(2),T(r.displayOption(t))}}function Ce(n,e){n&1&&p(0,"i",16)}function Me(n,e){n&1&&p(0,"i",17)}function Pe(n,e){if(n&1){let t=b();l(0,"i",18),y("click",function(){P(t);let i=m();return I(i.onActionSelectClear())}),s()}}function Ie(n,e){n&1&&(l(0,"em"),h(1),v(2,"translate"),s()),n&2&&(a(),B("(",_(2,1,"TITLE.Necessary"),")"))}var c=class c{constructor(e,t,r,i,me){this.coreEnumService=e;this.translate=t;this.publicHelper=r;this.cdr=i;this.categoryService=me;this.id=++c.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ee;this.dataModelSelect=new M;this.formControl=new K;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new N;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(D(""),E(1500),F(),k(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}displayOption(e){return e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0&&e.virtual_Parent.virtual_Parent&&e.virtual_Parent.virtual_Parent.title.length>0?e.virtual_Parent.virtual_Parent.titleML+" > "+e.virtual_Parent.titleML+" > "+e.titleML:e&&e.virtual_Parent&&e.virtual_Parent.title.length>0?e.virtual_Parent.titleML+" > "+e.titleML:e?e.titleML:void 0}DataGetAll(e){return R(this,null,function*(){let t=new te;if(t.rowPerPage=20,t.accessLoad=!0,e&&e.length>0){let i=new f;i=new f,i.propertyName="Symbol",i.value=e,i.searchType=S.Contains,i.clauseType=g.Or,t.filters.push(i),i=new f,i.propertyName="Title",i.value=e,i.searchType=S.Contains,i.clauseType=g.Or,t.filters.push(i),i=new f,i.propertyName="TitleResourceLanguage",i.value=e,i.searchType=S.Contains,i.clauseType=g.Or,t.filters.push(i),i=new f,i.propertyName="Id",i.value=e,i.searchType=S.Equal,i.clauseType=g.Or,t.filters.push(i)}let r=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(r,i,this.constructorInfoAreaId)}),yield O(this.categoryService.ServiceGetAll(t)).then(i=>(this.dataModelResult=i,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(r),i.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe(w(t=>(t.find(r=>r.id===e.id)||t.push(e),t)))}onActionSelectForce(e){if(typeof e=="number"&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(t=>t.id===e)){let t=this.dataModelResult.listItems.find(r=>r.id===e);this.dataModelSelect=t,this.formControl.setValue(t);return}this.categoryService.ServiceGetOneIncludeParent(e).subscribe({next:t=>{t.isSuccess&&(this.filteredOptions=this.push(t.item),this.dataModelSelect=t.item,this.formControl.setValue(t.item),this.optionChange.emit(t.item))}});return}if(typeof e==typeof M){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new M,this.loadOptions()}};c.nextId=0,c.\u0275fac=function(t){return new(t||c)(u(ie),u(le),u(ce),u(G),u(re))},c.\u0275cmp=V({type:c,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:he,decls:16,vars:19,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(t,r){if(t&1){let i=b();x(),l(0,"div",1),p(1,"app-progress-spinner",2),d(2,ve,2,3,"label",3),l(3,"span",4),d(4,_e,2,4,"img",5),h(5," \xA0"),s(),p(6,"input",6),l(7,"mat-autocomplete",7,0),y("optionSelected",function(fe){return P(i),I(r.onActionSelect(fe.option.value))}),d(9,Se,4,4,"mat-option",8),v(10,"async"),s(),d(11,Ce,1,0,"i",9)(12,Me,1,0,"i",10)(13,Pe,1,0,"i",11)(14,Ie,3,3,"em",12),j(15),s()}if(t&2){let i=H(8);a(),o("optionsInfoAreaId",r.constructorInfoAreaId),a(),o("ngIf",(r.optionLabel==null?null:r.optionLabel.length)>0),a(2),o("ngIf",r.dataModelSelect&&(r.dataModelSelect==null?null:r.dataModelSelect.linkImageIdSrc)),a(2),o("placeholder",C(r.optionPlaceholder))("id",A("app-cms-site-selector-",r.id))("formControl",r.formControl)("matAutocomplete",i)("required",r.optionRequired),q("disabled",r.optionDisabled?!0:null),a(),o("displayWith",r.displayFn),a(2),o("ngForOf",_(10,17,r.filteredOptions)),a(2),o("ngIf",!r.formControl.valid),a(),o("ngIf",r.optionRequired&&r.formControl.valid),a(),o("ngIf",(r.dataModelSelect==null?null:r.dataModelSelect.id)>0),a(),o("ngIf",r.optionRequired&&(!r.dataModelSelect||!r.dataModelSelect.id||r.dataModelSelect.id<=0))}},dependencies:[z,U,$,J,X,Q,oe,ne,ae,Y,Z,pe,W,se,ue],encapsulation:2});var de=c;export{de as a};
