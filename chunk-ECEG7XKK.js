import{a as ce}from"./chunk-KGQPNYU5.js";import{f as pe}from"./chunk-IZD4HB32.js";import{$ as re,$a as le,A as te,J as ie,Q as oe,Qb as ae,Rb as se,aa as ne,n as Z,q as x,u as ee}from"./chunk-2IGPE3UR.js";import{Ab as j,Ce as Y,F as D,Fa as n,Gd as K,Ha as P,I as F,Ib as B,Jc as $,Jf as I,Kb as G,Kc as z,Kd as c,Ld as Q,Nb as S,Oa as d,Ob as A,P as k,Pb as W,Q as V,Qc as J,Sa as N,Ud as X,Wb as T,Xb as O,Ya as f,cc as v,da as g,db as q,dc as y,ea as C,jb as l,kb as a,lb as s,mb as h,nd as m,p as w,q as E,sd as u,tb as _,vc as U,wb as b,yb as M,zb as H}from"./chunk-PZNNKONW.js";import{i as R}from"./chunk-SEDBTTTN.js";var ue=["*"];function fe(r,e){if(r&1&&(a(0,"label",12),S(1),s()),r&2){let i=M();l("for",O("app-cms-site-selector-",i.id)),n(),A(i.optionLabel)}}function he(r,e){if(r&1&&(a(0,"mat-option",13)(1,"span"),S(2),s()()),r&2){let i=e.$implicit,o=M();l("value",i)("disabled",o.optionDisabled),n(2),A(o.displayOption(i))}}function ge(r,e){r&1&&h(0,"i",14)}function Ce(r,e){r&1&&h(0,"i",15)}function be(r,e){if(r&1){let i=_();a(0,"i",16),b("click",function(){g(i);let t=M();return C(t.onActionSelectClear())}),s()}}function Me(r,e){r&1&&(a(0,"em"),S(1),v(2,"translate"),s()),r&2&&(n(),W("(",y(2,1,"TITLE.Necessary"),")"))}var p=class p{constructor(e,i,o,t,L){this.coreEnumService=e;this.translate=i;this.cdr=o;this.publicHelper=t;this.categoryService=L;this.id=++p.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new K;this.dataModelSelect=new I;this.formControl=new ee;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new P;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(k(""),D(1500),F(),V(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){return e?e.id:void 0}displayOption(e){return e?e.id:void 0}DataGetAll(e){return R(this,null,function*(){let i=new Q;if(i.rowPerPage=20,i.accessLoad=!0,e&&e.length>0){let t=new c;t=new c,t.propertyName="username",t.value=e,t.searchType=u.Contains,t.clauseType=m.Or,i.filters.push(t),t=new c,t.propertyName="name",t.value=e,t.searchType=u.Contains,t.clauseType=m.Or,i.filters.push(t),t=new c,t.propertyName="email",t.value=e,t.searchType=u.Contains,t.clauseType=m.Or,i.filters.push(t),t=new c,t.propertyName="lastname",t.value=e,t.searchType=u.Contains,t.clauseType=m.Or,i.filters.push(t),e&&typeof+e=="number"&&+e>0&&(t=new c,t.propertyName="Id",t.value=e,t.searchType=u.Equal,t.clauseType=m.Or,i.filters.push(t))}let o=this.constructor.name+"categoryService.ServiceGetAll";return this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(o,t,this.constructorInfoAreaId)}),yield w(this.categoryService.ServiceGetAll(i)).then(t=>(this.dataModelResult=t,this.publicHelper.processService.processStop(o),t.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe(E(i=>(i.find(o=>o.id===e.id)||i.push(e),i)))}onActionSelectForce(e){if(typeof e=="string"&&e.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===e)){let i=this.dataModelResult.listItems.find(o=>o.id===e);this.dataModelSelect=i,this.formControl.setValue(i);return}this.categoryService.ServiceGetOneById(e).subscribe({next:i=>{i.isSuccess&&(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item))}});return}if(typeof e==typeof I){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new I,this.loadOptions()}};p.nextId=0,p.\u0275fac=function(i){return new(i||p)(d(X),d(ae),d(U),d(pe),d(Y))},p.\u0275cmp=N({type:p,selectors:[["app-cms-member-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:ue,decls:15,vars:24,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(i,o){if(i&1){let t=_();H(),a(0,"div",1),h(1,"app-progress-spinner",2),f(2,fe,2,3,"label",3),h(3,"input",4),a(4,"mat-autocomplete",5,0),b("optionSelected",function(me){return g(t),C(o.onActionSelect(me.option.value))}),f(6,he,3,3,"mat-option",6),v(7,"async"),s(),f(8,ge,1,0,"i",7)(9,Ce,1,0,"i",8)(10,be,1,0,"i",9),a(11,"i",10),v(12,"translate"),b("click",function(){return g(t),C(o.onActionButtonReload())}),s(),f(13,Me,3,3,"em",11),j(14),s()}if(i&2){let t=B(5);n(),l("optionsInfoAreaId",o.constructorInfoAreaId),n(),l("ngIf",(o.optionLabel==null?null:o.optionLabel.length)>0),n(),l("placeholder",T(o.optionPlaceholder))("id",O("app-cms-site-selector-",o.id))("formControl",o.formControl)("matAutocomplete",t)("required",o.optionRequired),q("disabled",o.optionDisabled?!0:null),n(),l("displayWith",o.displayFn),n(2),l("ngForOf",y(7,20,o.filteredOptions)),n(2),l("ngIf",!o.formControl.valid),n(),l("ngIf",o.optionRequired&&o.formControl.valid),n(),l("ngIf",(o.dataModelSelect==null||o.dataModelSelect.id==null?null:o.dataModelSelect.id.length)>0),n(),G("rotation360",o.publicHelper.processService.process.inRunArea[o.constructorInfoAreaId]),l("title",T(y(12,22,"ACTION.RELOAD"))),n(2),l("ngIf",o.optionRequired&&(!o.dataModelSelect||!o.dataModelSelect.id||(o.dataModelSelect.id==null?null:o.dataModelSelect.id.length)===0))}},dependencies:[$,z,Z,x,ie,te,re,oe,ne,le,ce,J,se],encapsulation:2});var de=p;export{de as a};
