import{h as fe}from"./chunk-ACSS33WQ.js";import{a as ue}from"./chunk-AR5NJHM4.js";import{f as me}from"./chunk-NAZAV6QH.js";import{B as Y,K as Z,Oc as pe,T as ee,gb as le,hb as ae,ib as se,ma as te,o as K,pc as de,qc as ce,r as Q,v as X}from"./chunk-RUFZ56QV.js";import{Ba as b,Cd as E,E as k,Ea as r,Gb as G,H as V,Hc as W,Ic as $,Ja as c,Lb as h,Mb as T,Nb as z,O as x,Oa as q,Oc as J,P as L,Pd as ie,Td as O,Ua as u,Ub as g,Ud as oe,Vb as A,Wa as N,ac as M,ae as ne,bb as j,bc as S,ca as v,da as I,ee as re,hb as n,ib as a,jb as s,jf as C,kb as p,p as D,q as P,rb as y,tc as U,ub as _,wb as f,xb as B,xd as R,yb as H}from"./chunk-D5KH3ZDN.js";import{i as w}from"./chunk-SEDBTTTN.js";var Me=["*"];function Se(o,e){if(o&1&&(a(0,"label",13),h(1),s()),o&2){let i=f();n("for",A("app-cms-site-selector-",i.id)),r(),T(i.optionLabel)}}function Ce(o,e){if(o&1&&(p(0,"img",14),M(1,"cmsthumbnail")),o&2){let i=f();n("src",g(S(1,2,i.dataModelSelect==null?null:i.dataModelSelect.linkMainImageIdSrc)),b)}}function ge(o,e){if(o&1&&(p(0,"img",14),M(1,"cmsthumbnail")),o&2){let i=f().$implicit;n("src",g(S(1,2,i.linkMainImageIdSrc)),b)}}function ve(o,e){if(o&1&&(a(0,"mat-option",15),u(1,ge,2,4,"img",5),a(2,"span"),h(3),s()()),o&2){let i=e.$implicit,t=f();n("value",i)("disabled",t.optionDisabled),r(),n("ngIf",i.linkMainImageIdSrc),r(2),T(t.displayOption(i))}}function Ie(o,e){o&1&&p(0,"i",16)}function be(o,e){o&1&&p(0,"i",17)}function ye(o,e){if(o&1){let i=y();a(0,"i",18),_("click",function(){v(i);let l=f();return I(l.onActionSelectClear())}),s()}}function _e(o,e){o&1&&(a(0,"em"),h(1),M(2,"translate"),s()),o&2&&(r(),z("(",S(2,1,"TITLE.Necessary"),")"))}var d=class d{constructor(e,i,t,l,m,F){this.coreEnumService=e;this.cmsToastrService=i;this.cdr=t;this.publicHelper=l;this.translate=m;this.categoryService=F;this.id=++d.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new ie;this.dataModelSelect=new C;this.formControl=new X;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new N;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(x(""),k(1500),V(),L(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e||""):[]))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){return w(this,null,function*(){let i=new oe;i.rowPerPage=20,i.accessLoad=!0;let t=new O;t.propertyName="Title",t.value=e,t.searchType=E.Contains,t.clauseType=R.Or,i.filters.push(t),e&&typeof+e=="number"&&+e>0&&(t=new O,t.propertyName="Id",t.value=e,t.searchType=E.Equal,t.clauseType=R.Or,i.filters.push(t));let l=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(m=>{this.publicHelper.processService.processStart(l,m,this.constructorInfoAreaId)}),yield D(this.categoryService.ServiceGetAll(i)).then(m=>(this.dataModelResult=m,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(l),m.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}onActionEmpty(){this.formControl.setValue(0),this.dataModelSelect=new C,this.optionChange.emit(this.dataModelSelect)}push(e){return this.filteredOptions.pipe(P(i=>(i.find(t=>t.id===e.id)||i.push(e),i)))}onActionSelectForce(e){if(typeof e=="number"&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===e)){let i=this.dataModelResult.listItems.find(t=>t.id===e);this.dataModelSelect=i,this.formControl.setValue(i);return}this.categoryService.ServiceGetOneById(e).subscribe({next:i=>{i.isSuccess?(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item)):this.cmsToastrService.typeErrorMessage(i.errorMessage)}});return}if(typeof e==typeof C){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new C,this.loadOptions()}};d.nextId=0,d.\u0275fac=function(i){return new(i||d)(c(ne),c(pe),c(U),c(me),c(de),c(re))},d.\u0275cmp=q({type:d,selectors:[["app-core-module-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:Me,decls:16,vars:19,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align: middle","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(i,t){if(i&1){let l=y();B(),a(0,"div",1),p(1,"app-progress-spinner",2),u(2,Se,2,3,"label",3),a(3,"span",4),u(4,Ce,2,4,"img",5),h(5," \xA0"),s(),p(6,"input",6),a(7,"mat-autocomplete",7,0),_("optionSelected",function(F){return v(l),I(t.onActionSelect(F.option.value))}),u(9,ve,4,4,"mat-option",8),M(10,"async"),s(),u(11,Ie,1,0,"i",9)(12,be,1,0,"i",10)(13,ye,1,0,"i",11)(14,_e,3,3,"em",12),H(15),s()}if(i&2){let l=G(8);r(),n("optionsInfoAreaId",t.constructorInfoAreaId),r(),n("ngIf",(t.optionLabel==null?null:t.optionLabel.length)>0),r(2),n("ngIf",t.dataModelSelect&&(t.dataModelSelect==null?null:t.dataModelSelect.linkMainImageIdSrc)),r(2),n("placeholder",g(t.optionPlaceholder))("id",A("app-cms-site-selector-",t.id))("formControl",t.formControl)("matAutocomplete",l)("required",t.optionRequired),j("disabled",t.optionDisabled?!0:null),r(),n("displayWith",t.displayFn),r(2),n("ngForOf",S(10,17,t.filteredOptions)),r(2),n("ngIf",!t.formControl.valid),r(),n("ngIf",t.optionRequired&&t.formControl.valid),r(),n("ngIf",(t.dataModelSelect==null?null:t.dataModelSelect.id)>0),r(),n("ngIf",t.optionRequired&&(!t.dataModelSelect||!t.dataModelSelect.id||t.dataModelSelect.id<=0))}},dependencies:[W,$,K,Q,Z,Y,ae,le,se,ee,te,ue,J,ce,fe],encapsulation:2});var he=d;export{he as a};
