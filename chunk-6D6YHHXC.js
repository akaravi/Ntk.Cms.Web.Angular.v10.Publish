import{a as he}from"./chunk-D4UKUU3U.js";import{a as fe}from"./chunk-YXO3YZK5.js";import{f as ue}from"./chunk-JFE6MAT6.js";import{A as ne,J as le,R as re,Z as ae,aa as se,ba as de,cc as pe,dc as me,gb as ce,n as te,q as ie,u as oe}from"./chunk-EFYREMMZ.js";import{Ab as h,Bb as z,Ca as A,Cb as U,F as P,Fa as l,Gd as X,Gf as g,Ha as B,I as V,Kb as W,Kd as u,Ld as Y,Mb as $,Oa as f,Od as S,P as N,Pb as T,Q as q,Qb as O,Rb as J,Sa as L,Sc as Q,Td as v,Yb as b,Zb as w,da as y,db as H,ea as I,fb as d,fc as C,gb as c,gc as M,ib as j,jb as G,kb as x,lb as a,mb as r,nb as s,ob as m,p as F,pe as Z,q as k,te as ee,vb as R,xc as K,yb as _}from"./chunk-UZHVWIGE.js";import{i as D}from"./chunk-SEDBTTTN.js";var Se=["*"];function ve(n,e){if(n&1&&(r(0,"label",3),T(1),s()),n&2){let t=h();a("for",w("app-cms-site-selector-",t.id)),l(),O(t.optionLabel)}}function be(n,e){if(n&1&&(m(0,"img",5),C(1,"cmsthumbnail")),n&2){let t=h();a("src",b(M(1,2,t.dataModelSelect==null?null:t.dataModelSelect.linkMainImageIdSrc)),A)}}function ge(n,e){if(n&1&&(m(0,"img",5),C(1,"cmsthumbnail")),n&2){let t=h().$implicit;a("src",b(M(1,2,t.linkMainImageIdSrc)),A)}}function ye(n,e){if(n&1&&(r(0,"mat-option",8),d(1,ge,2,4,"img",5),r(2,"span"),T(3),s()()),n&2){let t=e.$implicit,o=h();a("value",t)("disabled",o.optionDisabled),l(),c(t.linkMainImageIdSrc?1:-1),l(2),O(o.displayOption(t))}}function Ie(n,e){n&1&&m(0,"i",9)}function _e(n,e){n&1&&m(0,"i",10)}function Te(n,e){if(n&1){let t=R();r(0,"i",13),_("click",function(){y(t);let i=h();return I(i.onActionSelectClear())}),s()}}function Ae(n,e){n&1&&(r(0,"em"),T(1),C(2,"translate"),s()),n&2&&(l(),J("(",M(2,1,"TITLE.Necessary"),")"))}var p=class p{constructor(e,t,o,i,E){this.coreEnumService=e;this.translate=t;this.cdr=o;this.publicHelper=i;this.categoryService=E;this.id=++p.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new X;this.dataModelSelect=new g;this.formControl=new oe;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new B;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(N(""),P(1500),V(),q(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){return e?e.title+" # "+e.className:void 0}displayOption(e){return e?e.title+" # "+e.className:void 0}DataGetAll(e){return D(this,null,function*(){let t=new Y;if(t.rowPerPage=20,t.accessLoad=!0,e&&e.length>0){let i=new u;i=new u,i.propertyName="classname",i.value=e,i.searchType=v.Contains,i.clauseType=S.Or,t.filters.push(i),i=new u,i.propertyName="name",i.value=e,i.searchType=v.Contains,i.clauseType=S.Or,t.filters.push(i),i=new u,i.propertyName="email",i.value=e,i.searchType=v.Contains,i.clauseType=S.Or,t.filters.push(i),i=new u,i.propertyName="lastname",i.value=e,i.searchType=v.Contains,i.clauseType=S.Or,t.filters.push(i),e&&typeof+e=="number"&&+e>0&&(i=new u,i.propertyName="id",i.value=e,i.searchType=v.Equal,i.clauseType=S.Or,t.filters.push(i))}let o=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(o,i,this.constructorInfoAreaId)}),yield F(this.categoryService.ServiceGetAll(t)).then(i=>(this.dataModelResult=i,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(o),i.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(new g))}push(e){return this.filteredOptions.pipe(k(t=>(t.find(o=>o.id===e.id)||t.push(e),t)))}onActionSelectForce(e){if(typeof e=="number"&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(t=>t.id===e)){let t=this.dataModelResult.listItems.find(o=>o.id===e);this.dataModelSelect=t,this.formControl.setValue(t);return}this.categoryService.ServiceGetOneById(e).subscribe({next:t=>{t.isSuccess&&(this.filteredOptions=this.push(t.item),this.dataModelSelect=t.item,this.formControl.setValue(t.item),this.optionChange.emit(t.item))}});return}if(typeof e==typeof g){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new g,this.loadOptions()}};p.nextId=0,p.\u0275fac=function(t){return new(t||p)(f(Z),f(pe),f(K),f(ue),f(ee))},p.\u0275cmp=L({type:p,selectors:[["app-cms-module-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:Se,decls:18,vars:24,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],[1,"color-highlight",3,"for"],["matPrefix",""],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(t,o){if(t&1){let i=R();z(),r(0,"div",1),m(1,"app-progress-spinner",2),d(2,ve,2,3,"label",3),r(3,"span",4),d(4,be,2,4,"img",5),s(),m(5,"input",6),r(6,"mat-autocomplete",7,0),_("optionSelected",function(Me){return y(i),I(o.onActionSelect(Me.option.value))}),G(8,ye,4,4,"mat-option",8,j),C(10,"async"),s(),d(11,Ie,1,0,"i",9),d(12,_e,1,0,"i",10),d(13,Te,1,0,"i",11),r(14,"i",12),C(15,"translate"),_("click",function(){return y(i),I(o.onActionButtonReload())}),s(),d(16,Ae,3,3,"em"),U(17),s()}if(t&2){let i=W(7);l(),a("optionsInfoAreaId",o.constructorInfoAreaId),l(),c((o.optionLabel==null?null:o.optionLabel.length)>0?2:-1),l(2),c(o.dataModelSelect&&(o.dataModelSelect!=null&&o.dataModelSelect.linkMainImageIdSrc)?4:-1),l(),a("placeholder",b(o.optionPlaceholder))("id",w("app-cms-site-selector-",o.id))("formControl",o.formControl)("matAutocomplete",i)("required",o.optionRequired),H("disabled",o.optionDisabled?!0:null),l(),a("displayWith",o.displayFn),l(2),x(M(10,20,o.filteredOptions)),l(3),c(o.formControl.valid?-1:11),l(),c(o.optionRequired&&o.formControl.valid?12:-1),l(),c((o.dataModelSelect==null?null:o.dataModelSelect.id)>0?13:-1),l(),$("rotation360",o.publicHelper.processService.process.inRunArea[o.constructorInfoAreaId]),a("title",b(M(15,22,"ACTION.RELOAD"))),l(2),c(o.optionRequired&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)?16:-1)}},dependencies:[te,ie,le,ne,se,re,de,ae,ce,fe,Q,me,he],encapsulation:2});var Ce=p;export{Ce as a};
