import{a as ro}from"./chunk-T3Y4OV6A.js";import{a as ao}from"./chunk-MMMEEAH5.js";import{a as lo}from"./chunk-XWFZ3L2H.js";import{a as io}from"./chunk-IRWBZWX4.js";import{a as no}from"./chunk-GSBDZZET.js";import{c as oo}from"./chunk-TXMAWYCJ.js";import"./chunk-OB7J25NJ.js";import"./chunk-ACM67QOF.js";import"./chunk-7QIOMBNF.js";import"./chunk-K33TURJC.js";import{a as eo}from"./chunk-4APFVROB.js";import{a as to}from"./chunk-Y64PO4WT.js";import{a as $i}from"./chunk-JEF4OJ24.js";import{a as Ki}from"./chunk-A7IWA6ZF.js";import{d as Ji,e as Xi,f as Yi,h as Zi}from"./chunk-C4XZBUHP.js";import"./chunk-ZJV2NLHC.js";import{a as it}from"./chunk-P72UIZ6K.js";import{j as Ni,k as Fi,l as Hi}from"./chunk-G652V7Y4.js";import"./chunk-VBWJBSE3.js";import"./chunk-W6ZJBTW2.js";import{a as Wi,b as ji}from"./chunk-7SVXILIE.js";import{a as Ui}from"./chunk-JFG54H6M.js";import{a as zi}from"./chunk-VY3YGG4X.js";import{a as tt}from"./chunk-CPR24DPR.js";import{b as Qi}from"./chunk-3RHHJRHJ.js";import"./chunk-7DUNEHBM.js";import"./chunk-T2SWGMVG.js";import"./chunk-L6HCBEGV.js";import{a as et}from"./chunk-KW66JYE4.js";import{a as qi}from"./chunk-HGNWVODT.js";import{a as ee}from"./chunk-NKVVWISU.js";import{b as Bi,e as Oi,f as W}from"./chunk-JQRS7TAT.js";import{$a as Si,A as Xe,Ab as F,Ba as Se,Bb as q,Da as Y,Ia as si,Ja as ci,Ma as di,R as ai,Sa as pi,Ua as mi,Va as ui,Ya as fi,Za as Ci,_a as Mi,ab as hi,cb as gi,d as Wt,db as _i,eb as vi,f as jt,fb as Ii,g as Ut,gb as bi,hb as Ei,i as qt,ib as wi,j as Qt,jb as Ti,k as zt,kb as yi,la as li,lb as Ai,m as ii,ma as Ye,na as Ze,oa as $e,pc as Z,rb as xi,s as Je,sb as Ri,sc as $,tb as Di,ub as Pi,uc as H,v as oi,vb as ki,wc as Vi,x as ni,xb as Li,xc as Gi,y as ri}from"./chunk-YBRH5NGE.js";import{A as $t,B as ze,C as Ke,F as ei,G as ti,b as Kt,c as Ce,h as Me,i as We,k as je,l as Ue,m as qe,n as Qe,r as Jt,u as Xt,v as Yt,x as Zt}from"./chunk-QRBNL5ZA.js";import{$ as G,A as ut,D as ft,H as ne,K as Vt,Kn as X,Ub as Ht,Y as Gt,Z as N,_ as He,da as Bt,e as Pt,l as pt,la as Ot,lb as Ct,m as kt,mb as L,oa as Nt,p as Lt,q as B,u as J,v as j,y as mt,yb as Ft}from"./chunk-R3Y64ZOJ.js";import{Ab as I,Ad as Dt,Cb as ce,Db as de,Dc as h,Eb as pe,Ec as g,Fb as p,Fc as xt,Gb as l,Hb as s,Ib as _,K as bt,Mb as w,Nb as T,O as Et,Ob as Ge,Pb as E,Sb as b,Ub as m,Va as r,Vb as yt,Wb as At,Xa as Q,Xc as O,Yb as Be,Z as wt,Zb as Oe,_ as Tt,_b as Ne,cb as C,cc as D,dc as z,ec as K,ga as ke,hc as c,ib as V,ic as y,jb as Le,jc as M,ld as ue,mb as se,nc as A,ob as P,oc as x,pa as u,pc as R,qa as f,rd as fe,s as vt,t as It,tc as k,td as Rt,uc as dt,xb as Ve,xc as Fe,yc as me,zb as v}from"./chunk-2AL2II5Z.js";import{i as le}from"./chunk-SEDBTTTN.js";var he=class he{constructor(){this.constructorInfoAreaId=this.constructor.name}ngOnInit(){}};he.\u0275fac=function(e){return new(e||he)},he.\u0275cmp=V({type:he,selectors:[["app-core-user"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&_(0,"router-outlet")},dependencies:[Pt],encapsulation:2});var ot=he;function Co(o,n){if(o&1){let e=E();l(0,"li")(1,"mat-checkbox",0),b("change",function(){let t=u(e).$implicit,a=m();return f(a.onActionSelect(t))}),c(2),s()()}if(o&2){let e=n.$implicit,i=m();r(),p("checked",i.fieldsStatus.get(e.id))("disabled",i.optionDisabled),r(),M(" ",e.title," ")}}var _e=class _e{constructor(n,e,i,t,a,S){this.coreEnumService=n;this.categoryService=e;this.cdr=i;this.publicHelper=t;this.translate=a;this.cmsToastrService=S;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new B;this.dataModelSelect=[];this.dataIdsSelect=[];this.formControl=new Ue;this.fieldsStatus=new Map;this.optionDisabled=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionChange=new Q;this.optionSelectAdded=new Q;this.optionSelectRemoved=new Q;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){this.DataGetAll()}DataGetAll(){let n=new j;n.rowPerPage=50,n.accessLoad=!0;let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAll(n).subscribe({next:i=>{i.isSuccess?(this.dataModelResult=i,this.dataModelResult.listItems.forEach(t=>this.fieldsStatus.set(t.id,!1)),this.dataIdsSelect.forEach(t=>this.fieldsStatus.set(t,!0)),this.dataModelResult.listItems.forEach(t=>{this.fieldsStatus.get(t.id)&&this.dataModelSelect.push(t)})):this.cmsToastrService.typeErrorMessage(i.errorMessage),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionSelect(n){this.fieldsStatus.get(n.id)?(this.fieldsStatus.set(n.id,!1),this.optionSelectRemoved.emit(n),this.dataModelSelect.splice(this.dataModelSelect.indexOf(n),1)):(this.fieldsStatus.set(n.id,!0),this.optionSelectAdded.emit(n),this.dataModelSelect.push(n)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(n){typeof n==typeof Array(Number)?n.forEach(e=>{this.dataIdsSelect.push(e)}):typeof n==typeof Array(Ft)&&n.forEach(e=>{this.dataIdsSelect.push(e.id)}),this.dataIdsSelect.forEach(e=>this.fieldsStatus.set(e,!0))}onActionButtonReload(){this.DataGetAll()}};_e.\u0275fac=function(e){return new(e||_e)(C(G),C(Nt),C(O),C(W),C(F),C(H))},_e.\u0275cmp=V({type:_e,selectors:[["app-core-usergroup-selectionlist"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},standalone:!1,decls:3,vars:0,consts:[[3,"change","checked","disabled"]],template:function(e,i){e&1&&(l(0,"ul"),de(1,Co,3,3,"li",null,ce),s()),e&2&&(r(),pe(i.dataModelResult.listItems))},dependencies:[ai],encapsulation:2});var nt=_e;var So=["*"];function ho(o,n){if(o&1&&(l(0,"label",3),c(1),s()),o&2){let e=m();p("for",dt("app-cms-site-selector-",e.id)),r(),y(e.optionLabel)}}function go(o,n){if(o&1&&(l(0,"mat-option",6)(1,"span"),c(2),s()()),o&2){let e=n.$implicit,i=m();p("value",e)("disabled",i.optionDisabled),r(2),y(i.displayOption(e))}}function _o(o,n){o&1&&_(0,"i",7)}function vo(o,n){o&1&&_(0,"i",8)}function Io(o,n){if(o&1){let e=E();l(0,"i",11),b("click",function(){u(e);let t=m();return f(t.onActionSelectClear())}),s()}}function bo(o,n){o&1&&(l(0,"em"),c(1),h(2,"translate"),s()),o&2&&(r(),M("(",g(2,1,"TITLE.Necessary"),")"))}var ie=class ie{constructor(n,e,i,t,a,S){this.coreEnumService=n;this.cmsToastrService=e;this.cdr=i;this.publicHelper=t;this.translate=a;this.categoryService=S;this.id=++ie.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new B;this.dataModelSelect=new L;this.formControl=new Ue;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new Q;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(wt(""),bt(1500),Et(),Tt(n=>typeof n=="string"||typeof n=="number"?this.DataGetAll(n||""):[]))}displayFn(n){return n?n.titleML:void 0}displayOption(n){return n?n.titleML:void 0}DataGetAll(n){return le(this,null,function*(){let e=new j;e.rowPerPage=20,e.accessLoad=!0;let i=new J;i.propertyName="title",i.value=n,i.searchType=ft.Contains,i.clauseType=mt.Or,e.filters.push(i),n&&typeof+n=="number"&&+n>0&&(i=new J,i.propertyName="id",i.value=n,i.searchType=ft.Equal,i.clauseType=mt.Or,e.filters.push(i));let t=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(a=>{this.publicHelper.processService.processStart(t,a,this.constructorInfoAreaId)}),yield vt(this.categoryService.ServiceGetAll(e)).then(a=>(this.dataModelResult=a,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(t),a.listItems))})}onActionSelect(n){this.dataModelSelect=n,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(n){return this.filteredOptions.pipe(It(e=>(e.find(i=>i.id===n.id)||e.push(n),e)))}onActionSelectForce(n){if(typeof n=="number"&&n>0){if(this.dataModelSelect&&this.dataModelSelect.id===n)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===n)){let e=this.dataModelResult.listItems.find(i=>i.id===n);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(n).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof n==typeof L){this.filteredOptions=this.push(n),this.dataModelSelect=n,this.formControl.setValue(n);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new L,this.loadOptions()}};ie.nextId=0,ie.\u0275fac=function(e){return new(e||ie)(C(G),C(H),C(O),C(W),C(F),C(N))},ie.\u0275cmp=V({type:ie,selectors:[["app-core-cpmainmenu-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:So,decls:16,vars:23,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],[1,"color-highlight",3,"for"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,i){if(e&1){let t=E();yt(),l(0,"div",1),_(1,"app-progress-spinner",2),v(2,ho,2,3,"label",3),_(3,"input",4),l(4,"mat-autocomplete",5,0),b("optionSelected",function(S){return u(t),f(i.onActionSelect(S.option.value))}),de(6,go,3,3,"mat-option",6,ce),h(8,"async"),s(),v(9,_o,1,0,"i",7),v(10,vo,1,0,"i",8),v(11,Io,1,0,"i",9),l(12,"i",10),h(13,"translate"),b("click",function(){return u(t),f(i.onActionButtonReload())}),s(),v(14,bo,3,3,"em"),At(15),s()}if(e&2){let t=D(5);r(),p("optionsInfoAreaId",i.constructorInfoAreaId),r(),I((i.optionLabel==null?null:i.optionLabel.length)>0?2:-1),r(),p("placeholder",k(i.optionPlaceholder))("id",dt("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),Ve("disabled",i.optionDisabled?!0:null),r(),p("displayWith",i.displayFn),r(2),pe(g(8,19,i.filteredOptions)),r(3),I(i.formControl.valid?-1:9),r(),I(i.optionRequired&&i.formControl.valid?10:-1),r(),I((i.dataModelSelect==null?null:i.dataModelSelect.id)>0?11:-1),r(),K("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),p("title",k(g(13,21,"ACTION.RELOAD"))),r(2),I(i.optionRequired&&!((i.dataModelSelect==null?null:i.dataModelSelect.id)>0)?14:-1)}},dependencies:[Ce,Me,$t,Jt,ni,ii,ri,Y,ee,Rt,q],encapsulation:2});var ve=ie;var yo=["vform"],Ao=o=>({direction:o}),xo=()=>["fa"];function Ro(o,n){if(o&1){let e=E();l(0,"app-cms-enum-record-status-selector",34),R("modelChange",function(t){u(e);let a=m();return x(a.dataModel.recordStatus,t)||(a.dataModel.recordStatus=t),f(t)}),s()}if(o&2){let e=m();A("model",e.dataModel.recordStatus),p("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function Do(o,n){if(o&1&&(l(0,"mat-error"),c(1),l(2,"strong"),c(3),h(4,"translate"),s()()),o&2){let e=m(2);r(),M(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),r(2),y(g(4,2,"MESSAGE.required"))}}function Po(o,n){if(o&1){let e=E();l(0,"div",20)(1,"label",35),c(2),s(),l(3,"input",36,3),R("ngModelChange",function(t){u(e);let a=m();return x(a.dataModel.title,t)||(a.dataModel.title=t),f(t)}),s(),l(5,"em"),c(6),s(),v(7,Do,5,4,"mat-error"),s()}if(o&2){let e=D(4),i=m();r(2),y(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle),r(),p("placeholder",k(i.fieldsInfo.title==null?null:i.fieldsInfo.title.fieldTitle)),A("ngModel",i.dataModel.title),p("disabled",!(i.fieldsInfo.title!=null&&i.fieldsInfo.title.accessEditField)),r(3),M("",e.value.length," / 100"),r(),I(e.errors!=null&&e.errors.required?7:-1)}}function ko(o,n){o&1&&(l(0,"mat-error"),c(1," TitleResourceLanguage is "),l(2,"strong"),c(3),h(4,"translate"),s()()),o&2&&(r(3),y(g(4,1,"MESSAGE.required")))}function Lo(o,n){if(o&1){let e=E();l(0,"div",20)(1,"label",37),c(2),s(),l(3,"input",38,4),R("ngModelChange",function(t){u(e);let a=m();return x(a.dataModel.title,t)||(a.dataModel.title=t),f(t)}),s(),l(5,"em"),c(6),s(),v(7,ko,5,3,"mat-error"),s()}if(o&2){let e=D(4),i=m();r(2),y(i.fieldsInfo.titleResourceLanguage==null?null:i.fieldsInfo.titleResourceLanguage.fieldTitle),r(),p("placeholder",k(i.fieldsInfo.titleResourceLanguage==null?null:i.fieldsInfo.titleResourceLanguage.fieldTitle)),A("ngModel",i.dataModel.title),p("disabled",!(i.fieldsInfo.titleResourceLanguage!=null&&i.fieldsInfo.titleResourceLanguage.accessEditField)),r(3),M("",e.value.length," / 100"),r(),I(e.errors!=null&&e.errors.required?7:-1)}}function Vo(o,n){if(o&1&&(l(0,"option",24),c(1),s()),o&2){let e=n.$implicit;p("value",e.value),r(),M(" ",e.description," ")}}function Go(o,n){if(o&1){let e=E();l(0,"div",20)(1,"label",39),c(2),s(),l(3,"input",40,5),R("ngModelChange",function(t){u(e);let a=m();return x(a.dataModel.routeAddressLink,t)||(a.dataModel.routeAddressLink=t),f(t)}),s(),l(5,"em"),c(6),s()()}if(o&2){let e=D(4),i=m();r(2),y(i.fieldsInfo.routeAddressLink==null?null:i.fieldsInfo.routeAddressLink.fieldTitle),r(),p("placeholder",k(i.fieldsInfo.routeAddressLink==null?null:i.fieldsInfo.routeAddressLink.fieldTitle)),A("ngModel",i.dataModel.routeAddressLink),p("disabled",!(i.fieldsInfo.routeAddressLink!=null&&i.fieldsInfo.routeAddressLink.accessEditField)),r(3),M("",e.value.length," / 100")}}function Bo(o,n){if(o&1){let e=E();l(0,"div",25)(1,"div",41)(2,"h5",42),c(3),s()(),l(4,"div",43)(5,"div",44)(6,"input",45),R("ngModelChange",function(t){u(e);let a=m();return x(a.dataModel.routeAddressBlankPage,t)||(a.dataModel.routeAddressBlankPage=t),f(t)}),s(),_(7,"label",46),s()()()}if(o&2){let e=m();r(3),M(" ",e.fieldsInfo.routeAddressBlankPage==null?null:e.fieldsInfo.routeAddressBlankPage.fieldTitle," "),r(3),A("ngModel",e.dataModel.routeAddressBlankPage)}}function Oo(o,n){if(o&1){let e=E();l(0,"div",26)(1,"label",47),c(2),s(),l(3,"input",48),R("ngModelChange",function(t){u(e);let a=m();return x(a.dataModel.color,t)||(a.dataModel.color=t),f(t)}),s(),_(4,"ngx-mat-color-toggle",49)(5,"ngx-mat-color-picker",50,6),s()}if(o&2){let e=D(6),i=m();r(2),y(i.fieldsInfo.routeAddressLink==null?null:i.fieldsInfo.routeAddressLink.fieldTitle),r(),z("background",i.dataModel.color),p("placeholder",k(i.fieldsInfo.color==null?null:i.fieldsInfo.color.fieldTitle))("ngxMatColorPicker",e),A("ngModel",i.dataModel.color),p("disabled",!(i.fieldsInfo.color!=null&&i.fieldsInfo.color.accessEditField)),r(),p("for",e),r(),p("color","primary")}}function No(o,n){if(o&1&&(l(0,"mat-error"),c(1),l(2,"strong"),c(3),h(4,"translate"),s()()),o&2){let e=m(2);r(),M(" ",e.fieldsInfo.icon==null?null:e.fieldsInfo.icon.fieldTitle," "),r(2),y(g(4,2,"MESSAGE.required"))}}function Fo(o,n){if(o&1){let e=E();l(0,"div",20)(1,"label",51),c(2),s(),l(3,"input",52,7),b("iconPickerSelect",function(t){u(e);let a=m();return f(a.onIconPickerSelect(t))}),R("ngModelChange",function(t){u(e);let a=m();return x(a.dataModel.icon,t)||(a.dataModel.icon=t),f(t)}),s(),l(5,"em",53),_(6,"i",54),s(),v(7,No,5,4,"mat-error"),s()}if(o&2){let e=D(4),i=m();r(2),y(i.fieldsInfo.icon==null?null:i.fieldsInfo.icon.fieldTitle),r(),p("placeholder",k(i.fieldsInfo.icon==null?null:i.fieldsInfo.icon.fieldTitle))("iconPicker",i.dataModel.icon)("ipPosition","top")("ipIconPack",Fe(13,xo))("ipWidth","250px"),A("ngModel",i.dataModel.icon),p("disabled",!(i.fieldsInfo.icon!=null&&i.fieldsInfo.icon.accessEditField)),r(3),z("color",i.dataModel.color?i.dataModel.color:null),p("ngClass",i.dataModel.icon),r(),I(e.errors!=null&&e.errors.required?7:-1)}}function Ho(o,n){if(o&1){let e=E();l(0,"div",20)(1,"label",55),c(2),s(),l(3,"input",56,8),R("ngModelChange",function(t){u(e);let a=m();return x(a.dataModel.showInMenuOrder,t)||(a.dataModel.showInMenuOrder=t),f(t)}),s()()}if(o&2){let e=m();r(2),y(e.fieldsInfo.showInMenuOrder==null?null:e.fieldsInfo.showInMenuOrder.fieldTitle),r(),p("placeholder",k(e.fieldsInfo.showInMenuOrder==null?null:e.fieldsInfo.showInMenuOrder.fieldTitle)),A("ngModel",e.dataModel.showInMenuOrder),p("disabled",!(e.fieldsInfo.showInMenuOrder!=null&&e.fieldsInfo.showInMenuOrder.accessEditField))}}function Wo(o,n){o&1&&(l(0,"mat-error"),c(1," Description is "),l(2,"strong"),c(3),h(4,"translate"),s()()),o&2&&(r(3),y(g(4,1,"MESSAGE.required")))}function jo(o,n){if(o&1){let e=E();l(0,"div",20)(1,"label",57),c(2),s(),l(3,"textarea",58,9),R("ngModelChange",function(t){u(e);let a=m();return x(a.dataModel.description,t)||(a.dataModel.description=t),f(t)}),c(5,"              "),s(),l(6,"em"),c(7),s(),v(8,Wo,5,3,"mat-error"),s()}if(o&2){let e=D(4),i=m();r(2),y(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle),r(),p("placeholder",k(i.fieldsInfo.description==null?null:i.fieldsInfo.description.fieldTitle)),A("ngModel",i.dataModel.description),r(4),M("",e.value.length," / 500"),r(),I(e.errors!=null&&e.errors.required?8:-1)}}function Uo(o,n){if(o&1){let e=E();l(0,"div",27)(1,"button",59),b("click",function(){u(e);let t=m();return f(t.onFormCancel())}),c(2),h(3,"translate"),s(),l(4,"button",60),c(5),h(6,"translate"),s()()}if(o&2){m();let e=D(10);r(2),M(" ",g(3,3,"ACTION.BACK")," "),r(2),p("disabled",!e.form.valid),r(),M(" ",g(6,5,"ACTION.NEXT")," ")}}function qo(o,n){if(o&1){let e=E();l(0,"div",25)(1,"div",41)(2,"h5",61),c(3),s()(),l(4,"div",43)(5,"div",44)(6,"input",62),R("ngModelChange",function(t){u(e);let a=m();return x(a.dataModel.showInMenu,t)||(a.dataModel.showInMenu=t),f(t)}),s(),_(7,"label",63),s()()()}if(o&2){let e=m();r(3),M(" ",e.fieldsInfo.showInMenu==null?null:e.fieldsInfo.showInMenu.fieldTitle," "),r(3),A("ngModel",e.dataModel.showInMenu)}}function Qo(o,n){if(o&1){let e=E();l(0,"div",25)(1,"div",41)(2,"h5",64),c(3),s()(),l(4,"div",43)(5,"div",44)(6,"input",65),R("ngModelChange",function(t){u(e);let a=m();return x(a.dataModel.showInAccessAdminAllowToProfessionalData,t)||(a.dataModel.showInAccessAdminAllowToProfessionalData=t),f(t)}),s(),_(7,"label",66),s()()()}if(o&2){let e=m();r(3),M(" ",e.fieldsInfo.showInAccessAdminAllowToProfessionalData==null?null:e.fieldsInfo.showInAccessAdminAllowToProfessionalData.fieldTitle," "),r(3),A("ngModel",e.dataModel.showInAccessAdminAllowToProfessionalData)}}function zo(o,n){if(o&1&&(l(0,"div",27)(1,"button",67),c(2),h(3,"translate"),s(),l(4,"button",68),c(5),h(6,"translate"),s()()),o&2){m();let e=D(10);r(2),M(" ",g(3,3,"ACTION.BEFOR")," "),r(2),p("disabled",!e.form.valid),r(),M(" ",g(6,5,"ACTION.SAVE")," ")}}function Ko(o,n){o&1&&(l(0,"mat-icon"),c(1,"call_end"),s())}function Jo(o,n){o&1&&(l(0,"mat-icon"),c(1,"call_end"),s())}function Xo(o,n){o&1&&(l(0,"mat-icon"),c(1,"forum"),s())}function Yo(o,n){o&1&&(l(0,"mat-icon"),c(1,"forum"),s())}var Ie=class Ie extends Ki{constructor(e,i,t,a,S,d,U,De,ct,Pe,uo){super(a,new L,U,Pe);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreCpMainMenuService=a;this.coreCpMainMenuCmsUserGroupService=S;this.cmsToastrService=d;this.publicHelper=U;this.cmsStoreService=De;this.cdr=ct;this.translate=Pe;this.tokenHelper=uo;this.requestId=0;this.constructorInfoAreaId=this.constructor.name;this.appLanguage="fa";this.dataModelResult=new Lt;this.dataModel=new L;this.dataModelEnumMenuPlaceTypeResult=new B;this.fileManagerOpenForm=!1;this.dataCoreCpMainMenuIds=[];this.publicHelper.processService.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore}ngOnInit(){if(this.requestId>0)this.translate.get("TITLE.Edit").subscribe(e=>{this.formInfo.formTitle=e}),this.DataGetOneContent();else{this.cmsToastrService.typeErrorComponentAction(),this.dialogRef.close({dialogChangedDate:!1});return}this.getEnumMenuPlaceType()}getEnumMenuPlaceType(){this.coreEnumService.ServiceMenuPlaceTypeEnum().subscribe({next:e=>{this.dataModelEnumMenuPlaceTypeResult=e}})}DataGetOneContent(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Receiving_Information_From_The_Server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreCpMainMenuService.setAccessLoad(),this.coreCpMainMenuService.setAccessDataType(Vt.Editor),this.coreCpMainMenuService.ServiceGetOneById(this.requestId).subscribe({next:i=>{this.dataAccessModel=i.access,this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModel=i.item,i.isSuccess?(this.DataGetAllMenuCoreUserGroup(),this.formInfo.formTitle=this.formInfo.formTitle+" "+i.item.title,this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}DataGetAllMenuCoreUserGroup(){if(this.requestId<=0){this.cmsToastrService.typeErrorEditRowIsNull();return}this.translate.get("MESSAGE.Getting_access_category_from_the_server").subscribe(a=>{this.formInfo.submitResultMessage=a}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(a=>{this.publicHelper.processService.processStart(e,a,this.constructorInfoAreaId)});let i=new j,t=new J;t.propertyName="CmsCpMainMenu_Id",t.value=this.requestId,i.filters.push(t),this.coreCpMainMenuCmsUserGroupService.ServiceGetAll(i).subscribe({next:a=>{this.dataCoreCpMainMenuCmsUserGroupModel=a.listItems;let S=[];this.dataCoreCpMainMenuCmsUserGroupModel.forEach(d=>{S.push(d.cmsUserGroup_Id)}),this.dataCoreCpMainMenuIds=S,a.isSuccess?(this.formInfo.submitResultMessage="",this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(d=>{this.formInfo.submitResultMessage=d}),this.formInfo.submitResultMessage=a.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(a.errorMessage)),this.publicHelper.processService.processStop(e)},error:a=>{this.cmsToastrService.typeError(a),this.publicHelper.processService.processStop(e,!1)}})}DataEditContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)});this.dataModel.color=this.dataModel.color?.toString(),this.coreCpMainMenuService.ServiceEdit(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}onStepClick(e,i){e.previouslySelectedIndex<e.selectedIndex&&(this.formGroup.valid||(this.cmsToastrService.typeErrorFormInvalid(),setTimeout(()=>{i.selectedIndex=e.previouslySelectedIndex},10)))}onActionSelectorModuleSelect(e){this.dataModel.linkModuleId=null,e&&e.id>0&&(this.dataModel.linkModuleId=e.id)}onActionSelectorSelect(e){this.dataModel.linkParentId=null,e&&e.id>0&&(this.dataModel.linkParentId=e.id)}onActionSelectorUserCategorySelect(e){this.dataCoreCpMainMenuModel=e}onActionSelectorUserCategorySelectAdded(e){let i=new Ct;i.cmsUserGroup_Id=e.id,i.cmsCpMainMenu_Id=this.dataModel.id,this.coreCpMainMenuCmsUserGroupService.ServiceAdd(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.registration_in_this_group_was_successful").subscribe(a=>{this.formInfo.submitResultMessage=a}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(a=>{this.formInfo.submitResultMessage=a}),this.formInfo.submitResultMessage=t.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(t)}})}onActionSelectorUserCategorySelectRemoved(e){let i=new Ct;i.cmsUserGroup_Id=e.id,i.cmsCpMainMenu_Id=this.dataModel.id,this.coreCpMainMenuCmsUserGroupService.ServiceDeleteEntity(i).subscribe({next:t=>{t.isSuccess?(this.translate.get("MESSAGE.Deletion_from_this_group_Was_Successful").subscribe(a=>{this.formInfo.submitResultMessage=a}),this.cmsToastrService.typeSuccessEdit()):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(a=>{this.formInfo.submitResultMessage=a}),this.formInfo.submitResultMessage=t.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(t.errorMessage))},error:t=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(t)}})}onIconPickerSelect(e){this.dataModel.icon=e}};Ie.\u0275fac=function(i){return new(i||Ie)(C(Ze),C(Ye),C(G),C(N),C(He),C(H),C(W),C(Z),C(O),C(F),C($))},Ie.\u0275cmp=V({type:Ie,selectors:[["app-core-user-edit"]],viewQuery:function(i,t){if(i&1&&Be(yo,5),i&2){let a;Oe(a=Ne())&&(t.formGroup=a.first)}},standalone:!1,features:[se],decls:52,vars:51,consts:[["vform","ngForm"],["stepper",""],["MenuPlaceType","ngModel"],["Title",""],["TitleResourceLanguage",""],["RouteAddressLink",""],["colorPicker",""],["icon",""],["ShowInMenuOrder",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit","ngStyle"],[3,"selectionChange"],["state","main",3,"label"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.titleML",1,"color-highlight"],["matInput","","type","text","cmsKeyboardForce","en","name","dataModel.titleML","id","dataModel.titleML",1,"form-control","validate-name",3,"ngModelChange","ngModel","disabled"],["id","dataModel.menuPlaceType","name","dataModel.menuPlaceType",1,"form-control","validate-name",3,"ngModelChange","ngModel"],[3,"value"],[1,"d-flex","mb-3"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4","cms-input-group"],[1,"form-actions"],["state","seo",3,"label"],[3,"optionChange","optionSelectAdded","optionSelectRemoved","optionSelectForce","optionDisabled"],["matStepperIcon","main"],["matStepperIcon","seo"],["matStepperIcon","file"],["matStepperIcon","loaction"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.titleResourceLanguage",1,"color-highlight"],["matInput","","type","text","name","dataModel.titleResourceLanguage","minlength","3","maxlength","100","id","dataModel.titleResourceLanguage",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.routeAddressLink",1,"color-highlight"],["matInput","","type","text","name","dataModel.routeAddressLink","minlength","3","maxlength","100","id","dataModel.routeAddressLink",1,"form-control","validate-name","input-ltr",3,"ngModelChange","ngModel","placeholder","disabled"],[1,"pt-1"],["data-trigger-switch","dataModel.routeAddressBlankPage",1,"font-600","font-14"],[1,"ms-auto","me-3","pe-2"],[1,"custom-control","ios-switch","small-switch"],["type","checkbox","id","dataModel.routeAddressBlankPage","name","dataModel.routeAddressBlankPage",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.routeAddressBlankPage",1,"custom-control-label"],["for","dataModel.color",1,"color-highlight"],["matInput","","name","colorPicker.color","id","dataModel.color",1,"form-control","validate-name",3,"ngModelChange","ngxMatColorPicker","ngModel","placeholder","disabled"],["matSuffix","",3,"for"],["touchUi","",3,"color"],["for","dataModel.icon",1,"color-highlight"],["matInput","","type","text","name","dataModel.icon","id","dataModel.icon","ipButtonStyleClass","",1,"form-control","validate-name",3,"iconPickerSelect","ngModelChange","iconPicker","ipPosition","ipIconPack","ipWidth","ngModel","placeholder","disabled"],[2,"opacity","1 !important"],[2,"font-size","20px !important",3,"ngClass"],["for","dataModel.showInMenuOrder",1,"color-highlight"],["matInput","","type","text","name","dataModel.showInMenuOrder","id","dataModel.showInMenuOrder",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder","disabled"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],["type","button","matStepperNext","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-blue",3,"disabled"],["data-trigger-switch","dataModel.showInMenu",1,"font-600","font-14"],["type","checkbox","id","dataModel.showInMenu","name","dataModel.showInMenu",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.showInMenu",1,"custom-control-label"],["data-trigger-switch","dataModel.showInAccessAdminAllowToProfessionalData",1,"font-600","font-14"],["type","checkbox","id","dataModel.showInAccessAdminAllowToProfessionalData","name","dataModel.showInAccessAdminAllowToProfessionalData",1,"ios-input",3,"ngModelChange","ngModel"],["for","dataModel.showInAccessAdminAllowToProfessionalData",1,"custom-control-label"],["type","button","matStepperPrevious","",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"]],template:function(i,t){if(i&1){let a=E();l(0,"div",10),_(1,"app-progress-spinner",11),l(2,"div",12)(3,"p",13),c(4),s(),l(5,"p"),c(6),h(7,"translate"),s(),_(8,"app-cms-form-result-message",14),l(9,"form",15,0),b("ngSubmit",function(){return u(a),f(t.onFormSubmit())}),l(11,"mat-vertical-stepper",16,1),b("selectionChange",function(d){u(a);let U=D(12);return f(t.onStepClick(d,U))}),l(13,"mat-step",17),h(14,"translate"),v(15,Ro,1,5,"app-cms-enum-record-status-selector",18),l(16,"app-core-cpmainmenu-selector",19),h(17,"translate"),b("optionChange",function(d){return u(a),f(t.onActionSelectorSelect(d))}),s(),v(18,Po,8,7,"div",20),l(19,"div",20)(20,"label",21),c(21),h(22,"translate"),s(),l(23,"input",22),R("ngModelChange",function(d){return u(a),x(t.dataModel.titleML,d)||(t.dataModel.titleML=d),f(d)}),s()(),v(24,Lo,8,7,"div",20),l(25,"div",20)(26,"select",23,2),R("ngModelChange",function(d){return u(a),x(t.dataModel.menuPlaceType,d)||(t.dataModel.menuPlaceType=d),f(d)}),de(28,Vo,2,2,"option",24,ce),s()(),v(30,Go,7,6,"div",20),v(31,Bo,8,2,"div",25),v(32,Oo,7,10,"div",26),v(33,Fo,8,14,"div",20),v(34,Ho,5,5,"div",20),v(35,jo,9,6,"div",20),v(36,Uo,7,7,"div",27),s(),l(37,"mat-step",28),h(38,"translate"),l(39,"p"),c(40),h(41,"translate"),s(),v(42,qo,8,2,"div",25),v(43,Qo,8,2,"div",25),l(44,"app-core-module-selector",19),h(45,"translate"),b("optionChange",function(d){return u(a),f(t.onActionSelectorModuleSelect(d))}),s(),l(46,"app-core-usergroup-selectionlist",29),b("optionChange",function(d){return u(a),f(t.onActionSelectorUserCategorySelect(d))})("optionSelectAdded",function(d){return u(a),f(t.onActionSelectorUserCategorySelectAdded(d))})("optionSelectRemoved",function(d){return u(a),f(t.onActionSelectorUserCategorySelectRemoved(d))}),s(),v(47,zo,7,7,"div",27),s(),P(48,Ko,2,0,"ng-template",30)(49,Jo,2,0,"ng-template",31)(50,Xo,2,0,"ng-template",32)(51,Yo,2,0,"ng-template",33),s()()()()}i&2&&(r(),p("optionsInfoAreaId",t.constructorInfoAreaId),r(3),M(" ",t.formInfo.formTitle," "),r(2),M(" ",g(7,35,"TITLE.Be_Careful_When_Entering_Information")," "),r(2),p("formInfo",t.formInfo),r(),p("ngStyle",me(49,Ao,t.tokenInfo.access.direction)),r(4),p("label",k(g(14,37,"TITLE.Menu_Profile"))),r(2),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?15:-1),r(),p("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",g(17,39,"TITLE.Parent_Menu")),r(2),I(t.fieldsInfo.title!=null&&t.fieldsInfo.title.accessWatchField?18:-1),r(3),y(g(22,41,"TITLE.TitleML")),r(2),A("ngModel",t.dataModel.titleML),p("disabled",!0),r(),I(t.fieldsInfo.titleResourceLanguage!=null&&t.fieldsInfo.titleResourceLanguage.accessWatchField?24:-1),r(2),A("ngModel",t.dataModel.menuPlaceType),r(2),pe(t.dataModelEnumMenuPlaceTypeResult.listItems),r(2),I(t.fieldsInfo.routeAddressLink!=null&&t.fieldsInfo.routeAddressLink.accessWatchField?30:-1),r(),I(t.fieldsInfo.routeAddressBlankPage!=null&&t.fieldsInfo.routeAddressBlankPage.accessWatchField?31:-1),r(),I(t.fieldsInfo.color!=null&&t.fieldsInfo.color.accessWatchField?32:-1),r(),I(t.fieldsInfo.icon!=null&&t.fieldsInfo.icon.accessWatchField?33:-1),r(),I(t.fieldsInfo.showInMenuOrder!=null&&t.fieldsInfo.showInMenuOrder.accessWatchField?34:-1),r(),I(t.fieldsInfo.description!=null&&t.fieldsInfo.description.accessWatchField?35:-1),r(),I(t.formInfo.submitButtonEnabled?36:-1),r(),p("label",k(g(38,43,"TITLE.ACEESS"))),r(3),y(g(41,45,"TITLE.Specify_access_to_this_content")),r(2),I(t.fieldsInfo.showInMenu!=null&&t.fieldsInfo.showInMenu.accessWatchField?42:-1),r(),I(t.fieldsInfo.showInAccessAdminAllowToProfessionalData!=null&&t.fieldsInfo.showInAccessAdminAllowToProfessionalData.accessWatchField?43:-1),r(),p("optionDisabled",!1)("optionSelectForce",t.dataModel.linkModuleId)("optionPlaceholder",g(45,47,"TITLE.MODULE")),r(2),p("optionSelectForce",t.dataCoreCpMainMenuIds)("optionDisabled",!1),r(),I(t.formInfo.submitButtonEnabled?47:-1))},dependencies:[ue,fe,Qe,Yt,Zt,Ce,Kt,Xt,Me,We,ze,Ke,qe,je,Je,oi,Se,Y,Ci,Mi,Si,hi,fi,tt,ee,et,zi,qi,ao,nt,Hi,Fi,Ni,Wi,ve,q],encapsulation:2});var oe=Ie;var Zo=["vform"],$o=o=>({direction:o});function en(o,n){if(o&1){let e=E();l(0,"app-cms-enum-record-status-selector",17),R("modelChange",function(t){u(e);let a=m();return x(a.dataModel.recordStatus,t)||(a.dataModel.recordStatus=t),f(t)}),s()}if(o&2){let e=m();A("model",e.dataModel.recordStatus),p("optionDisabled",!1)("optionLabel",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle)("optionRequired",!0)("optionSelectFirstItem",!0)}}function tn(o,n){if(o&1&&(l(0,"mat-error"),c(1),l(2,"strong"),c(3),h(4,"translate"),s()()),o&2){let e=m();r(),M(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle," is "),r(2),y(g(4,2,"MESSAGE.required"))}}function on(o,n){o&1&&(l(0,"mat-error"),c(1," Description is "),l(2,"strong"),c(3),h(4,"translate"),s()()),o&2&&(r(3),y(g(4,1,"MESSAGE.required")))}function nn(o,n){if(o&1){let e=E();l(0,"div",16)(1,"button",18),b("click",function(){u(e);let t=m();return f(t.onFormCancel())}),_(2,"i",19),c(3),h(4,"translate"),s(),l(5,"button",20),_(6,"i",21),c(7),h(8,"translate"),s()()}if(o&2){m();let e=D(10);r(3),M(" ",g(4,3,"ACTION.CANCEL")," "),r(2),p("disabled",!e.form.valid),r(2),M(" ",g(8,5,"ACTION.SAVE")," ")}}var be=class be extends Ui{constructor(e,i,t,a,S,d,U,De,ct,Pe){super(a,new L,S,ct);this.data=e;this.dialogRef=i;this.coreEnumService=t;this.coreCpMainMenuService=a;this.publicHelper=S;this.cmsToastrService=d;this.cmsStoreService=U;this.cdr=De;this.translate=ct;this.tokenHelper=Pe;this.requestParentId=0;this.constructorInfoAreaId=this.constructor.name;this.fieldsInfo=new Map;this.dataModelResult=new B;this.dataModel=new L;this.dataModelEnumMenuPlaceTypeResult=new B;this.fileManagerOpenForm=!1;this.tokenInfo=new Ht;this.publicHelper.processService.cdr=this.cdr,e&&(this.requestParentId=+e.parentId||0),this.requestParentId>0&&(this.dataModel.linkParentId=this.requestParentId),this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore}ngOnInit(){this.translate.get("TITLE.ADD").subscribe(e=>{this.formInfo.formTitle=e}),this.getEnumMenuPlaceType(),this.DataGetAccess()}getEnumMenuPlaceType(){this.coreEnumService.ServiceMenuPlaceTypeEnum().subscribe({next:e=>{this.dataModelEnumMenuPlaceTypeResult=e}})}DataAddContent(){this.translate.get("MESSAGE.sending_information_to_the_server").subscribe(i=>{this.formInfo.submitResultMessage=i}),this.formInfo.submitResultMessage="";let e=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(i=>{this.publicHelper.processService.processStart(e,i,this.constructorInfoAreaId)}),this.coreCpMainMenuService.ServiceAdd(this.dataModel).subscribe({next:i=>{this.formInfo.submitButtonEnabled=!0,this.dataModelResult=i,i.isSuccess?(this.translate.get("MESSAGE.registration_completed_successfully").subscribe(t=>{this.formInfo.submitResultMessage=t,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Success}),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0,model:i.item})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.submitResultMessage=t}),this.formInfo.submitResultMessage=i.errorMessage,this.formInfo.submitResultMessageType=this.formSubmitedStatusEnum.Error,this.cmsToastrService.typeErrorMessage(i.errorMessage)),this.publicHelper.processService.processStop(e)},error:i=>{this.formInfo.submitButtonEnabled=!0,this.cmsToastrService.typeError(i),this.publicHelper.processService.processStop(e,!1)}})}onActionSelectorSelect(e){this.dataModel.linkParentId=null,e&&e.id>0&&(this.dataModel.linkParentId=e.id)}onFormSubmit(){this.formGroup.valid&&(this.formInfo.submitButtonEnabled=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};be.\u0275fac=function(i){return new(i||be)(C(Ze),C(Ye),C(G),C(N),C(W),C(H),C(Z),C(O),C(F),C($))},be.\u0275cmp=V({type:be,selectors:[["app-core-user-add"]],viewQuery:function(i,t){if(i&1&&Be(Zo,5),i&2){let a;Oe(a=Ne())&&(t.formGroup=a.first)}},standalone:!1,features:[se],decls:32,vars:28,consts:[["vform","ngForm"],["Title",""],["Description",""],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"formInfo"],[3,"ngSubmit","ngStyle"],[3,"model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],[3,"optionChange","optionDisabled","optionSelectForce","optionPlaceholder"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.title",1,"color-highlight"],["matInput","","type","text","name","dataModel.title","minlength","3","maxlength","100","id","dataModel.title",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],["for","dataModel.description",1,"color-highlight"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5","id","dataModel.description",1,"form-control","validate-name",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],[3,"modelChange","model","optionDisabled","optionLabel","optionRequired","optionSelectFirstItem"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-gray",3,"click"],[1,"ft-x"],["type","submit",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-green",3,"disabled"],[1,"fa","fa-check-square-o"]],template:function(i,t){if(i&1){let a=E();l(0,"div",3),_(1,"app-progress-spinner",4),l(2,"div",5)(3,"p",6),c(4),s(),l(5,"p"),c(6),h(7,"translate"),s(),_(8,"app-cms-form-result-message",7),l(9,"form",8,0),b("ngSubmit",function(){return u(a),f(t.onFormSubmit())}),v(11,en,1,5,"app-cms-enum-record-status-selector",9),l(12,"app-core-cpmainmenu-selector",10),h(13,"translate"),b("optionChange",function(d){return u(a),f(t.onActionSelectorSelect(d))}),s(),l(14,"div",11)(15,"label",12),c(16),s(),l(17,"input",13,1),R("ngModelChange",function(d){return u(a),x(t.dataModel.title,d)||(t.dataModel.title=d),f(d)}),s(),l(19,"em"),c(20),s(),v(21,tn,5,4,"mat-error"),s(),l(22,"div",11)(23,"label",14),c(24),s(),l(25,"textarea",15,2),R("ngModelChange",function(d){return u(a),x(t.dataModel.description,d)||(t.dataModel.description=d),f(d)}),c(27,"          "),s(),l(28,"em"),c(29),s(),v(30,on,5,3,"mat-error"),s(),v(31,nn,9,7,"div",16),s()()()}if(i&2){let a=D(18),S=D(26);r(),p("optionsInfoAreaId",t.constructorInfoAreaId),r(3),M(" ",t.formInfo.formTitle," "),r(2),M(" ",g(7,22,"TITLE.Be_Careful_When_Entering_Information")," "),r(2),p("formInfo",t.formInfo),r(),p("ngStyle",me(26,$o,t.tokenInfo.access.direction)),r(2),I(t.fieldsInfo.recordStatus!=null&&t.fieldsInfo.recordStatus.accessWatchField?11:-1),r(),p("optionDisabled",!1)("optionSelectForce",t.dataModel.linkParentId)("optionPlaceholder",g(13,24,"TITLE.Parent_Menu")),r(4),y(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle),r(),p("placeholder",k(t.fieldsInfo.title==null?null:t.fieldsInfo.title.fieldTitle)),A("ngModel",t.dataModel.title),r(3),M("",a.value.length," / 100"),r(),I(a.errors!=null&&a.errors.required?21:-1),r(3),y(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle),r(),p("placeholder",k(t.fieldsInfo.description==null?null:t.fieldsInfo.description.fieldTitle)),A("ngModel",t.dataModel.description),r(4),M("",S.value.length," / 500"),r(),I(S.errors!=null&&S.errors.required?30:-1),r(),I(t.formInfo.submitButtonEnabled?31:-1)}},dependencies:[fe,Qe,Ce,Me,We,ze,Ke,qe,je,Je,Y,tt,ee,et,ve,q],encapsulation:2});var Ee=be;function an(o,n){if(o&1){let e=E();l(0,"button",13),b("click",function(){u(e);let t=m();return f(t.onActionAdd())}),c(1),h(2,"translate"),s()}o&2&&(r(),M(" ",g(2,1,"ACTION.ADD")," "))}function ln(o,n){if(o&1){let e=E();l(0,"button",14),b("click",function(){u(e);let t=m();return f(t.onActionEdit())}),c(1),h(2,"translate"),s()}o&2&&(r(),M(" ",g(2,1,"ACTION.EDIT")," "))}function sn(o,n){if(o&1){let e=E();l(0,"button",15),b("click",function(){u(e);let t=m();return f(t.onActionButtonReload())}),l(1,"mat-icon",16),h(2,"translate"),c(3,"refresh"),s()()}o&2&&(r(),p("title",k(g(2,2,"ACTION.RELOAD"))))}function cn(o,n){if(o&1){let e=E();l(0,"mat-tree-node",17),_(1,"button",18),l(2,"span",19),b("click",function(){let t=u(e).$implicit,a=m();return f(a.onActionSelect(t))}),_(3,"i",20),c(4),s()()}if(o&2){let e=n.$implicit,i=m();K("ntk-tree-selected",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0&&(i.dataModelSelect==null?null:i.dataModelSelect.id)===e.id),r(3),z("color",e.color),p("ngClass",e.icon),r(),M(" \xA0\xA0\xA0\xA0 ",e.titleML)}}function dn(o,n){if(o&1){let e=E();l(0,"mat-tree-node",21)(1,"button",22)(2,"mat-icon",23),c(3),s()(),l(4,"span",19),b("click",function(){let t=u(e).$implicit,a=m();return f(a.onActionSelect(t))}),_(5,"i",20),c(6),s()()}if(o&2){let e=n.$implicit,i=m(),t=D(11);K("ntk-tree-selected",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0&&(i.dataModelSelect==null?null:i.dataModelSelect.id)===e.id),p("cdkTreeNodeTypeaheadLabel",e.titleML)("isExpanded",e.isExpanded??!1),r(),Ve("type","button")("aria-label","Toggle "+e.titleML),r(2),M(" ",t.isExpanded(e)?"expand_more":"chevron_right"," "),r(2),z("color",e.color),p("ngClass",e.icon),r(),M(" \xA0\xA0\xA0\xA0 ",e.titleML)}}var we=class we{constructor(n,e,i,t,a,S,d,U,De){this.cmsToastrService=n;this.coreEnumService=e;this.categoryService=i;this.dialog=t;this.tokenHelper=a;this.cmsStoreService=S;this.translate=d;this.cdr=U;this.publicHelper=De;this.constructorInfoAreaId=this.constructor.name;this.dataModelSelect=new L;this.dataModelResult=new B;this.filterModel=new j;this.dataSource=new Li;this.optionChange=new Q;this.unsubscribe=[];this.optionReload=()=>this.onActionButtonReload();this.hasChild=(n,e)=>!!e.children&&e.children.length>0;this.childrenAccessor=n=>n.children??[];this.publicHelper.processService.cdr=this.cdr,this.filterModel.sortColumn="ShowInMenuOrder",this.filterModel.sortType=ne.Ascending}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){this.unsubscribe.push(this.cmsStoreService.getState(n=>n.tokenInfoStore).subscribe(n=>le(this,null,function*(){this.DataGetAll()})))}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(n=>n.unsubscribe())}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;let n=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(n,e,this.constructorInfoAreaId)}),this.categoryService.ServiceGetAllTree(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.publicHelper.processService.processStop(n)},error:e=>{this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(n,!1)}})}onActionSelect(n){n&&this.dataModelSelect&&n.id==this.dataModelSelect.id?(this.dataModelSelect=null,this.optionChange.emit(null)):(this.dataModelSelect=n,this.optionChange.emit(this.dataModelSelect))}onActionButtonReload(){this.onActionSelect(null),this.dataModelSelect=new L,this.DataGetAll()}onActionSelectForce(n){}onActionAdd(){let n=0;this.dataModelSelect&&this.dataModelSelect.id>0&&(n=this.dataModelSelect.id);let e=new li;e.disableClose=!0,e.autoFocus=!0,e.data={parentId:n},this.dialog.open(Ee,e).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&(this.dataModelSelect=t.model,this.onActionEdit())})}onActionEdit(){let n=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(n=this.dataModelSelect.id),n===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(t=>{this.cmsToastrService.typeErrorSelected(t)});return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(oe,{height:"90%",panelClass:e,enterAnimationDuration:X.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:X.cmsViewConfig.exitAnimationDuration,data:{id:n}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()})}onActionDelete(){let n=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(n=this.dataModelSelect.id),n===0){this.translate.get("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected").subscribe(e=>{this.cmsToastrService.typeErrorSelected(e)});return}}};we.\u0275fac=function(e){return new(e||we)(C(H),C(G),C(N),C($e),C($),C(Z),C(F),C(O),C(W))},we.\u0275cmp=V({type:we,selectors:[["app-core-cpmainmenu-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},standalone:!1,decls:15,vars:13,consts:[["treeTagControl",""],[3,"optionHeaderDisplay","optionActionMainDisplay","optionFooterDisplay"],["cms-tree-header",""],["cms-tree-action",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight"],["cms-tree-body","",1,"loader-container"],[3,"optionsInfoAreaId"],[3,"dataSource","childrenAccessor"],["matTreeNodePadding","",3,"ntk-tree-selected",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded","ntk-tree-selected",4,"matTreeNodeDef","matTreeNodeDefWhen"],["cms-tree-footer",""],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"title"],["matTreeNodePadding",""],["matIconButton","","disabled",""],[3,"click"],["aria-hidden","true",3,"ngClass"],["matTreeNodePadding","","matTreeNodeToggle","","isExpandable","",3,"cdkTreeNodeTypeaheadLabel","isExpanded"],["matIconButton","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"]],template:function(e,i){e&1&&(l(0,"app-cms-html-tree",1),w(1,2),c(2),h(3,"translate"),T(),w(4,3),v(5,an,3,3,"button",4),v(6,ln,3,3,"button",5),v(7,sn,4,4,"button",6),T(),w(8,7),_(9,"app-progress-spinner",8),l(10,"mat-tree",9,0),P(12,cn,5,6,"mat-tree-node",10)(13,dn,7,11,"mat-tree-node",11),s(),T(),Ge(14,12),s()),e&2&&(p("optionHeaderDisplay",!0)("optionActionMainDisplay",!0)("optionFooterDisplay",!1),r(2),M(" ",g(3,11,"TABLE."+(i.dataModelResult==null||i.dataModelResult.access==null?null:i.dataModelResult.access.moduleEntityName))," "),r(3),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessAddRow?5:-1),r(),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow&&(i.dataModelSelect==null?null:i.dataModelSelect.id)>0?6:-1),r(),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessWatchRow?7:-1),r(2),p("optionsInfoAreaId",i.constructorInfoAreaId),r(),p("dataSource",i.dataSource)("childrenAccessor",i.childrenAccessor),r(3),p("matTreeNodeDefWhen",i.hasChild))},dependencies:[ue,Xe,Se,Ri,Di,ki,Pi,xi,ee,no,q],encapsulation:2});var at=we;var mn=()=>[5,10,20,100],un=o=>({display:o});function fn(o,n){if(o&1){let e=E();l(0,"div",16)(1,"a",41),b("click",function(){u(e);let t=m();return f(t.onActionButtonNewRow())}),_(2,"i",42)(3,"br"),s(),l(4,"p",43),c(5),h(6,"translate"),s()()}o&2&&(r(5),M(" ",g(6,1,"ACTION.ADD")," "))}function Cn(o,n){if(o&1){let e=E();l(0,"div",16)(1,"a",44),b("click",function(){u(e);let t=m();return f(t.onActionButtonEditRow(t.tableRowSelected))}),_(2,"i",45)(3,"br"),s(),l(4,"p",43),c(5),h(6,"translate"),s()()}o&2&&(r(5),M(" ",g(6,1,"ACTION.EDIT")," "))}function Mn(o,n){if(o&1){let e=E();l(0,"div",16)(1,"a",46),b("click",function(){u(e);let t=m();return f(t.onActionButtonDeleteRow(t.tableRowSelected))}),_(2,"i",47)(3,"br"),s(),l(4,"p",43),c(5),h(6,"translate"),s()()}o&2&&(r(5),M(" ",g(6,1,"ACTION.DELETE")," "))}function Sn(o,n){if(o&1&&(l(0,"mat-header-cell",48),c(1),s()),o&2){let e=m();r(),M(" ",e.fieldsInfo.icon==null?null:e.fieldsInfo.icon.fieldTitle," ")}}function hn(o,n){if(o&1&&(l(0,"mat-cell"),_(1,"i",49),s()),o&2){let e=n.$implicit;r(),z("color",e.color),p("ngClass",e.icon)}}function gn(o,n){if(o&1&&(l(0,"mat-header-cell",48),c(1),s()),o&2){let e=m();r(),M(" ",e.fieldsInfo.id==null?null:e.fieldsInfo.id.fieldTitle," ")}}function _n(o,n){if(o&1&&(l(0,"mat-cell"),c(1),s()),o&2){let e=n.$implicit;r(),M(" ",e.id," ")}}function vn(o,n){if(o&1&&(l(0,"mat-header-cell",48),c(1),s()),o&2){let e=m();r(),M(" ",e.fieldsInfo.recordStatus==null?null:e.fieldsInfo.recordStatus.fieldTitle," ")}}function In(o,n){if(o&1&&_(0,"select",51),o&2){let e=m().$implicit,i=m();p("contentService",i.contentService)("row",e)("ngStyle",me(3,un,e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)?"":"none"))}}function bn(o,n){if(o&1&&(l(0,"mat-cell"),_(1,"i",50),h(2,"statusIconClass"),v(3,In,1,5,"select",51),s()),o&2){let e=n.$implicit,i=m();r(),p("ngClass",g(2,2,e.recordStatus)),r(2),I(!(i.dataModelResult==null||i.dataModelResult.access==null)&&i.dataModelResult.access.accessEditRow?3:-1)}}function En(o,n){if(o&1&&(l(0,"mat-header-cell",48),c(1),s()),o&2){let e=m();r(),M(" ",e.fieldsInfo.title==null?null:e.fieldsInfo.title.fieldTitle)}}function wn(o,n){if(o&1&&(l(0,"mat-cell"),c(1),s()),o&2){let e=n.$implicit;r(),M(" ",e.title," ")}}function Tn(o,n){o&1&&(l(0,"mat-header-cell",48),c(1),h(2,"translate"),s()),o&2&&(r(),M(" ",g(2,1,"TITLE.TitleML")))}function yn(o,n){if(o&1&&(l(0,"mat-cell"),c(1),s()),o&2){let e=n.$implicit;r(),M(" ",e.titleML," ")}}function An(o,n){if(o&1&&(l(0,"mat-header-cell",48),c(1),s()),o&2){let e=m();r(),M(" ",e.fieldsInfo.showInMenu==null?null:e.fieldsInfo.showInMenu.fieldTitle)}}function xn(o,n){if(o&1&&(l(0,"mat-cell"),_(1,"i",50),h(2,"boolclass"),s()),o&2){let e=n.$implicit;r(),p("ngClass",g(2,1,e.showInMenu))}}function Rn(o,n){if(o&1&&(l(0,"mat-header-cell",48),c(1),s()),o&2){let e=m();r(),M(" ",e.fieldsInfo.showInAccessAdminAllowToProfessionalData==null?null:e.fieldsInfo.showInAccessAdminAllowToProfessionalData.fieldTitle)}}function Dn(o,n){if(o&1&&(l(0,"mat-cell"),_(1,"i",50),h(2,"boolclass"),s()),o&2){let e=n.$implicit;r(),p("ngClass",g(2,1,e.showInAccessAdminAllowToProfessionalData))}}function Pn(o,n){if(o&1&&(l(0,"mat-header-cell",48),c(1),s()),o&2){let e=m();r(),M(" ",e.fieldsInfo.menuPlaceType==null?null:e.fieldsInfo.menuPlaceType.fieldTitle," ")}}function kn(o,n){if(o&1&&(l(0,"mat-cell"),c(1),h(2,"enums"),s()),o&2){let e=n.$implicit,i=m();r(),M(" ",xt(2,1,e.menuPlaceType,i.dataModelEnumMenuPlaceTypeResult.listItems)," ")}}function Ln(o,n){if(o&1&&(l(0,"mat-header-cell",48),c(1),s()),o&2){let e=m();r(),M(" ",e.fieldsInfo.showInMenuOrder==null?null:e.fieldsInfo.showInMenuOrder.fieldTitle," ")}}function Vn(o,n){if(o&1&&(l(0,"mat-cell"),c(1),s()),o&2){let e=n.$implicit;r(),M(" ",e.showInMenuOrder," ")}}function Gn(o,n){o&1&&(l(0,"mat-header-cell"),c(1),h(2,"translate"),s()),o&2&&(r(),M(" ",g(2,1,"TITLE.OPTION")," "))}function Bn(o,n){if(o&1&&(l(0,"mat-cell",52)(1,"button",53)(2,"mat-icon"),c(3,"more_vert"),s()(),_(4,"mat-menu",null,2),s()),o&2){let e=D(5);r(),p("matMenuTriggerFor",e)}}function On(o,n){o&1&&(l(0,"mat-header-cell",48),c(1,". "),s())}function Nn(o,n){o&1&&(l(0,"mat-cell")(1,"mat-icon",54),c(2,"reorder"),s()())}function Fn(o,n){o&1&&_(0,"mat-header-row")}function Hn(o,n){o&1&&_(0,"div",57)}function Wn(o,n){if(o&1){let e=E();l(0,"mat-row",55),b("click",function(t){let a=u(e).$implicit,S=m();return f(S.onActionTableRowSelect(a,t))})("rtclick",function(t){let a=u(e).$implicit,S=m();return f(S.onActionTableRowSelect(a,t))}),P(1,Hn,1,0,"div",56),s()}if(o&2){let e=n.$implicit,i=m();K("ntk-row-selected",e.id===(i.tableRowSelected==null?null:i.tableRowSelected.id)),p("cdkDragData",e)}}var Te=class Te extends Ji{constructor(e,i,t,a,S,d,U,De,ct,Pe,uo,Un){super(e,new L,Pe,a,De);this.contentService=e;this.cmsConfirmationDialogService=i;this.cmsToastrService=t;this.tokenHelper=a;this.coreEnumService=S;this.cdr=d;this.cmsStoreService=U;this.translate=De;this.pageInfo=ct;this.publicHelper=Pe;this.themeService=uo;this.dialog=Un;this.constructorInfoAreaId=this.constructor.name;this.flag=!1;this.tableContentSelected=[];this.filteModelContent=new j;this.filterDataModelQueryBuilder=[];this.tabledisplayedColumns=[];this.tabledisplayedColumnsSource=["Icon","id","recordStatus","TitleML","ShowInMenu","ShowInAccessAdminAllowToProfessionalData","MenuPlaceType","ShowInMenuOrder","position"];this.tabledisplayedColumnsMobileSource=["Icon","id","recordStatus","TitleML","ShowInMenu","ShowInAccessAdminAllowToProfessionalData","MenuPlaceType","ShowInMenuOrder","position"];this.dataModelEnumMenuPlaceTypeResult=new B;this.unsubscribe=[];this.publicHelper.processService.cdr=this.cdr,this.optionsSearch.parentMethods={onSubmit:fo=>this.onSubmitOptionsSearch(fo)},this.filteModelContent.sortColumn="ShowInMenuOrder",this.filteModelContent.sortType=ne.Ascending}ngOnInit(){this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.tokenInfo&&this.DataGetAll(),this.unsubscribe.push(this.cmsStoreService.getState(e=>e.tokenInfoStore).subscribe(e=>le(this,null,function*(){this.tokenInfo=e,this.DataGetAll()}))),this.getEnumMenuPlaceType()}getEnumMenuPlaceType(){this.coreEnumService.ServiceMenuPlaceTypeEnum().subscribe({next:e=>{this.dataModelEnumMenuPlaceTypeResult=e}})}ngOnDestroy(){this.unsubscribe&&this.unsubscribe.forEach(e=>e.unsubscribe())}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TableDisplayedColumns(this.tabledisplayedColumnsSource,this.tabledisplayedColumnsMobileSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new L);let e=this.constructor.name+"main";this.translate.get("MESSAGE.get_information_list").subscribe(t=>{this.publicHelper.processService.processStart(e,t,this.constructorInfoAreaId)}),this.filteModelContent.accessLoad=!0;let i=JSON.parse(JSON.stringify(this.filteModelContent));if(this.filterDataModelQueryBuilder&&this.filterDataModelQueryBuilder.length>0&&(i.filters=[...this.filterDataModelQueryBuilder]),this.categoryModelSelected&&this.categoryModelSelected.id>0){let t=new J;t.propertyName="LinkParentId",t.value=this.categoryModelSelected.id,i.filters.push(t)}this.contentService.ServiceGetAllEditor(i).subscribe({next:t=>{t.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModelResult=t,this.tableSource.data=t.listItems,this.optionsStatist?.data?.show&&this.onActionButtonStatist(!0),setTimeout(()=>{this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(t.access)},1e3)):this.cmsToastrService.typeErrorMessage(t.errorMessage),this.publicHelper.processService.processStop(e)},error:t=>{this.cmsToastrService.typeError(t),this.publicHelper.processService.processStop(e,!1)}})}onTableSortData(e){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===e.active?this.tableSource.sort.start==="asc"?(e.start="desc",this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=ne.Descending):this.tableSource.sort.start==="desc"?(e.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=ne.Ascending):e.start="desc":(this.filteModelContent.sortColumn=e.active,this.filteModelContent.sortType=ne.Descending),this.tableSource.sort=e,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(e){this.filteModelContent.currentPageNumber=e.pageIndex+1,this.filteModelContent.rowPerPage=e.pageSize,this.DataGetAll()}onTableDropRow(e){let i=this.tableSource.data.findIndex(a=>a===e.item.data),t=new Gt;t.id=this.tableSource.data[i].id,t.centerId=this.tableSource.data[e.currentIndex].id,i>e.currentIndex?t.actionGo=ut.GoUp:t.actionGo=ut.GoDown,this.contentService.ServiceEditStep(t).subscribe({next:a=>{a.isSuccess?(Wt(this.tableSource.data,i,e.currentIndex),this.tableSource.data=this.tableSource.data.slice()):this.cmsToastrService.typeErrorMessage(a.errorMessage)},error:a=>{this.cmsToastrService.typeError(a)}})}onActionSelectorSelect(e){var i=this.filteModelContent.sortColumn,t=this.filteModelContent.sortType;this.filteModelContent=new j,this.filteModelContent.sortColumn=i,this.filteModelContent.sortType=t,this.filteModelContent.sortColumn="ShowInMenuOrder",this.categoryModelSelected=e,this.DataGetAll()}onActionButtonNewRow(){if(this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessAddRow){this.cmsToastrService.typeErrorAccessAdd();return}var e="";this.publicHelper.isMobile?e="dialog-fullscreen":e="dialog-min",this.dialog.open(Ee,{height:"90%",panelClass:e,enterAnimationDuration:X.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:X.cmsViewConfig.exitAnimationDuration,data:{parentId:this.categoryModelSelected.id}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.onActionButtonEditRow(t.model)})}onActionButtonEditRow(e=this.tableRowSelected){if(!(e?.id>0)){this.cmsToastrService.typeErrorSelectedRow();return}if(this.onActionTableRowSelect(e),this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessEditRow){this.cmsToastrService.typeErrorAccessEdit();return}var i="";this.publicHelper.isMobile?i="dialog-fullscreen":i="dialog-min",this.dialog.open(oe,{height:"90%",panelClass:i,enterAnimationDuration:X.cmsViewConfig.enterAnimationDuration,exitAnimationDuration:X.cmsViewConfig.exitAnimationDuration,data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(a=>{a&&a.dialogChangedDate&&this.DataGetAll()})}onActionButtonDeleteRow(e=this.tableRowSelected){if(e==null||!e.id||e.id===0){this.cmsToastrService.typeErrorDeleteRowIsNull();return}if(this.tableRowSelected=e,this.dataModelResult==null||this.dataModelResult.access==null||!this.dataModelResult.access.accessDeleteRow){this.cmsToastrService.typeErrorAccessDelete();return}var i="",t="";this.translate.get(["MESSAGE.Please_Confirm","MESSAGE.Do_you_want_to_delete_this_content"]).subscribe(a=>{i=a["MESSAGE.Please_Confirm"],t=a["MESSAGE.Do_you_want_to_delete_this_content"]+"?<br> ( "+this.tableRowSelected.title+" ) "}),this.cmsConfirmationDialogService.confirm(i,t).then(a=>{if(a){let S=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(d=>{this.publicHelper.processService.processStart(S,d,this.constructorInfoAreaId)}),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:d=>{d.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.publicHelper.processService.processStop(S)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(S,!1)}})}}).catch(()=>{})}onActionButtonStatist(e=!this.optionsStatist.data.show){if(this.optionsStatist.data.show=e,!this.optionsStatist.data.show)return;let i=new Map;this.translate.get("MESSAGE.Active").subscribe(d=>{i.set(d,0)}),this.translate.get("MESSAGE.All").subscribe(d=>{i.set(d,0)});let t=this.constructor.name+".ServiceStatist";this.translate.get("MESSAGE.Get_the_statist").subscribe(d=>{this.publicHelper.processService.processStart(t,d,this.constructorInfoAreaId)}),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:d=>{d.isSuccess?(this.translate.get("MESSAGE.All").subscribe(U=>{i.set(U,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(d.errorMessage),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t,!1)}});let a=JSON.parse(JSON.stringify(this.filteModelContent)),S=new J;S.propertyName="recordStatus",S.value=kt.Available,a.filters.push(S),this.contentService.ServiceGetCount(a).subscribe({next:d=>{d.isSuccess?(this.translate.get("MESSAGE.Active").subscribe(U=>{i.set(U,d.totalRowCount)}),this.optionsStatist.childMethods.setStatistValue(i)):this.cmsToastrService.typeErrorMessage(d.errorMessage),this.publicHelper.processService.processStop(t)},error:d=>{this.cmsToastrService.typeError(d),this.publicHelper.processService.processStop(t,!1)}})}onActionButtonReload(){this.filteModelContent.sortColumn="ShowInMenuOrder",this.DataGetAll()}onSubmitOptionsSearch(e){e&&e.length>0?this.filterDataModelQueryBuilder=[...e]:this.filterDataModelQueryBuilder=[],this.DataGetAll()}};Te.\u0275fac=function(i){return new(i||Te)(C(N),C(it),C(H),C($),C(G),C(O),C(Z),C(F),C(Oi),C(W),C(Vi),C($e))},Te.\u0275cmp=V({type:Te,selectors:[["app-core-user-list"]],standalone:!1,features:[se],decls:68,vars:31,consts:[["tableSort","matSort"],["paginator",""],["actionMenu","matMenu"],[3,"optionActionGuideNoticeDisplayChange","optionOnActionButtonMemoRow","optionOnActionButtonMemo","optionOnActionButtonExport","optionOnActionButtonPrintRow","optionsListInfoAreaId","optionGuideNoticeKey","optionActionGuideNoticeDisplay","optionTreeDisplay","optionActionRowId","optionActionRowDisplayMenu","optionSelectRowItemTitle"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action-header",""],["cms-action-header-start",""],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa-solid","fa-info","font-18",2,"color","#ffffff"],[1,"fa-solid","fa-rotate-right","font-18",2,"color","#ffffff"],["cms-action-header-end",""],[1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[3,"checked"],["cms-action-main",""],[1,"col-4"],["cms-action-row",""],["cms-action-area",""],[3,"optionsChange","options"],["cms-body",""],["matSort","","cdkDropList","",3,"matSortChange","cdkDropListDropped","dataSource","cdkDropListData"],["matColumnDef","Icon"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","id"],["matColumnDef","recordStatus"],["matColumnDef","title"],["matColumnDef","TitleML"],["matColumnDef","ShowInMenu"],["matColumnDef","ShowInAccessAdminAllowToProfessionalData"],["matColumnDef","MenuPlaceType"],["matColumnDef","ShowInMenuOrder"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],["matColumnDef","position"],[4,"matHeaderRowDef"],["class","ntk-row-mainfild","cdkDrag","",3,"ntk-row-selected","cdkDragData","click","rtclick",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],["type","button","target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-teal",3,"click"],[1,"fa-solid","fa-plus","font-18",2,"color","#ffffff"],[1,"font-11","text-center","opacity-70"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-magenta",3,"click"],[1,"fa-solid","fa-pen","font-18",2,"color","#ffffff"],["target","_blank",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-red",3,"click"],[1,"fa-solid","fa-trash","font-18",2,"color","#ffffff"],["mat-sort-header",""],["aria-hidden","true",3,"ngClass"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["type","button","mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["cdkDragHandle","",2,"pointer-events","all"],["cdkDrag","",1,"ntk-row-mainfild",3,"click","rtclick","cdkDragData"],["class","ntk-row-placeholder",4,"cdkDragPlaceholder"],[1,"ntk-row-placeholder"]],template:function(i,t){if(i&1){let a=E();l(0,"app-cms-html-list",3),R("optionActionGuideNoticeDisplayChange",function(d){return u(a),x(t.viewGuideNotice,d)||(t.viewGuideNotice=d),f(d)}),b("optionOnActionButtonMemoRow",function(){return u(a),f(t.onActionButtonMemoRow())})("optionOnActionButtonMemo",function(){return u(a),f(t.onActionButtonMemo())})("optionOnActionButtonExport",function(){return u(a),f(t.onActionButtonExport())})("optionOnActionButtonPrintRow",function(){return u(a),f(t.onActionButtonPrintRow())}),w(1,4),l(2,"app-core-cpmainmenu-tree",5),b("optionChange",function(d){return u(a),f(t.onActionSelectorSelect(d))}),s(),T(),Ge(3,6)(4,7),w(5,8),l(6,"a",9),b("click",function(){return u(a),f(t.viewGuideNotice=!t.viewGuideNotice)}),_(7,"i",10),s(),l(8,"a",9),b("click",function(){return u(a),f(t.onActionButtonReload())}),_(9,"i",11),s(),T(),w(10,12),l(11,"a",13),b("click",function(){return u(a),f(t.optionsSearch.data.show=!t.optionsSearch.data.show)}),_(12,"mat-slide-toggle",14),c(13),h(14,"translate"),s(),l(15,"a",13),b("click",function(){return u(a),f(t.onActionButtonStatist())}),_(16,"mat-slide-toggle",14),c(17),h(18,"translate"),s(),T(),w(19,15),v(20,fn,7,3,"div",16),T(),w(21,17),v(22,Cn,7,3,"div",16),v(23,Mn,7,3,"div",16),T(),w(24,18),l(25,"app-cms-search-list",19),R("optionsChange",function(d){return u(a),x(t.optionsSearch,d)||(t.optionsSearch=d),f(d)}),s(),l(26,"app-cms-statist-list",19),R("optionsChange",function(d){return u(a),x(t.optionsStatist,d)||(t.optionsStatist=d),f(d)}),s(),T(),w(27,20),l(28,"mat-table",21,0),b("matSortChange",function(){u(a);let d=D(29);return f(t.onTableSortData(d))})("cdkDropListDropped",function(d){return u(a),f(t.onTableDropRow(d))}),w(30,22),P(31,Sn,2,1,"mat-header-cell",23)(32,hn,2,3,"mat-cell",24),T(),w(33,25),P(34,gn,2,1,"mat-header-cell",23)(35,_n,2,1,"mat-cell",24),T(),w(36,26),P(37,vn,2,1,"mat-header-cell",23)(38,bn,4,4,"mat-cell",24),T(),w(39,27),P(40,En,2,1,"mat-header-cell",23)(41,wn,2,1,"mat-cell",24),T(),w(42,28),P(43,Tn,3,3,"mat-header-cell",23)(44,yn,2,1,"mat-cell",24),T(),w(45,29),P(46,An,2,1,"mat-header-cell",23)(47,xn,3,3,"mat-cell",24),T(),w(48,30),P(49,Rn,2,1,"mat-header-cell",23)(50,Dn,3,3,"mat-cell",24),T(),w(51,31),P(52,Pn,2,1,"mat-header-cell",23)(53,kn,3,4,"mat-cell",24),T(),w(54,32),P(55,Ln,2,1,"mat-header-cell",23)(56,Vn,2,1,"mat-cell",24),T(),w(57,33),P(58,Gn,3,3,"mat-header-cell",34)(59,Bn,6,1,"mat-cell",35),T(),w(60,36),P(61,On,2,0,"mat-header-cell",23)(62,Nn,3,0,"mat-cell",24),T(),P(63,Fn,1,0,"mat-header-row",37)(64,Wn,2,3,"mat-row",38),s(),T(),w(65,39),l(66,"mat-paginator",40,1),b("page",function(d){return u(a),f(t.onTablePageingData(d))}),s(),T(),s()}i&2&&(p("optionsListInfoAreaId",t.constructorInfoAreaId)("optionGuideNoticeKey",""),A("optionActionGuideNoticeDisplay",t.viewGuideNotice),p("optionTreeDisplay",!0)("optionActionRowId",t.tableRowSelected==null?null:t.tableRowSelected.id)("optionActionRowDisplayMenu",t.tableRowSelect2Click)("optionSelectRowItemTitle",t.tableRowSelected==null?null:t.tableRowSelected.title),r(9),K("rotation360",t.publicHelper.processService.process.inRunArea[t.constructorInfoAreaId]),r(3),p("checked",t.optionsSearch.data.show),r(),M("",g(14,26,"ACTION.SEARCH")," "),r(3),p("checked",t.optionsStatist.data.show),r(),M("",g(18,28,"ACTION.STATIST")," "),r(3),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessAddRow?20:-1),r(2),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessEditRow?22:-1),r(),I(!(t.dataModelResult==null||t.dataModelResult.access==null)&&t.dataModelResult.access.accessDeleteRow?23:-1),r(2),A("options",t.optionsSearch),r(),A("options",t.optionsStatist),r(2),p("dataSource",t.tableSource)("cdkDropListData",t.tableSource),r(35),p("matHeaderRowDef",t.tabledisplayedColumns),r(),p("matRowDefColumns",t.tabledisplayedColumns),r(2),p("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",Fe(30,mn)))},dependencies:[ue,fe,Xe,Se,Y,si,ci,di,pi,mi,ui,gi,vi,wi,Ii,_i,Ti,bi,Ei,yi,Ai,Xi,Yi,Zi,$i,eo,qt,Ut,jt,Qt,at,q,lo,to,Bi],encapsulation:2});var lt=Te;var jn=[{path:"",component:ot,data:{title:"ROUTE.CORE.CPMAINMENU"},children:[{path:"",component:lt,data:{title:"ROUTE.CORE.CPMAINMENU"}},{path:"edit/:id",component:oe,data:{title:"ROUTE.CORE.CPMAINMENU"}}]}],re=class re{};re.\u0275fac=function(e){return new(e||re)},re.\u0275mod=Le({type:re}),re.\u0275inj=ke({imports:[pt.forChild(jn),pt]});var st=re;var ae=class ae{};ae.\u0275fac=function(e){return new(e||ae)},ae.\u0275mod=Le({type:ae}),ae.\u0275inj=ke({providers:[Bt,G,N,He,Ot,it],imports:[Dt,st,ei,ti.withConfig({warnOnNgModelWithFormControl:"never"}),Gi,Qi,oo,io,ro,ji,zt]});var mo=ae;export{mo as CoreCpMainMenu};
