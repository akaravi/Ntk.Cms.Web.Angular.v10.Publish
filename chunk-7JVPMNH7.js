import{a as se}from"./chunk-Y22MW2BL.js";import{f as ae}from"./chunk-3OKIF6AS.js";import{I as ee,Qb as ne,Rb as le,U as te,ab as re,da as oe,ea as ie,m as X,p as Y,t as Z,z as x}from"./chunk-VPWYZYVO.js";import{Ed as z,F as R,Fa as n,Hb as L,I as F,Ic as B,Id as c,Jc as W,Jd as J,Ka as d,Mb as S,Nb as I,Ob as q,P as w,Pa as D,Pc as $,Q as E,Rd as K,Va as h,Vb as j,Wb as _,Xa as P,bc as G,cb as V,cc as T,da as g,ea as b,ee as Q,gf as v,ib as l,jb as s,kb as p,lb as f,md as u,p as O,q as A,rd as m,sb as y,uc as H,vb as M,xb as C,yb as k,zb as N}from"./chunk-P7V72WIT.js";import{i as U}from"./chunk-SEDBTTTN.js";var ue=["*"];function me(r,e){if(r&1&&(s(0,"label",11),S(1),p()),r&2){let o=C();l("for",_("app-cms-site-selector-",o.id)),n(),I(o.optionLabel)}}function fe(r,e){if(r&1&&(s(0,"mat-option",12)(1,"span"),S(2),p()()),r&2){let o=e.$implicit,i=C();l("value",o)("disabled",i.optionDisabled),n(2),I(i.displayOption(o))}}function he(r,e){r&1&&f(0,"i",13)}function Ce(r,e){r&1&&f(0,"i",14)}function Se(r,e){if(r&1){let o=y();s(0,"i",15),M("click",function(){g(o);let t=C();return b(t.onActionSelectClear())}),p()}}function ve(r,e){r&1&&(s(0,"em"),S(1),G(2,"translate"),p()),r&2&&(n(),q("(",T(2,1,"TITLE.Necessary"),")"))}var a=class a{constructor(e,o,i,t,ce){this.coreEnumService=e;this.cdr=o;this.publicHelper=i;this.translate=t;this.categoryService=ce;this.id=++a.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new z;this.dataModelSelect=new v;this.formControl=new Z;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new P;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(w(""),R(1500),F(),E(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){return U(this,null,function*(){let o=new J;if(o.rowPerPage=20,o.accessLoad=!0,e&&e.length>0){let t=new c;t=new c,t.propertyName="username",t.value=e,t.searchType=m.Contains,t.clauseType=u.Or,o.filters.push(t),t=new c,t.propertyName="name",t.value=e,t.searchType=m.Contains,t.clauseType=u.Or,o.filters.push(t),t=new c,t.propertyName="email",t.value=e,t.searchType=m.Contains,t.clauseType=u.Or,o.filters.push(t),t=new c,t.propertyName="lastname",t.value=e,t.searchType=m.Contains,t.clauseType=u.Or,o.filters.push(t),e&&typeof+e=="number"&&+e>0&&(t=new c,t.propertyName="Id",t.value=e,t.searchType=m.Equal,t.clauseType=u.Or,o.filters.push(t))}let i=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(t=>{this.publicHelper.processService.processStart(i,t,this.constructorInfoAreaId)}),yield O(this.categoryService.ServiceGetAll(o)).then(t=>(this.dataModelResult=t,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(i),t.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe(A(o=>(o.find(i=>i.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if(typeof e=="number"&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){let o=this.dataModelResult.listItems.find(i=>i.id===e);this.dataModelSelect=o,this.formControl.setValue(o);return}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))}});return}if(typeof e==typeof v){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new v,this.loadOptions()}};a.nextId=0,a.\u0275fac=function(o){return new(o||a)(d(K),d(H),d(ae),d(ne),d(Q))},a.\u0275cmp=D({type:a,selectors:[["app-cms-usergroup-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:ue,decls:13,vars:18,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info invalid color-red-dark",4,"ngIf"],["class","fa fa-check valid color-green-dark",4,"ngIf"],["class","fa fa-times action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(o,i){if(o&1){let t=y();k(),s(0,"div",1),f(1,"app-progress-spinner",2),h(2,me,2,3,"label",3),f(3,"input",4),s(4,"mat-autocomplete",5,0),M("optionSelected",function(de){return g(t),b(i.onActionSelect(de.option.value))}),h(6,fe,3,3,"mat-option",6),G(7,"async"),p(),h(8,he,1,0,"i",7)(9,Ce,1,0,"i",8)(10,Se,1,0,"i",9)(11,ve,3,3,"em",10),N(12),p()}if(o&2){let t=L(5);n(),l("optionsInfoAreaId",i.constructorInfoAreaId),n(),l("ngIf",(i.optionLabel==null?null:i.optionLabel.length)>0),n(),l("placeholder",j(i.optionPlaceholder))("id",_("app-cms-site-selector-",i.id))("formControl",i.formControl)("matAutocomplete",t)("required",i.optionRequired),V("disabled",i.optionDisabled?!0:null),n(),l("displayWith",i.displayFn),n(2),l("ngForOf",T(7,16,i.filteredOptions)),n(2),l("ngIf",!i.formControl.valid),n(),l("ngIf",i.optionRequired&&i.formControl.valid),n(),l("ngIf",(i.dataModelSelect==null?null:i.dataModelSelect.id)>0),n(),l("ngIf",i.optionRequired&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0))}},dependencies:[B,W,X,Y,ee,x,oe,te,ie,re,se,$,le],encapsulation:2});var pe=a;export{pe as a};
