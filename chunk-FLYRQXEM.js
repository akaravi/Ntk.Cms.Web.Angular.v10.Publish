import{a as fe}from"./chunk-V5MBMHK7.js";import{a as he}from"./chunk-6C4YXGXV.js";import{f as me}from"./chunk-5H5J7U3B.js";import{Ab as pe,Bb as ue,Da as de,m as le,u as ae,x as se,y as ce}from"./chunk-Y7HORT7V.js";import{A as re,c as te,h as ie,l as oe,r as ne}from"./chunk-QRBNL5ZA.js";import{$ as Z,D as _,Jb as R,K as Y,ba as ee,q as Q,u as y,v as X,y as I}from"./chunk-TN4JCRWB.js";import{Ab as p,Cb as N,Db as j,Dc as h,Eb as G,Ec as f,Fb as s,Gb as l,Hb as a,Ib as u,K as P,O as V,Pb as T,Ra as A,Sb as g,Ub as C,Va as r,Vb as U,Wb as x,Xa as q,Xc as J,Z as k,_ as L,cb as m,cc as z,ec as W,hc as b,ib as B,ic as E,jc as $,pa as M,qa as v,s as D,t as F,tc as S,td as K,xb as H,zb as d}from"./chunk-2AL2II5Z.js";import{i as O}from"./chunk-SEDBTTTN.js";var ye=["*"];function Me(n,e){if(n&1&&(u(0,"img",4),h(1,"cmsthumbnail")),n&2){let t=C();s("src",S(f(1,2,t.dataModelSelect==null?null:t.dataModelSelect.linkMainImageIdSrc)),A)}}function ve(n,e){if(n&1&&(u(0,"img",4),h(1,"cmsthumbnail")),n&2){let t=C().$implicit;s("src",S(f(1,2,t.linkMainImageIdSrc)),A)}}function ge(n,e){if(n&1&&(l(0,"mat-option",8),d(1,ve,2,4,"img",4),l(2,"span"),b(3),a()()),n&2){let t=e.$implicit,i=C();s("value",t)("disabled",i.optionDisabled),r(),p(t.linkMainImageIdSrc?1:-1),r(2),E(i.displayOption(t))}}function be(n,e){n&1&&u(0,"i",9)}function Ie(n,e){n&1&&u(0,"i",10)}function _e(n,e){if(n&1){let t=T();l(0,"i",13),g("click",function(){M(t);let o=C();return v(o.onActionSelectClear())}),a()}}function Re(n,e){n&1&&(l(0,"em"),b(1),h(2,"translate"),a()),n&2&&(r(),$("(",f(2,1,"TITLE.Necessary"),")"))}var c=class c{constructor(e,t,i,o,w){this.coreEnumService=e;this.translate=t;this.cdr=i;this.publicHelper=o;this.categoryService=w;this.id=++c.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new Q;this.dataModelSelect=new R;this.formControl=new oe;this.optionDisabled=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionRequired=!1;this.optionChange=new q;this.optionReload=()=>this.onActionButtonReload();this.dateUseStore=!0;this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions(),(!this.optionLabel||this.optionLabel.length==0&&this.optionPlaceholder?.length>0)&&(this.optionLabel=this.optionPlaceholder)}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(k(""),P(1500),V(),L(e=>typeof e=="string"||typeof e=="number"?this.DataGetAll(e):this.DataGetAll("")))}displayFn(e){return e?e.titleML:void 0}displayOption(e){return e?e.titleML:void 0}DataGetAll(e){return O(this,null,function*(){if(this.dateUseStore&&(this.dataModelResult=yield this.publicHelper.getCurrency(),this.dataModelResult.isSuccess))return this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.dataModelResult.listItems;let t=new X;if(t.rowPerPage=20,t.accessLoad=!0,e&&e.length>0){let o=new y;o=new y,o.propertyName="Symbol",o.value=e,o.searchType=_.Contains,o.clauseType=I.Or,t.filters.push(o),o=new y,o.propertyName="title",o.value=e,o.searchType=_.Contains,o.clauseType=I.Or,t.filters.push(o),e&&typeof+e=="number"&&+e>0&&(o=new y,o.propertyName="id",o.value=e,o.searchType=_.Equal,o.clauseType=I.Or,t.filters.push(o))}let i=this.constructor.name+"ServiceGetAll";return this.translate.get("MESSAGE.Receiving_information").subscribe(o=>{this.publicHelper.processService.processStart(i,o,this.constructorInfoAreaId)}),this.categoryService.setAccessDataType(Y.Viewer),yield D(this.categoryService.ServiceGetAll(t)).then(o=>(this.dataModelResult=o,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(i),o.listItems))})}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe(F(t=>(t.find(i=>i.id===e.id)||t.push(e),t)))}onActionSelectForce(e){if(typeof e=="number"&&e>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(t=>t.id===e)){let t=this.dataModelResult.listItems.find(i=>i.id===e);this.dataModelSelect=t,this.formControl.setValue(t);return}this.categoryService.ServiceGetOneById(e).subscribe({next:t=>{t.isSuccess&&(this.filteredOptions=this.push(t.item),this.dataModelSelect=t.item,this.formControl.setValue(t.item),this.optionChange.emit(t.item))}});return}if(typeof e==typeof R){this.filteredOptions=this.push(e),this.dataModelSelect=e,this.formControl.setValue(e);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new R,this.loadOptions()}};c.nextId=0,c.\u0275fac=function(t){return new(t||c)(m(Z),m(pe),m(J),m(me),m(ee))},c.\u0275cmp=B({type:c,selectors:[["app-cms-currency-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionRequired:"optionRequired",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:ye,decls:19,vars:22,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["matPrefix",""],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required"],["for","forminput",1,"color-highlight"],[3,"optionSelected","displayWith"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark"],[1,"fa","fa-rotate-right","action","color-green-dark",2,"margin-left","20px",3,"click","title"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(t,i){if(t&1){let o=T();U(),l(0,"div",1),u(1,"app-progress-spinner",2),l(2,"span",3),d(3,Me,2,4,"img",4),a(),u(4,"input",5),l(5,"label",6),b(6),a(),l(7,"mat-autocomplete",7,0),g("optionSelected",function(Se){return M(o),v(i.onActionSelect(Se.option.value))}),j(9,ge,4,4,"mat-option",8,N),h(11,"async"),a(),d(12,be,1,0,"i",9),d(13,Ie,1,0,"i",10),d(14,_e,1,0,"i",11),l(15,"i",12),h(16,"translate"),g("click",function(){return M(o),v(i.onActionButtonReload())}),a(),d(17,Re,3,3,"em"),x(18),a()}if(t&2){let o=z(8);r(),s("optionsInfoAreaId",i.constructor.name),r(2),p(i.dataModelSelect&&(i.dataModelSelect!=null&&i.dataModelSelect.linkMainImageIdSrc)?3:-1),r(),s("placeholder",S(i.optionPlaceholder))("formControl",i.formControl)("matAutocomplete",o)("required",i.optionRequired),H("disabled",i.optionDisabled?!0:null),r(2),E(i.optionLabel),r(),s("displayWith",i.displayFn),r(2),G(f(11,18,i.filteredOptions)),r(3),p(i.formControl.valid?-1:12),r(),p(i.optionRequired&&i.formControl.valid?13:-1),r(),p((i.dataModelSelect==null?null:i.dataModelSelect.id)>0?14:-1),r(),W("rotation360",i.publicHelper.processService.process.inRunArea[i.constructorInfoAreaId]),s("title",S(f(16,20,"ACTION.RELOAD"))),r(2),p(i.optionRequired&&!((i.dataModelSelect==null?null:i.dataModelSelect.id)>0)?17:-1)}},dependencies:[te,ie,re,ne,se,le,ce,ae,de,he,K,ue,fe],encapsulation:2});var Ce=c;export{Ce as a};
