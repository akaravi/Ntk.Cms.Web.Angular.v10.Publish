import{f as Je}from"./chunk-U3C6BAYD.js";import{b as Ye}from"./chunk-CGMGKQNO.js";import{a as q}from"./chunk-BLNS3IRN.js";import{B as ce,Dc as H,Ha as Fe,Ia as De,K as me,L as Ve,M as Re,R as Le,T as Oe,Ub as ze,Va as We,Vb as Ue,Wa as ge,Xa as be,Ya as Ce,fc as B,gc as Q,ma as N,o as L,r as O,s as ke,u as xe,uc as Ke,v as pe,vc as j,w as Pe,x as Ee}from"./chunk-YUK42NQZ.js";import{m as qe}from"./chunk-5FBTF4ET.js";import{a as Ge}from"./chunk-QIN7QE5W.js";import{$d as he,$f as Qe,Bb as _e,Bd as F,Ca as y,Cb as Ie,Db as ye,E as Y,Fa as o,Fk as He,H as J,Hb as P,Ic as le,Jc as R,Ka as m,Mb as u,Nb as I,Nc as Te,O as X,Ob as v,Od as de,P as Z,Pa as V,Pc as se,Sb as oe,Sd as D,Tb as ne,Td as ue,Ub as re,Ud as Be,Va as S,Vb as A,Wb as T,Xa as $,Xb as G,_b as Ae,bc as h,ca as g,cb as ee,cc as f,da as b,ed as we,ek as fe,ib as r,jb as a,kb as s,lb as p,lk as z,p as U,q as K,rd as Ne,sb as _,uc as ae,vb as C,wd as W,xb as d,xk as je,yb as te,zb as ie,zk as Se}from"./chunk-Y22UWZ2R.js";import{i as E}from"./chunk-SEDBTTTN.js";var ct=["*"];function mt(n,i){if(n&1&&(a(0,"label",13),u(1),s()),n&2){let e=d();r("for",T("app-cms-site-selector-",e.id)),o(),I(e.optionLabel)}}function dt(n,i){if(n&1&&(p(0,"img",14),h(1,"cmsthumbnail")),n&2){let e=d();r("src",A(f(1,2,e.dataModelSelect==null?null:e.dataModelSelect.linkMainImageIdSrc)),y)}}function ut(n,i){if(n&1&&(p(0,"img",14),h(1,"cmsthumbnail")),n&2){let e=d().$implicit;r("src",A(f(1,2,e.linkMainImageIdSrc)),y)}}function ht(n,i){if(n&1&&(a(0,"mat-option",15),S(1,ut,2,4,"img",5),a(2,"span"),u(3),s()()),n&2){let e=i.$implicit,t=d();r("value",e)("disabled",t.optionDisabled),o(),r("ngIf",e.linkMainImageIdSrc),o(2),I(t.displayOption(e))}}function ft(n,i){n&1&&p(0,"i",16)}function St(n,i){n&1&&p(0,"i",17)}function gt(n,i){if(n&1){let e=_();a(0,"i",18),C("click",function(){g(e);let l=d();return b(l.onActionSelectClear())}),s()}}function bt(n,i){n&1&&(a(0,"em"),u(1),h(2,"translate"),s()),n&2&&(o(),v("(",f(2,1,"TITLE.Necessary"),")"))}var w=class w{constructor(i,e,t,l,c,M){this.coreEnumService=i;this.cmsToastrService=e;this.cdr=t;this.publicHelper=l;this.translate=c;this.categoryService=M;this.id=++w.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new de;this.dataModelSelect=new fe;this.formControl=new pe;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionPlaceholder="";this.optionLabel="";this.optionChange=new $;this.optionReload=()=>this.onActionButtonReload();this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(i){this.onActionSelectForce(i)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(X(""),Y(1500),J(),Z(i=>typeof i=="string"||typeof i=="number"?this.DataGetAll(i||""):[]))}displayFn(i){return i?i.title:void 0}displayOption(i){return i?i.title:void 0}DataGetAll(i){return E(this,null,function*(){let e=new ue;e.rowPerPage=20,e.accessLoad=!0;let t=new D;t.propertyName="Title",t.value=i,t.searchType=F.Contains,t.clauseType=W.Or,e.filters.push(t),i&&typeof+i=="number"&&+i>0&&(t=new D,t.propertyName="Id",t.value=i,t.searchType=F.Equal,t.clauseType=W.Or,e.filters.push(t));let l=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(l,c,this.constructorInfoAreaId)}),yield U(this.categoryService.ServiceGetAll(e)).then(c=>(this.dataModelResult=c,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id.length<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0])},1e3),this.onActionSelect(this.dataModelResult.listItems[0])),this.publicHelper.processService.processStop(l),c.listItems))})}onActionSelect(i){this.optionDisabled||(this.dataModelSelect=i,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(i){return this.filteredOptions.pipe(K(e=>(e.find(t=>t.id===i.id)||e.push(i),e)))}onActionSelectForce(i){if(typeof i=="string"&&i.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===i)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===i)){let e=this.dataModelResult.listItems.find(t=>t.id===i);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(i).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof i==typeof fe){this.filteredOptions=this.push(i),this.dataModelSelect=i,this.formControl.setValue(i);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new fe,this.loadOptions()}};w.nextId=0,w.\u0275fac=function(e){return new(e||w)(m(he),m(j),m(ae),m(H),m(B),m(Se))},w.\u0275cmp=V({type:w,selectors:[["app-cms-sms-apipath-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:ct,decls:16,vars:19,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],["class","fa fa-times  action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,t){if(e&1){let l=_();te(),a(0,"div",1),p(1,"app-progress-spinner",2),S(2,mt,2,3,"label",3),a(3,"span",4),S(4,dt,2,4,"img",5),u(5," \xA0"),s(),p(6,"input",6),a(7,"mat-autocomplete",7,0),C("optionSelected",function(M){return g(l),b(t.onActionSelect(M.option.value))}),S(9,ht,4,4,"mat-option",8),h(10,"async"),s(),S(11,ft,1,0,"i",9)(12,St,1,0,"i",10)(13,gt,1,0,"i",11)(14,bt,3,3,"em",12),ie(15),s()}if(e&2){let l=P(8);o(),r("optionsInfoAreaId",t.constructorInfoAreaId),o(),r("ngIf",(t.optionLabel==null?null:t.optionLabel.length)>0),o(2),r("ngIf",t.dataModelSelect&&(t.dataModelSelect==null?null:t.dataModelSelect.linkMainImageIdSrc)),o(2),r("placeholder",A(t.optionPlaceholder))("id",T("app-cms-site-selector-",t.id))("formControl",t.formControl)("matAutocomplete",l)("required",t.optionRequired),ee("disabled",t.optionDisabled?!0:null),o(),r("displayWith",t.displayFn),o(2),r("ngForOf",f(10,17,t.filteredOptions)),o(2),r("ngIf",!t.formControl.valid),o(),r("ngIf",t.optionRequired&&t.formControl.valid),o(),r("ngIf",(t.dataModelSelect==null||t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)>0),o(),r("ngIf",t.optionRequired&&(!t.dataModelSelect||!t.dataModelSelect.id||(t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)===0))}},dependencies:[le,R,L,O,me,ce,be,ge,Ce,Oe,N,q,se,Q,Ye],encapsulation:2});var ve=w;var vt=["*"];function Mt(n,i){if(n&1&&(a(0,"label",11),u(1),s()),n&2){let e=d();r("for",T("app-cms-site-selector-",e.id)),o(),I(e.optionLabel)}}function _t(n,i){if(n&1&&(a(0,"mat-option",12)(1,"span"),u(2),s()()),n&2){let e=i.$implicit,t=d();r("value",e)("disabled",t.optionDisabled),o(2),I(t.displayOption(e))}}function It(n,i){n&1&&p(0,"i",13)}function yt(n,i){n&1&&p(0,"i",14)}function At(n,i){if(n&1){let e=_();a(0,"i",15),C("click",function(){g(e);let l=d();return b(l.onActionSelectClear())}),s()}}function Tt(n,i){n&1&&(a(0,"em"),u(1),h(2,"translate"),s()),n&2&&(o(),v("(",f(2,1,"TITLE.Necessary"),")"))}var k=class k{constructor(i,e,t,l,c,M){this.coreEnumService=i;this.cmsToastrService=e;this.translate=t;this.cdr=l;this.publicHelper=c;this.categoryService=M;this.id=++k.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModelResult=new de;this.dataModelSelect=new z;this.formControl=new pe;this.optionDisabled=!1;this.optionRequired=!1;this.optionSelectFirstItem=!1;this.optionSelectFirstItemOnChangeApi=!1;this.optionLabel="";this.optionPlaceholder="";this.optionChange=new $;this.optionReload=()=>this.onActionButtonReload();this.privateLinkApiPathId="";this.privateLinkApiPathIdLast="";this.publicHelper.processService.cdr=this.cdr}set optionSelectForce(i){this.onActionSelectForce(i)}set optionLinkApiPathId(i){i!=this.privateLinkApiPathId&&(this.privateLinkApiPathId!=""&&this.onActionSelectClear(),this.privateLinkApiPathId=i,this.privateLinkApiPathId!=this.privateLinkApiPathIdLast&&(this.optionSelectFirstItem=this.optionSelectFirstItemOnChangeApi),this.privateLinkApiPathIdLast=i,this.loadOptions())}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe(X(""),Y(1500),J(),Z(i=>typeof i=="string"||typeof i=="number"?this.DataGetAll(i||""):[]))}displayFn(i){return i?i.numberChar:void 0}displayOption(i){return i?i.numberChar:void 0}DataGetAll(i){return E(this,null,function*(){let e=new ue;e.rowPerPage=20,e.accessLoad=!0;let t=new D;t.propertyName="NumberChar",t.value=i,t.searchType=F.Contains,t.clauseType=W.Or,e.filters.push(t),this.privateLinkApiPathId&&this.privateLinkApiPathId.length>0&&(t=new D,t.propertyName="ApiPathAndApiNumbers",t.propertyAnyName="LinkApiPathId",t.value=this.privateLinkApiPathId,t.searchType=F.Equal,e.filters.push(t));let l=this.constructor.name+"main";return this.translate.get("MESSAGE.Receiving_information").subscribe(c=>{this.publicHelper.processService.processStart(l,c,this.constructorInfoAreaId)}),yield U(this.categoryService.ServiceGetAll(e)).then(c=>(this.dataModelResult=c,this.optionSelectFirstItem&&(!this.dataModelSelect||!this.dataModelSelect.id||this.dataModelSelect.id.length<=0)&&this.dataModelResult.listItems.length>0&&(this.optionSelectFirstItem=!1,setTimeout(()=>{this.formControl.setValue(this.dataModelResult.listItems[0]),this.onActionSelect(this.dataModelResult.listItems[0])},1e3)),this.publicHelper.processService.processStop(l),c.listItems))})}onActionSelect(i){this.optionDisabled||(this.dataModelSelect=i,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=new z,this.formControl.setValue(null),this.optionChange.emit(null))}push(i){return this.filteredOptions.pipe(K(e=>(e.find(t=>t.id===i.id)||e.push(i),e)))}onActionSelectForce(i){if(typeof i=="string"&&i.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===i)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===i)){let e=this.dataModelResult.listItems.find(t=>t.id===i);this.dataModelSelect=e,this.formControl.setValue(e);return}if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.numberChar===i)){let e=this.dataModelResult.listItems.find(t=>t.numberChar===i);this.dataModelSelect=e,this.formControl.setValue(e);return}this.categoryService.ServiceGetOneById(i).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):(!this.dataModelResult.listItems||this.dataModelResult.listItems.length===0)&&this.cmsToastrService.typeErrorMessage(e.errorMessage)}});return}if(typeof i==typeof z){this.filteredOptions=this.push(i),this.dataModelSelect=i,this.formControl.setValue(i);return}this.formControl.setValue(null)}onActionButtonReload(){this.dataModelSelect=new z,this.loadOptions()}};k.nextId=0,k.\u0275fac=function(e){return new(e||k)(m(he),m(j),m(B),m(ae),m(H),m(He))},k.\u0275cmp=V({type:k,selectors:[["app-cms-sms-api-number-selector"]],inputs:{optionDisabled:"optionDisabled",optionRequired:"optionRequired",optionSelectFirstItem:"optionSelectFirstItem",optionSelectFirstItemOnChangeApi:"optionSelectFirstItemOnChangeApi",optionLabel:"optionLabel",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLinkApiPathId:"optionLinkApiPathId"},outputs:{optionChange:"optionChange"},standalone:!1,ngContentSelectors:vt,decls:13,vars:18,consts:[["matauto","matAutocomplete"],[1,"input-style","has-borders","has-icon","input-style-always-active","validate-field","mb-4","loader-container"],[3,"optionsInfoAreaId"],["class","color-highlight",3,"for",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete","required","id"],[3,"optionSelected","displayWith"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","fa fa-info  invalid color-red-dark",4,"ngIf"],["class","fa fa-check  valid color-green-dark",4,"ngIf"],["class","fa fa-times  action color-red-dark",3,"click",4,"ngIf"],[4,"ngIf"],[1,"color-highlight",3,"for"],[3,"value","disabled"],[1,"fa","fa-info","invalid","color-red-dark"],[1,"fa","fa-check","valid","color-green-dark"],[1,"fa","fa-times","action","color-red-dark",3,"click"]],template:function(e,t){if(e&1){let l=_();te(),a(0,"div",1),p(1,"app-progress-spinner",2),S(2,Mt,2,3,"label",3),p(3,"input",4),a(4,"mat-autocomplete",5,0),C("optionSelected",function(M){return g(l),b(t.onActionSelect(M.option.value))}),S(6,_t,3,3,"mat-option",6),h(7,"async"),s(),S(8,It,1,0,"i",7)(9,yt,1,0,"i",8)(10,At,1,0,"i",9)(11,Tt,3,3,"em",10),ie(12),s()}if(e&2){let l=P(5);o(),r("optionsInfoAreaId",t.constructorInfoAreaId),o(),r("ngIf",(t.optionLabel==null?null:t.optionLabel.length)>0),o(),r("placeholder",A(t.optionPlaceholder))("id",T("app-cms-site-selector-",t.id))("formControl",t.formControl)("matAutocomplete",l)("required",t.optionRequired),ee("disabled",t.optionDisabled?!0:null),o(),r("displayWith",t.displayFn),o(2),r("ngForOf",f(7,16,t.filteredOptions)),o(2),r("ngIf",!t.formControl.valid),o(),r("ngIf",t.optionRequired&&t.formControl.valid),o(),r("ngIf",(t.dataModelSelect==null||t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)>0),o(),r("ngIf",t.optionRequired&&(!t.dataModelSelect||!t.dataModelSelect.id||(t.dataModelSelect.id==null?null:t.dataModelSelect.id.length)===0))}},dependencies:[le,R,L,O,me,ce,be,ge,Ce,N,q,se,Q],encapsulation:2});var Me=k;var kt=["Message"],xt=["vform"],Pt=n=>({direction:n});function Et(n,i){if(n&1){let e=_();a(0,"button",51),C("click",function(){g(e);let l=d(2);return b(l.onActionSendUrlToQDoc())}),p(1,"i",52),u(2),h(3,"translate"),s()}n&2&&(o(2),v(" ",f(3,1,"ACTION.VIEW")," "))}function Vt(n,i){if(n&1&&(a(0,"div")(1,"a",53),p(2,"img",54),h(3,"translate"),s()()),n&2){let e=d(2);o(),r("href",A(e.optionurlViewContent),y),o(),r("alt",A(f(3,5,"TITLE.Scan_the_barcode")))("src",e.optionurlViewContentQRCodeBase64,y)}}function Rt(n,i){if(n&1){let e=_();a(0,"div")(1,"div",17)(2,"div",31)(3,"p"),u(4),s()()(),a(5,"div",17)(6,"div",32)(7,"div",25)(8,"label",33),u(9),h(10,"translate"),s(),a(11,"input",34,2),re("ngModelChange",function(l){g(e);let c=d();return ne(c.QDocModel.username,l)||(c.QDocModel.username=l),b(l)}),s()(),S(13,Et,4,3,"button",35),p(14,"br")(15,"br"),a(16,"button",36),C("click",function(){g(e);let l=d();return b(l.onActionOpenLink())}),u(17),h(18,"translate"),s()(),a(19,"div",37),S(20,Vt,4,7,"div",16),a(21,"div",38)(22,"a",39),p(23,"i",40),s(),a(24,"a",41),p(25,"i",42),s(),a(26,"a",43),p(27,"i",44),s(),a(28,"a",45),p(29,"i",46),s(),a(30,"a",47),p(31,"i",48),s(),a(32,"span",49),C("click",function(){g(e);let l=d();return b(l.onActionCopied())}),p(33,"i",50),s()()()()()}if(n&2){let e=d();o(4),v(" ",e.optionLabel),o(5),I(f(10,21,"ACTION.ID_Code")),o(2),oe("ngModel",e.QDocModel.username),o(2),r("ngIf",e.optionurlViewContent&&e.optionurlViewContent.length>0&&e.QDocModel.username),o(4),v("",f(18,23,"ACTION.VIEW_PAGE")," "),o(3),r("ngIf",(e.optionurlViewContentQRCodeBase64==null?null:e.optionurlViewContentQRCodeBase64.length)>0&&(e.optionurlViewContent==null?null:e.optionurlViewContent.length)>0),o(2),r("href",G("whatsapp://send?text=",e.optionLabel,"- ",e.optionurlViewContent),y),o(2),r("href",G("https://telegram.me/share/url?url=",e.optionurlViewContent,"&text=",e.optionLabel),y),o(2),r("href",G("https://www.linkedin.com/shareArticle?url=",e.optionurlViewContent,"&title=",e.optionLabel),y),o(2),r("href",T("http://www.facebook.com/share.php?u=",e.optionurlViewContent),y),o(2),r("href",G("http://twitter.com/share?text=",e.optionLabel,"&url=",e.optionurlViewContent),y),o(2),r("cdkCopyToClipboard",e.optionurlViewContent)}}function Lt(n,i){if(n&1){let e=_();a(0,"app-cms-sms-api-number-selector",55),h(1,"translate"),C("optionChange",function(l){g(e);let c=d();return b(c.onActionSelectApiNumber(l))}),s()}if(n&2){let e=d();r("optionLinkApiPathId",e.dataModel==null?null:e.dataModel.linkApiPathId)("optionPlaceholder",f(1,4,"TITLE.sender_number"))("optionSelectFirstItem",!0)("optionSelectFirstItemOnChangeApi",!0)}}function Ot(n,i){n&1&&(a(0,"mat-error"),u(1),h(2,"translate"),a(3,"strong"),u(4),h(5,"translate"),s()()),n&2&&(o(),v(" ",f(2,2,"TITLE.Message_Text")," "),o(3),I(f(5,4,"MESSAGE.required")))}function Nt(n,i){if(n&1){let e=_();a(0,"div",25)(1,"label",56),u(2),h(3,"translate"),s(),a(4,"textarea",57,3),re("ngModelChange",function(l){g(e);let c=d();return ne(c.dataModel.toNumbers,l)||(c.dataModel.toNumbers=l),b(l)}),s(),a(6,"em")(7,"strong",58),u(8),h(9,"translate"),s()()()}if(n&2){let e=d();o(2),I(f(3,3,"TITLE.Receiver_number")),o(2),oe("ngModel",e.dataModel.toNumbers),o(4),I(f(9,5,"TITLE.You_can_separate_the_number_of_the_recipient_of_the_message_with_an_inter"))}}function Ft(n,i){if(n&1&&(a(0,"button",61),p(1,"i",52),u(2),h(3,"translate"),s()),n&2){d(2);let e=P(13);r("disabled",!e.valid),o(2),v(" ",f(3,2,"ACTION.Send_Message")," ")}}function Dt(n,i){if(n&1&&(a(0,"div",59),S(1,Ft,4,4,"button",60),s()),n&2){let e=d();o(),r("ngIf",!e.publicHelper.processService.process.inRunAll)}}var x=class x{constructor(i,e,t,l,c,M,Bt,Qt,jt,Ht){this.cmsToastrService=i;this.data=e;this.dialogRef=t;this.smsMainApiPathService=l;this.http=c;this.router=M;this.translate=Bt;this.tokenHelper=Qt;this.cmsStoreService=jt;this.publicHelper=Ht;this.id=++x.nextId;this.constructorInfoAreaId=this.constructor.name;this.dataModel=new je;this.formInfo=new Be;this.tokenInfo=new Qe;this.optionLabel="";this.optionurlViewContentQRCodeBase64="";this.optionurlViewContent="";this.QDocModel={};this.sendByShow=!1;e&&(this.optionLabel=e.title,this.optionurlViewContentQRCodeBase64=e.urlViewContentQRCodeBase64,this.optionurlViewContent=e.urlViewContent,this.formInfo.formTitle=e.title),this.formInfo.formDescription="\u0645\u062D\u062A\u0648\u0627 \u0631\u0627 \u0627\u0634\u062A\u0631\u0627\u06A9 \u0628\u06AF\u0630\u0627\u0631\u06CC\u062F"}ngOnInit(){this.dataModel.message=`${this.optionLabel}
    ${this.optionurlViewContent}`,this.tokenInfo=this.cmsStoreService.getStateAll.tokenInfoStore,this.cmsApiStoreSubscribe=this.cmsStoreService.getState(i=>i.tokenInfoStore).subscribe(i=>E(this,null,function*(){this.tokenInfo=i}))}ngOnDestroy(){this.cmsApiStoreSubscribe&&this.cmsApiStoreSubscribe.unsubscribe()}onActionSelectApiNumber(i){i&&i.id?.length>0?this.dataModel.linkFromNumber=i.id:i&&i.numberChar?.length>0&&(this.dataModel.linkFromNumber=i.numberChar)}onActionMessageLTR(){this.message.nativeElement.style.direction="ltr",this.message.nativeElement.style.textAlign="left"}onActionMessageRTL(){this.message.nativeElement.style.direction="rtl",this.message.nativeElement.style.textAlign="right"}onActionSelectPrivateSiteConfig(i){this.dataModelParentSelected=i,i&&i.id?.length>0&&(this.dataModel.linkApiPathId=i.id,this.sendByShow=!1,i.apiAbilitySendByDirect&&(this.dataModel.sendByQueue=!1),i.apiAbilitySendByQueue&&(this.dataModel.sendByQueue=!0),i.apiAbilitySendByQueue&&i.apiAbilitySendByDirect&&(this.sendByShow=!0))}onActionSendUrlToQDoc(){if(this.QDocModel.message=this.optionurlViewContent,!this.QDocModel.username&&this.QDocModel.username.length<=0){this.cmsToastrService.typeWarningSelected("\u06A9\u062F \u0634\u0646\u0627\u0633\u0647 \u0631\u0627 \u0627\u0632 \u0648\u0628\u0633\u0627\u06CC\u062A https://Qdoc.ir \u062F\u0631\u06CC\u0627\u0641\u062A \u0646\u0645\u0627\u06CC\u06CC\u062F");return}this.http.post(Ge.cmsServerConfig.configQDocServerPath,this.QDocModel,{headers:{}}).subscribe({next:i=>{this.translate.get("MESSAGE.The_order_was_sent_to_the_website").subscribe(e=>{this.cmsToastrService.typeSuccessMessage(e)})},error:i=>{this.cmsToastrService.typeErrorMessage("\u0628\u0631\u0631\u0648\u0632 \u062E\u0637\u0627 \u062F\u0631 \u0627\u0631\u0633\u0627\u0644 \u062F\u0633\u062A\u0648\u0631",i)}})}onFormSubmit(){if(!this.formGroup.valid)return;(!this.dataModel.linkApiPathId||this.dataModel.linkApiPathId.length<=0)&&this.cmsToastrService.typeErrorFormInvalid(),this.formInfo.formSubmitAllow=!1;let i=this.constructor.name+"main";this.translate.get("MESSAGE.Receiving_information").subscribe(e=>{this.publicHelper.processService.processStart(i,e,this.constructorInfoAreaId)}),this.formInfo.formAlert="",this.formInfo.formError="",this.smsMainApiPathService.ServiceSendMessage(this.dataModel).subscribe({next:e=>{this.formInfo.formSubmitAllow=!0,e.isSuccess?(this.translate.get("MESSAGE.Submit_request_was_successfully_registered").subscribe(t=>{this.formInfo.formAlert=t}),this.translate.get("MESSAGE.Send_request_was_successfully_registered").subscribe(t=>{this.cmsToastrService.typeSuccessMessage(t)})):(this.translate.get("ERRORMESSAGE.MESSAGE.typeError").subscribe(t=>{this.formInfo.formAlert=t}),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.publicHelper.processService.processStop(i)},error:e=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(e),this.publicHelper.processService.processStop(i,!1)},complete:()=>{}})}onActionCopied(){this.cmsToastrService.typeSuccessCopedToClipboard()}onActionOpenLink(){let i=this.router.serializeUrl(this.router.createUrlTree([this.optionurlViewContent]));window.open(this.optionurlViewContent,"_blank")}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}};x.nextId=0,x.\u0275fac=function(e){return new(e||x)(m(j),m(De),m(Fe),m(Se),m(we),m(Ne),m(B),m(Ke),m(qe),m(H))},x.\u0275cmp=V({type:x,selectors:[["app-cms-link-to"]],viewQuery:function(e,t){if(e&1&&(_e(kt,5),_e(xt,5)),e&2){let l;Ie(l=ye())&&(t.message=l.first),Ie(l=ye())&&(t.formGroup=l.first)}},inputs:{optionLabel:"optionLabel",optionurlViewContentQRCodeBase64:"optionurlViewContentQRCodeBase64",optionurlViewContent:"optionurlViewContent"},standalone:!1,decls:42,vars:30,consts:[["vform","ngForm"],["Message",""],["QDocCode",""],["ToNumbers",""],[3,"Key"],[1,"card","card-style","loader-container"],[3,"optionsInfoAreaId"],[1,"menu-title"],[1,"color-highlight"],[1,"close-menu",3,"click"],[1,"fa","fa-times-circle"],[1,"content","mb-0"],[1,"mb-0","color-highlight","font-600","font-12"],[3,"ngSubmit","ngStyle"],[3,"label"],[1,"row",2,"padding","5px"],[4,"ngIf"],[1,"row"],[1,"col-md-6","col-sm-6","col-xs-9",2,"padding-top","40px"],[3,"optionChange","optionSelectForce","optionPlaceholder","optionSelectFirstItem"],[3,"optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionSelectFirstItemOnChangeApi","optionChange",4,"ngIf"],[1,"col-sm-12","col-md-6"],[1,"message-box"],[1,"row",2,"margin-bottom","0px !important","height","90px"],[1,"row",2,"margin-bottom","0px !important","height","283px"],[1,"input-style","has-borders","no-icon","input-style-always-active","validate-field","mb-4"],["for","dataModel.message",1,"color-highlight"],["matInput","","name","dataModel.message","type","text","placeholder","...","id","dataModel.message","minlength","1","maxlength","500","rows","9",1,"form-control","validate-name",2,"height","276px",3,"ngModelChange","ngModel"],[1,"row",2,"margin-bottom","0px !important","height","140px","margin-top","11px"],["class","input-style has-borders  no-icon input-style-always-active validate-field mb-4",4,"ngIf"],["class","row","style","margin-bottom: 0px !important;height:40px;bottom: 4vh;justify-content: center;",4,"ngIf"],[1,"col-md-12","col-sm-12","col-xs-18"],[1,"col-md-6","col-sm-6","col-xs-9"],["for","QDocModel.username",1,"color-highlight"],["matInput","","type","text","name","QDocModel.username","id","QDocModel.username","placeholder","12345",1,"form-control","validate-name",3,"ngModelChange","ngModel"],["type","button","class","btn font-13 font-600 btn-s m-1 rounded-s shadow-xl border-0 gradient-highlight",3,"click",4,"ngIf"],["type","button","type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"col-md-6","col-sm-6","col-xs-9",2,"text-align","center"],[1,"mt-4"],["target","_blank",1,"style","whatsapp",3,"href"],[1,"flaticon-whatsapp","text-dark"],["target","_blank",1,"style","telegram",3,"href"],[1,"flaticon2-telegram-logo","text-dark"],["target","_blank",1,"style","linkedin",3,"href"],[1,"flaticon-linkedin-logo","text-dark"],["target","_blank",1,"style","facebook",3,"href"],[1,"flaticon-facebook-letter-logo","text-dark"],["target","_blank",1,"style","twitter",3,"href"],[1,"flaticon-twitter-logo","text-dark"],[1,"navi-icon","style","cursor",3,"click","cdkCopyToClipboard"],[1,"flaticon2-copy","text-dark"],["type","button",1,"btn","font-13","font-600","btn-s","m-1","rounded-s","shadow-xl","border-0","gradient-highlight",3,"click"],[1,"fa","fa-check-square-o"],["target","_blank",3,"href"],["height","200px","width","200px",3,"src","alt"],[3,"optionChange","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionSelectFirstItemOnChangeApi"],["for","dataModel.toNumbers",1,"color-highlight"],["matInput","","name","dataModel.toNumbers","id","dataModel.toNumbers","type","text","placeholder","0912","rows","2",2,"height","138px",3,"ngModelChange","ngModel"],[1,"info-field-text"],[1,"row",2,"margin-bottom","0px !important","height","40px","bottom","4vh","justify-content","center"],["type","submit","class","message-box-button",3,"disabled",4,"ngIf"],["type","submit",1,"message-box-button",3,"disabled"]],template:function(e,t){if(e&1){let l=_();p(0,"app-cms-guide-notice",4),a(1,"div",5),p(2,"app-progress-spinner",6),a(3,"div",7)(4,"p",8),u(5),s(),a(6,"a",9),C("click",function(){return g(l),b(t.onFormCancel())}),p(7,"i",10),s(),p(8,"hr"),s(),a(9,"div",11)(10,"p",12),u(11),s(),a(12,"form",13,0),C("ngSubmit",function(){return g(l),b(t.onFormSubmit())}),a(14,"mat-tab-group")(15,"mat-tab",14),h(16,"translate"),a(17,"div",15),S(18,Rt,34,25,"div",16),s()(),a(19,"mat-tab",14),h(20,"translate"),a(21,"div",17)(22,"div",18)(23,"app-cms-sms-apipath-selector",19),h(24,"translate"),C("optionChange",function(M){return g(l),b(t.onActionSelectPrivateSiteConfig(M))}),s(),S(25,Lt,2,6,"app-cms-sms-api-number-selector",20),s(),a(26,"div",21)(27,"div",22),p(28,"div",23),a(29,"div",24)(30,"div",25)(31,"label",26),u(32),h(33,"translate"),s(),a(34,"textarea",27,1),re("ngModelChange",function(M){return g(l),ne(t.dataModel.message,M)||(t.dataModel.message=M),b(M)}),s(),a(36,"em"),u(37),s(),S(38,Ot,6,6,"mat-error",16),s()(),a(39,"div",28),S(40,Nt,10,7,"div",29),s(),S(41,Dt,2,1,"div",30),s()()()()()()()()}if(e&2){let l=P(35);r("Key","linkto.content"),o(2),r("optionsInfoAreaId",t.constructorInfoAreaId),o(3),v("",t.formInfo.formTitle," "),o(6),v(" ",t.formInfo.formDescription," "),o(),r("ngStyle",Ae(28,Pt,t.tokenInfo==null||t.tokenInfo.access==null?null:t.tokenInfo.access.direction)),o(3),r("label",A(f(16,20,"TITLE.LINKTO"))),o(3),r("ngIf",t.optionurlViewContent&&t.optionurlViewContent.length>0),o(),r("label",A(f(20,22,"TITLE.Send_Message"))),o(4),r("optionSelectForce",t.dataModel==null?null:t.dataModel.linkApiPathId)("optionPlaceholder",f(24,24,"TITLE.Direction"))("optionSelectFirstItem",!0),o(2),r("ngIf",(t.dataModel.linkApiPathId==null?null:t.dataModel.linkApiPathId.length)>0),o(7),I(f(33,26,"TITLE.Message_Text")),o(2),oe("ngModel",t.dataModel.message),o(3),v("",l.value.length," / 500"),o(),r("ngIf",l.errors==null?null:l.errors.required),o(2),r("ngIf",(!t.dataModel.toContactCategories||(t.dataModel.toContactCategories==null?null:t.dataModel.toContactCategories.length)===0)&&(!t.dataModel.toContactContents||(t.dataModel.toContactContents==null?null:t.dataModel.toContactContents.length)===0)),o(),r("ngIf",t.formInfo.formSubmitAllow)}},dependencies:[R,Te,Ee,L,O,ke,Ve,Re,Pe,xe,Le,N,ze,Ue,We,q,Je,ve,Me,Q],styles:[".style[_ngcontent-%COMP%]{padding:6px;margin:2px;font-size:20px;text-align:center;text-decoration:none;border:black solid 2px;border-radius:50%}.style-copy[_ngcontent-%COMP%]{color:#000;border-radius:20%}.whatsapp[_ngcontent-%COMP%]:hover{background-color:#adff2f}.facebook[_ngcontent-%COMP%]:hover{background:#3b5998}.twitter[_ngcontent-%COMP%]:hover{background:#55acee}.linkedin[_ngcontent-%COMP%]:hover{background:#007bb5}.telegram[_ngcontent-%COMP%]:hover{background:#125688}.cursor[_ngcontent-%COMP%]{cursor:pointer}.message-box[_ngcontent-%COMP%]{background-image:url(/assets/media/bg/iphone.png);height:600px;width:300px;background-position:center;background-repeat:no-repeat;background-size:cover;padding-right:33px;padding-left:33px}.message-box-button[_ngcontent-%COMP%]{color:#00f;border-color:transparent;background-color:transparent}.message-box-button[_ngcontent-%COMP%]:hover{color:red;font-size:initial}.message-box-button[_ngcontent-%COMP%]:active{color:#a200ff}"]});var lt=x;export{lt as a};
